function Doe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fG(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var hG={exports:{}},AS={},dG={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=Symbol.for("react.element"),_oe=Symbol.for("react.portal"),Toe=Symbol.for("react.fragment"),Eoe=Symbol.for("react.strict_mode"),Aoe=Symbol.for("react.profiler"),koe=Symbol.for("react.provider"),Ioe=Symbol.for("react.context"),Noe=Symbol.for("react.forward_ref"),Roe=Symbol.for("react.suspense"),$oe=Symbol.for("react.memo"),Moe=Symbol.for("react.lazy"),kL=Symbol.iterator;function Ooe(t){return t===null||typeof t!="object"?null:(t=kL&&t[kL]||t["@@iterator"],typeof t=="function"?t:null)}var pG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vG=Object.assign,gG={};function kv(t,e,n){this.props=t,this.context=e,this.refs=gG,this.updater=n||pG}kv.prototype.isReactComponent={};kv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mG(){}mG.prototype=kv.prototype;function XR(t,e,n){this.props=t,this.context=e,this.refs=gG,this.updater=n||pG}var KR=XR.prototype=new mG;KR.constructor=XR;vG(KR,kv.prototype);KR.isPureReactComponent=!0;var IL=Array.isArray,yG=Object.prototype.hasOwnProperty,YR={current:null},xG={key:!0,ref:!0,__self:!0,__source:!0};function wG(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)yG.call(e,r)&&!xG.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:ny,type:t,key:a,ref:o,props:i,_owner:YR.current}}function Foe(t,e){return{$$typeof:ny,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ZR(t){return typeof t=="object"&&t!==null&&t.$$typeof===ny}function Poe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NL=/\/+/g;function cT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Poe(""+t.key):e.toString(36)}function Mw(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ny:case _oe:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+cT(o,0):r,IL(i)?(n="",t!=null&&(n=t.replace(NL,"$&/")+"/"),Mw(i,e,n,"",function(l){return l})):i!=null&&(ZR(i)&&(i=Foe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(NL,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",IL(t))for(var s=0;s<t.length;s++){a=t[s];var u=r+cT(a,s);o+=Mw(a,e,n,u,i)}else if(u=Ooe(t),typeof u=="function")for(t=u.call(t),s=0;!(a=t.next()).done;)a=a.value,u=r+cT(a,s++),o+=Mw(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ox(t,e,n){if(t==null)return t;var r=[],i=0;return Mw(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Loe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bi={current:null},Ow={transition:null},zoe={ReactCurrentDispatcher:Bi,ReactCurrentBatchConfig:Ow,ReactCurrentOwner:YR};kt.Children={map:ox,forEach:function(t,e,n){ox(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ox(t,function(){e++}),e},toArray:function(t){return ox(t,function(e){return e})||[]},only:function(t){if(!ZR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=kv;kt.Fragment=Toe;kt.Profiler=Aoe;kt.PureComponent=XR;kt.StrictMode=Eoe;kt.Suspense=Roe;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zoe;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vG({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=YR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)yG.call(e,u)&&!xG.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:ny,type:t.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:Ioe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:koe,_context:t},t.Consumer=t};kt.createElement=wG;kt.createFactory=function(t){var e=wG.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:Noe,render:t}};kt.isValidElement=ZR;kt.lazy=function(t){return{$$typeof:Moe,_payload:{_status:-1,_result:t},_init:Loe}};kt.memo=function(t,e){return{$$typeof:$oe,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Ow.transition;Ow.transition={};try{t()}finally{Ow.transition=e}};kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};kt.useCallback=function(t,e){return Bi.current.useCallback(t,e)};kt.useContext=function(t){return Bi.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return Bi.current.useDeferredValue(t)};kt.useEffect=function(t,e){return Bi.current.useEffect(t,e)};kt.useId=function(){return Bi.current.useId()};kt.useImperativeHandle=function(t,e,n){return Bi.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return Bi.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return Bi.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return Bi.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return Bi.current.useReducer(t,e,n)};kt.useRef=function(t){return Bi.current.useRef(t)};kt.useState=function(t){return Bi.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return Bi.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return Bi.current.useTransition()};kt.version="18.2.0";dG.exports=kt;var B=dG.exports;const Cn=nl(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Boe=B,Voe=Symbol.for("react.element"),Woe=Symbol.for("react.fragment"),Uoe=Object.prototype.hasOwnProperty,Goe=Boe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hoe={key:!0,ref:!0,__self:!0,__source:!0};function bG(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Uoe.call(e,r)&&!Hoe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Voe,type:t,key:a,ref:o,props:i,_owner:Goe.current}}AS.Fragment=Woe;AS.jsx=bG;AS.jsxs=bG;hG.exports=AS;var H=hG.exports,fk={},CG={exports:{}},Va={},SG={exports:{}},DG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var V=O.length;O.push(F);e:for(;0<V;){var X=V-1>>>1,P=O[X];if(0<i(P,F))O[X]=F,O[V]=P,V=X;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],V=O.pop();if(V!==F){O[0]=V;e:for(var X=0,P=O.length,U=P>>>1;X<U;){var j=2*(X+1)-1,q=O[j],Y=j+1,ne=O[Y];if(0>i(q,V))Y<P&&0>i(ne,q)?(O[X]=ne,O[Y]=V,X=Y):(O[X]=q,O[j]=V,X=j);else if(Y<P&&0>i(ne,V))O[X]=ne,O[Y]=V,X=Y;else break e}}return F}function i(O,F){var V=O.sortIndex-F.sortIndex;return V!==0?V:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],l=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var F=n(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=O)r(l),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(l)}}function w(O){if(v=!1,x(O),!p)if(n(u)!==null)p=!0,$(b);else{var F=n(l);F!==null&&L(w,F.startTime-O)}}function b(O,F){p=!1,v&&(v=!1,g(S),S=-1),d=!0;var V=h;try{for(x(F),f=n(u);f!==null&&(!(f.expirationTime>F)||O&&!E());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var P=X(f.expirationTime<=F);F=t.unstable_now(),typeof P=="function"?f.callback=P:f===n(u)&&r(u),x(F)}else r(u);f=n(u)}if(f!==null)var U=!0;else{var j=n(l);j!==null&&L(w,j.startTime-F),U=!1}return U}finally{f=null,h=V,d=!1}}var C=!1,D=null,S=-1,_=5,T=-1;function E(){return!(t.unstable_now()-T<_)}function A(){if(D!==null){var O=t.unstable_now();T=O;var F=!0;try{F=D(!0,O)}finally{F?N():(C=!1,D=null)}}else C=!1}var N;if(typeof y=="function")N=function(){y(A)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,M=R.port2;R.port1.onmessage=A,N=function(){M.postMessage(null)}}else N=function(){m(A,0)};function $(O){D=O,C||(C=!0,N())}function L(O,F){S=m(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,$(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var V=h;h=F;try{return O()}finally{h=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=h;h=O;try{return F()}finally{h=V}},t.unstable_scheduleCallback=function(O,F,V){var X=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,O){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=V+P,O={id:c++,callback:F,priorityLevel:O,startTime:V,expirationTime:P,sortIndex:-1},V>X?(O.sortIndex=V,e(l,O),n(u)===null&&O===n(l)&&(v?(g(S),S=-1):v=!0,L(w,V-X))):(O.sortIndex=P,e(u,O),p||d||(p=!0,$(b))),O},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(O){var F=h;return function(){var V=h;h=F;try{return O.apply(this,arguments)}finally{h=V}}}})(DG);SG.exports=DG;var joe=SG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _G=B,$a=joe;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TG=new Set,Hm={};function Hh(t,e){zp(t,e),zp(t+"Capture",e)}function zp(t,e){for(Hm[t]=e,t=0;t<e.length;t++)TG.add(e[t])}var Uu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hk=Object.prototype.hasOwnProperty,qoe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RL={},$L={};function Xoe(t){return hk.call($L,t)?!0:hk.call(RL,t)?!1:qoe.test(t)?$L[t]=!0:(RL[t]=!0,!1)}function Koe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yoe(t,e,n,r){if(e===null||typeof e>"u"||Koe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vi(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xr[t]=new Vi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xr[e]=new Vi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xr[t]=new Vi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xr[t]=new Vi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xr[t]=new Vi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xr[t]=new Vi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xr[t]=new Vi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xr[t]=new Vi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xr[t]=new Vi(t,5,!1,t.toLowerCase(),null,!1,!1)});var QR=/[\-:]([a-z])/g;function JR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(QR,JR);Xr[e]=new Vi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(QR,JR);Xr[e]=new Vi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(QR,JR);Xr[e]=new Vi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xr[t]=new Vi(t,1,!1,t.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xr[t]=new Vi(t,1,!1,t.toLowerCase(),null,!0,!0)});function e$(t,e,n,r){var i=Xr.hasOwnProperty(e)?Xr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yoe(e,n,i,r)&&(n=null),r||i===null?Xoe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rl=_G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sx=Symbol.for("react.element"),jd=Symbol.for("react.portal"),qd=Symbol.for("react.fragment"),t$=Symbol.for("react.strict_mode"),dk=Symbol.for("react.profiler"),EG=Symbol.for("react.provider"),AG=Symbol.for("react.context"),n$=Symbol.for("react.forward_ref"),pk=Symbol.for("react.suspense"),vk=Symbol.for("react.suspense_list"),r$=Symbol.for("react.memo"),El=Symbol.for("react.lazy"),kG=Symbol.for("react.offscreen"),ML=Symbol.iterator;function ug(t){return t===null||typeof t!="object"?null:(t=ML&&t[ML]||t["@@iterator"],typeof t=="function"?t:null)}var kn=Object.assign,fT;function jg(t){if(fT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fT=e&&e[1]||""}return`
`+fT+t}var hT=!1;function dT(t,e){if(!t||hT)return"";hT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=s);break}}}finally{hT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jg(t):""}function Zoe(t){switch(t.tag){case 5:return jg(t.type);case 16:return jg("Lazy");case 13:return jg("Suspense");case 19:return jg("SuspenseList");case 0:case 2:case 15:return t=dT(t.type,!1),t;case 11:return t=dT(t.type.render,!1),t;case 1:return t=dT(t.type,!0),t;default:return""}}function gk(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qd:return"Fragment";case jd:return"Portal";case dk:return"Profiler";case t$:return"StrictMode";case pk:return"Suspense";case vk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case AG:return(t.displayName||"Context")+".Consumer";case EG:return(t._context.displayName||"Context")+".Provider";case n$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r$:return e=t.displayName||null,e!==null?e:gk(t.type)||"Memo";case El:e=t._payload,t=t._init;try{return gk(t(e))}catch{}}return null}function Qoe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gk(e);case 8:return e===t$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Joe(t){var e=IG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ux(t){t._valueTracker||(t._valueTracker=Joe(t))}function NG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mk(t,e){var n=e.checked;return kn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function OL(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RG(t,e){e=e.checked,e!=null&&e$(t,"checked",e,!1)}function yk(t,e){RG(t,e);var n=pc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xk(t,e.type,n):e.hasOwnProperty("defaultValue")&&xk(t,e.type,pc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FL(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xk(t,e,n){(e!=="number"||yb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qg=Array.isArray;function xp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return kn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PL(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(qg(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pc(n)}}function $G(t,e){var n=pc(e.value),r=pc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function LL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lx,OG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lx=lx||document.createElement("div"),lx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ese=["Webkit","ms","Moz","O"];Object.keys(gm).forEach(function(t){ese.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gm[e]=gm[t]})});function FG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gm.hasOwnProperty(t)&&gm[t]?(""+e).trim():e+"px"}function PG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tse=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ck(t,e){if(e){if(tse[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function Sk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dk=null;function i$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _k=null,wp=null,bp=null;function zL(t){if(t=ay(t)){if(typeof _k!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=$S(e),_k(t.stateNode,t.type,e))}}function LG(t){wp?bp?bp.push(t):bp=[t]:wp=t}function zG(){if(wp){var t=wp,e=bp;if(bp=wp=null,zL(t),e)for(t=0;t<e.length;t++)zL(e[t])}}function BG(t,e){return t(e)}function VG(){}var pT=!1;function WG(t,e,n){if(pT)return t(e,n);pT=!0;try{return BG(t,e,n)}finally{pT=!1,(wp!==null||bp!==null)&&(VG(),zG())}}function qm(t,e){var n=t.stateNode;if(n===null)return null;var r=$S(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var Tk=!1;if(Uu)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){Tk=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{Tk=!1}function nse(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var mm=!1,xb=null,wb=!1,Ek=null,rse={onError:function(t){mm=!0,xb=t}};function ise(t,e,n,r,i,a,o,s,u){mm=!1,xb=null,nse.apply(rse,arguments)}function ase(t,e,n,r,i,a,o,s,u){if(ise.apply(this,arguments),mm){if(mm){var l=xb;mm=!1,xb=null}else throw Error(Ee(198));wb||(wb=!0,Ek=l)}}function jh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function BL(t){if(jh(t)!==t)throw Error(Ee(188))}function ose(t){var e=t.alternate;if(!e){if(e=jh(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return BL(i),t;if(a===r)return BL(i),e;a=a.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function GG(t){return t=ose(t),t!==null?HG(t):null}function HG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HG(t);if(e!==null)return e;t=t.sibling}return null}var jG=$a.unstable_scheduleCallback,VL=$a.unstable_cancelCallback,sse=$a.unstable_shouldYield,use=$a.unstable_requestPaint,qn=$a.unstable_now,lse=$a.unstable_getCurrentPriorityLevel,a$=$a.unstable_ImmediatePriority,qG=$a.unstable_UserBlockingPriority,bb=$a.unstable_NormalPriority,cse=$a.unstable_LowPriority,XG=$a.unstable_IdlePriority,kS=null,Xs=null;function fse(t){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(kS,t,void 0,(t.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:pse,hse=Math.log,dse=Math.LN2;function pse(t){return t>>>=0,t===0?32:31-(hse(t)/dse|0)|0}var cx=64,fx=4194304;function Xg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Xg(s):(a&=o,a!==0&&(r=Xg(a)))}else o=n&~i,o!==0?r=Xg(o):a!==0&&(r=Xg(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ss(e),i=1<<n,r|=t[n],e&=~i;return r}function vse(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gse(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ss(a),s=1<<o,u=i[o];u===-1?(!(s&n)||s&r)&&(i[o]=vse(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}function Ak(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KG(){var t=cx;return cx<<=1,!(cx&4194240)&&(cx=64),t}function vT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ry(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ss(e),t[e]=n}function mse(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ss(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function o$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ss(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xt=0;function YG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZG,s$,QG,JG,e9,kk=!1,hx=[],Yl=null,Zl=null,Ql=null,Xm=new Map,Km=new Map,$l=[],yse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WL(t,e){switch(t){case"focusin":case"focusout":Yl=null;break;case"dragenter":case"dragleave":Zl=null;break;case"mouseover":case"mouseout":Ql=null;break;case"pointerover":case"pointerout":Xm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Km.delete(e.pointerId)}}function cg(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=ay(e),e!==null&&s$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xse(t,e,n,r,i){switch(e){case"focusin":return Yl=cg(Yl,t,e,n,r,i),!0;case"dragenter":return Zl=cg(Zl,t,e,n,r,i),!0;case"mouseover":return Ql=cg(Ql,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Xm.set(a,cg(Xm.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Km.set(a,cg(Km.get(a)||null,t,e,n,r,i)),!0}return!1}function t9(t){var e=Pf(t.target);if(e!==null){var n=jh(e);if(n!==null){if(e=n.tag,e===13){if(e=UG(n),e!==null){t.blockedOn=e,e9(t.priority,function(){QG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ik(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dk=r,n.target.dispatchEvent(r),Dk=null}else return e=ay(n),e!==null&&s$(e),t.blockedOn=n,!1;e.shift()}return!0}function UL(t,e,n){Fw(t)&&n.delete(e)}function wse(){kk=!1,Yl!==null&&Fw(Yl)&&(Yl=null),Zl!==null&&Fw(Zl)&&(Zl=null),Ql!==null&&Fw(Ql)&&(Ql=null),Xm.forEach(UL),Km.forEach(UL)}function fg(t,e){t.blockedOn===e&&(t.blockedOn=null,kk||(kk=!0,$a.unstable_scheduleCallback($a.unstable_NormalPriority,wse)))}function Ym(t){function e(i){return fg(i,t)}if(0<hx.length){fg(hx[0],t);for(var n=1;n<hx.length;n++){var r=hx[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yl!==null&&fg(Yl,t),Zl!==null&&fg(Zl,t),Ql!==null&&fg(Ql,t),Xm.forEach(e),Km.forEach(e),n=0;n<$l.length;n++)r=$l[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$l.length&&(n=$l[0],n.blockedOn===null);)t9(n),n.blockedOn===null&&$l.shift()}var Cp=rl.ReactCurrentBatchConfig,Sb=!0;function bse(t,e,n,r){var i=Xt,a=Cp.transition;Cp.transition=null;try{Xt=1,u$(t,e,n,r)}finally{Xt=i,Cp.transition=a}}function Cse(t,e,n,r){var i=Xt,a=Cp.transition;Cp.transition=null;try{Xt=4,u$(t,e,n,r)}finally{Xt=i,Cp.transition=a}}function u$(t,e,n,r){if(Sb){var i=Ik(t,e,n,r);if(i===null)_T(t,e,r,Db,n),WL(t,r);else if(xse(i,t,e,n,r))r.stopPropagation();else if(WL(t,r),e&4&&-1<yse.indexOf(t)){for(;i!==null;){var a=ay(i);if(a!==null&&ZG(a),a=Ik(t,e,n,r),a===null&&_T(t,e,r,Db,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else _T(t,e,r,null,n)}}var Db=null;function Ik(t,e,n,r){if(Db=null,t=i$(r),t=Pf(t),t!==null)if(e=jh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Db=t,null}function n9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lse()){case a$:return 1;case qG:return 4;case bb:case cse:return 16;case XG:return 536870912;default:return 16}default:return 16}}var Fl=null,l$=null,Pw=null;function r9(){if(Pw)return Pw;var t,e=l$,n=e.length,r,i="value"in Fl?Fl.value:Fl.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Pw=i.slice(t,1<r?1-r:void 0)}function Lw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dx(){return!0}function GL(){return!1}function Wa(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?dx:GL,this.isPropagationStopped=GL,this}return kn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dx)},persist:function(){},isPersistent:dx}),e}var Iv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c$=Wa(Iv),iy=kn({},Iv,{view:0,detail:0}),Sse=Wa(iy),gT,mT,hg,IS=kn({},iy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hg&&(hg&&t.type==="mousemove"?(gT=t.screenX-hg.screenX,mT=t.screenY-hg.screenY):mT=gT=0,hg=t),gT)},movementY:function(t){return"movementY"in t?t.movementY:mT}}),HL=Wa(IS),Dse=kn({},IS,{dataTransfer:0}),_se=Wa(Dse),Tse=kn({},iy,{relatedTarget:0}),yT=Wa(Tse),Ese=kn({},Iv,{animationName:0,elapsedTime:0,pseudoElement:0}),Ase=Wa(Ese),kse=kn({},Iv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ise=Wa(kse),Nse=kn({},Iv,{data:0}),jL=Wa(Nse),Rse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$se={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ose(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mse[t])?!!e[t]:!1}function f$(){return Ose}var Fse=kn({},iy,{key:function(t){if(t.key){var e=Rse[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$se[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f$,charCode:function(t){return t.type==="keypress"?Lw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pse=Wa(Fse),Lse=kn({},IS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qL=Wa(Lse),zse=kn({},iy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f$}),Bse=Wa(zse),Vse=kn({},Iv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wse=Wa(Vse),Use=kn({},IS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gse=Wa(Use),Hse=[9,13,27,32],h$=Uu&&"CompositionEvent"in window,ym=null;Uu&&"documentMode"in document&&(ym=document.documentMode);var jse=Uu&&"TextEvent"in window&&!ym,i9=Uu&&(!h$||ym&&8<ym&&11>=ym),XL=String.fromCharCode(32),KL=!1;function a9(t,e){switch(t){case"keyup":return Hse.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xd=!1;function qse(t,e){switch(t){case"compositionend":return o9(e);case"keypress":return e.which!==32?null:(KL=!0,XL);case"textInput":return t=e.data,t===XL&&KL?null:t;default:return null}}function Xse(t,e){if(Xd)return t==="compositionend"||!h$&&a9(t,e)?(t=r9(),Pw=l$=Fl=null,Xd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i9&&e.locale!=="ko"?null:e.data;default:return null}}var Kse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kse[t.type]:e==="textarea"}function s9(t,e,n,r){LG(r),e=_b(e,"onChange"),0<e.length&&(n=new c$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xm=null,Zm=null;function Yse(t){y9(t,0)}function NS(t){var e=Zd(t);if(NG(e))return t}function Zse(t,e){if(t==="change")return e}var u9=!1;if(Uu){var xT;if(Uu){var wT="oninput"in document;if(!wT){var ZL=document.createElement("div");ZL.setAttribute("oninput","return;"),wT=typeof ZL.oninput=="function"}xT=wT}else xT=!1;u9=xT&&(!document.documentMode||9<document.documentMode)}function QL(){xm&&(xm.detachEvent("onpropertychange",l9),Zm=xm=null)}function l9(t){if(t.propertyName==="value"&&NS(Zm)){var e=[];s9(e,Zm,t,i$(t)),WG(Yse,e)}}function Qse(t,e,n){t==="focusin"?(QL(),xm=e,Zm=n,xm.attachEvent("onpropertychange",l9)):t==="focusout"&&QL()}function Jse(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return NS(Zm)}function eue(t,e){if(t==="click")return NS(e)}function tue(t,e){if(t==="input"||t==="change")return NS(e)}function nue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gs=typeof Object.is=="function"?Object.is:nue;function Qm(t,e){if(gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hk.call(e,i)||!gs(t[i],e[i]))return!1}return!0}function JL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e4(t,e){var n=JL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=JL(n)}}function c9(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?c9(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f9(){for(var t=window,e=yb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yb(t.document)}return e}function d$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rue(t){var e=f9(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&c9(n.ownerDocument.documentElement,n)){if(r!==null&&d$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=e4(n,a);var o=e4(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iue=Uu&&"documentMode"in document&&11>=document.documentMode,Kd=null,Nk=null,wm=null,Rk=!1;function t4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rk||Kd==null||Kd!==yb(r)||(r=Kd,"selectionStart"in r&&d$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wm&&Qm(wm,r)||(wm=r,r=_b(Nk,"onSelect"),0<r.length&&(e=new c$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kd)))}function px(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yd={animationend:px("Animation","AnimationEnd"),animationiteration:px("Animation","AnimationIteration"),animationstart:px("Animation","AnimationStart"),transitionend:px("Transition","TransitionEnd")},bT={},h9={};Uu&&(h9=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function RS(t){if(bT[t])return bT[t];if(!Yd[t])return t;var e=Yd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in h9)return bT[t]=e[n];return t}var d9=RS("animationend"),p9=RS("animationiteration"),v9=RS("animationstart"),g9=RS("transitionend"),m9=new Map,n4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rc(t,e){m9.set(t,e),Hh(e,[t])}for(var CT=0;CT<n4.length;CT++){var ST=n4[CT],aue=ST.toLowerCase(),oue=ST[0].toUpperCase()+ST.slice(1);Rc(aue,"on"+oue)}Rc(d9,"onAnimationEnd");Rc(p9,"onAnimationIteration");Rc(v9,"onAnimationStart");Rc("dblclick","onDoubleClick");Rc("focusin","onFocus");Rc("focusout","onBlur");Rc(g9,"onTransitionEnd");zp("onMouseEnter",["mouseout","mouseover"]);zp("onMouseLeave",["mouseout","mouseover"]);zp("onPointerEnter",["pointerout","pointerover"]);zp("onPointerLeave",["pointerout","pointerover"]);Hh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sue=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kg));function r4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ase(r,e,void 0,t),t.currentTarget=null}function y9(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;r4(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;r4(i,s,l),a=u}}}if(wb)throw t=Ek,wb=!1,Ek=null,t}function hn(t,e){var n=e[Pk];n===void 0&&(n=e[Pk]=new Set);var r=t+"__bubble";n.has(r)||(x9(e,t,2,!1),n.add(r))}function DT(t,e,n){var r=0;e&&(r|=4),x9(n,t,r,e)}var vx="_reactListening"+Math.random().toString(36).slice(2);function Jm(t){if(!t[vx]){t[vx]=!0,TG.forEach(function(n){n!=="selectionchange"&&(sue.has(n)||DT(n,!1,t),DT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vx]||(e[vx]=!0,DT("selectionchange",!1,e))}}function x9(t,e,n,r){switch(n9(e)){case 1:var i=bse;break;case 4:i=Cse;break;default:i=u$}n=i.bind(null,e,n,t),i=void 0,!Tk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _T(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Pf(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}WG(function(){var l=a,c=i$(n),f=[];e:{var h=m9.get(t);if(h!==void 0){var d=c$,p=t;switch(t){case"keypress":if(Lw(n)===0)break e;case"keydown":case"keyup":d=Pse;break;case"focusin":p="focus",d=yT;break;case"focusout":p="blur",d=yT;break;case"beforeblur":case"afterblur":d=yT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=HL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=_se;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Bse;break;case d9:case p9:case v9:d=Ase;break;case g9:d=Wse;break;case"scroll":d=Sse;break;case"wheel":d=Gse;break;case"copy":case"cut":case"paste":d=Ise;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=qL}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var y=l,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=qm(y,g),w!=null&&v.push(e0(y,w,x)))),m)break;y=y.return}0<v.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Dk&&(p=n.relatedTarget||n.fromElement)&&(Pf(p)||p[Gu]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=l,p=p?Pf(p):null,p!==null&&(m=jh(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(v=HL,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=qL,w="onPointerLeave",g="onPointerEnter",y="pointer"),m=d==null?h:Zd(d),x=p==null?h:Zd(p),h=new v(w,y+"leave",d,n,c),h.target=m,h.relatedTarget=x,w=null,Pf(c)===l&&(v=new v(g,y+"enter",p,n,c),v.target=x,v.relatedTarget=m,w=v),m=w,d&&p)t:{for(v=d,g=p,y=0,x=v;x;x=hd(x))y++;for(x=0,w=g;w;w=hd(w))x++;for(;0<y-x;)v=hd(v),y--;for(;0<x-y;)g=hd(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=hd(v),g=hd(g)}v=null}else v=null;d!==null&&i4(f,h,d,v,!1),p!==null&&m!==null&&i4(f,m,p,v,!0)}}e:{if(h=l?Zd(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var b=Zse;else if(YL(h))if(u9)b=tue;else{b=Jse;var C=Qse}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=eue);if(b&&(b=b(t,l))){s9(f,b,n,c);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&xk(h,"number",h.value)}switch(C=l?Zd(l):window,t){case"focusin":(YL(C)||C.contentEditable==="true")&&(Kd=C,Nk=l,wm=null);break;case"focusout":wm=Nk=Kd=null;break;case"mousedown":Rk=!0;break;case"contextmenu":case"mouseup":case"dragend":Rk=!1,t4(f,n,c);break;case"selectionchange":if(iue)break;case"keydown":case"keyup":t4(f,n,c)}var D;if(h$)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Xd?a9(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(i9&&n.locale!=="ko"&&(Xd||S!=="onCompositionStart"?S==="onCompositionEnd"&&Xd&&(D=r9()):(Fl=c,l$="value"in Fl?Fl.value:Fl.textContent,Xd=!0)),C=_b(l,S),0<C.length&&(S=new jL(S,t,null,n,c),f.push({event:S,listeners:C}),D?S.data=D:(D=o9(n),D!==null&&(S.data=D)))),(D=jse?qse(t,n):Xse(t,n))&&(l=_b(l,"onBeforeInput"),0<l.length&&(c=new jL("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=D))}y9(f,e)})}function e0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _b(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=qm(t,n),a!=null&&r.unshift(e0(t,a,i)),a=qm(t,e),a!=null&&r.push(e0(t,a,i))),t=t.return}return r}function hd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i4(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=qm(n,a),u!=null&&o.unshift(e0(n,u,s))):i||(u=qm(n,a),u!=null&&o.push(e0(n,u,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uue=/\r\n?/g,lue=/\u0000|\uFFFD/g;function a4(t){return(typeof t=="string"?t:""+t).replace(uue,`
`).replace(lue,"")}function gx(t,e,n){if(e=a4(e),a4(t)!==e&&n)throw Error(Ee(425))}function Tb(){}var $k=null,Mk=null;function Ok(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fk=typeof setTimeout=="function"?setTimeout:void 0,cue=typeof clearTimeout=="function"?clearTimeout:void 0,o4=typeof Promise=="function"?Promise:void 0,fue=typeof queueMicrotask=="function"?queueMicrotask:typeof o4<"u"?function(t){return o4.resolve(null).then(t).catch(hue)}:Fk;function hue(t){setTimeout(function(){throw t})}function TT(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ym(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ym(e)}function Jl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nv=Math.random().toString(36).slice(2),Vs="__reactFiber$"+Nv,t0="__reactProps$"+Nv,Gu="__reactContainer$"+Nv,Pk="__reactEvents$"+Nv,due="__reactListeners$"+Nv,pue="__reactHandles$"+Nv;function Pf(t){var e=t[Vs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gu]||n[Vs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s4(t);t!==null;){if(n=t[Vs])return n;t=s4(t)}return e}t=n,n=t.parentNode}return null}function ay(t){return t=t[Vs]||t[Gu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function $S(t){return t[t0]||null}var Lk=[],Qd=-1;function $c(t){return{current:t}}function vn(t){0>Qd||(t.current=Lk[Qd],Lk[Qd]=null,Qd--)}function un(t,e){Qd++,Lk[Qd]=t.current,t.current=e}var vc={},gi=$c(vc),aa=$c(!1),dh=vc;function Bp(t,e){var n=t.type.contextTypes;if(!n)return vc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function oa(t){return t=t.childContextTypes,t!=null}function Eb(){vn(aa),vn(gi)}function u4(t,e,n){if(gi.current!==vc)throw Error(Ee(168));un(gi,e),un(aa,n)}function w9(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ee(108,Qoe(t)||"Unknown",i));return kn({},n,r)}function Ab(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vc,dh=gi.current,un(gi,t),un(aa,aa.current),!0}function l4(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=w9(t,e,dh),r.__reactInternalMemoizedMergedChildContext=t,vn(aa),vn(gi),un(gi,t)):vn(aa),un(aa,n)}var Iu=null,MS=!1,ET=!1;function b9(t){Iu===null?Iu=[t]:Iu.push(t)}function vue(t){MS=!0,b9(t)}function Mc(){if(!ET&&Iu!==null){ET=!0;var t=0,e=Xt;try{var n=Iu;for(Xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Iu=null,MS=!1}catch(i){throw Iu!==null&&(Iu=Iu.slice(t+1)),jG(a$,Mc),i}finally{Xt=e,ET=!1}}return null}var Jd=[],ep=0,kb=null,Ib=0,so=[],uo=0,ph=null,Ou=1,Fu="";function Sf(t,e){Jd[ep++]=Ib,Jd[ep++]=kb,kb=t,Ib=e}function C9(t,e,n){so[uo++]=Ou,so[uo++]=Fu,so[uo++]=ph,ph=t;var r=Ou;t=Fu;var i=32-ss(r)-1;r&=~(1<<i),n+=1;var a=32-ss(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ou=1<<32-ss(e)+i|n<<i|r,Fu=a+t}else Ou=1<<a|n<<i|r,Fu=t}function p$(t){t.return!==null&&(Sf(t,1),C9(t,1,0))}function v$(t){for(;t===kb;)kb=Jd[--ep],Jd[ep]=null,Ib=Jd[--ep],Jd[ep]=null;for(;t===ph;)ph=so[--uo],so[uo]=null,Fu=so[--uo],so[uo]=null,Ou=so[--uo],so[uo]=null}var ka=null,Ea=null,wn=!1,Jo=null;function S9(t,e){var n=ho(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ka=t,Ea=Jl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ka=t,Ea=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ph!==null?{id:Ou,overflow:Fu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ho(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ka=t,Ea=null,!0):!1;default:return!1}}function zk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bk(t){if(wn){var e=Ea;if(e){var n=e;if(!c4(t,e)){if(zk(t))throw Error(Ee(418));e=Jl(n.nextSibling);var r=ka;e&&c4(t,e)?S9(r,n):(t.flags=t.flags&-4097|2,wn=!1,ka=t)}}else{if(zk(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,wn=!1,ka=t}}}function f4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ka=t}function mx(t){if(t!==ka)return!1;if(!wn)return f4(t),wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ok(t.type,t.memoizedProps)),e&&(e=Ea)){if(zk(t))throw D9(),Error(Ee(418));for(;e;)S9(t,e),e=Jl(e.nextSibling)}if(f4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ea=Jl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ea=null}}else Ea=ka?Jl(t.stateNode.nextSibling):null;return!0}function D9(){for(var t=Ea;t;)t=Jl(t.nextSibling)}function Vp(){Ea=ka=null,wn=!1}function g$(t){Jo===null?Jo=[t]:Jo.push(t)}var gue=rl.ReactCurrentBatchConfig;function Zo(t,e){if(t&&t.defaultProps){e=kn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Nb=$c(null),Rb=null,tp=null,m$=null;function y$(){m$=tp=Rb=null}function x$(t){var e=Nb.current;vn(Nb),t._currentValue=e}function Vk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sp(t,e){Rb=t,m$=tp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(na=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(m$!==t)if(t={context:t,memoizedValue:e,next:null},tp===null){if(Rb===null)throw Error(Ee(308));tp=t,Rb.dependencies={lanes:0,firstContext:t}}else tp=tp.next=t;return e}var Lf=null;function w$(t){Lf===null?Lf=[t]:Lf.push(t)}function _9(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,w$(e)):(n.next=i.next,i.next=n),e.interleaved=n,Hu(t,r)}function Hu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Al=!1;function b$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ec(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Hu(t,n)}return i=r.interleaved,i===null?(e.next=e,w$(r)):(e.next=i.next,i.next=e),r.interleaved=e,Hu(t,n)}function zw(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o$(t,n)}}function h4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $b(t,e,n,r){var i=t.updateQueue;Al=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,c=l=u=null,s=a;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,d=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=kn({},f,h);break e;case 2:Al=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);gh|=o,t.lanes=o,t.memoizedState=f}}function d4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ee(191,i));i.call(r)}}}var E9=new _G.Component().refs;function Wk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var OS={isMounted:function(t){return(t=t._reactInternals)?jh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mi(),i=nc(t),a=Vu(r,i);a.payload=e,n!=null&&(a.callback=n),e=ec(t,a,i),e!==null&&(us(e,t,i,r),zw(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mi(),i=nc(t),a=Vu(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ec(t,a,i),e!==null&&(us(e,t,i,r),zw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mi(),r=nc(t),i=Vu(n,r);i.tag=2,e!=null&&(i.callback=e),e=ec(t,i,r),e!==null&&(us(e,t,r,n),zw(e,t,r))}};function p4(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Qm(n,r)||!Qm(i,a):!0}function A9(t,e,n){var r=!1,i=vc,a=e.contextType;return typeof a=="object"&&a!==null?a=Co(a):(i=oa(e)?dh:gi.current,r=e.contextTypes,a=(r=r!=null)?Bp(t,i):vc),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=OS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function v4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&OS.enqueueReplaceState(e,e.state,null)}function Uk(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=E9,b$(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Co(a):(a=oa(e)?dh:gi.current,i.context=Bp(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Wk(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&OS.enqueueReplaceState(i,i.state,null),$b(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===E9&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function yx(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g4(t){var e=t._init;return e(t._payload)}function k9(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=rc(g,y),g.index=0,g.sibling=null,g}function a(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,x,w){return y===null||y.tag!==6?(y=MT(x,g.mode,w),y.return=g,y):(y=i(y,x),y.return=g,y)}function u(g,y,x,w){var b=x.type;return b===qd?c(g,y,x.props.children,w,x.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===El&&g4(b)===y.type)?(w=i(y,x.props),w.ref=dg(g,y,x),w.return=g,w):(w=Hw(x.type,x.key,x.props,null,g.mode,w),w.ref=dg(g,y,x),w.return=g,w)}function l(g,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=OT(x,g.mode,w),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function c(g,y,x,w,b){return y===null||y.tag!==7?(y=Zf(x,g.mode,w,b),y.return=g,y):(y=i(y,x),y.return=g,y)}function f(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=MT(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case sx:return x=Hw(y.type,y.key,y.props,null,g.mode,x),x.ref=dg(g,null,y),x.return=g,x;case jd:return y=OT(y,g.mode,x),y.return=g,y;case El:var w=y._init;return f(g,w(y._payload),x)}if(qg(y)||ug(y))return y=Zf(y,g.mode,x,null),y.return=g,y;yx(g,y)}return null}function h(g,y,x,w){var b=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:s(g,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sx:return x.key===b?u(g,y,x,w):null;case jd:return x.key===b?l(g,y,x,w):null;case El:return b=x._init,h(g,y,b(x._payload),w)}if(qg(x)||ug(x))return b!==null?null:c(g,y,x,w,null);yx(g,x)}return null}function d(g,y,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,s(y,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sx:return g=g.get(w.key===null?x:w.key)||null,u(y,g,w,b);case jd:return g=g.get(w.key===null?x:w.key)||null,l(y,g,w,b);case El:var C=w._init;return d(g,y,x,C(w._payload),b)}if(qg(w)||ug(w))return g=g.get(x)||null,c(y,g,w,b,null);yx(y,w)}return null}function p(g,y,x,w){for(var b=null,C=null,D=y,S=y=0,_=null;D!==null&&S<x.length;S++){D.index>S?(_=D,D=null):_=D.sibling;var T=h(g,D,x[S],w);if(T===null){D===null&&(D=_);break}t&&D&&T.alternate===null&&e(g,D),y=a(T,y,S),C===null?b=T:C.sibling=T,C=T,D=_}if(S===x.length)return n(g,D),wn&&Sf(g,S),b;if(D===null){for(;S<x.length;S++)D=f(g,x[S],w),D!==null&&(y=a(D,y,S),C===null?b=D:C.sibling=D,C=D);return wn&&Sf(g,S),b}for(D=r(g,D);S<x.length;S++)_=d(D,g,S,x[S],w),_!==null&&(t&&_.alternate!==null&&D.delete(_.key===null?S:_.key),y=a(_,y,S),C===null?b=_:C.sibling=_,C=_);return t&&D.forEach(function(E){return e(g,E)}),wn&&Sf(g,S),b}function v(g,y,x,w){var b=ug(x);if(typeof b!="function")throw Error(Ee(150));if(x=b.call(x),x==null)throw Error(Ee(151));for(var C=b=null,D=y,S=y=0,_=null,T=x.next();D!==null&&!T.done;S++,T=x.next()){D.index>S?(_=D,D=null):_=D.sibling;var E=h(g,D,T.value,w);if(E===null){D===null&&(D=_);break}t&&D&&E.alternate===null&&e(g,D),y=a(E,y,S),C===null?b=E:C.sibling=E,C=E,D=_}if(T.done)return n(g,D),wn&&Sf(g,S),b;if(D===null){for(;!T.done;S++,T=x.next())T=f(g,T.value,w),T!==null&&(y=a(T,y,S),C===null?b=T:C.sibling=T,C=T);return wn&&Sf(g,S),b}for(D=r(g,D);!T.done;S++,T=x.next())T=d(D,g,S,T.value,w),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?S:T.key),y=a(T,y,S),C===null?b=T:C.sibling=T,C=T);return t&&D.forEach(function(A){return e(g,A)}),wn&&Sf(g,S),b}function m(g,y,x,w){if(typeof x=="object"&&x!==null&&x.type===qd&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case sx:e:{for(var b=x.key,C=y;C!==null;){if(C.key===b){if(b=x.type,b===qd){if(C.tag===7){n(g,C.sibling),y=i(C,x.props.children),y.return=g,g=y;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===El&&g4(b)===C.type){n(g,C.sibling),y=i(C,x.props),y.ref=dg(g,C,x),y.return=g,g=y;break e}n(g,C);break}else e(g,C);C=C.sibling}x.type===qd?(y=Zf(x.props.children,g.mode,w,x.key),y.return=g,g=y):(w=Hw(x.type,x.key,x.props,null,g.mode,w),w.ref=dg(g,y,x),w.return=g,g=w)}return o(g);case jd:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=OT(x,g.mode,w),y.return=g,g=y}return o(g);case El:return C=x._init,m(g,y,C(x._payload),w)}if(qg(x))return p(g,y,x,w);if(ug(x))return v(g,y,x,w);yx(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,x),y.return=g,g=y):(n(g,y),y=MT(x,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return m}var Wp=k9(!0),I9=k9(!1),oy={},Ks=$c(oy),n0=$c(oy),r0=$c(oy);function zf(t){if(t===oy)throw Error(Ee(174));return t}function C$(t,e){switch(un(r0,e),un(n0,t),un(Ks,oy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bk(e,t)}vn(Ks),un(Ks,e)}function Up(){vn(Ks),vn(n0),vn(r0)}function N9(t){zf(r0.current);var e=zf(Ks.current),n=bk(e,t.type);e!==n&&(un(n0,t),un(Ks,n))}function S$(t){n0.current===t&&(vn(Ks),vn(n0))}var En=$c(0);function Mb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var AT=[];function D$(){for(var t=0;t<AT.length;t++)AT[t]._workInProgressVersionPrimary=null;AT.length=0}var Bw=rl.ReactCurrentDispatcher,kT=rl.ReactCurrentBatchConfig,vh=0,An=null,vr=null,Er=null,Ob=!1,bm=!1,i0=0,mue=0;function ti(){throw Error(Ee(321))}function _$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gs(t[n],e[n]))return!1;return!0}function T$(t,e,n,r,i,a){if(vh=a,An=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bw.current=t===null||t.memoizedState===null?bue:Cue,t=n(r,i),bm){a=0;do{if(bm=!1,i0=0,25<=a)throw Error(Ee(301));a+=1,Er=vr=null,e.updateQueue=null,Bw.current=Sue,t=n(r,i)}while(bm)}if(Bw.current=Fb,e=vr!==null&&vr.next!==null,vh=0,Er=vr=An=null,Ob=!1,e)throw Error(Ee(300));return t}function E$(){var t=i0!==0;return i0=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?An.memoizedState=Er=t:Er=Er.next=t,Er}function So(){if(vr===null){var t=An.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var e=Er===null?An.memoizedState:Er.next;if(e!==null)Er=e,vr=t;else{if(t===null)throw Error(Ee(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Er===null?An.memoizedState=Er=t:Er=Er.next=t}return Er}function a0(t,e){return typeof e=="function"?e(t):e}function IT(t){var e=So(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=vr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var c=l.lane;if((vh&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,o=r):u=u.next=f,An.lanes|=c,gh|=c}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,gs(r,e.memoizedState)||(na=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,An.lanes|=a,gh|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function NT(t){var e=So(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);gs(a,e.memoizedState)||(na=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function R9(){}function $9(t,e){var n=An,r=So(),i=e(),a=!gs(r.memoizedState,i);if(a&&(r.memoizedState=i,na=!0),r=r.queue,A$(F9.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Er!==null&&Er.memoizedState.tag&1){if(n.flags|=2048,o0(9,O9.bind(null,n,r,i,e),void 0,null),Nr===null)throw Error(Ee(349));vh&30||M9(n,e,i)}return i}function M9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O9(t,e,n,r){e.value=n,e.getSnapshot=r,P9(e)&&L9(t)}function F9(t,e,n){return n(function(){P9(e)&&L9(t)})}function P9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gs(t,n)}catch{return!0}}function L9(t){var e=Hu(t,1);e!==null&&us(e,t,1,-1)}function m4(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a0,lastRenderedState:t},e.queue=t,t=t.dispatch=wue.bind(null,An,t),[e.memoizedState,t]}function o0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function z9(){return So().memoizedState}function Vw(t,e,n,r){var i=Rs();An.flags|=t,i.memoizedState=o0(1|e,n,void 0,r===void 0?null:r)}function FS(t,e,n,r){var i=So();r=r===void 0?null:r;var a=void 0;if(vr!==null){var o=vr.memoizedState;if(a=o.destroy,r!==null&&_$(r,o.deps)){i.memoizedState=o0(e,n,a,r);return}}An.flags|=t,i.memoizedState=o0(1|e,n,a,r)}function y4(t,e){return Vw(8390656,8,t,e)}function A$(t,e){return FS(2048,8,t,e)}function B9(t,e){return FS(4,2,t,e)}function V9(t,e){return FS(4,4,t,e)}function W9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function U9(t,e,n){return n=n!=null?n.concat([t]):null,FS(4,4,W9.bind(null,e,t),n)}function k$(){}function G9(t,e){var n=So();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H9(t,e){var n=So();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function j9(t,e,n){return vh&21?(gs(n,e)||(n=KG(),An.lanes|=n,gh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,na=!0),t.memoizedState=n)}function yue(t,e){var n=Xt;Xt=n!==0&&4>n?n:4,t(!0);var r=kT.transition;kT.transition={};try{t(!1),e()}finally{Xt=n,kT.transition=r}}function q9(){return So().memoizedState}function xue(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},X9(t))K9(e,n);else if(n=_9(t,e,n,r),n!==null){var i=Mi();us(n,t,r,i),Y9(n,e,r)}}function wue(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(X9(t))K9(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,gs(s,o)){var u=e.interleaved;u===null?(i.next=i,w$(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=_9(t,e,i,r),n!==null&&(i=Mi(),us(n,t,r,i),Y9(n,e,r))}}function X9(t){var e=t.alternate;return t===An||e!==null&&e===An}function K9(t,e){bm=Ob=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o$(t,n)}}var Fb={readContext:Co,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},bue={readContext:Co,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:Co,useEffect:y4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vw(4194308,4,W9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vw(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vw(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xue.bind(null,An,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:m4,useDebugValue:k$,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=m4(!1),e=t[0];return t=yue.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=An,i=Rs();if(wn){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),Nr===null)throw Error(Ee(349));vh&30||M9(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,y4(F9.bind(null,r,a,t),[t]),r.flags|=2048,o0(9,O9.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Rs(),e=Nr.identifierPrefix;if(wn){var n=Fu,r=Ou;n=(r&~(1<<32-ss(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=i0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cue={readContext:Co,useCallback:G9,useContext:Co,useEffect:A$,useImperativeHandle:U9,useInsertionEffect:B9,useLayoutEffect:V9,useMemo:H9,useReducer:IT,useRef:z9,useState:function(){return IT(a0)},useDebugValue:k$,useDeferredValue:function(t){var e=So();return j9(e,vr.memoizedState,t)},useTransition:function(){var t=IT(a0)[0],e=So().memoizedState;return[t,e]},useMutableSource:R9,useSyncExternalStore:$9,useId:q9,unstable_isNewReconciler:!1},Sue={readContext:Co,useCallback:G9,useContext:Co,useEffect:A$,useImperativeHandle:U9,useInsertionEffect:B9,useLayoutEffect:V9,useMemo:H9,useReducer:NT,useRef:z9,useState:function(){return NT(a0)},useDebugValue:k$,useDeferredValue:function(t){var e=So();return vr===null?e.memoizedState=t:j9(e,vr.memoizedState,t)},useTransition:function(){var t=NT(a0)[0],e=So().memoizedState;return[t,e]},useMutableSource:R9,useSyncExternalStore:$9,useId:q9,unstable_isNewReconciler:!1};function Gp(t,e){try{var n="",r=e;do n+=Zoe(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function RT(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Due=typeof WeakMap=="function"?WeakMap:Map;function Z9(t,e,n){n=Vu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lb||(Lb=!0,eI=r),Gk(t,e)},n}function Q9(t,e,n){n=Vu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gk(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Gk(t,e),typeof r!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function x4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Due;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Lue.bind(null,t,e,n),e.then(t,t))}function w4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vu(-1,1),e.tag=2,ec(n,e,1))),n.lanes|=1),t)}var _ue=rl.ReactCurrentOwner,na=!1;function Ti(t,e,n,r){e.child=t===null?I9(e,null,n,r):Wp(e,t.child,n,r)}function C4(t,e,n,r,i){n=n.render;var a=e.ref;return Sp(e,i),r=T$(t,e,n,r,a,i),n=E$(),t!==null&&!na?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ju(t,e,i)):(wn&&n&&p$(e),e.flags|=1,Ti(t,e,r,i),e.child)}function S4(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!P$(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,J9(t,e,a,r,i)):(t=Hw(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Qm,n(o,r)&&t.ref===e.ref)return ju(t,e,i)}return e.flags|=1,t=rc(a,r),t.ref=e.ref,t.return=e,e.child=t}function J9(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Qm(a,r)&&t.ref===e.ref)if(na=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(na=!0);else return e.lanes=t.lanes,ju(t,e,i)}return Hk(t,e,n,r,i)}function e7(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(rp,Da),Da|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un(rp,Da),Da|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,un(rp,Da),Da|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,un(rp,Da),Da|=r;return Ti(t,e,i,n),e.child}function t7(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hk(t,e,n,r,i){var a=oa(n)?dh:gi.current;return a=Bp(e,a),Sp(e,i),n=T$(t,e,n,r,a,i),r=E$(),t!==null&&!na?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ju(t,e,i)):(wn&&r&&p$(e),e.flags|=1,Ti(t,e,n,i),e.child)}function D4(t,e,n,r,i){if(oa(n)){var a=!0;Ab(e)}else a=!1;if(Sp(e,i),e.stateNode===null)Ww(t,e),A9(e,n,r),Uk(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Co(l):(l=oa(n)?dh:gi.current,l=Bp(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&v4(e,o,r,l),Al=!1;var h=e.memoizedState;o.state=h,$b(e,r,o,i),u=e.memoizedState,s!==r||h!==u||aa.current||Al?(typeof c=="function"&&(Wk(e,n,c,r),u=e.memoizedState),(s=Al||p4(e,n,s,r,h,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,T9(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Zo(e.type,s),o.props=l,f=e.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Co(u):(u=oa(n)?dh:gi.current,u=Bp(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==u)&&v4(e,o,r,u),Al=!1,h=e.memoizedState,o.state=h,$b(e,r,o,i);var p=e.memoizedState;s!==f||h!==p||aa.current||Al?(typeof d=="function"&&(Wk(e,n,d,r),p=e.memoizedState),(l=Al||p4(e,n,l,r,h,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return jk(t,e,n,r,a,i)}function jk(t,e,n,r,i,a){t7(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&l4(e,n,!1),ju(t,e,a);r=e.stateNode,_ue.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wp(e,t.child,null,a),e.child=Wp(e,null,s,a)):Ti(t,e,s,a),e.memoizedState=r.state,i&&l4(e,n,!0),e.child}function n7(t){var e=t.stateNode;e.pendingContext?u4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&u4(t,e.context,!1),C$(t,e.containerInfo)}function _4(t,e,n,r,i){return Vp(),g$(i),e.flags|=256,Ti(t,e,n,r),e.child}var qk={dehydrated:null,treeContext:null,retryLane:0};function Xk(t){return{baseLanes:t,cachePool:null,transitions:null}}function r7(t,e,n){var r=e.pendingProps,i=En.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),un(En,i&1),t===null)return Bk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=zS(o,r,0,null),t=Zf(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Xk(n),e.memoizedState=qk,t):I$(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Tue(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rc(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=rc(s,a):(a=Zf(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Xk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=qk,r}return a=t.child,t=a.sibling,r=rc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function I$(t,e){return e=zS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xx(t,e,n,r){return r!==null&&g$(r),Wp(e,t.child,null,n),t=I$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tue(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=RT(Error(Ee(422))),xx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=zS({mode:"visible",children:r.children},i,0,null),a=Zf(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Wp(e,t.child,null,o),e.child.memoizedState=Xk(o),e.memoizedState=qk,a);if(!(e.mode&1))return xx(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Ee(419)),r=RT(a,r,void 0),xx(t,e,o,r)}if(s=(o&t.childLanes)!==0,na||s){if(r=Nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Hu(t,i),us(r,t,i,-1))}return F$(),r=RT(Error(Ee(421))),xx(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zue.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Ea=Jl(i.nextSibling),ka=e,wn=!0,Jo=null,t!==null&&(so[uo++]=Ou,so[uo++]=Fu,so[uo++]=ph,Ou=t.id,Fu=t.overflow,ph=e),e=I$(e,r.children),e.flags|=4096,e)}function T4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vk(t.return,e,n)}function $T(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function i7(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Ti(t,e,r.children,n),r=En.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T4(t,n,e);else if(t.tag===19)T4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(En,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mb(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$T(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mb(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$T(e,!0,n,null,a);break;case"together":$T(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ww(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ju(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=rc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eue(t,e,n){switch(e.tag){case 3:n7(e),Vp();break;case 5:N9(e);break;case 1:oa(e.type)&&Ab(e);break;case 4:C$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;un(Nb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(En,En.current&1),e.flags|=128,null):n&e.child.childLanes?r7(t,e,n):(un(En,En.current&1),t=ju(t,e,n),t!==null?t.sibling:null);un(En,En.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i7(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,e7(t,e,n)}return ju(t,e,n)}var a7,Kk,o7,s7;a7=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kk=function(){};o7=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zf(Ks.current);var a=null;switch(n){case"input":i=mk(t,i),r=mk(t,r),a=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),a=[];break;case"textarea":i=wk(t,i),r=wk(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tb)}Ck(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Hm.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Hm.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&hn("scroll",t),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};s7=function(t,e,n,r){n!==r&&(e.flags|=4)};function pg(t,e){if(!wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ni(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Aue(t,e,n){var r=e.pendingProps;switch(v$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(e),null;case 1:return oa(e.type)&&Eb(),ni(e),null;case 3:return r=e.stateNode,Up(),vn(aa),vn(gi),D$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jo!==null&&(rI(Jo),Jo=null))),Kk(t,e),ni(e),null;case 5:S$(e);var i=zf(r0.current);if(n=e.type,t!==null&&e.stateNode!=null)o7(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return ni(e),null}if(t=zf(Ks.current),mx(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Vs]=e,r[t0]=a,t=(e.mode&1)!==0,n){case"dialog":hn("cancel",r),hn("close",r);break;case"iframe":case"object":case"embed":hn("load",r);break;case"video":case"audio":for(i=0;i<Kg.length;i++)hn(Kg[i],r);break;case"source":hn("error",r);break;case"img":case"image":case"link":hn("error",r),hn("load",r);break;case"details":hn("toggle",r);break;case"input":OL(r,a),hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},hn("invalid",r);break;case"textarea":PL(r,a),hn("invalid",r)}Ck(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&gx(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&gx(r.textContent,s,t),i=["children",""+s]):Hm.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&hn("scroll",r)}switch(n){case"input":ux(r),FL(r,a,!0);break;case"textarea":ux(r),LL(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Tb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vs]=e,t[t0]=r,a7(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sk(n,r),n){case"dialog":hn("cancel",t),hn("close",t),i=r;break;case"iframe":case"object":case"embed":hn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Kg.length;i++)hn(Kg[i],t);i=r;break;case"source":hn("error",t),i=r;break;case"img":case"image":case"link":hn("error",t),hn("load",t),i=r;break;case"details":hn("toggle",t),i=r;break;case"input":OL(t,r),i=mk(t,r),hn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),hn("invalid",t);break;case"textarea":PL(t,r),i=wk(t,r),hn("invalid",t);break;default:i=r}Ck(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?PG(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&OG(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&jm(t,u):typeof u=="number"&&jm(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Hm.hasOwnProperty(a)?u!=null&&a==="onScroll"&&hn("scroll",t):u!=null&&e$(t,a,u,o))}switch(n){case"input":ux(t),FL(t,r,!1);break;case"textarea":ux(t),LL(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pc(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?xp(t,!!r.multiple,a,!1):r.defaultValue!=null&&xp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ni(e),null;case 6:if(t&&e.stateNode!=null)s7(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=zf(r0.current),zf(Ks.current),mx(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vs]=e,(a=r.nodeValue!==n)&&(t=ka,t!==null))switch(t.tag){case 3:gx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gx(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vs]=e,e.stateNode=r}return ni(e),null;case 13:if(vn(En),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wn&&Ea!==null&&e.mode&1&&!(e.flags&128))D9(),Vp(),e.flags|=98560,a=!1;else if(a=mx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ee(317));a[Vs]=e}else Vp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ni(e),a=!1}else Jo!==null&&(rI(Jo),Jo=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||En.current&1?wr===0&&(wr=3):F$())),e.updateQueue!==null&&(e.flags|=4),ni(e),null);case 4:return Up(),Kk(t,e),t===null&&Jm(e.stateNode.containerInfo),ni(e),null;case 10:return x$(e.type._context),ni(e),null;case 17:return oa(e.type)&&Eb(),ni(e),null;case 19:if(vn(En),a=e.memoizedState,a===null)return ni(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)pg(a,!1);else{if(wr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mb(t),o!==null){for(e.flags|=128,pg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(En,En.current&1|2),e.child}t=t.sibling}a.tail!==null&&qn()>Hp&&(e.flags|=128,r=!0,pg(a,!1),e.lanes=4194304)}else{if(!r)if(t=Mb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!wn)return ni(e),null}else 2*qn()-a.renderingStartTime>Hp&&n!==1073741824&&(e.flags|=128,r=!0,pg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qn(),e.sibling=null,n=En.current,un(En,r?n&1|2:n&1),e):(ni(e),null);case 22:case 23:return O$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Da&1073741824&&(ni(e),e.subtreeFlags&6&&(e.flags|=8192)):ni(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function kue(t,e){switch(v$(e),e.tag){case 1:return oa(e.type)&&Eb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Up(),vn(aa),vn(gi),D$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S$(e),null;case 13:if(vn(En),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Vp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vn(En),null;case 4:return Up(),null;case 10:return x$(e.type._context),null;case 22:case 23:return O$(),null;case 24:return null;default:return null}}var bx=!1,fi=!1,Iue=typeof WeakSet=="function"?WeakSet:Set,Le=null;function np(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nn(t,e,r)}else n.current=null}function Yk(t,e,n){try{n()}catch(r){Nn(t,e,r)}}var E4=!1;function Nue(t,e){if($k=Sb,t=f9(),d$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(s=o),h===a&&++c===r&&(u=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mk={focusedElem:t,selectionRange:n},Sb=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){e=Le;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,m=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Zo(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(w){Nn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}return p=E4,E4=!1,p}function Cm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Yk(e,n,a)}i=i.next}while(i!==r)}}function PS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u7(t){var e=t.alternate;e!==null&&(t.alternate=null,u7(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[t0],delete e[Pk],delete e[due],delete e[pue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l7(t){return t.tag===5||t.tag===3||t.tag===4}function A4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l7(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tb));else if(r!==4&&(t=t.child,t!==null))for(Qk(t,e,n),t=t.sibling;t!==null;)Qk(t,e,n),t=t.sibling}function Jk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jk(t,e,n),t=t.sibling;t!==null;)Jk(t,e,n),t=t.sibling}var Br=null,Qo=!1;function hl(t,e,n){for(n=n.child;n!==null;)c7(t,e,n),n=n.sibling}function c7(t,e,n){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(kS,n)}catch{}switch(n.tag){case 5:fi||np(n,e);case 6:var r=Br,i=Qo;Br=null,hl(t,e,n),Br=r,Qo=i,Br!==null&&(Qo?(t=Br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Br.removeChild(n.stateNode));break;case 18:Br!==null&&(Qo?(t=Br,n=n.stateNode,t.nodeType===8?TT(t.parentNode,n):t.nodeType===1&&TT(t,n),Ym(t)):TT(Br,n.stateNode));break;case 4:r=Br,i=Qo,Br=n.stateNode.containerInfo,Qo=!0,hl(t,e,n),Br=r,Qo=i;break;case 0:case 11:case 14:case 15:if(!fi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Yk(n,e,o),i=i.next}while(i!==r)}hl(t,e,n);break;case 1:if(!fi&&(np(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nn(n,e,s)}hl(t,e,n);break;case 21:hl(t,e,n);break;case 22:n.mode&1?(fi=(r=fi)||n.memoizedState!==null,hl(t,e,n),fi=r):hl(t,e,n);break;default:hl(t,e,n)}}function k4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Iue),e.forEach(function(r){var i=Bue.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Br=s.stateNode,Qo=!1;break e;case 3:Br=s.stateNode.containerInfo,Qo=!0;break e;case 4:Br=s.stateNode.containerInfo,Qo=!0;break e}s=s.return}if(Br===null)throw Error(Ee(160));c7(a,o,i),Br=null,Qo=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Nn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f7(e,t),e=e.sibling}function f7(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vo(e,t),Ts(t),r&4){try{Cm(3,t,t.return),PS(3,t)}catch(v){Nn(t,t.return,v)}try{Cm(5,t,t.return)}catch(v){Nn(t,t.return,v)}}break;case 1:Vo(e,t),Ts(t),r&512&&n!==null&&np(n,n.return);break;case 5:if(Vo(e,t),Ts(t),r&512&&n!==null&&np(n,n.return),t.flags&32){var i=t.stateNode;try{jm(i,"")}catch(v){Nn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&RG(i,a),Sk(s,o);var l=Sk(s,a);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?PG(i,f):c==="dangerouslySetInnerHTML"?OG(i,f):c==="children"?jm(i,f):e$(i,c,f,l)}switch(s){case"input":yk(i,a);break;case"textarea":$G(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?xp(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?xp(i,!!a.multiple,a.defaultValue,!0):xp(i,!!a.multiple,a.multiple?[]:"",!1))}i[t0]=a}catch(v){Nn(t,t.return,v)}}break;case 6:if(Vo(e,t),Ts(t),r&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){Nn(t,t.return,v)}}break;case 3:if(Vo(e,t),Ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ym(e.containerInfo)}catch(v){Nn(t,t.return,v)}break;case 4:Vo(e,t),Ts(t);break;case 13:Vo(e,t),Ts(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||($$=qn())),r&4&&k4(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(fi=(l=fi)||c,Vo(e,t),fi=l):Vo(e,t),Ts(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Le=t,c=t.child;c!==null;){for(f=Le=c;Le!==null;){switch(h=Le,d=h.child,h.tag){case 0:case 11:case 14:case 15:Cm(4,h,h.return);break;case 1:np(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Nn(r,n,v)}}break;case 5:np(h,h.return);break;case 22:if(h.memoizedState!==null){N4(f);continue}}d!==null?(d.return=h,Le=d):N4(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=FG("display",o))}catch(v){Nn(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){Nn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vo(e,t),Ts(t),r&4&&k4(t);break;case 21:break;default:Vo(e,t),Ts(t)}}function Ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l7(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jm(i,""),r.flags&=-33);var a=A4(t);Jk(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=A4(t);Qk(t,s,o);break;default:throw Error(Ee(161))}}catch(u){Nn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rue(t,e,n){Le=t,h7(t)}function h7(t,e,n){for(var r=(t.mode&1)!==0;Le!==null;){var i=Le,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bx;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||fi;s=bx;var l=fi;if(bx=o,(fi=u)&&!l)for(Le=i;Le!==null;)o=Le,u=o.child,o.tag===22&&o.memoizedState!==null?R4(i):u!==null?(u.return=o,Le=u):R4(i);for(;a!==null;)Le=a,h7(a),a=a.sibling;Le=i,bx=s,fi=l}I4(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Le=a):I4(t)}}function I4(t){for(;Le!==null;){var e=Le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||PS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&d4(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d4(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ym(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}fi||e.flags&512&&Zk(e)}catch(h){Nn(e,e.return,h)}}if(e===t){Le=null;break}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}}function N4(t){for(;Le!==null;){var e=Le;if(e===t){Le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Le=n;break}Le=e.return}}function R4(t){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{PS(4,e)}catch(u){Nn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Nn(e,i,u)}}var a=e.return;try{Zk(e)}catch(u){Nn(e,a,u)}break;case 5:var o=e.return;try{Zk(e)}catch(u){Nn(e,o,u)}}}catch(u){Nn(e,e.return,u)}if(e===t){Le=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Le=s;break}Le=e.return}}var $ue=Math.ceil,Pb=rl.ReactCurrentDispatcher,N$=rl.ReactCurrentOwner,xo=rl.ReactCurrentBatchConfig,Pt=0,Nr=null,ir=null,Hr=0,Da=0,rp=$c(0),wr=0,s0=null,gh=0,LS=0,R$=0,Sm=null,Ki=null,$$=0,Hp=1/0,Tu=null,Lb=!1,eI=null,tc=null,Cx=!1,Pl=null,zb=0,Dm=0,tI=null,Uw=-1,Gw=0;function Mi(){return Pt&6?qn():Uw!==-1?Uw:Uw=qn()}function nc(t){return t.mode&1?Pt&2&&Hr!==0?Hr&-Hr:gue.transition!==null?(Gw===0&&(Gw=KG()),Gw):(t=Xt,t!==0||(t=window.event,t=t===void 0?16:n9(t.type)),t):1}function us(t,e,n,r){if(50<Dm)throw Dm=0,tI=null,Error(Ee(185));ry(t,n,r),(!(Pt&2)||t!==Nr)&&(t===Nr&&(!(Pt&2)&&(LS|=n),wr===4&&Ml(t,Hr)),sa(t,r),n===1&&Pt===0&&!(e.mode&1)&&(Hp=qn()+500,MS&&Mc()))}function sa(t,e){var n=t.callbackNode;gse(t,e);var r=Cb(t,t===Nr?Hr:0);if(r===0)n!==null&&VL(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&VL(n),e===1)t.tag===0?vue($4.bind(null,t)):b9($4.bind(null,t)),fue(function(){!(Pt&6)&&Mc()}),n=null;else{switch(YG(r)){case 1:n=a$;break;case 4:n=qG;break;case 16:n=bb;break;case 536870912:n=XG;break;default:n=bb}n=w7(n,d7.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d7(t,e){if(Uw=-1,Gw=0,Pt&6)throw Error(Ee(327));var n=t.callbackNode;if(Dp()&&t.callbackNode!==n)return null;var r=Cb(t,t===Nr?Hr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bb(t,r);else{e=r;var i=Pt;Pt|=2;var a=v7();(Nr!==t||Hr!==e)&&(Tu=null,Hp=qn()+500,Yf(t,e));do try{Fue();break}catch(s){p7(t,s)}while(1);y$(),Pb.current=a,Pt=i,ir!==null?e=0:(Nr=null,Hr=0,e=wr)}if(e!==0){if(e===2&&(i=Ak(t),i!==0&&(r=i,e=nI(t,i))),e===1)throw n=s0,Yf(t,0),Ml(t,r),sa(t,qn()),n;if(e===6)Ml(t,r);else{if(i=t.current.alternate,!(r&30)&&!Mue(i)&&(e=Bb(t,r),e===2&&(a=Ak(t),a!==0&&(r=a,e=nI(t,a))),e===1))throw n=s0,Yf(t,0),Ml(t,r),sa(t,qn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Df(t,Ki,Tu);break;case 3:if(Ml(t,r),(r&130023424)===r&&(e=$$+500-qn(),10<e)){if(Cb(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fk(Df.bind(null,t,Ki,Tu),e);break}Df(t,Ki,Tu);break;case 4:if(Ml(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ss(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$ue(r/1960))-r,10<r){t.timeoutHandle=Fk(Df.bind(null,t,Ki,Tu),r);break}Df(t,Ki,Tu);break;case 5:Df(t,Ki,Tu);break;default:throw Error(Ee(329))}}}return sa(t,qn()),t.callbackNode===n?d7.bind(null,t):null}function nI(t,e){var n=Sm;return t.current.memoizedState.isDehydrated&&(Yf(t,e).flags|=256),t=Bb(t,e),t!==2&&(e=Ki,Ki=n,e!==null&&rI(e)),t}function rI(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function Mue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!gs(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ml(t,e){for(e&=~R$,e&=~LS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ss(e),r=1<<n;t[n]=-1,e&=~r}}function $4(t){if(Pt&6)throw Error(Ee(327));Dp();var e=Cb(t,0);if(!(e&1))return sa(t,qn()),null;var n=Bb(t,e);if(t.tag!==0&&n===2){var r=Ak(t);r!==0&&(e=r,n=nI(t,r))}if(n===1)throw n=s0,Yf(t,0),Ml(t,e),sa(t,qn()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Df(t,Ki,Tu),sa(t,qn()),null}function M$(t,e){var n=Pt;Pt|=1;try{return t(e)}finally{Pt=n,Pt===0&&(Hp=qn()+500,MS&&Mc())}}function mh(t){Pl!==null&&Pl.tag===0&&!(Pt&6)&&Dp();var e=Pt;Pt|=1;var n=xo.transition,r=Xt;try{if(xo.transition=null,Xt=1,t)return t()}finally{Xt=r,xo.transition=n,Pt=e,!(Pt&6)&&Mc()}}function O$(){Da=rp.current,vn(rp)}function Yf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cue(n)),ir!==null)for(n=ir.return;n!==null;){var r=n;switch(v$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eb();break;case 3:Up(),vn(aa),vn(gi),D$();break;case 5:S$(r);break;case 4:Up();break;case 13:vn(En);break;case 19:vn(En);break;case 10:x$(r.type._context);break;case 22:case 23:O$()}n=n.return}if(Nr=t,ir=t=rc(t.current,null),Hr=Da=e,wr=0,s0=null,R$=LS=gh=0,Ki=Sm=null,Lf!==null){for(e=0;e<Lf.length;e++)if(n=Lf[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Lf=null}return t}function p7(t,e){do{var n=ir;try{if(y$(),Bw.current=Fb,Ob){for(var r=An.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ob=!1}if(vh=0,Er=vr=An=null,bm=!1,i0=0,N$.current=null,n===null||n.return===null){wr=1,s0=e,ir=null;break}e:{var a=t,o=n.return,s=n,u=e;if(e=Hr,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=w4(o);if(d!==null){d.flags&=-257,b4(d,o,s,a,e),d.mode&1&&x4(a,l,e),e=d,u=l;var p=e.updateQueue;if(p===null){var v=new Set;v.add(u),e.updateQueue=v}else p.add(u);break e}else{if(!(e&1)){x4(a,l,e),F$();break e}u=Error(Ee(426))}}else if(wn&&s.mode&1){var m=w4(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),b4(m,o,s,a,e),g$(Gp(u,s));break e}}a=u=Gp(u,s),wr!==4&&(wr=2),Sm===null?Sm=[a]:Sm.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=Z9(a,u,e);h4(a,g);break e;case 1:s=u;var y=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(tc===null||!tc.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=Q9(a,s,e);h4(a,w);break e}}a=a.return}while(a!==null)}m7(n)}catch(b){e=b,ir===n&&n!==null&&(ir=n=n.return);continue}break}while(1)}function v7(){var t=Pb.current;return Pb.current=Fb,t===null?Fb:t}function F$(){(wr===0||wr===3||wr===2)&&(wr=4),Nr===null||!(gh&268435455)&&!(LS&268435455)||Ml(Nr,Hr)}function Bb(t,e){var n=Pt;Pt|=2;var r=v7();(Nr!==t||Hr!==e)&&(Tu=null,Yf(t,e));do try{Oue();break}catch(i){p7(t,i)}while(1);if(y$(),Pt=n,Pb.current=r,ir!==null)throw Error(Ee(261));return Nr=null,Hr=0,wr}function Oue(){for(;ir!==null;)g7(ir)}function Fue(){for(;ir!==null&&!sse();)g7(ir)}function g7(t){var e=x7(t.alternate,t,Da);t.memoizedProps=t.pendingProps,e===null?m7(t):ir=e,N$.current=null}function m7(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kue(n,e),n!==null){n.flags&=32767,ir=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wr=6,ir=null;return}}else if(n=Aue(n,e,Da),n!==null){ir=n;return}if(e=e.sibling,e!==null){ir=e;return}ir=e=t}while(e!==null);wr===0&&(wr=5)}function Df(t,e,n){var r=Xt,i=xo.transition;try{xo.transition=null,Xt=1,Pue(t,e,n,r)}finally{xo.transition=i,Xt=r}return null}function Pue(t,e,n,r){do Dp();while(Pl!==null);if(Pt&6)throw Error(Ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(mse(t,a),t===Nr&&(ir=Nr=null,Hr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cx||(Cx=!0,w7(bb,function(){return Dp(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=xo.transition,xo.transition=null;var o=Xt;Xt=1;var s=Pt;Pt|=4,N$.current=null,Nue(t,n),f7(n,t),rue(Mk),Sb=!!$k,Mk=$k=null,t.current=n,Rue(n),use(),Pt=s,Xt=o,xo.transition=a}else t.current=n;if(Cx&&(Cx=!1,Pl=t,zb=i),a=t.pendingLanes,a===0&&(tc=null),fse(n.stateNode),sa(t,qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lb)throw Lb=!1,t=eI,eI=null,t;return zb&1&&t.tag!==0&&Dp(),a=t.pendingLanes,a&1?t===tI?Dm++:(Dm=0,tI=t):Dm=0,Mc(),null}function Dp(){if(Pl!==null){var t=YG(zb),e=xo.transition,n=Xt;try{if(xo.transition=null,Xt=16>t?16:t,Pl===null)var r=!1;else{if(t=Pl,Pl=null,zb=0,Pt&6)throw Error(Ee(331));var i=Pt;for(Pt|=4,Le=t.current;Le!==null;){var a=Le,o=a.child;if(Le.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Le=l;Le!==null;){var c=Le;switch(c.tag){case 0:case 11:case 15:Cm(8,c,a)}var f=c.child;if(f!==null)f.return=c,Le=f;else for(;Le!==null;){c=Le;var h=c.sibling,d=c.return;if(u7(c),c===l){Le=null;break}if(h!==null){h.return=d,Le=h;break}Le=d}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}Le=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Le=o;else e:for(;Le!==null;){if(a=Le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Cm(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Le=g;break e}Le=a.return}}var y=t.current;for(Le=y;Le!==null;){o=Le;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Le=x;else e:for(o=y;Le!==null;){if(s=Le,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:PS(9,s)}}catch(b){Nn(s,s.return,b)}if(s===o){Le=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Le=w;break e}Le=s.return}}if(Pt=i,Mc(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(kS,t)}catch{}r=!0}return r}finally{Xt=n,xo.transition=e}}return!1}function M4(t,e,n){e=Gp(n,e),e=Z9(t,e,1),t=ec(t,e,1),e=Mi(),t!==null&&(ry(t,1,e),sa(t,e))}function Nn(t,e,n){if(t.tag===3)M4(t,t,n);else for(;e!==null;){if(e.tag===3){M4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tc===null||!tc.has(r))){t=Gp(n,t),t=Q9(e,t,1),e=ec(e,t,1),t=Mi(),e!==null&&(ry(e,1,t),sa(e,t));break}}e=e.return}}function Lue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mi(),t.pingedLanes|=t.suspendedLanes&n,Nr===t&&(Hr&n)===n&&(wr===4||wr===3&&(Hr&130023424)===Hr&&500>qn()-$$?Yf(t,0):R$|=n),sa(t,e)}function y7(t,e){e===0&&(t.mode&1?(e=fx,fx<<=1,!(fx&130023424)&&(fx=4194304)):e=1);var n=Mi();t=Hu(t,e),t!==null&&(ry(t,e,n),sa(t,n))}function zue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y7(t,n)}function Bue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),y7(t,n)}var x7;x7=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||aa.current)na=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return na=!1,Eue(t,e,n);na=!!(t.flags&131072)}else na=!1,wn&&e.flags&1048576&&C9(e,Ib,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ww(t,e),t=e.pendingProps;var i=Bp(e,gi.current);Sp(e,n),i=T$(null,e,r,t,i,n);var a=E$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oa(r)?(a=!0,Ab(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,b$(e),i.updater=OS,e.stateNode=i,i._reactInternals=e,Uk(e,r,t,n),e=jk(null,e,r,!0,a,n)):(e.tag=0,wn&&a&&p$(e),Ti(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ww(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wue(r),t=Zo(r,t),i){case 0:e=Hk(null,e,r,t,n);break e;case 1:e=D4(null,e,r,t,n);break e;case 11:e=C4(null,e,r,t,n);break e;case 14:e=S4(null,e,r,Zo(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),Hk(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),D4(t,e,r,i,n);case 3:e:{if(n7(e),t===null)throw Error(Ee(387));r=e.pendingProps,a=e.memoizedState,i=a.element,T9(t,e),$b(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Gp(Error(Ee(423)),e),e=_4(t,e,r,n,i);break e}else if(r!==i){i=Gp(Error(Ee(424)),e),e=_4(t,e,r,n,i);break e}else for(Ea=Jl(e.stateNode.containerInfo.firstChild),ka=e,wn=!0,Jo=null,n=I9(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vp(),r===i){e=ju(t,e,n);break e}Ti(t,e,r,n)}e=e.child}return e;case 5:return N9(e),t===null&&Bk(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Ok(r,i)?o=null:a!==null&&Ok(r,a)&&(e.flags|=32),t7(t,e),Ti(t,e,o,n),e.child;case 6:return t===null&&Bk(e),null;case 13:return r7(t,e,n);case 4:return C$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wp(e,null,r,n):Ti(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),C4(t,e,r,i,n);case 7:return Ti(t,e,e.pendingProps,n),e.child;case 8:return Ti(t,e,e.pendingProps.children,n),e.child;case 12:return Ti(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,un(Nb,r._currentValue),r._currentValue=o,a!==null)if(gs(a.value,o)){if(a.children===i.children&&!aa.current){e=ju(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Vu(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Vk(a.return,n,e),s.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ee(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Vk(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ti(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sp(e,n),i=Co(i),r=r(i),e.flags|=1,Ti(t,e,r,n),e.child;case 14:return r=e.type,i=Zo(r,e.pendingProps),i=Zo(r.type,i),S4(t,e,r,i,n);case 15:return J9(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zo(r,i),Ww(t,e),e.tag=1,oa(r)?(t=!0,Ab(e)):t=!1,Sp(e,n),A9(e,r,i),Uk(e,r,i,n),jk(null,e,r,!0,t,n);case 19:return i7(t,e,n);case 22:return e7(t,e,n)}throw Error(Ee(156,e.tag))};function w7(t,e){return jG(t,e)}function Vue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(t,e,n,r){return new Vue(t,e,n,r)}function P$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wue(t){if(typeof t=="function")return P$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n$)return 11;if(t===r$)return 14}return 2}function rc(t,e){var n=t.alternate;return n===null?(n=ho(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hw(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")P$(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qd:return Zf(n.children,i,a,e);case t$:o=8,i|=8;break;case dk:return t=ho(12,n,e,i|2),t.elementType=dk,t.lanes=a,t;case pk:return t=ho(13,n,e,i),t.elementType=pk,t.lanes=a,t;case vk:return t=ho(19,n,e,i),t.elementType=vk,t.lanes=a,t;case kG:return zS(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EG:o=10;break e;case AG:o=9;break e;case n$:o=11;break e;case r$:o=14;break e;case El:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=ho(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Zf(t,e,n,r){return t=ho(7,t,r,e),t.lanes=n,t}function zS(t,e,n,r){return t=ho(22,t,r,e),t.elementType=kG,t.lanes=n,t.stateNode={isHidden:!1},t}function MT(t,e,n){return t=ho(6,t,null,e),t.lanes=n,t}function OT(t,e,n){return e=ho(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uue(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vT(0),this.expirationTimes=vT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function L$(t,e,n,r,i,a,o,s,u){return t=new Uue(t,e,n,s,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ho(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},b$(a),t}function Gue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b7(t){if(!t)return vc;t=t._reactInternals;e:{if(jh(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(oa(n))return w9(t,n,e)}return e}function C7(t,e,n,r,i,a,o,s,u){return t=L$(n,r,!0,t,i,a,o,s,u),t.context=b7(null),n=t.current,r=Mi(),i=nc(n),a=Vu(r,i),a.callback=e??null,ec(n,a,i),t.current.lanes=i,ry(t,i,r),sa(t,r),t}function BS(t,e,n,r){var i=e.current,a=Mi(),o=nc(i);return n=b7(n),e.context===null?e.context=n:e.pendingContext=n,e=Vu(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ec(i,e,o),t!==null&&(us(t,i,o,a),zw(t,i,o)),o}function Vb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z$(t,e){O4(t,e),(t=t.alternate)&&O4(t,e)}function Hue(){return null}var S7=typeof reportError=="function"?reportError:function(t){console.error(t)};function B$(t){this._internalRoot=t}VS.prototype.render=B$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));BS(t,e,null,null)};VS.prototype.unmount=B$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mh(function(){BS(null,t,null,null)}),e[Gu]=null}};function VS(t){this._internalRoot=t}VS.prototype.unstable_scheduleHydration=function(t){if(t){var e=JG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$l.length&&e!==0&&e<$l[n].priority;n++);$l.splice(n,0,t),n===0&&t9(t)}};function V$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function WS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F4(){}function jue(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Vb(o);a.call(l)}}var o=C7(e,r,t,0,null,!1,!1,"",F4);return t._reactRootContainer=o,t[Gu]=o.current,Jm(t.nodeType===8?t.parentNode:t),mh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Vb(u);s.call(l)}}var u=L$(t,0,!1,null,null,!1,!1,"",F4);return t._reactRootContainer=u,t[Gu]=u.current,Jm(t.nodeType===8?t.parentNode:t),mh(function(){BS(e,u,n,r)}),u}function US(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=Vb(o);s.call(u)}}BS(e,o,t,i)}else o=jue(n,e,t,i,r);return Vb(o)}ZG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xg(e.pendingLanes);n!==0&&(o$(e,n|1),sa(e,qn()),!(Pt&6)&&(Hp=qn()+500,Mc()))}break;case 13:mh(function(){var r=Hu(t,1);if(r!==null){var i=Mi();us(r,t,1,i)}}),z$(t,1)}};s$=function(t){if(t.tag===13){var e=Hu(t,134217728);if(e!==null){var n=Mi();us(e,t,134217728,n)}z$(t,134217728)}};QG=function(t){if(t.tag===13){var e=nc(t),n=Hu(t,e);if(n!==null){var r=Mi();us(n,t,e,r)}z$(t,e)}};JG=function(){return Xt};e9=function(t,e){var n=Xt;try{return Xt=t,e()}finally{Xt=n}};_k=function(t,e,n){switch(e){case"input":if(yk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$S(r);if(!i)throw Error(Ee(90));NG(r),yk(r,i)}}}break;case"textarea":$G(t,n);break;case"select":e=n.value,e!=null&&xp(t,!!n.multiple,e,!1)}};BG=M$;VG=mh;var que={usingClientEntryPoint:!1,Events:[ay,Zd,$S,LG,zG,M$]},vg={findFiberByHostInstance:Pf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Xue={bundleType:vg.bundleType,version:vg.version,rendererPackageName:vg.rendererPackageName,rendererConfig:vg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GG(t),t===null?null:t.stateNode},findFiberByHostInstance:vg.findFiberByHostInstance||Hue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sx.isDisabled&&Sx.supportsFiber)try{kS=Sx.inject(Xue),Xs=Sx}catch{}}Va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=que;Va.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V$(e))throw Error(Ee(200));return Gue(t,e,null,n)};Va.createRoot=function(t,e){if(!V$(t))throw Error(Ee(299));var n=!1,r="",i=S7;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=L$(t,1,!1,null,null,n,!1,r,i),t[Gu]=e.current,Jm(t.nodeType===8?t.parentNode:t),new B$(e)};Va.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=GG(e),t=t===null?null:t.stateNode,t};Va.flushSync=function(t){return mh(t)};Va.hydrate=function(t,e,n){if(!WS(e))throw Error(Ee(200));return US(null,t,e,!0,n)};Va.hydrateRoot=function(t,e,n){if(!V$(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=S7;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=C7(e,null,t,1,n??null,i,!1,a,o),t[Gu]=e.current,Jm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new VS(e)};Va.render=function(t,e,n){if(!WS(e))throw Error(Ee(200));return US(null,t,e,!1,n)};Va.unmountComponentAtNode=function(t){if(!WS(t))throw Error(Ee(40));return t._reactRootContainer?(mh(function(){US(null,null,t,!1,function(){t._reactRootContainer=null,t[Gu]=null})}),!0):!1};Va.unstable_batchedUpdates=M$;Va.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!WS(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return US(t,e,n,!1,r)};Va.version="18.2.0-next-9e3b772b8-20220608";function D7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D7)}catch(t){console.error(t)}}D7(),CG.exports=Va;var qu=CG.exports;const Dx=nl(qu);var P4=qu;fk.createRoot=P4.createRoot,fk.hydrateRoot=P4.hydrateRoot;var iI={CENTER:"center",LEFT:"left",RIGHT:"right"},_7={ZERO:0,ONE:1,TWO:2,THREE:3,FOUR:4},jr={NONE:"none",PRIMARY:"primary",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},pn={BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT:"left",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT:"right",RIGHT_BOTTOM:"right-bottom",RIGHT_TOP:"right-top",TOP:"top",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};function Kue(t){return t===pn.TOP||t===pn.TOP_LEFT||t===pn.TOP_RIGHT||t===pn.BOTTOM||t===pn.BOTTOM_LEFT||t===pn.BOTTOM_RIGHT}function L4(t){return t===pn.TOP||t===pn.TOP_LEFT||t===pn.TOP_RIGHT?pn.TOP:t===pn.BOTTOM||t===pn.BOTTOM_LEFT||t===pn.BOTTOM_RIGHT?pn.BOTTOM:t===pn.LEFT||t===pn.LEFT_TOP||t===pn.LEFT_BOTTOM?pn.LEFT:pn.RIGHT}var Ue="bp5";typeof BLUEPRINT_NAMESPACE<"u"?Ue=BLUEPRINT_NAMESPACE:typeof REACT_APP_BLUEPRINT_NAMESPACE<"u"&&(Ue=REACT_APP_BLUEPRINT_NAMESPACE);var Wb="".concat(Ue,"-active"),Yue="".concat(Ue,"-align-left"),Zue="".concat(Ue,"-align-right"),W$="".concat(Ue,"-compact"),jp="".concat(Ue,"-dark"),sy="".concat(Ue,"-disabled"),qh="".concat(Ue,"-fill"),T7="".concat(Ue,"-inline"),Que="".concat(Ue,"-interactive"),yh="".concat(Ue,"-large"),Jue="".concat(Ue,"-loading"),U$="".concat(Ue,"-minimal"),ele="".concat(Ue,"-outlined"),tle="".concat(Ue,"-read-only"),nle="".concat(Ue,"-round"),E7="".concat(Ue,"-selected"),u0="".concat(Ue,"-small"),A7="".concat(Ue,"-vertical");cy(pn.TOP);cy(pn.BOTTOM);cy(pn.LEFT);cy(pn.RIGHT);Ma(jr.PRIMARY);Ma(jr.SUCCESS);Ma(jr.WARNING);Ma(jr.DANGER);var rle="".concat(Ue,"-text-overflow-ellipsis"),ile="".concat(Ue,"-blockquote"),ale="".concat(Ue,"-code"),ole="".concat(Ue,"-code-block"),Rv="".concat(Ue,"-heading"),k7="".concat(Ue,"-list"),uy="".concat(Ue,"-button"),sle="".concat(uy,"-group"),ule="".concat(uy,"-spinner"),lle="".concat(uy,"-text"),cle="".concat(Ue,"-card"),I7="".concat(Ue,"-card-list"),fle="".concat(I7,"-bordered"),GS="".concat(Ue,"-context-menu"),hle="".concat(GS,"-virtual-target"),dle="".concat(GS,"-popover"),ple="".concat(GS,"-backdrop"),vle="".concat(Ue,"-control-group"),pu="".concat(Ue,"-dialog"),gle="".concat(pu,"-container"),mle="".concat(pu,"-header"),yle="".concat(pu,"-body"),xle="".concat(pu,"-body-scroll-container"),N7="".concat(pu,"-close-button"),wle="".concat(pu,"-footer"),ble="".concat(pu,"-footer-fixed"),Cle="".concat(pu,"-footer-main-section"),Sle="".concat(pu,"-footer-actions"),G$="".concat(Ue,"-drawer"),Dle="".concat(G$,"-body"),_le="".concat(G$,"-header"),HS="".concat(Ue,"-input"),Tle="".concat(HS,"-group"),Ele="".concat(HS,"-left-container"),Ale="".concat(HS,"-action"),R7="".concat(Ue,"-control"),$7="".concat(R7,"-indicator"),z4="".concat($7,"-child"),kle="".concat(Ue,"-checkbox"),Ile="".concat(Ue,"-radio"),M7="".concat(Ue,"-switch"),B4="".concat(M7,"-inner-text"),Nle="".concat(Ue,"-label"),jS="".concat(Ue,"-menu"),ly="".concat(jS,"-item"),Rle="".concat(ly,"-is-selectable"),$le="".concat(ly,"-selected-icon"),Mle="".concat(ly,"-icon"),Ole="".concat(ly,"-label"),aI="".concat(Ue,"-submenu"),Fle="".concat(aI,"-icon"),Ple="".concat(jS,"-divider"),Lle="".concat(jS,"-header"),zle="".concat(Ue,"-navbar"),Ble="".concat(zle,"-group"),Ub="".concat(Ue,"-non-ideal-state"),Vle="".concat(Ub,"-visual"),Wle="".concat(Ub,"-text"),au="".concat(Ue,"-overlay"),Ule="".concat(au,"-backdrop"),Gle="".concat(au,"-container"),V4="".concat(au,"-content"),Hle="".concat(au,"-inline"),FT="".concat(au,"-open"),jle="".concat(au,"-scroll-container"),W4="".concat(au,"-start-focus-trap"),U4="".concat(au,"-end-focus-trap"),Ur="".concat(Ue,"-popover"),PT="".concat(Ur,"-arrow"),qle="".concat(Ur,"-backdrop"),LT="".concat(Ur,"-capturing-dismiss"),Xle="".concat(Ur,"-content"),Kle="".concat(Ur,"-placement"),Gb="".concat(Ur,"-dismiss"),Yle="".concat(Gb,"-override"),Zle="".concat(Ur,"-match-target-width"),Qle="".concat(Ur,"-open"),Jle="".concat(Ur,"-popper-escaped"),ece="".concat(Ur,"-reference-hidden"),tce="".concat(Ur,"-target"),nce="".concat(Ur,"-transition-container"),rce="".concat(Ue,"-progress-bar"),ice="".concat(Ue,"-progress-meter"),ace="".concat(Ue,"-no-stripes"),oce="".concat(Ue,"-no-animation"),sce="".concat(Ue,"-portal"),qS="".concat(Ue,"-spinner"),uce="".concat(qS,"-animation"),lce="".concat(qS,"-head"),cce="".concat(Ue,"-no-spin"),fce="".concat(qS,"-track"),hce="".concat(Ue,"-segmented-control"),XS="".concat(Ue,"-toast"),zT="".concat(XS,"-container"),dce="".concat(XS,"-message"),pce="".concat(Ue,"-tooltip"),KS="".concat(Ue,"-icon"),vce="".concat(KS,"-standard"),gce="".concat(KS,"-large"),mce="".concat(KS,"-muted");function YS(t){switch(t){case iI.LEFT:return Yue;case iI.RIGHT:return Zue;default:return}}function yce(t){if(t!==void 0)return"".concat(Ue,"-elevation-").concat(t)}function xce(t){if(t!=null)return t.indexOf("".concat(Ue,"-icon-"))===0?t:"".concat(Ue,"-icon-").concat(t)}function Ma(t){if(!(t==null||t===jr.NONE))return"".concat(Ue,"-intent-").concat(t.toLowerCase())}function cy(t){if(t!==void 0)return"".concat(Ue,"-position-").concat(t)}var oI=function(t,e){return oI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},oI(t,e)};function Sr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xe=function(){return xe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xe.apply(this,arguments)};function zn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ip(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}function ap(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Qf(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function wce(t,e){return t===e||t.contains(e)}function G4(t,e){var n;if(t==null)return document.activeElement;var r=(n=t.getRootNode(e))!==null&&n!==void 0?n:document;return r.activeElement}function bce(t){return function(e){return t.some(function(n){return e.key===n})&&e.target.dispatchEvent(new MouseEvent("click",xe(xe({},e),{view:void 0})))}}function Yg(t){return typeof t=="function"}var Jn="[Blueprint]",Cce=Jn+" clamp: max cannot be less than min",Sce=Jn+" <InputGroup> leftElement and leftIcon prop are mutually exclusive, with leftElement taking priority.",Dce="".concat(Jn," <Popover> requires renderTarget prop or a child element."),_ce="".concat(Jn,' <Popover hasBackdrop={true}> requires interactionKind="click".'),Tce="".concat(Jn," <Popover> supports only one child which is rendered as its target; additional children are ignored."),Ece=Jn+" <Popover> with children ignores renderTarget prop; use either prop or children.",Ace=Jn+" Disabling <Popover> with empty/whitespace content...",kce=Jn+" <Popover usePortal={false}> ignores hasBackdrop",Ice=Jn+" <Popover> supports either placement or position prop, not both.",Nce=Jn+" <Popover> onInteraction is ignored when uncontrolled.",Rce=Jn+" <Popover> targetProps value is ignored when renderTarget API is used.",$ce=Jn+" <Portal> context blueprintPortalClassName must be string",Mce=Jn+" setting blueprintPortalClassName via legacy React context API is deprecated, use <PortalProvider> instead.",Oce=Jn+" <Spinner> Classes.SMALL/LARGE are ignored if size prop is set.",Fce=Jn+" OverlayToaster.create() is not supported inside React lifecycle methods in React 16. See usage example on the docs site. https://blueprintjs.com/docs/#core/components/toast.example",Pce=Jn+" OverlayToaster.createAsync() received a null component ref. This can happen if called inside React lifecycle methods in React 16. See usage example on the docs site. https://blueprintjs.com/docs/#core/components/toast.example",Lce=Jn+" <OverlayToaster> maxToasts is set to an invalid number, must be greater than 0",H4=Jn+" OverlayToaster.create() ignores inline prop as it always creates a new element.",O7=Jn+" <Dialog> iconName is ignored if title is omitted.",F7=Jn+" <Dialog> isCloseButtonShown prop is ignored if title is omitted.",zce=Jn+" <Drawer> all angle positions are casted into pure position (TOP, BOTTOM, LEFT or RIGHT)";function l0(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function P7(t,e,n){if(t==null)return t;if(n<e)throw new Error(Cce);return Math.min(Math.max(t,e),n)}var j4=new Map;function Bce(t){var e,n=(e=j4.get(t))!==null&&e!==void 0?e:0;return j4.set(t,n+1),"".concat(t,"-").concat(n)}function sI(t,e){return e===void 0&&(e=!1),t==null||t===""||t===!1||!e&&Array.isArray(t)&&(t.length===0||t.every(function(n){return sI(n,!0)}))}function L7(t,e){if(e===void 0&&(e="span"),!(t==null||typeof t=="boolean"))return typeof t=="string"?t.trim().length>0?B.createElement(e,{},t):void 0:typeof t=="number"||typeof t.type=="symbol"||Array.isArray(t)?B.createElement(e,{},t):Vce(t)?t:void 0}function Vce(t){return typeof t=="object"&&typeof t.type<"u"&&typeof t.props<"u"}function Wce(t,e){return t!=null&&t.type!=null&&t.type.displayName!=null&&t.type.displayName===e.displayName}function Hb(t){return t.key==="Enter"||t.key===" "}function Uce(t){return t!=null&&t instanceof Element&&t.closest(".".concat(jp))!=null}function Gce(t){return t!=null&&typeof t!="function"}function Hce(t){return typeof t=="function"}function z7(t,e){Gce(t)?t.current=e:Hce(t)&&t(e)}function fy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){t.forEach(function(r){z7(r,n)})}}function jce(t,e,n){return function(r){t[e]=r,z7(n,r)}}var Zr=function(t){Sr(e,t);function e(n){var r=t.call(this,n)||this;return r.timeoutIds=[],r.requestIds=[],r.clearTimeouts=function(){if(r.timeoutIds.length>0){for(var i=0,a=r.timeoutIds;i<a.length;i++){var o=a[i];window.clearTimeout(o)}r.timeoutIds=[]}},r.cancelAnimationFrames=function(){if(r.requestIds.length>0){for(var i=0,a=r.requestIds;i<a.length;i++){var o=a[i];window.cancelAnimationFrame(o)}r.requestIds=[]}},l0("production")||r.validateProps(r.props),r}return e.prototype.componentDidUpdate=function(n,r,i){l0("production")||this.validateProps(this.props)},e.prototype.componentWillUnmount=function(){this.clearTimeouts(),this.cancelAnimationFrames()},e.prototype.requestAnimationFrame=function(n){var r=window.requestAnimationFrame(n);return this.requestIds.push(r),function(){return window.cancelAnimationFrame(r)}},e.prototype.setTimeout=function(n,r){var i=window.setTimeout(n,r);return this.timeoutIds.push(i),function(){return window.clearTimeout(i)}},e.prototype.validateProps=function(n){},e}(B.PureComponent),Rt="Blueprint5",q4=["active","alignText","asyncControl","containerRef","current","elementRef","ellipsizeText","fill","icon","iconSize","inputClassName","inputRef","intent","inline","large","loading","leftElement","leftIcon","minimal","onRemove","outlined","panel","panelClassName","popoverProps","rightElement","rightIcon","round","size","small","tagName","text","textClassName"];function xh(t,e,n){return e===void 0&&(e=q4),n===void 0&&(n=!1),n&&(e=e.concat(q4)),e.reduce(function(r,i){return i.indexOf("-")!==-1||r.hasOwnProperty(i)&&delete r[i],r},xe({},t))}var B7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,r(s)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)e.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(B7);var qce=B7.exports;const ut=nl(qce);function Xce(t){return t.toLowerCase()}var Kce=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Yce=/[^A-Z0-9]+/gi;function V7(t,e){e===void 0&&(e={});for(var n=e.splitRegexp,r=n===void 0?Kce:n,i=e.stripRegexp,a=i===void 0?Yce:i,o=e.transform,s=o===void 0?Xce:o,u=e.delimiter,l=u===void 0?" ":u,c=X4(X4(t,r,"$1\0$2"),a,"\0"),f=0,h=c.length;c.charAt(f)==="\0";)f++;for(;c.charAt(h-1)==="\0";)h--;return c.slice(f,h).split("\0").map(s).join(l)}function X4(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function Zce(t,e){var n=t.charAt(0),r=t.substr(1).toLowerCase();return e>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function Qce(t,e){return e===void 0&&(e={}),V7(t,xe({delimiter:"",transform:Zce},e))}function Jce(t,e){return e===void 0&&(e={}),V7(t,xe({delimiter:"."},e))}function efe(t,e){return e===void 0&&(e={}),Jce(t,xe({delimiter:"_"},e))}var Et;(function(t){t[t.STANDARD=16]="STANDARD",t[t.LARGE=20]="LARGE"})(Et||(Et={}));const tfe="modulepreload",nfe=function(t){return"/"+t},K4={},Y4=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=nfe(a),a in K4)return;K4[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":tfe,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var I,k;(function(t){t.AddClip="add-clip",t.AddColumnLeft="add-column-left",t.AddColumnRight="add-column-right",t.AddLocation="add-location",t.AddRowBottom="add-row-bottom",t.AddRowTop="add-row-top",t.AddToArtifact="add-to-artifact",t.AddToFolder="add-to-folder",t.Add="add",t.AimpointsTarget="aimpoints-target",t.Airplane="airplane",t.AlignCenter="align-center",t.AlignJustify="align-justify",t.AlignLeft="align-left",t.AlignRight="align-right",t.AlignmentBottom="alignment-bottom",t.AlignmentHorizontalCenter="alignment-horizontal-center",t.AlignmentLeft="alignment-left",t.AlignmentRight="alignment-right",t.AlignmentTop="alignment-top",t.AlignmentVerticalCenter="alignment-vertical-center",t.Ammunition="ammunition",t.Anchor="anchor",t.Annotation="annotation",t.Antenna="antenna",t.AppHeader="app-header",t.Application="application",t.Applications="applications",t.Archive="archive",t.AreaOfInterest="area-of-interest",t.ArrayBoolean="array-boolean",t.ArrayDate="array-date",t.ArrayFloatingPoint="array-floating-point",t.ArrayNumeric="array-numeric",t.ArrayString="array-string",t.ArrayTimestamp="array-timestamp",t.Array="array",t.ArrowBottomLeft="arrow-bottom-left",t.ArrowBottomRight="arrow-bottom-right",t.ArrowDown="arrow-down",t.ArrowLeft="arrow-left",t.ArrowRight="arrow-right",t.ArrowTopLeft="arrow-top-left",t.ArrowTopRight="arrow-top-right",t.ArrowUp="arrow-up",t.ArrowsHorizontal="arrows-horizontal",t.ArrowsVertical="arrows-vertical",t.Asterisk="asterisk",t.At="at",t.AutomaticUpdates="automatic-updates",t.Axle="axle",t.Backlink="backlink",t.Badge="badge",t.BanCircle="ban-circle",t.BankAccount="bank-account",t.Barcode="barcode",t.Blank="blank",t.BlockedPerson="blocked-person",t.Bold="bold",t.Book="book",t.Bookmark="bookmark",t.Box="box",t.Briefcase="briefcase",t.BringData="bring-data",t.BringForward="bring-forward",t.Bug="bug",t.Buggy="buggy",t.Build="build",t.Calculator="calculator",t.Calendar="calendar",t.Camera="camera",t.CaretDown="caret-down",t.CaretLeft="caret-left",t.CaretRight="caret-right",t.CaretUp="caret-up",t.CargoShip="cargo-ship",t.CellTower="cell-tower",t.Changes="changes",t.Chart="chart",t.Chat="chat",t.ChevronBackward="chevron-backward",t.ChevronDown="chevron-down",t.ChevronForward="chevron-forward",t.ChevronLeft="chevron-left",t.ChevronRight="chevron-right",t.ChevronUp="chevron-up",t.CircleArrowDown="circle-arrow-down",t.CircleArrowLeft="circle-arrow-left",t.CircleArrowRight="circle-arrow-right",t.CircleArrowUp="circle-arrow-up",t.Circle="circle",t.Citation="citation",t.Clean="clean",t.Clip="clip",t.Clipboard="clipboard",t.CloudDownload="cloud-download",t.CloudTick="cloud-tick",t.CloudUpload="cloud-upload",t.Cloud="cloud",t.CodeBlock="code-block",t.Code="code",t.Cog="cog",t.CollapseAll="collapse-all",t.ColorFill="color-fill",t.ColumnLayout="column-layout",t.Comment="comment",t.Comparison="comparison",t.Compass="compass",t.Compressed="compressed",t.Confirm="confirm",t.Console="console",t.Contrast="contrast",t.Control="control",t.CreditCard="credit-card",t.Crop="crop",t.CrossCircle="cross-circle",t.Cross="cross",t.Crown="crown",t.CubeAdd="cube-add",t.CubeRemove="cube-remove",t.Cube="cube",t.CurvedRangeChart="curved-range-chart",t.Cut="cut",t.Cycle="cycle",t.Dashboard="dashboard",t.DataConnection="data-connection",t.DataLineage="data-lineage",t.Database="database",t.Delete="delete",t.Delta="delta",t.DeriveColumn="derive-column",t.Desktop="desktop",t.Detection="detection",t.Diagnosis="diagnosis",t.DiagramTree="diagram-tree",t.DirectionLeft="direction-left",t.DirectionRight="direction-right",t.Disable="disable",t.Divide="divide",t.DocumentOpen="document-open",t.DocumentShare="document-share",t.Document="document",t.Dollar="dollar",t.Dot="dot",t.DoubleCaretHorizontal="double-caret-horizontal",t.DoubleCaretVertical="double-caret-vertical",t.DoubleChevronDown="double-chevron-down",t.DoubleChevronLeft="double-chevron-left",t.DoubleChevronRight="double-chevron-right",t.DoubleChevronUp="double-chevron-up",t.DoughnutChart="doughnut-chart",t.Download="download",t.DragHandleHorizontal="drag-handle-horizontal",t.DragHandleVertical="drag-handle-vertical",t.Draw="draw",t.DrawerLeftFilled="drawer-left-filled",t.DrawerLeft="drawer-left",t.DrawerRightFilled="drawer-right-filled",t.DrawerRight="drawer-right",t.DriveTime="drive-time",t.Duplicate="duplicate",t.Edit="edit",t.Eject="eject",t.Emoji="emoji",t.Endnote="endnote",t.Endorsed="endorsed",t.Envelope="envelope",t.Equals="equals",t.Eraser="eraser",t.Error="error",t.Euro="euro",t.Exchange="exchange",t.ExcludeRow="exclude-row",t.ExpandAll="expand-all",t.Explain="explain",t.Export="export",t.EyeOff="eye-off",t.EyeOn="eye-on",t.EyeOpen="eye-open",t.FastBackward="fast-backward",t.FastForward="fast-forward",t.FeedSubscribed="feed-subscribed",t.Feed="feed",t.Film="film",t.FilterKeep="filter-keep",t.FilterList="filter-list",t.FilterOpen="filter-open",t.FilterRemove="filter-remove",t.Filter="filter",t.Flag="flag",t.Flame="flame",t.Flash="flash",t.FloatingPoint="floating-point",t.FloppyDisk="floppy-disk",t.FlowBranch="flow-branch",t.FlowEnd="flow-end",t.FlowLinear="flow-linear",t.FlowReviewBranch="flow-review-branch",t.FlowReview="flow-review",t.Flows="flows",t.FolderClose="folder-close",t.FolderNew="folder-new",t.FolderOpen="folder-open",t.FolderSharedOpen="folder-shared-open",t.FolderShared="folder-shared",t.Follower="follower",t.Following="following",t.Font="font",t.Fork="fork",t.Form="form",t.Fuel="fuel",t.FullCircle="full-circle",t.FullStackedChart="full-stacked-chart",t.Fullscreen="fullscreen",t.Function="function",t.GanttChart="gantt-chart",t.Generate="generate",t.Geofence="geofence",t.Geolocation="geolocation",t.Geosearch="geosearch",t.Geotime="geotime",t.GitBranch="git-branch",t.GitCommit="git-commit",t.GitMerge="git-merge",t.GitNewBranch="git-new-branch",t.GitPull="git-pull",t.GitPush="git-push",t.GitRepo="git-repo",t.Glass="glass",t.GlobeNetwork="globe-network",t.Globe="globe",t.GraphRemove="graph-remove",t.Graph="graph",t.GreaterThanOrEqualTo="greater-than-or-equal-to",t.GreaterThan="greater-than",t.GridView="grid-view",t.Grid="grid",t.GroupItem="group-item",t.GroupObjects="group-objects",t.GroupedBarChart="grouped-bar-chart",t.HandDown="hand-down",t.HandLeft="hand-left",t.HandRight="hand-right",t.HandUp="hand-up",t.Hand="hand",t.Hat="hat",t.HeaderOne="header-one",t.HeaderThree="header-three",t.HeaderTwo="header-two",t.Header="header",t.Headset="headset",t.HeartBroken="heart-broken",t.Heart="heart",t.HeatGrid="heat-grid",t.Heatmap="heatmap",t.Helicopter="helicopter",t.Help="help",t.HelperManagement="helper-management",t.HighPriority="high-priority",t.HighVoltagePole="high-voltage-pole",t.Highlight="highlight",t.History="history",t.Home="home",t.HorizontalBarChartAsc="horizontal-bar-chart-asc",t.HorizontalBarChartDesc="horizontal-bar-chart-desc",t.HorizontalBarChart="horizontal-bar-chart",t.HorizontalDistribution="horizontal-distribution",t.HorizontalInbetween="horizontal-inbetween",t.Hurricane="hurricane",t.IdNumber="id-number",t.ImageRotateLeft="image-rotate-left",t.ImageRotateRight="image-rotate-right",t.Import="import",t.InboxFiltered="inbox-filtered",t.InboxGeo="inbox-geo",t.InboxSearch="inbox-search",t.InboxUpdate="inbox-update",t.Inbox="inbox",t.InfoSign="info-sign",t.Inheritance="inheritance",t.InheritedGroup="inherited-group",t.InnerJoin="inner-join",t.Input="input",t.Insert="insert",t.Intelligence="intelligence",t.Intersection="intersection",t.IpAddress="ip-address",t.IssueClosed="issue-closed",t.IssueNew="issue-new",t.Issue="issue",t.Italic="italic",t.JoinTable="join-table",t.KeyBackspace="key-backspace",t.KeyCommand="key-command",t.KeyControl="key-control",t.KeyDelete="key-delete",t.KeyEnter="key-enter",t.KeyEscape="key-escape",t.KeyOption="key-option",t.KeyShift="key-shift",t.KeyTab="key-tab",t.Key="key",t.KnownVehicle="known-vehicle",t.LabTest="lab-test",t.Label="label",t.LayerOutline="layer-outline",t.Layer="layer",t.Layers="layers",t.LayoutAuto="layout-auto",t.LayoutBalloon="layout-balloon",t.LayoutCircle="layout-circle",t.LayoutGrid="layout-grid",t.LayoutGroupBy="layout-group-by",t.LayoutHierarchy="layout-hierarchy",t.LayoutLinear="layout-linear",t.LayoutSkewGrid="layout-skew-grid",t.LayoutSortedClusters="layout-sorted-clusters",t.Layout="layout",t.Learning="learning",t.LeftJoin="left-join",t.LengthenText="lengthen-text",t.LessThanOrEqualTo="less-than-or-equal-to",t.LessThan="less-than",t.Lifesaver="lifesaver",t.Lightbulb="lightbulb",t.Lightning="lightning",t.Link="link",t.ListColumns="list-columns",t.ListDetailView="list-detail-view",t.List="list",t.Locate="locate",t.Lock="lock",t.Locomotive="locomotive",t.LogIn="log-in",t.LogOut="log-out",t.LowVoltagePole="low-voltage-pole",t.Manual="manual",t.ManuallyEnteredData="manually-entered-data",t.ManyToMany="many-to-many",t.ManyToOne="many-to-one",t.MapCreate="map-create",t.MapMarker="map-marker",t.Map="map",t.Maximize="maximize",t.Media="media",t.MenuClosed="menu-closed",t.MenuOpen="menu-open",t.Menu="menu",t.MergeColumns="merge-columns",t.MergeLinks="merge-links",t.Microphone="microphone",t.Minimize="minimize",t.Minus="minus",t.MobilePhone="mobile-phone",t.MobileVideo="mobile-video",t.ModalFilled="modal-filled",t.Modal="modal",t.Model="model",t.Moon="moon",t.More="more",t.Mountain="mountain",t.Move="move",t.Mugshot="mugshot",t.MultiSelect="multi-select",t.Music="music",t.Nest="nest",t.NewDrawing="new-drawing",t.NewGridItem="new-grid-item",t.NewLayer="new-layer",t.NewLayers="new-layers",t.NewLink="new-link",t.NewObject="new-object",t.NewPerson="new-person",t.NewPrescription="new-prescription",t.NewShield="new-shield",t.NewTextBox="new-text-box",t.Ninja="ninja",t.NotEqualTo="not-equal-to",t.NotificationsSnooze="notifications-snooze",t.NotificationsUpdated="notifications-updated",t.Notifications="notifications",t.NumberedList="numbered-list",t.Numerical="numerical",t.Office="office",t.Offline="offline",t.OilField="oil-field",t.OneColumn="one-column",t.OneToMany="one-to-many",t.OneToOne="one-to-one",t.OpenApplication="open-application",t.Outdated="outdated",t.PageLayout="page-layout",t.PanelStats="panel-stats",t.PanelTable="panel-table",t.Paperclip="paperclip",t.Paragraph="paragraph",t.PasteVariable="paste-variable",t.PathSearch="path-search",t.Path="path",t.Pause="pause",t.People="people",t.Percentage="percentage",t.Person="person",t.PhoneCall="phone-call",t.PhoneForward="phone-forward",t.Phone="phone",t.PieChart="pie-chart",t.Pin="pin",t.PivotTable="pivot-table",t.Pivot="pivot",t.Play="play",t.Playbook="playbook",t.Plus="plus",t.PolygonFilter="polygon-filter",t.Power="power",t.PredictiveAnalysis="predictive-analysis",t.Prescription="prescription",t.Presentation="presentation",t.Print="print",t.Projects="projects",t.Properties="properties",t.Property="property",t.PublishFunction="publish-function",t.Pulse="pulse",t.Rain="rain",t.Random="random",t.Record="record",t.RectHeight="rect-height",t.RectWidth="rect-width",t.Rectangle="rectangle",t.Redo="redo",t.Refresh="refresh",t.Regex="regex",t.RegressionChart="regression-chart",t.RemoveColumnLeft="remove-column-left",t.RemoveColumnRight="remove-column-right",t.RemoveColumn="remove-column",t.RemoveRowBottom="remove-row-bottom",t.RemoveRowTop="remove-row-top",t.Remove="remove",t.Repeat="repeat",t.Reset="reset",t.Resolve="resolve",t.Rig="rig",t.RightJoin="right-join",t.Ring="ring",t.RocketSlant="rocket-slant",t.Rocket="rocket",t.RotateDocument="rotate-document",t.RotatePage="rotate-page",t.Route="route",t.Satellite="satellite",t.Saved="saved",t.ScatterPlot="scatter-plot",t.SearchAround="search-around",t.SearchTemplate="search-template",t.SearchText="search-text",t.Search="search",t.SegmentedControl="segmented-control",t.Select="select",t.Selection="selection",t.SendBackward="send-backward",t.SendMessage="send-message",t.SendToGraph="send-to-graph",t.SendToMap="send-to-map",t.SendTo="send-to",t.Sensor="sensor",t.SeriesAdd="series-add",t.SeriesConfiguration="series-configuration",t.SeriesDerived="series-derived",t.SeriesFiltered="series-filtered",t.SeriesSearch="series-search",t.Settings="settings",t.Shapes="shapes",t.Share="share",t.SharedFilter="shared-filter",t.Shield="shield",t.Ship="ship",t.Shop="shop",t.ShoppingCart="shopping-cart",t.ShortenText="shorten-text",t.SignalSearch="signal-search",t.SimCard="sim-card",t.Slash="slash",t.SmallCross="small-cross",t.SmallInfoSign="small-info-sign",t.SmallMinus="small-minus",t.SmallPlus="small-plus",t.SmallSquare="small-square",t.SmallTick="small-tick",t.Snowflake="snowflake",t.SoccerBall="soccer-ball",t.SocialMedia="social-media",t.SortAlphabeticalDesc="sort-alphabetical-desc",t.SortAlphabetical="sort-alphabetical",t.SortAsc="sort-asc",t.SortDesc="sort-desc",t.SortNumericalDesc="sort-numerical-desc",t.SortNumerical="sort-numerical",t.Sort="sort",t.SpellCheck="spell-check",t.SplitColumns="split-columns",t.SportsStadium="sports-stadium",t.Square="square",t.StackedChart="stacked-chart",t.StadiumGeometry="stadium-geometry",t.StarEmpty="star-empty",t.Star="star",t.StepBackward="step-backward",t.StepChart="step-chart",t.StepForward="step-forward",t.Stop="stop",t.Stopwatch="stopwatch",t.Strikethrough="strikethrough",t.Style="style",t.Subscript="subscript",t.Superscript="superscript",t.SwapHorizontal="swap-horizontal",t.SwapVertical="swap-vertical",t.Switch="switch",t.SymbolCircle="symbol-circle",t.SymbolCross="symbol-cross",t.SymbolDiamond="symbol-diamond",t.SymbolRectangle="symbol-rectangle",t.SymbolSquare="symbol-square",t.SymbolTriangleDown="symbol-triangle-down",t.SymbolTriangleUp="symbol-triangle-up",t.Syringe="syringe",t.Tag="tag",t.TakeAction="take-action",t.Tank="tank",t.Target="target",t.Taxi="taxi",t.Team="team",t.Temperature="temperature",t.TextHighlight="text-highlight",t.ThDerived="th-derived",t.ThDisconnect="th-disconnect",t.ThFiltered="th-filtered",t.ThList="th-list",t.Th="th",t.ThirdParty="third-party",t.ThumbsDown="thumbs-down",t.ThumbsUp="thumbs-up",t.TickCircle="tick-circle",t.Tick="tick",t.Time="time",t.TimelineAreaChart="timeline-area-chart",t.TimelineBarChart="timeline-bar-chart",t.TimelineEvents="timeline-events",t.TimelineLineChart="timeline-line-chart",t.Tint="tint",t.Torch="torch",t.Tractor="tractor",t.Train="train",t.Translate="translate",t.Trash="trash",t.Tree="tree",t.TrendingDown="trending-down",t.TrendingUp="trending-up",t.Trophy="trophy",t.Truck="truck",t.TwoColumns="two-columns",t.Unarchive="unarchive",t.Underline="underline",t.Undo="undo",t.UngroupObjects="ungroup-objects",t.UnknownVehicle="unknown-vehicle",t.Unlink="unlink",t.Unlock="unlock",t.Unpin="unpin",t.Unresolve="unresolve",t.Updated="updated",t.Upload="upload",t.User="user",t.Variable="variable",t.VerticalBarChartAsc="vertical-bar-chart-asc",t.VerticalBarChartDesc="vertical-bar-chart-desc",t.VerticalDistribution="vertical-distribution",t.VerticalInbetween="vertical-inbetween",t.Video="video",t.Virus="virus",t.VolumeDown="volume-down",t.VolumeOff="volume-off",t.VolumeUp="volume-up",t.Walk="walk",t.WarningSign="warning-sign",t.WaterfallChart="waterfall-chart",t.Waves="waves",t.WidgetButton="widget-button",t.WidgetFooter="widget-footer",t.WidgetHeader="widget-header",t.Widget="widget",t.Wind="wind",t.Wrench="wrench",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t.ZoomToFit="zoom-to-fit"})(k||(k={}));I={},I[k.AddClip]="61697",I[k.AddColumnLeft]="61698",I[k.AddColumnRight]="61699",I[k.AddLocation]="61700",I[k.AddRowBottom]="61701",I[k.AddRowTop]="61702",I[k.AddToArtifact]="61703",I[k.AddToFolder]="61704",I[k.Add]="61705",I[k.AimpointsTarget]="62261",I[k.Airplane]="61706",I[k.AlignCenter]="61707",I[k.AlignJustify]="61708",I[k.AlignLeft]="61709",I[k.AlignRight]="61710",I[k.AlignmentBottom]="61711",I[k.AlignmentHorizontalCenter]="61712",I[k.AlignmentLeft]="61713",I[k.AlignmentRight]="61714",I[k.AlignmentTop]="61715",I[k.AlignmentVerticalCenter]="61716",I[k.Ammunition]="62274",I[k.Anchor]="62256",I[k.Annotation]="61717",I[k.Antenna]="61718",I[k.AppHeader]="61719",I[k.Application]="61720",I[k.Applications]="61721",I[k.Archive]="61722",I[k.AreaOfInterest]="61723",I[k.ArrayBoolean]="61724",I[k.ArrayDate]="61725",I[k.ArrayFloatingPoint]="62253",I[k.ArrayNumeric]="61726",I[k.ArrayString]="61727",I[k.ArrayTimestamp]="61728",I[k.Array]="61729",I[k.ArrowBottomLeft]="61730",I[k.ArrowBottomRight]="61731",I[k.ArrowDown]="61732",I[k.ArrowLeft]="61733",I[k.ArrowRight]="61734",I[k.ArrowTopLeft]="61735",I[k.ArrowTopRight]="61736",I[k.ArrowUp]="61737",I[k.ArrowsHorizontal]="61738",I[k.ArrowsVertical]="61739",I[k.Asterisk]="61740",I[k.At]="62257",I[k.AutomaticUpdates]="61741",I[k.Axle]="62264",I[k.Backlink]="61742",I[k.Badge]="61743",I[k.BanCircle]="61744",I[k.BankAccount]="61745",I[k.Barcode]="61746",I[k.Blank]="61747",I[k.BlockedPerson]="61748",I[k.Bold]="61749",I[k.Book]="61750",I[k.Bookmark]="61751",I[k.Box]="61752",I[k.Briefcase]="61753",I[k.BringData]="61754",I[k.BringForward]="62292",I[k.Bug]="62254",I[k.Buggy]="61755",I[k.Build]="61756",I[k.Calculator]="61757",I[k.Calendar]="61758",I[k.Camera]="61759",I[k.CaretDown]="61760",I[k.CaretLeft]="61761",I[k.CaretRight]="61762",I[k.CaretUp]="61763",I[k.CargoShip]="61764",I[k.CellTower]="61765",I[k.Changes]="61766",I[k.Chart]="61767",I[k.Chat]="61768",I[k.ChevronBackward]="61769",I[k.ChevronDown]="61770",I[k.ChevronForward]="61771",I[k.ChevronLeft]="61772",I[k.ChevronRight]="61773",I[k.ChevronUp]="61774",I[k.CircleArrowDown]="61775",I[k.CircleArrowLeft]="61776",I[k.CircleArrowRight]="61777",I[k.CircleArrowUp]="61778",I[k.Circle]="61779",I[k.Citation]="61780",I[k.Clean]="61781",I[k.Clip]="61782",I[k.Clipboard]="61783",I[k.CloudDownload]="61784",I[k.CloudTick]="62286",I[k.CloudUpload]="61785",I[k.Cloud]="61786",I[k.CodeBlock]="61787",I[k.Code]="61788",I[k.Cog]="61789",I[k.CollapseAll]="61790",I[k.ColorFill]="62248",I[k.ColumnLayout]="61791",I[k.Comment]="61792",I[k.Comparison]="61793",I[k.Compass]="61794",I[k.Compressed]="61795",I[k.Confirm]="61796",I[k.Console]="61797",I[k.Contrast]="61798",I[k.Control]="61799",I[k.CreditCard]="61800",I[k.Crop]="62291",I[k.CrossCircle]="62262",I[k.Cross]="61801",I[k.Crown]="61802",I[k.CubeAdd]="61803",I[k.CubeRemove]="61804",I[k.Cube]="61805",I[k.CurvedRangeChart]="61806",I[k.Cut]="61807",I[k.Cycle]="61808",I[k.Dashboard]="61809",I[k.DataConnection]="61810",I[k.DataLineage]="61811",I[k.Database]="61812",I[k.Delete]="61813",I[k.Delta]="61814",I[k.DeriveColumn]="61815",I[k.Desktop]="61816",I[k.Detection]="62273",I[k.Diagnosis]="61817",I[k.DiagramTree]="61818",I[k.DirectionLeft]="61819",I[k.DirectionRight]="61820",I[k.Disable]="61821",I[k.Divide]="62247",I[k.DocumentOpen]="61822",I[k.DocumentShare]="61823",I[k.Document]="61824",I[k.Dollar]="61825",I[k.Dot]="61826",I[k.DoubleCaretHorizontal]="61827",I[k.DoubleCaretVertical]="61828",I[k.DoubleChevronDown]="61829",I[k.DoubleChevronLeft]="61830",I[k.DoubleChevronRight]="61831",I[k.DoubleChevronUp]="61832",I[k.DoughnutChart]="61833",I[k.Download]="61834",I[k.DragHandleHorizontal]="61835",I[k.DragHandleVertical]="61836",I[k.Draw]="61837",I[k.DrawerLeftFilled]="61838",I[k.DrawerLeft]="61839",I[k.DrawerRightFilled]="61840",I[k.DrawerRight]="61841",I[k.DriveTime]="61842",I[k.Duplicate]="61843",I[k.Edit]="61844",I[k.Eject]="61845",I[k.Emoji]="61846",I[k.Endnote]="62294",I[k.Endorsed]="61847",I[k.Envelope]="61848",I[k.Equals]="61849",I[k.Eraser]="61850",I[k.Error]="61851",I[k.Euro]="61852",I[k.Exchange]="61853",I[k.ExcludeRow]="61854",I[k.ExpandAll]="61855",I[k.Explain]="62285",I[k.Export]="61856",I[k.EyeOff]="61857",I[k.EyeOn]="61858",I[k.EyeOpen]="61859",I[k.FastBackward]="61860",I[k.FastForward]="61861",I[k.FeedSubscribed]="61862",I[k.Feed]="61863",I[k.Film]="61864",I[k.FilterKeep]="61865",I[k.FilterList]="61866",I[k.FilterOpen]="61867",I[k.FilterRemove]="61868",I[k.Filter]="61869",I[k.Flag]="61870",I[k.Flame]="61871",I[k.Flash]="61872",I[k.FloatingPoint]="62252",I[k.FloppyDisk]="61873",I[k.FlowBranch]="61874",I[k.FlowEnd]="61875",I[k.FlowLinear]="61876",I[k.FlowReviewBranch]="61877",I[k.FlowReview]="61878",I[k.Flows]="61879",I[k.FolderClose]="61880",I[k.FolderNew]="61881",I[k.FolderOpen]="61882",I[k.FolderSharedOpen]="61883",I[k.FolderShared]="61884",I[k.Follower]="61885",I[k.Following]="61886",I[k.Font]="61887",I[k.Fork]="61888",I[k.Form]="61889",I[k.Fuel]="62243",I[k.FullCircle]="61890",I[k.FullStackedChart]="61891",I[k.Fullscreen]="61892",I[k.Function]="61893",I[k.GanttChart]="61894",I[k.Generate]="62284",I[k.Geofence]="61895",I[k.Geolocation]="61896",I[k.Geosearch]="61897",I[k.Geotime]="62276",I[k.GitBranch]="61898",I[k.GitCommit]="61899",I[k.GitMerge]="61900",I[k.GitNewBranch]="61901",I[k.GitPull]="61902",I[k.GitPush]="61903",I[k.GitRepo]="61904",I[k.Glass]="61905",I[k.GlobeNetwork]="61906",I[k.Globe]="61907",I[k.GraphRemove]="61908",I[k.Graph]="61909",I[k.GreaterThanOrEqualTo]="61910",I[k.GreaterThan]="61911",I[k.GridView]="61912",I[k.Grid]="61913",I[k.GroupItem]="62282",I[k.GroupObjects]="61914",I[k.GroupedBarChart]="61915",I[k.HandDown]="61916",I[k.HandLeft]="61917",I[k.HandRight]="61918",I[k.HandUp]="61919",I[k.Hand]="61920",I[k.Hat]="61921",I[k.HeaderOne]="61922",I[k.HeaderThree]="61923",I[k.HeaderTwo]="61924",I[k.Header]="61925",I[k.Headset]="61926",I[k.HeartBroken]="61927",I[k.Heart]="61928",I[k.HeatGrid]="61929",I[k.Heatmap]="61930",I[k.Helicopter]="61931",I[k.Help]="61932",I[k.HelperManagement]="61933",I[k.HighPriority]="61934",I[k.HighVoltagePole]="62259",I[k.Highlight]="61935",I[k.History]="61936",I[k.Home]="61937",I[k.HorizontalBarChartAsc]="61938",I[k.HorizontalBarChartDesc]="61939",I[k.HorizontalBarChart]="61940",I[k.HorizontalDistribution]="61941",I[k.HorizontalInbetween]="62249",I[k.Hurricane]="61942",I[k.IdNumber]="61943",I[k.ImageRotateLeft]="61944",I[k.ImageRotateRight]="61945",I[k.Import]="61946",I[k.InboxFiltered]="61947",I[k.InboxGeo]="61948",I[k.InboxSearch]="61949",I[k.InboxUpdate]="61950",I[k.Inbox]="61951",I[k.InfoSign]="61952",I[k.Inheritance]="61953",I[k.InheritedGroup]="61954",I[k.InnerJoin]="61955",I[k.Input]="62283",I[k.Insert]="61956",I[k.Intelligence]="62263",I[k.Intersection]="61957",I[k.IpAddress]="61958",I[k.IssueClosed]="61959",I[k.IssueNew]="61960",I[k.Issue]="61961",I[k.Italic]="61962",I[k.JoinTable]="61963",I[k.KeyBackspace]="61964",I[k.KeyCommand]="61965",I[k.KeyControl]="61966",I[k.KeyDelete]="61967",I[k.KeyEnter]="61968",I[k.KeyEscape]="61969",I[k.KeyOption]="61970",I[k.KeyShift]="61971",I[k.KeyTab]="61972",I[k.Key]="61973",I[k.KnownVehicle]="61974",I[k.LabTest]="61975",I[k.Label]="61976",I[k.LayerOutline]="61977",I[k.Layer]="61978",I[k.Layers]="61979",I[k.LayoutAuto]="61980",I[k.LayoutBalloon]="61981",I[k.LayoutCircle]="61982",I[k.LayoutGrid]="61983",I[k.LayoutGroupBy]="61984",I[k.LayoutHierarchy]="61985",I[k.LayoutLinear]="61986",I[k.LayoutSkewGrid]="61987",I[k.LayoutSortedClusters]="61988",I[k.Layout]="61989",I[k.Learning]="61990",I[k.LeftJoin]="61991",I[k.LengthenText]="62270",I[k.LessThanOrEqualTo]="61992",I[k.LessThan]="61993",I[k.Lifesaver]="61994",I[k.Lightbulb]="61995",I[k.Lightning]="61996",I[k.Link]="61997",I[k.ListColumns]="61998",I[k.ListDetailView]="61999",I[k.List]="62000",I[k.Locate]="62001",I[k.Lock]="62002",I[k.Locomotive]="62267",I[k.LogIn]="62003",I[k.LogOut]="62004",I[k.LowVoltagePole]="62258",I[k.Manual]="62005",I[k.ManuallyEnteredData]="62006",I[k.ManyToMany]="62007",I[k.ManyToOne]="62008",I[k.MapCreate]="62009",I[k.MapMarker]="62010",I[k.Map]="62011",I[k.Maximize]="62012",I[k.Media]="62013",I[k.MenuClosed]="62014",I[k.MenuOpen]="62015",I[k.Menu]="62016",I[k.MergeColumns]="62017",I[k.MergeLinks]="62018",I[k.Microphone]="62275",I[k.Minimize]="62019",I[k.Minus]="62020",I[k.MobilePhone]="62021",I[k.MobileVideo]="62022",I[k.ModalFilled]="62023",I[k.Modal]="62024",I[k.Model]="62269",I[k.Moon]="62025",I[k.More]="62026",I[k.Mountain]="62027",I[k.Move]="62028",I[k.Mugshot]="62029",I[k.MultiSelect]="62030",I[k.Music]="62031",I[k.Nest]="62032",I[k.NewDrawing]="62033",I[k.NewGridItem]="62034",I[k.NewLayer]="62035",I[k.NewLayers]="62036",I[k.NewLink]="62037",I[k.NewObject]="62038",I[k.NewPerson]="62039",I[k.NewPrescription]="62040",I[k.NewShield]="62281",I[k.NewTextBox]="62041",I[k.Ninja]="62042",I[k.NotEqualTo]="62043",I[k.NotificationsSnooze]="62044",I[k.NotificationsUpdated]="62045",I[k.Notifications]="62046",I[k.NumberedList]="62047",I[k.Numerical]="62048",I[k.Office]="62049",I[k.Offline]="62050",I[k.OilField]="62051",I[k.OneColumn]="62052",I[k.OneToMany]="62053",I[k.OneToOne]="62054",I[k.OpenApplication]="62251",I[k.Outdated]="62055",I[k.PageLayout]="62056",I[k.PanelStats]="62057",I[k.PanelTable]="62058",I[k.Paperclip]="62059",I[k.Paragraph]="62060",I[k.PasteVariable]="62278",I[k.PathSearch]="62061",I[k.Path]="62062",I[k.Pause]="62063",I[k.People]="62064",I[k.Percentage]="62065",I[k.Person]="62066",I[k.PhoneCall]="62279",I[k.PhoneForward]="62280",I[k.Phone]="62067",I[k.PieChart]="62068",I[k.Pin]="62069",I[k.PivotTable]="62070",I[k.Pivot]="62071",I[k.Play]="62072",I[k.Playbook]="62244",I[k.Plus]="62073",I[k.PolygonFilter]="62074",I[k.Power]="62075",I[k.PredictiveAnalysis]="62076",I[k.Prescription]="62077",I[k.Presentation]="62078",I[k.Print]="62079",I[k.Projects]="62080",I[k.Properties]="62081",I[k.Property]="62082",I[k.PublishFunction]="62083",I[k.Pulse]="62084",I[k.Rain]="62085",I[k.Random]="62086",I[k.Record]="62087",I[k.RectHeight]="62245",I[k.RectWidth]="62246",I[k.Rectangle]="62241",I[k.Redo]="62088",I[k.Refresh]="62089",I[k.Regex]="62255",I[k.RegressionChart]="62090",I[k.RemoveColumnLeft]="62091",I[k.RemoveColumnRight]="62092",I[k.RemoveColumn]="62093",I[k.RemoveRowBottom]="62094",I[k.RemoveRowTop]="62095",I[k.Remove]="62096",I[k.Repeat]="62097",I[k.Reset]="62098",I[k.Resolve]="62099",I[k.Rig]="62100",I[k.RightJoin]="62101",I[k.Ring]="62102",I[k.RocketSlant]="62103",I[k.Rocket]="62104",I[k.RotateDocument]="62105",I[k.RotatePage]="62106",I[k.Route]="62107",I[k.Satellite]="62108",I[k.Saved]="62109",I[k.ScatterPlot]="62110",I[k.SearchAround]="62111",I[k.SearchTemplate]="62112",I[k.SearchText]="62113",I[k.Search]="62114",I[k.SegmentedControl]="62115",I[k.Select]="62116",I[k.Selection]="62117",I[k.SendBackward]="62293",I[k.SendMessage]="62118",I[k.SendToGraph]="62119",I[k.SendToMap]="62120",I[k.SendTo]="62121",I[k.Sensor]="62268",I[k.SeriesAdd]="62122",I[k.SeriesConfiguration]="62123",I[k.SeriesDerived]="62124",I[k.SeriesFiltered]="62125",I[k.SeriesSearch]="62126",I[k.Settings]="62127",I[k.Shapes]="62128",I[k.Share]="62129",I[k.SharedFilter]="62130",I[k.Shield]="62131",I[k.Ship]="62132",I[k.Shop]="62133",I[k.ShoppingCart]="62134",I[k.ShortenText]="62271",I[k.SignalSearch]="62135",I[k.SimCard]="62136",I[k.Slash]="62137",I[k.SmallCross]="62138",I[k.SmallInfoSign]="62260",I[k.SmallMinus]="62139",I[k.SmallPlus]="62140",I[k.SmallSquare]="62141",I[k.SmallTick]="62142",I[k.Snowflake]="62143",I[k.SoccerBall]="62288",I[k.SocialMedia]="62144",I[k.SortAlphabeticalDesc]="62145",I[k.SortAlphabetical]="62146",I[k.SortAsc]="62147",I[k.SortDesc]="62148",I[k.SortNumericalDesc]="62149",I[k.SortNumerical]="62150",I[k.Sort]="62151",I[k.SpellCheck]="62272",I[k.SplitColumns]="62152",I[k.SportsStadium]="62289",I[k.Square]="62153",I[k.StackedChart]="62154",I[k.StadiumGeometry]="62155",I[k.StarEmpty]="62156",I[k.Star]="62157",I[k.StepBackward]="62158",I[k.StepChart]="62159",I[k.StepForward]="62160",I[k.Stop]="62161",I[k.Stopwatch]="62162",I[k.Strikethrough]="62163",I[k.Style]="62164",I[k.Subscript]="62265",I[k.Superscript]="62266",I[k.SwapHorizontal]="62165",I[k.SwapVertical]="62166",I[k.Switch]="62167",I[k.SymbolCircle]="62168",I[k.SymbolCross]="62169",I[k.SymbolDiamond]="62170",I[k.SymbolRectangle]="62242",I[k.SymbolSquare]="62171",I[k.SymbolTriangleDown]="62172",I[k.SymbolTriangleUp]="62173",I[k.Syringe]="62174",I[k.Tag]="62175",I[k.TakeAction]="62176",I[k.Tank]="62177",I[k.Target]="62178",I[k.Taxi]="62179",I[k.Team]="62290",I[k.Temperature]="62180",I[k.TextHighlight]="62181",I[k.ThDerived]="62182",I[k.ThDisconnect]="62183",I[k.ThFiltered]="62184",I[k.ThList]="62185",I[k.Th]="62186",I[k.ThirdParty]="62187",I[k.ThumbsDown]="62188",I[k.ThumbsUp]="62189",I[k.TickCircle]="62190",I[k.Tick]="62191",I[k.Time]="62192",I[k.TimelineAreaChart]="62193",I[k.TimelineBarChart]="62194",I[k.TimelineEvents]="62195",I[k.TimelineLineChart]="62196",I[k.Tint]="62197",I[k.Torch]="62198",I[k.Tractor]="62199",I[k.Train]="62200",I[k.Translate]="62201",I[k.Trash]="62202",I[k.Tree]="62203",I[k.TrendingDown]="62204",I[k.TrendingUp]="62205",I[k.Trophy]="62287",I[k.Truck]="62206",I[k.TwoColumns]="62207",I[k.Unarchive]="62208",I[k.Underline]="62209",I[k.Undo]="62210",I[k.UngroupObjects]="62211",I[k.UnknownVehicle]="62212",I[k.Unlink]="62277",I[k.Unlock]="62213",I[k.Unpin]="62214",I[k.Unresolve]="62215",I[k.Updated]="62216",I[k.Upload]="62217",I[k.User]="62218",I[k.Variable]="62219",I[k.VerticalBarChartAsc]="62220",I[k.VerticalBarChartDesc]="62221",I[k.VerticalDistribution]="62222",I[k.VerticalInbetween]="62250",I[k.Video]="62223",I[k.Virus]="62224",I[k.VolumeDown]="62225",I[k.VolumeOff]="62226",I[k.VolumeUp]="62227",I[k.Walk]="62228",I[k.WarningSign]="62229",I[k.WaterfallChart]="62230",I[k.Waves]="62231",I[k.WidgetButton]="62232",I[k.WidgetFooter]="62233",I[k.WidgetHeader]="62234",I[k.Widget]="62235",I[k.Wind]="62236",I[k.Wrench]="62237",I[k.ZoomIn]="62238",I[k.ZoomOut]="62239",I[k.ZoomToFit]="62240";var W7={},U7={};for(var BT=0,Z4=Object.values(k);BT<Z4.length;BT++){var _x=Z4[BT];W7[Qce(_x)]=_x,U7[efe(_x).toUpperCase()]=_x}var G7=xe(xe({},W7),U7),rfe=new Set(Object.values(G7));function ife(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function afe(t,e){return ip(this,void 0,void 0,function(){var n,r,i;return ap(this,function(a){switch(a.label){case 0:return n=ife("development")&&typeof performance<"u",n&&(r=performance.now(),console.info("Started '".concat(t,"'..."))),[4,e()];case 1:return a.sent(),n&&(i=Math.round(performance.now()-r),console.info("Finished '".concat(t,"' in ").concat(i,"ms"))),[2]}})})}function ofe(t){return ip(this,void 0,void 0,function(){var e,n;return ap(this,function(r){switch(r.label){case 0:return e=t.loader,n=e===void 0?Pd.defaultLoader:e,typeof n!="function"?[3,1]:[2,n];case 1:return n!=="all"?[3,3]:[4,Y4(()=>import("./allPathsLoader-877bf9a9.js"),[])];case 2:return[2,r.sent().allPathsLoader];case 3:return[4,Y4(()=>import("./splitPathsBySizeLoader-37ed6618.js"),[])];case 4:return[2,r.sent().splitPathsBySizeLoader]}})})}var Zg=function(){function t(){this.defaultLoader="split-by-size",this.loadedIconPaths16=new Map,this.loadedIconPaths20=new Map}return t.setLoaderOptions=function(e){e.loader!==void 0&&(Pd.defaultLoader=e.loader)},t.load=function(e,n,r){return ip(this,void 0,void 0,function(){var i=this;return ap(this,function(a){switch(a.label){case 0:return Array.isArray(e)||(e=[e]),[4,Promise.all(e.map(function(o){return i.loadImpl(o,n,r)}))];case 1:return a.sent(),[2]}})})},t.loadAll=function(e){return ip(this,void 0,void 0,function(){var n,r=this;return ap(this,function(i){return n=Object.values(G7),afe("[Blueprint] loading all icons",function(){return ip(r,void 0,void 0,function(){return ap(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.load(n,Et.STANDARD,e),this.load(n,Et.LARGE,e)])];case 1:return a.sent(),[2]}})})}),[2]})})},t.getPaths=function(e,n){if(this.isValidIconName(e)){var r=n<Et.LARGE?Pd.loadedIconPaths16:Pd.loadedIconPaths20;return r.get(e)}},t.loadImpl=function(e,n,r){return r===void 0&&(r={}),ip(this,void 0,void 0,function(){var i,a,o,s,u;return ap(this,function(l){switch(l.label){case 0:return this.isValidIconName(e)?(i=n<Et.LARGE?Pd.loadedIconPaths16:Pd.loadedIconPaths20,i.has(e)?[2]:[4,ofe(r)]):(console.error("[Blueprint] Unknown icon '".concat(e,"'")),[2]);case 1:a=l.sent(),l.label=2;case 2:return l.trys.push([2,4,,5]),o=n<Et.LARGE?Et.STANDARD:Et.LARGE,[4,a(e,o)];case 3:return s=l.sent(),i.set(e,s),[3,5];case 4:return u=l.sent(),console.error("[Blueprint] Unable to load ".concat(n,"px icon '").concat(e,"'"),u),[3,5];case 5:return[2]}})})},t.isValidIconName=function(e){return rfe.has(e)},t}(),Pd=new Zg,sfe="bp5",Q4="".concat(sfe,"-icon"),J4=new Map;function ufe(t){var e,n=(e=J4.get(t))!==null&&e!==void 0?e:0;return J4.set(t,n+1),"".concat(t,"-").concat(n)}var $v=B.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.color,a=t.htmlTitle,o=t.iconName,s=t.size,u=s===void 0?Et.STANDARD:s,l=t.svgProps,c=t.tagName,f=c===void 0?"span":c,h=t.title,d=zn(t,["children","className","color","htmlTitle","iconName","size","svgProps","tagName","title"]),p=u>=Et.LARGE,v=p?Et.LARGE:Et.STANDARD,m="0 0 ".concat(v," ").concat(v),g=ufe("iconTitle"),y=xe({fill:i,height:u,role:"img",viewBox:m,width:u},l);return f===null?B.createElement("svg",xe({"aria-labelledby":h?g:void 0,"data-icon":o,ref:e},y,d,{className:ut(r,l==null?void 0:l.className)}),h&&B.createElement("title",{id:g},h),n):B.createElement(f,xe(xe({"aria-hidden":h?void 0:!0},d),{className:ut(Q4,"".concat(Q4,"-").concat(o),r),ref:e,title:a}),B.createElement("svg",xe({"data-icon":o},y,{className:l==null?void 0:l.className}),h&&B.createElement("title",null,h),n))});$v.displayName="Blueprint5.SVGIconContainer";var H$=B.forwardRef(function(t,e){var n=t.size>=Et.LARGE,r=n?Et.LARGE:Et.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return B.createElement($v,xe({iconName:"caret-right",ref:e},t),B.createElement("path",{d:n?"M280 200C280 206.2 277 211.4 272.6 215.2L272.8 215.4L152.8 315.4L152.6 315.2C149.2 318 144.8 320 140 320C129 320 120 311 120 300V100C120 89 129 80 140 80C144.8 80 149.2 82 152.6 84.8L152.8 84.6L272.8 184.6L272.6 184.8C277 188.6 280 193.8 280 200z":"M220 160C220 163 218.6 165.6 216.6 167.4L216.6 167.4L136.6 237.4L136.6 237.4C134.8 239 132.6 240 130 240C124.4 240 120 235.6 120 230V90C120 84.4 124.4 80 130 80C132.6 80 134.8 81 136.6 82.6C136.6 82.6 136.6 82.6 136.6 82.6L216.6 152.6L216.6 152.6C218.6 154.4 220 157 220 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});H$.defaultProps={size:Et.STANDARD};H$.displayName="Blueprint5.Icon.CaretRight";var j$=B.forwardRef(function(t,e){var n=t.size>=Et.LARGE,r=n?Et.LARGE:Et.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return B.createElement($v,xe({iconName:"cross",ref:e},t),B.createElement("path",{d:n?"M228.2 200L314 285.8C317.8 289.4 320 294.4 320 300C320 311 311 320 300 320C294.4000000000001 320 289.4000000000001 317.8 285.8 314.2L200 228.2L114.2 314.2C110.6 317.8 105.6 320 100 320C89 320 80 311 80 300C80 294.4 82.2 289.4 85.8 285.8L171.8 200L86 114.2000000000001C82.2 110.6 80 105.6 80 100C80 89 89 80 100 80C105.6 80 110.6 82.2 114.2 85.8L200 171.8L285.8 86C289.4000000000001 82.2 294.4000000000001 80 300 80C311 80 320 89 320 100C320 105.6 317.8 110.6 314.2000000000001 114.2000000000001L228.2 200z":"M188.2 160L254 225.8C257.8 229.4 260 234.4 260 240C260 251 251 260 240 260C234.4 260 229.4 257.8 225.8 254.2L160 188.2L94.2 254.2C90.6 257.8 85.6 260 80 260C69 260 60 251 60 240C60 234.4 62.2 229.4 65.8 225.8L131.8 160L66 94.2C62.2 90.6 60 85.6 60 80C60 69 69 60 80 60C85.6 60 90.6 62.2 94.2 65.8L160 131.8L225.8 66C229.4 62.2 234.4 60 240 60C251 60 260 69 260 80C260 85.6 257.8 90.6 254.2 94.2L188.2 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});j$.defaultProps={size:Et.STANDARD};j$.displayName="Blueprint5.Icon.Cross";var ZS=B.forwardRef(function(t,e){var n=t.size>=Et.LARGE,r=n?Et.LARGE:Et.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return B.createElement($v,xe({iconName:"small-cross",ref:e},t),B.createElement("path",{d:n?"M228.2 200L294 265.8C297.8 269.4 300 274.4 300 280C300 291 291 300 280 300C274.4000000000001 300 269.4000000000001 297.8 265.8 294.2L200 228.2L134.2 294.2C130.6 297.8 125.6 300 120 300C109 300 100 291 100 280C100 274.4 102.2 269.4 105.8 265.8L171.8 200L106 134.2000000000001C102.2 130.6 100 125.6 100 120C100 109 109 100 120 100C125.6 100 130.6 102.2 134.2 105.8L200 171.8L265.8 106C269.4000000000001 102.2 274.4000000000001 100 280 100C291 100 300 109 300 120C300 125.6 297.8 130.6 294.2000000000001 134.2000000000001L228.2 200z":"M188.2 160L234 205.8C237.8 209.4 240 214.4 240 220C240 231 231 240 220 240C214.4 240 209.4 237.8 205.8 234.2L160 188.2L114.2 234.2C110.6 237.8 105.6 240 100 240C89 240 80 231 80 220C80 214.4 82.2 209.4 85.8 205.8L131.8 160L86 114.2C82.2 110.6 80 105.6 80 100C80 89 89 80 100 80C105.6 80 110.6 82.2 114.2 85.8L160 131.8L205.8 86C209.4 82.2 214.4 80 220 80C231 80 240 89 240 100C240 105.6 237.8 110.6 234.2 114.2L188.2 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});ZS.defaultProps={size:Et.STANDARD};ZS.displayName="Blueprint5.Icon.SmallCross";var q$=B.forwardRef(function(t,e){var n=t.size>=Et.LARGE,r=n?Et.LARGE:Et.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return B.createElement($v,xe({iconName:"small-tick",ref:e},t),B.createElement("path",{d:n?"M300 300C294.4000000000001 300 289.4000000000001 297.8 285.8 294.2L160 168.2L114.2 214.2C110.6 217.8 105.6 220 100 220C89 220 80 211 80 200C80 194.4 82.2 189.4 85.8 185.8L145.8 125.8C149.4 122.2 154.4 120 160 120S170.6 122.2 174.2 125.8L314.2000000000001 265.8C317.8 269.4 320 274.4 320 280C320 291 311 300 300 300z":"M240 220C234.4 220 229.4 217.8 225.8 214.2L140 128.2L94.2 174.2C90.6 177.8 85.6 180 80 180C69 180 60 171 60 160C60 154.4 62.2 149.4 65.8 145.8L125.8 85.8C129.4 82.2 134.4 80 140 80S150.6 82.2 154.2 85.8L254.2 185.8C257.8 189.4 260 194.4 260 200C260 211 251 220 240 220z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});q$.defaultProps={size:Et.STANDARD};q$.displayName="Blueprint5.Icon.SmallTick";var Do=B.forwardRef(function(t,e){var n,r,i=t.autoLoad,a=t.className,o=t.color,s=t.icon,u=t.intent,l=t.tagName,c=t.svgProps,f=t.title,h=t.htmlTitle,d=zn(t,["autoLoad","className","color","icon","intent","tagName","svgProps","title","htmlTitle"]),p=(r=(n=t.iconSize)!==null&&n!==void 0?n:t.size)!==null&&r!==void 0?r:Et.STANDARD,v=B.useState(function(){return typeof s=="string"?Zg.getPaths(s,p):void 0}),m=v[0],g=v[1];if(B.useEffect(function(){var w=!1;if(typeof s=="string"){var b=Zg.getPaths(s,p);b!==void 0?g(b):i?Zg.load(s,p).then(function(){w||g(Zg.getPaths(s,p))}).catch(function(C){console.error("[Blueprint] Icon '".concat(s,"' (").concat(p,"px) could not be loaded."),C)}):console.error("[Blueprint] Icon '".concat(s,"' (").concat(p,"px) is not loaded yet and autoLoad={false}, did you call Icons.load('").concat(s,"', ").concat(p,")?"))}return function(){w=!0}},[i,s,p]),s==null||typeof s=="boolean")return null;if(typeof s!="string")return s;if(m==null){var y=p===Et.STANDARD?vce:p===Et.LARGE?gce:void 0;return B.createElement(l,xe(xe({"aria-hidden":f?void 0:!0},xh(d)),{className:ut(KS,y,xce(s),Ma(u),a),"data-icon":s,ref:e,title:h}))}else{var x=m.map(function(w,b){return B.createElement("path",{d:w,key:b,fillRule:"evenodd"})});return B.createElement($v,xe({children:x,className:ut(Ma(u),a),color:o,htmlTitle:h,iconName:s,ref:e,size:p,svgProps:c,tagName:l,title:f},xh(d)))}});Do.defaultProps={autoLoad:!0,tagName:"span"};Do.displayName="".concat(Rt,".Icon");var Bf;(function(t){t[t.SMALL=20]="SMALL",t[t.STANDARD=50]="STANDARD",t[t.LARGE=100]="LARGE"})(Bf||(Bf={}));var Sl=45,ez="M 50,50 m 0,-".concat(Sl," a ").concat(Sl,",").concat(Sl," 0 1 1 0,").concat(Sl*2," a ").concat(Sl,",").concat(Sl," 0 1 1 0,-").concat(Sl*2),gg=280,lfe=10,cfe=4,ffe=16,QS=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidUpdate=function(n){n.value!==this.props.value&&this.forceUpdate()},e.prototype.render=function(){var n,r=this.props,i=r.className,a=r.intent,o=r.value,s=r.tagName,u=s===void 0?"div":s,l=zn(r,["className","intent","value","tagName"]),c=this.getSize(),f=ut(qS,Ma(a),(n={},n[cce]=o!=null,n),i),h=Math.min(ffe,cfe*Bf.LARGE/c),d=gg-gg*(o==null?.25:P7(o,0,1));return B.createElement(u,xe({"aria-label":"loading","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":o===void 0?void 0:o*100,className:f,role:"progressbar"},l),B.createElement(u,{className:uce},B.createElement("svg",{width:c,height:c,strokeWidth:h.toFixed(2),viewBox:this.getViewBox(h)},B.createElement("path",{className:fce,d:ez}),B.createElement("path",{className:lce,d:ez,pathLength:gg,strokeDasharray:"".concat(gg," ").concat(gg),strokeDashoffset:d}))))},e.prototype.validateProps=function(n){var r=n.className,i=r===void 0?"":r,a=n.size;a!=null&&(i.indexOf(u0)>=0||i.indexOf(yh)>=0)&&console.warn(Oce)},e.prototype.getSize=function(){var n=this.props,r=n.className,i=r===void 0?"":r,a=n.size;return a==null?i.indexOf(u0)>=0?Bf.SMALL:i.indexOf(yh)>=0?Bf.LARGE:Bf.STANDARD:Math.max(lfe,a)},e.prototype.getViewBox=function(n){var r=Sl+n/2,i=(50-r).toFixed(2),a=(r*2).toFixed(2);return"".concat(i," ").concat(i," ").concat(a," ").concat(a)},e.displayName="".concat(Rt,".Spinner"),e}(Zr),JS=B.forwardRef(function(t,e){var n,r=t.children,i=t.tagName,a=i===void 0?"div":i,o=t.title,s=t.className,u=t.ellipsize,l=zn(t,["children","tagName","title","className","ellipsize"]),c=B.useRef(),f=B.useMemo(function(){return fy(c,e)},[e]),h=B.useState(""),d=h[0],p=h[1],v=B.useState(),m=v[0],g=v[1];return B.useLayoutEffect(function(){var y;((y=c.current)===null||y===void 0?void 0:y.textContent)!=null&&(g(u&&c.current.scrollWidth>c.current.clientWidth),p(c.current.textContent))},[c,r,u]),B.createElement(a,xe(xe({},l),{className:ut((n={},n[rle]=u,n),s),ref:f,title:o??(m?d:void 0)}),r)});JS.defaultProps={ellipsize:!1};JS.displayName="".concat(Rt,".Text");var Oa=B.forwardRef(function(t,e){var n=j7(t,e);return B.createElement("button",xe({type:"button"},xh(t),n),q7(t))});Oa.displayName="".concat(Rt,".Button");var H7=B.forwardRef(function(t,e){var n=t.href,r=t.tabIndex,i=r===void 0?0:r,a=j7(t,e);return B.createElement("a",xe({role:"button"},xh(t),a,{"aria-disabled":a.disabled,href:a.disabled?void 0:n,tabIndex:a.disabled?-1:i}),q7(t))});H7.displayName="".concat(Rt,".AnchorButton");function j7(t,e){var n,r=t.active,i=r===void 0?!1:r,a=t.alignText,o=t.fill,s=t.large,u=t.loading,l=u===void 0?!1:u,c=t.minimal,f=t.onBlur,h=t.onKeyDown,d=t.onKeyUp,p=t.outlined,v=t.small,m=t.tabIndex,g=t.disabled||l,y=B.useState(),x=y[0],w=y[1],b=B.useState(!1),C=b[0],D=b[1],S=B.useRef(null),_=B.useCallback(function(N){C&&D(!1),f==null||f(N)},[C,f]),T=B.useCallback(function(N){Hb(N)&&(N.preventDefault(),N.key!==x&&D(!0)),w(N.key),h==null||h(N)},[x,h]),E=B.useCallback(function(N){var R;Hb(N)&&(D(!1),(R=S.current)===null||R===void 0||R.click()),w(void 0),d==null||d(N)},[d]),A=ut(uy,(n={},n[Wb]=!g&&(i||C),n[sy]=g,n[qh]=o,n[yh]=s,n[Jue]=l,n[U$]=c,n[ele]=p,n[u0]=v,n),YS(a),Ma(t.intent),t.className);return{className:A,disabled:g,onBlur:_,onClick:g?void 0:t.onClick,onFocus:g?void 0:t.onFocus,onKeyDown:T,onKeyUp:E,ref:fy(S,e),tabIndex:g?-1:m}}function q7(t){var e=t.children,n=t.ellipsizeText,r=t.icon,i=t.loading,a=t.rightIcon,o=t.text,s=t.textClassName,u=!sI(o)||!sI(e);return B.createElement(B.Fragment,null,i&&B.createElement(QS,{key:"loading",className:ule,size:Bf.SMALL}),B.createElement(Do,{key:"leftIcon",icon:r}),u&&B.createElement(JS,{key:"text",className:ut(lle,s),ellipsize:n,tagName:"span"},o,e),B.createElement(Do,{key:"rightIcon",icon:a}))}function $o(t,e){return B.forwardRef(function(n,r){var i=n.className,a=n.children,o=zn(n,["className","children"]);return B.createElement(t,xe(xe({},o),{className:ut(e,i),ref:r}),a)})}$o("h1",Rv);$o("h2",Rv);$o("h3",Rv);var X7=$o("h4",Rv);$o("h5",Rv);var K7=$o("h6",Rv);$o("blockquote",ile);$o("code",ale);$o("pre",ole);$o("label",Nle);$o("ol",k7);$o("ul",k7);function wh(){return wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wh.apply(this,arguments)}function X$(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uI(t,e){return uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uI(t,e)}function e2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uI(t,e)}var Y7={exports:{}},hfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",dfe=hfe,pfe=dfe;function Z7(){}function Q7(){}Q7.resetWarningCache=Z7;var vfe=function(){function t(r,i,a,o,s,u){if(u!==pfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Q7,resetWarningCache:Z7};return n.PropTypes=n,n};Y7.exports=vfe();var hy=Y7.exports;function gfe(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function mfe(t,e){t.classList?t.classList.add(e):gfe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function tz(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yfe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=tz(t.className,e):t.setAttribute("class",tz(t.className&&t.className.baseVal||"",e))}const nz={disabled:!1},jb=Cn.createContext(null);var J7=function(e){return e.scrollTop},Qg="unmounted",_f="exited",Tf="entering",Ld="entered",lI="exiting",il=function(t){e2(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var o=i,s=o&&!o.isMounting?r.enter:r.appear,u;return a.appearStatus=null,r.in?s?(u=_f,a.appearStatus=Tf):u=Ld:r.unmountOnExit||r.mountOnEnter?u=Qg:u=_f,a.state={status:u},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var o=i.in;return o&&a.status===Qg?{status:_f}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Tf&&o!==Ld&&(a=Tf):(o===Tf||o===Ld)&&(a=lI)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,o,s;return a=o=s=i,i!=null&&typeof i!="number"&&(a=i.exit,o=i.enter,s=i.appear!==void 0?i.appear:o),{exit:a,enter:o,appear:s}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===Tf){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Dx.findDOMNode(this);o&&J7(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_f&&this.setState({status:Qg})},n.performEnter=function(i){var a=this,o=this.props.enter,s=this.context?this.context.isMounting:i,u=this.props.nodeRef?[s]:[Dx.findDOMNode(this),s],l=u[0],c=u[1],f=this.getTimeouts(),h=s?f.appear:f.enter;if(!i&&!o||nz.disabled){this.safeSetState({status:Ld},function(){a.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Tf},function(){a.props.onEntering(l,c),a.onTransitionEnd(h,function(){a.safeSetState({status:Ld},function(){a.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,a=this.props.exit,o=this.getTimeouts(),s=this.props.nodeRef?void 0:Dx.findDOMNode(this);if(!a||nz.disabled){this.safeSetState({status:_f},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:lI},function(){i.props.onExiting(s),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:_f},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,o=!0;return this.nextCallback=function(s){o&&(o=!1,a.nextCallback=null,i(s))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:Dx.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!o||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Qg)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=X$(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Cn.createElement(jb.Provider,{value:null},typeof o=="function"?o(i,s):Cn.cloneElement(Cn.Children.only(o),s))},e}(Cn.Component);il.contextType=jb;il.propTypes={};function dd(){}il.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dd,onEntering:dd,onEntered:dd,onExit:dd,onExiting:dd,onExited:dd};il.UNMOUNTED=Qg;il.EXITED=_f;il.ENTERING=Tf;il.ENTERED=Ld;il.EXITING=lI;const xfe=il;var wfe=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return mfe(e,r)})},VT=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return yfe(e,r)})},K$=function(t){e2(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(s,u){var l=r.resolveArguments(s,u),c=l[0],f=l[1];r.removeClasses(c,"exit"),r.addClass(c,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(s,u)},r.onEntering=function(s,u){var l=r.resolveArguments(s,u),c=l[0],f=l[1],h=f?"appear":"enter";r.addClass(c,h,"active"),r.props.onEntering&&r.props.onEntering(s,u)},r.onEntered=function(s,u){var l=r.resolveArguments(s,u),c=l[0],f=l[1],h=f?"appear":"enter";r.removeClasses(c,h),r.addClass(c,h,"done"),r.props.onEntered&&r.props.onEntered(s,u)},r.onExit=function(s){var u=r.resolveArguments(s),l=u[0];r.removeClasses(l,"appear"),r.removeClasses(l,"enter"),r.addClass(l,"exit","base"),r.props.onExit&&r.props.onExit(s)},r.onExiting=function(s){var u=r.resolveArguments(s),l=u[0];r.addClass(l,"exit","active"),r.props.onExiting&&r.props.onExiting(s)},r.onExited=function(s){var u=r.resolveArguments(s),l=u[0];r.removeClasses(l,"exit"),r.addClass(l,"exit","done"),r.props.onExited&&r.props.onExited(s)},r.resolveArguments=function(s,u){return r.props.nodeRef?[r.props.nodeRef.current,s]:[s,u]},r.getClassNames=function(s){var u=r.props.classNames,l=typeof u=="string",c=l&&u?u+"-":"",f=l?""+c+s:u[s],h=l?f+"-active":u[s+"Active"],d=l?f+"-done":u[s+"Done"];return{baseClassName:f,activeClassName:h,doneClassName:d}},r}var n=e.prototype;return n.addClass=function(i,a,o){var s=this.getClassNames(a)[o+"ClassName"],u=this.getClassNames("enter"),l=u.doneClassName;a==="appear"&&o==="done"&&l&&(s+=" "+l),o==="active"&&i&&J7(i),s&&(this.appliedClasses[a][o]=s,wfe(i,s))},n.removeClasses=function(i,a){var o=this.appliedClasses[a],s=o.base,u=o.active,l=o.done;this.appliedClasses[a]={},s&&VT(i,s),u&&VT(i,u),l&&VT(i,l)},n.render=function(){var i=this.props;i.classNames;var a=X$(i,["classNames"]);return Cn.createElement(xfe,wh({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Cn.Component);K$.defaultProps={classNames:""};K$.propTypes={};const WT=K$;function cI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y$(t,e){var n=function(a){return e&&B.isValidElement(a)?e(a):a},r=Object.create(null);return t&&B.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function bfe(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),i=[];for(var a in t)a in e?i.length&&(r[a]=i,i=[]):i.push(a);var o,s={};for(var u in e){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];s[r[u][o]]=n(l)}s[u]=n(u)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s}function Vf(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Cfe(t,e){return Y$(t.children,function(n){return B.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Vf(n,"appear",t),enter:Vf(n,"enter",t),exit:Vf(n,"exit",t)})})}function Sfe(t,e,n){var r=Y$(t.children),i=bfe(e,r);return Object.keys(i).forEach(function(a){var o=i[a];if(B.isValidElement(o)){var s=a in e,u=a in r,l=e[a],c=B.isValidElement(l)&&!l.props.in;u&&(!s||c)?i[a]=B.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Vf(o,"exit",t),enter:Vf(o,"enter",t)}):!u&&s&&!c?i[a]=B.cloneElement(o,{in:!1}):u&&s&&B.isValidElement(l)&&(i[a]=B.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:Vf(o,"exit",t),enter:Vf(o,"enter",t)}))}}),i}var Dfe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},_fe={component:"div",childFactory:function(e){return e}},Z$=function(t){e2(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var o=a.handleExited.bind(cI(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,a){var o=a.children,s=a.handleExited,u=a.firstRender;return{children:u?Cfe(i,s):Sfe(i,o,s),firstRender:!1}},n.handleExited=function(i,a){var o=Y$(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(s){var u=wh({},s.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,a=i.component,o=i.childFactory,s=X$(i,["component","childFactory"]),u=this.state.contextValue,l=Dfe(this.state.children).map(o);return delete s.appear,delete s.enter,delete s.exit,a===null?Cn.createElement(jb.Provider,{value:u},l):Cn.createElement(jb.Provider,{value:u},Cn.createElement(a,s,l))},e}(Cn.Component);Z$.propTypes={};Z$.defaultProps=_fe;const Tfe=Z$;var Efe=B.createContext({}),Afe={blueprintPortalClassName:function(t,e){if(t[e]!=null&&typeof t[e]!="string")return new Error($ce)}};function t2(t,e){var n,r=t.className,i=t.stopPropagationEvents,a=t.container,o=t.onChildrenMount,s=t.children;e===void 0&&(e={});var u=B.useContext(Efe),l=(n=a??u.portalContainer)!==null&&n!==void 0?n:typeof document<"u"?document.body:void 0,c=B.useState(),f=c[0],h=c[1],d=B.useCallback(function(){var p=document.createElement("div");p.classList.add(sce),Tx(p.classList,r),Tx(p.classList,u.portalClassName),rz(p,i);var v=e.blueprintPortalClassName;return v!=null&&v!==""&&(console.error(Mce),Tx(p.classList,v)),p},[r,u.portalClassName,e.blueprintPortalClassName,i]);return B.useEffect(function(){if(l!=null){var p=d();return l.appendChild(p),h(p),function(){iz(p,i),p.remove(),h(void 0)}}},[l,d,i]),B.useEffect(function(){f!=null&&(o==null||o())},[f,o]),B.useEffect(function(){if(f!=null)return Tx(f.classList,r),function(){return kfe(f.classList,r)}},[r,f]),B.useEffect(function(){if(f!=null)return rz(f,i),function(){return iz(f,i)}},[f,i]),typeof document>"u"||f==null?null:qu.createPortal(s,f)}t2.displayName="".concat(Rt,".Portal");t2.contextTypes=Afe;function kfe(t,e){e!=null&&e!==""&&t.remove.apply(t,e.split(" "))}function Tx(t,e){e!=null&&e!==""&&t.add.apply(t,e.split(" "))}function rz(t,e){e==null||e.forEach(function(n){return t.addEventListener(n,eH)})}function iz(t,e){e==null||e.forEach(function(n){return t.removeEventListener(n,eH)})}function eH(t){t.stopPropagation()}var n2=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isAutoFocusing=!1,n.state={hasEverOpened:n.props.isOpen},n.containerElement=B.createRef(),n.startFocusTrapElement=B.createRef(),n.endFocusTrapElement=B.createRef(),n.maybeRenderChild=function(r){if(Yg(r)&&(r=r()),r==null)return null;var i=n.props.enforceFocus||n.props.autoFocus?0:void 0,a=typeof r=="object"?B.cloneElement(r,{className:ut(r.props.className,V4),tabIndex:i}):B.createElement("span",{className:V4,tabIndex:i},r),o=n.props,s=o.onOpening,u=o.onOpened,l=o.onClosing,c=o.transitionDuration,f=o.transitionName;return B.createElement(WT,{classNames:f,onEntering:s,onEntered:u,onExiting:l,onExited:n.handleTransitionExited,timeout:c,addEndListener:n.handleTransitionAddEnd},a)},n.handleStartFocusTrapElementFocus=function(r){var i,a;!n.props.enforceFocus||n.isAutoFocusing||r.relatedTarget!=null&&(!((i=n.containerElement.current)===null||i===void 0)&&i.contains(r.relatedTarget))&&r.relatedTarget!==n.endFocusTrapElement.current&&((a=n.endFocusTrapElement.current)===null||a===void 0||a.focus({preventScroll:!0}))},n.handleStartFocusTrapElementKeyDown=function(r){var i;if(n.props.enforceFocus&&r.shiftKey&&r.key==="Tab"){var a=n.getKeyboardFocusableElements().pop();a!=null?a.focus():(i=n.endFocusTrapElement.current)===null||i===void 0||i.focus({preventScroll:!0})}},n.handleEndFocusTrapElementFocus=function(r){var i,a,o;if(r.relatedTarget!=null&&(!((i=n.containerElement.current)===null||i===void 0)&&i.contains(r.relatedTarget))&&r.relatedTarget!==n.startFocusTrapElement.current){var s=n.getKeyboardFocusableElements().shift();!n.isAutoFocusing&&s!=null&&s!==r.relatedTarget?s.focus():(a=n.startFocusTrapElement.current)===null||a===void 0||a.focus({preventScroll:!0})}else{var u=n.getKeyboardFocusableElements().pop();u!=null?u.focus():(o=n.startFocusTrapElement.current)===null||o===void 0||o.focus({preventScroll:!0})}},n.handleTransitionExited=function(r){var i,a;n.props.shouldReturnFocusOnClose&&n.lastActiveElementBeforeOpened instanceof HTMLElement&&n.lastActiveElementBeforeOpened.focus(),(a=(i=n.props).onClosed)===null||a===void 0||a.call(i,r)},n.handleBackdropMouseDown=function(r){var i,a=n.props,o=a.backdropProps,s=a.canOutsideClickClose,u=a.enforceFocus,l=a.onClose;s&&(l==null||l(r)),u&&n.bringFocusInsideOverlay(),(i=o==null?void 0:o.onMouseDown)===null||i===void 0||i.call(o,r)},n.handleDocumentClick=function(r){var i=n.props,a=i.canOutsideClickClose,o=i.isOpen,s=i.onClose,u=r.composed?r.composedPath()[0]:r.target,l=e.openStack.indexOf(n),c=e.openStack.slice(l).some(function(f){var h,d=f.containerElement;return((h=d.current)===null||h===void 0?void 0:h.contains(u))&&!d.current.isSameNode(u)});o&&!c&&a&&(s==null||s(r))},n.handleDocumentFocus=function(r){var i=r.composed?r.composedPath()[0]:r.target;n.props.enforceFocus&&n.containerElement.current!=null&&i instanceof Node&&!n.containerElement.current.contains(i)&&(r.preventDefault(),r.stopImmediatePropagation(),n.bringFocusInsideOverlay())},n.handleKeyDown=function(r){var i=n.props,a=i.canEscapeKeyClose,o=i.onClose;r.key==="Escape"&&a&&(o==null||o(r),r.stopPropagation(),r.preventDefault())},n.handleTransitionAddEnd=function(){},n}return e.getDerivedStateFromProps=function(n){var r=n.isOpen;return r?{hasEverOpened:r}:null},e.prototype.render=function(){var n,r;if(this.props.lazy&&!this.state.hasEverOpened)return null;var i=this.props,a=i.autoFocus,o=i.children,s=i.className,u=i.enforceFocus,l=i.usePortal,c=i.isOpen,f=c?(r=B.Children.map(o,this.maybeRenderChild))!==null&&r!==void 0?r:[]:[],h=this.maybeRenderBackdrop();h!==null&&f.unshift(h),c&&(a||u)&&f.length>0&&(f.unshift(this.renderDummyElement("__start",{className:W4,onFocus:this.handleStartFocusTrapElementFocus,onKeyDown:this.handleStartFocusTrapElementKeyDown,ref:this.startFocusTrapElement})),u&&f.push(this.renderDummyElement("__end",{className:U4,onFocus:this.handleEndFocusTrapElementFocus,ref:this.endFocusTrapElement})));var d=ut(au,(n={},n[FT]=c,n[Hle]=!l,n),s),p=B.createElement("div",{"aria-live":"polite",className:d,onKeyDown:this.handleKeyDown,ref:this.containerElement},B.createElement(Tfe,{appear:!0,component:null},f));return l?B.createElement(t2,{className:this.props.portalClassName,container:this.props.portalContainer,stopPropagationEvents:this.props.portalStopPropagationEvents},p):p},e.prototype.componentDidMount=function(){this.props.isOpen&&this.overlayWillOpen()},e.prototype.componentDidUpdate=function(n){n.isOpen&&!this.props.isOpen?this.overlayWillClose():!n.isOpen&&this.props.isOpen&&this.overlayWillOpen()},e.prototype.componentWillUnmount=function(){this.overlayWillClose()},e.prototype.bringFocusInsideOverlay=function(){var n=this;return this.requestAnimationFrame(function(){var r,i=G4(n.containerElement.current);if(!(n.containerElement.current==null||i==null||!n.props.isOpen)){var a=n.containerElement.current,o=!a.contains(i);o&&((r=n.startFocusTrapElement.current)===null||r===void 0||r.focus({preventScroll:!0}),n.isAutoFocusing=!1)}})},e.prototype.maybeRenderBackdrop=function(){var n=this.props,r=n.backdropClassName,i=n.backdropProps,a=n.hasBackdrop,o=n.isOpen,s=n.transitionDuration,u=n.transitionName;return a&&o?B.createElement(WT,{classNames:u,key:"__backdrop",timeout:s,addEndListener:this.handleTransitionAddEnd},B.createElement("div",xe({},i,{className:ut(Ule,r,i==null?void 0:i.className),onMouseDown:this.handleBackdropMouseDown}))):null},e.prototype.renderDummyElement=function(n,r){var i=this.props,a=i.transitionDuration,o=i.transitionName;return B.createElement(WT,{classNames:o,key:n,addEndListener:this.handleTransitionAddEnd,timeout:a,unmountOnExit:!0},B.createElement("div",xe({tabIndex:0},r)))},e.prototype.getKeyboardFocusableElements=function(){var n=this.containerElement.current!==null?Array.from(this.containerElement.current.querySelectorAll(['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","))):[];return n.filter(function(r){return!r.classList.contains(W4)&&!r.classList.contains(U4)})},e.prototype.overlayWillClose=function(){document.removeEventListener("focus",this.handleDocumentFocus,!0),document.removeEventListener("mousedown",this.handleDocumentClick);var n=e.openStack,r=n.indexOf(this);if(r!==-1){if(n.splice(r,1),n.length>0){var i=e.getLastOpened();i.props.autoFocus&&i.props.enforceFocus&&(i.bringFocusInsideOverlay(),document.addEventListener("focus",i.handleDocumentFocus,!0))}n.filter(function(a){return a.props.usePortal&&a.props.hasBackdrop}).length===0&&document.body.classList.remove(FT)}},e.prototype.overlayWillOpen=function(){var n=e.getLastOpened,r=e.openStack;r.length>0&&document.removeEventListener("focus",n().handleDocumentFocus,!0),r.push(this),this.props.autoFocus&&(this.isAutoFocusing=!0,this.bringFocusInsideOverlay()),this.props.enforceFocus&&document.addEventListener("focus",this.handleDocumentFocus,!0),this.props.canOutsideClickClose&&!this.props.hasBackdrop&&document.addEventListener("mousedown",this.handleDocumentClick),this.props.hasBackdrop&&this.props.usePortal&&document.body.classList.add(FT),this.lastActiveElementBeforeOpened=G4(this.containerElement.current)},e.displayName="".concat(Rt,".Overlay"),e.defaultProps={autoFocus:!0,backdropProps:{},canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,isOpen:!1,lazy:!0,shouldReturnFocusOnClose:!0,transitionDuration:300,transitionName:au,usePortal:!0},e.openStack=[],e.getLastOpened=function(){return e.openStack[e.openStack.length-1]},e}(Zr),Ife=function(t){Sr(e,t);function e(n){var r=t.call(this,n)||this,i=Bce("bp-dialog");return r.titleId="title-".concat(i),r}return e.prototype.render=function(){return B.createElement(n2,xe({},this.props,{className:jle,hasBackdrop:!0}),B.createElement("div",{className:gle,ref:this.props.containerRef},B.createElement("div",{className:ut(pu,this.props.className),role:"dialog","aria-labelledby":this.props["aria-labelledby"]||(this.props.title?this.titleId:void 0),"aria-describedby":this.props["aria-describedby"],style:this.props.style},this.maybeRenderHeader(),this.props.children)))},e.prototype.validateProps=function(n){n.title==null&&(n.icon!=null&&console.warn(O7),n.isCloseButtonShown!=null&&console.warn(F7))},e.prototype.maybeRenderCloseButton=function(){if(this.props.isCloseButtonShown!==!1)return B.createElement(Oa,{"aria-label":"Close",className:N7,icon:B.createElement(ZS,{size:Et.STANDARD}),minimal:!0,onClick:this.props.onClose})},e.prototype.maybeRenderHeader=function(){var n=this.props,r=n.icon,i=n.title;if(i!=null)return B.createElement("div",{className:mle},B.createElement(Do,{icon:r,size:Et.STANDARD,"aria-hidden":!0,tabIndex:-1}),B.createElement(K7,{id:this.titleId},i),this.maybeRenderCloseButton())},e.defaultProps={canOutsideClickClose:!0,isOpen:!1},e.displayName="".concat(Rt,".Dialog"),e}(Zr),dy=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r=this.props,i=r.className,a=r.children,o=r.large,s=r.small,u=r.ulRef,l=zn(r,["className","children","large","small","ulRef"]),c=ut(i,jS,(n={},n[yh]=o,n[u0]=s,n));return B.createElement("ul",xe({role:"menu"},l,{className:c,ref:u}),a)},e.displayName="".concat(Rt,".Menu"),e}(Zr),tH=B.createContext(),nH=B.createContext();function Nfe(t){var e=t.children,n=B.useState(null),r=n[0],i=n[1],a=B.useRef(!1);B.useEffect(function(){return function(){a.current=!0}},[]);var o=B.useCallback(function(s){a.current||i(s)},[]);return B.createElement(tH.Provider,{value:r},B.createElement(nH.Provider,{value:o},e))}var rH=function(e){return Array.isArray(e)?e[0]:e},iH=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(void 0,r)}},fI=function(e,n){if(typeof e=="function")return iH(e,n);e!=null&&(e.current=n)},az=function(e){return e.reduce(function(n,r){var i=r[0],a=r[1];return n[i]=a,n},{})},oz=typeof window<"u"&&window.document&&window.document.createElement?B.useLayoutEffect:B.useEffect,ua="top",_o="bottom",To="right",la="left",Q$="auto",py=[ua,_o,To,la],qp="start",c0="end",Rfe="clippingParents",aH="viewport",mg="popper",$fe="reference",sz=py.reduce(function(t,e){return t.concat([e+"-"+qp,e+"-"+c0])},[]),oH=[].concat(py,[Q$]).reduce(function(t,e){return t.concat([e,e+"-"+qp,e+"-"+c0])},[]),Mfe="beforeRead",Ofe="read",Ffe="afterRead",Pfe="beforeMain",Lfe="main",zfe="afterMain",Bfe="beforeWrite",Vfe="write",Wfe="afterWrite",Ufe=[Mfe,Ofe,Ffe,Pfe,Lfe,zfe,Bfe,Vfe,Wfe];function ou(t){return t?(t.nodeName||"").toLowerCase():null}function Fa(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bh(t){var e=Fa(t).Element;return t instanceof e||t instanceof Element}function wo(t){var e=Fa(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function J$(t){if(typeof ShadowRoot>"u")return!1;var e=Fa(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Gfe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},a=e.elements[n];!wo(a)||!ou(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function Hfe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=o.reduce(function(u,l){return u[l]="",u},{});!wo(i)||!ou(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}const jfe={name:"applyStyles",enabled:!0,phase:"write",fn:Gfe,effect:Hfe,requires:["computeStyles"]};function Ys(t){return t.split("-")[0]}var Jf=Math.max,qb=Math.min,Xp=Math.round;function hI(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function sH(){return!/^((?!chrome|android).)*safari/i.test(hI())}function Kp(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,a=1;e&&wo(t)&&(i=t.offsetWidth>0&&Xp(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Xp(r.height)/t.offsetHeight||1);var o=bh(t)?Fa(t):window,s=o.visualViewport,u=!sH()&&n,l=(r.left+(u&&s?s.offsetLeft:0))/i,c=(r.top+(u&&s?s.offsetTop:0))/a,f=r.width/i,h=r.height/a;return{width:f,height:h,top:c,right:l+f,bottom:c+h,left:l,x:l,y:c}}function eM(t){var e=Kp(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function uH(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&J$(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Xu(t){return Fa(t).getComputedStyle(t)}function qfe(t){return["table","td","th"].indexOf(ou(t))>=0}function Oc(t){return((bh(t)?t.ownerDocument:t.document)||window.document).documentElement}function r2(t){return ou(t)==="html"?t:t.assignedSlot||t.parentNode||(J$(t)?t.host:null)||Oc(t)}function uz(t){return!wo(t)||Xu(t).position==="fixed"?null:t.offsetParent}function Xfe(t){var e=/firefox/i.test(hI()),n=/Trident/i.test(hI());if(n&&wo(t)){var r=Xu(t);if(r.position==="fixed")return null}var i=r2(t);for(J$(i)&&(i=i.host);wo(i)&&["html","body"].indexOf(ou(i))<0;){var a=Xu(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function vy(t){for(var e=Fa(t),n=uz(t);n&&qfe(n)&&Xu(n).position==="static";)n=uz(n);return n&&(ou(n)==="html"||ou(n)==="body"&&Xu(n).position==="static")?e:n||Xfe(t)||e}function tM(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _m(t,e,n){return Jf(t,qb(e,n))}function Kfe(t,e,n){var r=_m(t,e,n);return r>n?n:r}function lH(){return{top:0,right:0,bottom:0,left:0}}function cH(t){return Object.assign({},lH(),t)}function fH(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Yfe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,cH(typeof e!="number"?e:fH(e,py))};function Zfe(t){var e,n=t.state,r=t.name,i=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Ys(n.placement),u=tM(s),l=[la,To].indexOf(s)>=0,c=l?"height":"width";if(!(!a||!o)){var f=Yfe(i.padding,n),h=eM(a),d=u==="y"?ua:la,p=u==="y"?_o:To,v=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],m=o[u]-n.rects.reference[u],g=vy(a),y=g?u==="y"?g.clientHeight||0:g.clientWidth||0:0,x=v/2-m/2,w=f[d],b=y-h[c]-f[p],C=y/2-h[c]/2+x,D=_m(w,C,b),S=u;n.modifiersData[r]=(e={},e[S]=D,e.centerOffset=D-C,e)}}function Qfe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||uH(e.elements.popper,i)&&(e.elements.arrow=i))}const Jfe={name:"arrow",enabled:!0,phase:"main",fn:Zfe,effect:Qfe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yp(t){return t.split("-")[1]}var ehe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function the(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Xp(n*i)/i||0,y:Xp(r*i)/i||0}}function lz(t){var e,n=t.popper,r=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,f=t.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,v=p===void 0?0:p,m=typeof c=="function"?c({x:d,y:v}):{x:d,y:v};d=m.x,v=m.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),x=la,w=ua,b=window;if(l){var C=vy(n),D="clientHeight",S="clientWidth";if(C===Fa(n)&&(C=Oc(n),Xu(C).position!=="static"&&s==="absolute"&&(D="scrollHeight",S="scrollWidth")),C=C,i===ua||(i===la||i===To)&&a===c0){w=_o;var _=f&&C===b&&b.visualViewport?b.visualViewport.height:C[D];v-=_-r.height,v*=u?1:-1}if(i===la||(i===ua||i===_o)&&a===c0){x=To;var T=f&&C===b&&b.visualViewport?b.visualViewport.width:C[S];d-=T-r.width,d*=u?1:-1}}var E=Object.assign({position:s},l&&ehe),A=c===!0?the({x:d,y:v},Fa(n)):{x:d,y:v};if(d=A.x,v=A.y,u){var N;return Object.assign({},E,(N={},N[w]=y?"0":"",N[x]=g?"0":"",N.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",N))}return Object.assign({},E,(e={},e[w]=y?v+"px":"",e[x]=g?d+"px":"",e.transform="",e))}function nhe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,u=s===void 0?!0:s,l={placement:Ys(e.placement),variation:Yp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lz(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lz(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const rhe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:nhe,data:{}};var Ex={passive:!0};function ihe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,u=Fa(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&l.forEach(function(c){c.addEventListener("scroll",n.update,Ex)}),s&&u.addEventListener("resize",n.update,Ex),function(){a&&l.forEach(function(c){c.removeEventListener("scroll",n.update,Ex)}),s&&u.removeEventListener("resize",n.update,Ex)}}const ahe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ihe,data:{}};var ohe={left:"right",right:"left",bottom:"top",top:"bottom"};function jw(t){return t.replace(/left|right|bottom|top/g,function(e){return ohe[e]})}var she={start:"end",end:"start"};function cz(t){return t.replace(/start|end/g,function(e){return she[e]})}function nM(t){var e=Fa(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function rM(t){return Kp(Oc(t)).left+nM(t).scrollLeft}function uhe(t,e){var n=Fa(t),r=Oc(t),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,u=0;if(i){a=i.width,o=i.height;var l=sH();(l||!l&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:s+rM(t),y:u}}function lhe(t){var e,n=Oc(t),r=nM(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Jf(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Jf(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+rM(t),u=-r.scrollTop;return Xu(i||n).direction==="rtl"&&(s+=Jf(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}function iM(t){var e=Xu(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function hH(t){return["html","body","#document"].indexOf(ou(t))>=0?t.ownerDocument.body:wo(t)&&iM(t)?t:hH(r2(t))}function Tm(t,e){var n;e===void 0&&(e=[]);var r=hH(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),a=Fa(r),o=i?[a].concat(a.visualViewport||[],iM(r)?r:[]):r,s=e.concat(o);return i?s:s.concat(Tm(r2(o)))}function dI(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function che(t,e){var n=Kp(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function fz(t,e,n){return e===aH?dI(uhe(t,n)):bh(e)?che(e,n):dI(lhe(Oc(t)))}function fhe(t){var e=Tm(r2(t)),n=["absolute","fixed"].indexOf(Xu(t).position)>=0,r=n&&wo(t)?vy(t):t;return bh(r)?e.filter(function(i){return bh(i)&&uH(i,r)&&ou(i)!=="body"}):[]}function hhe(t,e,n,r){var i=e==="clippingParents"?fhe(t):[].concat(e),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(u,l){var c=fz(t,l,r);return u.top=Jf(c.top,u.top),u.right=qb(c.right,u.right),u.bottom=qb(c.bottom,u.bottom),u.left=Jf(c.left,u.left),u},fz(t,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function dH(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ys(r):null,a=r?Yp(r):null,o=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,u;switch(i){case ua:u={x:o,y:e.y-n.height};break;case _o:u={x:o,y:e.y+e.height};break;case To:u={x:e.x+e.width,y:s};break;case la:u={x:e.x-n.width,y:s};break;default:u={x:e.x,y:e.y}}var l=i?tM(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case qp:u[l]=u[l]-(e[c]/2-n[c]/2);break;case c0:u[l]=u[l]+(e[c]/2-n[c]/2);break}}return u}function f0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,a=n.strategy,o=a===void 0?t.strategy:a,s=n.boundary,u=s===void 0?Rfe:s,l=n.rootBoundary,c=l===void 0?aH:l,f=n.elementContext,h=f===void 0?mg:f,d=n.altBoundary,p=d===void 0?!1:d,v=n.padding,m=v===void 0?0:v,g=cH(typeof m!="number"?m:fH(m,py)),y=h===mg?$fe:mg,x=t.rects.popper,w=t.elements[p?y:h],b=hhe(bh(w)?w:w.contextElement||Oc(t.elements.popper),u,c,o),C=Kp(t.elements.reference),D=dH({reference:C,element:x,strategy:"absolute",placement:i}),S=dI(Object.assign({},x,D)),_=h===mg?S:C,T={top:b.top-_.top+g.top,bottom:_.bottom-b.bottom+g.bottom,left:b.left-_.left+g.left,right:_.right-b.right+g.right},E=t.modifiersData.offset;if(h===mg&&E){var A=E[i];Object.keys(T).forEach(function(N){var R=[To,_o].indexOf(N)>=0?1:-1,M=[ua,_o].indexOf(N)>=0?"y":"x";T[N]+=A[M]*R})}return T}function dhe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?oH:u,c=Yp(r),f=c?s?sz:sz.filter(function(p){return Yp(p)===c}):py,h=f.filter(function(p){return l.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,v){return p[v]=f0(t,{placement:v,boundary:i,rootBoundary:a,padding:o})[Ys(v)],p},{});return Object.keys(d).sort(function(p,v){return d[p]-d[v]})}function phe(t){if(Ys(t)===Q$)return[];var e=jw(t);return[cz(t),e,cz(e)]}function vhe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,v=n.allowedAutoPlacements,m=e.options.placement,g=Ys(m),y=g===m,x=u||(y||!p?[jw(m)]:phe(m)),w=[m].concat(x).reduce(function(j,q){return j.concat(Ys(q)===Q$?dhe(e,{placement:q,boundary:c,rootBoundary:f,padding:l,flipVariations:p,allowedAutoPlacements:v}):q)},[]),b=e.rects.reference,C=e.rects.popper,D=new Map,S=!0,_=w[0],T=0;T<w.length;T++){var E=w[T],A=Ys(E),N=Yp(E)===qp,R=[ua,_o].indexOf(A)>=0,M=R?"width":"height",$=f0(e,{placement:E,boundary:c,rootBoundary:f,altBoundary:h,padding:l}),L=R?N?To:la:N?_o:ua;b[M]>C[M]&&(L=jw(L));var O=jw(L),F=[];if(a&&F.push($[A]<=0),s&&F.push($[L]<=0,$[O]<=0),F.every(function(j){return j})){_=E,S=!1;break}D.set(E,F)}if(S)for(var V=p?3:1,X=function(q){var Y=w.find(function(ne){var ue=D.get(ne);if(ue)return ue.slice(0,q).every(function(te){return te})});if(Y)return _=Y,"break"},P=V;P>0;P--){var U=X(P);if(U==="break")break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}const ghe={name:"flip",enabled:!0,phase:"main",fn:vhe,requiresIfExists:["offset"],data:{_skip:!1}};function hz(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function dz(t){return[ua,To,_o,la].some(function(e){return t[e]>=0})}function mhe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=f0(e,{elementContext:"reference"}),s=f0(e,{altBoundary:!0}),u=hz(o,r),l=hz(s,i,a),c=dz(u),f=dz(l);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const yhe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mhe};function xhe(t,e,n){var r=Ys(t),i=[la,ua].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[la,To].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function whe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,a=i===void 0?[0,0]:i,o=oH.reduce(function(c,f){return c[f]=xhe(f,e.rects,a),c},{}),s=o[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=o}const bhe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:whe};function Che(t){var e=t.state,n=t.name;e.modifiersData[n]=dH({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const She={name:"popperOffsets",enabled:!0,phase:"read",fn:Che,data:{}};function Dhe(t){return t==="x"?"y":"x"}function _he(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,v=p===void 0?0:p,m=f0(e,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),g=Ys(e.placement),y=Yp(e.placement),x=!y,w=tM(g),b=Dhe(w),C=e.modifiersData.popperOffsets,D=e.rects.reference,S=e.rects.popper,_=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,T=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(C){if(a){var N,R=w==="y"?ua:la,M=w==="y"?_o:To,$=w==="y"?"height":"width",L=C[w],O=L+m[R],F=L-m[M],V=d?-S[$]/2:0,X=y===qp?D[$]:S[$],P=y===qp?-S[$]:-D[$],U=e.elements.arrow,j=d&&U?eM(U):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:lH(),Y=q[R],ne=q[M],ue=_m(0,D[$],j[$]),te=x?D[$]/2-V-ue-Y-T.mainAxis:X-ue-Y-T.mainAxis,oe=x?-D[$]/2+V+ue+ne+T.mainAxis:P+ue+ne+T.mainAxis,ce=e.elements.arrow&&vy(e.elements.arrow),pe=ce?w==="y"?ce.clientTop||0:ce.clientLeft||0:0,me=(N=E==null?void 0:E[w])!=null?N:0,_e=L+te-me-pe,Ne=L+oe-me,ke=_m(d?qb(O,_e):O,L,d?Jf(F,Ne):F);C[w]=ke,A[w]=ke-L}if(s){var Ve,je=w==="x"?ua:la,ct=w==="x"?_o:To,rt=C[b],xt=b==="y"?"height":"width",it=rt+m[je],G=rt-m[ct],Z=[ua,la].indexOf(g)!==-1,re=(Ve=E==null?void 0:E[b])!=null?Ve:0,de=Z?it:rt-D[xt]-S[xt]-re+T.altAxis,ge=Z?rt+D[xt]+S[xt]-re-T.altAxis:G,ye=d&&Z?Kfe(de,rt,ge):_m(d?de:it,rt,d?ge:G);C[b]=ye,A[b]=ye-rt}e.modifiersData[r]=A}}const The={name:"preventOverflow",enabled:!0,phase:"main",fn:_he,requiresIfExists:["offset"]};function Ehe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ahe(t){return t===Fa(t)||!wo(t)?nM(t):Ehe(t)}function khe(t){var e=t.getBoundingClientRect(),n=Xp(e.width)/t.offsetWidth||1,r=Xp(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Ihe(t,e,n){n===void 0&&(n=!1);var r=wo(e),i=wo(e)&&khe(e),a=Oc(e),o=Kp(t,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((ou(e)!=="body"||iM(a))&&(s=Ahe(e)),wo(e)?(u=Kp(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=rM(a))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function Nhe(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var u=e.get(s);u&&i(u)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||i(a)}),r}function Rhe(t){var e=Nhe(t);return Ufe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function $he(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Mhe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var pz={placement:"bottom",modifiers:[],strategy:"absolute"};function vz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ohe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,a=i===void 0?pz:i;return function(s,u,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},pz,a),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},f=[],h=!1,d={state:c,setOptions:function(g){var y=typeof g=="function"?g(c.options):g;v(),c.options=Object.assign({},a,c.options,y),c.scrollParents={reference:bh(s)?Tm(s):s.contextElement?Tm(s.contextElement):[],popper:Tm(u)};var x=Rhe(Mhe([].concat(r,c.options.modifiers)));return c.orderedModifiers=x.filter(function(w){return w.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var g=c.elements,y=g.reference,x=g.popper;if(vz(y,x)){c.rects={reference:Ihe(y,vy(x),c.options.strategy==="fixed"),popper:eM(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(T){return c.modifiersData[T.name]=Object.assign({},T.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var b=c.orderedModifiers[w],C=b.fn,D=b.options,S=D===void 0?{}:D,_=b.name;typeof C=="function"&&(c=C({state:c,options:S,name:_,instance:d})||c)}}}},update:$he(function(){return new Promise(function(m){d.forceUpdate(),m(c)})}),destroy:function(){v(),h=!0}};if(!vz(s,u))return d;d.setOptions(l).then(function(m){!h&&l.onFirstUpdate&&l.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var g=m.name,y=m.options,x=y===void 0?{}:y,w=m.effect;if(typeof w=="function"){var b=w({state:c,name:g,instance:d,options:x}),C=function(){};f.push(b||C)}})}function v(){f.forEach(function(m){return m()}),f=[]}return d}}var Fhe=[ahe,She,rhe,jfe,bhe,ghe,The,Jfe,yhe],Phe=Ohe({defaultModifiers:Fhe}),Lhe=typeof Element<"u",zhe=typeof Map=="function",Bhe=typeof Set=="function",Vhe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function qw(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!qw(t[r],e[r]))return!1;return!0}var a;if(zhe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!qw(r.value[1],e.get(r.value[0])))return!1;return!0}if(Bhe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Vhe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(Lhe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!qw(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var Whe=function(e,n){try{return qw(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const i2=nl(Whe);var Uhe=[],Ghe=function(e,n,r){r===void 0&&(r={});var i=B.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||Uhe},o=B.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=o[0],u=o[1],l=B.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(d){var p=d.state,v=Object.keys(p.elements);qu.flushSync(function(){u({styles:az(v.map(function(m){return[m,p.styles[m]||{}]})),attributes:az(v.map(function(m){return[m,p.attributes[m]]}))})})},requires:["computeStyles"]}},[]),c=B.useMemo(function(){var h={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[l,{name:"applyStyles",enabled:!1}])};return i2(i.current,h)?i.current||h:(i.current=h,h)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,l]),f=B.useRef();return oz(function(){f.current&&f.current.setOptions(c)},[c]),oz(function(){if(!(e==null||n==null)){var h=r.createPopper||Phe,d=h(e,n,c);return f.current=d,function(){d.destroy(),f.current=null}}},[e,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},Hhe=function(){},jhe=function(){return Promise.resolve(null)},qhe=[];function Xhe(t){var e=t.placement,n=e===void 0?"bottom":e,r=t.strategy,i=r===void 0?"absolute":r,a=t.modifiers,o=a===void 0?qhe:a,s=t.referenceElement,u=t.onFirstUpdate,l=t.innerRef,c=t.children,f=B.useContext(tH),h=B.useState(null),d=h[0],p=h[1],v=B.useState(null),m=v[0],g=v[1];B.useEffect(function(){fI(l,d)},[l,d]);var y=B.useMemo(function(){return{placement:n,strategy:i,onFirstUpdate:u,modifiers:[].concat(o,[{name:"arrow",enabled:m!=null,options:{element:m}}])}},[n,i,u,o,m]),x=Ghe(s||f,d,y),w=x.state,b=x.styles,C=x.forceUpdate,D=x.update,S=B.useMemo(function(){return{ref:p,style:b.popper,placement:w?w.placement:n,hasPopperEscaped:w&&w.modifiersData.hide?w.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:w&&w.modifiersData.hide?w.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:b.arrow,ref:g},forceUpdate:C||Hhe,update:D||jhe}},[p,g,n,w,b,D,C]);return rH(c)(S)}var Khe=function(){},Yhe=Khe;const Zhe=nl(Yhe);function Qhe(t){var e=t.children,n=t.innerRef,r=B.useContext(nH),i=B.useCallback(function(a){fI(n,a),iH(r,a)},[n,r]);return B.useEffect(function(){return function(){return fI(n,null)}},[]),B.useEffect(function(){Zhe(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),rH(e)({ref:i})}var gz=function(t){Sr(e,t);function e(){var n,r=t.apply(this,arguments)||this;return r.targetRef=(n=r.props.targetRef)!==null&&n!==void 0?n:B.createRef(),r.prevElement=void 0,r}return e.prototype.render=function(){var n=B.Children.only(this.props.children);return this.props.targetRef!==void 0?n:B.cloneElement(n,{ref:this.targetRef})},e.prototype.componentDidMount=function(){var n=this;this.observer=globalThis.ResizeObserver!=null?new ResizeObserver(function(r){var i,a;return(a=(i=n.props).onResize)===null||a===void 0?void 0:a.call(i,r)}):void 0,this.observeElement()},e.prototype.componentDidUpdate=function(n){this.observeElement(this.props.observeParents!==n.observeParents)},e.prototype.componentWillUnmount=function(){var n;(n=this.observer)===null||n===void 0||n.disconnect(),this.prevElement=void 0},e.prototype.observeElement=function(n){if(n===void 0&&(n=!1),this.observer!==void 0){if(!(this.targetRef.current instanceof Element)){this.observer.disconnect();return}if(!(this.targetRef.current===this.prevElement&&!n)&&(this.observer.disconnect(),this.prevElement=this.targetRef.current,this.observer.observe(this.targetRef.current),this.props.observeParents))for(var r=this.targetRef.current.parentElement;r!=null;)this.observer.observe(r),r=r.parentElement}},e.displayName="".concat(Rt,".ResizeSensor"),e}(Zr);function a2(t){return t.split("-")[0]}function mz(t){return["left","right"].indexOf(t)!==-1}function Ax(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";default:return"left"}}function yz(t){var e=t.split("-")[1];switch(e){case"start":return"left";case"end":return"right";default:return"center"}}function Jhe(t,e){var n=a2(t);if(e===void 0)return mz(n)?"".concat(Ax(n)," ").concat(yz(n)):"".concat(yz(n)," ").concat(Ax(n));var r=15;return mz(n)?"".concat(Ax(n)," ").concat(parseInt(e.top,10)+r,"px"):"".concat(parseInt(e.left,10)+r,"px ").concat(Ax(n))}var ede="M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z",tde="M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z",nde=4,Xb=30,rde=22;function ide(t){if(t==null)return 0;switch(a2(t)){case"top":return-90;case"left":return 180;case"bottom":return 90;default:return 0}}function ade(t){var e=Xb/2-nde;switch(a2(t)){case"top":return{bottom:-e};case"left":return{right:-e};case"bottom":return{top:-e};default:return{left:-e}}}var pH=function(t){var e=t.arrowProps,n=e.ref,r=e.style,i=t.placement;return B.createElement("div",{"aria-hidden":!0,className:PT,"data-popper-arrow":!0,ref:n,style:xe(xe({},r),ade(i))},B.createElement("svg",{viewBox:"0 0 ".concat(Xb," ").concat(Xb),style:{transform:"rotate(".concat(ide(i),"deg)")}},B.createElement("path",{className:PT+"-border",d:ede}),B.createElement("path",{className:PT+"-fill",d:tde})))};pH.displayName="".concat(Rt,".PopoverArrow");var ode=function(){return null},aM=B.createContext([{},ode]),sde=function(t,e){switch(e.type){case"FORCE_DISABLED_STATE":return{forceDisabled:!0};case"RESET_DISABLED_STATE":return{};default:return t}},vH=function(t){var e=t.children,n=t.forceDisable,r=B.useReducer(sde,{}),i=r[0],a=r[1];return B.useEffect(function(){a(n?{type:"FORCE_DISABLED_STATE"}:{type:"RESET_DISABLED_STATE"})},[n]),B.createElement(aM.Provider,{value:[i,a]},typeof e=="function"?e(i):e)},eh=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.popoverRef=B.createRef(),n.renderPopover=function(r){var i,a,o=n.props,s=o.children,u=o.compact,l=o.disabled,c=o.intent,f=o.popoverClassName,h=zn(o,["children","compact","disabled","intent","popoverClassName"]),d=ut(pce,Ma(c),f,(i={},i[W$]=u,i));return B.createElement(Xh,xe({modifiers:{arrow:{enabled:!n.props.minimal},offset:{options:{offset:[0,rde/2]}}}},h,{autoFocus:!1,canEscapeKeyClose:!1,disabled:(a=r.forceDisabled)!==null&&a!==void 0?a:l,enforceFocus:!1,lazy:!0,popoverClassName:d,portalContainer:n.props.portalContainer,ref:n.popoverRef}),s)},n}return e.prototype.render=function(){var n=this;return B.createElement(aM.Consumer,null,function(r){var i=r[0];return B.createElement(vH,xe({},i),n.renderPopover)})},e.prototype.reposition=function(){var n;(n=this.popoverRef.current)===null||n===void 0||n.reposition()},e.displayName="".concat(Rt,".Tooltip"),e.defaultProps={compact:!1,hoverCloseDelay:0,hoverOpenDelay:100,interactionKind:"hover-target",minimal:!1,transitionDuration:100},e}(Zr),ude={enabled:!0,name:"matchReferenceWidth",phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;e.styles.popper.width="".concat(e.rects.reference.width,"px")},effect:function(t){var e=t.state,n=e.elements.reference.getBoundingClientRect().width;e.elements.popper.style.width="".concat(n,"px")}},Xa=xe(xe({},pn),{AUTO:"auto",AUTO_END:"auto-end",AUTO_START:"auto-start"});function lde(t){switch(t){case Xa.TOP_LEFT:return"top-start";case Xa.TOP:return"top";case Xa.TOP_RIGHT:return"top-end";case Xa.RIGHT_TOP:return"right-start";case Xa.RIGHT:return"right";case Xa.RIGHT_BOTTOM:return"right-end";case Xa.BOTTOM_RIGHT:return"bottom-end";case Xa.BOTTOM:return"bottom";case Xa.BOTTOM_LEFT:return"bottom-start";case Xa.LEFT_BOTTOM:return"left-end";case Xa.LEFT:return"left";case Xa.LEFT_TOP:return"left-start";case"auto":case"auto-start":case"auto-end":return t;default:return cde(t)}}function cde(t){throw new Error("Unexpected position: "+t)}var bu={CLICK:"click",CLICK_TARGET_ONLY:"click-target",HOVER:"hover",HOVER_TARGET_ONLY:"hover-target"},Xh=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasDarkParent:!1,isClosingViaEscapeKeypress:!1,isOpen:n.getIsOpen(n.props)},n.popoverElement=null,n.popoverRef=jce(n,"popoverElement",n.props.popoverRef),n.targetRef=B.createRef(),n.isMouseInTargetOrPopover=!1,n.lostFocusOnSamePage=!0,n.isControlled=function(){return n.props.isOpen!==void 0},n.isArrowEnabled=function(){var r,i;return!n.props.minimal&&((i=(r=n.props.modifiers)===null||r===void 0?void 0:r.arrow)===null||i===void 0?void 0:i.enabled)!==!1},n.isHoverInteractionKind=function(){return n.props.interactionKind===bu.HOVER||n.props.interactionKind===bu.HOVER_TARGET_ONLY},n.reposition=function(){var r;return(r=n.popperScheduleUpdate)===null||r===void 0?void 0:r.call(n)},n.renderTarget=function(r){var i,a,o,s,u=r.ref,l=n.props,c=l.children,f=l.className,h=l.fill,d=l.openOnTargetFocus,p=l.renderTarget,v=n.state.isOpen,m=n.isControlled(),g=n.isHoverInteractionKind(),y=n.props.targetTagName;h&&(y="div");var x=fy(u,n.targetRef),w=g?{onBlur:n.handleTargetBlur,onContextMenu:n.handleTargetContextMenu,onFocus:n.handleTargetFocus,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave}:{onClick:n.handleTargetClick,onKeyDown:n.handleKeyDown},b=d&&g?0:void 0,C=xe({className:ut(f,tce,(i={},i[Qle]=v,i[Wb]=v&&!m&&!g,i)),ref:x},w),D={"aria-expanded":v,"aria-haspopup":(o=n.props.popupKind)!==null&&o!==void 0?o:n.props.interactionKind===bu.HOVER_TARGET_ONLY?void 0:!0},S=(a={},a[Wb]=v&&!m&&!g,a[qh]=h,a),_;if(p!==void 0)_=p(xe(xe(xe({},C),D),{className:ut(C.className,S),isOpen:v,tabIndex:b}));else{var T=L7(B.Children.toArray(c)[0]);if(T===void 0)return null;var E=B.cloneElement(T,xe(xe({},D),{className:ut(T.props.className,S),disabled:v&&Wce(T,eh)?!0:T.props.disabled,tabIndex:(s=T.props.tabIndex)!==null&&s!==void 0?s:b})),A=B.createElement(y,xe(xe({},C),n.props.targetProps),E);_=A}return B.createElement(gz,{targetRef:n.targetRef,onResize:n.reposition},_)},n.renderPopover=function(r){var i,a=n.props,o=a.autoFocus,s=a.enforceFocus,u=a.backdropProps,l=a.canEscapeKeyClose,c=a.hasBackdrop,f=a.interactionKind,h=a.usePortal,d=n.state,p=d.isClosingViaEscapeKeypress,v=d.isOpen,m=Jhe(r.placement,n.isArrowEnabled()?r.arrowProps.style:void 0);n.popperScheduleUpdate=r.update;var g={onClick:n.handlePopoverClick,onKeyDown:function(C){return Hb(C)&&n.handlePopoverClick(C)}};(f===bu.HOVER||!h&&f===bu.HOVER_TARGET_ONLY)&&(g.onMouseEnter=n.handleMouseEnter,g.onMouseLeave=n.handleMouseLeave);var y=a2(r.placement),x=ut(Ur,(i={},i[jp]=n.props.inheritDarkTheme&&n.state.hasDarkParent,i[U$]=n.props.minimal,i[LT]=n.props.captureDismiss,i[Zle]=n.props.matchTargetWidth,i[ece]=r.isReferenceHidden===!0,i[Jle]=r.hasPopperEscaped===!0,i),"".concat(Kle,"-").concat(y),n.props.popoverClassName),w=n.isHoverInteractionKind()?!1:void 0,b=n.isHoverInteractionKind()?!1:p?!0:n.props.shouldReturnFocusOnClose;return B.createElement(n2,{autoFocus:o??w,backdropClassName:qle,backdropProps:u,canEscapeKeyClose:l,canOutsideClickClose:f===bu.CLICK,enforceFocus:s,hasBackdrop:c,isOpen:v,lazy:n.props.lazy,onClose:n.handleOverlayClose,onClosed:n.props.onClosed,onClosing:n.props.onClosing,onOpened:n.props.onOpened,onOpening:n.props.onOpening,transitionDuration:n.props.transitionDuration,transitionName:Ur,usePortal:h,portalClassName:n.props.portalClassName,portalContainer:n.props.portalContainer,portalStopPropagationEvents:n.props.portalStopPropagationEvents,shouldReturnFocusOnClose:b},B.createElement("div",{className:nce,ref:r.ref,style:r.style},B.createElement(gz,{onResize:n.reposition},B.createElement("div",xe({className:x,style:{transformOrigin:m},ref:n.popoverRef},g),n.isArrowEnabled()&&B.createElement(pH,{arrowProps:r.arrowProps,placement:r.placement}),B.createElement("div",{className:Xle},n.props.content)))))},n.handleTargetFocus=function(r){if(n.props.openOnTargetFocus&&n.isHoverInteractionKind()){if(r.relatedTarget==null&&!n.lostFocusOnSamePage)return;n.handleMouseEnter(r)}},n.handleTargetBlur=function(r){n.props.openOnTargetFocus&&n.isHoverInteractionKind()&&(r.relatedTarget!=null?r.relatedTarget!==n.popoverElement&&!n.isElementInPopover(r.relatedTarget)&&n.handleMouseLeave(r):n.handleMouseLeave(r)),n.lostFocusOnSamePage=r.relatedTarget!=null},n.handleTargetContextMenu=function(r){r.defaultPrevented&&n.setOpenState(!1,r)},n.handleMouseEnter=function(r){n.isMouseInTargetOrPopover=!0,!n.props.usePortal&&n.isElementInPopover(r.target)&&n.props.interactionKind===bu.HOVER_TARGET_ONLY&&!n.props.openOnTargetFocus?n.handleMouseLeave(r):n.props.disabled||n.setOpenState(!0,r,n.props.hoverOpenDelay)},n.handleMouseLeave=function(r){n.isMouseInTargetOrPopover=!1,n.setTimeout(function(){n.isMouseInTargetOrPopover||n.setOpenState(!1,r,n.props.hoverCloseDelay)})},n.handlePopoverClick=function(r){var i,a,o,s=r.target,u=s.closest(".".concat(Ur)),l=s.closest(".".concat(Ur)),c=(u??l)===n.getPopoverElement(),f=(a=(i=u==null?void 0:u.classList.contains(LT))!==null&&i!==void 0?i:l==null?void 0:l.classList.contains(LT))!==null&&a!==void 0?a:!1,h=s.closest(".".concat(Gb,", .").concat(Yle)),d=(o=h==null?void 0:h.classList.contains(Gb))!==null&&o!==void 0?o:!1,p=s.closest(":disabled, .".concat(sy))!=null;d&&!p&&(!f||c)&&n.setOpenState(!1,r)},n.handleOverlayClose=function(r){var i;if(!(n.targetRef.current==null||r===void 0)){var a=(i=r.nativeEvent)!==null&&i!==void 0?i:r,o=a.composed?a.composedPath()[0]:a.target;(!wce(n.targetRef.current,o)||r.nativeEvent instanceof KeyboardEvent)&&n.setOpenState(!1,r)}},n.handleKeyDown=function(r){var i=Hb(r);i&&n.handleTargetClick(r)},n.handleTargetClick=function(r){var i=n.state.isOpen&&n.isSimulatedButtonClick(r);i||!n.props.disabled&&!n.isElementInPopover(r.target)&&(n.props.isOpen==null?n.setState(function(a){return{isOpen:!a.isOpen}}):n.setOpenState(!n.props.isOpen,r))},n.isSimulatedButtonClick=function(r){return!r.isTrusted&&r.target.matches(".".concat(uy))},n}return e.prototype.getPopoverElement=function(){var n;return(n=this.popoverElement)===null||n===void 0?void 0:n.querySelector(".".concat(Ur))},e.prototype.getIsOpen=function(n){var r;return n.disabled?!1:(r=n.isOpen)!==null&&r!==void 0?r:n.defaultIsOpen},e.prototype.render=function(){var n=this.props,r=n.disabled,i=n.content,a=n.placement,o=n.position,s=o===void 0?"auto":o,u=n.positioningStrategy,l=this.state.isOpen,c=i==null||typeof i=="string"&&i.trim()==="";return c?(!r&&l!==!1&&!l0("production")&&console.warn(Ace),this.renderTarget({ref:hde})):B.createElement(Nfe,null,B.createElement(Qhe,null,this.renderTarget),B.createElement(Xhe,{innerRef:this.popoverRef,placement:a??lde(s),strategy:u,modifiers:this.getPopperModifiers()},this.renderPopover))},e.prototype.componentDidMount=function(){this.updateDarkParent()},e.prototype.componentDidUpdate=function(n,r){t.prototype.componentDidUpdate.call(this,n,r),this.updateDarkParent();var i=this.getIsOpen(this.props);this.props.isOpen!=null&&i!==this.state.isOpen?(this.setOpenState(i),this.setState({isOpen:i})):this.props.disabled&&this.state.isOpen&&this.props.isOpen==null&&this.setOpenState(!1)},e.prototype.validateProps=function(n){n.isOpen==null&&n.onInteraction!=null&&console.warn(Nce),n.hasBackdrop&&!n.usePortal&&console.warn(kce),n.hasBackdrop&&n.interactionKind!==bu.CLICK&&console.warn(_ce),n.placement!==void 0&&n.position!==void 0&&console.warn(Ice);var r=B.Children.count(n.children),i=n.renderTarget!==void 0,a=n.targetProps!==void 0;r===0&&!i&&console.warn(Dce),r>1&&console.warn(Tce),r>0&&i&&console.warn(Ece),i&&a&&console.warn(Rce)},e.prototype.getPopperModifiers=function(){var n,r,i,a,o=this.props,s=o.matchTargetWidth,u=o.modifiers,l=o.modifiersCustom,c=[xe({enabled:this.isArrowEnabled(),name:"arrow"},u==null?void 0:u.arrow),xe(xe({name:"computeStyles"},u==null?void 0:u.computeStyles),{options:xe({adaptive:!0,gpuAcceleration:!1},(n=u==null?void 0:u.computeStyles)===null||n===void 0?void 0:n.options)}),xe(xe({enabled:this.isArrowEnabled(),name:"offset"},u==null?void 0:u.offset),{options:xe({offset:[0,Xb/2]},(r=u==null?void 0:u.offset)===null||r===void 0?void 0:r.options)}),xe(xe({name:"flip"},u==null?void 0:u.flip),{options:xe({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(i=u==null?void 0:u.flip)===null||i===void 0?void 0:i.options)}),xe(xe({name:"preventOverflow"},u==null?void 0:u.preventOverflow),{options:xe({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(a=u==null?void 0:u.preventOverflow)===null||a===void 0?void 0:a.options)})];return s&&c.push(ude),l!==void 0&&c.push.apply(c,l),c},e.prototype.setOpenState=function(n,r,i){var a=this,o,s,u,l,c;(o=this.cancelOpenTimeout)===null||o===void 0||o.call(this),i!==void 0&&i>0?(r==null||r.persist(),this.cancelOpenTimeout=this.setTimeout(function(){a.setOpenState(n,r)},i)):(this.props.isOpen==null?this.setState({isOpen:n}):(u=(s=this.props).onInteraction)===null||u===void 0||u.call(s,n,r),n||((c=(l=this.props).onClose)===null||c===void 0||c.call(l,r),this.setState({isClosingViaEscapeKeypress:fde(r==null?void 0:r.nativeEvent)})))},e.prototype.updateDarkParent=function(){var n;if(this.props.usePortal&&this.state.isOpen){var r=((n=this.targetRef.current)===null||n===void 0?void 0:n.closest(".".concat(jp)))!=null;this.setState({hasDarkParent:r})}},e.prototype.isElementInPopover=function(n){var r,i;return(i=(r=this.getPopoverElement())===null||r===void 0?void 0:r.contains(n))!==null&&i!==void 0?i:!1},e.displayName="".concat(Rt,".Popover"),e.defaultProps={boundary:"clippingParents",captureDismiss:!1,defaultIsOpen:!1,disabled:!1,fill:!1,hasBackdrop:!1,hoverCloseDelay:300,hoverOpenDelay:150,inheritDarkTheme:!0,interactionKind:bu.CLICK,matchTargetWidth:!1,minimal:!1,openOnTargetFocus:!0,positioningStrategy:"absolute",renderTarget:void 0,shouldReturnFocusOnClose:!1,targetTagName:"span",transitionDuration:300,usePortal:!0},e}(Zr);function fde(t){return t instanceof KeyboardEvent&&t.key==="Escape"}function hde(){}var Ze=B.forwardRef(function(t,e){var n,r,i=t.active,a=t.className,o=t.children,s=t.disabled,u=t.icon,l=t.intent,c=t.labelClassName,f=t.labelElement,h=t.multiline,d=t.popoverProps,p=t.roleStructure,v=p===void 0?"menuitem":p,m=t.selected,g=t.shouldDismissPopover,y=t.submenuProps,x=t.text,w=t.textClassName,b=t.tagName,C=b===void 0?"a":b,D=t.htmlTitle,S=zn(t,["active","className","children","disabled","icon","intent","labelClassName","labelElement","multiline","popoverProps","roleStructure","selected","shouldDismissPopover","submenuProps","text","textClassName","tagName","htmlTitle"]),_=v==="listoption"?["option",void 0,!!m]:v==="menuitem"?["none","menuitem",void 0]:v==="none"?["none",void 0,void 0]:[void 0,void 0,void 0],T=_[0],E=_[1],A=_[2],N=v==="listoption",R=N&&m,M=u!=null,$=o!=null,L=Ma(l),O=ut(ly,L,(n={},n[Wb]=i,n[sy]=s,n[Gb]=g&&!s&&!$,n[Rle]=N,n[E7]=R,n),a),F=t.label==null&&f==null?null:B.createElement("span",{className:ut(Ole,c)},t.label,f),V=B.createElement(C,xe(xe(xe({onKeyDown:bce(["Enter"," "]),role:$?"none":E,tabIndex:$?-1:0},xh(S)),s?pde:{}),{className:O}),R?B.createElement(q$,{className:$le}):void 0,M?B.createElement("span",{className:Mle},B.createElement(Do,{icon:u,"aria-hidden":!0,tabIndex:-1})):void 0,B.createElement(JS,{className:ut(qh,w),ellipsize:!h,title:D},x),F,$?B.createElement(H$,{className:Fle,title:"Open sub menu"}):void 0),X=ut((r={},r[aI]=$,r));return B.createElement("li",{className:X,ref:e,role:T,"aria-selected":A},o==null?V:B.createElement(Xh,xe({autoFocus:!1,captureDismiss:!1,disabled:s,enforceFocus:!1,hoverCloseDelay:0,interactionKind:"hover",modifiers:dde,targetProps:{role:E,tabIndex:0},placement:"right-start",usePortal:!1},d,{content:B.createElement(dy,xe({},y),o),minimal:!0,popoverClassName:ut(aI,d==null?void 0:d.popoverClassName)}),V))});Ze.defaultProps={active:!1,disabled:!1,multiline:!1,popoverProps:{},selected:void 0,shouldDismissPopover:!0,text:""};Ze.displayName="".concat(Rt,".MenuItem");var dde={flip:{options:{rootBoundary:"viewport",padding:20},enabled:!0},offset:{options:{offset:[-5,0]},enabled:!0},preventOverflow:{options:{rootBoundary:"viewport",padding:20},enabled:!0}},pde={"aria-disabled":!0,href:void 0,onClick:void 0,onMouseDown:void 0,onMouseEnter:void 0,onMouseLeave:void 0,tabIndex:-1},oM=B.forwardRef(function(t,e){var n,r=t.alignText,i=t.className,a=t.fill,o=t.minimal,s=t.large,u=t.vertical,l=zn(t,["alignText","className","fill","minimal","large","vertical"]),c=ut(sle,(n={},n[qh]=a,n[yh]=s,n[U$]=o,n[A7]=u,n),YS(r),i);return B.createElement("div",xe({},l,{ref:e,className:c}),t.children)});oM.displayName="".concat(Rt,".ButtonGroup");var Mv=B.forwardRef(function(t,e){var n,r=t.className,i=t.elevation,a=t.interactive,o=t.selected,s=t.compact,u=zn(t,["className","elevation","interactive","selected","compact"]),l=ut(r,cle,yce(i),(n={},n[Que]=a,n[W$]=s,n[E7]=o,n));return B.createElement("div",xe({className:l,ref:e},u))});Mv.defaultProps={elevation:_7.ZERO,interactive:!1};Mv.displayName="".concat(Rt,".Card");var sM=B.forwardRef(function(t,e){var n,r=t.bordered,i=t.className,a=t.children,o=t.compact,s=zn(t,["bordered","className","children","compact"]),u=ut(i,I7,(n={},n[fle]=r,n[W$]=o,n));return B.createElement(Mv,xe({role:"list",elevation:_7.ZERO,className:u},s,{ref:e}),a)});sM.defaultProps={bordered:!0,compact:!1};sM.displayName="".concat(Rt,".CardList");var gH=B.memo(function(e){var n,r=e.content,i=e.popoverClassName,a=e.onClose,o=e.isDarkTheme,s=o===void 0?!1:o,u=e.rootBoundary,l=u===void 0?"viewport":u,c=e.targetOffset,f=e.transitionDuration,h=f===void 0?100:f,d=zn(e,["content","popoverClassName","onClose","isDarkTheme","rootBoundary","targetOffset","transitionDuration"]),p=B.useCallback(function(g){return g.preventDefault()},[]),v=B.useCallback(function(g){var y=g.ref;return B.createElement(t2,null,B.createElement("div",{className:hle,style:c,ref:y}))},[c]),m=B.useCallback(function(g){g||a==null||a()},[a]);return B.createElement(Xh,xe({placement:"right-start",rootBoundary:l,transitionDuration:h},d,{content:B.createElement("div",{onContextMenu:p},r),enforceFocus:!1,key:vde(c),hasBackdrop:!0,backdropProps:{className:ple},minimal:!0,onInteraction:m,popoverClassName:ut(dle,i,(n={},n[jp]=s,n)),positioningStrategy:"fixed",renderTarget:v}))});gH.displayName="".concat(Rt,".ContextMenuPopover");function vde(t){return t===void 0?"default":"".concat(t.left,"x").concat(t.top)}var mH=B.forwardRef(function(t,e){var n=t.className,r=t.children,i=t.content,a=t.disabled,o=a===void 0?!1:a,s=t.onClose,u=t.onContextMenu,l=t.popoverProps,c=t.tagName,f=c===void 0?"div":c,h=zn(t,["className","children","content","disabled","onClose","onContextMenu","popoverProps","tagName"]),d=B.useContext(aM),p=d[1],v=B.useState(void 0),m=v[0],g=v[1],y=B.useState(),x=y[0],w=y[1],b=B.useState(!1),C=b[0],D=b[1],S=B.useRef(null);B.useEffect(function(){D(!1),p({type:"RESET_DISABLED_STATE"})},[o,p]);var _=B.useCallback(function(){D(!1),w(void 0),p({type:"RESET_DISABLED_STATE"}),s==null||s()},[s,p]),T=B.useMemo(function(){return Uce(S.current)},[S,C]),E=B.useMemo(function(){return{isOpen:C,mouseEvent:x,targetOffset:m}},[C,x,m]),A=B.useCallback(function(O){return o?void 0:Yg(i)?i(O):i},[o,i]),N=B.useMemo(function(){return A(E)},[E,A]),R=N===void 0?void 0:B.createElement(gH,xe({},l,{content:N,isDarkTheme:T,isOpen:C,targetOffset:m,onClose:_})),M=B.useCallback(function(O){if(!O.defaultPrevented){var F=!o&&(Yg(r)||Yg(i)||i!==void 0);if(F){D(!0),O.persist(),w(O);var V={left:O.clientX,top:O.clientY};g(V),p({type:"FORCE_DISABLED_STATE"});var X=A({isOpen:!0,mouseEvent:O,targetOffset:V});X===void 0||O.preventDefault()}u==null||u(O)}},[o,r,i,u,p,A]),$=ut(n,GS),L=Yg(r)?r({className:$,contentProps:E,onContextMenu:M,popover:R,ref:S}):B.createElement(B.Fragment,null,R,B.createElement(f,xe({className:$,onContextMenu:M,ref:fy(S,e)},h),r));return B.createElement(vH,{forceDisable:C},L)});mH.displayName="".concat(Rt,".ContextMenu");var gde=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n;return B.createElement("div",{className:ut(yle,this.props.className,(n={},n[xle]=this.props.useOverflowScrollContainer,n))},this.props.children)},e.defaultProps={useOverflowScrollContainer:!0},e}(Zr),mde=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n;return B.createElement("div",{className:ut(wle,this.props.className,(n={},n[ble]=!this.props.minimal,n))},this.renderMainSection(),this.maybeRenderActionsSection())},e.prototype.renderMainSection=function(){return B.createElement("div",{className:Cle},this.props.children)},e.prototype.maybeRenderActionsSection=function(){var n=this.props.actions;if(n!=null)return B.createElement("div",{className:Sle},n)},e.defaultProps={minimal:!1},e}(Zr),xz;(function(t){t.SMALL="360px",t.STANDARD="50%",t.LARGE="90%"})(xz||(xz={}));var yde=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r,i,a,o=this.props,s=o.hasBackdrop,u=o.size,l=o.style,c=o.position,f=this.props,h=f.className,d=f.children,p=zn(f,["className","children"]),v=L4(c),m=ut(G$,(n={},n[(a=cy(v))!==null&&a!==void 0?a:""]=!0,n),h),g=u==null?l:xe(xe({},l),(r={},r[Kue(v)?"height":"width"]=u,r));return B.createElement(n2,xe({},p,{className:ut((i={},i[Gle]=s,i))}),B.createElement("div",{className:m,style:g},this.maybeRenderHeader(),d))},e.prototype.validateProps=function(n){n.title==null&&(n.icon!=null&&console.warn(O7),n.isCloseButtonShown!=null&&console.warn(F7)),n.position!=null&&n.position!==L4(n.position)&&console.warn(zce)},e.prototype.maybeRenderCloseButton=function(){return this.props.isCloseButtonShown!==!1?B.createElement(Oa,{"aria-label":"Close",className:N7,icon:B.createElement(ZS,{size:Et.LARGE}),minimal:!0,onClick:this.props.onClose}):null},e.prototype.maybeRenderHeader=function(){var n=this.props,r=n.icon,i=n.title;return i==null?null:B.createElement("div",{className:_le},B.createElement(Do,{icon:r,size:Et.LARGE}),B.createElement(X7,null,i),this.maybeRenderCloseButton())},e.displayName="".concat(Rt,".Drawer"),e.defaultProps={canOutsideClickClose:!0,isOpen:!1,position:"right",style:{}},e}(Zr),o2=B.forwardRef(function(t,e){var n,r=t.children,i=t.className,a=t.fill,o=t.vertical,s=zn(t,["children","className","fill","vertical"]),u=ut(vle,(n={},n[qh]=a,n[A7]=o,n),i);return B.createElement("div",xe({role:"group"},s,{ref:e,className:u}),r)});o2.displayName="".concat(Rt,".ControlGroup");var s2=B.forwardRef(function(t,e){var n,r=t.alignIndicator,i=t.children,a=t.className,o=t.indicatorChildren,s=t.inline,u=t.inputRef,l=t.label,c=t.labelElement,f=t.large,h=t.style,d=t.type,p=t.typeClassName,v=t.tagName,m=v===void 0?"label":v,g=zn(t,["alignIndicator","children","className","indicatorChildren","inline","inputRef","label","labelElement","large","style","type","typeClassName","tagName"]),y=ut(R7,p,(n={},n[sy]=g.disabled,n[T7]=s,n[yh]=f,n),YS(r),a);return B.createElement(m,{className:y,style:h,ref:e},B.createElement("input",xe({},g,{ref:u,type:d})),B.createElement("span",{className:$7},o),l,c,i)});s2.displayName="".concat(Rt,".Control");var yH=B.forwardRef(function(t,e){var n=t.innerLabelChecked,r=t.innerLabel,i=zn(t,["innerLabelChecked","innerLabel"]),a=r||n?[B.createElement("div",{key:"checked",className:z4},B.createElement("div",{className:B4},n||r)),B.createElement("div",{key:"unchecked",className:z4},B.createElement("div",{className:B4},r))]:null;return B.createElement(s2,xe({},i,{indicatorChildren:a,ref:e,type:"checkbox",typeClassName:M7}))});yH.displayName="".concat(Rt,".Switch");var xde=B.forwardRef(function(t,e){return B.createElement(s2,xe({},t,{ref:e,type:"radio",typeClassName:Ile}))});xde.displayName="".concat(Rt,".Radio");var wde=B.forwardRef(function(t,e){var n=t.defaultIndeterminate,r=t.indeterminate,i=t.onChange,a=zn(t,["defaultIndeterminate","indeterminate","onChange"]),o=B.useState(r||n||!1),s=o[0],u=o[1],l=B.useRef(null),c=t.inputRef===void 0?l:fy(t.inputRef,l),f=B.useCallback(function(h){r===void 0&&u(h.target.indeterminate),i==null||i(h)},[r,i]);return B.useEffect(function(){r!==void 0&&u(r)},[r]),B.useEffect(function(){l.current!=null&&(l.current.indeterminate=s)},[l,s]),B.createElement(s2,xe({},a,{inputRef:c,onChange:f,ref:e,type:"checkbox",typeClassName:kle}))});wde.displayName="".concat(Rt,".Checkbox");var bde=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasPendingUpdate:!1,isComposing:!1,nextValue:n.props.value,value:n.props.value},n.cancelPendingCompositionEnd=null,n.handleCompositionStart=function(r){var i,a,o;(i=n.cancelPendingCompositionEnd)===null||i===void 0||i.call(n),n.setState({isComposing:!0}),(o=(a=n.props).onCompositionStart)===null||o===void 0||o.call(a,r)},n.handleCompositionEnd=function(r){var i,a;n.cancelPendingCompositionEnd=n.setTimeout(function(){return n.setState({isComposing:!1})},e.COMPOSITION_END_DELAY),(a=(i=n.props).onCompositionEnd)===null||a===void 0||a.call(i,r)},n.handleChange=function(r){var i,a,o=r.target.value;n.setState({nextValue:o}),(a=(i=n.props).onChange)===null||a===void 0||a.call(i,r)},n}return e.getDerivedStateFromProps=function(n,r){if(r.isComposing||n.value===void 0)return null;var i=r.nextValue!==r.value;return i?n.value===r.nextValue?r.hasPendingUpdate?{value:n.value,hasPendingUpdate:!1}:{value:r.nextValue}:n.value===r.value?{hasPendingUpdate:!0}:{value:n.value,nextValue:n.value,hasPendingUpdate:!1}:{value:n.value,nextValue:n.value,hasPendingUpdate:!1}},e.prototype.render=function(){var n=this.state,r=n.isComposing,i=n.hasPendingUpdate,a=n.value,o=n.nextValue,s=this.props,u=s.inputRef,l=zn(s,["inputRef"]);return B.createElement("input",xe({},l,{ref:u,value:r||i?o:a,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,onChange:this.handleChange}))},e.displayName="".concat(Rt,".AsyncControllableInput"),e.COMPOSITION_END_DELAY=10,e}(Zr),Cde=["onValueChange"],Zp=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={},n.leftElement=null,n.rightElement=null,n.refHandlers={leftElement:function(r){return n.leftElement=r},rightElement:function(r){return n.rightElement=r}},n.handleInputChange=function(r){var i,a,o,s,u=r.target.value;(a=(i=n.props).onChange)===null||a===void 0||a.call(i,r),(s=(o=n.props).onValueChange)===null||s===void 0||s.call(o,u,r.target)},n}return e.prototype.render=function(){var n,r=this.props,i=r.asyncControl,a=i===void 0?!1:i,o=r.className,s=r.disabled,u=r.fill,l=r.inputClassName,c=r.inputRef,f=r.intent,h=r.large,d=r.readOnly,p=r.round,v=r.small,m=r.tagName,g=m===void 0?"div":m,y=ut(Tle,Ma(f),(n={},n[sy]=s,n[tle]=d,n[qh]=u,n[yh]=h,n[u0]=v,n[nle]=p,n),o),x=xe(xe({},this.props.style),{paddingLeft:this.state.leftElementWidth,paddingRight:this.state.rightElementWidth}),w=xe(xe({type:"text"},xh(this.props,Cde,!0)),{"aria-disabled":s,className:ut(HS,l),onChange:this.handleInputChange,style:x}),b=a?B.createElement(bde,xe({},w,{inputRef:c})):B.createElement("input",xe({},w,{ref:c}));return B.createElement(g,{className:y},this.maybeRenderLeftElement(),b,this.maybeRenderRightElement())},e.prototype.componentDidMount=function(){this.updateInputWidth()},e.prototype.componentDidUpdate=function(n){var r=this.props,i=r.leftElement,a=r.rightElement;(n.leftElement!==i||n.rightElement!==a)&&this.updateInputWidth()},e.prototype.validateProps=function(n){n.leftElement!=null&&n.leftIcon!=null&&console.warn(Sce)},e.prototype.maybeRenderLeftElement=function(){var n=this.props,r=n.leftElement,i=n.leftIcon;if(r!=null)return B.createElement("span",{className:Ele,ref:this.refHandlers.leftElement},r);if(i!=null)return B.createElement(Do,{icon:i,"aria-hidden":!0,tabIndex:-1})},e.prototype.maybeRenderRightElement=function(){var n=this.props.rightElement;if(n!=null)return B.createElement("span",{className:Ale,ref:this.refHandlers.rightElement},n)},e.prototype.updateInputWidth=function(){var n=this.state,r=n.leftElementWidth,i=n.rightElementWidth;if(this.leftElement!=null){var a=this.leftElement.clientWidth;(r===void 0||Math.abs(a-r)>2)&&this.setState({leftElementWidth:a})}else this.setState({leftElementWidth:void 0});if(this.rightElement!=null){var a=this.rightElement.clientWidth;(i===void 0||Math.abs(a-i)>2)&&this.setState({rightElementWidth:a})}else this.setState({rightElementWidth:void 0})},e.displayName="".concat(Rt,".InputGroup"),e}(Zr),kl=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.className,i=n.title,a=n.titleId;return i==null?B.createElement("li",{className:ut(Ple,r),role:"separator"}):B.createElement("li",{className:ut(Lle,r),role:"separator"},B.createElement(K7,{id:a},i))},e.displayName="".concat(Rt,".MenuDivider"),e}(B.Component),wz=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.align,i=n.children,a=n.className,o=zn(n,["align","children","className"]),s=ut(Ble,YS(r),a);return B.createElement("div",xe({className:s},o),i)},e.displayName="".concat(Rt,".NavbarGroup"),e.defaultProps={align:iI.LEFT},e}(Zr),pI;(function(t){t[t.STANDARD=48]="STANDARD",t[t.SMALL=32]="SMALL",t[t.EXTRA_SMALL=20]="EXTRA_SMALL"})(pI||(pI={}));var Sde=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.action,i=n.children,a=n.className,o=n.layout;return B.createElement("div",{className:ut(Ub,"".concat(Ub,"-").concat(o),a)},this.maybeRenderVisual(),this.maybeRenderText(),r,i)},e.prototype.maybeRenderVisual=function(){var n,r=this.props,i=r.icon,a=r.iconMuted,o=r.iconSize;if(i!=null)return B.createElement("div",{className:Vle,style:{fontSize:"".concat(o,"px"),lineHeight:"".concat(o,"px")}},B.createElement(Do,{className:ut((n={},n[mce]=a,n)),icon:i,size:o,"aria-hidden":!0,tabIndex:-1}))},e.prototype.maybeRenderText=function(){var n=this.props,r=n.description,i=n.title;if(!(i==null&&r==null))return B.createElement("div",{className:Wle},i&&B.createElement(X7,null,i),r&&L7(r,"div"))},e.displayName="".concat(Rt,".NonIdealState"),e.defaultProps={iconMuted:!0,iconSize:pI.STANDARD,layout:"vertical"},e}(Zr),Dde=function(t){Sr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r=this.props,i=r.animate,a=i===void 0?!0:i,o=r.className,s=r.intent,u=r.stripes,l=u===void 0?!0:u,c=r.value,f=ut(rce,Ma(s),(n={},n[oce]=!a,n[ace]=!l,n),o),h=c==null?void 0:100*P7(c,0,1),d=h==null?void 0:h+"%";return B.createElement("div",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":h==null?void 0:Math.round(h),className:f,role:"progressbar"},B.createElement("div",{className:ice,style:{width:d}}))},e.displayName="".concat(Rt,".ProgressBar"),e}(Zr),uM=B.forwardRef(function(t,e){var n,r=t.className,i=t.defaultValue,a=t.fill,o=t.inline,s=t.intent,u=t.large,l=t.onValueChange,c=t.options,f=t.small,h=t.value,d=zn(t,["className","defaultValue","fill","inline","intent","large","onValueChange","options","small","value"]),p=B.useState(i),v=p[0],m=p[1],g=h??v,y=B.useCallback(function(w,b){m(w),l==null||l(w,b)},[l]),x=ut(hce,r,(n={},n[qh]=a,n[T7]=o,n));return B.createElement("div",xe({className:x,ref:e},xh(d)),c.map(function(w){return B.createElement(xH,xe({},w,{intent:s,isSelected:g===w.value,key:w.value,large:u,onClick:y,small:f}))}))});uM.defaultProps={defaultValue:void 0,intent:jr.NONE};uM.displayName="".concat(Rt,".SegmentedControl");function xH(t){var e=t.isSelected,n=t.label,r=t.onClick,i=t.value,a=zn(t,["isSelected","label","onClick","value"]),o=B.useCallback(function(s){return r==null?void 0:r(i,s.currentTarget)},[r,i]);return B.createElement(Oa,xe({onClick:o,minimal:!e,text:n},a))}xH.displayName="".concat(Rt,".SegmentedControlOption");var wH=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handleActionClick=function(r){var i,a;(a=(i=n.props.action)===null||i===void 0?void 0:i.onClick)===null||a===void 0||a.call(i,r),n.triggerDismiss(!1)},n.handleCloseClick=function(){return n.triggerDismiss(!1)},n.startTimeout=function(){n.clearTimeouts(),n.props.timeout>0&&n.setTimeout(function(){return n.triggerDismiss(!0)},n.props.timeout)},n}return e.prototype.render=function(){var n=this.props,r=n.className,i=n.icon,a=n.intent,o=n.message,s=n.isCloseButtonShown;return B.createElement("div",{className:ut(XS,Ma(a),r),onBlur:this.startTimeout,onFocus:this.clearTimeouts,onMouseEnter:this.clearTimeouts,onMouseLeave:this.startTimeout,tabIndex:0},B.createElement(Do,{icon:i}),B.createElement("span",{className:dce,role:"alert"},o),B.createElement(oM,{minimal:!0},this.maybeRenderActionButton(),s&&B.createElement(Oa,{"aria-label":"Close",icon:B.createElement(j$,null),onClick:this.handleCloseClick})))},e.prototype.componentDidMount=function(){this.startTimeout()},e.prototype.componentDidUpdate=function(n){n.timeout!==this.props.timeout&&(this.props.timeout>0?this.startTimeout():this.clearTimeouts())},e.prototype.componentWillUnmount=function(){this.clearTimeouts()},e.prototype.maybeRenderActionButton=function(){var n=this.props.action;if(n!=null)return B.createElement(H7,xe({},n,{intent:void 0,onClick:this.handleActionClick}))},e.prototype.triggerDismiss=function(n){var r,i;this.clearTimeouts(),(i=(r=this.props).onDismiss)===null||i===void 0||i.call(r,n)},e.defaultProps={className:"",isCloseButtonShown:!0,message:"",timeout:5e3},e.displayName="".concat(Rt,".Toast"),e}(Zr),_de=function(t){Sr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={toasts:[]},n.toastId=0,n.renderToast=function(r){return B.createElement(wH,xe({},r,{onDismiss:n.getDismissHandler(r)}))},n.getDismissHandler=function(r){return function(i){n.dismiss(r.key,i)}},n.handleClose=function(r){r.key==="Escape"&&n.clear()},n}return e.create=function(n,r){r===void 0&&(r=document.body),n!=null&&n.usePortal!=null&&!l0("production")&&console.warn(H4);var i=document.createElement("div");r.appendChild(i);var a=qu.render(B.createElement(e,xe({},n,{usePortal:!1})),i);if(a==null)throw new Error(Fce);return a},e.createAsync=function(n,r){var i,a;n!=null&&n.usePortal!=null&&!l0("production")&&console.warn(H4);var o=(i=r==null?void 0:r.container)!==null&&i!==void 0?i:document.body,s=(a=r==null?void 0:r.domRenderer)!==null&&a!==void 0?a:qu.render,u=document.createElement("div");return o.appendChild(u),new Promise(function(l,c){try{s(B.createElement(e,xe({},n,{ref:f,usePortal:!1})),u)}catch(h){c(h)}function f(h){if(h==null){c(new Error(Pce));return}l(h)}})},e.prototype.show=function(n,r){this.props.maxToasts&&this.dismissIfAtLimit();var i=this.createToastOptions(n,r);return r===void 0||this.isNewToastKey(r)?this.setState(function(a){return{toasts:Qf([i],a.toasts,!0)}}):this.setState(function(a){return{toasts:a.toasts.map(function(o){return o.key===r?i:o})}}),i.key},e.prototype.dismiss=function(n,r){r===void 0&&(r=!1),this.setState(function(i){var a=i.toasts;return{toasts:a.filter(function(o){var s,u=o.key===n;return u&&((s=o.onDismiss)===null||s===void 0||s.call(o,r)),!u})}})},e.prototype.clear=function(){this.state.toasts.forEach(function(n){var r;return(r=n.onDismiss)===null||r===void 0?void 0:r.call(n,!1)}),this.setState({toasts:[]})},e.prototype.getToasts=function(){return this.state.toasts},e.prototype.render=function(){var n=ut(zT,this.getPositionClasses(),this.props.className);return B.createElement(n2,{autoFocus:this.props.autoFocus,canEscapeKeyClose:this.props.canEscapeKeyClear,canOutsideClickClose:!1,className:n,enforceFocus:!1,hasBackdrop:!1,isOpen:this.state.toasts.length>0||this.props.children!=null,onClose:this.handleClose,shouldReturnFocusOnClose:!1,transitionDuration:350,transitionName:XS,usePortal:this.props.usePortal},this.state.toasts.map(this.renderToast,this),this.props.children)},e.prototype.validateProps=function(n){var r=n.maxToasts;if(r!==void 0&&r<1)throw new Error(Lce)},e.prototype.isNewToastKey=function(n){return this.state.toasts.every(function(r){return r.key!==n})},e.prototype.dismissIfAtLimit=function(){this.state.toasts.length===this.props.maxToasts&&this.dismiss(this.state.toasts[this.state.toasts.length-1].key)},e.prototype.createToastOptions=function(n,r){return r===void 0&&(r="toast-".concat(this.toastId++)),xe(xe({},n),{key:r})},e.prototype.getPositionClasses=function(){var n=this.props.position.split("-");return Qf(Qf([],n.map(function(r){return"".concat(zT,"-").concat(r.toLowerCase())}),!0),["".concat(zT,"-").concat(this.props.usePortal?"in-portal":"inline")],!1)},e.displayName="".concat(Rt,".OverlayToaster"),e.defaultProps={autoFocus:!1,canEscapeKeyClear:!0,position:pn.TOP,usePortal:!0},e}(Zr),bH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bz=Cn.createContext&&Cn.createContext(bH),ic=globalThis&&globalThis.__assign||function(){return ic=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ic.apply(this,arguments)},Tde=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function CH(t){return t&&t.map(function(e,n){return Cn.createElement(e.tag,ic({key:n},e.attr),CH(e.child))})}function Dr(t){return function(e){return Cn.createElement(Ede,ic({attr:ic({},t.attr)},e),CH(t.child))}}function Ede(t){var e=function(n){var r=t.attr,i=t.size,a=t.title,o=Tde(t,["attr","size","title"]),s=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Cn.createElement("svg",ic({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:ic(ic({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Cn.createElement("title",null,a),t.children)};return bz!==void 0?Cn.createElement(bz.Consumer,null,function(n){return e(n)}):e(bH)}function Cz(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3"}},{tag:"path",attr:{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241"}},{tag:"path",attr:{d:"M20 12v-6"}},{tag:"path",attr:{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005"}},{tag:"path",attr:{d:"M16 19h6"}},{tag:"path",attr:{d:"M19 16l3 3l-3 3"}}]})(t)}function Ade(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M19 11v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}},{tag:"path",attr:{d:"M13 13l9 3l-4 2l-2 4l-3 -9"}},{tag:"path",attr:{d:"M3 3l0 .01"}},{tag:"path",attr:{d:"M7 3l0 .01"}},{tag:"path",attr:{d:"M11 3l0 .01"}},{tag:"path",attr:{d:"M15 3l0 .01"}},{tag:"path",attr:{d:"M3 7l0 .01"}},{tag:"path",attr:{d:"M3 11l0 .01"}},{tag:"path",attr:{d:"M3 15l0 .01"}}]})(t)}function kde(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"}},{tag:"path",attr:{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3"}}]})(t)}function Ide(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M19 5h-7l-4 14l-3 -6h-2"}},{tag:"path",attr:{d:"M14 13l6 6"}},{tag:"path",attr:{d:"M14 19l6 -6"}}]})(t)}function Nde(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}},{tag:"path",attr:{d:"M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}}]})(t)}function Rde(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 10v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-3"}}]})(t)}function $de(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}},{tag:"path",attr:{d:"M4 16v2a2 2 0 0 0 2 2h2"}},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v2"}},{tag:"path",attr:{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}},{tag:"path",attr:{d:"M12 16v-7"}},{tag:"path",attr:{d:"M9 9h6"}}]})(t)}function Mde(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M3 6a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}},{tag:"path",attr:{d:"M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"}},{tag:"path",attr:{d:"M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"}},{tag:"path",attr:{d:"M15 18a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}}]})(t)}var SH={exports:{}},DH={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=B;function Ode(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fde=typeof Object.is=="function"?Object.is:Ode,Pde=Qp.useState,Lde=Qp.useEffect,zde=Qp.useLayoutEffect,Bde=Qp.useDebugValue;function Vde(t,e){var n=e(),r=Pde({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return zde(function(){i.value=n,i.getSnapshot=e,UT(i)&&a({inst:i})},[t,n,e]),Lde(function(){return UT(i)&&a({inst:i}),t(function(){UT(i)&&a({inst:i})})},[t]),Bde(n),n}function UT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fde(t,n)}catch{return!0}}function Wde(t,e){return e()}var Ude=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wde:Vde;DH.useSyncExternalStore=Qp.useSyncExternalStore!==void 0?Qp.useSyncExternalStore:Ude;SH.exports=DH;var Gde=SH.exports,_H={exports:{}},TH={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2=B,Hde=Gde;function jde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qde=typeof Object.is=="function"?Object.is:jde,Xde=Hde.useSyncExternalStore,Kde=u2.useRef,Yde=u2.useEffect,Zde=u2.useMemo,Qde=u2.useDebugValue;TH.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=Kde(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Zde(function(){function u(d){if(!l){if(l=!0,c=d,d=r(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,qde(c,d))return p;var v=r(d);return i!==void 0&&i(p,v)?p:(c=d,f=v)}var l=!1,c,f,h=n===void 0?null:n;return[function(){return u(e())},h===null?void 0:function(){return u(h())}]},[e,n,r,i]);var s=Xde(t,a[0],a[1]);return Yde(function(){o.hasValue=!0,o.value=s},[s]),Qde(s),s};_H.exports=TH;var Jde=_H.exports;function epe(t){t()}let EH=epe;const tpe=t=>EH=t,npe=()=>EH,Sz=Symbol.for(`react-redux-context-${B.version}`),Dz=globalThis;function rpe(){let t=Dz[Sz];return t||(t=B.createContext(null),Dz[Sz]=t),t}const gc=new Proxy({},new Proxy({},{get(t,e){const n=rpe();return(r,...i)=>Reflect[e](n,...i)}}));function lM(t=gc){return function(){return B.useContext(t)}}const AH=lM(),ipe=()=>{throw new Error("uSES not initialized!")};let kH=ipe;const ape=t=>{kH=t},ope=(t,e)=>t===e;function spe(t=gc){const e=t===gc?AH:lM(t);return function(r,i={}){const{equalityFn:a=ope,stabilityCheck:o=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:h}=e();B.useRef(!0);const d=B.useCallback({[r.name](v){return r(v)}}[r.name],[r,f,o]),p=kH(l.addNestedSub,u.getState,c||u.getState,d,a);return B.useDebugValue(p),p}}const mi=spe();var IH={exports:{}},Zt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr=typeof Symbol=="function"&&Symbol.for,cM=Mr?Symbol.for("react.element"):60103,fM=Mr?Symbol.for("react.portal"):60106,l2=Mr?Symbol.for("react.fragment"):60107,c2=Mr?Symbol.for("react.strict_mode"):60108,f2=Mr?Symbol.for("react.profiler"):60114,h2=Mr?Symbol.for("react.provider"):60109,d2=Mr?Symbol.for("react.context"):60110,hM=Mr?Symbol.for("react.async_mode"):60111,p2=Mr?Symbol.for("react.concurrent_mode"):60111,v2=Mr?Symbol.for("react.forward_ref"):60112,g2=Mr?Symbol.for("react.suspense"):60113,upe=Mr?Symbol.for("react.suspense_list"):60120,m2=Mr?Symbol.for("react.memo"):60115,y2=Mr?Symbol.for("react.lazy"):60116,lpe=Mr?Symbol.for("react.block"):60121,cpe=Mr?Symbol.for("react.fundamental"):60117,fpe=Mr?Symbol.for("react.responder"):60118,hpe=Mr?Symbol.for("react.scope"):60119;function Ua(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case cM:switch(t=t.type,t){case hM:case p2:case l2:case f2:case c2:case g2:return t;default:switch(t=t&&t.$$typeof,t){case d2:case v2:case y2:case m2:case h2:return t;default:return e}}case fM:return e}}}function NH(t){return Ua(t)===p2}Zt.AsyncMode=hM;Zt.ConcurrentMode=p2;Zt.ContextConsumer=d2;Zt.ContextProvider=h2;Zt.Element=cM;Zt.ForwardRef=v2;Zt.Fragment=l2;Zt.Lazy=y2;Zt.Memo=m2;Zt.Portal=fM;Zt.Profiler=f2;Zt.StrictMode=c2;Zt.Suspense=g2;Zt.isAsyncMode=function(t){return NH(t)||Ua(t)===hM};Zt.isConcurrentMode=NH;Zt.isContextConsumer=function(t){return Ua(t)===d2};Zt.isContextProvider=function(t){return Ua(t)===h2};Zt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===cM};Zt.isForwardRef=function(t){return Ua(t)===v2};Zt.isFragment=function(t){return Ua(t)===l2};Zt.isLazy=function(t){return Ua(t)===y2};Zt.isMemo=function(t){return Ua(t)===m2};Zt.isPortal=function(t){return Ua(t)===fM};Zt.isProfiler=function(t){return Ua(t)===f2};Zt.isStrictMode=function(t){return Ua(t)===c2};Zt.isSuspense=function(t){return Ua(t)===g2};Zt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===l2||t===p2||t===f2||t===c2||t===g2||t===upe||typeof t=="object"&&t!==null&&(t.$$typeof===y2||t.$$typeof===m2||t.$$typeof===h2||t.$$typeof===d2||t.$$typeof===v2||t.$$typeof===cpe||t.$$typeof===fpe||t.$$typeof===hpe||t.$$typeof===lpe)};Zt.typeOf=Ua;IH.exports=Zt;var dpe=IH.exports,RH=dpe,ppe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vpe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$H={};$H[RH.ForwardRef]=ppe;$H[RH.Memo]=vpe;var tn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM=Symbol.for("react.element"),pM=Symbol.for("react.portal"),x2=Symbol.for("react.fragment"),w2=Symbol.for("react.strict_mode"),b2=Symbol.for("react.profiler"),C2=Symbol.for("react.provider"),S2=Symbol.for("react.context"),gpe=Symbol.for("react.server_context"),D2=Symbol.for("react.forward_ref"),_2=Symbol.for("react.suspense"),T2=Symbol.for("react.suspense_list"),E2=Symbol.for("react.memo"),A2=Symbol.for("react.lazy"),mpe=Symbol.for("react.offscreen"),MH;MH=Symbol.for("react.module.reference");function Mo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dM:switch(t=t.type,t){case x2:case b2:case w2:case _2:case T2:return t;default:switch(t=t&&t.$$typeof,t){case gpe:case S2:case D2:case A2:case E2:case C2:return t;default:return e}}case pM:return e}}}tn.ContextConsumer=S2;tn.ContextProvider=C2;tn.Element=dM;tn.ForwardRef=D2;tn.Fragment=x2;tn.Lazy=A2;tn.Memo=E2;tn.Portal=pM;tn.Profiler=b2;tn.StrictMode=w2;tn.Suspense=_2;tn.SuspenseList=T2;tn.isAsyncMode=function(){return!1};tn.isConcurrentMode=function(){return!1};tn.isContextConsumer=function(t){return Mo(t)===S2};tn.isContextProvider=function(t){return Mo(t)===C2};tn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dM};tn.isForwardRef=function(t){return Mo(t)===D2};tn.isFragment=function(t){return Mo(t)===x2};tn.isLazy=function(t){return Mo(t)===A2};tn.isMemo=function(t){return Mo(t)===E2};tn.isPortal=function(t){return Mo(t)===pM};tn.isProfiler=function(t){return Mo(t)===b2};tn.isStrictMode=function(t){return Mo(t)===w2};tn.isSuspense=function(t){return Mo(t)===_2};tn.isSuspenseList=function(t){return Mo(t)===T2};tn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===x2||t===b2||t===w2||t===_2||t===T2||t===mpe||typeof t=="object"&&t!==null&&(t.$$typeof===A2||t.$$typeof===E2||t.$$typeof===C2||t.$$typeof===S2||t.$$typeof===D2||t.$$typeof===MH||t.getModuleId!==void 0)};tn.typeOf=Mo;function ype(){const t=npe();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,a=n={callback:r,next:null,prev:n};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const _z={notify(){},get:()=>[]};function xpe(t,e){let n,r=_z;function i(f){return u(),r.subscribe(f)}function a(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function s(){return!!n}function u(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=ype())}function l(){n&&(n(),n=void 0,r.clear(),r=_z)}const c={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:s,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const wpe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bpe=wpe?B.useLayoutEffect:B.useEffect;function Cpe({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:a="once"}){const o=B.useMemo(()=>{const l=xpe(t);return{store:t,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:a}},[t,r,i,a]),s=B.useMemo(()=>t.getState(),[t]);bpe(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,s]);const u=e||gc;return Cn.createElement(u.Provider,{value:o},n)}function OH(t=gc){const e=t===gc?AH:lM(t);return function(){const{store:r}=e();return r}}const FH=OH();function Spe(t=gc){const e=t===gc?FH:OH(t);return function(){return e().dispatch}}const Ga=Spe();ape(Jde.useSyncExternalStoreWithSelector);tpe(qu.unstable_batchedUpdates);function rs(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function mc(t){return!!t&&!!t[yn]}function Ku(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Rpe}(t)||Array.isArray(t)||!!t[Rz]||!!(!((e=t.constructor)===null||e===void 0)&&e[Rz])||vM(t)||gM(t))}function Ch(t,e,n){n===void 0&&(n=!1),Ov(t)===0?(n?Object.keys:Tp)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Ov(t){var e=t[yn];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:vM(t)?2:gM(t)?3:0}function _p(t,e){return Ov(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Dpe(t,e){return Ov(t)===2?t.get(e):t[e]}function PH(t,e,n){var r=Ov(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function LH(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function vM(t){return Ipe&&t instanceof Map}function gM(t){return Npe&&t instanceof Set}function Ef(t){return t.o||t.t}function mM(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=BH(t);delete e[yn];for(var n=Tp(e),r=0;r<n.length;r++){var i=n[r],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function yM(t,e){return e===void 0&&(e=!1),xM(t)||mc(t)||!Ku(t)||(Ov(t)>1&&(t.set=t.add=t.clear=t.delete=_pe),Object.freeze(t),e&&Ch(t,function(n,r){return yM(r,!0)},!0)),t}function _pe(){rs(2)}function xM(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Zs(t){var e=yI[t];return e||rs(18,t),e}function Tpe(t,e){yI[t]||(yI[t]=e)}function vI(){return h0}function GT(t,e){e&&(Zs("Patches"),t.u=[],t.s=[],t.v=e)}function Kb(t){gI(t),t.p.forEach(Epe),t.p=null}function gI(t){t===h0&&(h0=t.l)}function Tz(t){return h0={p:[],l:h0,h:t,m:!0,_:0}}function Epe(t){var e=t[yn];e.i===0||e.i===1?e.j():e.g=!0}function HT(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Zs("ES5").S(e,t,r),r?(n[yn].P&&(Kb(e),rs(4)),Ku(t)&&(t=Yb(e,t),e.l||Zb(e,t)),e.u&&Zs("Patches").M(n[yn].t,t,e.u,e.s)):t=Yb(e,n,[]),Kb(e),e.u&&e.v(e.u,e.s),t!==zH?t:void 0}function Yb(t,e,n){if(xM(e))return e;var r=e[yn];if(!r)return Ch(e,function(s,u){return Ez(t,r,e,s,u,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Zb(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=mM(r.k):r.o,a=i,o=!1;r.i===3&&(a=new Set(i),i.clear(),o=!0),Ch(a,function(s,u){return Ez(t,r,i,s,u,n,o)}),Zb(t,i,!1),n&&t.u&&Zs("Patches").N(r,n,t.u,t.s)}return r.o}function Ez(t,e,n,r,i,a,o){if(mc(i)){var s=Yb(t,i,a&&e&&e.i!==3&&!_p(e.R,r)?a.concat(r):void 0);if(PH(n,r,s),!mc(s))return;t.m=!1}else o&&n.add(i);if(Ku(i)&&!xM(i)){if(!t.h.D&&t._<1)return;Yb(t,i),e&&e.A.l||Zb(t,i)}}function Zb(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&yM(e,n)}function jT(t,e){var n=t[yn];return(n?Ef(n):t)[e]}function Az(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ol(t){t.P||(t.P=!0,t.l&&Ol(t.l))}function qT(t){t.o||(t.o=mM(t.t))}function mI(t,e,n){var r=vM(e)?Zs("MapSet").F(e,n):gM(e)?Zs("MapSet").T(e,n):t.O?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:vI(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},u=s,l=d0;o&&(u=[s],l=Jg);var c=Proxy.revocable(u,l),f=c.revoke,h=c.proxy;return s.k=h,s.j=f,h}(e,n):Zs("ES5").J(e,n);return(n?n.A:vI()).p.push(r),r}function Ape(t){return mc(t)||rs(22,t),function e(n){if(!Ku(n))return n;var r,i=n[yn],a=Ov(n);if(i){if(!i.P&&(i.i<4||!Zs("ES5").K(i)))return i.t;i.I=!0,r=kz(n,a),i.I=!1}else r=kz(n,a);return Ch(r,function(o,s){i&&Dpe(i.t,o)===s||PH(r,o,e(s))}),a===3?new Set(r):r}(t)}function kz(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return mM(t)}function kpe(){function t(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var u=this[yn];return d0.get(u,a)},set:function(u){var l=this[yn];d0.set(l,a,u)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][yn];if(!s.P)switch(s.i){case 5:r(s)&&Ol(s);break;case 4:n(s)&&Ol(s)}}}function n(a){for(var o=a.t,s=a.k,u=Tp(s),l=u.length-1;l>=0;l--){var c=u[l];if(c!==yn){var f=o[c];if(f===void 0&&!_p(o,c))return!0;var h=s[c],d=h&&h[yn];if(d?d.t!==f:!LH(h,f))return!0}}var p=!!o[yn];return u.length!==Tp(o).length+(p?0:1)}function r(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Tpe("ES5",{J:function(a,o){var s=Array.isArray(a),u=function(c,f){if(c){for(var h=Array(f.length),d=0;d<f.length;d++)Object.defineProperty(h,""+d,t(d,!0));return h}var p=BH(f);delete p[yn];for(var v=Tp(p),m=0;m<v.length;m++){var g=v[m];p[g]=t(g,c||!!p[g].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(s,a),l={i:s?5:4,A:o?o.A:vI(),P:!1,I:!1,R:{},l:o,t:a,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,yn,{value:l,writable:!0}),u},S:function(a,o,s){s?mc(o)&&o[yn].A===a&&e(a.p):(a.u&&function u(l){if(l&&typeof l=="object"){var c=l[yn];if(c){var f=c.t,h=c.k,d=c.R,p=c.i;if(p===4)Ch(h,function(x){x!==yn&&(f[x]!==void 0||_p(f,x)?d[x]||u(h[x]):(d[x]=!0,Ol(c)))}),Ch(f,function(x){h[x]!==void 0||_p(h,x)||(d[x]=!1,Ol(c))});else if(p===5){if(r(c)&&(Ol(c),d.length=!0),h.length<f.length)for(var v=h.length;v<f.length;v++)d[v]=!1;else for(var m=f.length;m<h.length;m++)d[m]=!0;for(var g=Math.min(h.length,f.length),y=0;y<g;y++)h.hasOwnProperty(y)||(d[y]=!0),d[y]===void 0&&u(h[y])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?n(a):r(a)}})}var Iz,h0,wM=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ipe=typeof Map<"u",Npe=typeof Set<"u",Nz=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zH=wM?Symbol.for("immer-nothing"):((Iz={})["immer-nothing"]=!0,Iz),Rz=wM?Symbol.for("immer-draftable"):"__$immer_draftable",yn=wM?Symbol.for("immer-state"):"__$immer_state",Rpe=""+Object.prototype.constructor,Tp=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,BH=Object.getOwnPropertyDescriptors||function(t){var e={};return Tp(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},yI={},d0={get:function(t,e){if(e===yn)return t;var n=Ef(t);if(!_p(n,e))return function(i,a,o){var s,u=Az(a,o);return u?"value"in u?u.value:(s=u.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Ku(r)?r:r===jT(t.t,e)?(qT(t),t.o[e]=mI(t.A.h,r,t)):r},has:function(t,e){return e in Ef(t)},ownKeys:function(t){return Reflect.ownKeys(Ef(t))},set:function(t,e,n){var r=Az(Ef(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=jT(Ef(t),e),a=i==null?void 0:i[yn];if(a&&a.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(LH(n,i)&&(n!==void 0||_p(t.t,e)))return!0;qT(t),Ol(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return jT(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,qT(t),Ol(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ef(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){rs(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){rs(12)}},Jg={};Ch(d0,function(t,e){Jg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Jg.deleteProperty=function(t,e){return Jg.set.call(this,t,e,void 0)},Jg.set=function(t,e,n){return d0.set.call(this,t[0],e,n,t[0])};var $pe=function(){function t(n){var r=this;this.O=Nz,this.D=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var u=r;return function(v){var m=this;v===void 0&&(v=s);for(var g=arguments.length,y=Array(g>1?g-1:0),x=1;x<g;x++)y[x-1]=arguments[x];return u.produce(v,function(w){var b;return(b=a).call.apply(b,[m,w].concat(y))})}}var l;if(typeof a!="function"&&rs(6),o!==void 0&&typeof o!="function"&&rs(7),Ku(i)){var c=Tz(r),f=mI(r,i,void 0),h=!0;try{l=a(f),h=!1}finally{h?Kb(c):gI(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(v){return GT(c,o),HT(v,c)},function(v){throw Kb(c),v}):(GT(c,o),HT(l,c))}if(!i||typeof i!="object"){if((l=a(i))===void 0&&(l=i),l===zH&&(l=void 0),r.D&&yM(l,!0),o){var d=[],p=[];Zs("Patches").M(i,l,d,p),o(d,p)}return l}rs(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(l,function(d){return i.apply(void 0,[d].concat(f))})};var o,s,u=r.produce(i,a,function(l,c){o=l,s=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,s]}):[u,o,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Ku(n)||rs(8),mc(n)&&(n=Ape(n));var r=Tz(this),i=mI(this,n,void 0);return i[yn].C=!0,gI(r),i},e.finishDraft=function(n,r){var i=n&&n[yn],a=i.A;return GT(a,r),HT(void 0,a)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!Nz&&rs(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}i>-1&&(r=r.slice(i+1));var o=Zs("Patches").$;return mc(n)?o(n,r):this.produce(n,function(s){return o(s,r)})},t}(),Pa=new $pe,VH=Pa.produce;Pa.produceWithPatches.bind(Pa);Pa.setAutoFreeze.bind(Pa);Pa.setUseProxies.bind(Pa);Pa.applyPatches.bind(Pa);Pa.createDraft.bind(Pa);Pa.finishDraft.bind(Pa);function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function Mpe(t,e){if(p0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(p0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ope(t){var e=Mpe(t,"string");return p0(e)==="symbol"?e:String(e)}function Fpe(t,e,n){return e=Ope(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(n),!0).forEach(function(r){Fpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function si(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Oz=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),XT=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qb={INIT:"@@redux/INIT"+XT(),REPLACE:"@@redux/REPLACE"+XT(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+XT()}};function Ppe(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function WH(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(si(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(si(1));return n(WH)(t,e)}if(typeof t!="function")throw new Error(si(2));var i=t,a=e,o=[],s=o,u=!1;function l(){s===o&&(s=o.slice())}function c(){if(u)throw new Error(si(3));return a}function f(v){if(typeof v!="function")throw new Error(si(4));if(u)throw new Error(si(5));var m=!0;return l(),s.push(v),function(){if(m){if(u)throw new Error(si(6));m=!1,l();var y=s.indexOf(v);s.splice(y,1),o=null}}}function h(v){if(!Ppe(v))throw new Error(si(7));if(typeof v.type>"u")throw new Error(si(8));if(u)throw new Error(si(9));try{u=!0,a=i(a,v)}finally{u=!1}for(var m=o=s,g=0;g<m.length;g++){var y=m[g];y()}return v}function d(v){if(typeof v!="function")throw new Error(si(10));i=v,h({type:Qb.REPLACE})}function p(){var v,m=f;return v={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(si(11));function x(){y.next&&y.next(c())}x();var w=m(x);return{unsubscribe:w}}},v[Oz]=function(){return this},v}return h({type:Qb.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:d},r[Oz]=p,r}function Lpe(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Qb.INIT});if(typeof r>"u")throw new Error(si(12));if(typeof n(void 0,{type:Qb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(si(13))})}function zpe(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var a=Object.keys(n),o;try{Lpe(n)}catch(s){o=s}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},h=0;h<a.length;h++){var d=a[h],p=n[d],v=u[d],m=p(v,l);if(typeof m>"u")throw l&&l.type,new Error(si(14));f[d]=m,c=c||m!==v}return c=c||a.length!==Object.keys(u).length,c?f:u}}function Jb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Bpe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(si(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(u){return u(o)});return a=Jb.apply(void 0,s)(i.dispatch),Mz(Mz({},i),{},{dispatch:a})}}}function UH(t){var e=function(r){var i=r.dispatch,a=r.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,t):o(s)}}};return e}var GH=UH();GH.withExtraArgument=UH;const Fz=GH;var HH=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vpe=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Jp=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Wpe=Object.defineProperty,Upe=Object.defineProperties,Gpe=Object.getOwnPropertyDescriptors,Pz=Object.getOwnPropertySymbols,Hpe=Object.prototype.hasOwnProperty,jpe=Object.prototype.propertyIsEnumerable,Lz=function(t,e,n){return e in t?Wpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ac=function(t,e){for(var n in e||(e={}))Hpe.call(e,n)&&Lz(t,n,e[n]);if(Pz)for(var r=0,i=Pz(e);r<i.length;r++){var n=i[r];jpe.call(e,n)&&Lz(t,n,e[n])}return t},KT=function(t,e){return Upe(t,Gpe(e))},qpe=function(t,e,n){return new Promise(function(r,i){var a=function(u){try{s(n.next(u))}catch(l){i(l)}},o=function(u){try{s(n.throw(u))}catch(l){i(l)}},s=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(a,o)};s((n=n.apply(t,e)).next())})},Xpe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jb:Jb.apply(null,arguments)};function Kpe(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var Ype=function(t){HH(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Jp([void 0],n[0].concat(this)))):new(e.bind.apply(e,Jp([void 0],n.concat(this))))},e}(Array),Zpe=function(t){HH(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Jp([void 0],n[0].concat(this)))):new(e.bind.apply(e,Jp([void 0],n.concat(this))))},e}(Array);function xI(t){return Ku(t)?VH(t,function(){}):t}function Qpe(t){return typeof t=="boolean"}function Jpe(){return function(e){return eve(e)}}function eve(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new Ype;return n&&(Qpe(n)?r.push(Fz):r.push(Fz.withExtraArgument(n.extraArgument))),r}var tve=!0;function nve(t){var e=Jpe(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,a=n.middleware,o=a===void 0?e():a,s=n.devTools,u=s===void 0?!0:s,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(Kpe(i))d=zpe(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var v=Bpe.apply(void 0,p),m=Jb;u&&(m=Xpe(ac({trace:!tve},typeof u=="object"&&u)));var g=new Zpe(v),y=g;Array.isArray(h)?y=Jp([v],h):typeof h=="function"&&(y=h(g));var x=m.apply(void 0,y);return WH(d,c,x)}function oc(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var a=e.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return ac(ac({type:t,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function jH(t){var e={},n=[],r,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(s in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return r=a,i}};return t(i),[e,n,r]}function rve(t){return typeof t=="function"}function ive(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?jH(e):[e,n,r],a=i[0],o=i[1],s=i[2],u;if(rve(t))u=function(){return xI(t())};else{var l=xI(t);u=function(){return l}}function c(f,h){f===void 0&&(f=u());var d=Jp([a[h.type]],o.filter(function(p){var v=p.matcher;return v(h)}).map(function(p){var v=p.reducer;return v}));return d.filter(function(p){return!!p}).length===0&&(d=[s]),d.reduce(function(p,v){if(v)if(mc(p)){var m=p,g=v(m,h);return g===void 0?p:g}else{if(Ku(p))return VH(p,function(y){return v(y,h)});var g=v(p,h);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return p},f)}return c.getInitialState=u,c}function ave(t,e){return t+"/"+e}function bM(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:xI(t.initialState),r=t.reducers||{},i=Object.keys(r),a={},o={},s={};i.forEach(function(c){var f=r[c],h=ave(e,c),d,p;"reducer"in f?(d=f.reducer,p=f.prepare):d=f,a[c]=d,o[h]=d,s[c]=p?oc(h,p):oc(h)});function u(){var c=typeof t.extraReducers=="function"?jH(t.extraReducers):[t.extraReducers],f=c[0],h=f===void 0?{}:f,d=c[1],p=d===void 0?[]:d,v=c[2],m=v===void 0?void 0:v,g=ac(ac({},h),o);return ive(n,function(y){for(var x in g)y.addCase(x,g[x]);for(var w=0,b=p;w<b.length;w++){var C=b[w];y.addMatcher(C.matcher,C.reducer)}m&&y.addDefaultCase(m)})}var l;return{name:e,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:s,caseReducers:a,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var ove="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",sve=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=ove[Math.random()*64|0];return e},uve=["name","message","stack","code"],YT=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),zz=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),lve=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=uve;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=oc(e+"/fulfilled",function(l,c,f,h){return{payload:l,meta:KT(ac({},h||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),a=oc(e+"/pending",function(l,c,f){return{payload:void 0,meta:KT(ac({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=oc(e+"/rejected",function(l,c,f,h,d){return{payload:h,error:(r&&r.serializeError||lve)(l||"Rejected"),meta:KT(ac({},d||{}),{arg:f,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,h){var d=r!=null&&r.idGenerator?r.idGenerator(l):sve(),p=new s,v;function m(y){v=y,p.abort()}var g=function(){return qpe(this,null,function(){var y,x,w,b,C,D,S;return Vpe(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),b=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,l,{getState:f,extra:h}),fve(b)?[4,b]:[3,2];case 1:b=_.sent(),_.label=2;case 2:if(b===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(T,E){return p.signal.addEventListener("abort",function(){return E({name:"AbortError",message:v||"Aborted"})})}),c(a(d,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:d,arg:l},{getState:f,extra:h}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:h,requestId:d,signal:p.signal,abort:m,rejectWithValue:function(T,E){return new YT(T,E)},fulfillWithValue:function(T,E){return new zz(T,E)}})).then(function(T){if(T instanceof YT)throw T;return T instanceof zz?i(T.payload,d,l,T.meta):i(T,d,l)})])];case 3:return w=_.sent(),[3,5];case 4:return D=_.sent(),w=D instanceof YT?o(null,d,l,D.payload,D.meta):o(D,d,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,S||c(w),[2,w]}})})}();return Object.assign(g,{abort:m,requestId:d,arg:l,unwrap:function(){return g.then(cve)}})}}return Object.assign(u,{pending:a,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function cve(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function fve(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var CM="listenerMiddleware";oc(CM+"/add");oc(CM+"/removeAll");oc(CM+"/remove");var Bz;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);kpe();function qH(t,e,n){e.split&&(e=e.split("."));for(var r=0,i=e.length,a=t,o,s;r<i&&(s=e[r++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)a=a[s]=r===i?n:typeof(o=a[s])==typeof e?o:e[r]*0!==0||~(""+e[r]).indexOf(".")?{}:[]}let k2=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const hve={original:null,transformed:null,order:[],transforms:{order:[],params:{}},sizes:{},updates:{},details:{},drawer:{open:!1,type:"quality",column:""}},XH=bM({name:"Data",initialState:hve,reducers:{updateProperty:(t,e)=>{let{path:n,value:r}=e.payload;qH(t,n,r)},addData:(t,e)=>{const n=e.payload.data,r=Object.keys(n[0]);t.original=n,t.transformed=n,t.order=r;let i={DataPrepIndex:40};r.forEach(a=>{i[a]=150}),t.sizes=i},addTransform:(t,e)=>{const n=k2();t.transforms.order.push(n),t.transforms.params[n]=e.payload},updateCellValue:(t,e)=>{const{rowIndex:n,col:r,value:i}=e.payload;t.transformed[n][r]=i}}}),{updateProperty:Yu,addData:dve,addTransform:pve,updateCellValue:vve}=XH.actions,gve=XH.reducer,mve={darkMode:!1,loader:!1,prefixInput:{open:!1,col:""},findAndReplace:{open:!1,col:""},activeCol:"",placeholder:{visible:!1,x:0,y:0},searchQuery:"",searchOptions:{caseSensitive:!0,wholeWord:!1,regex:!1}},KH=bM({name:"Appstate",initialState:mve,reducers:{updateAppstateProperty:(t,e)=>{let{path:n,value:r}=e.payload;qH(t,n,r)}}}),{updateAppstateProperty:pi}=KH.actions,yve=KH.reducer;function Vz(t){return Dr({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M48,180c0,11,7.18,20,16,20a14.24,14.24,0,0,0,10.22-4.66A8,8,0,0,1,85.78,206.4,30.06,30.06,0,0,1,64,216c-17.65,0-32-16.15-32-36s14.35-36,32-36a30.06,30.06,0,0,1,21.78,9.6,8,8,0,0,1-11.56,11.06A14.24,14.24,0,0,0,64,160C55.18,160,48,169,48,180Zm79.6-8.69c-4-1.16-8.14-2.35-10.45-3.84-1.25-.81-1.23-1-1.12-1.9a4.57,4.57,0,0,1,2-3.67c4.6-3.12,15.34-1.73,19.82-.56A8,8,0,0,0,142,145.86c-2.12-.55-21-5.22-32.84,2.76a20.58,20.58,0,0,0-9,14.95c-2,15.88,13.65,20.41,23,23.11,12.06,3.49,13.12,4.92,12.78,7.59-.31,2.41-1.26,3.34-2.14,3.93-4.6,3.06-15.17,1.56-19.55.36A8,8,0,0,0,109.94,214a61.34,61.34,0,0,0,15.19,2c5.82,0,12.3-1,17.49-4.46a20.82,20.82,0,0,0,9.19-15.23C154,179,137.49,174.17,127.6,171.31Zm83.09-26.84a8,8,0,0,0-10.23,4.84L188,184.21l-12.47-34.9a8,8,0,0,0-15.07,5.38l20,56a8,8,0,0,0,15.07,0l20-56A8,8,0,0,0,210.69,144.47ZM216,88v24a8,8,0,0,1-16,0V96H152a8,8,0,0,1-8-8V40H56v72a8,8,0,0,1-16,0V40A16,16,0,0,1,56,24h96a8,8,0,0,1,5.66,2.34l56,56A8,8,0,0,1,216,88Zm-27.31-8L160,51.31V80Z"}}]})(t)}function Wz(t){return Dr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 11a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1zm6-4a1 1 0 1 1 2 0v5a1 1 0 1 1-2 0V7zM7 9a1 1 0 0 1 2 0v3a1 1 0 1 1-2 0V9z"}},{tag:"path",attr:{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}},{tag:"path",attr:{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"}}]})(t)}function ZT(t){return Dr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM7.86 14.841a1.13 1.13 0 0 0 .401.823c.13.108.29.192.479.252.19.061.411.091.665.091.338 0 .624-.053.858-.158.237-.105.416-.252.54-.44a1.17 1.17 0 0 0 .187-.656c0-.224-.045-.41-.135-.56a1.002 1.002 0 0 0-.375-.357 2.028 2.028 0 0 0-.565-.21l-.621-.144a.97.97 0 0 1-.405-.176.37.37 0 0 1-.143-.299c0-.156.061-.284.184-.384.125-.101.296-.152.513-.152.143 0 .266.023.37.068a.624.624 0 0 1 .245.181.56.56 0 0 1 .12.258h.75a1.093 1.093 0 0 0-.199-.566 1.21 1.21 0 0 0-.5-.41 1.813 1.813 0 0 0-.78-.152c-.293 0-.552.05-.777.15-.224.099-.4.24-.527.421-.127.182-.19.395-.19.639 0 .201.04.376.123.524.082.149.199.27.351.367.153.095.332.167.54.213l.618.144c.207.049.36.113.462.193a.387.387 0 0 1 .153.326.512.512 0 0 1-.085.29.558.558 0 0 1-.255.193c-.111.047-.25.07-.413.07-.117 0-.224-.013-.32-.04a.837.837 0 0 1-.249-.115.578.578 0 0 1-.255-.384h-.764Zm-3.726-2.909h.893l-1.274 2.007 1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415H1.5l1.24-2.016-1.228-1.983h.931l.832 1.438h.036l.823-1.438Zm1.923 3.325h1.697v.674H5.266v-3.999h.791v3.325Zm7.636-3.325h.893l-1.274 2.007 1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415h-.861l1.24-2.016-1.228-1.983h.931l.832 1.438h.036l.823-1.438Z"}}]})(t)}const xve=()=>H.jsxs(dy,{children:[H.jsx(Ze,{text:"Add to RapidBI",icon:H.jsx(Cz,{size:18})}),H.jsx(Ze,{text:"Add to abx",icon:H.jsx(Cz,{size:18})}),H.jsx(kl,{title:"Download as file"}),H.jsx(Ze,{text:"CSV",icon:H.jsx(Vz,{size:18})}),H.jsx(Ze,{text:"TSV",icon:H.jsx(Vz,{size:18})}),H.jsx(Ze,{text:"XLSX",icon:H.jsx(ZT,{size:18})}),H.jsx(Ze,{text:"PDF",icon:H.jsx(ZT,{size:18})}),H.jsx(Ze,{text:"JSON",icon:H.jsx(ZT,{size:18})})]});function wve(){return H.jsx(Xh,{content:H.jsx(xve,{}),minimal:!0,position:"bottom-left",children:H.jsx(Oa,{minimal:!0,icon:H.jsx(kde,{size:18}),text:"Export"})})}const yg=t=>H.jsx(Oa,{...t,minimal:!0});function bve(){const t=Ga(),e=mi(i=>i.appState.darkMode),n=i=>{t(Yu({path:"drawer",value:{open:!0,type:i}}))},r=()=>t(pi({path:"darkMode",value:!e}));return H.jsxs("nav",{className:"navbar",children:[H.jsx(wz,{align:"left",children:H.jsxs("div",{onClick:()=>window.location.reload(),className:"fcc pointer app-title",children:[H.jsx(Ide,{className:"app-icon",size:24}),"Data Prep"]})}),H.jsxs(wz,{align:"right",children:[H.jsx(yg,{icon:H.jsx(Mde,{size:18}),text:"Transform"}),H.jsx(wve,{}),H.jsx(yg,{icon:"doughnut-chart",text:"Data Quality",onClick:()=>n("quality")}),H.jsx(yg,{icon:"th-filtered",text:"Applied Transforms",onClick:()=>n("transforms")}),H.jsx(yg,{icon:"help",text:"Help"}),H.jsx(yg,{icon:e?"flash":"moon",text:e?"Light Theme":"Dark Theme",onClick:r})]})]})}var Uz=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Cve(t,e){return!!(t===e||Uz(t)&&Uz(e))}function Sve(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Cve(t[n],e[n]))return!1;return!0}function QT(t,e){e===void 0&&(e=Sve);var n,r=[],i,a=!1;function o(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a&&n===this&&e(s,r)||(i=t.apply(this,s),a=!0,n=this,r=s),i}return o}var Dve=typeof performance=="object"&&typeof performance.now=="function",Gz=Dve?function(){return performance.now()}:function(){return Date.now()};function Hz(t){cancelAnimationFrame(t.id)}function _ve(t,e){var n=Gz();function r(){Gz()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var JT=-1;function Tve(t){if(t===void 0&&(t=!1),JT===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),JT=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return JT}var pd=null;function jz(t){if(t===void 0&&(t=!1),pd===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?pd="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?pd="negative":pd="positive-ascending"),document.body.removeChild(e),pd}return pd}var Eve=150,Ave=function(e){var n=e.columnIndex;e.data;var r=e.rowIndex;return r+":"+n};function kve(t){var e,n=t.getColumnOffset,r=t.getColumnStartIndexForOffset,i=t.getColumnStopIndexForStartIndex,a=t.getColumnWidth,o=t.getEstimatedTotalHeight,s=t.getEstimatedTotalWidth,u=t.getOffsetForColumnAndAlignment,l=t.getOffsetForRowAndAlignment,c=t.getRowHeight,f=t.getRowOffset,h=t.getRowStartIndexForOffset,d=t.getRowStopIndexForStartIndex,p=t.initInstanceProps,v=t.shouldResetStyleCacheOnItemSizeChange,m=t.validateProps;return e=function(g){e2(y,g);function y(w){var b;return b=g.call(this,w)||this,b._instanceProps=p(b.props,cI(b)),b._resetIsScrollingTimeoutId=null,b._outerRef=void 0,b.state={instance:cI(b),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof b.props.initialScrollLeft=="number"?b.props.initialScrollLeft:0,scrollTop:typeof b.props.initialScrollTop=="number"?b.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},b._callOnItemsRendered=void 0,b._callOnItemsRendered=QT(function(C,D,S,_,T,E,A,N){return b.props.onItemsRendered({overscanColumnStartIndex:C,overscanColumnStopIndex:D,overscanRowStartIndex:S,overscanRowStopIndex:_,visibleColumnStartIndex:T,visibleColumnStopIndex:E,visibleRowStartIndex:A,visibleRowStopIndex:N})}),b._callOnScroll=void 0,b._callOnScroll=QT(function(C,D,S,_,T){return b.props.onScroll({horizontalScrollDirection:S,scrollLeft:C,scrollTop:D,verticalScrollDirection:_,scrollUpdateWasRequested:T})}),b._getItemStyle=void 0,b._getItemStyle=function(C,D){var S=b.props,_=S.columnWidth,T=S.direction,E=S.rowHeight,A=b._getItemStyleCache(v&&_,v&&T,v&&E),N=C+":"+D,R;if(A.hasOwnProperty(N))R=A[N];else{var M=n(b.props,D,b._instanceProps),$=T==="rtl";A[N]=R={position:"absolute",left:$?void 0:M,right:$?M:void 0,top:f(b.props,C,b._instanceProps),height:c(b.props,C,b._instanceProps),width:a(b.props,D,b._instanceProps)}}return R},b._getItemStyleCache=void 0,b._getItemStyleCache=QT(function(C,D,S){return{}}),b._onScroll=function(C){var D=C.currentTarget,S=D.clientHeight,_=D.clientWidth,T=D.scrollLeft,E=D.scrollTop,A=D.scrollHeight,N=D.scrollWidth;b.setState(function(R){if(R.scrollLeft===T&&R.scrollTop===E)return null;var M=b.props.direction,$=T;if(M==="rtl")switch(jz()){case"negative":$=-T;break;case"positive-descending":$=N-_-T;break}$=Math.max(0,Math.min($,N-_));var L=Math.max(0,Math.min(E,A-S));return{isScrolling:!0,horizontalScrollDirection:R.scrollLeft<T?"forward":"backward",scrollLeft:$,scrollTop:L,verticalScrollDirection:R.scrollTop<E?"forward":"backward",scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(C){var D=b.props.outerRef;b._outerRef=C,typeof D=="function"?D(C):D!=null&&typeof D=="object"&&D.hasOwnProperty("current")&&(D.current=C)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&Hz(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=_ve(b._resetIsScrolling,Eve)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1)})},b}y.getDerivedStateFromProps=function(b,C){return Ive(b,C),m(b),null};var x=y.prototype;return x.scrollTo=function(b){var C=b.scrollLeft,D=b.scrollTop;C!==void 0&&(C=Math.max(0,C)),D!==void 0&&(D=Math.max(0,D)),this.setState(function(S){return C===void 0&&(C=S.scrollLeft),D===void 0&&(D=S.scrollTop),S.scrollLeft===C&&S.scrollTop===D?null:{horizontalScrollDirection:S.scrollLeft<C?"forward":"backward",scrollLeft:C,scrollTop:D,scrollUpdateWasRequested:!0,verticalScrollDirection:S.scrollTop<D?"forward":"backward"}},this._resetIsScrollingDebounced)},x.scrollToItem=function(b){var C=b.align,D=C===void 0?"auto":C,S=b.columnIndex,_=b.rowIndex,T=this.props,E=T.columnCount,A=T.height,N=T.rowCount,R=T.width,M=this.state,$=M.scrollLeft,L=M.scrollTop,O=Tve();S!==void 0&&(S=Math.max(0,Math.min(S,E-1))),_!==void 0&&(_=Math.max(0,Math.min(_,N-1)));var F=o(this.props,this._instanceProps),V=s(this.props,this._instanceProps),X=V>R?O:0,P=F>A?O:0;this.scrollTo({scrollLeft:S!==void 0?u(this.props,S,D,$,this._instanceProps,P):$,scrollTop:_!==void 0?l(this.props,_,D,L,this._instanceProps,X):L})},x.componentDidMount=function(){var b=this.props,C=b.initialScrollLeft,D=b.initialScrollTop;if(this._outerRef!=null){var S=this._outerRef;typeof C=="number"&&(S.scrollLeft=C),typeof D=="number"&&(S.scrollTop=D)}this._callPropsCallbacks()},x.componentDidUpdate=function(){var b=this.props.direction,C=this.state,D=C.scrollLeft,S=C.scrollTop,_=C.scrollUpdateWasRequested;if(_&&this._outerRef!=null){var T=this._outerRef;if(b==="rtl")switch(jz()){case"negative":T.scrollLeft=-D;break;case"positive-ascending":T.scrollLeft=D;break;default:var E=T.clientWidth,A=T.scrollWidth;T.scrollLeft=A-E-D;break}else T.scrollLeft=Math.max(0,D);T.scrollTop=Math.max(0,S)}this._callPropsCallbacks()},x.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Hz(this._resetIsScrollingTimeoutId)},x.render=function(){var b=this.props,C=b.children,D=b.className,S=b.columnCount,_=b.direction,T=b.height,E=b.innerRef,A=b.innerElementType,N=b.innerTagName,R=b.itemData,M=b.itemKey,$=M===void 0?Ave:M,L=b.outerElementType,O=b.outerTagName,F=b.rowCount,V=b.style,X=b.useIsScrolling,P=b.width,U=this.state.isScrolling,j=this._getHorizontalRangeToRender(),q=j[0],Y=j[1],ne=this._getVerticalRangeToRender(),ue=ne[0],te=ne[1],oe=[];if(S>0&&F)for(var ce=ue;ce<=te;ce++)for(var pe=q;pe<=Y;pe++)oe.push(B.createElement(C,{columnIndex:pe,data:R,isScrolling:X?U:void 0,key:$({columnIndex:pe,data:R,rowIndex:ce}),rowIndex:ce,style:this._getItemStyle(ce,pe)}));var me=o(this.props,this._instanceProps),_e=s(this.props,this._instanceProps);return B.createElement(L||O||"div",{className:D,onScroll:this._onScroll,ref:this._outerRefSetter,style:wh({position:"relative",height:T,width:P,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:_},V)},B.createElement(A||N||"div",{children:oe,ref:E,style:{height:me,pointerEvents:U?"none":void 0,width:_e}}))},x._callPropsCallbacks=function(){var b=this.props,C=b.columnCount,D=b.onItemsRendered,S=b.onScroll,_=b.rowCount;if(typeof D=="function"&&C>0&&_>0){var T=this._getHorizontalRangeToRender(),E=T[0],A=T[1],N=T[2],R=T[3],M=this._getVerticalRangeToRender(),$=M[0],L=M[1],O=M[2],F=M[3];this._callOnItemsRendered(E,A,$,L,N,R,O,F)}if(typeof S=="function"){var V=this.state,X=V.horizontalScrollDirection,P=V.scrollLeft,U=V.scrollTop,j=V.scrollUpdateWasRequested,q=V.verticalScrollDirection;this._callOnScroll(P,U,X,q,j)}},x._getHorizontalRangeToRender=function(){var b=this.props,C=b.columnCount,D=b.overscanColumnCount,S=b.overscanColumnsCount,_=b.overscanCount,T=b.rowCount,E=this.state,A=E.horizontalScrollDirection,N=E.isScrolling,R=E.scrollLeft,M=D||S||_||1;if(C===0||T===0)return[0,0,0,0];var $=r(this.props,R,this._instanceProps),L=i(this.props,$,R,this._instanceProps),O=!N||A==="backward"?Math.max(1,M):1,F=!N||A==="forward"?Math.max(1,M):1;return[Math.max(0,$-O),Math.max(0,Math.min(C-1,L+F)),$,L]},x._getVerticalRangeToRender=function(){var b=this.props,C=b.columnCount,D=b.overscanCount,S=b.overscanRowCount,_=b.overscanRowsCount,T=b.rowCount,E=this.state,A=E.isScrolling,N=E.verticalScrollDirection,R=E.scrollTop,M=S||_||D||1;if(C===0||T===0)return[0,0,0,0];var $=h(this.props,R,this._instanceProps),L=d(this.props,$,R,this._instanceProps),O=!A||N==="backward"?Math.max(1,M):1,F=!A||N==="forward"?Math.max(1,M):1;return[Math.max(0,$-O),Math.max(0,Math.min(T-1,L+F)),$,L]},y}(B.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var Ive=function(e,n){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,n.instance},qz=50,YH=function(e,n){var r=e.rowCount,i=n.rowMetadataMap,a=n.estimatedRowHeight,o=n.lastMeasuredRowIndex,s=0;if(o>=r&&(o=r-1),o>=0){var u=i[o];s=u.offset+u.size}var l=r-o-1,c=l*a;return s+c},ZH=function(e,n){var r=e.columnCount,i=n.columnMetadataMap,a=n.estimatedColumnWidth,o=n.lastMeasuredColumnIndex,s=0;if(o>=r&&(o=r-1),o>=0){var u=i[o];s=u.offset+u.size}var l=r-o-1,c=l*a;return s+c},Nu=function(e,n,r,i){var a,o,s;if(e==="column"?(a=i.columnMetadataMap,o=n.columnWidth,s=i.lastMeasuredColumnIndex):(a=i.rowMetadataMap,o=n.rowHeight,s=i.lastMeasuredRowIndex),r>s){var u=0;if(s>=0){var l=a[s];u=l.offset+l.size}for(var c=s+1;c<=r;c++){var f=o(c);a[c]={offset:u,size:f},u+=f}e==="column"?i.lastMeasuredColumnIndex=r:i.lastMeasuredRowIndex=r}return a[r]},Xz=function(e,n,r,i){var a,o;e==="column"?(a=r.columnMetadataMap,o=r.lastMeasuredColumnIndex):(a=r.rowMetadataMap,o=r.lastMeasuredRowIndex);var s=o>0?a[o].offset:0;return s>=i?QH(e,n,r,o,0,i):Nve(e,n,r,Math.max(0,o),i)},QH=function(e,n,r,i,a,o){for(;a<=i;){var s=a+Math.floor((i-a)/2),u=Nu(e,n,s,r).offset;if(u===o)return s;u<o?a=s+1:u>o&&(i=s-1)}return a>0?a-1:0},Nve=function(e,n,r,i,a){for(var o=e==="column"?n.columnCount:n.rowCount,s=1;i<o&&Nu(e,n,i,r).offset<a;)i+=s,s*=2;return QH(e,n,r,Math.min(i,o-1),Math.floor(i/2),a)},Kz=function(e,n,r,i,a,o,s){var u=e==="column"?n.width:n.height,l=Nu(e,n,r,o),c=e==="column"?ZH(n,o):YH(n,o),f=Math.max(0,Math.min(c-u,l.offset)),h=Math.max(0,l.offset-u+s+l.size);switch(i==="smart"&&(a>=h-u&&a<=f+u?i="auto":i="center"),i){case"start":return f;case"end":return h;case"center":return Math.round(h+(f-h)/2);case"auto":default:return a>=h&&a<=f?a:h>f||a<h?h:f}},Rve=kve({getColumnOffset:function(e,n,r){return Nu("column",e,n,r).offset},getColumnStartIndexForOffset:function(e,n,r){return Xz("column",e,r,n)},getColumnStopIndexForStartIndex:function(e,n,r,i){for(var a=e.columnCount,o=e.width,s=Nu("column",e,n,i),u=r+o,l=s.offset+s.size,c=n;c<a-1&&l<u;)c++,l+=Nu("column",e,c,i).size;return c},getColumnWidth:function(e,n,r){return r.columnMetadataMap[n].size},getEstimatedTotalHeight:YH,getEstimatedTotalWidth:ZH,getOffsetForColumnAndAlignment:function(e,n,r,i,a,o){return Kz("column",e,n,r,i,a,o)},getOffsetForRowAndAlignment:function(e,n,r,i,a,o){return Kz("row",e,n,r,i,a,o)},getRowOffset:function(e,n,r){return Nu("row",e,n,r).offset},getRowHeight:function(e,n,r){return r.rowMetadataMap[n].size},getRowStartIndexForOffset:function(e,n,r){return Xz("row",e,r,n)},getRowStopIndexForStartIndex:function(e,n,r,i){for(var a=e.rowCount,o=e.height,s=Nu("row",e,n,i),u=r+o,l=s.offset+s.size,c=n;c<a-1&&l<u;)c++,l+=Nu("row",e,c,i).size;return c},initInstanceProps:function(e,n){var r=e,i=r.estimatedColumnWidth,a=r.estimatedRowHeight,o={columnMetadataMap:{},estimatedColumnWidth:i||qz,estimatedRowHeight:a||qz,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return n.resetAfterColumnIndex=function(s,u){u===void 0&&(u=!0),n.resetAfterIndices({columnIndex:s,shouldForceUpdate:u})},n.resetAfterRowIndex=function(s,u){u===void 0&&(u=!0),n.resetAfterIndices({rowIndex:s,shouldForceUpdate:u})},n.resetAfterIndices=function(s){var u=s.columnIndex,l=s.rowIndex,c=s.shouldForceUpdate,f=c===void 0?!0:c;typeof u=="number"&&(o.lastMeasuredColumnIndex=Math.min(o.lastMeasuredColumnIndex,u-1)),typeof l=="number"&&(o.lastMeasuredRowIndex=Math.min(o.lastMeasuredRowIndex,l-1)),n._getItemStyleCache(-1),f&&n.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}});const $ve=typeof document<"u"?B.useLayoutEffect:B.useEffect,Mve={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Ove(){const t=B.useRef(0),e=B.useRef(null),[n,r]=B.useState(Mve),i=B.useMemo(()=>typeof window<"u"?new ResizeObserver(a=>{const o=a[0];o&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{e.current&&r(o.contentRect)}))}):null,[]);return $ve(()=>(e.current&&(i.observe(e.current),r(e.current.getBoundingClientRect())),()=>{i.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[e.current]),[e,n]}function JH(){const[t,{width:e,height:n}]=Ove();return{ref:t,width:e,height:n}}function ej(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 2H13V1h-1v1H4V1H3v1H1.5l-.5.5v12l.5.5h13l.5-.5v-12l-.5-.5zM14 14H2V5h12v9zm0-10H2V3h12v1zM4 8H3v1h1V8zm-1 2h1v1H3v-1zm1 2H3v1h1v-1zm2-4h1v1H6V8zm1 2H6v1h1v-1zm-1 2h1v1H6v-1zm1-6H6v1h1V6zm2 2h1v1H9V8zm1 2H9v1h1v-1zm-1 2h1v1H9v-1zm1-6H9v1h1V6zm2 2h1v1h-1V8zm1 2h-1v1h1v-1zm-1-4h1v1h-1V6z"}}]})(t)}function Fve(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.85352 11.7021H7.85449L7.03809 9.54297H3.77246L3.00439 11.7021H2L4.9541 4H5.88867L8.85352 11.7021ZM6.74268 8.73193L5.53418 5.4502C5.49479 5.34277 5.4554 5.1709 5.41602 4.93457H5.39453C5.35872 5.15299 5.31755 5.32487 5.271 5.4502L4.07324 8.73193H6.74268Z"}},{tag:"path",attr:{d:"M13.756 11.7021H12.8752V10.8428H12.8537C12.4706 11.5016 11.9066 11.8311 11.1618 11.8311C10.6139 11.8311 10.1843 11.686 9.87273 11.396C9.56479 11.106 9.41082 10.721 9.41082 10.2412C9.41082 9.21354 10.016 8.61556 11.2262 8.44727L12.8752 8.21631C12.8752 7.28174 12.4974 6.81445 11.7419 6.81445C11.0794 6.81445 10.4815 7.04004 9.94793 7.49121V6.58887C10.4886 6.24512 11.1117 6.07324 11.8171 6.07324C13.1097 6.07324 13.756 6.75716 13.756 8.125V11.7021ZM12.8752 8.91992L11.5485 9.10254C11.1403 9.15983 10.8324 9.26188 10.6247 9.40869C10.417 9.55192 10.3132 9.80794 10.3132 10.1768C10.3132 10.4453 10.4081 10.6655 10.5978 10.8374C10.7912 11.0057 11.0472 11.0898 11.3659 11.0898C11.8027 11.0898 12.1626 10.9377 12.4455 10.6333C12.7319 10.3254 12.8752 9.93685 12.8752 9.46777V8.91992Z"}}]})(t)}function Pve(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M10.012 2h.976v3.113l2.56-1.557.486.885L11.47 6l2.564 1.559-.485.885-2.561-1.557V10h-.976V6.887l-2.56 1.557-.486-.885L9.53 6 6.966 4.441l.485-.885 2.561 1.557V2zM2 10h4v4H2v-4z"}}]})(t)}function tj(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11 1v4h4v1h-4v4h4v1h-4v4h-1v-4H6v4H5v-4H1v-1h4V6H1V5h4V1h1v4h4V1h1zM6 6v4h4V6H6z"}}]})(t)}function Lve(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.36 7L1 13h1.34l.51-1.47h2.26L5.64 13H7L4.65 7H3.36zm-.15 3.53l.78-2.14.78 2.14H3.21zM11.82 4h-1.6L7 13h1.56l.75-2.29h3.36l.77 2.29H15l-3.18-9zM9.67 9.5l1.18-3.59c.059-.185.1-.376.12-.57.027.192.064.382.11.57l1.25 3.59H9.67z"}}]})(t)}function zve(t){return Dr({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11H1V13H15V11H16V14H15H1H0V11Z"}},{tag:"path",attr:{d:"M6.84048 11H5.95963V10.1406H5.93814C5.555 10.7995 4.99104 11.1289 4.24625 11.1289C3.69839 11.1289 3.26871 10.9839 2.95718 10.6938C2.64924 10.4038 2.49527 10.0189 2.49527 9.53906C2.49527 8.51139 3.10041 7.91341 4.3107 7.74512L5.95963 7.51416C5.95963 6.57959 5.58186 6.1123 4.82632 6.1123C4.16389 6.1123 3.56591 6.33789 3.03238 6.78906V5.88672C3.57307 5.54297 4.19612 5.37109 4.90152 5.37109C6.19416 5.37109 6.84048 6.05501 6.84048 7.42285V11ZM5.95963 8.21777L4.63297 8.40039C4.22476 8.45768 3.91682 8.55973 3.70914 8.70654C3.50145 8.84977 3.39761 9.10579 3.39761 9.47461C3.39761 9.74316 3.4925 9.96338 3.68228 10.1353C3.87564 10.3035 4.13166 10.3877 4.45035 10.3877C4.8872 10.3877 5.24706 10.2355 5.52994 9.93115C5.8164 9.62321 5.95963 9.2347 5.95963 8.76562V8.21777Z"}},{tag:"path",attr:{d:"M9.3475 10.2051H9.32601V11H8.44515V2.85742H9.32601V6.4668H9.3475C9.78076 5.73633 10.4146 5.37109 11.2489 5.37109C11.9543 5.37109 12.5057 5.61816 12.9032 6.1123C13.3042 6.60286 13.5047 7.26172 13.5047 8.08887C13.5047 9.00911 13.2809 9.74674 12.8333 10.3018C12.3857 10.8532 11.7734 11.1289 10.9964 11.1289C10.2695 11.1289 9.71989 10.821 9.3475 10.2051ZM9.32601 7.98682V8.75488C9.32601 9.20964 9.47282 9.59635 9.76644 9.91504C10.0636 10.2301 10.4396 10.3877 10.8944 10.3877C11.4279 10.3877 11.8451 10.1836 12.1458 9.77539C12.4502 9.36719 12.6024 8.79964 12.6024 8.07275C12.6024 7.46045 12.4609 6.98063 12.1781 6.6333C11.8952 6.28597 11.512 6.1123 11.0286 6.1123C10.5166 6.1123 10.1048 6.29134 9.7933 6.64941C9.48177 7.00391 9.32601 7.44971 9.32601 7.98682Z"}}]})(t)}function Bve(t,e,n){let r=[];return t.forEach(i=>{let a={...i};a[e]=n.prefix+i[e]+n.suffix,r.push(a)}),{result:r,rowsAffected:r.length}}function Vve(t,e){let n={},r=[],i=0;return t.forEach(a=>{if(a[e]in n){i++;return}n[a[e]]=1,r.push(a)}),{result:r,rowsAffected:i}}function Wve(t,e,n){let r=[];t.forEach(a=>{let o={...a};delete o[e],r.push(o)});let i=n.cols.filter(a=>a!==e);return{result:r,rowsAffected:r.length,cols:i}}function Uve(t,e){let n=[],r=0;return t.forEach(i=>{if(i[e]===""){r++;return}n.push(i)}),{result:n,rowsAffected:r}}function Gve(t,e,n){let r=[];const i=e+"_"+k2(5);t.forEach(o=>{let s={...o};s[i]=o[e],r.push(s)});let a=[...n.cols];return a.splice(a.indexOf(e)+1,0,i),{result:r,rowsAffected:r.length,cols:a}}function Hve(t,e,n){let r=[],{find:i="",replace:a="",caseSensitive:o=!0}=n;return o||(i=i.toLowerCase()),t.forEach(s=>{let u={...s},l=o?s[e]:s[e].toLowerCase();u[e]=l===i?a:s[e],r.push(u)}),{result:r,rowsAffected:r.length}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve=1e-7,qve=1e-4;class nj{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class SM{refCount(e){return ji("refCount")}incRef(e){return ji("incRef")}timerAvailable(){return!0}time(e){return ji("time")}read(e){return ji("read")}readSync(e){return ji("readSync")}readToGPU(e,n){return ji("readToGPU")}numDataIds(){return ji("numDataIds")}disposeData(e,n){return ji("disposeData")}write(e,n,r){return ji("write")}move(e,n,r,i,a){return ji("move")}createTensorFromGPUData(e,n,r){return ji("createTensorFromGPUData")}memory(){return ji("memory")}floatPrecision(){return ji("floatPrecision")}epsilon(){return this.floatPrecision()===32?jve:qve}dispose(){return ji("dispose")}}function ji(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,zd(t,e,n)}function Sh(t,e,n){return Math.max(t,Math.min(e,n))}function DM(t){return t%2===0?t:t+1}function zd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Kve(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function z(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function _M(t,e,n=""){z(zt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function rj(t){z(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function he(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function zt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ev(t){return t%1===0}function wI(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Ep(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Yz(t,e=i=>0,n,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(t()){i();return}o++;const u=e(o);if(n!=null&&o>=n){a();return}r!=null?r(s,u):setTimeout(s,u)};s()})}function ij(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function St(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),z(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),z(t.every(r=>ev(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Fc(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:St(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Kr(t,e){return On(t,e)}function On(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Yve(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Zve(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function aj(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function eC(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Qve(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function gy(t){return typeof t=="string"||t instanceof String}function Jve(t){return typeof t=="boolean"}function bI(t){return typeof t=="number"}function Fv(t){return Array.isArray(t)?Fv(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":bI(t)?"float32":gy(t)?"string":Jve(t)?"bool":"float32"}function CI(t){return!!(t&&t.constructor&&t.call&&t.apply)}function SI(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function He(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function oj(t,e,n,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=n[t+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<a;u++)i[u]=oj(t+u*s,o,n,r)}return i}function ls(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return oj(0,t,e,n)}function ege(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function TM(t,e){const n=Yr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Yr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function sj(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return ls(t,new Float32Array(n));if(e==="int32")return ls(t,new Int32Array(n));if(e==="bool")return ls(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function al(t){t.forEach(e=>{z(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Qs(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Pv(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function EM(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zz="tfjsflags";class tge{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=nge,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(EM(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Zz in e&&e[Zz].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=ige(i,a)})}}function nge(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(rge(e,r[0],r[1]),r.join("="))),e}function rge(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function ige(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function le(){return uj}let uj=null;function age(t){uj=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eE;function lj(){if(eE==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");eE=t}return eE}function oge(){const t=lj();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function AM(t,e){const n=oge();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const I2="Abs",my="Acos",yy="Acosh",Lv="Add",kM="AddN",IM="All",NM="Any",N2="ArgMax",R2="ArgMin",xy="Asin",wy="Asinh",by="Atan",Cy="Atanh",Sy="Atan2",$2="AvgPool",RM="AvgPoolGrad",M2="AvgPool3D",$M="AvgPool3DGrad",O2="BatchMatMul",F2="BatchToSpaceND",MM="Bincount",OM="BitwiseAnd",sge="BroadcastTo",cj="BroadcastArgs",Dy="Cast",_y="Ceil",Ty="ClipByValue",FM="Complex",P2="ComplexAbs",L2="Concat",z2="Conv2D",PM="Conv2DBackpropFilter",B2="Conv2DBackpropInput",V2="Conv3D",LM="Conv3DBackpropFilterV2",zM="Conv3DBackpropInputV2",Ey="Cos",Ay="Cosh",BM="Cumprod",W2="Cumsum",VM="CropAndResize",WM="DenseBincount",UM="DepthToSpace",U2="DepthwiseConv2dNative",GM="DepthwiseConv2dNativeBackpropFilter",HM="DepthwiseConv2dNativeBackpropInput",fj="Diag",G2="Dilation2D",DI="Dilation2DBackpropInput",_I="Dilation2DBackpropFilter",uge="Draw",ky="RealDiv",jM="Einsum",Iy="Elu",qM="EluGrad",Ny="Erf",H2="Equal",Ry="Exp",j2="ExpandDims",$y="Expm1",XM="FFT",KM="Fill",YM="FlipLeftRight",My="Floor",Oy="FloorDiv",q2="FusedBatchNorm",X2="GatherV2",hj="GatherNd",K2="Greater",Fy="GreaterEqual",Py="Identity",ZM="IFFT",QM="Imag",Ly="IsFinite",zy="IsInf",By="IsNan",Y2="LeakyRelu",Z2="Less",Q2="LessEqual",dj="LinSpace",Vy="Log",Wy="Log1p",J2="LogicalAnd",eD="LogicalNot",tD="LogicalOr",lge="LogSoftmax",nD="LRN",JM="LRNGrad",rD="Max",Uy="Maximum",iD="MaxPool",eO="MaxPoolGrad",aD="MaxPool3D",tO="MaxPool3DGrad",pj="MaxPoolWithArgmax",oD="Mean",sD="Min",Gy="Minimum",uD="MirrorPad",Hy="Mod",vj="Multinomial",jy="Multiply",lD="Neg",cD="NotEqual",nO="NonMaxSuppressionV3",rO="NonMaxSuppressionV4",iO="NonMaxSuppressionV5",fD="OnesLike",hD="OneHot",dD="Pack",pD="PadV2",qy="Pow",vD="Prelu",gD="Prod",gj="RaggedGather",mj="RaggedRange",yj="RaggedTensorToTensor",aO="Range",oO="Real",Xy="Reciprocal",Ky="Relu",mD="Reshape",yD="ResizeNearestNeighbor",sO="ResizeNearestNeighborGrad",xD="ResizeBilinear",uO="ResizeBilinearGrad",Yy="Relu6",wD="Reverse",Zy="Round",Qy="Rsqrt",xj="ScatterNd",wj="TensorScatterUpdate",bj="SearchSorted",bD="Select",Jy="Selu",CD="Slice",e1="Sin",t1="Sinh",n1="Sign",r1="Sigmoid",i1="Softplus",a1="Sqrt",SD="Sum",DD="SpaceToBatchND",_D="SplitV",TD="Softmax",Cj="SparseFillEmptyRows",Sj="SparseReshape",Dj="SparseSegmentMean",_j="SparseSegmentSum",Tj="SparseToDense",o1="SquaredDifference",lO="Square",cO="StaticRegexReplace",fO="StridedSlice",Ej="StringNGrams",Aj="StringSplit",kj="StringToHashBucketFast",s1="Sub",u1="Tan",l1="Tanh",c1="Tile",hO="TopK",dO="Transform",Ap="Transpose",pO="Unique",ED="Unpack",AD="UnsortedSegmentSum",kD="ZerosLike",f1="Step",cge="FromPixels",vO="RotateWithOffset",tC="_FusedMatMul",nC="FusedConv2D",Ij="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _a(...t){le().getBool("IS_TEST")||le().getBool("PROD")||console.warn(...t)}function fge(...t){le().getBool("IS_TEST")||le().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rC=AM("kernelRegistry",()=>new Map),TI=AM("gradRegistry",()=>new Map);function Qz(t,e){const n=Rj(t,e);return rC.get(n)}function Jz(t){return TI.get(t)}function e5(t){const e=rC.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===t&&n.push(o)}return n}function Nj(t){const{kernelName:e,backendName:n}=t,r=Rj(e,n);rC.has(r)&&_a(`The kernel '${e}' for backend '${n}' is already registered`),rC.set(r,t)}function hge(t){const{kernelName:e}=t;TI.has(e)&&le().getBool("DEBUG")&&_a(`Overriding the gradient for '${e}'`),TI.set(e,t)}function Rj(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Mj=cn,po=null;try{po=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function cn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}cn.prototype.__isLong__;Object.defineProperty(cn.prototype,"__isLong__",{value:!0});function wa(t){return(t&&t.__isLong__)===!0}cn.isLong=wa;var t5={},n5={};function Kh(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=n5[t],r)?r:(n=fn(t,(t|0)<0?-1:0,!0),i&&(n5[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=t5[t],r)?r:(n=fn(t,t<0?-1:0,!1),i&&(t5[t]=n),n))}cn.fromInt=Kh;function vo(t,e){if(isNaN(t))return e?Wf:go;if(e){if(t<0)return Wf;if(t>=Oj)return Lj}else{if(t<=-i5)return ra;if(t+1>=i5)return Pj}return t<0?vo(-t,e).neg():fn(t%tv|0,t/tv|0,e)}cn.fromNumber=vo;function fn(t,e,n){return new cn(t,e,n)}cn.fromBits=fn;var iC=Math.pow;function gO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return go;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return gO(t.substring(1),e,n).neg();for(var i=vo(iC(n,8)),a=go,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+s),n);if(s<8){var l=vo(iC(n,s));a=a.mul(l).add(vo(u))}else a=a.mul(i),a=a.add(vo(u))}return a.unsigned=e,a}cn.fromString=gO;function bs(t,e){return typeof t=="number"?vo(t,e):typeof t=="string"?gO(t,e):fn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}cn.fromValue=bs;var r5=65536,dge=1<<24,tv=r5*r5,Oj=tv*tv,i5=Oj/2,a5=Kh(dge),go=Kh(0);cn.ZERO=go;var Wf=Kh(0,!0);cn.UZERO=Wf;var op=Kh(1);cn.ONE=op;var Fj=Kh(1,!0);cn.UONE=Fj;var EI=Kh(-1);cn.NEG_ONE=EI;var Pj=fn(-1,2147483647,!1);cn.MAX_VALUE=Pj;var Lj=fn(-1,-1,!0);cn.MAX_UNSIGNED_VALUE=Lj;var ra=fn(0,-2147483648,!1);cn.MIN_VALUE=ra;var Re=cn.prototype;Re.toInt=function(){return this.unsigned?this.low>>>0:this.low};Re.toNumber=function(){return this.unsigned?(this.high>>>0)*tv+(this.low>>>0):this.high*tv+(this.low>>>0)};Re.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ra)){var n=vo(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var a=vo(iC(e,6),this.unsigned),o=this,s="";;){var u=o.div(a),l=o.sub(u.mul(a)).toInt()>>>0,c=l.toString(e);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};Re.getHighBits=function(){return this.high};Re.getHighBitsUnsigned=function(){return this.high>>>0};Re.getLowBits=function(){return this.low};Re.getLowBitsUnsigned=function(){return this.low>>>0};Re.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ra)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Re.isZero=function(){return this.high===0&&this.low===0};Re.eqz=Re.isZero;Re.isNegative=function(){return!this.unsigned&&this.high<0};Re.isPositive=function(){return this.unsigned||this.high>=0};Re.isOdd=function(){return(this.low&1)===1};Re.isEven=function(){return(this.low&1)===0};Re.equals=function(e){return wa(e)||(e=bs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Re.eq=Re.equals;Re.notEquals=function(e){return!this.eq(e)};Re.neq=Re.notEquals;Re.ne=Re.notEquals;Re.lessThan=function(e){return this.comp(e)<0};Re.lt=Re.lessThan;Re.lessThanOrEqual=function(e){return this.comp(e)<=0};Re.lte=Re.lessThanOrEqual;Re.le=Re.lessThanOrEqual;Re.greaterThan=function(e){return this.comp(e)>0};Re.gt=Re.greaterThan;Re.greaterThanOrEqual=function(e){return this.comp(e)>=0};Re.gte=Re.greaterThanOrEqual;Re.ge=Re.greaterThanOrEqual;Re.compare=function(e){if(wa(e)||(e=bs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Re.comp=Re.compare;Re.negate=function(){return!this.unsigned&&this.eq(ra)?ra:this.not().add(op)};Re.neg=Re.negate;Re.add=function(e){wa(e)||(e=bs(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,u=e.low>>>16,l=e.low&65535,c=0,f=0,h=0,d=0;return d+=a+l,h+=d>>>16,d&=65535,h+=i+u,f+=h>>>16,h&=65535,f+=r+s,c+=f>>>16,f&=65535,c+=n+o,c&=65535,fn(h<<16|d,c<<16|f,this.unsigned)};Re.subtract=function(e){return wa(e)||(e=bs(e)),this.add(e.neg())};Re.sub=Re.subtract;Re.multiply=function(e){if(this.isZero())return go;if(wa(e)||(e=bs(e)),po){var n=po.mul(this.low,this.high,e.low,e.high);return fn(n,po.get_high(),this.unsigned)}if(e.isZero())return go;if(this.eq(ra))return e.isOdd()?ra:go;if(e.eq(ra))return this.isOdd()?ra:go;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(a5)&&e.lt(a5))return vo(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,o=this.low&65535,s=e.high>>>16,u=e.high&65535,l=e.low>>>16,c=e.low&65535,f=0,h=0,d=0,p=0;return p+=o*c,d+=p>>>16,p&=65535,d+=a*c,h+=d>>>16,d&=65535,d+=o*l,h+=d>>>16,d&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=a*l,f+=h>>>16,h&=65535,h+=o*u,f+=h>>>16,h&=65535,f+=r*c+i*l+a*u+o*s,f&=65535,fn(d<<16|p,f<<16|h,this.unsigned)};Re.mul=Re.multiply;Re.divide=function(e){if(wa(e)||(e=bs(e)),e.isZero())throw Error("division by zero");if(po){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?po.div_u:po.div_s)(this.low,this.high,e.low,e.high);return fn(n,po.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Wf:go;var r,i,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Wf;if(e.gt(this.shru(1)))return Fj;a=Wf}else{if(this.eq(ra)){if(e.eq(op)||e.eq(EI))return ra;if(e.eq(ra))return op;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(go)?e.isNegative()?op:EI:(i=this.sub(e.mul(r)),a=r.add(i.div(e)),a)}else if(e.eq(ra))return this.unsigned?Wf:go;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=go}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:iC(2,s-48),l=vo(r),c=l.mul(e);c.isNegative()||c.gt(i);)r-=u,l=vo(r,this.unsigned),c=l.mul(e);l.isZero()&&(l=op),a=a.add(l),i=i.sub(c)}return a};Re.div=Re.divide;Re.modulo=function(e){if(wa(e)||(e=bs(e)),po){var n=(this.unsigned?po.rem_u:po.rem_s)(this.low,this.high,e.low,e.high);return fn(n,po.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Re.mod=Re.modulo;Re.rem=Re.modulo;Re.not=function(){return fn(~this.low,~this.high,this.unsigned)};Re.and=function(e){return wa(e)||(e=bs(e)),fn(this.low&e.low,this.high&e.high,this.unsigned)};Re.or=function(e){return wa(e)||(e=bs(e)),fn(this.low|e.low,this.high|e.high,this.unsigned)};Re.xor=function(e){return wa(e)||(e=bs(e)),fn(this.low^e.low,this.high^e.high,this.unsigned)};Re.shiftLeft=function(e){return wa(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fn(0,this.low<<e-32,this.unsigned)};Re.shl=Re.shiftLeft;Re.shiftRight=function(e){return wa(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Re.shr=Re.shiftRight;Re.shiftRightUnsigned=function(e){if(wa(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return fn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?fn(n,0,this.unsigned):fn(n>>>e-32,0,this.unsigned)};Re.shru=Re.shiftRightUnsigned;Re.shr_u=Re.shiftRightUnsigned;Re.toSigned=function(){return this.unsigned?fn(this.low,this.high,!1):this};Re.toUnsigned=function(){return this.unsigned?this:fn(this.low,this.high,!0)};Re.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Re.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Re.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};cn.fromBytes=function(e,n,r){return r?cn.fromBytesLE(e,n):cn.fromBytesBE(e,n)};cn.fromBytesLE=function(e,n){return new cn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};cn.fromBytesBE=function(e,n){return new cn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const zj=nl(Mj),pge=Doe({__proto__:null,default:zj},[Mj]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rf=zj||pge;function ID(t){return Rf.fromString(t,!0,16)}const Bj=ID("c3a5c85c97cb3127"),Af=ID("b492b66fbe98f273"),hi=ID("9ae16a3b2f90404f");function AI(t){return t.xor(t.shru(47))}function Vj(t,e,n){const r=t.slice(e,e+n);return Rf.fromBytes(Array.from(r),!0,!0)}function nn(t,e){return Vj(t,e,8)}function o5(t,e){return Vj(t,e,4)}function yr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function sc(t,e,n=ID("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function vge(t,e,n,r,i,a){i=i.add(t),a=yr(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),a=a.add(yr(i,44)),[i.add(r),a.add(o)]}function kx(t,e,n,r){return vge(nn(t,e),nn(t,e+8),nn(t,e+16),nn(t,e+24),n,r)}function gge(t,e=t.length){if(e>=8){const n=hi.add(e*2),r=nn(t,0).add(hi),i=nn(t,e-8),a=yr(i,37).mul(n).add(r),o=yr(r,25).add(i).mul(n);return sc(a,o,n)}if(e>=4){const n=hi.add(e*2),r=o5(t,0);return sc(r.shl(3).add(e),o5(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],a=n+(r<<8),o=e+(i<<2);return AI(hi.mul(a).xor(Bj.mul(o))).mul(hi)}return hi}function mge(t,e=t.length){const n=hi.add(e*2),r=nn(t,0).mul(Af),i=nn(t,8),a=nn(t,e-8).mul(n),o=nn(t,e-16).mul(hi);return sc(yr(r.add(i),43).add(yr(a,30)).add(o),r.add(yr(i.add(hi),18)).add(a),n)}function yge(t,e=t.length){const n=hi.add(e*2),r=nn(t,0).mul(hi),i=nn(t,8),a=nn(t,e-8).mul(n),o=nn(t,e-16).mul(hi),s=yr(r.add(i),43).add(yr(a,30)).add(o),u=sc(s,r.add(yr(i.add(hi),18)).add(a),n),l=nn(t,16).mul(n),c=nn(t,24),f=s.add(nn(t,e-32)).mul(n),h=u.add(nn(t,e-24)).mul(n);return sc(yr(l.add(c),43).add(yr(f,30)).add(h),l.add(yr(c.add(r),18)).add(f),n)}function xge(t,e=t.length){const n=Rf.fromNumber(81,!0);if(e<=32)return e<=16?gge(t,e):mge(t,e);if(e<=64)return yge(t,e);let r=n,i=n.mul(Af).add(113),a=AI(i.mul(hi).add(113)).mul(hi),o=[Rf.UZERO,Rf.UZERO],s=[Rf.UZERO,Rf.UZERO];r=r.mul(hi).add(nn(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=yr(r.add(i).add(o[0]).add(nn(t,u+8)),37).mul(Af),i=yr(i.add(o[1]).add(nn(t,u+48)),42).mul(Af),r=r.xor(s[1]),i=i.add(o[0]).add(nn(t,u+40)),a=yr(a.add(s[0]),33).mul(Af),o=kx(t,u,o[1].mul(Af),r.add(s[0])),s=kx(t,u+32,a.add(s[1]),i.add(nn(t,u+16))),[a,r]=[r,a],u+=64;while(u!==l);const f=Af.add(a.and(255).shl(1));return u=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=yr(r.add(i).add(o[0]).add(nn(t,u+8)),37).mul(f),i=yr(i.add(o[1]).add(nn(t,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(nn(t,u+40))),a=yr(a.add(s[0]),33).mul(f),o=kx(t,u,o[1].mul(f),r.add(s[0])),s=kx(t,u+32,a.add(s[1]),i.add(nn(t,u+16))),[a,r]=[r,a],sc(sc(o[0],s[0],f).add(AI(i).mul(Bj)).add(a),sc(o[1],s[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t,e){return e==="string"?uc(t):Yh([t],e)}function wge(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Yh(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Dh(t)),le().getBool("DEBUG")&&Yve(t,e),wge(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ii(){return le().platform.now()}function uc(t,e="utf-8"){return e=e||"utf-8",le().platform.encode(t,e)}function yc(t,e="utf-8"){return e=e||"utf-8",le().platform.decode(t,e)}function Eo(t){return le().platform.isTypedArray!=null?le().platform.isTypedArray(t):$j(t)}function Dh(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||EM(t)||t==null||Eo(t)&&n)e.push(t);else if(Array.isArray(t)||Eo(t))for(let r=0;r<t.length;++r)Dh(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Dh(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bge=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Sge)}profileKernel(e,n,r){let i;const a=()=>{i=r()};let o;const s=Ii();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const l of i)l.dataSync();o=Promise.resolve({kernelMs:Ii()-s})}if(le().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<i.length;l++){const c=i[l];c.data().then(f=>{Cge(f,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(u=>{this.logger.logKernelProfile(n,s,u[0],u[1],a,u[2])})})}};function Cge(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Sge{logKernelProfile(e,n,r,i,a,o){const s=typeof i=="number"?Ep(`${i}ms`,9):i.error,u=Ep(e,25),l=n.rank,c=n.size,f=Ep(n.shape.toString(),14);let h="";for(const d in a){const p=a[d];if(p!=null){const v=p.shape||n.shape,m=v.length;h+=`${d}: ${m}D ${m>0?v:""} `}}console.log(`%c${u}	%c${s}	%c${l}D ${f}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dge(t,e,n){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const f in c){const h=c[f];let d=!1;for(let p=0;p<e.length;p++)if(r[h.id]){l.outputs.forEach(v=>r[v.id]=!0),d=!0,i[l.id]=!0;break}if(d)break}}const a={};a[n.id]=!0;const o={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(a[l.outputs[f].id]){for(const h in c)a[c[h].id]=!0,o[l.id]=!0;break}}const s=[];for(let u=0;u<t.length;u++){const l=t[u];if(i[l.id]&&o[l.id]){const c={};for(const h in l.inputs){const d=l.inputs[h];r[d.id]&&(c[h]=d)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,s.push(f)}}return s}function _ge(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(u=>{const l=t[u.id];l!=null?o.push(l):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const u in a.inputs){if(!(u in s))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(s)}.`);const l=n(()=>s[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=a.inputs[u];if(!zt(l.shape,c.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const f=t[c.id];t[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5=20,xg=3,tE=7;function Tge(t,e,n,r){const i=He(e),a=Ege(t,e,n,i),o=e.length,s=Xw(t,e,n,i,a),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${o}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(s.map(l=>"    "+l).join(`
`)),u.join(`
`)}function Ege(t,e,n,r){const i=he(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,u=n==="complex64"?tm(t):t;if(s>1)for(let l=0;l<i/a;l++){const c=l*a;for(let f=0;f<a;f++)o[f]=Math.max(o[f],em(u[c+f],0,n).length)}return o}function em(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(tE))} + ${parseFloat(t[1].toFixed(tE))}j`:gy(t)?r=`'${t}'`:n==="bool"?r=Wj(t):r=parseFloat(t.toFixed(tE)).toString(),Ep(r,e)}function Wj(t){return t===0?"false":"true"}function Xw(t,e,n,r,i,a=!0){const o=n==="complex64"?2:1,s=e[0],u=e.length;if(u===0){if(n==="complex64"){const v=tm(t);return[em(v[0],0,n)]}return n==="bool"?[Wj(t[0])]:[t[0].toString()]}if(u===1){if(s>s5){const m=xg*o;let g=Array.from(t.slice(0,m)),y=Array.from(t.slice((s-xg)*o,s*o));return n==="complex64"&&(g=tm(g),y=tm(y)),["["+g.map((x,w)=>em(x,i[w],n)).join(", ")+", ..., "+y.map((x,w)=>em(x,i[s-xg+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?tm(t):Array.from(t)).map((m,g)=>em(m,i[g],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),f=r[0]*o,h=[];if(s>s5){for(let v=0;v<xg;v++){const m=v*f,g=m+f;h.push(...Xw(t.slice(m,g),l,n,c,i,!1))}h.push("...");for(let v=s-xg;v<s;v++){const m=v*f,g=m+f;h.push(...Xw(t.slice(m,g),l,n,c,i,v===s-1))}}else for(let v=0;v<s;v++){const m=v*f,g=m+f;h.push(...Xw(t.slice(m,g),l,n,c,i,v===s-1))}const d=u===2?",":"";h[0]="["+(s>0?h[0]+d:"");for(let v=1;v<h.length-1;v++)h[v]=" "+h[v]+d;let p=`,
`;for(let v=2;v<u;v++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":p),h}function tm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=he(e),r!=null){const i=r.length;z(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||On(n,this.size),this.strides=He(e)}set(e,...n){n.length===0&&(n=[0]),z(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return es().makeTensor(this.values,this.shape,this.dtype)}}let es=null,Bd=null;function Age(t){es=t}function kge(t){Bd=t}class Xn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=he(e),this.strides=He(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Bd.buffer(this.shape,this.dtype,e)}bufferSync(){return Bd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return ls(this.shape,e,this.dtype==="complex64")}arraySync(){return ls(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=es().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>yc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),es().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=es().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>yc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await es().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(es().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Bd.print(this,e)}clone(){return this.throwIfDisposed(),Bd.clone(this)}toString(e=!1){const n=this.dataSync();return Tge(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Bd.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),es().makeVariable(this,e,n,r)}}Object.defineProperty(Xn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function fe(){return AM("Tensor",()=>Xn)}fe();class aC extends Xn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!zt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);es().disposeTensor(this),this.dataId=e.dataId,es().incRef(this,null)}dispose(){es().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(aC,Symbol.hasInstance,{value:t=>t instanceof Xn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var u5;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(u5||(u5={}));var kI;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(kI||(kI={}));var II;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(II||(II={}));var NI;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(NI||(NI={}));var RI;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(RI||(RI={}));const Ige={float32:NI,int32:kI,bool:II,complex64:RI};function pa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ige[t][e]}function mO(t){return pa(t,"int32")}function Uj(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Gj(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t,e){if(t.dtype===e.dtype)return[t,e];const n=pa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Hj(t){const e=[];return jj(t,e,new Set),e}function jj(t,e,n){if(t==null)return;if(t instanceof Xn){e.push(t);return}if(!Nge(t))return;const r=t;for(const i in r){const a=r[i];n.has(a)||(n.add(a),jj(a,e,n))}}function Nge(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nE(t){return t.kernelName!=null}class l5{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class nv{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new l5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(_a(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new bge(this.backendInstance),!0}setupRegisteredKernels(){e5(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){e5(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof SM)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,_a(`Initialization of backend ${e} failed`),_a(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return _a(`Initialization of backend ${e} failed`),_a(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return nv.nextTensorId++}nextVariableId(){return nv.nextVariableId++}clone(e){const n=ee.runKernel(Py,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",u={x:o},l={dtype:s};return ee.runKernel(Dy,u,l)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Qz(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let a=0;r.forEach(u=>{a+=u.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let u;const l=nE(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(nE(e)){const{kernelName:p,inputs:v,attrs:m}=e;this.backendName==null&&this.backend;const g=Qz(p,this.backendName);z(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),s=()=>{const y=this.backend.numDataIds();u=g.kernelFunc({inputs:v,attrs:m,backend:this.backend});const x=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,x);const w=x.map(b=>b.rank!=null?b:this.makeTensorFromTensorInfo(b));if(i){const b=this.getTensorsForGradient(p,v,w);r=this.saveTensorsForBackwardMode(b)}return w}}else{const{forwardFunc:p}=e,v=m=>{i&&(r=m.map(g=>this.keep(this.clone(g))))};s=()=>{const m=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,v));const g=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,m,g),g}}const{inputs:c,attrs:f}=e,h=nE(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(d=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),n=d.outputs)}),i&&this.addTapeNode(l,c,n,h,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=Jz(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(z(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(l=>n[l])):s=a.map(l=>n[l]);const u=r.filter((l,c)=>o[c]);return s.concat(u)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&gy(e[0])&&(a=e.map(u=>uc(u)));const o=i.write(a,n,r),s=new Xn(n,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const u=this.state.tensorInfo.get(o),l=Qve(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s}makeTensorFromDataId(e,n,r,i){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:a}=e,o=new Xn(i,a,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new aC(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*eC(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof aC||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*eC(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},u=Jz(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=l=>(l=l.map((c,f)=>{if(c==null){const h=r[f],d=Yr(h.size,h.dtype);return this.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Hj(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,n,r,i=!1){if(z(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));z(a instanceof Xn,()=>"The result y returned by f() must be a tensor.");const o=Dge(this.state.activeTape,n,a);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??Rge(a.shape),_ge(s,o,l=>this.tidy(l),$ge);const u=n.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:u}})}customGrad(e){return z(CI(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{z(n.every(s=>s instanceof Xn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((s,u)=>{i[u]=s});const a=(s,u)=>(r=e(...n,u),z(r.value instanceof Xn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),z(CI(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,u)=>{const l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];z(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),z(c.every(h=>h instanceof Xn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((h,d)=>{f[d]=()=>h}),f};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ii(),r=await this.backend.time(e);return r.wallMs=Ii()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new l5;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}nv.nextTensorId=0;nv.nextVariableId=0;function Rge(t){const e=TM(he(t),"float32");return ee.makeTensor(e,t,"float32")}function qj(){const t=lj();if(t._tfengine==null){const e=new tge(t);t._tfengine=new nv(e)}return age(t._tfengine.ENV),Age(()=>t._tfengine),t._tfengine}const ee=qj();function $ge(t,e){const n={a:t,b:e};return ee.runKernel(Lv,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mge(){return typeof navigator<"u"&&navigator!=null}function Xj(t){if(t||Mge()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Kj(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pi=le();Pi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Pi.registerFlag("IS_BROWSER",()=>Kj());Pi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Pi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Pi.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Pi.registerFlag("PROD",()=>!1);Pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Pi.getBool("DEBUG"));Pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Pi.registerFlag("IS_TEST",()=>!1);Pi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Pi.getBool("DEBUG"));Pi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Pi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Pi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ND(t,e){let n=t;if(Eo(t))return e==="string"?[]:[t.length];if(Uj(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Gj(t))return[t.buffer.size/(e==null?4:eC(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Eo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&le().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Yj(t,r,[]),r}function Yj(t,e,n){if(n=n||[],!Array.isArray(t)&&!Eo(t)){z(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}z(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),z(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)Yj(t[i],r,n.concat(i))}function c5(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function K(t,e,n,r="numeric"){if(t instanceof Xn)return c5(r,t.dtype,e,n),t;let i=Fv(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),c5(r,i,e,n),t==null||!Eo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const a=ND(t,i);!Eo(t)&&!Array.isArray(t)&&(t=[t]);const s=i!=="string"?Yh(t,i):Dh(t,[],!0);return ee.makeTensor(s,a,i)}function Zj(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,o)=>K(a,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oge="__op";function ae(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Oge;const i=(...a)=>{ee.startScope(n);try{const o=r(...a);return EM(o)&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(o),o}catch(o){throw ee.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fge(t,e){const n=K(t,"real","complex"),r=K(e,"imag","complex");_M(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return ee.runKernel(FM,i)}const _h=ae({complex_:Fge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RD(t,e,n,r){if(r==null)r=Fv(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Gj(t)||Uj(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ee.backend.createTensorFromGPUData(t,e||n,r)}if(!Eo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){al(e);const i=he(e),a=he(n);z(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<n.length;++o){const s=n[o],u=o===n.length-1?s!==he(e.slice(o)):!0;z(n[o]===e[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Eo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Yh(t,r):Dh(t,[],!0),ee.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Em(t,e,n){const r=ND(t,n);return RD(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Lc{static join(e){return new Lc(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Eo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],f=e+s-l.start,h=s,p=Math.min(n,l.end)-l.start,v=new Uint8Array(l.buffer,f,p-f);if(o.set(v,h),s+=v.length,n<l.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Pge(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Pge(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=e(t[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oC=4;async function h5(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const s=i[o],u=Array.isArray(t)?t[o].tensor:t[s];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${u.dtype}`);const l={name:s,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const h=await u.bytes(),d=h.reduce((m,g)=>m+g.length,0)+oC*h.length,p=new Uint8Array(d);let v=0;for(let m=0;m<h.length;m++){const g=h[m],y=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(y,v),v+=oC,p.set(g,v),v+=g.length}f(p)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const a=await Promise.all(r);return{data:zge(a),specs:n}}function Lge(t,e){const n=new Lc(t),r={};let i,a=0;for(const o of e){const s=o.name,u=o.dtype,l=o.shape,c=he(l);let f;if("quantization"in o){const h=o.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error(`Weight ${o.name} with quantization ${h.dtype} doesn't have corresponding metadata min and scale.`)}else if(h.dtype==="float16"){if(u!=="float32")throw new Error(`Weight ${o.name} is quantized with ${h.dtype} which only supports weights of type float32 not ${u}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${h.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const d=f5[h.dtype],p=n.slice(a,a+c*d),v=h.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(u==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){f=new Float32Array(v.length);for(let m=0;m<v.length;m++){const g=v[m];f[m]=g*h.scale+h.min}}else if(h.dtype==="float16")i===void 0&&(i=Yge()),f=i(v);else throw new Error(`Unsupported quantization type ${h.dtype} for weight type float32.`);else if(u==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error(`Unsupported quantization type ${h.dtype} for weight type int32.`);f=new Int32Array(v.length);for(let m=0;m<v.length;m++){const g=v[m];f[m]=Math.round(g*h.scale+h.min)}}else throw new Error(`Unsupported dtype in weight '${s}': ${u}`);a+=c*d}else if(u==="string"){const h=he(o.shape);f=[];for(let d=0;d<h;d++){const p=new Uint32Array(n.slice(a,a+oC))[0];a+=oC;const v=new Uint8Array(n.slice(a,a+p));f.push(v),a+=p}}else{const h=f5[u],d=n.slice(a,a+c*h);if(u==="float32")f=new Float32Array(d);else if(u==="int32")f=new Int32Array(d);else if(u==="bool")f=new Uint8Array(d);else if(u==="complex64"){f=new Float32Array(d);const p=new Float32Array(f.length/2),v=new Float32Array(f.length/2);for(let y=0;y<p.length;y++)p[y]=f[y*2],v[y]=f[y*2+1];const m=Em(p,l,"float32"),g=Em(v,l,"float32");r[s]=_h(m,g),m.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${s}': ${u}`);a+=c*h}u!=="complex64"&&(r[s]=Em(f,l,u))}return r}function zge(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const yO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function d5(t){return yO?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Bge(t){if(yO)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Vge(t){if(yO){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Wge(t){return Lc.join(t)}function Uge(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Gge(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Hge(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),Gge(t,n,r)}function xO(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:d5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:d5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Lc(t.weightData).byteLength}}function jge(t){const e=[];for(const n of t)e.push(...n.weights);return e}function qge(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Xge(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Kge(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Yge(){const t=qge(),e=Xge(),n=Kge();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const s=r[o],u=t[n[s>>10]+(s&1023)]+e[s>>10];a[o]=u}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return pr.instance==null&&(pr.instance=new pr),pr.instance}static registerSaveRouter(e){pr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){pr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return pr.getHandlers(e,"save")}static getLoadHandlers(e,n){return pr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?pr.getInstance().loadRouters:pr.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const Zge=t=>pr.getSaveHandlers(t),Qge=(t,e)=>pr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $I="tensorflowjs",MI=1,Uf="models_store",Ll="model_info_store";function Qj(){if(!le().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function OI(t){const e=t.result;e.createObjectStore(Uf,{keyPath:"modelPath"}),e.createObjectStore(Ll,{keyPath:"modelPath"})}class Th{constructor(e){if(this.indexedDB=Qj(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const a=this.indexedDB.open($I,MI);a.onupgradeneeded=()=>OI(a),a.onsuccess=()=>{const o=a.result;if(n==null){const s=o.transaction(Uf,"readonly"),l=s.objectStore(Uf).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(o.close(),i(l.error)),s.oncomplete=()=>o.close()}else{n.weightData=Lc.join(n.weightData);const s=xO(n),u=o.transaction(Ll,"readwrite");let l=u.objectStore(Ll),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(h){return i(h)}let f;c.onsuccess=()=>{f=o.transaction(Uf,"readwrite");const h=f.objectStore(Uf);let d;try{d=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(p){return i(p)}d.onsuccess=()=>r({modelArtifactsInfo:s}),d.onerror=p=>{l=u.objectStore(Ll);const v=l.delete(this.modelPath);v.onsuccess=()=>(o.close(),i(d.error)),v.onerror=m=>(o.close(),i(d.error))}},c.onerror=h=>(o.close(),i(c.error)),u.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}Th.URL_SCHEME="indexeddb://";const Jj=t=>le().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Th.URL_SCHEME)?Jge(t.slice(Th.URL_SCHEME.length)):null;pr.registerSaveRouter(Jj);pr.registerLoadRouter(Jj);function Jge(t){return new Th(t)}function eme(t){return t.startsWith(Th.URL_SCHEME)?t.slice(Th.URL_SCHEME.length):t}class tme{constructor(){this.indexedDB=Qj()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open($I,MI);r.onupgradeneeded=()=>OI(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(Ll,"readonly"),s=a.objectStore(Ll).getAll();s.onsuccess=()=>{const u={};for(const l of s.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},s.onerror=u=>(i.close(),n(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=eme(e),new Promise((n,r)=>{const i=this.indexedDB.open($I,MI);i.onupgradeneeded=()=>OI(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(Ll,"readwrite"),s=o.objectStore(Ll),u=s.get(e);let l;u.onsuccess=()=>{if(u.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),f=()=>{l=a.transaction(Uf,"readwrite");const d=l.objectStore(Uf).delete(e);d.onsuccess=()=>n(u.result.modelArtifactsInfo),d.onerror=p=>r(u.error)};c.onsuccess=f,c.onerror=h=>(f(),a.close(),r(u.error))}},u.onerror=c=>(a.close(),r(u.error)),o.oncomplete=()=>{l==null?a.close():l.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $u="/",Vd="tensorflowjs_models",eq="info",nme="model_topology",rme="weight_specs",ime="weight_data",ame="model_metadata";function tq(t){return{info:[Vd,t,eq].join($u),topology:[Vd,t,nme].join($u),weightSpecs:[Vd,t,rme].join($u),weightData:[Vd,t,ime].join($u),modelMetadata:[Vd,t,ame].join($u)}}function nq(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function ome(t){const e=t.split($u);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join($u)}function sme(t){return t.startsWith(Eh.URL_SCHEME)?t.slice(Eh.URL_SCHEME.length):t}class Eh{constructor(e){if(!le().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=tq(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=xO(e),a=Lc.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Bge(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw nq(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Vge(o),n}}Eh.URL_SCHEME="localstorage://";const rq=t=>le().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Eh.URL_SCHEME)?ume(t.slice(Eh.URL_SCHEME.length)):null;pr.registerSaveRouter(rq);pr.registerLoadRouter(rq);function ume(t){return new Eh(t)}class lme{constructor(){z(le().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),z(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Vd+$u,r=$u+eq;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(n)&&a.endsWith(r)){const o=ome(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=sme(e);const n=tq(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return nq(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5="://";class Ms{constructor(){this.managers={}}static getInstance(){return Ms.instance==null&&(Ms.instance=new Ms),Ms.instance}static registerManager(e,n){z(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(p5)&&(e=e.slice(0,e.indexOf(p5))),z(e.length>0,()=>"scheme must not be an empty string.");const r=Ms.getInstance();z(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ms.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ms.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cme{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!le().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return $j(e)}}if(le().get("IS_BROWSER")){le().setPlatform("browser",new cme);try{Ms.registerManager(Eh.URL_SCHEME,new lme)}catch{}try{Ms.registerManager(Th.URL_SCHEME,new tme)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme={importFetch:()=>require("node-fetch")};let rE;class hme{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return le().global.fetch!=null?le().global.fetch(e,n):(rE==null&&(rE=fme.importFetch()),rE(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}le().get("IS_NODE")&&!le().get("IS_BROWSER")&&le().setPlatform("node",new hme);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t,e="float32",n){return e=e||"float32",al(t),new Rr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dme(t,e){const n=K(t,"x","cast");if(!Zve(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return ee.runKernel(Dy,r,i)}const Fe=ae({cast_:dme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(t){const n={x:K(t,"x","clone","string_or_numeric")};return ee.runKernel(Py,n)}const th=ae({clone_:pme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vme(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */qj();const gme={buffer:Ct,cast:Fe,clone:th,print:vme};kge(gme);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(){return ee}function FI(){return ee.memory()}function se(t,e){return ee.tidy(t,e)}function mt(t){Hj(t).forEach(n=>n.dispose())}function Js(t){return ee.keep(t)}function iq(t,e,n=1){return ee.registerBackend(t,e,n)}function mme(){return ee.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yme(t,e){let n=K(t,"a","add"),r=K(e,"b","add");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(Lv,i)}const Te=ae({add_:yme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xme(t,e){let n=K(t,"a","floorDiv"),r=K(e,"b","floorDiv");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(Oy,i)}const aq=ae({floorDiv_:xme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wme(t,e){let n=K(t,"a","div"),r=K(e,"b","div");if([n,r]=Ln(n,r),n.dtype==="int32"&&r.dtype==="int32")return aq(n,r);const i={a:n,b:r},a={};return ee.runKernel(ky,i,a)}const Ye=ae({div_:wme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bme(t,e){let n=K(t,"a","mul"),r=K(e,"b","mul");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(jy,i)}const J=ae({mul_:bme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cme(t){const e=K(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ee.runKernel(P2,n)}else{const n={x:e};return ee.runKernel(I2,n)}}const ui=ae({abs_:Cme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sme(t){const n={x:K(t,"x","acos")};return ee.runKernel(my,n)}const Dme=ae({acos_:Sme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t){const n={x:K(t,"x","acosh")};return ee.runKernel(yy,n)}const Tme=ae({acosh_:_me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t,e=null,n=!1){const i={x:K(t,"x","all","bool")},a={axis:e,keepDims:n};return ee.runKernel(IM,i,a)}const oq=ae({all_:Eme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t,e=null,n=!1){const i={x:K(t,"x","any","bool")},a={axis:e,keepDims:n};return ee.runKernel(NM,i,a)}const PI=ae({any_:Ame});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t,e=0){const r={x:K(t,"x","argMax")},i={axis:e};return ee.runKernel(N2,r,i)}const v0=ae({argMax_:kme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t,e=0){const r={x:K(t,"x","argMin")},i={axis:e};return ee.runKernel(R2,r,i)}const Nme=ae({argMin_:Ime});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rme(t){const n={x:K(t,"x","asin")};return ee.runKernel(xy,n)}const $me=ae({asin_:Rme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(t){const n={x:K(t,"x","asinh")};return ee.runKernel(wy,n)}const Ome=ae({asinh_:Mme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fme(t){const n={x:K(t,"x","atan")};return ee.runKernel(by,n)}const Pme=ae({atan_:Fme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lme(t,e){let n=K(t,"a","atan2"),r=K(e,"b","atan2");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(Sy,i)}const zme=ae({atan2_:Lme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bme(t){const n={x:K(t,"x","atanh")};return ee.runKernel(Cy,n)}const Vme=ae({atanh_:Bme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1(t,e,n,r,i="NHWC",a){const o=t[3],s=[...e,o],u=sl(i);return Or(t,s,n,a,r,null,null,u)}function Oo(t,e,n,r,i,a,o="channelsLast"){const[s,u]=g0(e);let l;if(o==="channelsLast")l=[s,u,t[3],t[3]];else if(o==="channelsFirst")l=[s,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Or(t,l,n,r,i,a,!1,o)}function ol(t,e,n,r,i,a,o="NDHWC"){const[s,u,l]=LI(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[s,u,l,t[4],t[4]];else if(o==="NCDHW")f="channelsFirst",c=[s,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return zc(t,c,n,r,i,!1,f,a)}function Or(t,e,n,r,i,a,o=!1,s="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(s==="channelsLast")[u,l,c,f]=t;else if(s==="channelsFirst")[u,f,l,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,d,,p]=e,[v,m]=g0(n),[g,y]=g0(r),x=kp(h,g),w=kp(d,y),{padInfo:b,outHeight:C,outWidth:D}=Gme(i,l,c,v,m,x,w,a,s),S=o?p*f:p;let _;return s==="channelsFirst"?_=[u,S,C,D]:s==="channelsLast"&&(_=[u,C,D,S]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:f,outHeight:C,outWidth:D,outChannels:S,padInfo:b,strideHeight:v,strideWidth:m,filterHeight:h,filterWidth:d,effectiveFilterHeight:x,effectiveFilterWidth:w,dilationHeight:g,dilationWidth:y,inShape:t,outShape:_,filterShape:e}}function zc(t,e,n,r,i,a=!1,o="channelsLast",s){let[u,l,c,f,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f,h]=t;else if(o==="channelsFirst")[u,h,l,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,v,,m]=e,[g,y,x]=LI(n),[w,b,C]=LI(r),D=kp(d,w),S=kp(p,b),_=kp(v,C),{padInfo:T,outDepth:E,outHeight:A,outWidth:N}=Hme(i,l,c,f,g,y,x,D,S,_,s),R=a?m*h:m;let M;return o==="channelsFirst"?M=[u,R,E,A,N]:o==="channelsLast"&&(M=[u,E,A,N,R]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:f,inChannels:h,outDepth:E,outHeight:A,outWidth:N,outChannels:R,padInfo:T,strideDepth:g,strideHeight:y,strideWidth:x,filterDepth:d,filterHeight:p,filterWidth:v,effectiveFilterDepth:D,effectiveFilterHeight:S,effectiveFilterWidth:_,dilationDepth:w,dilationHeight:b,dilationWidth:C,inShape:t,outShape:M,filterShape:e}}function Wme(t,e,n,r,i){r==null&&(r=wO(t,e,n));const a=t[0],o=t[1],s=m0((a-e+2*r)/n+1,i),u=m0((o-e+2*r)/n+1,i);return[s,u]}function Ume(t,e,n,r,i,a){i==null&&(i=wO(t,e[0],r[0]));const o=[0,0,0,n];for(let s=0;s<3;s++)t[s]+2*i>=e[s]&&(o[s]=m0((t[s]-e[s]+2*i)/r[s]+1,a));return o}function wO(t,e,n,r=1){const i=kp(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function g0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function LI(t){return typeof t=="number"?[t,t,t]:t}function kp(t,e){return e<=1?t:t+(t-1)*(e-1)}function Gme(t,e,n,r,i,a,o,s,u){let l,c,f;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const d=Wme([e,n],a,r,t,s);c=d[0],f=d[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/i);const h=Math.max(0,(c-1)*r+a-e),d=Math.max(0,(f-1)*i+o-n),p=Math.floor(h/2),v=h-p,m=Math.floor(d/2),g=d-m;l={top:p,bottom:v,left:m,right:g,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),f=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const h=u==="channelsLast"?t[1][0]:t[2][0],d=u==="channelsLast"?t[1][1]:t[2][1],p=u==="channelsLast"?t[2][0]:t[3][0],v=u==="channelsLast"?t[2][1]:t[3][1];l={top:h,bottom:d,left:p,right:v,type:h===0&&d===0&&p===0&&v===0?"VALID":"EXPLICIT"},c=m0((e-a+h+d)/r+1,s),f=m0((n-o+p+v)/i+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:f}}function Hme(t,e,n,r,i,a,o,s,u,l,c){let f,h,d,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=Ume([e,n,r,1],[s,u,l],1,[i,a,o],t,c);h=m[0],d=m[1],p=m[2]}else if(t==="same"){h=Math.ceil(e/i),d=Math.ceil(n/a),p=Math.ceil(r/o);const v=(h-1)*i+s-e,m=(d-1)*a+u-n,g=(p-1)*o+l-r,y=Math.floor(v/2),x=v-y,w=Math.floor(m/2),b=m-w,C=Math.floor(g/2),D=g-C;f={top:w,bottom:b,left:C,right:D,front:y,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}function m0(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ah(t){const[e,n,r]=g0(t);return e===1&&n===1&&r===1}function Qr(t,e){return Ah(t)||Ah(e)}function kh(t){return g0(t).every(e=>e>0)}function sl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Wi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")z(ev(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{z(ev(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t,e){const r={x:K(t,"x","reshape","string_or_numeric")},i={shape:e};return ee.runKernel(mD,r,i)}const ie=ae({reshape_:jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t,e,n,r,i){const a=K(t,"x","avgPool","float32"),o=1;z(Qr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=a,u=!1;a.rank===3&&(u=!0,s=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),z(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),Wi("avgPool",r,i);const l={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let f=ee.runKernel($2,l,c);return f=Fe(f,a.dtype),u?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const bO=ae({avgPool_:qme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(t,e,n,r,i,a="NDHWC"){const o=K(t,"x","avgPool3d","float32");let s=o,u=!1;o.rank===4&&(u=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),z(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),z(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),z(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Wi("avgPool3d",r,i);const l={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let f=ee.runKernel(M2,l,c);return f=Fe(f,s.dtype),u?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Kme=ae({avgPool3d_:Xme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(t,e=0){z(t.length>=1,()=>"Pass at least one tensor to concat");const n=Zj(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return th(n[0]);const r=n,i={axis:e};return ee.runKernel(L2,r,i)}const Oi=ae({concat_:Yme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zme(t,e,n=!1,r=!1){let i=K(t,"a","matMul"),a=K(e,"b","matMul");[i,a]=Ln(i,a);const o={a:i,b:a},s={transposeA:n,transposeB:r};return ee.runKernel(O2,o,s)}const Lt=ae({matMul_:Zme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const n={x:K(t,"x","sigmoid","float32")};return ee.runKernel(r1,n)}const zv=ae({sigmoid_:Qme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t,e,n){const r=K(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:n};return ee.runKernel(CD,i,a)}const rn=ae({slice_:Jme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0e(t){const n={x:K(t,"x","tanh","float32")};return ee.runKernel(l1,n)}const CO=ae({tanh_:e0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t0e(t,e,n){const r=K(t,"x","batchToSpaceND"),i=e.reduce((s,u)=>s*u);z(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),z(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),z(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:n};return ee.runKernel(F2,a,o)}const SO=ae({batchToSpaceND_:t0e});function n0e(t){let e;return t.rank===0||t.rank===1?e=ie(t,[1,1,1,t.size]):t.rank===2?e=ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0e(t,e,n,r,i,a){a==null&&(a=.001);const o=K(t,"x","batchNorm"),s=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;i!=null&&(l=K(i,"scale","batchNorm"));let c;r!=null&&(c=K(r,"offset","batchNorm")),z(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),z(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),z(l==null||s.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:n0e(o),scale:l,offset:c,mean:s,variance:u},d={varianceEpsilon:a},p=ee.runKernel(q2,h,d);return ie(p,o.shape)}const $D=ae({batchNorm_:r0e});function i0e(t,e,n,r,i,a){const o=K(t,"x","batchNorm"),s=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;i!=null&&(l=K(i,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),z(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),z(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),z(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&z(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&z(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),$D(o,s,u,c,l,a)}const a0e=ae({batchNorm2d_:i0e});function o0e(t,e,n,r,i,a){const o=K(t,"x","batchNorm"),s=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;i!=null&&(l=K(i,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),z(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),z(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),z(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&z(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&z(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),$D(o,s,u,c,l,a)}const s0e=ae({batchNorm3d_:o0e});function u0e(t,e,n,r,i,a){const o=K(t,"x","batchNorm"),s=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;i!=null&&(l=K(i,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),z(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),z(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),z(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&z(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&z(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),$D(o,s,u,c,l,a)}const l0e=ae({batchNorm4d_:u0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0e(t,e,n){const r=K(t,"x","bincount"),i=K(e,"weights","bincount");z(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),z(n>=0,()=>`size must be non-negative, but got ${n}.`),z(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:n};return ee.runKernel(MM,a,o)}const f0e=ae({bincount_:c0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0e(t,e){let n=K(t,"broadcastTo","x");const r=n.shape;if(al(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=ie(n,l)}const i=n.shape,a=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])a[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return th(n);const s={x:n},u={reps:a};return ee.runKernel(c1,s,u)}const Am=ae({broadcastTo_:h0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0e(t){const n={x:K(t,"x","ceil","float32")};return ee.runKernel(_y,n)}const p0e=ae({ceil_:d0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MD(t,e,n){al(t),n=n||Fv(e);const r={shape:t,value:e,dtype:n};return ee.runKernel(KM,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(t,e,n){const r=K(t,"x","clipByValue");if(z(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return MD(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:n};return ee.runKernel(Ty,i,a)}const La=ae({clipByValue_:v0e});function g0e(t){return Oi(t,0)}const m0e=ae({concat1d_:g0e});function y0e(t,e){return Oi(t,e)}const x0e=ae({concat2d_:y0e});function w0e(t,e){return Oi(t,e)}const b0e=ae({concat3d_:w0e});function C0e(t,e){return Oi(t,e)}const S0e=ae({concat4d_:C0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0e(t,e,n,r,i="NHWC",a=[1,1],o){const s=K(t,"x","conv2d","float32"),u=K(e,"filter","conv2d","float32");let l=s,c=!1;s.rank===3&&(c=!0,l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),z(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),z(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Wi("conv2d",r,o);const f=i==="NHWC"?l.shape[3]:l.shape[1];z(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),z(Qr(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),z(kh(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),z(kh(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:l,filter:u},d={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=ee.runKernel(z2,h,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ih=ae({conv2d_:D0e});function _0e(t,e,n,r,i="NWC",a=1,o){const s=K(t,"x","conv1d"),u=K(e,"filter","conv1d");let l=s,c=!1;s.rank===2&&(c=!0,l=ie(s,[1,s.shape[0],s.shape[1]])),z(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),z(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Wi("conv1d",r,o),z(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),z(Qr(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),z(kh(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),z(kh(n),()=>"Error in conv1D: Stride should be larger than 0."),z(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=ie(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=ie(l,[l.shape[0],1,l.shape[1],l.shape[2]]),m=Ih(h,f,[1,n],r,"NHWC",[1,a],o);return c?ie(m,[m.shape[2],m.shape[3]]):ie(m,[m.shape[0],m.shape[2],m.shape[3]])}const sq=ae({conv1d_:_0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t,e,n,r,i,a="NHWC",o){z(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,u=e,l=!1;e.rank===3&&(l=!0,u=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),z(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),z(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),z(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];z(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),z(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Wi("conv2dDerInput",i,o);const h={dy:u,filter:n},d={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},p=ee.runKernel(B2,h,d);return l?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const DO=ae({conv2DBackpropInput_:T0e});function E0e(t,e,n,r,i,a){const o=K(t,"x","conv2dTranspose"),s=K(e,"filter","conv2dTranspose");return DO(n,o,s,r,i,"NHWC",a)}const uq=ae({conv2dTranspose_:E0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0e(t,e,n,r,i="NDHWC",a=[1,1,1]){const o=K(t,"x","conv3d"),s=K(e,"filter","conv3d");let u=o,l=!1;o.rank===4&&(l=!0,u=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),z(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),z(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),z(u.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${s.shape[3]}.`),z(Qr(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),z(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),z(kh(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),z(kh(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:s},f={strides:n,pad:r,dataFormat:i,dilations:a},h=ee.runKernel(V2,c,f);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const k0e=ae({conv3d_:A0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t,e,n,r,i){z(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,o=e,s=!1;e.rank===4&&(s=!0,o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const u=a[4],l=o.shape[4];z(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),z(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),z(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),z(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),z(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},f={pad:i,strides:r,inputShape:a},h=ee.runKernel(zM,c,f);return s?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const lq=ae({conv3DBackpropInput_:I0e});function N0e(t,e,n,r,i){const a=K(t,"x","conv3dTranspose"),o=K(e,"filter","conv3dTranspose");return lq(n,a,o,r,i)}const R0e=ae({conv3dTranspose_:N0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0e(t){const n={x:K(t,"x","cos","float32")};return ee.runKernel(Ey,n)}const _O=ae({cos_:$0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t){const n={x:K(t,"x","cosh","float32")};return ee.runKernel(Ay,n)}const cq=ae({cosh_:M0e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0e(t,e=0,n=!1,r=!1){const a={x:K(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return ee.runKernel(BM,a,o)}const zI=ae({cumprod_:O0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(t,e=0,n=!1,r=!1){const a={x:K(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return ee.runKernel(W2,a,o)}const fq=ae({cumsum_:F0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(t,e,n,r=!1){const i=K(t,"x","denseBincount"),a=K(e,"weights","denseBincount");z(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),z(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),z(n>=0,()=>`size must be non-negative, but got ${n}.`),z(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:n,binaryOutput:r};return ee.runKernel(WM,o,s)}const v5=ae({denseBincount_:P0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(t,e,n="NHWC"){const r=K(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];z(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),z(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),z(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),z(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},u={blockSize:e,dataFormat:n};return ee.runKernel(UM,s,u)}const z0e=ae({depthToSpace_:L0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t,e,n,r,i="NHWC",a=[1,1],o){const s=K(t,"x","depthwiseConv2d","float32"),u=K(e,"filter","depthwiseConv2d","float32");let l=s,c=!1;s.rank===3&&(c=!0,l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),z(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),z(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=i==="NHWC"?l.shape[3]:l.shape[1];z(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),Wi("depthwiseConv2d",r,o);const h={x:l,filter:u},d={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=ee.runKernel(U2,h,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const TO=ae({depthwiseConv2d_:B0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0e(t,e,n,r,i=[1,1],a="NHWC"){const o=K(t,"x","dilation2d"),s=K(e,"filter","dilation2d");z(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),z(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),z(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let u=o,l=!1;o.rank===3&&(u=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),z(u.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${s.shape[2]}`);const c={x:u,filter:s},f={strides:n,pad:r,dilations:i},h=ee.runKernel(G2,c,f);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const W0e=ae({dilation2d_:V0e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rv(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function fr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function ht(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let a=t[t.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=a;else if(a!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else r[n-i-1]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0e(t,e){let n=K(t,"a","equal","string_or_numeric"),r=K(e,"b","equal","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(H2,i)}const su=ae({equal_:U0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0e(t,e,n){const r=K(e,"a","where"),i=K(n,"b","where"),a=K(t,"condition","where","bool"),o=ht(ht(a.shape,r.shape),i.shape),s=Am(a,o),u=Am(r,o),l=Am(i,o),c={condition:s,t:u,e:l};return ee.runKernel(bD,c)}const vi=ae({where_:G0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H0e(t){const n={x:K(t,"x","zerosLike")};return ee.runKernel(kD,n)}const Nt=ae({zerosLike_:H0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0e(t,e){let n=K(t,"a","div"),r=K(e,"b","div");[n,r]=Ln(n,r);const i=Ye(n,r),a=Nt(i),o=su(r,a);return vi(o,a,i)}const q0e=ae({divNoNan_:j0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X0e(t,e){const n=K(t,"t1","dot"),r=K(e,"t2","dot");z((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(z(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){const o=ie(n,[1,-1]),s=ie(r,[-1,1]),u=Lt(o,s);return ie(u,[])}else if(n.rank===1&&r.rank===2){const o=ie(n,[1,-1]),s=ie(r,[r.shape[0],r.shape[1]]),u=Lt(o,s);return ie(u,[u.size])}else if(n.rank===2&&r.rank===1){const o=ie(r,[-1,1]),s=Lt(n,o);return ie(s,[s.size])}else{const o=ie(r,[r.shape[0],r.shape[1]]);return Lt(n,o)}}const K0e=ae({dot_:X0e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0e(t,...e){const n=e.map((i,a)=>K(i,`tensors${a}`,"einsum")),r={equation:t};return ee.runKernel(jM,n,r)}const wg=ae({einsum_:Y0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(t){const n={x:K(t,"x","elu","float32")};return ee.runKernel(Iy,n)}const OD=ae({elu_:Z0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t){let e=K(t,"x","erf");z(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Fe(e,"float32"));const n={x:e};return ee.runKernel(Ny,n)}const J0e=ae({erf_:Q0e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function hq(t,e,n){const r=t.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function _r(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const i=e.map(a=>t[a]);return[n,i]}function Zn(t,e){const n=e.map(r=>1);return hq(t,n,e)}function Fr(t,e,n){z(EO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Dn(t,e){if(EO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Bc(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Bn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t,e=null,n=!1){const i={x:K(t,"x","max")},a={reductionIndices:e,keepDims:n};return ee.runKernel(rD,i,a)}const cs=ae({max_:eye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t,e=null,n=!1){const i={x:K(t,"x","min")},a={axis:e,keepDims:n};return ee.runKernel(sD,i,a)}const sC=ae({min_:tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t,e){let n=K(t,"base","pow"),r=K(e,"exp","pow");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(qy,i)}const iv=ae({pow_:nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bt(t,e){if((Eo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Eo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return RD(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const n={x:K(t,"x","sqrt","float32")};return ee.runKernel(a1,n)}const yi=ae({sqrt_:rye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t){const e=K(t,"x","square"),n={};return ee.runKernel("Square",{x:e},n)}const ln=ae({square_:iye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aye(t,e=null,n=!1){let r=K(t,"x","sum");r.dtype==="bool"&&(r=Fe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ee.runKernel(SD,i,a)}const qe=ae({sum_:aye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(t,e="euclidean",n=null,r=!1){t=K(t,"x","norm");const i=dq(t,e,n);let a=i.shape;if(r){const o=St(n,t.shape);a=Zn(i.shape,o)}return ie(i,a)}function dq(t,e,n=null){if(t.rank===0)return ui(t);if(t.rank!==1&&n===null)return dq(ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return qe(ui(t),n);if(e===1/0)return cs(ui(t),n);if(e===-1/0)return sC(ui(t),n);if(e==="euclidean"||e===2)return yi(qe(iv(ui(t),Bt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return cs(qe(ui(t),n[0]),n[1]-1);if(e===1/0)return cs(qe(ui(t),n[1]),n[0]);if(e===-1/0)return sC(qe(ui(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return yi(qe(ln(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const FD=ae({norm_:oye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sye(t,e=null,n=!1){return FD(t,"euclidean",e,n)}const uye=ae({euclideanNorm_:sye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(t){const n={x:K(t,"x","exp")};return ee.runKernel(Ry,n)}const Zu=ae({exp_:lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t,e=0){const n=K(t,"x","expandDims","string_or_numeric");z(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return ee.runKernel(j2,r,i)}const Ni=ae({expandDims_:cye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t){const n={x:K(t,"x","expm1")};return ee.runKernel($y,n)}const hye=ae({expm1_:fye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t,e){const n=K(t,"x","tile","string_or_numeric");z(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return ee.runKernel(c1,r,i)}const is=ae({tile_:dye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t,e,n,r="float32"){e==null&&(e=t);const i=Ct([t,e],r),a=t<=e?t:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=ie(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return is(Ni(o,0),[n[0],1,1]);if(n.length===2)return is(Ni(Ni(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return is(Ni(Ni(Ni(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const pq=ae({eye_:pye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t){const n={x:K(t,"x","floor","float32")};return ee.runKernel(My,n)}const PD=ae({floor_:vye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t,e,n=0,r=0){const i=K(t,"x","gather"),a=K(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:n,batchDims:r};return ee.runKernel(X2,o,s)}const AO=ae({gather_:gye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t,e){let n=K(t,"a","greater","string_or_numeric"),r=K(e,"b","greater","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(K2,i)}const Ha=ae({greater_:mye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t,e){let n=K(t,"a","greaterEqual","string_or_numeric"),r=K(e,"b","greaterEqual","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(Fy,i)}const Zh=ae({greaterEqual_:yye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(t){const n={input:K(t,"input","imag")};return ee.runKernel(QM,n)}const kO=ae({imag_:xye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(t){const n={x:K(t,"x","isFinite")};return ee.runKernel(Ly,n)}const bye=ae({isFinite_:wye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t){const n={x:K(t,"x","isInf")};return ee.runKernel(zy,n)}const Sye=ae({isInf_:Cye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t){const n={x:K(t,"x","isNaN")};return ee.runKernel(By,n)}const _ye=ae({isNaN_:Dye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e=.2){const r={x:K(t,"x","leakyRelu")},i={alpha:e};return ee.runKernel(Y2,r,i)}const IO=ae({leakyRelu_:Tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t,e){let n=K(t,"a","less","string_or_numeric"),r=K(e,"b","less","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(Z2,i)}const uC=ae({less_:Eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t,e){let n=K(t,"a","lessEqual","string_or_numeric"),r=K(e,"b","lessEqual","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(Q2,i)}const Bv=ae({lessEqual_:Aye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t,e=5,n=1,r=1,i=.5){const a=K(t,"x","localResponseNormalization");z(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),z(ev(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const u={x:o},l={depthRadius:e,bias:n,alpha:r,beta:i},c=ee.runKernel(nD,u,l);return s?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Iye=ae({localResponseNormalization_:kye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t){const n={x:K(t,"x","log","float32")};return ee.runKernel(Vy,n)}const uu=ae({log_:Nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){const n={x:K(t,"x","log1p")};return ee.runKernel(Wy,n)}const vq=ae({log1p_:Rye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(t,e){z(CI(t),()=>"The f passed in variableGrads(f) must be a function"),z(e==null||Array.isArray(e)&&e.every(l=>l instanceof aC),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in ee.registeredVariables)e.push(ee.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,i=e.length;e=e.filter(l=>l.trainable),z(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=ee.gradients(t,e,null,a);z(s.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),z(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const u={};return e.forEach((l,c)=>{s[c]!=null&&(u[l.name]=s[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:o,grads:u}}function av(t){return ee.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t){const n={x:K(t,"x","neg")};return ee.runKernel(lD,n)}const Fn=ae({neg_:Mye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t){const n={x:K(t,"x","softplus")};return ee.runKernel(i1,n)}const d1=ae({softplus_:Oye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t){const e=K(t,"x","logSigmoid");return av(r=>({value:Fn(d1(Fn(r))),gradFunc:o=>J(o,zv(Fn(r)))}))(e)}const Pye=ae({logSigmoid_:Fye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lye(t,e){let n=K(t,"a","sub"),r=K(e,"b","sub");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(s1,i)}const nt=ae({sub_:Lye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t,e=-1){const n=K(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return av((i,a)=>{const s=cs(i,e,!0),u=nt(i,s),l=nt(Fe(u,"float32"),uu(qe(Zu(u),e,!0)));return a([l]),{value:l,gradFunc:(f,h)=>{const[d]=h,p=!0,v=Zu(d);return nt(f,J(qe(f,e,p),v))}}})(n)}const gq=ae({logSoftmax_:zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t,e=null,n=!1){const r=K(t,"x","logSumExp"),i=St(e,r.shape),a=cs(r,i,!0),o=nt(r,a),s=Zu(o),u=qe(s,i),l=uu(u),c=Te(ie(a,l.shape),l);if(n){const f=Zn(c.shape,i);return ie(c,f)}return c}const Vye=ae({logSumExp_:Bye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t,e){const n=K(t,"a","logicalAnd","bool"),r=K(e,"b","logicalAnd","bool");ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(J2,i)}const Qu=ae({logicalAnd_:Wye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t){const n={x:K(t,"x","logicalNot","bool")};return ee.runKernel(eD,n)}const NO=ae({logicalNot_:Uye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t,e){const n=K(t,"a","logicalOr","bool"),r=K(e,"b","logicalOr","bool");ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(tD,i)}const mq=ae({logicalOr_:Gye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t,e){const n=K(t,"a","logicalXor","bool"),r=K(e,"b","logicalXor","bool");return ht(n.shape,r.shape),Qu(mq(t,e),NO(Qu(t,e)))}const jye=ae({logicalXor_:Hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t,e,n,r,i){const a=K(t,"x","maxPool"),o=1;let s=a,u=!1;a.rank===3&&(u=!0,s=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),z(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),z(Qr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Wi("maxPool",r,i);const l={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i},f=ee.runKernel(iD,l,c);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const RO=ae({maxPool_:qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t,e=[1,1,1],n,r,i,a="NDHWC"){const o=K(t,"x","maxPool3d");let s=o,u=!1;o.rank===4&&(u=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),z(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),z(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Wi("maxPool3d",r,i);const l={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},f=ee.runKernel(aD,l,c);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Kye=ae({maxPool3d_:Xye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t,e){let n=K(t,"a","maximum"),r=K(e,"b","maximum");[n,r]=Ln(n,r),n.dtype==="bool"&&(n=Fe(n,"int32"),r=Fe(r,"int32")),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(Uy,i)}const Vc=ae({maximum_:Yye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t,e=null,n=!1){const i={x:K(t,"x","mean")},a={axis:e,keepDims:n};return ee.runKernel(oD,i,a)}const Kn=ae({mean_:Zye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(t,e="float32"){if(al(t),e==="complex64"){const r=xr(t,"float32"),i=xr(t,"float32");return _h(r,i)}const n=Yr(he(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(t,e="float32"){if(al(t),e==="complex64"){const r=Qh(t,"float32"),i=xr(t,"float32");return _h(r,i)}const n=TM(he(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t,e){let n=K(t,"a","minimum"),r=K(e,"b","minimum");[n,r]=Ln(n,r),n.dtype==="bool"&&(n=Fe(n,"int32"),r=Fe(r,"int32")),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(Gy,i)}const y0=ae({minimum_:Qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(t,e,n){z(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=K(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");z(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)z(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),z(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},o={x:r};return ee.runKernel(uD,o,a)}const e1e=ae({mirrorPad_:Jye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(t,e){let n=K(t,"a","mod"),r=K(e,"b","mod");[n,r]=Ln(n,r);const i={a:n,b:r};return ee.runKernel(Hy,i)}const n1e=ae({mod_:t1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(t,e=null,n=!1){t=K(t,"x","moments");const r=St(e,t.shape),i=Kn(t,r,n);let a=i.shape;n||(a=Zn(i.shape,r));const o=ln(nt(Fe(t,"float32"),ie(i,a))),s=Kn(o,r,n);return{mean:i,variance:s}}const $O=ae({moments_:r1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(t,e){let n=K(t,"a","notEqual","string_or_numeric"),r=K(e,"b","notEqual","string_or_numeric");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(cD,i)}const lC=ae({notEqual_:i1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:K(t,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:n,offValue:r};return ee.runKernel(hD,o,s)}const yq=ae({oneHot_:a1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1e(t){const n={x:K(t,"x","onesLike")};return ee.runKernel(fD,n)}const Ao=ae({onesLike_:o1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(t,e,n=0){const r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},a={x:r};return ee.runKernel(pD,a,i)}const MO=ae({pad_:s1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1e(t,e,n){const r=K(t,"x","spaceToBatchND");z(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),z(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),z(r.shape.reduce((o,s,u)=>u>0&&u<=e.length?o&&(s+n[u-1][0]+n[u-1][1])%e[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:n};return ee.runKernel(DD,i,a)}const OO=ae({spaceToBatchND_:u1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t,e,n,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=K(t,"x","maxPool");let u=s,l=!1;s.rank===3&&(l=!0,u=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),z(Qr(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const c=Oo(u.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=f1e([c.filterHeight,c.filterWidth],f):h=[[0,0],[0,0]];const d=f[0]===1&&f[1]===1,[p,v]=c1e([c.inHeight,c.inWidth],f,h),m=d?r:"valid",g=d?u:OO(u,f,p),x=(n==="avg"?()=>bO(g,e,a,m,o):()=>RO(g,e,a,m,o))(),w=d?x:SO(x,f,v);return l?ie(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function c1e(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),a=t.concat(r,i),o=e.map((c,f)=>(c-a[f]%c)%c),s=i.map((c,f)=>c+o[f]),u=e.map((c,f)=>[r[f],s[f]]),l=e.map((c,f)=>[0,o[f]]);return[u,l]}function f1e(t,e){const r=t.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const h1e=ae({pool_:l1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1e(t,e){const n=K(t,"x","prelu"),r=K(e,"alpha","prelu"),i={x:n,alpha:r};return ee.runKernel(vD,i)}const FO=ae({prelu_:d1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1e(t,e=null,n=!1){let r=K(t,"x","prod");r.dtype==="bool"&&(r=Fe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ee.runKernel(gD,i,a)}const v1e=ae({prod_:p1e});var PO={exports:{}};PO.exports;(function(t){(function(e,n,r){function i(u){var l=this,c=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function s(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(bo,t,!1)})(PO);var g1e=PO.exports,LO={exports:{}};LO.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(bo,t,!1)})(LO);var m1e=LO.exports,zO={exports:{}};zO.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(bo,t,!1)})(zO);var y1e=zO.exports,BO={exports:{}};BO.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.x,f=u.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,u.i=f+1&7,d};function l(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(bo,t,!1)})(BO);var x1e=BO.exports,VO={exports:{}};VO.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.w,f=u.X,h=u.i,d,p;return u.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,u.i=h,p+(c^c>>>16)|0};function l(c,f){var h,d,p,v,m,g=[],y=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,y=Math.max(y,f.length)),p=0,v=-32;v<y;++v)f&&(d^=f.charCodeAt((v+32)%f.length)),v===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,v>=0&&(m=m+1640531527|0,h=g[v&127]^=d+m,p=h==0?p+1:0);for(p>=128&&(g[(f&&f.length||0)&127]=-1),p=127,v=4*128;v>0;--v)d=g[p+34&127],h=g[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,g[p]=d^h;c.w=m,c.X=g,c.i=p}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(bo,t,!1)})(VO);var w1e=VO.exports,WO={exports:{}};WO.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,p=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(bo,t,!1)})(WO);var b1e=WO.exports,xq={exports:{}};const C1e={},S1e=Object.freeze(Object.defineProperty({__proto__:null,default:C1e},Symbol.toStringTag,{value:"Module"})),D1e=fG(S1e);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),c=l*2,f=i-1,h;function d(w,b,C){var D=[];b=b==!0?{entropy:!0}:b||{};var S=g(m(b.entropy?[w,x(n)]:w??y(),3),D),_=new p(D),T=function(){for(var E=_.g(a),A=u,N=0;E<l;)E=(E+N)*i,A*=i,N=_.g(1);for(;E>=c;)E/=2,A/=2,N>>>=1;return(E+N)/A};return T.int32=function(){return _.g(4)|0},T.quick=function(){return _.g(4)/4294967296},T.double=T,g(x(_.S),n),(b.pass||C||function(E,A,N,R){return R&&(R.S&&v(R,_),E.state=function(){return v(_,{})}),N?(r[s]=E,A):E})(T,S,"global"in b?b.global:this==r,b.state)}function p(w){var b,C=w.length,D=this,S=0,_=D.i=D.j=0,T=D.S=[];for(C||(w=[C++]);S<i;)T[S]=S++;for(S=0;S<i;S++)T[S]=T[_=f&_+w[S%C]+(b=T[S])],T[_]=b;(D.g=function(E){for(var A,N=0,R=D.i,M=D.j,$=D.S;E--;)A=$[R=f&R+1],N=N*i+$[f&($[R]=$[M=f&M+A])+($[M]=A)];return D.i=R,D.j=M,N})(i)}function v(w,b){return b.i=w.i,b.j=w.j,b.S=w.S.slice(),b}function m(w,b){var C=[],D=typeof w,S;if(b&&D=="object")for(S in w)try{C.push(m(w[S],b-1))}catch{}return C.length?C:D=="string"?w:w+"\0"}function g(w,b){for(var C=w+"",D,S=0;S<C.length;)b[f&S]=f&(D^=b[f&S]*19)+C.charCodeAt(S++);return x(b)}function y(){try{var w;return h&&(w=h.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),x(w)}catch{var b=e.navigator,C=b&&b.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(w){return String.fromCharCode.apply(0,w)}if(g(r.random(),n),t.exports){t.exports=d;try{h=D1e}catch{}}else r["seed"+s]=d})(typeof self<"u"?self:bo,[],Math)})(xq);var _1e=xq.exports,T1e=g1e,E1e=m1e,A1e=y1e,k1e=x1e,I1e=w1e,N1e=b1e,Jh=_1e;Jh.alea=T1e;Jh.xor128=E1e;Jh.xorwow=A1e;Jh.xorshift7=k1e;Jh.xor4096=I1e;Jh.tychei=N1e;var UO=Jh;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wq{constructor(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=UO.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class R1e{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=UO.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(t,e=0,n=1,r,i){if(al(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new wq(e,n,r,!1,i),o=Ct(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const M1e=ae({randomNormal_:$1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(t,e=0,n=1,r="float32",i){al(t);const a=Ct(t,r),o=new R1e(e,n,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const p1=ae({randomUniform_:O1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return ee.runKernel(aO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1e(t){const n={input:K(t,"input","real")};return ee.runKernel(oO,n)}const cC=ae({real_:F1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t){const n={x:K(t,"x","reciprocal")};return ee.runKernel(Xy,n)}const L1e=ae({reciprocal_:P1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(t){const n={x:K(t,"x","relu")};return ee.runKernel(Ky,n)}const ed=ae({relu_:z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(t){const n={x:K(t,"x","relu6")};return ee.runKernel(Yy,n)}const bq=ae({relu6_:B1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(t,e){const r={x:K(t,"x","reverse")},i={dims:e};return ee.runKernel(wD,r,i)}const Nh=ae({reverse_:V1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(t){const n={x:K(t,"x","round")};return ee.runKernel(Zy,n)}const Cq=ae({round_:W1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(t){const n={x:K(t,"x","rsqrt","float32")};return ee.runKernel(Qy,n)}const Sq=ae({rsqrt_:U1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1e(t){const n={x:K(t,"x","selu")};return ee.runKernel(Jy,n)}const Dq=ae({selu_:G1e});function H1e(t,e,n,r,i,a=[1,1],o="NHWC"){const s=K(t,"x","separableConv2d"),u=K(e,"depthwiseFilter","separableConv2d"),l=K(n,"pointwiseFilter","separableConv2d");let c=s,f=!1;if(s.rank===3&&(f=!0,c=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");z(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),z(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),z(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),z(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),z(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const h=u.shape[2],d=u.shape[3];z(l.shape[2]===h*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*d}, but got ${l.shape[2]}.`);const p=TO(c,u,r,i,o,a),m=Ih(p,l,1,"valid",o);return f?ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const _q=ae({separableConv2d_:H1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(t){const n={x:K(t,"x","sign")};return ee.runKernel(n1,n)}const q1e=ae({sign_:j1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t){const n={x:K(t,"x","sin","float32")};return ee.runKernel(e1,n)}const Tq=ae({sin_:X1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(t){const n={x:K(t,"x","sinh")};return ee.runKernel(t1,n)}const Eq=ae({sinh_:K1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e,n){const r=K(t,"x","slice1d");return z(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),rn(r,[e],[n])}const GO=ae({slice1d_:Y1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t,e,n){const r=K(t,"x","slice2d");return z(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),rn(r,e,n)}const Aq=ae({slice2d_:Z1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t,e,n){const r=K(t,"x","slice3d");return z(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),rn(r,e,n)}const HO=ae({slice3d_:Q1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(t,e,n){const r=K(t,"x","slice4d");return z(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),rn(r,e,n)}const fC=ae({slice4d_:J1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(t,e=-1){const n=K(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return ee.runKernel(TD,r,i)}const jO=ae({softmax_:exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t){z(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(XM,e)}const kq=ae({fft_:txe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t){z(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(ZM,e)}const BI=ae({ifft_:nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ie(t,[n,e]);r=BI(i)}else{const i=[n,2*(e-1)],a=ie(cC(t),[n,e]),o=ie(kO(t),[n,e]),s=Nh(rn(a,[0,1],[n,e-2]),1),u=J(Nh(rn(o,[0,1],[n,e-2]),1),Bt(-1)),l=Oi([a,s],1),c=Oi([o,u],1),f=ie(_h(l,c),[i[0],i[1]]);r=BI(f)}if(r=cC(r),t.rank===3&&t.shape[0]!==0){const i=r,a=t.shape[0];r=ie(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const ixe=ae({irfft_:rxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(t,e,n=0){const i={x:K(t,"x","split")},a={numOrSizeSplits:e,axis:n};return ee.runKernel(_D,i,a)}const Ia=ae({split_:axe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t,e){z(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(m=>0),v=t.shape.map(m=>m);v[t.shape.length-1]=e,i=rn(t,p,v),n=e}else if(e!=null&&e>n){const p=t.shape.map(v=>v);p[t.shape.length-1]=e-n,i=Oi([t,xr(p)],t.shape.length-1),n=e}else i=t;const a=Nt(i),o=ie(_h(i,a),[r,n]),s=kq(o),u=Math.floor(n/2)+1,l=cC(s),c=kO(s),f=Ia(l,[u,n-u],l.shape.length-1),h=Ia(c,[u,n-u],c.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=u,ie(_h(f[0],h[0]),d)}const sxe=ae({rfft_:oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e){let n=K(t,"a","squaredDifference"),r=K(e,"b","squaredDifference");[n,r]=Ln(n,r),ht(n.shape,r.shape);const i={a:n,b:r},a={};return ee.runKernel(o1,i,a)}const lxe=ae({squaredDifference_:uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t,e){const n=K(t,"x","squeeze","string_or_numeric");return ie(n,Fc(n.shape,e).newShape)}const v1=ae({squeeze_:cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(t,e=0){const n=Zj(t,"tensors","stack","string_or_numeric");z(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&z(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return ee.runKernel(dD,r,i)}const xc=ae({stack_:fxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(t,e=0){const r={x:K(t,"x","step")},i={alpha:e};return ee.runKernel(f1,r,i)}const g1=ae({step_:hxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t,e,n,r,i=0,a=0,o=0,s=0,u=0){const c={x:K(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return ee.runKernel(fO,c,f)}const pxe=ae({stridedSlice_:dxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t){const n={x:K(t,"x","tan","float32")};return ee.runKernel(u1,n)}const gxe=ae({tan_:vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ia(t,e){rj(t);const n=ND(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return RD(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(t,e,n){if(rj(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ND(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return RD(t,e,r,n)}function Iq(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(a+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function mxe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Iq(n,e,t)}function td(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length;let o=1;for(let f=i;f<a;++f)o*=n[f];const s=i<1?1:i,u=he(e.shape)/s,l=[...He(n.slice(0,i)),1],c=he(n);return{sliceRank:i,numUpdates:u,sliceSize:o,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yxe(t,e=1,n=!0){const r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:n},[s,u]=ee.runKernel(hO,a,o);return{values:s,indices:u}}const xxe=ae({topk_:yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t,e=0,n=1,r,i){if(al(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new wq(e,n,r,!0,i),o=Ct(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Nq=ae({truncatedNormal_:wxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e=0){const n=K(t,"x","unique","string_or_numeric");z(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[a,o]=ee.runKernel(pO,r,i);return{values:a,indices:o}}const Cxe=ae({unique_:bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t,e,n){const r=K(t,"x","unsortedSegmentSum"),i=K(e,"segmentIds","unsortedSegmentSum","int32");z(ev(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:n};return ee.runKernel(AD,a,o)}const Rq=ae({unsortedSegmentSum_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(t,e=0){const n=K(t,"x","unstack","string_or_numeric");z(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return ee.runKernel(ED,r,i)}const Rh=ae({unstack_:Dxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t,e=!0,n,r){return ee.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $q(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=Ct(t,"int32"),i=Ct([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const o=r.indexToLoc(n[a]),s=a*t.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(t,e,n){const r=K(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),z(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{z(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?se(()=>{let o=cC(r),s=kO(r);return o=ee.runKernel(Ap,{x:o},a),s=ee.runKernel(Ap,{x:s},a),n&&(s=Fn(s)),_h(o,s)}):ee.runKernel(Ap,i,a)}const It=ae({transpose_:Txe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t,e){if(e==null)return t.shape.slice();if(zt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axe(t,e,n,r){const i=K(t,"x","dropout");if(z(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),z(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Xn?i.clone():i;const a=Exe(i,n),o=1-e,s=Ye(PD(Te(p1(a,0,1,"float32",r),o)),o);return J(i,s)}const kxe=ae({dropout_:Axe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t,e,n,r,i,a="NHWC",o){let s=t;t.rank===3&&(s=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),z(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),z(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),z(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];z(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),z(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Wi("conv2dDerFilter",i,o);const f={x:s,dy:u},h={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:n};return ee.runKernel(PM,f,h)}const qO=ae({conv2DBackpropFilter_:Ixe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XO(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return J(t,g1(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function KO(t,e){let n=e;const r=fr(t.shape,e.shape);return r.length>0&&(n=qe(n,r)),ie(n,t.shape)}function YO(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ed(t);if(e==="elu")return OD(t);if(e==="relu6")return bq(t);if(e==="prelu")return FO(t,n);if(e==="leakyrelu")return IO(t,r);if(e==="sigmoid")return zv(t);throw new Error(`Unknown fused activation ${e}.`)}const ZO=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",ZO(ee.state.gradientDepth,u)===!1){z(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Ih(t,e,n,r,i,a,o);return s!=null&&(C=Te(C,s)),YO(C,u,l,c)}const f=K(t,"x","conv2d","float32"),h=K(e,"filter","conv2d","float32");let d=f,p=!1;f.rank===3&&(p=!0,d=ie(f,[1,f.shape[0],f.shape[1],f.shape[2]])),z(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),z(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Wi("fused conv2d",r,o);const v=i==="NHWC"?d.shape[3]:d.shape[1];z(h.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${h.shape[2]}.`),z(Qr(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const m=Or(d.shape,h.shape,n,a,r,o);let g;s!=null&&(g=K(s,"bias","fused conv2d"),[g]=Ln(g,f),i==="NHWC"?ht(m.outShape,g.shape):(z(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),z(g.shape.length===0||g.shape[0]===m.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let y;if(l!=null){const C=l.shape;if(z(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)z(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{ht(C,m.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(S)}y=K(l,"prelu weights","fused conv2d")}const x=(C,D)=>{z(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[S,_,T,E]=D,A=XO(C,T,u);z(Ah(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const N=DO(_.shape,A,S,n,r),R=qO(_,A,S.shape,n,r),M=[N,R];if(E!=null){const $=KO(E,A);M.push($)}return M},w={x:d,filter:h,bias:g,preluActivationWeights:y},b={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return s==null?av((D,S,_)=>{let T=ee.runKernel(nC,w,b);return _([S,D,T]),p&&(T=ie(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(d,h):av((D,S,_,T)=>{let E=ee.runKernel(nC,w,b);return T([S,D,E,_]),p&&(E=ie(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(d,h,g)}const Rxe=ae({fusedConv2d_:Nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t,e,n,r,i,a=[1,1],o){let s=t;t.rank===3&&(s=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:s,dy:u},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:n};return ee.runKernel(GM,l,c)}const Mxe=ae({depthwiseConv2dNativeBackpropFilter_:$xe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(t,e,n,r,i,a=[1,1],o){let s=e,u=!1;e.rank===3&&(u=!0,s=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:t},f=ee.runKernel(HM,l,c);return u?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Fxe=ae({depthwiseConv2dNativeBackpropInput_:Oxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(ZO(ee.state.gradientDepth,a)===!1){let E=Lt(t,e,n,r);return i!=null&&(E=Te(E,i)),YO(E,a,o,s)}let u=K(t,"a","fused matMul"),l=K(e,"b","fused matMul");[u,l]=Ln(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?u.shape[u.rank-1]:u.shape[u.rank-2],d=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),v=l.shape.slice(0,-2),m=he(p),g=he(v);z(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=ht(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,d]),w=n?ie(u,[m,c,h]):ie(u,[m,h,c]),b=r?ie(l,[g,d,f]):ie(l,[g,f,d]);let C;i!=null&&(C=K(i,"bias","fused matMul"),[C]=Ln(C,u),ht(x,C.shape));let D;o!=null&&(D=K(o,"prelu weights","fused matMul"));const S=(E,A)=>{const[N,R,M,$]=A,L=XO(ie(E,M.shape),M,a);let O,F;if(!n&&!r?(O=Lt(L,R,!1,!0),F=Lt(N,L,!0,!1)):!n&&r?(O=Lt(L,R,!1,!1),F=Lt(L,N,!0,!1)):n&&!r?(O=Lt(R,L,!1,!0),F=Lt(N,L,!1,!1)):(O=Lt(R,L,!0,!0),F=Lt(L,N,!0,!0)),i!=null){const V=KO($,L);return[O,F,V]}else return[O,F]},_={a:w,b,bias:C,preluActivationWeights:D},T={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?av((A,N,R)=>{const M=ee.runKernel(tC,_,T);return R([A,N,M]),{value:ie(M,x),gradFunc:S}})(w,b):av((A,N,R,M)=>{const $=ee.runKernel(tC,_,T);return M([A,N,$,R]),{value:ie($,x),gradFunc:S}})(w,b,C)}const g5=ae({fusedMatMul_:Pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t,e,n,r,i="bilinear",a=0){const o=K(t,"image","cropAndResize"),s=K(e,"boxes","cropAndResize","float32"),u=K(n,"boxInd","cropAndResize","int32"),l=s.shape[0];z(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),z(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${s.shape}.`),z(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${s.shape}.`),z(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),z(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),z(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:s,boxInd:u},f={method:i,extrapolationValue:a,cropSize:r};return ee.runKernel(VM,c,f)}const zxe=ae({cropAndResize_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t){const e=K(t,"image","flipLeftRight","float32");z(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ee.runKernel(YM,n,{})}const Vxe=ae({flipLeftRight_:Bxe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t){const e=K(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];z(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),z(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,is(e,i)}const Uxe=ae({grayscaleToRGB_:Wxe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t){const e=K(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];z(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),z(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,a=Fe(e,"float32"),o=ia([.2989,.587,.114]);let s;switch(e.rank){case 2:s=wg("ij,j->i",a,o);break;case 3:s=wg("ijk,k->ij",a,o);break;case 4:s=wg("ijkl,l->ijk",a,o);break;case 5:s=wg("ijklm,m->ijkl",a,o);break;case 6:s=wg("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=Ni(s,-1),Fe(s,i)}const Hxe=ae({rgbToGrayscale_:Gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t,e,n=0,r=.5){const i=K(t,"image","rotateWithOffset","float32");z(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:n,center:r};return ee.runKernel(vO,a,o)}const qxe=ae({rotateWithOffset_:jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vv(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=t.shape[0];return n=Math.min(n,o),z(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),z(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),z(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),z(e.rank===1,()=>"scores must be a 1D tensor"),z(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),z(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=K(t,"boxes","nonMaxSuppression","float32"),o=K(e,"scores","nonMaxSuppression","float32"),s=Vv(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return ee.runKernel(nO,{boxes:a,scores:o},u)}const Kxe=ae({nonMaxSuppression_:Xxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e,n){const r=Zxe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function Zxe(t,e,n){return Jxe(t,e,n||Qxe)}function Qxe(t,e){return t>e?1:t<e?-1:0}function Jxe(t,e,n){let r=0,i=t.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=n(e,t[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QO(t,e,n,r,i){return tF(t,e,n,r,i,0)}function JO(t,e,n,r,i,a){return tF(t,e,n,r,i,0,!1,a,!0)}function eF(t,e,n,r,i,a){return tF(t,e,n,r,i,a,!0)}function tF(t,e,n,r,i,a,o=!1,s=!1,u=!1){const l=[];for(let m=0;m<e.length;m++)e[m]>i&&l.push({score:e[m],boxIndex:m,suppressBeginIndex:0});l.sort(m5);const c=a>0?-.5/a:0,f=[],h=[];for(;f.length<n&&l.length>0;){const m=l.pop(),{score:g,boxIndex:y,suppressBeginIndex:x}=m;if(g<i)break;let w=!1;for(let b=f.length-1;b>=x;--b){const C=ewe(t,y,f[b]);if(C>=r){w=!0;break}if(m.score=m.score*twe(r,c,C),m.score<=i)break}m.suppressBeginIndex=f.length,w||(m.score===g?(f.push(y),h.push(m.score)):m.score>i&&Yxe(l,m,m5))}const d=f.length,p=n-d;s&&p>0&&(f.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const v={selectedIndices:f};return o&&(v.selectedScores=h),u&&(v.validOutputs=d),v}function ewe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-a)*(u-o),p=(f-l)*(h-c);if(d<=0||p<=0)return 0;const v=Math.max(a,l),m=Math.max(o,c),g=Math.min(s,f),y=Math.min(u,h),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(d+p-x)}function twe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function m5(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nwe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=K(t,"boxes","nonMaxSuppressionAsync"),o=K(e,"scores","nonMaxSuppressionAsync"),s=Vv(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u=await Promise.all([a.data(),o.data()]),l=u[0],c=u[1],{selectedIndices:f}=QO(l,c,n,r,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),ia(f,"int32")}const rwe=nwe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=K(t,"boxes","nonMaxSuppression"),s=K(e,"scores","nonMaxSuppression"),u=Vv(o,s,n,r,i,a);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},f=ee.runKernel(iO,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const awe=ae({nonMaxSuppressionWithScore_:iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function owe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=K(t,"boxes","nonMaxSuppressionAsync"),s=K(e,"scores","nonMaxSuppressionAsync"),u=Vv(o,s,n,r,i,a);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l=await Promise.all([o.data(),s.data()]),c=l[0],f=l[1],{selectedIndices:h,selectedScores:d}=eF(c,f,n,r,i,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:ia(h,"int32"),selectedScores:ia(d)}}const swe=owe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=K(t,"boxes","nonMaxSuppression"),s=K(e,"scores","nonMaxSuppression"),u=Vv(o,s,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,h={boxes:o,scores:s},d={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:a},p=ee.runKernel(rO,h,d);return{selectedIndices:p[0],validOutputs:p[1]}}const lwe=ae({nonMaxSuppressionPadded_:uwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function cwe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=K(t,"boxes","nonMaxSuppressionAsync"),s=K(e,"scores","nonMaxSuppressionAsync"),u=Vv(o,s,n,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[h,d]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:v}=JO(h,d,l,c,f,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:ia(p,"int32"),validOutputs:Bt(v,"int32")}}const fwe=cwe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(t,e,n=!1,r=!1){const i=K(t,"images","resizeBilinear");z(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),z(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),z(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:n,halfPixelCenters:r,size:e},l=ee.runKernel(xD,s,u);return o?ie(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Mq=ae({resizeBilinear_:hwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t,e,n=!1,r=!1){const i=K(t,"images","resizeNearestNeighbor");z(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),z(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),z(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),z(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:n,halfPixelCenters:r,size:e},l=ee.runKernel(yD,s,u);return o?ie(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Oq=ae({resizeNearestNeighbor_:dwe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(t,e="binary",n=!1,r=.5){const i=K(t,"image","threshold"),a=.2989,o=.587,s=.114,u=i.shape[0]*i.shape[1];let l=J(ia([r]),255),c,f,h,d;if(z(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),z(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),z(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),z(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[c,f,h]=Ia(i,[1,1,1],-1);const m=J(c,a),g=J(f,o),y=J(h,s);d=Te(Te(m,g),y)}else d=t;if(e==="otsu"){const m=f0e(Fe(Cq(d),"int32"),Em([]),256);l=vwe(m,u)}const p=n?Bv(d,l):Ha(d,l);return Fe(J(p,255),"int32")}function vwe(t,e){let n=ia([-1]),r=ia([0]),i=ia([0]),a,o,s,u,l,c;for(let f=0;f<t.size-1;f++){a=rn(t,0,f+1),o=rn(t,f+1),l=Ye(qe(a),e),c=Ye(qe(o),e);const h=qe(J(a,x0(0,a.size)));s=Ye(h,qe(a));const d=MD(o.shape,a.size),p=Te(x0(0,o.size),d),v=J(o,p);u=Ye(qe(v),qe(o));const m=nt(s,u),g=nt(s,u),y=J(l,c);i=J(J(y,m),g);const x=Ha(i,r);r=vi(x,i,r),n=vi(x,ia([f]),n)}return n}const gwe=ae({threshold_:pwe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(t,e,n="nearest",r="constant",i=0,a){const o=K(t,"image","transform","float32"),s=K(e,"transforms","transform","float32");z(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),z(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),z(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return ee.runKernel(dO,u,l)}const ywe=ae({transform_:mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(t,e,n){const r=K(t,"a","bandPart");z(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);let s,u;typeof e=="number"?(z(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),z(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),s=K(e<0?a:e,"numLower","bandPart")):(z(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),s=vi(uC(e,0),a,y0(e,a))),typeof n=="number"?(z(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),z(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),u=K(n<0?o:n,"numUpper","bandPart")):(z(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=vi(uC(n,0),o,y0(n,o)));const l=ie(x0(0,a,1,"int32"),[-1,1]),c=x0(0,o,1,"int32"),f=nt(l,c),h=Qu(Bv(f,s),Zh(f,Fn(u))),d=xr([a,o],r.dtype);return ie(xc(Rh(ie(r,[-1,a,o])).map(p=>vi(h,p,d))),i)}const wwe=ae({bandPart_:xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(t){let e;if(Array.isArray(t)){e=!1,z(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let a=1;a<t.length;++a)z(t[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${i})`)}else e=!0,t=Ia(t,t.shape[0],0).map(i=>v1(i,[0]));z(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(ee.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=J(qe(J(n[o],a)),n[o]);a=nt(a,s)}return Ye(a,FD(a,"euclidean"))}));return e?xc(n,0):n}const Cwe=ae({gramSchmidt_:bwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swe(t,e=!1){if(z(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return y5(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=Rh(ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(u=>{const[l,c]=y5(u,e);i.push(l),a.push(c)});const o=ie(xc(i,0),t.shape),s=ie(xc(a,0),t.shape);return[o,s]}}function y5(t,e=!1){return ee.tidy(()=>{z(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=pq(n),a=th(t);const o=Kw([[1]],[1,1]);let s=th(o);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=a,f=s,h=i;[s,a,i]=ee.tidy(()=>{const d=rn(a,[l,l],[n-l,1]),p=FD(d),v=rn(a,[l,l],[1,1]),m=vi(Ha(v,0),Kw([[-1]]),Kw([[1]])),g=nt(v,J(m,p)),y=Ye(d,g);y.shape[0]===1?s=th(o):s=Oi([o,rn(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const x=Fn(Ye(Lt(m,g),p)),w=rn(a,[l,0],[n-l,r]),b=J(x,s),C=It(s);if(l===0)a=nt(w,Lt(b,Lt(C,w)));else{const _=nt(w,Lt(b,Lt(C,w)));a=Oi([rn(a,[0,0],[l,r]),_],0)}const D=It(b),S=rn(i,[0,l],[n,i.shape[1]-l]);if(l===0)i=nt(S,Lt(Lt(S,s),D));else{const _=nt(S,Lt(Lt(S,s),D));i=Oi([rn(i,[0,0],[n,l]),_],1)}return[s,a,i]}),mt([c,f,h])}return!e&&n>r&&(i=rn(i,[0,0],[n,r]),a=rn(a,[0,0],[r,r])),[i,a]})}const Dwe=ae({qr_:Swe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pu={flipLeftRight:Vxe,grayscaleToRGB:Uxe,resizeNearestNeighbor:Oq,resizeBilinear:Mq,rgbToGrayscale:Hxe,rotateWithOffset:qxe,cropAndResize:zxe,nonMaxSuppression:Kxe,nonMaxSuppressionAsync:rwe,nonMaxSuppressionWithScore:awe,nonMaxSuppressionWithScoreAsync:swe,nonMaxSuppressionPadded:lwe,nonMaxSuppressionPaddedAsync:fwe,threshold:gwe,transform:ywe},_we={bandPart:wwe,gramSchmidt:Cwe,qr:Dwe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twe=new Map,Ewe=new Map;class Wv{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class co{constructor(){this.classNameMap={}}static getMap(){return co.instance==null&&(co.instance=new co),co.instance}static register(e){co.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function be(t,e,n){z(t.className!=null,()=>"Class being registered does not have the static className property defined."),z(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),z(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return co.register(t),Twe.set(i,t),Ewe.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wc extends Wv{minimize(e,n=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return mt(a),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return $ye(e,n)}dispose(){this.iterations_!=null&&mt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Wc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fq extends Wc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ee.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:se(()=>Nt(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:se(()=>Nt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedGrads[i].variable,l=this.accumulatedUpdates[i].variable;se(()=>{const c=Te(J(u,this.rho),J(ln(s),1-this.rho)),f=J(Ye(yi(Te(l,this.epsilon)),yi(Te(u,this.epsilon))),s),h=Te(J(l,this.rho),J(ln(f),1-this.rho));u.assign(c),l.assign(h);const d=Te(J(f,-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(mt(this.accumulatedGrads.map(e=>e.variable)),mt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pq extends Wc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ee.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:se(()=>MD(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;se(()=>{const u=Te(s,ln(o));s.assign(u);const l=Te(J(Ye(o,yi(Te(u,ee.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&mt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lq extends Wc{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],se(()=>{this.accBeta1=Bt(n).variable(),this.accBeta2=Bt(r).variable()}),i==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);se(()=>{const r=nt(1,this.accBeta1),i=nt(1,this.accBeta2);n.forEach((a,o)=>{const s=ee.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:se(()=>Nt(s).variable(u))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:se(()=>Nt(s).variable(u))});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,h=Te(J(c,this.beta1),J(l,1-this.beta1)),d=Te(J(f,this.beta2),J(ln(l),1-this.beta2)),p=Ye(h,r),v=Ye(d,i);c.assign(h),f.assign(d);const m=Te(J(Ye(p,Te(yi(v),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(J(this.accBeta1,this.beta1)),this.accBeta2.assign(J(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&mt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&mt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),se(()=>{this.accBeta1.assign(iv(this.beta1,this.iterations_+1)),this.accBeta2.assign(iv(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zq extends Wc{static get className(){return"Adamax"}constructor(e,n,r,i=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],se(()=>{this.iteration=Bt(0).variable(),this.accBeta1=Bt(n).variable()}),i==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);se(()=>{const r=nt(1,this.accBeta1),i=Ye(-this.learningRate,Te(J(this.iteration,this.decay),1));n.forEach((a,o)=>{const s=ee.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:Nt(s).variable(u)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:Nt(s).variable(u)});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,h=Te(J(c,this.beta1),J(l,1-this.beta1)),d=J(f,this.beta2),p=ui(l),v=Vc(d,p);c.assign(h),f.assign(v);const m=Te(J(Ye(i,r),Ye(h,Te(v,this.epsilon))),s);s.assign(m)}),this.iteration.assign(Te(this.iteration,1)),this.accBeta1.assign(J(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&mt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&mt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nF extends Wc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=ee.registeredVariables[r];se(()=>{const s=Te(J(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Js(Bt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bq extends nF{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Bt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ee.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:se(()=>Nt(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&se(()=>{let u;const l=Te(J(this.m,o),s);this.useNesterov?u=Te(J(this.c,Te(s,J(l,this.m))),a):u=Te(J(this.c,l),a),o.assign(l),a.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&mt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vq extends Wc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=ee.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ee.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:se(()=>Nt(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:se(()=>Nt(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:se(()=>Nt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedMeanSquares[i].variable,l=this.accumulatedMoments[i].variable;se(()=>{const c=Te(J(u,this.decay),J(ln(s),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,h=Te(J(f,this.decay),J(s,1-this.decay)),d=Ye(J(s,this.learningRate),yi(nt(c,Te(ln(h),this.epsilon)))),p=Te(J(l,this.momentum),d);u.assign(c),f.assign(h),l.assign(p);const v=nt(a,p);a.assign(v)}else{const f=Te(J(u,this.decay),J(ln(s),1-this.decay)),h=Te(J(l,this.momentum),Ye(J(s,this.learningRate),yi(Te(f,this.epsilon))));u.assign(f),l.assign(h);const d=nt(a,h);a.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&mt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&mt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&mt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe=[Fq,Pq,Lq,zq,Bq,Vq,nF];function kwe(){for(const t of Awe)be(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let i=0;const a=u=>(u.then(l=>{const c=n+ ++i/t.length*(r-n);return e(c),l}),u);function o(u){z(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function s(u,l){z(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),z(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),z(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Iwe(t,e){e==null&&(e={});const n=e.fetchFunc==null?le().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),i=0,a=.5,s=(e.onProgress==null?await Promise.all(r):await x5(r,e.onProgress,i,a)).map(f=>f.arrayBuffer()),u=.5,l=1;return e.onProgress==null?await Promise.all(s):await x5(s,e.onProgress,u,l)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe="application/octet-stream",Rwe="application/json";class rF{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(z(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=le().platform.fetch,z(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&z(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=Uge(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:Rwe}),"model.json"),e.weightData!=null){const o=Lc.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:Nwe}),"model.weights.bin")}const a=await this.fetch(this.path,n);if(a.ok)return{modelArtifactsInfo:xO(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Hge(n,a=>this.loadWeights(a))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=$we(n),a=this.weightPathPrefix||r,o=jge(e),s=[],u=[];for(const c of e)for(const f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):s.push(a+f+i);this.weightUrlConverter&&s.push(...await Promise.all(u));const l=await Iwe(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,l]}}rF.URL_SCHEME_REGEX=/^https?:\/\//;function $we(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function w5(t){return t.match(rF.URL_SCHEME_REGEX)!=null}const Wq=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>w5(r)):n=w5(t),n)return Uq(t,e)}return null};pr.registerSaveRouter(Wq);pr.registerLoadRouter(Wq);function Uq(t,e){return new rF(t,e)}function Mwe(t,e){return Uq(t,e)}function iF(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(he(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const s=t.shape,u=i.slice();u.pop();let l=1;for(let f=a;f<n;++f)l*=s[f],u.push(s[f]);const c=[...He(t.shape).map(f=>f/l),1].slice(0,a);return[u,o,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VI=-2,Owe=-1;function aF(t,e,n){const r=t.shape.length;z(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),z(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)z(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Fwe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function oF(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Gq(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Hq(t,e,n){return n<=t?n:n-(e-1)}function jq(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Pwe(t,e,n,r,i,a,o,s,u){const l=t.length;let c=new Array(l),f=new Array(l),h=new Array(l);if(e.length&&n>0){const d=e[0],p=n+1;c=qq(o,d,p,r,t),f=Xq(s,d,p,i,t),h=Gq(a,d,p,t)}else for(let d=0;d<l;d++)c[d]=Yq(o,r,a,t,d,u),f[d]=Zq(s,i,a,t,d,u),h[d]=Kq(a,d,u);return{begin:c,end:f,strides:h}}function qq(t,e,n,r,i){const a=[...i],o=jq(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const u=Hq(e,n,s);let l=r[u];t&1<<u&&(l=0),a[s]=l}return a}function Xq(t,e,n,r,i){const a=[...i],o=jq(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const u=Hq(e,n,s);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),a[s]=l}for(let s=0;s<a.length;s++){const u=i[s];a[s]<0&&(a[s]+=u),a[s]=Sh(0,a[s],i[s])}return a}function Kq(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Yq(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),o=Sh(0,o,u-1),o}function Zq(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),s>0?o=Sh(0,o,u):o=Sh(-1,o,u-1),o}function sF(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function uF(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function LD(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{z(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((o,s)=>o>=0?o:(z(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,a]}function lF(t,e,n,r,i,a,o,s,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};for(let x=0;x<f.dims;x++)c&&1<<x&s&&f.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Lwe(f,h);let d=!0,p=!0,v=!0;const m=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(h.shrinkAxisMask&1<<x),b=t[x];if(b===-1){m.push(w?1:-1);continue}const C=[h.beginMask&1<<x,h.endMask&1<<x],D=[h.strides[x]>0?0:-1,h.strides[x]>0?b:b-1];if(w&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&h.strides[x]===1;const S=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(w){const A=h.begin[x]<0?b+h.begin[x]:h.begin[x];if(h.begin[x]=A,h.end[x]=h.begin[x]+1,A<0||A>=b)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=b5(h.begin[x],0,h.strides[x],b,C,D),h.end[x]=b5(h.end[x],1,h.strides[x],b,C,D);const E=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===b;d=d&&E,p=p&&(x===0&&h.strides[x]===1||E)}else d=d&&h.strides[x]===1&&S,p=p&&(x===0&&h.strides[x]===1||S);let _,T=!1;if(h.beginValid&&h.endValid?(_=h.end[x]-h.begin[x],T=!0):w?(_=1,T=!0):S&&b>=0&&(h.strides[x]<0?_=-b:_=b,T=!0),T){let E;_===0||_<0!=h.strides[x]<0?E=0:E=Math.trunc(_/h.strides[x])+(_%h.strides[x]!==0?1:0),m.push(E)}else m.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const w=h.finalShapeGatherIndices[x];w>=0?g.push(m[w]):w===VI&&g.push(1)}return{finalShapeSparse:g.filter((x,w)=>h.finalShapeGatherIndices[w]!==VI),finalShape:g,isIdentity:d,sliceDim0:p,isSimpleSlice:v,begin:h.begin,end:h.end,strides:h.strides}}function Lwe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(VI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Owe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function b5(t,e,n,r,i,a){if(i[e])return n>0?a[e]:a[e+1&1];{const o=t<0?r+t:t;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const zwe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:aF,computeFlatOffset:uF,computeOutShape:oF,getNormalizedAxes:Pwe,isSliceContinous:sF,maskToAxes:Fwe,parseSliceParams:LD,sliceInfo:lF,startForAxis:Yq,startIndicesWithElidedDims:qq,stopForAxis:Zq,stopIndicesWithElidedDims:Xq,stridesForAxis:Kq,stridesWithElidedDims:Gq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bwe{static sgd(e){return new nF(e)}static momentum(e,n,r=!1){return new Bq(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,a=!1){return new Vq(e,n,r,i,a)}static adam(e=.001,n=.9,r=.999,i=null){return new Lq(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new Fq(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,a=0){return new zq(e,n,r,i,a)}static adagrad(e,n=.1){return new Pq(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vd=Bwe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vwe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function Qq(){return new Promise(t=>Vwe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cF(t,e){const n=t[0].length;t.forEach((i,a)=>{z(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),z(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,a)=>{for(let o=0;o<n;o++)z(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function eu(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ts;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ts||(ts={}));function Jq(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${a} but shape[${i+t}] = ${s}`)}else r[o]=a}return r}function eX(t){const e={FIRST_DIM_SIZE:ts.FIRST_DIM_SIZE,VALUE_ROWIDS:ts.VALUE_ROWIDS,ROW_LENGTHS:ts.ROW_LENGTHS,ROW_SPLITS:ts.ROW_SPLITS,ROW_LIMITS:ts.ROW_LIMITS,ROW_STARTS:ts.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function tX(t){return t.length===0?0:t[0]===ts.FIRST_DIM_SIZE?t.length-1:t.length}function nX(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const a=t[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${a} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fF=30;function zD(t){return t<=fF?t:SI(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hF(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m1(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function y1(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function x1(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function dF(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function pF(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BD=1.7580993408473768,VD=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vF=.3275911,gF=.254829592,mF=-.284496736,yF=1.421413741,xF=-1.453152027,wF=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function rX(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function iX(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function aX(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function bF(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function oX(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function sX(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function uX(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iE="->",Wwe=/->/g,C5=",",S5="...";function CF(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Wwe,"").length)/iE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${iE}").`);const[r,i]=t.split(iE);z(r.indexOf(S5)===-1,()=>`The ellipsis notation ("${S5}") is not supported yet.`);const a=r.split(C5),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const d=i[h];if(!a.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);s.indexOf(d)===-1&&s.push(d)}for(let h=0;h<r.length;++h){const d=r[h];s.indexOf(d)===-1&&d!==C5&&s.push(d)}const u=new Array(a.length);for(let h=0;h<o;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let d=0;d<a[h].length;++d)u[h].push(s.indexOf(a[h][d]))}const l=s.length,c=i.length,f=[];for(let h=c;h<l;++h)f.push(h);return{allDims:s,summedDims:f,idDims:u}}function SF(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function DF(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const a=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:z(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function _F(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<n.length;++o){const s=n[o],u=Uwe(e,s);for(const l of u)a.indexOf(l)===-1&&(r[o].push(l),a.push(l))}return{path:n,steps:r}}function TF(t){return t.every((e,n)=>e===n)}function Uwe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function EF(t,e,n=0){let r=[];if(typeof e=="number")z(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);z(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,u)=>u>0?s+u:s);e[a]=t.shape[n]-o}z(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lX(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function cX(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function fX(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hX(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function dX(t,e){return`size ${t} must be non-negative, not ${e}`}function pX(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function vX(t,e){const n=he(t),r=he(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function gX(t,e){const n=he(t),r=he(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(){return"segment ids must be >= 0"}function mX(){return"segment ids are not increasing"}function yX(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function xX(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(t,e){let n=!1,r;for(t<=fF?(r=t,n=!0):r=SI(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=SI(t,r+1);return r}function bX(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function AF(t,e,n,r){const i=e.shape.length,a=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=t.shape[n],s=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)s.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<n;f++)s.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<i;f++)s.push(e.shape[f]);for(let f=n+1;f<a;f++)s.push(t.shape[f]),c*=t.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:o,outputShape:s}}const Gwe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:AF,computeOutShape:bX,segOpComputeOptimalWindowSize:wX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(t){try{return t.map(e=>yc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function CX(t){return t.map(e=>uc(e))}const Hwe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:gF,ERF_A2:mF,ERF_A3:yF,ERF_A4:xF,ERF_A5:wF,ERF_P:vF,PARALLELIZE_THRESHOLD:fF,get RowPartitionType(){return ts},SELU_SCALE:VD,SELU_SCALEALPHA:BD,applyActivation:YO,assertAndGetBroadcastShape:ht,assertAxesAreInnerMostDims:Fr,assertParamsConsistent:cF,assignToTypedArray:oX,axesAreInnerMostDims:EO,calculateShapes:td,checkEinsumDimSizes:DF,checkPadOnDimRoundingMode:Wi,combineLocations:hq,combineRaggedTensorToTensorShapes:Jq,complexWithEvenIndex:iX,complexWithOddIndex:aX,computeConv2DInfo:Or,computeConv3DInfo:zc,computeDefaultPad:wO,computeDilation2DInfo:h1,computeOptimalWindowSize:zD,computeOutAndReduceShapes:_r,computeOutShape:eu,computePool2DInfo:Oo,computePool3DInfo:ol,convertConv2DDataFormat:sl,decodeEinsumEquation:CF,eitherStridesOrDilationsAreOne:Qr,expandShapeToKeepDim:Zn,exponent:uX,exponents:sX,fromStringArrayToUint8:CX,fromUint8ToStringArray:el,getAxesPermutation:Dn,getBroadcastDims:rv,getComplexWithIndex:bF,getEinsumComputePath:_F,getEinsumPermutation:SF,getFusedBiasGradient:KO,getFusedDyActivation:XO,getImageCenter:hF,getInnerMostAxes:Bn,getPermuted:y1,getRaggedRank:tX,getReductionAxes:fr,getReshaped:m1,getReshapedPermuted:x1,getRowPartitionTypesHelper:eX,getSliceBeginCoords:dF,getSliceSize:pF,getSparseFillEmptyRowsIndicesDenseShapeMismatch:lX,getSparseFillEmptyRowsNegativeIndexErrorMessage:cX,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:fX,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:pX,getSparseReshapeInputOutputMismatchErrorMessage:gX,getSparseReshapeInputOutputMultipleErrorMessage:vX,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:hX,getSparseReshapeNegativeOutputDimErrorMessage:dX,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:xX,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:WI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:mX,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:yX,getUndoAxesPermutation:Bc,isIdentityPermutation:TF,log:fge,mergeRealAndImagArrays:Ju,prepareAndValidate:iF,prepareSplitSize:EF,segment_util:Gwe,shouldFuse:ZO,slice_util:zwe,splitRealAndImagArrays:rX,stridesOrDilationsArePositive:kh,tupleValuesAreOne:Ah,upcastType:pa,validateDefaultValueShape:nX,validateInput:mxe,validateUpdateShape:Iq,warn:_a},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */kwe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SX={kernelName:I2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,g1(Fe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe={kernelName:my,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ln(Fe(n,"float32")),i=yi(nt(Bt(1),r));return Fn(Ye(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qwe={kernelName:yy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yi(nt(ln(Fe(n,"float32")),1));return Ye(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xwe={kernelName:Lv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{let s=t;const u=fr(n.shape,i);return u.length>0&&(s=qe(s,u)),ie(s,n.shape)},b:()=>{let s=t;const u=fr(r.shape,i);return u.length>0&&(s=qe(s,u)),ie(s,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe={kernelName:kM,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ywe={kernelName:N2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Nt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwe={kernelName:R2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Nt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe={kernelName:xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,yi(nt(Bt(1),ln(Fe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jwe={kernelName:wy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=yi(Te(Bt(1),ln(Fe(n,"float32"))));return Ye(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ebe={kernelName:Sy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{const s=Te(ln(n),ln(r));let u=J(t,Ye(r,s));const l=fr(n.shape,i);return l.length>0&&(u=qe(u,l)),ie(u,n.shape)},b:()=>{const s=Te(ln(n),ln(r));let u=Fn(J(t,Ye(n,s)));const l=fr(r.shape,i);return l.length>0&&(u=qe(u,l)),ie(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbe={kernelName:by,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Te(ln(Fe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nbe={kernelName:Cy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,nt(Bt(1),ln(Fe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t,e,n,r,i,a){const o=K(t,"dy","avgPool3dGrad"),s=K(e,"input","avgPool3dGrad");let u=o,l=s,c=!1;s.rank===4&&(c=!0,u=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),z(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),z(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Wi("avgPool3dGrad",i,a);const f={dy:u,input:l},h={filterSize:n,strides:r,pad:i,dimRoundingMode:a},d=ee.runKernel($M,f,h);return c?ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const ibe=ae({avgPool3dGrad_:rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abe={kernelName:M2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>ibe(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t,e,n,r,i){const a=K(t,"dy","avgPoolGrad"),o=K(e,"input","avgPoolGrad");z(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,u=a,l=!1;o.rank===3&&(l=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),z(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),z(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);const c={dy:u,input:s},f={filterSize:n,strides:r,pad:i},h=ee.runKernel(RM,c,f);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const sbe=ae({avgPoolGrad_:obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ube={kernelName:$2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>sbe(t,r,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lbe={kernelName:O2,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:o}=n;return!a&&!o?{a:()=>Lt(t,i,!1,!0),b:()=>Lt(r,t,!0,!1)}:!a&&o?{a:()=>Lt(t,i,!1,!1),b:()=>Lt(t,r,!0,!1)}:a&&!o?{a:()=>Lt(i,t,!1,!0),b:()=>Lt(r,t,!1,!1)}:{a:()=>Lt(i,t,!0,!0),b:()=>Lt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cbe={kernelName:F2,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>OO(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fbe={kernelName:sge,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let u=i.length-1;u>=0;u--)if(i[u]===a[u])o[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let u=0;u<o.length;u++)o[u]>1&&s.push(u);return{x:()=>qe(t,s,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hbe={kernelName:Dy,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dbe={kernelName:_y,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pbe={kernelName:Ty,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>vi(Qu(Zh(r,i),Bv(r,a)),t,Nt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vbe={kernelName:P2,inputsToSave:["x"],gradFunc:SX.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbe={kernelName:L2,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:i}=n,a=St(i,e[0].shape)[0],o=r.map(u=>u[a]);return Ia(t,o,a).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mbe={kernelName:z2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:o,pad:s,dataFormat:u}=n;return z(Ah(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>DO(r.shape,t,i,o,s,u),filter:()=>qO(r,t,i.shape,o,s,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ybe={kernelName:B2,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:o,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>Ih(t,i,a,o,s,1,u),filter:()=>qO(t,r,i.shape,a,o,s,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e,n,r,i){let a=t;t.rank===4&&(a=ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),z(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),z(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),z(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),z(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),z(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const s={x:a,dy:o},u={strides:r,pad:i,filterShape:n};return ee.runKernel(LM,s,u)}const wbe=ae({conv3DBackpropFilter_:xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bbe={kernelName:V2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;z(Ah(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,s]=e;return{x:()=>lq(o.shape,t,s,i,a),filter:()=>wbe(o,t,s.shape,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cbe={kernelName:Ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(Fn(Tq(Fe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sbe={kernelName:Ay,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(Eq(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe={kernelName:W2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const s=Dn([i],r.rank);let u=fq(t,i,a,!o);return s!=null&&(u=It(u,s)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _be={kernelName:U2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=r??[1,1];z(Ah(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[u,l]=e;return z(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),z(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),z(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),z(Qr(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),Wi("depthwiseConv2d",a,o),{x:()=>Fxe(u.shape,t,l,i,a,s,o),filter:()=>Mxe(u,t,l.shape,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tbe={kernelName:G2,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>ee.runKernel(DI,a,n),filter:()=>ee.runKernel(_I,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ebe={kernelName:Iy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ee.runKernel(qM,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Abe={kernelName:Ny,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=J(Zu(Fn(ln(n))),2/Math.sqrt(Math.PI));return{x:()=>J(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kbe={kernelName:Ry,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ibe={kernelName:j2,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nbe={kernelName:$y,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,Zu(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbe={kernelName:My,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $be={kernelName:Oy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{const s=Ye(t,Fe(r,"float32")),u=fr(n.shape,i);return u.length>0?ie(qe(s,u),n.shape):s},b:()=>{let s=J(t,Fe(n,"float32"));const u=fr(r.shape,i);u.length>0&&(s=ie(qe(s,u),r.shape));const l=ln(r);return Fn(Ye(s,Fe(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mbe={kernelName:q2,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=e,u=s??Bt(1),l=fr(a.shape,i.shape),c=[];if(a.rank===1){for(let w=0;w<i.shape.length-1;++w)c.push(i.shape[w]);c.push(1)}const f=nt(i,a),h=J(t,u),d=Sq(Te(o,Bt(r))),p=J(J(J(d,d),d),Bt(-.5));return{x:()=>a.rank===1?ie(J(J(t,is(ie(d,[1,1,1,a.shape[0]]),c)),u),i.shape):ie(J(J(t,d),u),i.shape),mean:()=>{let w=J(J(d,Bt(-1)),h);return a.rank===1&&(w=qe(w,l)),ie(w,a.shape)},variance:()=>{let w=J(J(p,f),h);return a.rank===1&&(w=qe(w,l)),ie(w,a.shape)},scale:()=>{const w=J(f,d);let b=J(t,w);return a.rank===1&&(b=qe(b,l)),ie(b,a.shape)},offset:()=>{let w=t;return a.rank===1&&(w=qe(w,l)),ie(w,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Obe={kernelName:X2,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a}=n,o=St(a,r.shape)[0];return{x:()=>{const u=r.shape,l=i.size,c=u.slice(0,o),f=c.length,h=u.slice(a,u.length).slice(1),d=h.length,p=D5(0,f),v=D5(f+1,f+1+d),m=_5([c,[l],h]),g=ie(t,m),y=ie(i,[l]),x=_5([[f],p,v]),w=It(g,x);let b=Rq(w,y,r.shape[o]);const C=Bc(x);return b=It(b,C),b},indices:()=>i}}};function D5(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function _5(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fbe={kernelName:Fy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Nt(n),b:()=>Nt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbe={kernelName:Py,gradFunc:t=>({x:()=>Fe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lbe={kernelName:Ly,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zbe={kernelName:zy,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bbe={kernelName:By,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vbe={kernelName:Y2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,a=Ha(r,0);return{x:()=>vi(a,t,J(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wbe={kernelName:Wy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Te(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ube={kernelName:Vy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Fe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbe={kernelName:lge,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=Zu(r);return nt(t,J(qe(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e,n,r=5,i=1,a=1,o=.5){const s={x:t,y:e,dy:n},u={depthRadius:r,bias:i,alpha:a,beta:o};return ee.runKernel(JM,s,u)}const jbe=ae({localResponseNormalizationBackprop_:Hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qbe={kernelName:nD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:o,alpha:s,beta:u}=n;return{x:()=>jbe(r,i,t,a,o,s,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t,e,n,r){return e.rank<n.rank&&(e=ie(e,Zn(e.shape,r))),t.rank<n.rank&&(t=ie(t,Zn(t.shape,r))),{x:()=>J(t,Fe(su(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5={kernelName:rD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,a=e[0],o=e[1],s=St(i,a.shape),u=DX(t,o,a,s);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbe={kernelName:Uy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>J(t,Fe(Zh(n,r),"float32")),b:()=>J(t,Fe(uC(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e,n,r,i,a,o){const s=K(t,"dy","maxPool3dGrad"),u=K(e,"input","maxPool3dGrad"),l=K(n,"output","maxPool3dGrad");let c=s,f=u,h=l,d=!1;u.rank===4&&(d=!0,c=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=ie(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),z(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),z(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),z(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Wi("maxPool3dGrad",a,o);const p={dy:c,input:f,output:h},v={filterSize:r,strides:i,pad:a,dimRoundingMode:o},m=ee.runKernel(tO,p,v);return d?ie(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const Ybe=ae({maxPool3dGrad_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zbe={kernelName:aD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=n;return{x:()=>Ybe(t,r,i,a,o,s,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t,e,n,r,i,a,o){const s=K(t,"dy","maxPoolGrad"),u=K(e,"input","maxPoolGrad"),l=K(n,"output","maxPoolGrad");z(u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),z(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),z(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Wi("maxPoolGrad",a,o);const c={dy:s,input:u,output:l},f={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return ee.runKernel(eO,c,f)}const Jbe=ae({maxPoolGrad_:Qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eCe={kernelName:iD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s}=n;return{x:()=>Jbe(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tCe={kernelName:oD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,a=St(i,r.shape),s=_r(r.shape,a)[1],u=he(s);return{x:()=>{const c=r.shape.slice();a.forEach(d=>{c[d]=1});const f=ie(t,c);return Ye(J(f,Qh(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nCe={kernelName:sD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,o]=e,s=St(i,a.shape),u=DX(t,o,a,s);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rCe={kernelName:Gy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>J(t,Fe(Bv(n,r),"float32")),b:()=>J(t,Fe(Ha(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iCe={kernelName:uD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>rn(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCe={kernelName:Hy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{const s=fr(n.shape,i);return s.length>0?ie(qe(t,s),n.shape):t},b:()=>{const s=J(t,Fn(PD(Ye(n,r)))),u=fr(r.shape,i);return u.length>0?ie(qe(s,u),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oCe={kernelName:jy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{const s=J(t,Fe(r,"float32")),u=fr(n.shape,i);return u.length>0?ie(qe(s,u),n.shape):s},b:()=>{const s=J(t,Fe(n,"float32")),u=fr(r.shape,i);return u.length>0?ie(qe(s,u),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sCe={kernelName:lD,gradFunc:t=>({x:()=>Fn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uCe={kernelName:hD,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>xr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lCe={kernelName:fD,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cCe={kernelName:dD,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Rh(t,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5={kernelName:pD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>rn(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe={kernelName:qy,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,o=r,s=ht(a.shape,o.shape);return{a:()=>{const c=Fe(o,"float32");let f=J(t,J(c,iv(a,nt(c,Bt(1)))));const h=fr(a.shape,s);return h.length>0&&(f=qe(f,h)),ie(f,a.shape)},b:()=>{const c=Ha(a,0),f=vi(c,uu(a),Nt(a));let h=J(t,J(i,f));const d=fr(o.shape,s);return d.length>0&&(h=qe(h,d)),ie(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hCe={kernelName:vD,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Ha(n,0);return{x:()=>vi(i,t,J(t,r)),alpha:()=>{let a=vi(i,Nt(t),J(t,n));const o=fr(r.shape,t.shape);return o.length>0&&(a=qe(a,o)),ie(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t,e,n){const r=t.shape.slice();r[n]=1;const i=ie(e,r),a=zI(t,n,!0,!1),o=zI(t,n,!0,!0),s=J(a,o);return J(i,s)}function pCe(t,e,n){const r=t.shape.length,i=r-n.length,a=Dn(n,r);let o=t;a!=null&&(o=It(t,a));const s=o.shape.slice(),l=s.splice(r-n.length,n.length).reduce((h,d)=>h*d,1);s.push(l);const c=o.reshape(s);let f=dCe(c,e,i);if(f=f.reshape(o.shape),a!=null){const h=Bc(a);f=It(f,h)}return f}const vCe={kernelName:gD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let a=[];return i==null?a=r.shape.map((o,s)=>s):typeof i=="number"?a=[i]:a=i,{x:()=>pCe(r,t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCe={kernelName:ky,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{const s=Ye(t,Fe(r,"float32")),u=fr(n.shape,i);return u.length>0?ie(qe(s,u),n.shape):s},b:()=>{let s=J(t,Fe(n,"float32"));const u=fr(r.shape,i);u.length>0&&(s=ie(qe(s,u),r.shape));const l=ln(r);return Fn(Ye(s,Fe(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mCe={kernelName:Xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Fn(ln(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yCe={kernelName:Yy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=J(Bv(n,6),g1(n));return{x:()=>J(t,Fe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xCe={kernelName:Ky,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,Fe(g1(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe={kernelName:mD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bCe={kernelName:xD,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ee.runKernel(uO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe={kernelName:yD,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ee.runKernel(sO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe={kernelName:wD,gradFunc:(t,e,n)=>{const{dims:r}=n,i=St(r,t.shape);return{x:()=>Nh(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCe={kernelName:Zy,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ce={kernelName:Qy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fn(Ye(t,J(iv(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TCe={kernelName:bD,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Fe(Nt(n),"float32"),t:()=>J(t,Fe(n,t.dtype)),e:()=>J(t,Fe(NO(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ECe={kernelName:Jy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ha(n,Bt(0)),i=Bt(BD),a=Bt(VD),o=J(t,a),s=J(J(t,i),Zu(Fe(n,"float32")));return vi(r,o,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACe={kernelName:r1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,J(n,nt(Bt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kCe={kernelName:n1,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ICe={kernelName:e1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(_O(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NCe={kernelName:t1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(cq(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RCe={kernelName:CD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,o=r.shape,[s,u]=LD(r,i,a),l=[];for(let c=0;c<t.rank;c++)l.push([s[c],o[c]-s[c]-u[c]]);return{x:()=>MO(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ce={kernelName:TD,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,o=J(t,r);return{logits:()=>nt(o,J(qe(o,[i],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MCe={kernelName:i1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,zv(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5={kernelName:DD,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>SO(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5={kernelName:_D,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Oi(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OCe={kernelName:a1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,J(yi(Fe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FCe={kernelName:lO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,J(Fe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe={kernelName:o1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Bt(2);return{a:()=>J(t,J(i,nt(n,r))),b:()=>J(t,J(i,nt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCe={kernelName:f1,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zCe={kernelName:s1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ht(n.shape,r.shape);return{a:()=>{let s=t;const u=fr(n.shape,i);return u.length>0&&(s=qe(s,u)),ie(s,n.shape)},b:()=>{let s=t;const u=fr(r.shape,i);return u.length>0&&(s=qe(s,u)),ie(Fn(s),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BCe={kernelName:SD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n;St(a,r.shape).forEach(l=>{i[l]=1});const s=ie(t,i),u=J(s,Qh(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VCe={kernelName:u1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,ln(_O(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WCe={kernelName:l1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(nt(Bt(1),ln(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCe={kernelName:c1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=Nt(r);if(r.rank===1)for(let s=0;s<i[0];++s)o=Te(o,rn(t,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)o=Te(o,rn(t,[s*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)for(let l=0;l<i[2];++l)o=Te(o,rn(t,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<i[0];++s)for(let u=0;u<i[1];++u)for(let l=0;l<i[2];++l)for(let c=0;c<i[3];++c)o=Te(o,rn(t,[s*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GCe={kernelName:Ap,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=Bc(i);return{x:()=>It(t,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe={kernelName:ED,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>xc(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jCe={kernelName:AD,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>qCe(t,n)}}};function qCe(t,e){const n=Vc(e,Nt(e)),r=AO(t,n);let i=Zh(e,Bt(0,"int32"));const a=r.rank-i.rank;for(let s=0;s<a;++s)i=Ni(i,s+1);i=Qu(i,Qh(r.shape,"bool"));const o=Nt(r);return vi(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XCe={kernelName:kD,gradFunc:t=>({x:()=>Nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KCe=[SX,jwe,qwe,Xwe,Kwe,Ywe,Zwe,Qwe,Jwe,ebe,tbe,nbe,abe,ube,lbe,cbe,fbe,hbe,dbe,pbe,vbe,gbe,ybe,mbe,bbe,Cbe,Sbe,Dbe,_be,Tbe,gCe,Ebe,Abe,kbe,Ibe,Nbe,$be,Rbe,Mbe,Obe,Fbe,Pbe,Lbe,zbe,Bbe,Vbe,Wbe,Ube,Gbe,qbe,T5,T5,Xbe,Zbe,eCe,tCe,nCe,rCe,iCe,aCe,oCe,sCe,uCe,lCe,cCe,E5,E5,fCe,hCe,vCe,mCe,yCe,xCe,wCe,bCe,CCe,SCe,DCe,_Ce,TCe,ECe,ACe,kCe,ICe,NCe,RCe,$Ce,MCe,A5,A5,k5,k5,OCe,PCe,FCe,LCe,zCe,BCe,VCe,WCe,UCe,GCe,HCe,jCe,XCe];for(const t of KCe)hge(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.abs=function(){return this.throwIfDisposed(),ui(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acos=function(){return this.throwIfDisposed(),Dme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acosh=function(){return this.throwIfDisposed(),Tme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.add=function(t){return this.throwIfDisposed(),Te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.all=function(t,e){return this.throwIfDisposed(),oq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.any=function(t,e){return this.throwIfDisposed(),PI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMax=function(t){return this.throwIfDisposed(),v0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMin=function(t){return this.throwIfDisposed(),Nme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asScalar=function(){return this.throwIfDisposed(),z(this.size===1,()=>"The array must have only 1 element."),ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asType=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as1D=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),ie(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asin=function(){return this.throwIfDisposed(),$me(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asinh=function(){return this.throwIfDisposed(),Ome(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan=function(){return this.throwIfDisposed(),Pme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan2=function(t){return this.throwIfDisposed(),zme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atanh=function(){return this.throwIfDisposed(),Vme(this)};fe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),bO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),SO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),$D(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Am(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cast=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ceil=function(){return this.throwIfDisposed(),p0e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),La(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Xn&&(t=[t]),Oi([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),sq(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),uq(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Ih(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cos=function(){return this.throwIfDisposed(),_O(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cosh=function(){return this.throwIfDisposed(),cq(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),zI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),fq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),z0e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),TO(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),W0e(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.divNoNan=function(t){return this.throwIfDisposed(),q0e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.div=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dot=function(t){return this.throwIfDisposed(),K0e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.elu=function(){return this.throwIfDisposed(),OD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.equal=function(t){return this.throwIfDisposed(),su(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.erf=function(){return this.throwIfDisposed(),J0e(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),uye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.exp=function(){return this.throwIfDisposed(),Zu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expandDims=function(t){return this.throwIfDisposed(),Ni(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expm1=function(){return this.throwIfDisposed(),hye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.fft=function(){return this.throwIfDisposed(),kq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.flatten=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floor=function(){return this.throwIfDisposed(),PD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floorDiv=function(t){return this.throwIfDisposed(),aq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),AO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Zh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greater=function(t){return this.throwIfDisposed(),Ha(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ifft=function(){return this.throwIfDisposed(),BI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.irfft=function(){return this.throwIfDisposed(),ixe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isFinite=function(){return this.throwIfDisposed(),bye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isInf=function(){return this.throwIfDisposed(),Sye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isNaN=function(){return this.throwIfDisposed(),_ye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),IO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.lessEqual=function(t){return this.throwIfDisposed(),Bv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.less=function(t){return this.throwIfDisposed(),uC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Iye(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSigmoid=function(){return this.throwIfDisposed(),Pye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),gq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Vye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log=function(){return this.throwIfDisposed(),uu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log1p=function(){return this.throwIfDisposed(),vq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Qu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalNot=function(){return this.throwIfDisposed(),NO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalOr=function(t){return this.throwIfDisposed(),mq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalXor=function(t){return this.throwIfDisposed(),jye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Lt(this,t,e,n)};fe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),RO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.max=function(t,e){return this.throwIfDisposed(),cs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.maximum=function(t){return this.throwIfDisposed(),Vc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mean=function(t,e){return this.throwIfDisposed(),Kn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.min=function(t,e){return this.throwIfDisposed(),sC(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.minimum=function(t){return this.throwIfDisposed(),y0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),e1e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mod=function(t){return this.throwIfDisposed(),n1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mul=function(t){return this.throwIfDisposed(),J(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.neg=function(){return this.throwIfDisposed(),Fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),FD(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.notEqual=function(t){return this.throwIfDisposed(),lC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),yq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.onesLike=function(){return this.throwIfDisposed(),Ao(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pad=function(t,e){return this.throwIfDisposed(),MO(this,t,e)};fe().prototype.pool=function(t,e,n,r,i,a){return this.throwIfDisposed(),h1e(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pow=function(t){return this.throwIfDisposed(),iv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prelu=function(t){return this.throwIfDisposed(),FO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prod=function(t,e){return this.throwIfDisposed(),v1e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reciprocal=function(){return this.throwIfDisposed(),L1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu=function(){return this.throwIfDisposed(),ed(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu6=function(){return this.throwIfDisposed(),bq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshape=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Mq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Oq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reverse=function(t){return this.throwIfDisposed(),Nh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rfft=function(){return this.throwIfDisposed(),sxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.round=function(){return this.throwIfDisposed(),Cq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rsqrt=function(){return this.throwIfDisposed(),Sq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.selu=function(){return this.throwIfDisposed(),Dq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),_q(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sigmoid=function(){return this.throwIfDisposed(),zv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sign=function(){return this.throwIfDisposed(),q1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sin=function(){return this.throwIfDisposed(),Tq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sinh=function(){return this.throwIfDisposed(),Eq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.slice=function(t,e){return this.throwIfDisposed(),rn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softmax=function(t){return this.throwIfDisposed(),jO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softplus=function(){return this.throwIfDisposed(),d1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),OO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.split=function(t,e){return this.throwIfDisposed(),Ia(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sqrt=function(){return this.throwIfDisposed(),yi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.square=function(){return this.throwIfDisposed(),ln(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),lxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squeeze=function(t){return this.throwIfDisposed(),v1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Xn?[this,t]:[this,...t];return xc(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.step=function(t){return this.throwIfDisposed(),g1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return this.throwIfDisposed(),pxe(this,t,e,n,r,i,a,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sub=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sum=function(t,e){return this.throwIfDisposed(),qe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tan=function(){return this.throwIfDisposed(),gxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tanh=function(){return this.throwIfDisposed(),CO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tile=function(t){return this.throwIfDisposed(),is(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toBool=function(){return this.throwIfDisposed(),Fe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toFloat=function(){return this.throwIfDisposed(),Fe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toInt=function(){return this.throwIfDisposed(),Fe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.topk=function(t,e){return this.throwIfDisposed(),xxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.transpose=function(t){return this.throwIfDisposed(),It(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unique=function(t){return this.throwIfDisposed(),Cxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Rq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unstack=function(t){return this.throwIfDisposed(),Rh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.where=function(t,e){return this.throwIfDisposed(),vi(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.zerosLike=function(){return this.throwIfDisposed(),Nt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fs.prototype)}}class mo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mo.prototype)}}class Q extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Q.prototype)}}class pt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,pt.prototype)}}class kF extends Error{constructor(e){super(e),Object.setPrototypeOf(this,kF.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _X{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $h(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Ps(t,e){if(!t)throw new kF(e)}function I5(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ri(t){return t.length===1?t[0]:t}function sn(t){return Array.isArray(t)?t:[t]}function Ru(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function $f(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Ka={};function IF(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function UI(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>UI(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:UI(r))}}}function w1(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const a=t;let o;if(a in n)o=n[a];else if(a in Ka)o=Ka[a];else if(o=e[a],o==null)throw new Q(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const a=t;if(a.className==null||a.config==null)throw new Q(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const o=a.className;let s,u;if(o in n?[s,u]=n[o]:o in Ka?[s,u]=Ka.className:o in e&&([s,u]=e[o]),s==null)throw new Q(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const d of Object.keys(Ka))l[d]=Ka[d];for(const d of Object.keys(n))l[d]=n[d];const c=a.config;c.customObjects=l;const f=Object.assign({},Ka);for(const d of Object.keys(n))Ka[d]=n[d];UI(a.config);const h=u(s,a.config,n,i);return Ka=Object.assign({},f),h}else{const l=Object.assign({},Ka);for(const f of Object.keys(n))Ka[f]=n[f];const c=new s(a.config);return Ka=Object.assign({},l),c}}}function YCe(t,e){return t<e?-1:t>e?1:0}function Ix(t,e){return-1*YCe(t,e)}function lc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function ZCe(t){if(t==null)throw new Q(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function nd(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Q(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function NF(t,e,n=0,r=1/0){return Ps(n>=0),Ps(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function br(t,e){Array.isArray(t)?(z(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>br(n,`element ${r+1} of ${e}`))):z(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${TX(t)}.`)}function TX(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>TX(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function QCe(t,e,n){let r=n!=null?n():Ii(),i;return(...o)=>{const s=n!=null?n():Ii();return s-r<e||(r=s,i=t(...o)),i}}function EX(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let JCe=0;function AX(){return JCe++}const Nx={};function WD(t=""){return t in Nx||(Nx[t]=0),Nx[t]+=1,t+Nx[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const eSe=["channelsFirst","channelsLast"],tSe=["nearest","bilinear"],nSe=["valid","same","causal"],rSe=["max","avg"],iSe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gd=new Map;function Vn(t){nd(eSe,"DataFormat",t)}function aSe(t){nd(tSe,"InterpolationFormat",t)}function ja(t){nd(nSe,"PaddingMode",t)}function kX(t){nd(rSe,"PoolMode",t)}const km=[],N5="/";function nh(t,e){km.push(t);try{const n=e();return km.pop(),n}catch(n){throw km.pop(),n}}function oSe(){return km.length===0?"":km.join(N5)+N5}function IX(t){if(!RX(t))throw new Error("Not a valid tensor name: '"+t+"'");return oSe()+t}function NX(t){if(!RX(t))throw new Error("Not a valid tensor name: '"+t+"'");gd.has(t)||gd.set(t,0);const e=gd.get(t);if(gd.set(t,gd.get(t)+1),e>0){const n=`${t}_${e}`;return gd.set(n,1),n}else return t}const sSe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function RX(t){return!!t.match(sSe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uSe(t){return t===parseInt(t.toString(),10)}function cc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function ov(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function wc(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ms(t,e){if(e<t)throw new Q(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let aE;function ar(){return aE==null&&(aE=mme().epsilon()),aE}function ys(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tu(t,e){return Fe(t,e)}function b1(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ie(t,n)}function lSe(t,e){return se(()=>{if(t.shape.length!==2)throw new Q(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=b1(t,1);return GI(n,[1,e,1])})}function cSe(t){const e=[cc(t.shape)];return ie(t,e)}function fSe(t){if(t.rank<=1)throw new Q(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],cc(t.shape,1)];return ie(t,e)}function rh(t,e,n){return se(()=>{switch(t.rank){case 1:return GO(t,e,n);case 2:return Aq(t,[e,0],[n,t.shape[1]]);case 3:return HO(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return fC(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return rn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return rn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Q(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function oE(t,e,n){return se(()=>{switch(t.rank){case 1:return GO(t,e,n);case 2:return Aq(t,[0,e],[t.shape[0],n]);case 3:return HO(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return fC(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Rx(t,e,n,r){return se(()=>{switch(t.rank){case 1:return GO(t,e,n);case 2:switch(r){case 1:return rh(t,e,n);case 2:return oE(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return rh(t,e,n);case 2:return HO(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return oE(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return rh(t,e,n);case 2:return fC(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return fC(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return oE(t,e,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function RF(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Oi(t,e)}function R5(t,e){switch(t.rank){case 1:return m0e([t,e]);case 2:return x0e([t,e],0);case 3:return b0e([t,e],0);case 4:return S0e([t,e],0);default:throw new Q(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function GI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Q(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return is(t,e)}function UD(t,e=0,n=1,r,i){return M1e(t,e,n,r,i)}function nu(t,e,n,r){if(t.rank<2||e.rank<2)throw new pt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(i!==a)throw new pt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return g5({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?HI(t.rank,r,ys()):null,activation:n});{const i=t.shape.slice(),a=i.pop();t=ie(t,[-1,a]);const o=e.shape.slice(),s=o.pop(),u=o.pop(),l=[...o,s],c=Array.from({length:e.rank},(p,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=ie(It(e,c),[u,-1]);const f=[...i,...l];return ie(g5({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?HI(t.rank,r,ys()):null,activation:n}),f)}}function $X(t,e,n){return se(()=>(Array.isArray(e)?e=ia(e,"int32"):e=Fe(e,"int32"),AO(t,e,n)))}function C1(t){return J(t,t)}function HI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Q(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1,1]):ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1]):ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1]):ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,r[0]]):ie(e,[1].concat(r))}else if(t<3)return e;throw new Q(`Unsupported input rank by biasAdd: ${e.rank}`)}function Cs(t,e,n){return se(()=>(n==null&&(n=ys()),Vn(n),Te(t,HI(t.rank,e,n))))}function hSe(t,e=1){if(e!==1)throw new pt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return OD(t)}function dSe(t){return se(()=>Ye(t,Te(ui(t),1)))}function MX(t,e,n,r){return se(()=>kxe(t,e,n,r))}function pSe(t){return se(()=>{const e=Te(.5,J(.2,t));return La(e,0,1)})}function S1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const vSe=["fanIn","fanOut","fanAvg"],gSe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mSe(t){nd(vSe,"FanMode",t)}function ySe(t){nd(gSe,"Distribution",t)}class Fo extends Wv{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class OX extends Fo{apply(e,n){return xr(e,n)}}OX.className="Zeros";be(OX);class $F extends Fo{apply(e,n){return Qh(e,n)}}$F.className="Ones";be($F);class FX extends Fo{constructor(e){if(super(),typeof e!="object")throw new Q(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Q(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return se(()=>J(Bt(this.value),Qh(e,n)))}getConfig(){return{value:this.value}}}FX.className="Constant";be(FX);class PX extends Fo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return p1(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}PX.className="RandomUniform";be(PX);class LX extends Fo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new pt(`randomNormal does not support dType ${n}.`);return UD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}LX.className="RandomNormal";be(LX);class zX extends Fo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new pt(`truncatedNormal does not support dType ${n}.`);return Nq(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}zX.className="TruncatedNormal";be(zX);class BX extends Fo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return se(()=>{if(e.length!==2||e[0]!==e[1])throw new Q("Identity matrix initializer can only be used for 2D square matrices.");return J(this.gain,pq(e[0]))})}getConfig(){return{gain:this.gain}}}BX.className="Identity";be(BX);function xSe(t,e="channelsLast"){let n,r;if(Vn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=cc(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=cc(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=cc(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class va extends Fo{constructor(e){if(super(),e.scale<0)throw new Q(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,mSe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,ySe(this.distribution),this.seed=e.seed}apply(e,n){const r=xSe(e),i=r[0],a=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),this.distribution==="normal"){const s=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new pt(`${this.getClassName()} does not support dType ${n}.`);return Nq(e,0,s,n,this.seed)}else{const s=Math.sqrt(3*o);return p1(e,-s,s,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}va.className="VarianceScaling";be(va);class MF extends va{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return va.className}}MF.className="GlorotUniform";be(MF);class OF extends va{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return va.className}}OF.className="GlorotNormal";be(OF);class FF extends va{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return va.className}}FF.className="HeNormal";be(FF);class PF extends va{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return va.className}}PF.className="HeUniform";be(PF);class LF extends va{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return va.className}}LF.className="LeCunNormal";be(LF);class zF extends va{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return va.className}}zF.className="LeCunUniform";be(zF);class VX extends Fo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return se(()=>{if(e.length<2)throw new pt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=he(e.slice(0,-1)),i=e[e.length-1],a=r*i;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],s=UD(o,0,1,n,this.seed),u=_we.qr(s,!1);let l=u[0];const f=u[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return l=J(l,f.sign()),r<i&&(l=l.transpose()),J(Bt(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}VX.className="Orthogonal";be(VX);const $5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function M5(t,e={}){return w1(t,co.getMap().classNameMap,e,"initializer")}function Sn(t){return IF(t)}function gn(t){if(typeof t=="string"){const e=t in $5?$5[t]:t;if(e==="GlorotNormal")return new OF;if(e==="GlorotUniform")return new MF;if(e==="HeNormal")return new FF;if(e==="HeUniform")return new PF;if(e==="LeCunNormal")return new LF;if(e==="LeCunUniform")return new zF;{const n={};return n.className=e,n.config={},M5(n)}}else return t instanceof Fo?t:M5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jI(t){return Array.isArray(t)&&Array.isArray(t[0])}function hC(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function tt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Q(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ft(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Q(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dC(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const O5="Variable";class wSe{constructor(e,n="float32",r=O5,i=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=AX(),r=r??O5,this.originalName=IX(r),this.name=NX(this.originalName),this.trainable_=i,this.constraint=a,this.val=_xe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),bSe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function bSe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function qI(t){return t.map(e=>e.read())}function BF(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class or{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Gs{constructor(e,n,r,i,a,o,s){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=a,this.outputTensorIndex=s,this.id=AX(),o!=null&&(this.originalName=IX(o),this.name=NX(this.originalName)),this.rank=n.length}}let CSe=0,GD=class{constructor(e,n){this.callArgs=n,this.id=CSe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},SSe=0,Dt=class extends Wv{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=SSe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ru(r)+"_"+WD(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new mo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Q(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ri(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ri(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Fs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Fs(`Layer ${this.name} is not connected, no input to return.`);return Ri(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Fs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Fs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ri(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=sn(e),this.inputSpec==null||this.inputSpec.length===0)return;const n=sn(this.inputSpec);if(e.length!==n.length)throw new Q(`Layer ${this.name} expects ${n.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let r=0;r<e.length;r++){const i=e[r],a=n[r];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new Q(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new Q(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new Q(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new Q(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const s=i.shape;for(const u in a.axes){const l=Number(u),c=a.axes[u],f=l>=0?s[l]:s[s.length+l];if(c!=null&&[c,null].indexOf(f)===-1)throw new Q(`Input ${r} is incompatible with layer ${this.name}: expected axis ${l} of input shape to have value ${c} but got shape ${s}.`)}}if(a.shape!=null)for(let s=0;s<a.shape.length;++s){const u=a.shape[s],l=i.shape[s];if(u!=null&&l!=null&&u!==l)throw new Q(`Input ${r} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=sn(e);let i=!0;for(const o of r)if(!(o instanceof Gs)){i=!1;break}let a=!0;for(const o of r)if(o instanceof Gs){a=!1;break}if(i===a)throw new Q("Arguments to apply() must be all SymbolicTensors or all Tensors");return nh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const s of sn(e))o.push(s.shape);this.build(Ri(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let o=this.call(e,n);const s=sn(o),u=[];for(let l of s)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(o=Ri(u),this.activityRegularizer!=null)throw new pt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=DSe(e),s=this.computeOutputShape(o);let u;const l=_Se(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),s!=null&&s.length>0&&Array.isArray(s[0])?u=s.map((c,f)=>new Gs(l,c,this,sn(e),n,this.name,f)):u=new Gs(l,s,this,sn(e),n,this.name),this.addInboundNode(e,u,null,null,o,s,n),this._refCount++,this.activityRegularizer!=null)throw new pt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Fs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Fs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new mo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return dC(this.weights)}build(e){this.built=!0}getWeights(e=!1){return qI(e?this.trainableWeights:this.weights)}setWeights(e){se(()=>{const n=this.weights;if(n.length!==e.length)throw new Q(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=qI(n);for(let a=0;a<i.length;++a){const o=i[a],s=n[a],u=e[a];if(!zt(o.shape,u.shape))throw new Q(`Layer weight shape ${o.shape} not compatible with provided weight shape ${u.shape}`);r.push([s,u])}BF(r)})}addWeight(e,n,r,i,a,o,s,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new Q(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():gn("zeros"));const l=i.apply(n,r),c=new wSe(l,r,e,o,s);return l.dispose(),a!=null&&this.addLoss(()=>a.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=sn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(e,n,r,i,a,o,s=null){const u=sn(e);n=sn(n),r=sn(r),i=sn(i),a=hC(a),o=hC(o);const l=[],c=[],f=[];for(const h of u)l.push(h.sourceLayer),c.push(h.nodeIndex),f.push(h.tensorIndex);new GD({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:a,outputShapes:o},s);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function DSe(t){t=sn(t);const e=[];for(const n of t)e.push(n.shape);return Ri(e)}function _Se(t){return"float32"}function WX(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let a=0;a<r.inboundLayers.length;a++){const o=r.inputTensors[a],s=r.inboundLayers[a],u=r.nodeIndices[a],l=WX(o,s,u);for(const c of l)i.indexOf(c)===-1&&i.push(c)}return i}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D1 extends Dt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:WD("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Gs(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new GD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Q(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}D1.className="InputLayer";be(D1);function TSe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new D1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ESe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Fe(e,t.dtype)}catch{throw new Q(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class zl{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof zl)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=ESe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Q(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Gs){if(this.id2Value[e.id]==null)throw new Q(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Gs){if(this.id2Value[e.id]==null)throw new Q(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&mt(this.id2Mask)}}const pC=new _X,vC=new _X;function ASe(t){pC!=null&&pC.setMaxEntries(t),vC!=null&&vC.setMaxEntries(t)}function nm(t,e,n,r){const i=n==null?!1:n.training,a=Array.isArray(t),o=a?t:[t],s=o.map(p=>p.name),u=[],l=e.names();for(const p of s)l.indexOf(p)!==-1?u.push(e.getValue(p)):u.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+e.names().sort().join(",");let f=pC.get(c),h;if(f==null){const p=kSe(o,e);f=p.sorted,h=p.recipientCounts,pC.put(c,f),vC.put(c,h)}h={},i||Object.assign(h,vC.get(c));const d=new zl(e);for(let p=0;p<f.length;++p){if(r!=null){const _=FI().numTensors;_>r.maxNumTensors&&(r.maxNumTensors=_),_<r.minNumTensors&&(r.minNumTensors=_)}const v=f[p],m=v.sourceLayer;if(m instanceof D1)continue;const g=[],y=[],x=[];let w=!1;for(const _ of v.inputs){const T=d.getValue(_),E=d.getMask(_);g.push(T),y.push(E),E!=null&&(w=!0),i||(h[_.name]--,h[_.name]===0&&!e.hasKey(_)&&s.indexOf(_.name)===-1&&!T.isDisposed&&_.sourceLayer.stateful!==!0&&x.push(T))}w&&(n=n||{},n.mask=y[0]);const b=sn(m.apply(g,n));let C=null;m.supportsMasking&&(C=m.computeMask(g,y));const D=NSe(v),S=Array.isArray(D)?D:[D];for(let _=0;_<S.length;++_){d.hasKey(S[_])||d.add(S[_],b[_],Array.isArray(C)?C[0]:C);const T=s.indexOf(S[_].name);T!==-1&&(u[T]=b[_])}i||mt(x)}return d.disposeMasks(),a?u:u[0]}function kSe(t,e){z(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=F5(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:o,recipientMap:s}=F5(a,e);for(const u of o)i.has(u.name)||(n.push(u),i.add(u.name));for(const u in s)r[u]==null&&(r[u]=new Set),s[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:ISe(r)}}function ISe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function F5(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const a=[],o=[];for(a.push(t);a.length>0;){const s=a[a.length-1];if(n.has(s.name)){a.pop();continue}const u=o[o.length-1]===a.length-1;if(s.inputs.length===0||u)a.pop(),r.push(s),n.add(s.name),u&&o.pop();else{o.push(a.length-1);for(const l of s.inputs)i[l.name]==null&&(i[l.name]=new Set),i[l.name].add(s.name),!n.has(l.name)&&a.push(l)}}return{sorted:r,recipientMap:i}}function NSe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe=le();RSe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,ASe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VF(t,e){return se(()=>yi(qe(J(t,t),e,!0)))}class _1 extends Wv{getConfig(){return{}}}class UX extends _1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return se(()=>{const n=VF(e,this.axis),r=La(n,0,this.maxValue);return J(e,Ye(r,Te(ar(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}UX.className="MaxNorm";be(UX);class GX extends _1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return se(()=>Ye(e,Te(ar(),VF(e,this.axis))))}getConfig(){return{axis:this.axis}}}GX.className="UnitNorm";be(GX);class HX extends _1{apply(e){return ed(e)}}HX.className="NonNeg";be(HX);class jX extends _1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return se(()=>{const n=VF(e,this.axis),r=Te(J(this.rate,La(n,this.minValue,this.maxValue)),J(1-this.rate,n));return J(e,Ye(r,Te(ar(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}jX.className="MinMaxNorm";be(jX);const P5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ur(t){return IF(t)}function L5(t,e={}){return w1(t,co.getMap().classNameMap,e,"constraint")}function lr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in P5?P5[t]:t,config:{}};return L5(n)}else return t instanceof _1?t:L5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Qc(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if(typeof a!="number"){const o=a;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let a=0;a<i.length;++a)t[n[a]]=i[a][0];mt(r)}}function qX(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var z5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(z5||(z5={}));const $Se=125;class w0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class MSe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class OSe extends w0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const a=n[i];if(typeof a=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+a*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const s=se(()=>Te(this.totals[i],J(a,r)));this.totals[i]=s,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:se(()=>{const i=J(Ye(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Js(n[r])}))}}class FSe extends w0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const o=this.history[a];for(let s=0;s<o.length;++s)if(typeof o[s]!="number"){const u=o[s];e.push(u.data()),n.push(a),r.push(s)}}const i=await Promise.all(e);for(let a=0;a<i.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=i[a][0]}}class PSe extends w0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Qq,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=$Se),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");bI(this.yieldEvery)&&(this.maybeWait=QCe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Qc(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Qc(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Qc(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Qc(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Qc(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):bI(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Qc(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Qc(e),await this.trainEnd(e))}}function XX(t,e){return t==null&&(t={}),t instanceof w0?[t]:Array.isArray(t)&&t[0]instanceof w0?t:sn(t).map(r=>new PSe(r,e))}class no{constructor(){}static registerCallbackConstructor(e,n){z(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),no.checkForDuplicate(n),no.constructors[e]==null&&(no.constructors[e]=[]),no.constructors[e].push(n)}static checkForDuplicate(e){for(const n in no.constructors)no.constructors[+n].forEach(i=>{if(i===e)throw new Q("Duplicate callback constructor.")})}static clear(){no.constructors={}}static createCallbacks(e){const n=[];for(const r in no.constructors){const i=+r;e>=i&&n.push(...no.constructors[i])}return n.map(r=>new r)}}no.constructors={};function KX(t,e,n,r,i,a,o,s,u){const l=new FSe,c=[new OSe,...no.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const f=new MSe(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:u}),{callbackList:f,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ru(t,e={},n=!1){return w1(t,co.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gC(t,e){return se(()=>{t.dtype!=="float32"&&(t=Fe(t,"float32"));const n=qe(C1(t),e,!0),r=MD(n.shape,ar()),i=yi(Vc(n,r));return Ye(t,i)})}function HD(t,e){return se(()=>Kn(C1(nt(e,t)),-1))}function WF(t,e){return se(()=>Kn(ui(nt(e,t)),-1))}function UF(t,e){return se(()=>{const n=nt(t,e),r=La(ui(t),ar(),Number.MAX_VALUE),i=ui(Ye(n,r));return J(100,Kn(i,-1))})}function LSe(t,e){return se(()=>{const n=La(e,ar(),Number.MAX_VALUE),r=uu(Te(1,n)),i=La(t,ar(),Number.MAX_VALUE),a=uu(Te(1,i));return Kn(C1(nt(r,a)),-1)})}function zSe(t,e){return se(()=>{const n=Vc(0,nt(1,J(t,e)));return Kn(C1(n),-1)})}function BSe(t,e){return se(()=>{const n=Vc(0,nt(1,J(t,e)));return Kn(n,-1)})}function VSe(t,e){return se(()=>{const n=qe(J(t,e),-1),r=cs(J(nt(1,t),e),-1);return Vc(0,Te(1,nt(r,n)))})}function WSe(t,e){return se(()=>{const n=Math.log(2),r=nt(e,t),i=nt(Te(r,d1(J(-2,r))),n);return Kn(i,-1)})}function b0(t,e,n=!1){return se(()=>{if(n)e=jO(e);else{const r=qe(e,e.shape.length-1,!0);e=Ye(e,r)}return e=La(e,ar(),1-ar()),Fn(qe(J(Fe(t,"float32"),uu(e)),e.shape.length-1))})}function mC(t,e,n=!1){return se(()=>{const r=Fe(PD(cSe(t)),"int32");e=La(e,ar(),1-ar());const i=e.shape,a=ie(yq(r,i[i.length-1]),i);return b0(a,e,n)})}function USe(t,e){if(!zt(t.shape,e.shape))throw new Q(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return se(()=>{const n=ed(e),r=Fn(ui(e));return Te(nt(n,J(e,t)),vq(Zu(r)))})}function jD(t,e){return se(()=>{let n;return n=La(e,ar(),1-ar()),n=uu(Ye(n,nt(1,n))),Kn(USe(t,n),-1)})}function GSe(t,e){return se(()=>{const n=La(t,ar(),1),r=La(e,ar(),1);return qe(J(t,uu(Ye(n,r))),-1)})}function HSe(t,e){return se(()=>{const n=uu(Te(ar(),e));return Kn(nt(e,J(t,n)),-1)})}function YX(t,e){return se(()=>{const n=gC(t,-1),r=gC(e,-1),i=J(n,r);return Fn(qe(i,-1))})}const yC={meanSquaredError:HD,meanAbsoluteError:WF,meanAbsolutePercentageError:UF,meanSquaredLogarithmicError:LSe,squaredHinge:zSe,hinge:BSe,categoricalHinge:VSe,logcosh:WSe,categoricalCrossentropy:b0,sparseCategoricalCrossentropy:mC,binaryCrossentropy:jD,kullbackLeiblerDivergence:GSe,poisson:HSe,cosineProximity:YX};function sE(t){if(typeof t=="string"){if(t in yC)return yC[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Q(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZX(t,e){return se(()=>{const n=J(.5,Ao(e)),r=tu(Ha(e,n),t.dtype);return Kn(su(t,r),-1)})}function QX(t,e){return se(()=>tu(su(v0(t,-1),v0(e,-1)),"float32"))}function jSe(t,e){return se(()=>Fe(qe(Qu(su(t,1),su(e,1))),"float32"))}function qSe(t,e){return se(()=>Fe(qe(Qu(su(t,0),su(e,1))),"float32"))}function XSe(t,e){return se(()=>{const n=jSe(t,e),r=qSe(t,e),i=Te(n,r);return Fe(vi(Ha(i,0),Ye(n,i),0),"float32")})}function KSe(t,e){return jD(t,e)}function YSe(t,e){return t.rank===e.rank&&(t=v1(t,[t.rank-1])),e=v0(e,-1),e.dtype!==t.dtype&&(e=Fe(e,t.dtype)),Fe(su(t,e),"float32")}const ZSe=HD,QSe=HD,JSe=WF,e2e=WF,t2e=UF,n2e=UF,JX=b0,r2e=YX,eK=mC,xC={binaryAccuracy:ZX,categoricalAccuracy:QX,precision:XSe,categoricalCrossentropy:JX,sparseCategoricalCrossentropy:eK,mse:ZSe,MSE:QSe,mae:JSe,MAE:e2e,mape:t2e,MAPE:n2e,cosine:r2e};function i2e(t){if(typeof t=="string"&&t in xC)return xC[t];if(typeof t!="string"&&t!=null)return t;throw new Q(`Unknown metric ${t}`)}function $x(t){if(Ps(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(yC))if(yC[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(xC))if(xC[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a2e(t){const e={Adagrad:()=>vd.adagrad(.01),Adadelta:()=>vd.adadelta(1,.95,ar()),Adam:()=>vd.adam(.001,.9,.999,ar()),Adamax:()=>vd.adamax(.002,.9,.999,ar(),0),RMSProp:()=>vd.rmsprop(.001,.9,0,ar()),SGD:()=>vd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Q(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const B5=1*1024*1024;function V5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!XI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>B5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${B5}.`)}}function XI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!XI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!XI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o2e(t,e,n,r=console.log){const i=u2e(t),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!i){a.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),wC(a,n,r),r("=".repeat(e));const s=t.layers;for(let c=0;c<s.length;++c)i?l2e(s[c],n,r):c2e(s[c],n,o,r),r((c===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=s2e(t),l=dC(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function s2e(t){let e;return t.collectedTrainableWeights!=null?e=dC(t.collectedTrainableWeights):e=dC(t.trainableWeights),e}function u2e(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let a=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function wC(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function l2e(t,e,n){let r,i;try{i=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,o=t.getClassName(),s=[`${a} (${o})`,i,r,t.countParams().toString()];wC(s,e,n)}function c2e(t,e,n,r){let i,a;try{a=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let h=0;h<f.inboundLayers.length;++h){const d=f.inboundLayers[h].name,p=f.nodeIndices[h],v=f.tensorIndices[h];o.push(`${d}[${p}][${v}]`)}const s=t.name,u=t.getClassName(),l=o.length===0?"":o[0],c=[`${s} (${u})`,a,i,t.countParams().toString(),l];wC(c,e,r);for(let f=1;f<o.length;++f)wC(["","","","",o[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tK(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function bC(t,e){if(t===null)return null;if(typeof t=="string")return $f(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];tK(e,i,a)?n.push(a):n.push(bC(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const a=$f(r);n[a]=bC(i,a)}}return n}}function KI(t,e){if(t==null)return null;if(typeof t=="string")return Ru(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];tK(e,i,a)?n.push(a):n.push(KI(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],a=Ru(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=KI(i,r)}return n}}/** @license See the LICENSE file. */const nK="4.10.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Xo extends Dt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=WD(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],lc(this.inputs).length!==this.inputs.length)throw new Q(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);lc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const x=y.sourceLayer,w=y.nodeIndex,b=y.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(b)}for(const y of this.inputs){const x=y.sourceLayer,w=y.nodeIndex,b=y.tensorIndex;Ps(w===0,"input layer has >1 nodes"),Ps(b===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(b)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const x=this.inputLayers[y];if(!(x instanceof D1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},a={},o={},s=[],u=(y,x,w,b,C,D)=>{(b==null||C==null||D==null)&&(b=y.sourceLayer,C=y.nodeIndex,D=y.tensorIndex);const S=b.inboundNodes[C];if(w.indexOf(S)!==-1)throw new mo(`The tensor ${y.name} at layer "${b.name}" is part of a cycle.`);if(x.indexOf(S)!==-1)return;this.containerNodes.add(Xo.nodeKey(b,C)),b.id in o||(o[b.id]=Object.keys(o).length),w.indexOf(S)===-1&&w.push(S);const _=S.inboundLayers.length;for(let T=0;T<_;T++){const E=S.inputTensors[T],A=S.inboundLayers[T],N=S.nodeIndices[T],R=S.tensorIndices[T];u(E,x,w,A,N,R)}for(x.push(S);w.indexOf(S)>=0;)w.splice(w.indexOf(S),1);s.push(S)},l=[],c=[];for(const y of this.outputs)u(y,l,c);const f=s.slice().reverse();for(const y of f){r[y.id]=y,y.id in n||(n[y.id]=0);let x=n[y.id];const w=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];x=Math.max(x,w),i[y.outboundLayer.id]=x,a[y.outboundLayer.id]=y.outboundLayer,n[y.id]=x;for(let b=0;b<y.inboundLayers.length;b++){const C=y.inboundLayers[b],D=y.nodeIndices[b],S=C.inboundNodes[D],_=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(x+1,_),r[S.id]=S}}const h={};for(const y in n){const x=n[y];x in h||(h[x]=[]),h[x].push(r[y])}const d={};for(const y in i){const x=i[y];x in d||(d[x]=[]),d[x].push(a[y])}let p=Object.keys(d).map(y=>parseInt(y,10)).sort(Ix);this.layers=[];for(const y of p){const x=d[y];x.sort((w,b)=>{const C=o[w.id],D=o[b.id];return C<D?-1:C>D?1:0});for(const w of x)w instanceof Xo&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=d,p=Object.keys(h).map(y=>parseInt(y,10)).sort(Ix);const v=this.inputs.slice(),m=[];for(const y of p)for(const x of h[y]){const w=x.outboundLayer;if(w!=null){for(const b of x.inputTensors)if(v.indexOf(b)===-1)throw new mo(`Graph disconnected: cannot obtain value for tensor ${b} at layer "${w.name}". The following previous layers were accessed without issue: ${m}`);for(const b of x.outputTensors)v.push(b);m.push(w.name)}}this.nodesByDepth=h;const g=this.layers.map(y=>y.name);for(const y of g){const x=g.filter(w=>w===y).length;if(x!==1)throw new mo(`The name "${y}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new GD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const a=Object.keys(e)[0].split("/"),o=!isNaN(parseInt(a[a.length-1],10));for(const u of this.layers)for(const[l,c]of u.weights.entries()){const f=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[f]!=null)throw new Q(`Duplicate weight name: ${f}`);r[f]=c,i++}const s=[];for(const u in e){let l=u;if(r[u]==null){const c=u.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],e[u]]);else if(n)throw new Q(`Provided weight data has no target variable: ${u}`);delete r[l]}if(n){const u=[];for(const l in r)u.push(l);if(u.length>0)throw new Q(`${u.length} of ${i} weights are not set: ${u}`)}BF(s)}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${nK}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=KI(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return se(()=>{e=sn(e);const r=new zl;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return nm(this.outputs,r,n)})}computeMask(e,n){return se(()=>{e=sn(e);let r;return n==null?r=$h(null,e.length):r=sn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=hC(e);if(n.length!==this.inputLayers.length)throw new Q(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let s=0;s<n.length;s++){const u=this.inputLayers[s],l=n[s],c=u.name+"_0_0";r[c]=l}const i=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(Ix);if(i.length>1)for(const s of i){const u=this.nodesByDepth[s];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(c.id)!==-1)continue;const f=[];for(let v=0;v<l.inboundLayers.length;v++){const m=l.inboundLayers[v],g=l.nodeIndices[v],y=l.tensorIndices[v],x=`${m.name}_${g}_${y}`,w=r[x];f.push(w)}const h=c.computeOutputShape(Ri(f)),d=hC(h),p=c.inboundNodes.indexOf(l);for(let v=0;v<d.length;v++){const m=`${c.name}_${p}_${v}`;r[m]=d[v]}}}const a=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const u=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=this.outputLayersTensorIndices[s],f=`${u.name}_${l}_${c}`;o.push(f)}for(let s=0;s<o.length;s++){const u=o[s];Ps(u in r),a.push(r[u])}return Ri(a)}runInternalGraph(e,n){n==null&&(n=$h(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],f=n[u];r[l.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Ix);for(const u of i){const l=this.nodesByDepth[u];for(const c of l){const f=c.outboundLayer,h=c.inputTensors,d=c.outputTensors,p=new Array;for(const v of h)v.id in r&&p.push(r[v.id]);if(p.length===h.length){let v={},m,g,y,x;if(c.callArgs!=null&&(v=c.callArgs),p.length===1){const[w,b]=p[0];v.mask==null&&(v.mask=b),y=sn(f.call(w,v)),x=sn(f.computeMask(w,b)),m=[w],g=[b]}else m=p.map(w=>w[0]),g=p.map(w=>w[1]),v.mask==null&&(v.mask=g),y=sn(f.call(m,v)),x=sn(f.computeMask(m,g));if(f.activityRegularizer)throw new pt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<d.length;++w){const b=d[w],C=y[w],D=x[w];r[b.id]=[C,D]}}}}const a=[],o=[],s=[];for(const u of this.outputs){Ps(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];s.push(l.shape),a.push(l),o.push(c)}return[a,o,s]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Xo?1:0;for(let a=0;a<i.inboundNodes.length;a++){const o=Xo.nodeKey(i,a);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Q("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Q(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Q(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return se(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Xo.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const s=o.getClassName(),u=o.getConfig(),l=[];for(let f=0;f<o.inboundNodes.length;f++){const h=o.inboundNodes[f],d=Xo.nodeKey(o,f);let p={};if(this.containerNodes.has(d)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const v=[];for(let m=0;m<h.inboundLayers.length;m++){const g=h.inboundLayers[m],y=h.nodeIndices[m],x=h.tensorIndices[m],w=Xo.nodeKey(g,y);let b=n[w];b==null&&(b=0),v.push([g.name,b,x,p])}l.push(v)}}}const c={};c.name=o.name,c.className=s,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const s=this.inputLayers[o],u=this.inputLayersNodeIndices[o],l=Xo.nodeKey(s,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.inputLayersTensorIndices[o];i.push([s.name,c,f])}e.inputLayers=i;const a=[];for(let o=0;o<this.outputLayers.length;o++){const s=this.outputLayers[o],u=this.outputLayersNodeIndices[o],l=Xo.nodeKey(s,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.outputLayersTensorIndices[o];a.push([s.name,c,f])}return e.outputLayers=a,e}static fromConfig(e,n,r={},i=!1){const a={},o={};function s(m,g){m.name in o?o[m.name].push(g):o[m.name]=[g]}function u(m,g){const y=[];let x;for(const w of g){const b=w[0],C=w[1],D=w[2];if(x=w[3]==null?{}:w[3],!(b in a)){s(m,g);return}const S=a[b];if(S.inboundNodes.length<=C){s(m,g);return}const _=S.inboundNodes[C];y.push(_.outputTensors[D])}y.length>0&&m.apply(Ri(y),x)}function l(m){const g=m.name,y=ru(m,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),a[g]=y,m.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new Q(`Corrupted configuration, expected array for nodeData: ${w}`);s(y,w)})}const c=n.name,f=n.layers;for(const m of f)l(m);for(;!ZCe(o);)for(const m of f){const g=a[m.name];if(g.name in o){const y=o[g.name];delete o[g.name];for(const x of y)u(g,x)}}const h=[],d=[],p=n.inputLayers;for(const m of p){const g=m[0],y=m[1],x=m[2];Ps(g in a);const b=a[g].inboundNodes[y].outputTensors;h.push(b[x])}const v=n.outputLayers;for(const m of v){const g=m[0],y=m[1],x=m[2];Ps(g in a);const b=a[g].inboundNodes[y].outputTensors;d.push(b[x])}return new e({inputs:h,outputs:d,name:c})}get stateful(){if(this._stateful)throw new Q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){se(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f2e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(a=>{a in t?i.push(t[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function rK(t,e){return f2e(t,e,"classWeight")}async function iK(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=se(()=>{if(t.shape.length===1)return th(t);if(t.shape.length===2){if(t.shape[1]>1)return v0(t,1);if(t.shape[1]===1)return ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());mt(i);const o=[];return a.forEach(s=>{if(n[s]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${s} exists in the data but not in classWeight`);o.push(n[s])}),ia(o,"float32")}else return null}function h2e(t,e){return J(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const d2e=32;function aK(t,e){let n,r;const i=e;n=i.xs,r=i.ys,z(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=W5("input",t.inputNames,n),o=W5("output",t.outputNames,r),s=a[0].shape[0];z(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),z(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<a.length;u++)z(a[u].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${a[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let u=0;u<o.length;u++)z(o[u].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${o[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:a,ys:o}}function W5(t,e,n){if(n instanceof Xn)return[n];if(Array.isArray(n))return z(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new Q(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function p2e(t){if(t.length===3)throw new pt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function v2e(t,e,n){const r=n.batchesPerEpoch!=null;if(z(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),z(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),z(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),z(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),z(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let a,o;if(i)if(U5(n.validationData))z(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=p2e(n.validationData);a=m.xs,o=m.ys}const s=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;i?l=u.slice().concat(u.map(m=>"val_"+m)):l=u.slice();const c=XX(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:h,history:d}=KX(c,f,n.epochs,null,null,g2e(e,n),null,i,l);h.setModel(t),t.history=d,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;p<n.epochs;){const m={};await h.onEpochBegin(p);let g=0,y=0;for(r||(v=await e.iterator());!r||g<n.batchesPerEpoch;){const x=await v.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:w,ys:b}=aK(t,x.value),C={};C.batch=y,C.size=w[0].shape[0],await h.onBatchBegin(y,C);const D=[];if(n.classWeight!=null){const T=rK(n.classWeight,t.outputNames);for(let E=0;E<T.length;++E)D.push(await iK(b[E],null,T[E]))}const S=w.concat(b).concat(D),_=s(S);mt(S);for(let T=0;T<u.length;++T){const E=u[T],A=_[T];C[E]=A,Js(A)}await h.onBatchEnd(y,C),qX(C),y++,g++}if(r?g>=n.batchesPerEpoch:x.done){if(i){let w;U5(n.validationData)?w=sn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=sn(t.evaluate(a,o,{batchSize:n.validationBatchSize==null?d2e:n.validationBatchSize,verbose:0}));for(let b=0;b<t.metricsNames.length;++b)m[`val_${t.metricsNames[b]}`]=w[b]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,m),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function g2e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function U5(t){return typeof t.iterator=="function"}function m2e(t){return typeof t.next=="function"}async function y2e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let a=[];if(n.verbose>0)throw new pt("Verbose mode is not implemented yet.");z(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=m2e(e)?e:await e.iterator();let s=0,u=0;for(;!r||u<n.batches;){const l=await o.next();if(a=se(()=>{if(l.value){const{xs:c,ys:f}=aK(t,l.value),h=c.concat(f),d=se(()=>i(h));if(mt(h),u===0)for(let v=0;v<d.length;++v)a.push(Bt(0));const p=h[0].shape[0];for(let v=0;v<d.length;++v){const m=d[v],g=a[v];a[v]=se(()=>Te(a[v],J(p,m))),u>0&&mt(g)}mt(d),s+=p,++u}return a}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<a.length;++l){const c=a[l];a[l]=Ye(a[l],s),mt(c)}return Ri(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uE(t){z(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function bg(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>rh(r,e,n-e)):rh(t,e,n-e)}function YI(t,e){return se(()=>t==null?null:Array.isArray(t)?t.map(n=>YI(n,e)):$X(t,e.dtype==="int32"?e:Fe(e,"int32")))}function lE(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function oK(t){const e=[];t instanceof Xn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(b1(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Wo(t,e){if(t==null)return;const n=[];if(e instanceof Xn)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const a=e[i];n.push(a.id)}const r=[];if(t instanceof Xn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const a=t[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x2e(t){return t instanceof Xn}function ZI(t){return Array.isArray(t)}function G5(t){return!x2e(t)&&!ZI(t)}function H5(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(ZI(t)&&t.length>0)o=!0;else if(G5(t)){for(const s in t)if(t.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new Q(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let a;if(G5(t)){t=t,a=[];for(const o of e){if(t[o]==null)throw new Q(`No data provided for "${o}". Need data for each key in: ${e}`);a.push(t[o])}}else if(ZI(t)){if(t=t,t.length!==e.length)throw new Q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new Q(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=oK(a),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new Q(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${s.shape}`);for(let u=0;u<n[o].length;++u){if(u===0&&!r)continue;const l=s.shape[u],c=n[o][u];if(c!=null&&c>=0&&l!==c)throw new Q(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return a}function w2e(t,e,n){const r=lc(t.map(a=>a.shape[0]));r.sort();const i=lc(e.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new Q(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(i.length>1)throw new Q(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!zt(r,i))throw new Q(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function b2e(t,e,n){const r=[HD,jD,b0];for(let i=0;i<t.length;++i){const a=t[i],o=e[i],s=n[i];if(o!=null){if(o===b0&&a.shape[a.shape.length-1]===1)throw new Q(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const u=a.shape.slice(1),l=s.slice(1);for(let c=0;c<u.length;++c){const f=u[c],h=l[c];if(h!=null&&f!==h)throw new Q(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function j5(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new Q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new Q(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new Q(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let u=0;u<n[o].length;++u){if(u===0&&!r)continue;const l=s.shape[u],c=n[o][u];if(c!=null&&c!==l)throw new Q(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}function C2e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const S2e="layers-model";class Ip extends Xo{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");o2e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=a2e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Wc))throw new Q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new Q(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(sE(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Q(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(s=>sE(s))}else{const o=sE(e.loss);this.outputs.forEach(s=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const s=this.internalOutputShapes[o],u=this.outputNames[o];this.feedOutputNames.push(u),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nh("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([s,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=C2e(e.metrics,this.outputNames),a=(o,s,u)=>{this.outputNames.length>1&&(s=this.outputNames[o]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([u,o])};nh("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=i[o];(l=>{const c="";let f,h,d;for(const p of l){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[o];m[m.length-1]===1||this.lossFunctions[o]===jD?["accuracy","acc"].indexOf(p)!==-1?h=ZX:["crossentropy","ce"].indexOf(p)!==-1&&(h=KSe):this.lossFunctions[o]===mC?["accuracy","acc"].indexOf(p)!==-1?h=YSe:["crossentropy","ce"].indexOf(p)!==-1&&(h=eK):["accuracy","acc"].indexOf(p)!==-1?h=QX:["crossentropy","ce"].indexOf(p)!==-1&&(h=JX);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),d=h,f=c+g}else d=i2e(p),f=c+$x(p);let v;nh(f,()=>{v=d}),a(o,f,v)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;uE(i);const a=!0,o=this.standardizeUserDataXY(e,n,a,i);try{const s=o[0].concat(o[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,s,i,r.verbose,r.steps);return Ri(l)}finally{Wo(o[0],e),Wo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),y2e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let a;if(r!=null){if(a=null,n!=null)throw new Q(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new Q(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Q("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),o=new zl;if(e instanceof Xn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Q(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)o.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new Q(`No value is provided for the model's input ${u.name}`);o.add(u,l)}const s=nm(a,o);return r?s:s[0]}retrieveSymbolicTensors(e){const n=$h(null,e.length);let r=e.length;for(const i of this.layers){const a=Array.isArray(i.output)?i.output:[i.output],o=a.map(s=>s.name);for(let s=0;s<e.length;++s){const u=o.indexOf(e[s]);if(u!==-1&&(n[s]=a[u],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((a,o)=>{a==null&&i.push(e[o])}),new Q(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return se(()=>{const i=this.checkNumSamples(e);if(r)throw new pt("Verbose predictLoop() is not implemented yet.");const a=lE(i,n),o=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)se(()=>{const l=a[s][0],c=a[s][1],f=bg(e,l,c),h=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)h.push({key:this.inputs[p],value:f[p]});else h.push({key:this.inputs[0],value:f});const d=new zl(h);return nm(this.outputs,d)}).forEach((l,c)=>o[c].push(l));return Ri(o.map(s=>Oi(s,0)))})}predict(e,n={}){const r=oK(e);j5(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return uE(i),this.predictLoop(r,i)}finally{Wo(r,e)}}predictOnBatch(e){j5(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new mo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let o=0;o<this.feedOutputShapes.length;++o){const s=this.feedOutputShapes[o];this.feedLossFns[o]===mC?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=H5(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=H5(n,this.feedOutputNames,a,!1,"target"),w2e(e,n),b2e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new Q(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,a=!0,o){const[s,u]=this.standardizeUserDataXY(e,n,a,o);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(i!=null){const c=rK(i,this.outputNames);l=[];for(let f=0;f<c.length;++f)l.push(await iK(u[f],null,c[f]))}return[s,u,l]}testLoop(e,n,r,i=0,a){return se(()=>{const o=this.checkNumSamples(n,r,a,"steps"),s=[];if(i>0)throw new pt("Verbose mode is not implemented yet.");if(a!=null)throw new pt("steps mode in testLoop() is not implemented yet");{const u=lE(o,r),l=ia(ms(0,o));for(let c=0;c<u.length;++c){const f=u[c][0],h=u[c][1],d=rh(l,f,h-f),p=YI(n,d),v=e(p);if(c===0)for(let m=0;m<v.length;++m)s.push(Bt(0));for(let m=0;m<v.length;++m){const g=v[m];s[m]=Te(s[m],J(h-f,g))}}for(let c=0;c<s.length;++c)s[c]=Ye(s[c],o)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let a=i;if(I5(e,i)>1){const o=I5(e.slice(0,r),i);a+=`_${o}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],s=()=>{const f=[];for(let v=0;v<this.inputs.length;++v)f.push({key:this.inputs[v],value:r[v]});const h=new zl(f),d=nm(this.outputs,h,{training:!0});let p;for(let v=0;v<this.lossFunctions.length;++v){const m=this.lossFunctions[v];let g=m(i[v],d[v]);a[v]!=null&&(g=h2e(g,a[v]));const y=Kn(g);n.push(y),v===0?p=g:p=Te(p,g)}for(let v=0;v<this.metricsTensors.length;++v){let m;if(this.outputs.length>1&&v<this.outputs.length)m=n[v];else{const g=this.metricsTensors[v][0],y=this.metricsTensors[v][1];m=Kn(g(i[y],d[y]))}Js(m),o.push(m)}return p=Kn(p),this.calculateLosses().forEach(v=>{p=Te(p,v)}),p},u=this.collectedTrainableWeights.map(f=>f.read()),l=!0;return[this.optimizer_.minimize(s,l,u)].concat(o)}}makeTestFunction(){this.testFunction=e=>se(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let l=0;l<this.inputs.length;++l)o.push({key:this.inputs[l],value:i[l]});const s=new zl(o),u=nm(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],f=Kn(c(a[l],u[l]));l===0?r=f:r=Te(r,f),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],f=this.metricsTensors[l][1],h=Kn(c(a[f],u[f]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,a,o,s,u,l,c,f,h;try{const d=r.batchSize==null?32:r.batchSize;uE(d);const p=!1,v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,d);i=v[0],a=v[1],h=v[2];let m=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new pt("validationData including sample weights is not supported yet."):new Q(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const _=!0,T=await this.standardizeUserData(u,l,null,null,_,d);c=T[0],f=T[1],g=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const _=Math.floor(i[0].shape[0]*(1-r.validationSplit)),T=i[0].shape[0];c=bg(i,_,T),o=i,i=bg(i,0,_),f=bg(a,_,T),s=a,a=bg(a,0,_),g=c.concat(f)}else r.validationSteps!=null&&(m=!0);const y=i.concat(a).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let b,C;m?(this.makeTestFunction(),b=this.testFunction,C=w.slice().concat(w.map(_=>"val_"+_))):(b=null,g=[],C=w.slice());const D=XX(r.callbacks,r.yieldEvery);return await this.fitLoop(x,y,w,d,r.epochs,r.verbose,D,b,g,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Wo(i,e),Wo(a,n),Wo(o,e),Wo(s,n),Wo(c,u),Wo(f,l),h!=null&&mt(h)}}async fitLoop(e,n,r,i,a,o,s,u,l,c,f,h,d,p){i==null&&(i=32),a==null&&(a=1),c==null&&(c=!0),h==null&&(h=0);let v=!1;if(u!=null&&l!=null&&(v=!0),p!=null&&(v=!0,d==null))throw new Q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,i,d,"steps_per_epoch");let g;m!=null&&(g=ms(0,m)),o==null&&(o=1);const{callbackList:y,history:x}=KX(s,o,a,h,m,d,i,v,f);y.setModel(this),this.history=x,await y.onTrainBegin(),this.stopTraining_=!1;for(let w=h;w<a;++w){await y.onEpochBegin(w);const b={};if(d!=null)throw new pt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new pt("batch shuffling is not implemneted yet");c&&Xve(g);const C=ia(g),D=lE(m,i);for(let S=0;S<D.length;++S){const _={};if(await y.onBatchBegin(S,_),se(()=>{const T=D[S][0],E=D[S][1],A=rh(C,T,E-T);_.batch=S,_.size=E-T;const N=YI(n,A),R=e(N);for(let M=0;M<r.length;++M){const $=r[M],L=R[M];_[$]=L,Js(L)}if(S===D.length-1&&v){const M=this.testLoop(u,l,i);for(let $=0;$<r.length;++$){const L=r[$],O=M[$];Js(O),b["val_"+L]=O}}}),await y.onBatchEnd(S,_),qX(_),this.stopTraining_)break}C.dispose()}if(await y.onEpochEnd(w,b),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return v2e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],a=r[1],s=this.makeTrainFunction()(i.concat(a)),u=[];for(const l of s){const c=await l.data();u.push(c[0])}return mt(s),Wo(r[0],e),Wo(r[1],n),Ri(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:a[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=FI().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-FI().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ru(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ru(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Ru(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ru($x(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ru($x(e)));{const e={};for(const n in this.metrics)e[n]=Ru($x(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=bC(e.optimizer_config),r=ru(n);let i;if(typeof e.loss=="string")i=$f(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>$f(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=$f(e.loss[o])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(o=>$f(o));else if(e.metrics!=null){a={};for(const o in e.metrics)a[o]=$f(e.metrics[o])}this.compile({loss:i,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=Zge(e);if(l.length===0)throw new Q(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new Q(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new Q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await h5(this.getNamedWeights(n)),i=!1,a=null,s={modelTopology:this.toJSON(a,i),format:S2e,generatedBy:`TensorFlow.js tfjs-layers v${nK}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){s.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:f}=await h5(await this.optimizer.getWeights(),l);r.specs.push(...f),r.data=Wge([r.data,c])}return this.userDefinedMetadata!=null&&(V5(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=r.data,s.weightSpecs=r.specs,e.save(s)}setUserDefinedMetadata(e){V5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Ip.className="Model";be(Ip);class sK extends Ip{}sK.className="Functional";be(sK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function D2e(t,e){if(e==null&&(e={}),typeof t=="string"){const n=Qge(t,e);if(n.length===0)n.push(Mwe(t,e));else if(n.length>1)throw new Q(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return _2e(t,void 0,e)}async function _2e(t,e,n){if(n==null&&(n={}),t.load==null)throw new Q("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const a=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&a,s=ru(bC(i),e,o),u=r.trainingConfig;if(u!=null&&s.loadTrainingConfig(u),r.userDefinedMetadata!=null&&s.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new Q("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:l,optimizerWeights:c}=T2e(r.weightData,r.weightSpecs);s.loadWeights(l,a),s.optimizer!=null&&c.length>0&&await s.optimizer.setWeights(c),mt(l),mt(c.map(f=>f.tensor))}return s}function T2e(t,e){const n=Lge(t,e),r={},i=[];return e.forEach(a=>{a.group==="optimizer"?i.push({name:a.name,tensor:n[a.name]}):r[a.name]=n[a.name]}),{modelWeights:r,optimizerWeights:i}}class C0 extends Ip{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:WD("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Q(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof C0||e instanceof Ip;let r;if(n){if(r=e,r.outputs.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=TSe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Q(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=WX(this.outputs[0])}this.inboundNodes=[],new GD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:$h(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ft(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ip({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let a,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Q("Legacy serialization format not supported yet.");a=n}else z(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,o=n;const s=new e(o);if(!(s instanceof C0))throw new pt(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(const u of a){const c=ru(u,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),s.add(c)}return s}set stopTraining(e){if(this.model==null)throw new Q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}C0.className="Sequential";be(C0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ui=class extends Wv{getConfig(){return{}}};class uK extends Ui{apply(e,n=1){return hSe(e,n)}}uK.className="elu";be(uK);class lK extends Ui{apply(e){return Dq(e)}}lK.className="selu";be(lK);class cK extends Ui{apply(e){return ed(e)}}cK.className="relu";be(cK);class fK extends Ui{apply(e){return se(()=>y0(6,ed(e)))}}fK.className="relu6";be(fK);class hK extends Ui{apply(e){return e}}hK.className="linear";be(hK);class dK extends Ui{apply(e){return zv(e)}}dK.className="sigmoid";be(dK);class pK extends Ui{apply(e){return pSe(e)}}pK.className="hardSigmoid";be(pK);class vK extends Ui{apply(e){return d1(e)}}vK.className="softplus";be(vK);class gK extends Ui{apply(e){return dSe(e)}}gK.className="softsign";be(gK);class mK extends Ui{apply(e){return CO(e)}}mK.className="tanh";be(mK);let GF=class extends Ui{apply(e,n=-1){return jO(e,n)}};GF.className="softmax";be(GF);class yK extends Ui{apply(e,n=-1){return gq(e,n)}}yK.className="logSoftmax";be(yK);class xK extends Ui{apply(e,n=1){return se(()=>J(zv(J(e,n)),e))}}xK.className="swish";be(xK);class wK extends Ui{apply(e){return se(()=>J(e,CO(d1(e))))}}wK.className="mish";be(wK);function bc(t){return t.getClassName()}function cE(t,e={}){return w1(t,co.getMap().classNameMap,e,"activation")}function Cc(t){if(t==null){const e={};return e.className="linear",e.config={},cE(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},cE(e)}else return t instanceof Ui?t:cE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E2e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class bK extends Wv{}class CK extends bK{constructor(e){super(),E2e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return se(()=>{let n=xr([1]);return this.hasL1&&(n=Te(n,qe(J(this.l1,ui(e))))),this.hasL2&&(n=Te(n,qe(J(this.l2,C1(e))))),ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}CK.className="L1L2";be(CK);const q5={l1l2:"L1L2"};function Jt(t){return IF(t)}function X5(t,e={}){return w1(t,co.getMap().classNameMap,e,"regularizer")}function mn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in q5?q5[t]:t,config:{}};return X5(n)}else return t instanceof bK?t:X5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class SK extends Dt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=tt(e);let r=ed(e);return this.maxValue!=null&&(r=La(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}SK.className="ReLU";be(SK);class DK extends Dt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=tt(e);return IO(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}DK.className="LeakyReLU";be(DK);class _K extends Dt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=gn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=mn(e.alphaRegularizer),this.alphaConstraint=lr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Q(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ft(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new or({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=tt(e),FO(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Sn(this.alphaInitializer),alphaRegularizer:Jt(this.alphaRegularizer),alphaConstraint:ur(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}_K.className="PReLU";be(_K);let TK=class extends Dt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new pt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=tt(e);return OD(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};TK.className="ELU";be(TK);class EK extends Dt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=tt(e);return J(r,Fe(Ha(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}EK.className="ThresholdedReLU";be(EK);class AK extends Dt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new GF().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){const r=tt(e);return this.softmax(r,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}AK.className="Softmax";be(AK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Np(t,e,n){if(typeof t=="number")return $h(t,e);if(t.length!==e)throw new Q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!uSe(i))throw new Q(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function fs(t,e,n,r,i=1){if(t==null)return t;const a=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-a+1,Math.floor((o+r-1)/r)}function Ls(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+wc([n-e,0]);else if(r==="same")t=t*e;else throw new Q(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HF(t,e){return se(()=>(Vn(e),e==="channelsFirst"?It(t,[0,2,3,1]):t))}function kK(t,e){return se(()=>(Vn(e),e==="channelsFirst"?It(t,[0,2,3,4,1]):t))}function A2e(t,e,n,r=1,i="valid",a,o=1){return se(()=>{if(a==null&&(a=ys()),Vn(a),t.shape.length!==3)throw new Q(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Q(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Q(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(a==="channelsFirst"&&(t=It(t,[0,2,1])),i==="causal")throw new pt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=sq(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(s=Cs(s,n)),s})}function K5(t,e,n,r=[1,1],i="valid",a,o,s=null){return se(()=>{if(a==null&&(a=ys()),Vn(a),t.rank!==3&&t.rank!==4)throw new Q(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Q(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=HF(t,a);if(i==="causal")throw new pt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Rxe({x:u,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),a==="channelsFirst"&&(u=It(u,[0,3,1,2])),u})}function k2e(t,e,n,r=[1,1,1],i="valid",a,o){return se(()=>{if(a==null&&(a=ys()),Vn(a),t.rank!==4&&t.rank!==5)throw new Q(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Q(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let s=kK(t,a);if(i==="causal")throw new pt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=k0e(s,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(s=Cs(s,n)),a==="channelsFirst"&&(s=It(s,[0,4,1,2,3])),s})}class qD extends Dt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",qD.verifyArgs(n),this.rank=e,br(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new pt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Np(n.kernelSize,e,"kernelSize"),this.strides=Np(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ja(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vn(this.dataFormat),this.activation=Cc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=gn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=lr(n.biasConstraint),this.biasRegularizer=mn(n.biasRegularizer),this.activityRegularizer=mn(n.activityRegularizer),this.dilationRate=Np(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Q(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Q(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Q(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ps("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!NF(e.kernelSize,"number",1,3))throw new Q(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:bc(this.activation),useBias:this.useBias,biasInitializer:Sn(this.biasInitializer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),biasConstraint:ur(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Uv extends qD{constructor(e,n){super(e,n),this.kernel=null,Uv.verifyArgs(n),this.filters=n.filters,br(this.filters,"filters"),this.kernelInitializer=gn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=lr(n.kernelConstraint),this.kernelRegularizer=mn(n.kernelRegularizer)}build(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return se(()=>{e=tt(e);let r;const i=this.bias==null?null:this.bias.read(),a=EX(this.activation.getClassName());if(a!=null&&this.rank===2)r=K5(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=A2e(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=K5(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=k2e(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new pt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ft(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const o=fs(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Sn(this.kernelInitializer),kernelRegularizer:Jt(this.kernelRegularizer),kernelConstraint:ur(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Q(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class T1 extends Uv{constructor(e){super(2,e),T1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!NF(e.kernelSize,"number",1,2))throw new Q(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}T1.className="Conv2D";be(T1);class E1 extends Uv{constructor(e){super(3,e),E1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Q(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}E1.className="Conv3D";be(E1);class IK extends T1{constructor(e){if(super(e),this.inputSpec=[new or({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==4)throw new Q("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new or({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return se(()=>{let r=tt(e);if(r.shape.length!==4)throw new Q(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s;this.dataFormat==="channelsFirst"?(o=2,s=3):(o=1,s=2);const u=i[o],l=i[s],c=this.kernelSize[0],f=this.kernelSize[1],h=this.strides[0],d=this.strides[1],p=Ls(u,h,c,this.padding),v=Ls(l,d,f,this.padding),m=[a,p,v,this.filters];this.dataFormat!=="channelsLast"&&(r=It(r,[0,2,3,1]));let g=uq(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=It(g,[0,3,1,2])),this.bias!=null&&(g=Cs(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,a;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);const o=this.kernelSize[0],s=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[i]=Ls(n[i],u,o,this.padding),n[a]=Ls(n[a],l,s,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}IK.className="Conv2DTranspose";be(IK);class NK extends E1{constructor(e){if(super(e),this.inputSpec=[new or({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==5)throw new Q("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new or({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return se(()=>{let r=tt(e);if(r.shape.length!==5)throw new Q(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s,u;this.dataFormat==="channelsFirst"?(u=2,o=3,s=4):(u=1,o=2,s=3);const l=i[u],c=i[o],f=i[s],h=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],v=this.strides[0],m=this.strides[1],g=this.strides[2],y=Ls(l,v,h,this.padding),x=Ls(c,m,d,this.padding),w=Ls(f,g,p,this.padding),b=[a,y,x,w,this.filters];this.dataFormat!=="channelsLast"&&(r=It(r,[0,2,3,4,1]));let C=R0e(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=It(C,[0,4,1,2,3])),this.bias!==null&&(C=Cs(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,a,o;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3,o=4):(r=4,i=1,a=2,o=3);const s=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],f=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[i]=Ls(n[i],c,s,this.padding),n[a]=Ls(n[a],f,u,this.padding),n[o]=Ls(n[o],h,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}NK.className="Conv3DTranspose";be(NK);class RK extends Uv{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Q(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=gn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=mn(n.depthwiseRegularizer),this.depthwiseConstraint=lr(n.depthwiseConstraint),this.pointwiseInitializer=gn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=mn(n.pointwiseRegularizer),this.pointwiseConstraint=lr(n.pointwiseConstraint)}build(e){if(e=Ft(e),e.length<this.rank+2)throw new Q(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Q(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new or({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return se(()=>{e=tt(e);let r;if(this.rank===1)throw new pt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=It(e,[0,2,3,1])),r=_q(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Cs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=It(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Sn(this.depthwiseInitializer),e.pointwiseInitializer=Sn(this.pointwiseInitializer),e.depthwiseRegularizer=Jt(this.depthwiseRegularizer),e.pointwiseRegularizer=Jt(this.pointwiseRegularizer),e.depthwiseConstraint=ur(this.depthwiseConstraint),e.pointwiseConstraint=ur(this.pointwiseConstraint),e}}RK.className="SeparableConv";class $K extends RK{constructor(e){super(2,e)}}$K.className="SeparableConv2D";be($K);class XD extends Uv{constructor(e){super(1,e),XD.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!NF(e.kernelSize,"number",1,1))throw new Q(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}XD.className="Conv1D";be(XD);class MK extends Dt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return se(()=>{if(e=tt(e),this.dataFormat==="channelsLast"){const r=Rx(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Rx(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Rx(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Rx(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}MK.className="Cropping2D";be(MK);class OK extends Dt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,aSe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return se(()=>{let r=tt(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=It(r,[0,2,3,1]);const a=this.size[0]*i[2],o=this.size[1]*i[3],s=this.interpolation==="nearest"?Pu.resizeNearestNeighbor(r,[a,o]):Pu.resizeBilinear(r,[a,o]);return It(s,[0,3,1,2])}else{const a=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Pu.resizeNearestNeighbor(r,[a,o]):Pu.resizeBilinear(r,[a,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}OK.className="UpSampling2D";be(OK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I2e(t,e,n=[1,1],r="valid",i,a){return se(()=>{i==null&&(i=ys()),Vn(i);let o=HF(t,i);if(t.rank!==4)throw new Q(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Q(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=TO(o,e,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(o=It(o,[0,3,1,2])),o})}class FK extends qD{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=gn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=lr(e.depthwiseConstraint),this.depthwiseRegularizer=mn(e.depthwiseRegularizer)}build(e){if(e=Ft(e),e.length<4)throw new Q(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Q(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return se(()=>{e=tt(e);let r=I2e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Cs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=fs(n,this.kernelSize[0],this.padding,this.strides[0]),o=fs(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,a,o]:[e[0],a,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Sn(this.depthwiseInitializer),e.depthwiseRegularizer=Jt(this.depthwiseRegularizer),e.depthwiseConstraint=ur(this.depthwiseRegularizer),e}}FK.className="DepthwiseConv2D";be(FK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PK(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function LK(t,e,n,r=!1,i,a,o=!1,s=!1){return se(()=>{const u=e.shape.length;if(u<3)throw new Q(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(ms(2,u));if(e=It(e,l),a!=null)throw new pt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Fe(Fe(i,"bool"),"float32"),i.rank===u-1&&(i=Ni(i,-1)),i=It(i,l)),r&&(e=Nh(e,0),i!=null&&(i=Nh(i,0)));const c=[];let f,h=n;const d=e.shape[0],p=Rh(e);let v;i!=null&&(v=Rh(i));for(let g=0;g<d;++g){const y=p[g],x=se(()=>t(y,h));if(i==null)f=x[0],h=x[1];else{const w=se(()=>{const b=v[g],C=nt(Ao(b),b),D=Te(J(x[0],b),J(h[0],C)),S=h.map((_,T)=>Te(J(x[1][T],b),J(_,C)));return{output:D,newStates:S}});f=w.output,h=w.newStates}s&&c.push(f)}let m;return s&&(m=xc(c,1)),[f,m,h]})}class Uc extends Dt{constructor(e){super(e);let n;if(e.cell==null)throw new Q("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new XF({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new or({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ms(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){jI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const a=[];for(const o of n)a.push([e[0],o]);return[i].concat(a)}else return i}computeMask(e,n){return se(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new pt("Constants support is not implemented in RNN yet.");jI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new or({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!zt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),a))throw new Q(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(o=>new or({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){se(()=>{if(!this.stateful)throw new Fs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>xr([r,i])):this.states_=[xr([r,this.cell.stateSize])];else if(e==null)mt(this.states_),this.keptStates!=null&&(mt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>xr([r,i])):this.states_[0]=xr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):mt(this.states_);for(let i=0;i<this.states_.length;++i){const a=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,s=[r,o];if(!zt(a.shape,s))throw new Q(`State ${i} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Js(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=PK(e,r,i,this.numConstants);e=a.inputs,r=a.initialState,i=a.constants;let o=[],s=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new or({shape:l.shape}));s=s.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Gs){const l=[e].concat(o),c=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=c;const h=super.apply(l,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return se(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let a=n==null?null:n.initialState;e=tt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new Q(`RNN Layer has ${o} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:i},l=LK((p,v)=>{const m=this.cell.call([p].concat(v),s);return[m[0],m.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],f=l[1],h=l[2];this.stateful&&this.resetStates(h,i);const d=this.returnSequences?f:c;return this.returnState?[d].concat(h):d})}getInitialState(e){return se(()=>{let n=xr(e.shape);return n=qe(n,[1,2]),n=b1(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?GI(n,[1,r]):n):this.cell.stateSize>1?[GI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Uc.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,a=ru(i,r);return new e(Object.assign(n,{cell:a}))}}Uc.className="RNN";be(Uc);class KD extends Dt{}class jF extends KD{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,br(this.units,"units"),this.activation=Cc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=gn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mn(e.kernelRegularizer),this.recurrentRegularizer=mn(e.recurrentRegularizer),this.biasRegularizer=mn(e.biasRegularizer),this.kernelConstraint=lr(e.kernelConstraint),this.recurrentConstraint=lr(e.recurrentConstraint),this.biasConstraint=lr(e.biasConstraint),this.dropout=ov([1,wc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ov([1,wc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return se(()=>{if(e=e,e.length!==2)throw new Q(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Sc({ones:()=>Ao(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Sc({ones:()=>Ao(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let a;const o=this.dropoutMask,s=this.recurrentDropoutMask;o!=null?a=nu(J(e,o),this.kernel.read()):a=nu(e,this.kernel.read()),this.bias!=null&&(a=Cs(a,this.bias.read())),s!=null&&(r=J(r,s));let u=Te(a,nu(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),useBias:this.useBias,kernelInitializer:Sn(this.kernelInitializer),recurrentInitializer:Sn(this.recurrentInitializer),biasInitializer:Sn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:ur(this.kernelConstraint),recurrentConstraint:ur(this.recurrentConstraint),biasConstraint:ur(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}jF.className="SimpleRNNCell";be(jF);class zK extends Uc{constructor(e){e.cell=new jF(e),super(e)}call(e,n){return se(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return new e(n)}}zK.className="SimpleRNN";be(zK);class qF extends KD{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Q("GRUCell does not support reset_after parameter set to true.");this.units=e.units,br(this.units,"units"),this.activation=Cc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=gn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mn(e.kernelRegularizer),this.recurrentRegularizer=mn(e.recurrentRegularizer),this.biasRegularizer=mn(e.biasRegularizer),this.kernelConstraint=lr(e.kernelConstraint),this.recurrentConstraint=lr(e.recurrentConstraint),this.biasConstraint=lr(e.biasConstraint),this.dropout=ov([1,wc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ov([1,wc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return se(()=>{if(e=e,e.length!==2)throw new Q(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Sc({ones:()=>Ao(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Sc({ones:()=>Ao(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,u,l;0<this.dropout&&this.dropout<1&&(e=J(e,a[0]));let c=nu(e,this.kernel.read());this.useBias&&(c=Cs(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=J(i,o[0]));const f=this.recurrentKernel.read(),[h,d]=Ia(f,[2*this.units,this.units],f.rank-1),p=nu(i,h),[v,m,g]=Ia(c,3,c.rank-1),[y,x]=Ia(p,2,p.rank-1);s=this.recurrentActivation.apply(Te(v,y)),u=this.recurrentActivation.apply(Te(m,x));const w=nu(J(u,i),d);l=this.activation.apply(Te(g,w));const b=Te(J(s,i),J(Te(1,Fn(s)),l));return[b,b]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),recurrentActivation:bc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Sn(this.kernelInitializer),recurrentInitializer:Sn(this.recurrentInitializer),biasInitializer:Sn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:ur(this.kernelConstraint),recurrentConstraint:ur(this.recurrentConstraint),biasConstraint:ur(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}qF.className="GRUCell";be(qF);class BK extends Uc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qF(e),super(e)}call(e,n){return se(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}BK.className="GRU";be(BK);class YD extends KD{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,br(this.units,"units"),this.activation=Cc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Cc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=gn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=gn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=gn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=mn(e.kernelRegularizer),this.recurrentRegularizer=mn(e.recurrentRegularizer),this.biasRegularizer=mn(e.biasRegularizer),this.kernelConstraint=lr(e.kernelConstraint),this.recurrentConstraint=lr(e.recurrentConstraint),this.biasConstraint=lr(e.biasConstraint),this.dropout=ov([1,wc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ov([1,wc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ft(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,o=this.units;i=new(n=class extends Fo{apply(u,l){const c=a.apply([o]),f=new $F().apply([o]),h=a.apply([o*2]);return R5(R5(c,f),h)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return se(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Q(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Sc({ones:()=>Ao(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Sc({ones:()=>Ao(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let u,l,c,f;0<this.dropout&&this.dropout<1&&(e=J(e,o[0]));let h=nu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=J(i,s[0])),h=Te(h,nu(i,this.recurrentKernel.read())),this.useBias&&(h=Cs(h,this.bias.read()));const[d,p,v,m]=Ia(h,4,h.rank-1);u=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),c=Te(J(l,a),J(u,this.activation.apply(v))),f=this.recurrentActivation.apply(m);const g=J(f,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:bc(this.activation),recurrentActivation:bc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Sn(this.kernelInitializer),recurrentInitializer:Sn(this.recurrentInitializer),biasInitializer:Sn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:ur(this.kernelConstraint),recurrentConstraint:ur(this.recurrentConstraint),biasConstraint:ur(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}YD.className="LSTMCell";be(YD);class VK extends Uc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new YD(e),super(e)}call(e,n){return se(()=>{this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}VK.className="LSTM";be(VK);class XF extends KD{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return se(()=>{e=e;let r=e.slice(1);const i=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1));i.reverse();const a=[];let o;for(let s=0;s<this.cells.length;++s){const u=this.cells[s];r=i[s],s===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=u.call(o,n),a.push(o.slice(1))}r=[];for(const s of a.slice().reverse())r.push(...s);return[o[0]].concat(r)})}build(e){jI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{nh(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const a of n.cells)i.push(ru(a,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return qI(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,a=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],a[o]])}BF(n)}}XF.className="StackedRNNCells";be(XF);function Sc(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=t,o=()=>a!=null?a(e(),n):MX(e(),n),s=()=>S1(o,e,r);return!i||i<=1?Js(s().clone()):Array(i).fill(void 0).map(s).map(l=>Js(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var N2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class WK extends Uc{constructor(e){if(e.unroll)throw new pt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new pt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new or({ndim:5})]}call(e,n){return se(()=>{if(this.cell.dropoutMask!=null&&(mt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(mt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Q("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return se(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)],o=xr(a);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){se(()=>{if(!this.stateful)throw new Fs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)];if(r[0]==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xr(a)):this.states_=[xr(a)];else if(e==null)mt(this.states_),this.keptStates!=null&&(mt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xr(a)):this.states_[0]=xr(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):mt(this.states_);for(let s=0;s<this.states_.length;++s){const u=e[s],l=a;if(!zt(u.shape,l))throw new Q(`State ${s} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[s]=u}}this.states_=this.states_.map(s=>Js(s.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:a,strides:o,dilationRate:s}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],f=fs(l,i[0],a,o[0],s[0]),h=fs(c,i[1],a,o[1],s[1]);return[...e.slice(0,2),...u?[r,f,h]:[f,h,r]]}}WK.className="ConvRNN2D";class KF extends YD{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:a,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,br(this.filters,"filters"),this.kernelSize=Np(r,2,"kernelSize"),this.kernelSize.forEach(u=>br(u,"kernelSize")),this.strides=Np(i||1,2,"strides"),this.strides.forEach(u=>br(u,"strides")),this.padding=a||"valid",ja(this.padding),this.dataFormat=o||"channelsLast",Vn(this.dataFormat),this.dilationRate=Np(s||1,2,"dilationRate"),this.dilationRate.forEach(u=>br(u,"dilationRate"))}build(e){var n;e=Ft(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Q(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],a=4,o=this.kernelSize.concat([i,this.filters*a]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends Fo{apply(h,d){const p=l.apply([c]),v=Qh([c]),m=l.apply([c*2]);return RF([p,v,m])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return se(()=>{if(e.length!==3)throw new Q(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],a=e[1],o=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Sc({ones:()=>Ao(i),rate:this.dropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(V,X,P)=>!X||!X[P]?V:J(X[P],V);let c=l(i,u,0),f=l(i,u,1),h=l(i,u,2),d=l(i,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Sc({ones:()=>Ao(a),rate:this.recurrentDropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let v=l(a,p,0),m=l(a,p,1),g=l(a,p,2),y=l(a,p,3);const x=3,[w,b,C,D]=Ia(this.kernel.read(),s,x),[S,_,T,E]=this.useBias?Ia(this.bias.read(),s):[null,null,null,null];c=this.inputConv(c,w,S,this.padding),f=this.inputConv(f,b,_,this.padding),h=this.inputConv(h,C,T,this.padding),d=this.inputConv(d,D,E,this.padding);const[A,N,R,M]=Ia(this.recurrentKernel.read(),s,x);v=this.recurrentConv(v,A),m=this.recurrentConv(m,N),g=this.recurrentConv(g,R),y=this.recurrentConv(y,M);const $=this.recurrentActivation.apply(Te(c,v)),L=this.recurrentActivation.apply(Te(f,m)),O=Te(J(L,o),J($,this.activation.apply(Te(h,g)))),F=J(this.recurrentActivation.apply(Te(d,y)),this.activation.apply(O));return[F,F,O]})}getConfig(){const e=super.getConfig(),n=N2e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const a=Ih(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Cs(a,r,this.dataFormat):a}recurrentConv(e,n){return Ih(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}KF.className="ConvLSTM2DCell";be(KF);class UK extends WK{constructor(e){const n=new KF(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}UK.className="ConvLSTM2D";be(UK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YF extends Dt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,a=this.getNoiseShape(r);return S1(()=>MX(r,this.rate,a,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}YF.className="Dropout";be(YF);class GK extends YF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}GK.className="SpatialDropout1D";be(GK);class HK extends Dt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,br(this.units,"units"),this.activation=Cc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=gn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=gn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=lr(e.kernelConstraint),this.biasConstraint=lr(e.biasConstraint),this.kernelRegularizer=mn(e.kernelRegularizer),this.biasRegularizer=mn(e.biasRegularizer),this.activityRegularizer=mn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ft(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ft(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e),i=EX(this.activation.getClassName());let a;return i!=null?a=nu(r,this.kernel.read(),i,this.bias?this.bias.read():null):(a=nu(r,this.kernel.read()),this.bias!=null&&(a=Cs(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:bc(this.activation),useBias:this.useBias,kernelInitializer:Sn(this.kernelInitializer),biasInitializer:Sn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:ur(this.kernelConstraint),biasConstraint:ur(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}HK.className="Dense";be(HK);class jK extends Dt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ft(e);for(const n of e.slice(1))if(n==null)throw new Q(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],cc(e,1)]}call(e,n){return se(()=>{this.invokeCallHook(e,n);let r=tt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let a=2;a<r.rank;++a)i.push(a);i.push(1),r=It(r,i)}return fSe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}jK.className="Flatten";be(jK);class qK extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Cc(e.activation)}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e);return this.activation.apply(r)})}getConfig(){const e={activation:bc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}qK.className="Activation";be(qK);class XK extends Dt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return se(()=>(e=tt(e),lSe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}XK.className="RepeatVector";be(XK);class KK extends Dt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let a=1,o=null;for(let u=0;u<i.length;++u){const l=i[u];if(this.isUnknown(l))if(o===null)o=u;else throw new Q("Can only specifiy one unknown dimension.");else a*=l}const s=cc(e);if(o!==null){if(a===0||s%a!==0)throw new Q(r);i[o]=s/a}else if(s!==a)throw new Q(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e),i=r.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ie(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}KK.className="Reshape";be(KK);class YK extends Dt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ms(1,e.dims.length+1);if(!zt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new or({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ft(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return It(tt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}YK.className="Permute";be(YK);class ZK extends Dt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=tt(e),i=-1;return PI(lC(r,this.maskValue),i)}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e),i=-1,a=!0,o=PI(lC(r,this.maskValue),i,a);return J(r,Fe(o,r.dtype))})}}ZK.className="Masking";be(ZK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class QK extends Dt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(sn(e.inputLength))}this.inputDim=e.inputDim,br(this.inputDim,"inputDim"),this.outputDim=e.outputDim,br(this.outputDim,"outputDim"),this.embeddingsInitializer=gn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=mn(e.embeddingsRegularizer),this.activityRegularizer=mn(e.activityRegularizer),this.embeddingsConstraint=lr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return se(()=>this.maskZero?(e=tt(e),lC(e,Nt(e))):null)}computeOutputShape(e){if(e=Ft(e),this.inputLength==null)return[...e,this.outputDim];const n=sn(this.inputLength);if(n.length!==e.length-1)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const a=n[i],o=e[i+1];if(a!=null&&o!=null&&a!==o)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return se(()=>{this.invokeCallHook(e,n);let r=tt(e);r.dtype!=="int32"&&(r=tu(r,"int32"));const i=$X(this.embeddings.read(),ie(r,[r.size]));return ie(i,Ft(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Sn(this.embeddingsInitializer),embeddingsRegularizer:Jt(this.embeddingsRegularizer),activityRegularizer:Jt(this.activityRegularizer),embeddingsConstraint:ur(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}QK.className="Embedding";be(QK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rd extends Dt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new pt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const a=e[e.length-n.length+i],o=n[i];if(a==null||o==null||a<0||o<0)r.push(null);else if(a===1)r.push(o);else if(o===1)r.push(a);else{if(a!==o)throw new Q("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ft(e)]),e=e,e.length<2)throw new Q(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=lc(n),n.length>1)throw new Q(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const o=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(a=>a.length);e.indexOf(null)===-1&&lc(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return se(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(a=>a.rank);if(i.indexOf(null)===-1){const a=wc(i);for(let o of e){const s=o.rank;for(let u=0;u<a-s;++u)o=b1(o,1);r.push(o)}return this.mergeFunction(r)}else{let a=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,f=c[0],h=c.slice(1).concat([f]);let d=ie(u,[f].concat(cc(c.slice(1))));d=It(d,[1,0]),d=ie(d,h),r.push(d),a=!0}else if(l>1){const c=ms(1,l).concat([0]);r.push(It(u,c)),a=!0}else r.push(u)}let o=this.mergeFunction(r);const s=o.rank;if(a){if(s==null){const u=o.shape,l=u.length,c=u[l-1],f=[c].concat(u.slice(0,u.length-1));o=ie(It(ie(o,[-1,c]),[1,0]),f)}else if(s>1){const u=[s-1].concat(ms(0,s-1));o=It(o,u)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=lc(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return se(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an Array");if(!Array.isArray(e))throw new Q("`inputs` should be an Array");if(n.length!==e.length)throw new Q(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Ni(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Qu(r,n[i]);return r})}}class JK extends rd{constructor(e){super(e)}mergeFunction(e){return se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Te(n,e[r]);return n})}}JK.className="Add";be(JK);class eY extends rd{constructor(e){super(e)}mergeFunction(e){return se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=J(n,e[r]);return n})}}eY.className="Multiply";be(eY);class tY extends rd{constructor(e){super(e)}mergeFunction(e){return se(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Te(n,e[r]);return J(1/e.length,n)})}}tY.className="Average";be(tY);class nY extends rd{constructor(e){super(e)}mergeFunction(e){return se(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Vc(n,e[r]);return n})}}nY.className="Maximum";be(nY);class rY extends rd{constructor(e){super(e)}mergeFunction(e){return se(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=y0(n,e[r]);return n})}}rY.className="Minimum";be(rY);class iY extends rd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Q("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const a=e[i].slice();a.splice(this.axis,1);let o=!1;for(const s of r)if(zt(s,a)){o=!0;break}o||r.push(a)}if(r.length>1)throw new Q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return se(()=>RF(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Q("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[i]==null||a[i]==null){r[i]=null;break}r[i]+=a[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Q("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Q(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return se(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Fe(Ao(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Ni(n[o],-1)):i.push(n[o]);const a=Oi(i,this.axis);return oq(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}iY.className="Concatenate";be(iY);function Cg(t,e){for(;t<0;)t+=e;return t}function R2e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new pt("batchDot is not implemented for tensors of 4D or higher rank yet");if(z(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),z(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new pt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const a=n;return se(()=>{let o;if(r>i){o=r-i;const u=[];for(let l=0;l<o;++l)u.push(1);e=ie(e,e.shape.concat(u))}else if(i>r){o=i-r;const u=[];for(let l=0;l<o;++l)u.push(1);t=ie(t,t.shape.concat(u))}else o=0;let s;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?s=qe(J(t,e),a[0]):s=qe(J(It(t,[1,0]),e),a[1]);else{const u=a[0]!==t.shape.length-1,l=a[1]===e.shape.length-1;s=Lt(t,e,u,l)}if(o>0){let u;r>i?u=r+i-3:u=r-1;const l=[];for(let c=u;c<u+o;++c)l.push(c);s=v1(s,l)}return s.shape.length===1&&(s=Ni(s,1)),s})}class aY extends rd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new pt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new Q(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Q(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((a,o)=>Cg(a,e[o].shape.length)):i=[Cg(this.axes,n.shape.length),Cg(this.axes,r.shape.length)],this.normalize&&(n=gC(n,i[0]),r=gC(r,i[1])),R2e(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Cg(this.axes,e.length),Cg(this.axes,n.length)],r}computeOutputShape(e){z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new pt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}aY.className="Dot";be(aY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oY extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e);return S1(()=>Te(UD(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}oY.className="GaussianNoise";be(oY);class sY extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return se(()=>{this.invokeCallHook(e,n);const r=tt(e);return this.rate>0&&this.rate<1?S1(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return J(r,UD(r.shape,1,a))},()=>r,n.training||!1):r})}}sY.className="GaussianDropout";be(sY);class uY extends Dt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||tt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return se(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return S1(()=>{const a=tt(e),o=1.6732632423543772,s=1.0507009873554805,u=-o*s;let l=Zh(p1(r),this.rate);l=tu(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-c*u*this.rate,h=Te(J(a,l),J(Te(l,-1),u));return Te(J(h,c),f)},()=>tt(e),n.training||!1)}return e})}}uY.className="AlphaDropout";be(uY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S0(t,e,n,r,i,a=.001){let o;if(t.rank===2)o=a0e(t,e,n,r,i,a);else if(t.rank===3)o=s0e(t,e,n,r,i,a);else if(t.rank===4)o=l0e(t,e,n,r,i,a);else throw new pt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function $2e(t,e,n,r,i=.001){return se(()=>{const a=$O(t,r),o=a.mean,s=a.variance;return[S0(t,o,s,n,e,i),o,s]})}function M2e(t,e,n,r,i=.001){return se(()=>{const a=$O(t,r),o=a.mean,s=a.variance,u=[];for(const p of ms(0,t.rank))r.indexOf(p)!==-1?u.push(1):u.push(t.shape[p]);const l=ie(o,u),c=ie(s,u),f=e==null?null:ie(e,u),h=n==null?null:ie(n,u);return[S0(t,l,c,h,f,i),o,s]})}function O2e(t,e,n,r,i=.001){return zt(r.slice().sort(),ms(0,t.rank-1))?$2e(t,e,n,r,i):M2e(t,e,n,r,i)}class lY extends Dt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=gn(e.betaInitializer||"zeros"),this.gammaInitializer=gn(e.gammaInitializer||"ones"),this.movingMeanInitializer=gn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=gn(e.movingVarianceInitializer||"ones"),this.betaConstraint=lr(e.betaConstraint),this.gammaConstraint=lr(e.gammaConstraint),this.betaRegularizer=mn(e.betaRegularizer),this.gammaRegularizer=mn(e.gammaRegularizer)}build(e){e=Ft(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Q(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new or({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return se(()=>{const r=n.training==null?!1:n.training,i=tt(e),a=i.shape,o=a.length,s=ms(0,o),u=this.axis>=0?this.axis:this.axis+o;s.splice(u,1);const l=$h(1,o);l[u]=a[u];const c=s.slice();c.sort();const f=!zt(c,ms(0,o).slice(0,o-1)),h=()=>{if(f){const y=ie(this.movingMean.read(),l),x=ie(this.movingVariance.read(),l),w=this.center?ie(this.beta.read(),l):null,b=this.scale?ie(this.gamma.read(),l):null;return S0(i,y,x,w,b,this.epsilon)}else return S0(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[d,p,v]=O2e(i,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(y,x,w)=>{se(()=>{const b=1-w,C=y.read(),D=J(nt(C,x),b);y.write(nt(C,D))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,v,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Sn(this.betaInitializer),gammaInitializer:Sn(this.gammaInitializer),movingMeanInitializer:Sn(this.movingMeanInitializer),movingVarianceInitializer:Sn(this.movingVarianceInitializer),betaRegularizer:Jt(this.betaRegularizer),gammaRegularizer:Jt(this.gammaRegularizer),betaConstraint:ur(this.betaConstraint),gammaConstraint:ur(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}lY.className="BatchNormalization";be(lY);class cY extends Dt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=gn(e.betaInitializer||"zeros"),this.gammaInitializer=gn(e.gammaInitializer||"ones"),this.betaRegularizer=mn(e.betaRegularizer),this.gammaRegularizer=mn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ft(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==lc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=tt(e),i=r.shape,a=i.length;return se(()=>{let{mean:s,variance:u}=$O(r,this.axis,!0);const l=$h(1,a);for(const v of this.axis)l[v]=i[v];const c=v=>v!=null&&v.shape.length!==a?ie(v,l):v;let f=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const d=[],p=[];for(let v=0;v<a;++v)this.axis.indexOf(v)!==-1?(d.push(i[v]),p.push(1)):(d.push(1),p.push(i[v]));return s=is(s,d),u=is(u,d),f!=null&&(f=is(f,p)),h!=null&&(h=is(h,p)),S0(r,s,u,h,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Sn(this.betaInitializer),gammaInitializer:Sn(this.gammaInitializer),betaRegularizer:Jt(this.betaRegularizer),gammaRegularizer:Jt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}cY.className="LayerNormalization";be(cY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function F2e(t,e,n){return se(()=>{if(t.rank!==4)throw new Q(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ys()),n!=="channelsLast"&&n!=="channelsFirst")throw new Q(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],MO(t,r)})}class fY extends Dt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ys():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Q(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Q(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Q(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new or({ndim:4})]}computeOutputShape(e){e=Ft(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return se(()=>F2e(tt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}fY.className="ZeroPadding2D";be(fY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZD(t,e,n,r,i,a){return se(()=>{Vn(i),kX(a),ja(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=ys()),a==null&&(a="max"),t=HF(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=RO(t,e,n,s):o=bO(t,e,n,s),i==="channelsFirst"&&(o=It(o,[0,3,1,2])),o})}function hY(t,e,n,r,i,a){return se(()=>{Vn(i),kX(a),ja(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=ys()),a==null&&(a="max"),t=kK(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=Kye(t,e,n,s):o=Kme(t,e,n,s),i==="channelsFirst"&&(o=It(o,[0,4,1,2,3])),o})}class dY extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Q(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(br(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Q(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ja(this.padding),this.inputSpec=[new or({ndim:3})]}computeOutputShape(e){e=Ft(e);const n=fs(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return se(()=>{this.invokeCallHook(e,n),e=b1(tt(e),2);const r=this.poolingFunction(tt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return v1(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class pY extends dY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),ZD(e,n,r,i,a,"max")}}pY.className="MaxPooling1D";be(pY);class vY extends dY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),ZD(e,n,r,i,a,"avg")}}vY.className="AveragePooling1D";be(vY);class gY extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Q(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];br(this.poolSize,"poolSize"),br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vn(this.dataFormat),ja(this.padding),this.inputSpec=[new or({ndim:4})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=fs(n,this.poolSize[0],this.padding,this.strides[0]),r=fs(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return se(()=>(this.invokeCallHook(e,n),this.poolingFunction(tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class mY extends gY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),ZD(e,n,r,i,a,"max")}}mY.className="MaxPooling2D";be(mY);class yY extends gY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),ZD(e,n,r,i,a,"avg")}}yY.className="AveragePooling2D";be(yY);class xY extends Dt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Q(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];br(this.poolSize,"poolSize"),br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vn(this.dataFormat),ja(this.padding),this.inputSpec=[new or({ndim:5})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=fs(n,this.poolSize[0],this.padding,this.strides[0]),r=fs(r,this.poolSize[1],this.padding,this.strides[1]),i=fs(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return se(()=>(this.invokeCallHook(e,n),this.poolingFunction(tt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class wY extends xY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),hY(e,n,r,i,a,"max")}}wY.className="MaxPooling3D";be(wY);class bY extends xY{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Vn(a),ja(i),hY(e,n,r,i,a,"avg")}}bY.className="AveragePooling3D";be(bY);class CY extends Dt{constructor(e){super(e),this.inputSpec=[new or({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new pt}}class SY extends CY{constructor(e){super(e||{})}call(e,n){return se(()=>{const r=tt(e);return Kn(r,1)})}}SY.className="GlobalAveragePooling1D";be(SY);class DY extends CY{constructor(e){super(e||{})}call(e,n){return se(()=>{const r=tt(e);return cs(r,1)})}}DY.className="GlobalMaxPooling1D";be(DY);class _Y extends Dt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vn(this.dataFormat),this.inputSpec=[new or({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new pt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class TY extends _Y{call(e,n){return se(()=>{const r=tt(e);return this.dataFormat==="channelsLast"?Kn(r,[1,2]):Kn(r,[2,3])})}}TY.className="GlobalAveragePooling2D";be(TY);class EY extends _Y{call(e,n){return se(()=>{const r=tt(e);return this.dataFormat==="channelsLast"?cs(r,[1,2]):cs(r,[2,3])})}}EY.className="GlobalMaxPooling2D";be(EY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let AY=class extends Dt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,a=ru(i,r);delete n.layer;const o={layer:a};return Object.assign(o,n),new e(o)}};class kY extends AY{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ft(e),e.length<3)throw new Q(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ft(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return se(()=>(e=tt(e),LK((o,s)=>[tt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}kY.className="TimeDistributed";be(kY);function P2e(t){nd(iSe,"BidirectionalMergeMode",t)}const L2e="concat";class IY extends AY{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ru(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=ru(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?L2e:e.mergeMode,P2e(this.mergeMode),e.weights)throw new pt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):Ri(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=PK(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],s=[];if(r!=null){const l=r.length;if(l%2>0)throw new Q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(f=>new or({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),s.push(...c)}if(i!=null)throw new pt("Support for constants in Bidirectional layers is not implemented yet.");const u=o[0]instanceof Gs;for(const l of o)if(l instanceof Gs!==u)throw new Q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(o),c=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=c;const h=super.apply(l,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return se(()=>{const r=n.initialState;let i,a;if(r==null)i=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),this.returnSequences&&(a=Nh(a,1));let s;return this.mergeMode==="concat"?s=RF([i,a]):this.mergeMode==="sum"?s=Te(i,a):this.mergeMode==="ave"?s=J(.5,Te(i,a)):this.mergeMode==="mul"?s=J(i,a):this.mergeMode==null&&(s=[i,a]),this.returnState?this.mergeMode==null?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){nh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),nh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ru(n.layer);if(delete n.layer,n.numConstants!=null)throw new pt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}IY.className="Bidirectional";be(IY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NY extends Dt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return se(()=>(e=tt(e),e.dtype!=="float32"&&(e=tu(e,"float32")),Te(J(e,this.scale),this.offset)))}}NY.className="Rescaling";be(NY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:z2e,cropAndResize:B2e}=Pu;class RY extends Dt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,a,o,s,u){return se(()=>{let l,c=!1;const f=n/o,h=r/s,d=(i+n)/o,p=(a+r)/s,v=[f,h,d,p],m=[];e.rank===3?(c=!0,l=xc([e])):l=e;for(let b=0;b<l.shape[0];b++)m.push(v);const g=Em(m,[m.length,4]),y=x0(0,m.length,1,"int32"),w=B2e(l,g,y,[i,a],"nearest");return tu(c?tt(Rh(w)):w,u)})}upsize(e,n,r,i){return se(()=>{const a=z2e(e,[n,r]);return tu(a,i)})}call(e,n){return se(()=>{const r=tt(e),i=r.dtype,a=r.shape,o=a[a.length-3],s=a[a.length-2];let u=0;o!==this.height&&(u=Math.floor((o-this.height)/2));let l=0;return s!==this.width&&(l=Math.floor((s-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,o,s,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}RY.className="CenterCrop";be(RY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V2e(t,e,n,r){let i=tt(t);if(i.dtype!=="int32"&&(i=tu(i,"int32")),e==="int")return i;const a=i.shape;if(i.rank===0&&(i=Ni(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Ni(i,-1)),i.rank>2)throw new Q(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),s=i;let u;if(typeof r<"u"&&e==="count"?u=v5(s,r,n,o):u=v5(s,[],n,o),e!=="tfIdf")return u;if(r)return J(u,r);throw new Q("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $Y extends Dt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ft(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return se(()=>{e=tt(e),e.dtype!=="int32"&&(e=tu(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Q(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=tt(n.countWeights)}const i=cs(e),a=sC(e),o=Ha(this.numTokens,i).bufferSync().get(0),s=Zh(a,0).bufferSync().get(0);if(!(o&&s))throw new Q(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return V2e(e,this.outputMode,this.numTokens,r)})}}$Y.className="CategoryEncoding";be($Y);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W2e=["bilinear","nearest"],Y5=new Set(W2e);class MY extends Dt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(Y5.has(e.interpolation))this.interpolation=e.interpolation;else throw new Q(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return se(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Pu.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Pu.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Y5]} are supported`)})}}MY.className="Resizing";be(MY);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OY{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}OY.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FY extends Dt{constructor(e){super(e),this.randomGenerator=new OY(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}FY.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const U2e=["bilinear","nearest"],Z5=new Set(U2e);class PY extends FY{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Q(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Q(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Q(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(Z5.has(r))this.interpolation=r;else throw new Q(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return se(()=>{const r=tt(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=p1([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return Pu.resizeBilinear(e,o);case"nearest":return Pu.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...Z5]} are supported`)}})}}PY.className="RandomWidth";be(PY);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G2e=le();G2e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Q5;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Q5||(Q5={}));var J5;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(J5||(J5={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eB;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(eB||(eB={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&z(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2e=$q;class QD extends SM{nextDataId(){return QD.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new nj(this,$s())}write(e,n,r){this.firstUse&&(this.firstUse=!1,le().get("IS_NODE")&&_a(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&gy(r[0])){const a=r.map(o=>uc(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,a){this.data.set(e,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return Ju(i,a)}return ege(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>yc(i));return Ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(e.shape,e.dtype,n)}makeOutput(e,n,r){return $s().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Ii();return e(),{kernelMs:Ii()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Be([e],"where");const n=this.readSync(e.dataId);return H2e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}QD.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const j2e=t=>{const{x:e}=t.inputs,n=t.backend;Be(e,"abs");let r=new Float32Array(he(e.shape));const i=n.data.get(e.dataId).values;return r=LY(i),n.makeOutput(r,e.shape,e.dtype)},q2e={kernelName:I2,backendName:"cpu",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t){return(e,n,r,i,a)=>{const o=ht(e,n),s=o.length,u=He(o),l=he(o),c=Kr(a,l),f=e.length,h=n.length,d=He(e),p=He(n),v=rv(e,o),m=rv(n,o);if(v.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<c.length;++g){const y=Pv(g,s,u),x=y.slice(-f);v.forEach(D=>x[D]=0);const w=Qs(x,f,d),b=y.slice(-h);m.forEach(D=>b[D]=0);const C=Qs(b,h,p);c[g]=t(r[w],i[C])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ea(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(s.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const X2e={kernelName:FM,backendName:"cpu",kernelFunc:ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CC(t,e,n="float32"){if(n==="complex64"){const i=CC(t,e,"float32"),a=CC(t,e,"float32");return ea({inputs:{real:i,imag:a},backend:t})}const r=Yr(he(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lu(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const K2e={kernelName:Py,backendName:"cpu",kernelFunc:lu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const Y2e={kernelName:oO,backendName:"cpu",kernelFunc:Mh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Yh([0],n),[a,o]=Wn((s,u)=>s!==u?1:0)(e,[],t,i,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Dc(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return lu({inputs:{x:i},backend:n});const c=CC(n,i.shape,i.dtype),f=Dc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),h=ea({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),h}if(i.dtype==="complex64"){const c=Mh({inputs:{input:i},backend:n}),f=Dc({inputs:{x:c},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(c),f}if(!aj(i.dtype,a)){const c=lu({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:a}}const o=n.data.get(i.dataId).values,[s,u,l]=zY(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,u,l)}const Z2e={kernelName:Dy,backendName:"cpu",kernelFunc:Dc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(t,e,n,r){return n==null?({inputs:i,backend:a})=>{const{a:o,b:s}=i,u=a;Be([o,s],t);const l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,f=o.dtype==="string"?el(l):l,h=o.dtype==="string"?el(c):c,d=r||o.dtype,[p,v]=e(o.shape,s.shape,f,h,d);return u.makeTensorInfo(v,d,p)}:({inputs:i,backend:a})=>{const{a:o,b:s}=i,u=a;if(o.dtype==="complex64"||s.dtype==="complex64"){const l=Dc({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,d=u.data.get(f.dataId).values,p=u.data.get(h.dataId).values,v=Dc({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,x=u.data.get(g.dataId).values,w=u.data.get(y.dataId).values,[b,C,D]=n(o.shape,s.shape,d,p,x,w),S=u.makeTensorInfo(D,"float32",b),_=u.makeTensorInfo(D,"float32",C),T=ea({inputs:{real:S,imag:_},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(S),u.disposeIntermediateTensorInfo(_),T}else{const l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,f=r||o.dtype,[h,d]=e(o.shape,s.shape,l,c,f);return u.makeTensorInfo(d,f,h)}}}function ZF(t){return(e,n,r,i,a,o)=>{const s=ht(e,n),u=he(s),l=s.length,c=He(s),f=Kr("float32",u),h=Kr("float32",u),d=rv(e,s),p=rv(n,s),v=Ju(r,i),m=Ju(a,o),g=e.length,y=He(e),x=n.length,w=He(n);if(d.length+p.length===0)for(let b=0;b<f.length;b++){const C=b%v.length,D=b%m.length,S=t(v[C*2],v[C*2+1],m[D*2],m[D*2+1]);f[b]=S.real,h[b]=S.imag}else for(let b=0;b<f.length;b++){const C=Pv(b,l,c),D=C.slice(-g);d.forEach(A=>D[A]=0);const S=Qs(D,g,y),_=C.slice(-x);p.forEach(A=>_[A]=0);const T=Qs(_,x,w),E=t(v[S*2],v[S*2+1],m[T*2],m[T*2+1]);f[b]=E.real,h[b]=E.imag}return[f,h,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BY=Wn((t,e)=>t+e),Q2e=ZF((t,e,n,r)=>({real:t+n,imag:e+r})),sv=hr(Lv,BY,Q2e),J2e={kernelName:Lv,backendName:"cpu",kernelFunc:sv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QF(t,e,n,r,i){const a=he(r),o=Yr(i,n);for(let s=0;s<t.length;s++){const u=t[s];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(a>0?o[u]+=e[s]:o[u]+=1)}return o}function VY(t,e,n,r=!1){const i=t.shape[0],a=t.shape[1],o=Ct([i,n],e.dtype);for(let s=0;s<i;s++)for(let u=0;u<a;u++){const l=t.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):e.size>0?o.set(o.get(s,l)+e.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WY=Wn((t,e)=>t&e),eDe=hr(OM,WY),tDe={kernelName:OM,backendName:"cpu",kernelFunc:eDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vu(t){return(e,n,r)=>{const i=On(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jt(t,e,n){const r=vu(e);return Gc(t,r,n)}function Gc(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;Be(o,t);const s=a,u=s.data.get(o.dataId).values;let l;if(o.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=el(u)}else l=u;const c=n||o.dtype,f=e(l,c,i);return s.makeTensorInfo(o.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UY=vu(t=>Math.ceil(t)),nDe=Gc(_y,UY),rDe={kernelName:_y,backendName:"cpu",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(t,e,n,r){const i=On(n,he(e));if(r&&n!=="string"){let a=0;t.forEach(o=>{const s=he(o.shape);i.set(o.vals,a),a+=s})}else{let a=0;t.forEach(o=>{const s=n==="string"?el(o.vals):o.vals;let u=0;for(let l=0;l<o.shape[0];++l){const c=l*e[1]+a;for(let f=0;f<o.shape[1];++f)i[c+f]=s[u++]}a+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HY=Wn((t,e)=>t===e?1:0),jY=hr(H2,HY,null,"bool"),iDe={kernelName:H2,backendName:"cpu",kernelFunc:jY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qY=vu(t=>Math.exp(t)),XY=Gc(Ry,qY,"float32"),aDe={kernelName:Ry,backendName:"cpu",kernelFunc:XY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KY=vu(t=>Math.expm1(t)),oDe=Gc($y,KY),sDe={kernelName:$y,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YY=vu(t=>Math.floor(t)),uDe=Gc(My,YY),lDe={kernelName:My,backendName:"cpu",kernelFunc:uDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZY=Wn((t,e)=>Math.floor(t/e)),cDe=hr(Oy,ZY,null,"int32"),fDe={kernelName:Oy,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(t,e,n,r,i,a,o,s,u){const l=Ct([r,a],n);for(let c=0;c<r;c++){const f=[];let h=0;for(let d=0;d<i;d++){const p=t[c*i+d];h+=p*o[d],f.push(p)}if(h<0||h>=u/a)throw new Error(`Invalid indices: ${f} does not index into ${s}`);for(let d=0;d<a;d++)l.values[c*a+d]=e.get(...e.indexToLoc(h*a+d))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(t,e,n){const r=Ct(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),s=o[0],u=o[2],l=e.locToIndex([s,u]);o[2]=e.values[l];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZ=Wn((t,e)=>t>e?1:0),hDe=hr(K2,eZ,null,"bool"),dDe={kernelName:K2,backendName:"cpu",kernelFunc:hDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZ=Wn((t,e)=>t>=e?1:0),pDe=hr(Fy,tZ,null,"bool"),vDe={kernelName:Fy,backendName:"cpu",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ=Wn((t,e)=>t<e?1:0),gDe=hr(Z2,nZ,null,"bool"),mDe={kernelName:Z2,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZ=Wn((t,e)=>t<=e?1:0),yDe=hr(Q2,rZ,null,"bool"),xDe={kernelName:Q2,backendName:"cpu",kernelFunc:yDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZ(t,e,n){const r=(e-t)/(n-1),i=Yr(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aZ=vu(t=>Math.log(t)),wDe=Gc(Vy,aZ),bDe={kernelName:Vy,backendName:"cpu",kernelFunc:wDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZ(t,e,n,r){const i=Kr(r,he(n));for(let a=0;a<i.length;++a){const o=a*e;let s=t[o];for(let u=0;u<e;++u){const l=t[o+u];(Number.isNaN(l)||l>s)&&(s=l)}i[a]=s}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZ=Wn((t,e)=>Math.max(t,e)),CDe=hr(Uy,sZ),SDe={kernelName:Uy,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZ=Wn((t,e)=>Math.min(t,e)),DDe=hr(Gy,uZ),_De={kernelName:Gy,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JF=Wn((t,e)=>t*e),TDe=ZF((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),JD=hr(jy,JF,TDe),EDe={kernelName:jy,backendName:"cpu",kernelFunc:JD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZ(t,e,n){const r=Pc(-1,n);return JF([],e,r,t,n)}function ADe(t){const{inputs:e,backend:n}=t,{x:r}=e;Be(r,"neg");const i=n.data.get(r.dataId).values,[a,o]=lZ(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}const kDe={kernelName:lD,backendName:"cpu",kernelFunc:ADe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cZ=Wn((t,e)=>t!==e?1:0),IDe=hr(cD,cZ,null,"bool"),NDe={kernelName:cD,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eP(t,e,n,r,i){const a=e.length,o=he(e),s=He(e),u=He(i),l=Kr(n,he(i));for(let c=0;c<o;++c){const f=Pv(c,a,s),h=new Array(f.length);for(let p=0;p<h.length;p++)h[p]=f[r[p]];const d=Qs(h,a,u);l[d]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Li(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;Be(i,"transpose");const o=i.shape.length,s=new Array(o);for(let f=0;f<s.length;f++)s[f]=i.shape[a[f]];const u=r.data.get(i.dataId).values,l=eP(u,i.shape,i.dtype,a,s);return{dataId:r.write(l,s,i.dtype),shape:s,dtype:i.dtype}}const RDe={kernelName:Ap,backendName:"cpu",kernelFunc:Li};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(t,e,n,r){const[i,a]=_r(t,r),o=pa(e,"int32"),s=Yr(he(i),o),u=he(a);for(let l=0;l<s.length;++l){const c=l*u;let f=1;for(let h=0;h<u;++h)f*=n[c+h];s[l]=f}return{outVals:s,outShape:i,outDtype:o}}function $De(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"prod");const s=i.shape.length,u=St(a,i.shape),l=Dn(u,s);let c=u,f=i;const h=[];l!=null&&(f=Li({inputs:{x:i},backend:n,attrs:{perm:l}}),h.push(f),c=Bn(c.length,s));const d=n.data.get(f.dataId).values,{outVals:p,outShape:v,outDtype:m}=fZ(f.shape,f.dtype,d,c);let g=v;return o&&(g=Zn(v,u)),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(g,m,p)}const MDe={kernelName:gD,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const a=Pv(i,e.length,He(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function FDe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function PDe(t,e,n,r){const i=[];let a=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);FDe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let f=1;f<u+1;++f)s[l].push(f*c)}for(let l=0;l<t.length;++l){let c=t[l],f=t[l]+1;for(let h=0;h<n.length;++h){const d=n[h],p=h+e.length-1;if(p>=0){const v=s[p],m=v[v.length-1]-d[c];for(let g=c;g<f;++g)s[p].push(d[g+1]+m)}c=d[c],f=d[f]}f!==c&&(i.push([c,f]),a+=f-c)}return{outSplits:s,valueSlices:i,numValues:a}}function LDe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=On("int32",r);e.push(i),t[n].forEach((a,o)=>i[o]=a)}return e}function tB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function zDe(t,e,n,r,i,a){const o=tB(e,2)[1],s=tB(a,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)i[u*s+f]=t[c*o+f];++u}}function BDe(t,e,n,r,i){const a=e.slice();a[0]=i;const o=On(n,he(a)),s=t.length,u=s===0?0:s/e[0];return zDe(t,e,r,u,o,a),[o,a]}function hZ(t,e,n,r,i,a,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(ODe(a,o,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:h}=PDe(a,o,t,l),d=LDe(c),p=BDe(n,r,i,f,h);return[d,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nB=2147483647;function dZ(t,e,n,r,i,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=e.length===0,u=i.length===0,l=o.length===0,c=[];s||c.push(e[0]),u||c.push(i[0]),l||c.push(o[0]);for(let m=1;m<c.length;++m)if(c[m]!==c[m-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],h=On("int32",f+1);h[0]=0;for(let m=0;m<f;++m){const g=s?t[0]:t[m],y=u?r[0]:r[m],x=l?a[0]:a[m];if(x===0)throw new Error("Requires delta != 0");let w;if(x>0&&y<g||x<0&&y>g)w=0;else if(w=Math.ceil(Math.abs((y-g)/x)),w>nB)throw new Error(`Requires ((limit - start) / delta) <= ${nB}`);h[m+1]=h[m]+w}const d=h[f],p=On(n,d);let v=0;for(let m=0;m<f;++m){const g=h[m+1]-h[m];let y=s?t[0]:t[m];const x=l?a[0]:a[m];for(let w=0;w<g;++w)p[v++]=y,y+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ya=ts;class SC{constructor(e,n,r,i,a,o,s,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=eX(c),this.raggedRank=tX(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ya.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ya.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ya.VALUE_ROWIDS:return SC.getMaxWidthValueRowID(n);case Ya.ROW_SPLITS:return SC.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ya[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const a=e[i+1]-e[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],a=0;for(let o=1;o<n;++o){const s=e[o];s!==i&&(i=s,a=Math.max(o-r,a),r=o)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return iB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;nX(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=Jq(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),a=[];let o=0;for(let s=0;s<i;++s,o+=n)a.push(o);for(let s=i;s<e;++s)a.push(-1);return z(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,i){const a=e.length,o=[];for(let s=0;s<a-1;++s){const u=e[s+1]-e[s];let l=Math.min(i,u),c=n[s];c===-1&&(l=0);for(let f=0;f<l;++f)o.push(c),c+=r;for(let f=0;f<u-l;++f)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const a=e.length,o=[];if(a===0)return[];let s=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];o.push(l);for(let c=1;c<a;++c){const f=e[c];if(f===u)l>=0&&(++s,s<i?l+=r:l=-1);else{if(s=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);l=n[f]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Ya.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case Ya.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${Ya[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ya.FIRST_DIM_SIZE:return e[0];case Ya.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ya.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ya[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*r[u+1];const a=iB(r,!1),o=On(this.valuesDType,he(a));if(i[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,i[l],r[l]);this.setOutput(this.raggedRank,u,o,a)}return[a,o]}setOutput(e,n,r,i){if(r.length===0)return;const a=this.values,o=r;let s=i.slice();s=s.slice(e+1);const u=he(s),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;se(()=>{const v=ie(c,p);c=Am(v,s).dataSync()})}let f=0,h=0,d=0;for(let p=0;p<=l;++p){let v=p<l?n[p]:-1;if(v===d){++d;continue}if(h<d){const m=a.subarray(f*u),g=o.subarray(h*u),y=(d-h)*u;rB(g,m,y)}if(p>=l){const m=r.length;v=Math.floor(m/u)}if(v>d)if(this.defaultValue.length===1)o.subarray(d*u,v*u).fill(this.defaultValue[0]),d=v;else for(;v>d;){const m=o.slice(d*u);rB(m,c,u),++d}v<0?(f=p+1,h=d):(f=p,h=d,d=h+1)}}}function rB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function iB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function pZ(t,e,n,r,i,a,o,s,u,l){return new SC(t,e,n,r,i,a,o,s,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vZ(t,e,n,r){const i=t===e,a=t<e&&n<0,o=e<t&&n>1;if(i||a||o)return Yr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),u=Yr(s,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ=vu(t=>1/Math.sqrt(t)),VDe=Gc(Qy,gZ),WDe={kernelName:Qy,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(t,e,n,r,i,a,o,s,u,l){const c=[r/i,i],f=t.values,h=e.values;if(r===0)return Ct(n,e.dtype);const d=u instanceof Rr?u:Ct(c,e.dtype);typeof u=="string"||typeof u=="number"?d.values.fill(u):typeof u=="boolean"&&d.values.fill(+u);for(let p=0;p<a;p++){const v=[];let m=0;for(let g=0;g<o;g++){const y=f[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let g=0;g<i;g++)l?d.values[m*i+g]+=h[p*i+g]:d.values[m*i+g]=e.rank===0?h[0]:h[p*i+g]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe=vu(t=>1/(1+Math.exp(-t))),mZ=jt(r1,t=>1/(1+Math.exp(-t))),GDe={kernelName:r1,backendName:"cpu",kernelFunc:mZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZ(t,e,n,r,i){const a=sF(r,e,n),o=he(n),s=He(r);if(a){const f=uF(e,s);return i==="string"?t.slice(f,f+o):t.subarray(f,f+o)}const u=i==="string"?el(t):t,l=Ct(r,i,u),c=Ct(n,i);for(let f=0;f<c.size;++f){const h=c.indexToLoc(f),d=h.map((p,v)=>p+e[v]);c.set(l.get(...d),...h)}return i==="string"?CX(c.values):c.values}function Oh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r;Be(i,"slice");const[s,u]=LD(i,a,o);aF(i,s,u);const l=n.data.get(i.dataId).values,c=yZ(l,s,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,c)}const HDe={kernelName:CD,backendName:"cpu",kernelFunc:Oh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(t,e,n,r,i,a,o){const s=e[0],u=a[0],l=new Array(u),c=new Array(s),f=e[1];if(u===0){if(s!==0)throw new Error(lX(s));const m=On(n,0),g=On(i,0);return[m,[0,f],g,l,c]}let h=!0,d=0;const p=new Array(u).fill(0);for(let m=0;m<s;++m){const g=t[m*f];if(g<0)throw new Error(cX(m,g));if(g>=u)throw new Error(fX(m,g,u));++p[g],h=h&&g>=d,d=g}let v=!0;for(let m=0;m<u;++m){const g=p[m]===0;l[m]=g,v=v&&!g,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(v&&h){const m=t,g=r;for(let y=0;y<s;++y)c[y]=y;return[m,[s,f],g,l,c]}else{const m=p[u-1],g=On(n,m*f),y=On(i,m),x=new Array(u).fill(0);for(let w=0;w<s;++w){const b=t[w*f],C=x[b],D=(b===0?0:p[b-1])+C;x[b]++;for(let S=0;S<f;++S)g[D*f+S]=t[w*f+S];y[D]=r[w],c[w]=D}for(let w=0;w<u;++w)if(x[w]===0){const C=w===0?0:p[w-1];g[C*f+0]=w;for(let D=1;D<f;++D)g[C*f+D]=0;y[C]=o}return[g,[m,f],y,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(t,e,n,r,i){const a=he(r),o=e[0],s=i.length,u=[];let l=1,c=-1;for(let m=0;m<s;++m){const g=i[m];if(g===-1){if(c!==-1)throw new Error(hX(c,m));c=m,u.push(1)}else{if(g<0)throw new Error(dX(m,g));l*=g,u.push(g)}}if(c!==-1){if(l<=0)throw new Error(pX());const m=Math.trunc(a/l);if(l*m!==a)throw new Error(vX(r,u));u[c]=m}if(he(u)!==a)throw new Error(gX(r,u));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let m=h-2;m>=0;--m)d[m]=d[m+1]*r[m+1]}const p=[];if(s>0){p[s-1]=1;for(let m=s-2;m>=0;--m)p[m]=p[m+1]*u[m+1]}const v=On(n,o*s);for(let m=0;m<o;++m){let g=0;for(let y=0;y<h;++y)g+=t[m*h+y]*d[y];for(let y=0;y<s;++y)v[m*s+y]=Math.trunc(g/p[y]),g%=p[y]}return[v,[o,s],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tP(t,e,n,r,i,a=!1,o=0){const s=r.length,u=[e[0],t.length/e[0]],l=u[1],f=s>0?i[s-1]+1:0;if(f<0)throw new Error(WI());const h=e.slice();h[0]=f;const d=h.reduce((x,w)=>x*w,1),p=On(n,d);if(s===0)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error(WI());let v=0,m=1,g=0,y=i[v];for(;;){let x=0;if(m<s){if(x=i[m],y===x){++m;continue}if(y>=x)throw new Error(mX())}if(y<0||y>=f)throw new Error(yX(y,f));y>g&&p.fill(o,g*l,y*l);for(let w=v;w<m;++w){const b=r[w];if(b<0||b>=u[0])throw new Error(xX(w,r[w],u[0]));for(let C=0;C<l;C++)p[y*l+C]+=t[b*l+C]}if(a)for(let w=0;w<l;w++)p[y*l+w]/=m-v;if(v=m,++m,g=y+1,y=x,m>s)break}return g<f&&p.fill(o,g*l,f*l),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe=vu(t=>Math.sqrt(t)),qDe=jt(a1,t=>Math.sqrt(t)),XDe={kernelName:a1,backendName:"cpu",kernelFunc:qDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bZ=Wn((t,e)=>{const n=t-e;return n*n}),KDe=hr(o1,bZ),YDe={kernelName:o1,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CZ=vu((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),ZDe=Gc(cO,CZ),QDe={kernelName:cO,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(t,e,n,r){const i=Ct(t,e.dtype);for(let a=0;a<i.size;a++){const o=i.indexToLoc(a),s=new Array(o.length);for(let u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];i.set(e.get(...s),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JDe{constructor(e,n,r,i,a,o){this.separator=uc(e),this.nGramWidths=n,this.leftPad=uc(r),this.rightPad=uc(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,a,o){for(let s=0;s<a;++s){const u=this.getPadWidth(o),l=Math.max(0,u-s),c=Math.max(0,u-(a-(s+1))),f=o-(l+c),h=n+(l>0?0:s-u);let d=0;d+=l*this.leftPad.length;for(let y=0;y<f;++y)d+=e[h+y].length;d+=c*this.rightPad.length;const p=l+c+f-1;d+=p*this.separator.length,r[i+s]=new Uint8Array(d);const v=r[i+s];let m=0;const g=y=>y.forEach(x=>v[m++]=x);for(let y=0;y<l;++y)g(this.leftPad),g(this.separator);for(let y=0;y<f-1;++y)g(e[h+y]),g(this.separator);if(f>0){g(e[h+f-1]);for(let y=0;y<c;++y)g(this.separator),g(this.rightPad)}else{for(let y=0;y<c-1;++y)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<i;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const a=i-1,o=On("int32",i);if(r===0||i===0){const u=new Array(r);for(let l=0;l<=a;++l)o[l]=0;return[u,o]}o[0]=0;for(let u=1;u<=a;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),o[u]=o[u-1]+c}const s=new Array(o[a]);for(let u=0;u<a;++u){const l=n[u];let c=o[u];if(this.nGramWidths.forEach(f=>{const h=n[u+1]-n[u],d=this.getNumNGrams(h,f);this.createNGrams(e,l,s,c,d,f),c+=d}),this.preserveShort&&c===o[u]){const f=n[u+1]-n[u];if(f===0)continue;const h=f+2*this.padWidth,d=1;this.createNGrams(e,l,s,c,d,h)}}return[s,o]}}function DZ(t,e,n,r,i,a,o,s){return new JDe(n,r,i,a,o,s).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=t.indexOf(a);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const o=t.subarray(i,a);(!n||o.length!==0)&&r.push(o),i=a+1}}function _Z(t,e,n){const r=t.length,i=[];let a=0,o=0;const s=new Array(r);for(let h=0;h<r;++h){const d=i.length;e_e(t[h],e,n,i);const p=i.length-d;s[h]=p,a+=p,o=Math.max(o,p)}const u=On("int32",a*2),l=new Array(a),c=[r,o];let f=0;for(let h=0;h<r;++h)for(let d=0;d<s[h];++d)u[f*2]=h,u[f*2+1]=d,l[f]=i[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZ(t,e){const n=On("int32",t.length);for(let r=0;r<t.length;++r)n[r]=xge(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EZ=Wn((t,e)=>t-e),t_e=ZF((t,e,n,r)=>({real:t-n,imag:e-r})),nP=hr(s1,EZ,t_e),n_e={kernelName:s1,backendName:"cpu",kernelFunc:nP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Ct(n,t.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),o=new Array(t.rank);for(let u=0;u<o.length;u++)o[u]=a[u]%t.shape[u];const s=t.locToIndex(o);r.values[i]=t.values[s]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rm=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function kZ(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,u=e-n+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*Math.sign(u-s/2),h=Math.max(n,Math.floor(e-u*c/s+f)),d=Math.min(r,Math.floor(e+(s-u)*c/s+f));kZ(t,e,h,d)}const i=t[e];let a=n,o=r;for(zd(t,n,e),rm(t[r],i)>0&&zd(t,n,r);a<o;){for(zd(t,a,o),a++,o--;rm(t[a],i)<0;)a=a+1;for(;rm(t[o],i)>0;)o=o-1}rm(t[n],i)===0?zd(t,n,o):(o=o+1,zd(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function IZ(t,e,n,r,i){const a=e[e.length-1],[o,s]=[t.length/a,a],u=Kr(n,o*r),l=Kr("int32",o*r);for(let f=0;f<o;f++){const h=f*s,d=t.subarray(h,h+s);let p=new Array(d.length);d.forEach((y,x)=>p[x]={value:y,index:x}),r<p.length&&(kZ(p,r),p=p.slice(0,r)),i&&p.sort(rm);const v=f*r,m=u.subarray(v,v+r),g=l.subarray(v,v+r);for(let y=0;y<r;y++)m[y]=p[y].value,g[y]=p[y].index}const c=e.slice();return c[c.length-1]=r,[Ct(c,n,u),Ct(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZ(t,e,n,r){const i=St(e,n)[0],a=[1,n[0],1];for(let p=0;p<i;p++)a[0]*=n[p];a[1]=n[i];for(let p=i+1;p<n.length;p++)a[2]*=n[p];const o=new Map,s=new Int32Array(n[i]),u=new Rr(a,r,t),l=[],c=a[0]===1&&a[2]===1;for(let p=0;p<n[i];p++){let v;if(c)v=t[p].toString();else{const g=[];for(let y=0;y<a[0];y++)for(let x=0;x<a[2];x++)g.push(u.get(y,p,x));v=g.join(",")}const m=o.get(v);if(m!=null)s[p]=m;else{const g=o.size;o.set(v,g),s[p]=g,l.push(p)}}const f=a.slice();f[1]=o.size;const h=new Rr(f,r);l.forEach((p,v)=>{for(let m=0;m<a[0];m++)for(let g=0;g<a[2];g++)h.set(u.get(m,p,g),m,v,g)});const d=n.slice();return d[i]=f[1],{outputValues:h.values,outputShape:d,indices:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:BY,bincountImpl:QF,bincountReduceImpl:VY,bitwiseAndImpl:WY,castImpl:zY,ceilImpl:UY,concatImpl:GY,equalImpl:HY,expImpl:qY,expm1Impl:KY,floorDivImpl:ZY,floorImpl:YY,gatherNdImpl:QY,gatherV2Impl:JY,greaterEqualImpl:tZ,greaterImpl:eZ,lessEqualImpl:rZ,lessImpl:nZ,linSpaceImpl:iZ,logImpl:aZ,maxImpl:oZ,maximumImpl:sZ,minimumImpl:uZ,multiplyImpl:JF,negImpl:lZ,notEqualImpl:cZ,prodImpl:fZ,raggedGatherImpl:hZ,raggedRangeImpl:dZ,raggedTensorToTensorImpl:pZ,rangeImpl:vZ,rsqrtImpl:gZ,scatterImpl:Gf,sigmoidImpl:UDe,simpleAbsImpl:LY,sliceImpl:yZ,sparseFillEmptyRowsImpl:xZ,sparseReshapeImpl:wZ,sparseSegmentReductionImpl:tP,sqrtImpl:jDe,squaredDifferenceImpl:bZ,staticRegexReplaceImpl:CZ,stridedSliceImpl:SZ,stringNGramsImpl:DZ,stringSplitImpl:_Z,stringToHashBucketFastImpl:TZ,subImpl:EZ,tileImpl:AZ,topKImpl:IZ,transposeImpl:eP,uniqueImpl:NZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */iq("cpu",()=>new QD,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZ=jt(Iy,t=>t>=0?t:Math.exp(t)-1),i_e={kernelName:Iy,backendName:"cpu",kernelFunc:RZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r;Be([i],"leakyRelu");const o=he(i.shape),s=n.data.get(i.dataId).values,u=Kr("float32",o);for(let l=0;l<s.length;l++)u[l]=s[l]<0?a*s[l]:s[l];return n.makeTensorInfo(i.shape,"float32",u)}const a_e={kernelName:Y2,backendName:"cpu",kernelFunc:$Z};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e=Wn((t,e)=>t<0?e*t:t);function MZ(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Be([r,i],"prelu");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,u]=o_e(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(u,"float32",s)}const s_e={kernelName:vD,backendName:"cpu",kernelFunc:MZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZ=jt(Ky,t=>Math.max(0,t)),u_e={kernelName:Ky,backendName:"cpu",kernelFunc:OZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FZ=jt(Yy,t=>Math.min(Math.max(0,t),6)),l_e={kernelName:Yy,backendName:"cpu",kernelFunc:FZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DC(t,e,n,r,i){if(n==="linear")return lu({inputs:{x:e},backend:t});if(n==="relu")return OZ({inputs:{x:e},backend:t});if(n==="elu")return RZ({inputs:{x:e},backend:t});if(n==="relu6")return FZ({inputs:{x:e},backend:t});if(n==="prelu")return MZ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return $Z({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return mZ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function on(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=he(i.shape),s=ij(a,o),u=he(s);z(o===u,()=>`The new shape (${s}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const l=n.data.get(i.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=s,f.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const c_e={kernelName:mD,backendName:"cpu",kernelFunc:on};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;Be([i,a],"matMul");const u=i.shape.length,l=a.shape.length,c=o?i.shape[u-2]:i.shape[u-1],f=s?a.shape[l-1]:a.shape[l-2],h=o?i.shape[u-1]:i.shape[u-2],d=s?a.shape[l-2]:a.shape[l-1],p=i.shape.slice(0,-2),v=a.shape.slice(0,-2),m=he(p),g=he(v),x=ht(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,d]);z(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[m,c,h]:[m,h,c],b=s?[g,d,f]:[g,f,d],C=on({inputs:{x:i},backend:n,attrs:{shape:w}}),D=on({inputs:{x:a},backend:n,attrs:{shape:b}}),S=o?C.shape[1]:C.shape[2],_=o?C.shape[2]:C.shape[1],T=s?D.shape[1]:D.shape[2],E=Math.max(m,g),A=n.data.get(C.dataId).values,N=n.data.get(D.dataId).values,R=He(C.shape),M=He(D.shape),[$,L,O]=o?[R[0],1,R[1]]:[R[0],R[1],1],[F,V,X]=s?[1,M[1],M[0]]:[M[1],1,M[0]],P=_*T,U=Ct([E,_,T],C.dtype),j=U.values,q=n.blockSize;for(let Y=0;Y<E;Y++){const ne=Y%m,ue=Y%g;for(let te=0;te<_;te+=q){const oe=Math.min(te+q,_);for(let ce=0;ce<T;ce+=q){const pe=Math.min(ce+q,T);for(let me=0;me<S;me+=q){const _e=Math.min(me+q,S);for(let Ne=te;Ne<oe;Ne++)for(let ke=ce;ke<pe;ke++){let Ve=0;for(let je=me;je<_e;je++){const ct=A[ne*$+Ne*L+je*O],rt=N[je*F+ke*V+ue*X];Ve+=ct*rt}j[Y*P+(Ne*T+ke)]+=Ve}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(D),n.makeTensorInfo(x,U.dtype,U.values)}const f_e={kernelName:O2,backendName:"cpu",kernelFunc:PZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;let h,d,p;const v=[];h=PZ({inputs:{a:i,b:a},attrs:{transposeA:u,transposeB:l},backend:n}),o&&(d=sv({inputs:{a:h,b:o},backend:n}),v.push(h),h=d),c&&(p=DC(n,h,c,s,f),v.push(h),h=p);for(const g of v)n.disposeIntermediateTensorInfo(g);return h}const d_e={kernelName:tC,backendName:"cpu",kernelFunc:h_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p_e=jt(my,t=>Math.acos(t)),v_e={kernelName:my,backendName:"cpu",kernelFunc:p_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g_e=jt(yy,t=>Math.acosh(t)),m_e={kernelName:yy,backendName:"cpu",kernelFunc:g_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t){const{inputs:e,backend:n}=t,r=e;Be(e,"addN");const i=r.map(s=>n.data.get(s.dataId).values),a=Ct(r[0].shape,r[0].dtype),o=a.values;for(let s=0;s<r.length;s++){const u=i[s];for(let l=0;l<o.length;l++)o[l]+=u[l]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const x_e={kernelName:kM,backendName:"cpu",kernelFunc:y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"all");const s=St(a,i.shape);let u=s;const l=Dn(u,i.shape.length);let c=i;l!=null&&(c=Li({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Bn(u.length,i.shape.length)),Fr("all",u,c.shape.length);const[f,h]=_r(c.shape,u),d=he(h),p=Yr(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];x=x&&b}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=Zn(f,s),y=on({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const b_e={kernelName:IM,backendName:"cpu",kernelFunc:w_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"any");const s=St(a,i.shape);let u=s;const l=Dn(u,i.shape.length);let c=i;l!=null&&(c=Li({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Bn(u.length,i.shape.length)),Fr("any",u,c.shape.length);const[f,h]=_r(c.shape,u),d=he(h),p=Yr(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];x=x||b}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=Zn(f,s),y=on({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const S_e={kernelName:NM,backendName:"cpu",kernelFunc:C_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Be(i,"argMax");let o=St(a,i.shape);const s=Dn(o,i.shape.length);let u=i;const l=[];s!=null&&(u=Li({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(u),o=Bn(o.length,u.shape.length)),o=[o[0]],Fr("argMax",o,u.shape.length);const[c,f]=_r(u.shape,o),h=he(c),d=Yr(h,"int32"),p=he(f),v=n.data.get(u.dataId).values;for(let m=0;m<d.length;++m){const g=m*p;let y=v[g],x=0;for(let w=0;w<p;++w){const b=v[g+w];b>y&&(y=b,x=w)}d[m]=x}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",d)}const __e={kernelName:N2,backendName:"cpu",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Be(i,"argMin");let o=St(a,i.shape);const s=Dn(o,i.shape.length);let u=i;const l=[];s!=null&&(u=Li({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(u),o=Bn(o.length,u.shape.length)),o=[o[0]],Fr("argMin",o,u.shape.length);const[c,f]=_r(u.shape,o),h=he(c),d=Yr(h,"int32"),p=he(f),v=n.data.get(u.dataId).values;for(let m=0;m<d.length;++m){const g=m*p;let y=v[g],x=0;for(let w=0;w<p;++w){const b=v[g+w];b<y&&(y=b,x=w)}d[m]=x}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",d)}const E_e={kernelName:R2,backendName:"cpu",kernelFunc:T_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e=jt(xy,t=>Math.asin(t)),k_e={kernelName:xy,backendName:"cpu",kernelFunc:A_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I_e=jt(wy,t=>Math.asinh(t)),N_e={kernelName:wy,backendName:"cpu",kernelFunc:I_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R_e=jt(by,t=>Math.atan(t)),$_e={kernelName:by,backendName:"cpu",kernelFunc:R_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_e=Wn((t,e)=>Math.atan2(t,e)),O_e=hr(Sy,M_e),F_e={kernelName:Sy,backendName:"cpu",kernelFunc:O_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e=jt(Cy,t=>Math.atanh(t)),L_e={kernelName:Cy,backendName:"cpu",kernelFunc:P_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rP(t,e,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,u=i.dilationHeight,l=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=i.padInfo.top,d=i.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Ct(i.outShape,n),m=v.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let w=0;w<i.batchSize;++w){const b=w*g,C=w*r[0];for(let D=0;D<i.inChannels;++D)for(let S=0;S<i.outHeight;++S){const _=S*o-h,T=Math.max(0,_),E=Math.min(i.inHeight,c+_),A=b+S*y;for(let N=0;N<i.outWidth;++N){const R=N*s-d,M=Math.max(0,R),$=Math.min(i.inWidth,f+R);let L=p,O=0,F=0;for(let X=T;X<E;X+=u){const P=C+X*r[1];for(let U=M;U<$;U+=l){const j=P+U*r[2],q=t[j+D];a==="max"&&q>L?L=q:a==="avg"&&(O+=q,F++)}if(isNaN(L))break}const V=A+N*x+D;m[V]=a==="avg"?O/F:L}}}return v}function LZ(t,e,n,r,i=!1,a=!1){const o=Ct(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,v=Ct(e,n,t);for(let m=0;m<r.batchSize;++m)for(let g=0;g<r.inChannels;++g)for(let y=0;y<r.outHeight;++y){const x=y*s-d;let w=x;for(;w<0;)w+=l;const b=Math.min(r.inHeight,f+x);for(let C=0;C<r.outWidth;++C){const D=C*u-p;let S=D;for(;S<0;)S+=c;const _=Math.min(r.inWidth,h+D);let T=Number.NEGATIVE_INFINITY,E=-1;for(let A=w;A<b;A+=l){const N=A-x;for(let R=S;R<_;R+=c){const M=R-D,$=v.get(m,A,R,g);$>T&&(T=$,i?E=a?((m*r.inHeight+A)*r.inWidth+R)*r.inChannels+g:(A*r.inWidth+R)*r.inChannels+g:E=N*h+M)}}o.set(E,m,y,C,g)}}return o}function zZ(t,e,n,r,i,a){const o=i.strideDepth,s=i.strideHeight,u=i.strideWidth,l=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,h=i.effectiveFilterDepth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,v=i.padInfo.front,m=i.padInfo.top,g=i.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ct(i.outShape,n),w=x.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],D=i.outShape[3]*i.outShape[4],S=i.outShape[4];for(let _=0;_<i.batchSize;++_){const T=_*b,E=_*r[0];for(let A=0;A<i.inChannels;++A)for(let N=0;N<i.outDepth;++N){const R=N*o-v;let M=R;for(;M<0;)M+=l;const $=Math.min(i.inDepth,h+R),L=T+N*C;for(let O=0;O<i.outHeight;++O){const F=O*s-m;let V=F;for(;V<0;)V+=c;const X=Math.min(i.inHeight,d+F),P=L+O*D;for(let U=0;U<i.outWidth;++U){const j=U*u-g;let q=j;for(;q<0;)q+=f;const Y=Math.min(i.inWidth,p+j),ne=P+U*S;let ue=y,te=0,oe=0;for(let pe=M;pe<$;pe+=l){const me=E+pe*r[1];for(let _e=V;_e<X;_e+=c){const Ne=me+_e*r[2];for(let ke=q;ke<Y;ke+=f){const Ve=Ne+ke*r[3],je=t[Ve+A];if(a==="max"&&je>ue?ue=je:a==="avg"&&(te+=je,oe++),isNaN(ue))break}if(isNaN(ue))break}if(isNaN(ue))break}const ce=ne+A;w[ce]=a==="avg"?te/Math.max(oe,1):ue}}}}return x}function z_e(t,e){const n=Ct(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let m=0;m<e.inChannels;++m)for(let g=0;g<e.outDepth;++g){const y=g*r-h;let x=y;for(;x<0;)x+=o;const w=Math.min(e.inDepth,l+y);for(let b=0;b<e.outHeight;++b){const C=b*i-d;let D=C;for(;D<0;)D+=s;const S=Math.min(e.inHeight,c+C);for(let _=0;_<e.outWidth;++_){const T=_*a-p;let E=T;for(;E<0;)E+=u;const A=Math.min(e.inWidth,f+T);let N=Number.NEGATIVE_INFINITY,R=-1;for(let M=x;M<w;M+=o){const $=M-y;for(let L=D;L<S;L+=s){const O=L-C;for(let F=E;F<A;F+=u){const V=F-T,X=t.get(v,M,L,F,m);X>=N&&(N=X,R=$*c*f+O*c+V)}}}n.set(R,v,g,b,_,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Be(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;z(Qr(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Oo(i.shape,a,o,l,s,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&zt(c.inShape,c.outShape))f=lu({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=He(i.shape),p=rP(h,i.shape,i.dtype,d,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const V_e={kernelName:$2,backendName:"cpu",kernelFunc:B_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r;Be(i,"avgPool3d");const c=ol(i.shape,a,o,1,s,u,l),f=n.data.get(i.dataId).values,h=zZ(f,i.shape,i.dtype,He(i.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const U_e={kernelName:M2,backendName:"cpu",kernelFunc:W_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r;Be([i,a],"avgPool3DGrad");const c=ol(a.shape,o,s,1,u,l),f=c.strideDepth,h=c.strideHeight,d=c.strideWidth,p=c.filterDepth,v=c.filterHeight,m=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,b=c.effectiveFilterHeight,C=c.effectiveFilterWidth,D=w-1-c.padInfo.front,S=C-1-c.padInfo.left,_=b-1-c.padInfo.top,T=Ct(a.shape,"float32"),E=1/(p*v*m),A=n.bufferSync(i);for(let N=0;N<c.batchSize;++N)for(let R=0;R<c.inChannels;++R)for(let M=0;M<c.inDepth;++M)for(let $=0;$<c.inHeight;++$)for(let L=0;L<c.inWidth;++L){const O=M-D,F=$-_,V=L-S;let X=0;for(let P=0;P<w;P+=g){const U=(O+P)/f;if(!(U<0||U>=c.outDepth||Math.floor(U)!==U))for(let j=0;j<b;j+=y){const q=(F+j)/h;if(!(q<0||q>=c.outHeight||Math.floor(q)!==q))for(let Y=0;Y<C;Y+=x){const ne=(V+Y)/d;if(ne<0||ne>=c.outWidth||Math.floor(ne)!==ne)continue;const ue=A.get(N,U,q,ne,R);X+=ue}}}T.set(X*E,N,M,$,L,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const H_e={kernelName:$M,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;Be([i,a],"avgPoolGrad");const{filterSize:s,strides:u,pad:l}=r,c=Oo(o.shape,s,u,1,l),f=c.strideHeight,h=c.strideWidth,d=c.filterHeight,p=c.filterWidth,v=c.dilationHeight,m=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,x=y-1-c.padInfo.left,w=g-1-c.padInfo.top,b=Ct(o.shape,"float32"),C=1/(d*p),D=n.data.get(i.dataId).values,S=Ct(i.shape,"float32",D);for(let _=0;_<c.batchSize;++_)for(let T=0;T<c.inChannels;++T)for(let E=0;E<c.inHeight;++E)for(let A=0;A<c.inWidth;++A){const N=E-w,R=A-x;let M=0;for(let $=0;$<g;$+=v){const L=(N+$)/f;if(!(L<0||L>=c.outHeight||Math.floor(L)!==L))for(let O=0;O<y;O+=m){const F=(R+O)/h;if(F<0||F>=c.outWidth||Math.floor(F)!==F)continue;const V=S.get(_,L,F,T);M+=V}}b.set(M*C,_,E,A,T)}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const q_e={kernelName:RM,backendName:"cpu",kernelFunc:j_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:o,mean:s,variance:u}=e;z(s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),z(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),z(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Be([i,s,u,a,o],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,d=a?n.data.get(a.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),m=p.length,g=d.length,y=h.length,x=f.length;let w=0,b=0,C=0,D=0;for(let S=0;S<c.length;++S)v[S]=p[w++]+(c[S]-f[b++])*d[C++]/Math.sqrt(h[D++]+l),w>=m&&(w=0),b>=x&&(b=0),C>=g&&(C=0),D>=y&&(D=0);return n.makeTensorInfo(i.shape,i.dtype,v)}const K_e={kernelName:q2,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;Be([i],"batchToSpaceND");const s=a.reduce((g,y)=>g*y),u=m1(i.shape,a,s),l=y1(u.length,a.length),c=x1(i.shape,a,s),f=dF(o,a.length),h=pF(c,o,a.length),d=on({inputs:{x:i},backend:n,attrs:{shape:u}}),p=Li({inputs:{x:d},backend:n,attrs:{perm:l}}),v=on({inputs:{x:p},backend:n,attrs:{shape:c}}),m=Oh({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const Z_e={kernelName:F2,backendName:"cpu",kernelFunc:Y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,l=QF(s,u,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,l)}const J_e={kernelName:MM,backendName:"cpu",kernelFunc:Q_e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=ht(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const tTe={kernelName:cj,backendName:"cpu",kernelFunc:eTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nTe=jt(Ty,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),rTe={kernelName:Ty,backendName:"cpu",kernelFunc:nTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(he(e.shape)),i=n.data.get(e.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values;for(let l=0;l<s.length;l++){const c=s[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},aTe={kernelName:P2,backendName:"cpu",kernelFunc:iTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uv(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const oTe={kernelName:QM,backendName:"cpu",kernelFunc:uv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lv(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=St(i,e[0].shape)[0],o=e.map(v=>v.shape);cF(o,a);let s=eu(e.map(v=>v.shape),a);if(he(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const u=e.filter(v=>he(v.shape)>0);if(u.length===1)return lu({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const v=u.map(w=>Mh({inputs:{input:w},backend:n})),m=u.map(w=>uv({inputs:{input:w},backend:n})),g=lv({inputs:v,backend:n,attrs:{axis:a}}),y=lv({inputs:m,backend:n,attrs:{axis:a}}),x=ea({inputs:{real:g,imag:y},backend:n});return v.forEach(w=>n.disposeIntermediateTensorInfo(w)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const l=u.map(v=>{const g=[-1,he(v.shape.slice(a))];return on({inputs:{x:v},backend:n,attrs:{shape:g}})}),c=l.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));s=eu(l.map(v=>v.shape),1);const f=l[0].shape[0]===1,h=GY(c,s,e[0].dtype,f),d=eu(u.map(v=>v.shape),a),p=n.makeTensorInfo(d,e[0].dtype,h);return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const sTe={kernelName:L2,backendName:"cpu",kernelFunc:lv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r;Be([i,a],"conv2d");const f=sl(u),h=Or(i.shape,a.shape,o,l,s,c,!1,f),d=h.filterHeight,p=h.filterWidth,v=h.dilationHeight,m=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,x=h.dataFormat==="channelsLast",w=new Rr(h.outShape,i.dtype),b=He(i.shape),C=He(a.shape),D=b[0],S=x?b[1]:b[2],_=x?b[2]:1,T=x?1:b[1],E=w.strides[0],A=x?w.strides[1]:w.strides[2],N=x?w.strides[2]:1,R=x?1:w.strides[1],M=n.data.get(i.dataId).values,$=n.data.get(a.dataId).values,L=w.values;for(let O=0;O<h.batchSize;++O){const F=O*D,V=O*E;for(let X=0;X<h.outHeight;++X){const P=V+X*A,U=X*h.strideHeight-y;for(let j=0;j<d;++j){const q=U+j*v;if(q<0||q>=h.inHeight)continue;const Y=j*C[0],ne=F+q*S;for(let ue=0;ue<h.outWidth;++ue){const te=P+ue*N,oe=ue*h.strideWidth-g;for(let ce=0;ce<p;++ce){const pe=oe+ce*m;if(pe<0||pe>=h.inWidth)continue;const me=Y+ce*C[1],_e=ne+pe*_;let Ne=me;for(let ke=0;ke<h.inChannels;++ke){const Ve=M[_e+ke*T];for(let je=0;je<h.outChannels;++je)L[te+je*R]+=Ve*$[Ne+je];Ne+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,L)}const uTe={kernelName:z2,backendName:"cpu",kernelFunc:BZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;Be([i,a],"conv2dBackpropFilter");const f=sl(u),h=Or(i.shape,c,o,1,s,l,!1,f),{strideHeight:d,strideWidth:p,filterHeight:v,filterWidth:m}=h,g=h.dataFormat==="channelsLast",y=new Rr(h.filterShape,"float32"),x=h.padInfo.left,w=h.padInfo.top,b=n.data.get(i.dataId).values,C=n.data.get(a.dataId).values,D=new Rr(i.shape,i.dtype,b),S=new Rr(a.shape,a.dtype,C);for(let _=0;_<v;++_){const T=Math.max(0,Math.ceil((w-_)/d)),E=Math.min(h.outHeight,(h.inHeight+w-_)/d);for(let A=0;A<m;++A){const N=Math.max(0,Math.ceil((x-A)/p)),R=Math.min(h.outWidth,(h.inWidth+x-A)/p);for(let M=0;M<h.inChannels;++M)for(let $=0;$<h.outChannels;++$){let L=0;for(let O=0;O<h.batchSize;++O)for(let F=T;F<E;++F){const V=_+F*d-w;for(let X=N;X<R;++X){const P=A+X*p-x;g?L+=D.get(O,V,P,M)*S.get(O,F,X,$):L+=D.get(O,M,V,P)*S.get(O,$,F,X)}}y.set(L,_,A,M,$)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const cTe={kernelName:PM,backendName:"cpu",kernelFunc:lTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r;Be([i,a],"conv2dBackpropInput");const f=He(a.shape),h=He(i.shape);let d=sl(l);const p=Or(o,a.shape,s,1,u,c,!1,d),v=new Rr(p.inShape,"float32"),m=v.values,g=n.data.get(i.dataId).values,y=n.data.get(a.dataId).values,[x,w,b]=f,{batchSize:C,filterHeight:D,filterWidth:S,inChannels:_,inHeight:T,inWidth:E,outChannels:A,outHeight:N,outWidth:R,strideHeight:M,strideWidth:$}=p;d=p.dataFormat;const L=D-1-p.padInfo.top,O=S-1-p.padInfo.left,F=d==="channelsLast",V=v.strides[0],X=F?v.strides[1]:v.strides[2],P=F?v.strides[2]:1,U=F?1:v.strides[1],j=h[0],q=F?h[1]:h[2],Y=F?h[2]:1,ne=F?1:h[1];for(let ue=0;ue<C;++ue)for(let te=0;te<_;++te)for(let oe=0;oe<T;++oe){const ce=oe-L,pe=Math.max(0,Math.ceil(ce/M)),me=Math.min(N,(D+ce)/M);for(let _e=0;_e<E;++_e){const Ne=_e-O,ke=Math.max(0,Math.ceil(Ne/$)),Ve=Math.min(R,(S+Ne)/$);let je=0;for(let rt=pe;rt<me;++rt){const xt=rt*M-ce;for(let it=ke;it<Ve;++it){const G=it*$-Ne,Z=j*ue+q*rt+Y*it,re=x*(D-1-xt)+w*(S-1-G)+b*te;for(let de=0;de<A;++de){const ge=g[Z+ne*de],ye=y[re+de];je+=ge*ye}}}const ct=V*ue+X*oe+P*_e+U*te;m[ct]=je}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const hTe={kernelName:B2,backendName:"cpu",kernelFunc:fTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u}=r;Be([i,a],"conv3d");const l=zc(i.shape,a.shape,o,u,s),{filterDepth:c,filterHeight:f,filterWidth:h,dilationDepth:d,dilationHeight:p,dilationWidth:v,padInfo:m}=l,g=m.front,y=m.left,x=m.top,w=new Rr(l.outShape,i.dtype),b=n.data.get(i.dataId).values,C=n.data.get(a.dataId).values,D=w.values,S=He(i.shape),_=He(a.shape);for(let T=0;T<l.batchSize;++T){const E=T*S[0],A=T*w.strides[0];for(let N=0;N<l.outDepth;++N){const R=A+N*w.strides[1],M=N*l.strideDepth-g;for(let $=0;$<c;++$){const L=M+$*d;if(L<0||L>=l.inDepth)continue;const O=$*_[0],F=E+L*S[1];for(let V=0;V<l.outHeight;++V){const X=R+V*w.strides[2],P=V*l.strideHeight-x;for(let U=0;U<f;++U){const j=P+U*p;if(j<0||j>=l.inHeight)continue;const q=O+U*_[1],Y=F+j*S[2];for(let ne=0;ne<l.outWidth;++ne){const ue=X+ne*l.outChannels,te=ne*l.strideWidth-y;for(let oe=0;oe<h;++oe){const ce=te+oe*v;if(ce<0||ce>=l.inWidth)continue;const pe=q+oe*_[2],me=Y+ce*l.inChannels;let _e=pe;for(let Ne=0;Ne<l.inChannels;++Ne){const ke=b[me+Ne];for(let Ve=0;Ve<l.outChannels;++Ve)D[ue+Ve]+=ke*C[_e+Ve];_e+=l.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const pTe={kernelName:V2,backendName:"cpu",kernelFunc:dTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:u}=r;Be([i,a],"conv3dBackpropFilterV2");const l=He(i.shape),c=He(a.shape),f=zc(i.shape,u,o,1,s),h=f.strideDepth,d=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,y=new Rr(f.filterShape,"float32"),x=y.values,[w,b,C,D]=y.strides,S=n.data.get(a.dataId).values,[_,T,E,A]=c,N=n.data.get(i.dataId).values,[R,M,$,L]=l,O=f.padInfo.front,F=f.padInfo.left,V=f.padInfo.top;for(let X=0;X<v;++X){const P=Math.max(0,Math.ceil((O-X)/h)),U=Math.min(f.outDepth,(f.inDepth+O-X)/h),j=X*w;for(let q=0;q<m;++q){const Y=Math.max(0,Math.ceil((V-q)/d)),ne=Math.min(f.outHeight,(f.inHeight+V-q)/d),ue=q*b+j;for(let te=0;te<g;++te){const oe=Math.max(0,Math.ceil((F-te)/p)),ce=Math.min(f.outWidth,(f.inWidth+F-te)/p),pe=te*C+ue;for(let me=0;me<f.inChannels;++me){const _e=me*D+pe;for(let Ne=0;Ne<f.outChannels;++Ne){let ke=0;for(let Ve=0;Ve<f.batchSize;++Ve){const je=Ve*R,ct=Ve*_;for(let rt=P;rt<U;++rt){const it=(X+rt*h-O)*M+je,G=rt*T+ct;for(let Z=Y;Z<ne;++Z){const de=(q+Z*d-V)*$+it,ge=Z*E+G;for(let ye=oe;ye<ce;++ye){const ve=(te+ye*p-F)*L+de,Ce=ye*A+ge;ke+=N[ve+me]*S[Ce+Ne]}}}}x[_e+Ne]=ke}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const gTe={kernelName:LM,backendName:"cpu",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:u}=r;Be([i],"conv3dBackpropInputV2");const l=He(i.shape),c=He(a.shape),f=zc(u,a.shape,s,1,o),h=new Rr(f.inShape,"float32"),d=h.values,[p,v,m,g]=h.strides,y=n.data.get(i.dataId).values,[x,w,b,C]=l,D=n.data.get(a.dataId).values,[S,_,T,E]=c,{batchSize:A,filterDepth:N,filterHeight:R,filterWidth:M,inChannels:$,inDepth:L,inHeight:O,inWidth:F,outChannels:V,outDepth:X,outHeight:P,outWidth:U,strideDepth:j,strideHeight:q,strideWidth:Y}=f,ne=N-1-f.padInfo.front,ue=R-1-f.padInfo.top,te=M-1-f.padInfo.left;for(let oe=0;oe<A;++oe)for(let ce=0;ce<$;++ce)for(let pe=0;pe<L;++pe){const me=pe-ne,_e=Math.max(0,Math.ceil(me/j)),Ne=Math.min(X,(N+me)/j);for(let ke=0;ke<O;++ke){const Ve=ke-ue,je=Math.max(0,Math.ceil(Ve/q)),ct=Math.min(P,(R+Ve)/q);for(let rt=0;rt<F;++rt){const xt=rt-te,it=Math.max(0,Math.ceil(xt/Y)),G=Math.min(U,(M+xt)/Y);let Z=0;for(let re=_e;re<Ne;++re){const de=re*j-me;for(let ge=je;ge<ct;++ge){const ye=ge*q-Ve;for(let Se=it;Se<G;++Se){const ve=Se*Y-xt,Ce=x*oe+w*re+b*ge+C*Se,Pe=S*(N-1-de)+_*(R-1-ye)+T*(M-1-ve)+E*ce;for(let at=0;at<V;++at){const Ae=y[Ce+at],er=D[Pe+at];Z+=Ae*er}}}}d[p*oe+v*pe+m*ke+g*rt+ce]=Z}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const yTe={kernelName:zM,backendName:"cpu",kernelFunc:mTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTe=jt(Ey,t=>Math.cos(t)),wTe={kernelName:Ey,backendName:"cpu",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bTe=jt(Ay,t=>Math.cosh(t)),CTe={kernelName:Ay,backendName:"cpu",kernelFunc:bTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:u,extrapolationValue:l}=r,[c,f,h,d]=i.shape,p=a.shape[0],[v,m]=s,g=Ct([p,v,m,d],"float32"),y=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,b=He(i.shape),C=He(g.shape);for(let D=0;D<p;D++){const S=D*4,_=y[S],T=y[S+1],E=y[S+2],A=y[S+3],N=x[D];if(N>=c)continue;const R=v>1?(E-_)*(f-1)/(v-1):0,M=m>1?(A-T)*(h-1)/(m-1):0;for(let $=0;$<v;$++){const L=v>1?_*(f-1)+$*R:.5*(_+E)*(f-1);if(L<0||L>f-1){for(let O=0;O<m;O++)for(let F=0;F<d;F++){const V=F+O*C[2]+$*C[1]+D*C[0];g.values[V]=l}continue}if(u==="bilinear"){const O=Math.floor(L),F=Math.ceil(L),V=L-O;for(let X=0;X<m;X++){const P=m>1?T*(h-1)+X*M:.5*(T+A)*(h-1);if(P<0||P>h-1){for(let Y=0;Y<d;Y++){const ne=Y+X*C[2]+$*C[1]+D*C[0];g.values[ne]=l}continue}const U=Math.floor(P),j=Math.ceil(P),q=P-U;for(let Y=0;Y<d;Y++){let ne=Y+U*b[2]+O*b[1]+N*b[0];const ue=w[ne];ne=Y+j*b[2]+O*b[1]+N*b[0];const te=w[ne];ne=Y+U*b[2]+F*b[1]+N*b[0];const oe=w[ne];ne=Y+j*b[2]+F*b[1]+N*b[0];const ce=w[ne],pe=ue+(te-ue)*q,me=oe+(ce-oe)*q;ne=Y+X*C[2]+$*C[1]+D*C[0],g.values[ne]=pe+(me-pe)*V}}}else for(let O=0;O<m;++O){const F=m>1?T*(h-1)+O*M:.5*(T+A)*(h-1);if(F<0||F>h-1){for(let P=0;P<d;P++){const U=P+O*C[2]+$*C[1]+D*C[0];g.values[U]=l}continue}const V=Math.round(F),X=Math.round(L);for(let P=0;P<d;P++){const U=P+V*b[2]+X*b[1]+N*b[0],j=P+O*C[2]+$*C[1]+D*C[0];g.values[j]=w[U]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const DTe={kernelName:VM,backendName:"cpu",kernelFunc:STe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Be(i,"cumprod");const u=Dn([a],i.shape.length);let l=i;u!=null&&(l=Li({inputs:{x:i},backend:n,attrs:{perm:u}}));const c=Bn(1,i.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=pa(l.dtype,"int32"),h=TM(he(l.shape),f),d=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<d.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)h[x]=o?1:d[x];else{const w=v(g,y-1);h[x]=o?d[w]*h[w]:d[x]*h[w]}}const m=n.makeTensorInfo(l.shape,f,h);if(u!=null){const g=Bc(u),y=Li({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(l),y}return m}const TTe={kernelName:BM,backendName:"cpu",kernelFunc:_Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Be(i,"cumsum");const u=Dn([a],i.shape.length);let l=i;u!=null&&(l=Li({inputs:{x:i},backend:n,attrs:{perm:u}}));const c=Bn(1,i.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=pa(l.dtype,"int32"),h=Yr(he(l.shape),f),d=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<d.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)h[x]=o?0:d[x];else{const w=v(g,y-1);h[x]=o?d[w]+h[w]:d[x]+h[w]}}const m=n.makeTensorInfo(l.shape,f,h);if(u!=null){const g=Bc(u),y=Li({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(l),y}return m}const ATe={kernelName:W2,backendName:"cpu",kernelFunc:ETe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const u=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=QF(u,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}else if(i.shape.length===2){const u=n.bufferSync(i),l=n.bufferSync(a),c=VY(u,l,o,s);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const ITe={kernelName:WM,backendName:"cpu",kernelFunc:kTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r;z(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=i.shape[0],u=i.shape[1],l=i.shape[2],c=i.shape[3],f=u*a,h=l*a,d=c/(a*a),p=n.data.get(i.dataId).values,v=new Float32Array(s*f*h*d);let m=0;for(let g=0;g<s;++g)for(let y=0;y<f;++y){const x=Math.floor(y/a),w=y%a;for(let b=0;b<h;++b){const C=Math.floor(b/a),D=b%a,S=(w*a+D)*d;for(let _=0;_<d;++_){const E=_+S+c*(C+l*(x+u*g));v[m++]=p[E]}}}return n.makeTensorInfo([s,f,h,d],i.dtype,v)}const RTe={kernelName:UM,backendName:"cpu",kernelFunc:NTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u,dimRoundingMode:l}=r;Be([i,a],"depthwiseConv2DNative");const c=He(i.shape),f=He(a.shape);let h=u;h==null&&(h=[1,1]),z(Qr(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const d=Or(i.shape,a.shape,o,h,s,l,!0),{filterHeight:p,filterWidth:v,dilationHeight:m,dilationWidth:g,padInfo:y}=d,x=y.left,w=y.top,b=d.outChannels/d.inChannels,C=new Rr(d.outShape,i.dtype),D=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,_=C.values;for(let T=0;T<d.batchSize;++T){const E=T*c[0],A=T*C.strides[0];for(let N=0;N<d.outHeight;++N){const R=A+N*C.strides[1],M=N*d.strideHeight-w;for(let $=0;$<p;++$){const L=M+$*m;if(L<0||L>=d.inHeight)continue;const O=$*f[0],F=E+L*c[1];for(let V=0;V<d.outWidth;++V){const X=R+V*C.strides[2],P=V*d.strideWidth-x;for(let U=0;U<v;++U){const j=P+U*g;if(j<0||j>=d.inWidth)continue;const q=O+U*f[1],Y=F+j*d.inChannels;let ne=X,ue=q;for(let te=0;te<d.inChannels;++te){const oe=D[Y+te];for(let ce=0;ce<b;++ce)_[ne+ce]+=oe*S[ue+ce];ne+=b,ue+=b}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const $Te={kernelName:U2,backendName:"cpu",kernelFunc:VZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r;Be([i,a],"depthwiseConv2dNativeBackpropFilter");const f=Or(i.shape,c,o,s,u,l,!0),{strideHeight:h,strideWidth:d,filterHeight:p,filterWidth:v}=f,m=new Rr(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,x=f.outChannels/f.inChannels,w=n.data.get(i.dataId).values,b=new Rr(i.shape,i.dtype,w),C=n.data.get(a.dataId).values,D=new Rr(a.shape,a.dtype,C);for(let S=0;S<p;++S){const _=Math.max(0,Math.ceil((y-S)/h)),T=Math.min(f.outHeight,(f.inHeight+y-S)/h);for(let E=0;E<v;++E){const A=Math.max(0,Math.ceil((g-E)/d)),N=Math.min(f.outWidth,(f.inWidth+g-E)/d);for(let R=0;R<f.outChannels;++R){const M=Math.trunc(R/x),$=R%x;let L=0;for(let O=0;O<f.batchSize;++O)for(let F=_;F<T;++F){const V=S+F*h-y;for(let X=A;X<N;++X){const P=E+X*d-g;L+=b.get(O,V,P,M)*D.get(O,F,X,R)}}m.set(L,S,E,M,$)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const OTe={kernelName:GM,backendName:"cpu",kernelFunc:MTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r;Be([i,a],"depthwiseConv2DNativeBackpropInput");const f=He(i.shape),h=He(a.shape),d=Or(c,a.shape,o,s,u,l,!0),p=new Rr(d.inShape,"float32"),v=p.values,[m,g,y]=p.strides,x=n.data.get(i.dataId).values,[w,b,C]=f,D=n.data.get(a.dataId).values,[S,_,T]=h,{batchSize:E,filterHeight:A,filterWidth:N,inChannels:R,inHeight:M,inWidth:$,outChannels:L,outHeight:O,outWidth:F,strideHeight:V,strideWidth:X}=d,P=A-1-d.padInfo.top,U=N-1-d.padInfo.left,j=L/R;for(let q=0;q<E;++q)for(let Y=0;Y<R;++Y)for(let ne=0;ne<M;++ne){const ue=ne-P,te=Math.max(0,Math.ceil(ue/V)),oe=Math.min(O,(A+ue)/V);for(let ce=0;ce<$;++ce){const pe=ce-U,me=Math.max(0,Math.ceil(pe/X)),_e=Math.min(F,(N+pe)/X);let Ne=0;for(let ke=te;ke<oe;++ke){const Ve=ke*V-ue;for(let je=me;je<_e;++je){const ct=je*X-pe,rt=w*q+b*ke+C*je,xt=S*(A-1-Ve)+_*(N-1-ct)+T*Y;for(let it=0;it<j;++it){const G=Y*j+it,Z=x[rt+G],re=D[xt+it];Ne+=Z*re}}}v[m*q+g*ne+y*ce+Y]=Ne}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const PTe={kernelName:HM,backendName:"cpu",kernelFunc:FTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=he(r.shape),a=n.data.get(r.dataId).values,o=Ct([i,i],r.dtype),s=o.values;for(let l=0;l<a.length;l++)s[l*i+l]=a[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,o.dtype,o.values)}const zTe={kernelName:fj,backendName:"cpu",kernelFunc:LTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTe={kernelName:G2,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:o,dilations:s}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,f=u.data.get(i.dataId).values,h=i.shape.length,{batchSize:d,inHeight:p,inWidth:v,inChannels:m,outHeight:g,outWidth:y,padInfo:x,strideHeight:w,strideWidth:b,filterHeight:C,filterWidth:D,dilationHeight:S,dilationWidth:_,outShape:T}=h1(r.shape,i.shape,a,o,"NHWC",s),E=he(T),A=T.length,N=On(r.dtype,E);for(let M=0;M<d;++M)for(let $=0;$<g;++$){const L=$*w-x.top;for(let O=0;O<y;++O){const F=O*b-x.left;for(let V=0;V<m;++V){let X=Number.MIN_SAFE_INTEGER;for(let U=0;U<C;++U){const j=L+U*S;if(j>=0&&j<p)for(let q=0;q<D;++q){const Y=F+q*_;if(Y>=0&&Y<v){const ne=Qs([M,j,Y,V],c,He(r.shape)),ue=Qs([U,q,V],h,He(i.shape)),te=l[ne]+f[ue];te>X&&(X=te)}}}const P=Qs([M,$,O,V],A,He(T));N[P]=X}}}return{dataId:u.write(Yh(N,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe={kernelName:_I,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:u}=n,l=e,c=ls(r.shape,l.data.get(r.dataId).values),f=ls(i.shape,l.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:b,filterWidth:C,dilationHeight:D,dilationWidth:S,outShape:_}=h1(r.shape,i.shape,o,s,"NHWC",u);z(a.rank===_.length,()=>`Error in ${_I}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const T=ls(_,l.data.get(a.dataId).values),E=sj(i.shape,i.dtype);for(let N=0;N<h;++N)for(let R=0;R<m;++R){const M=R*x-y.top;for(let $=0;$<g;++$){const L=$*w-y.left;for(let O=0;O<v;++O){let F=Number.MIN_SAFE_INTEGER,V=0,X=0;for(let P=0;P<b;++P){const U=M+P*D;if(U>=0&&U<d)for(let j=0;j<C;++j){const q=L+j*S;if(q>=0&&q<p){const Y=c[N][U][q][O]+f[P][j][O];Y>F&&(F=Y,V=P,X=j)}}}E[V][X][O]+=T[N][R][$][O]}}}return{dataId:l.write(Yh(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WTe={kernelName:DI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:u}=n,l=e,c=ls(r.shape,l.data.get(r.dataId).values),f=ls(i.shape,l.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:b,filterWidth:C,dilationHeight:D,dilationWidth:S,outShape:_}=h1(r.shape,i.shape,o,s,"NHWC",u);z(a.rank===_.length,()=>`Error in ${DI}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const T=ls(_,l.data.get(a.dataId).values),E=sj(r.shape,r.dtype);for(let N=0;N<h;++N)for(let R=0;R<m;++R){const M=R*x-y.top;for(let $=0;$<g;++$){const L=$*w-y.left;for(let O=0;O<v;++O){let F=Number.MIN_SAFE_INTEGER,V=M<0?0:M,X=L<0?0:L;for(let P=0;P<b;++P){const U=M+P*D;if(U>=0&&U<d)for(let j=0;j<C;++j){const q=L+j*S;if(q>=0&&q<p){const Y=c[N][U][q][O]+f[P][j][O];Y>F&&(F=Y,V=U,X=q)}}}E[N][V][X][O]+=T[N][R][$][O]}}}return{dataId:l.write(Yh(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:u}=o||{},l=(u==null?void 0:u.alpha)||1,c=(s==null?void 0:s.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const f=a.getContext(c,(s==null?void 0:s.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[h,d]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],v=n.data.get(i.dataId).values,m=i.dtype==="float32"?255:1,g=new Uint8ClampedArray(d*h*4);for(let x=0;x<h*d;++x){const w=[0,0,0,255*l];for(let C=0;C<p;C++){const D=v[x*p+C];if(i.dtype==="float32"){if(D<0||D>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${D}.`)}else if(i.dtype==="int32"&&(D<0||D>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${D}.`);p===1?(w[0]=D*m,w[1]=D*m,w[2]=D*m):w[C]=D*m}const b=x*4;g[b+0]=Math.round(w[0]),g[b+1]=Math.round(w[1]),g[b+2]=Math.round(w[2]),g[b+3]=Math.round(w[3])}a.width=d,a.height=h;const y=new ImageData(g,d,h);return f.putImageData(y,0,0),i}const GTe={kernelName:uge,backendName:"cpu",kernelFunc:UTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"sum");let s;i.dtype==="bool"?s=Dc({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):s=lu({inputs:{x:i},backend:n});const u=s.shape.length,l=St(a,s.shape),c=Dn(l,u);let f=l,h=s;c!=null&&(h=Li({inputs:{x:s},backend:n,attrs:{perm:c}}),f=Bn(f.length,u)),Fr("sum",f,h.shape.length);const[d,p]=_r(h.shape,f),v=pa(h.dtype,"int32");let m=CC(n,d,v);const g=he(p),y=n.data.get(m.dataId).values,x=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const b=w*g;let C=0;for(let D=0;D<g;++D)C+=x[b+D];y[w]=C}if(o){const w=Zn(m.shape,l),b=m;m=on({inputs:{x:m},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(b)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(h),m}const HTe={kernelName:SD,backendName:"cpu",kernelFunc:A1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:u}=CF(i,a.length);DF(o.length,u,a);const{path:l,steps:c}=_F(s,u),f=c.length;let h=null,d=o.length;const p=[];for(let v=0;v<f;++v){for(const m of c[v]){const{permutationIndices:g,expandDims:y}=SF(d,u[m]);let x;TF(g)?x=a[m]:(x=Li({inputs:{x:a[m]},backend:n,attrs:{perm:g}}),p.push(x));const w=x.shape.slice();for(let b=0;b<y.length;++b)w.splice(y[b],0,1);zt(x.shape,w)||(x=on({inputs:{x},backend:n,attrs:{shape:w}}),p.push(x)),h===null?h=x:(h=JD({inputs:{a:x,b:h},backend:n}),p.push(h))}v<f-1&&(l[v]>=0&&(h=A1({inputs:{x:h},backend:n,attrs:{axis:l[v]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const v of p)v!==h&&n.disposeIntermediateTensorInfo(v);return h}const qTe={kernelName:jM,backendName:"cpu",kernelFunc:jTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Be([r,i],"eluGrad");const a=new Float32Array(he(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let u=0;u<o.length;++u){const l=o[u];l>=0?a[u]=s[u]:a[u]=s[u]*(l+1)}return n.makeTensorInfo(i.shape,"float32",a)}const KTe={kernelName:qM,backendName:"cpu",kernelFunc:XTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTe=vF,ZTe=gF,QTe=mF,JTe=yF,eEe=xF,tEe=wF,nEe=jt(Ny,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+YTe*n);return e*(1-((((tEe*r+eEe)*r+JTe)*r+QTe)*r+ZTe)*r*Math.exp(-n*n))}),rEe={kernelName:Ny,backendName:"cpu",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _C(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:a}=r,o=i.shape.length,s=i.shape.slice();let u=a;return a<0&&(z(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+a+1),s.splice(u,0,1),on({inputs:{x:i},backend:n,attrs:{shape:s}})}const iEe={kernelName:j2,backendName:"cpu",kernelFunc:_C};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEe=Wn((t,e)=>t/e),iP=hr(ky,aEe),QI={kernelName:ky,backendName:"cpu",kernelFunc:iP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(t,e,n){const r=t.shape,i=r[0],a=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[i,a],c=he(l),f=Kr("float32",c),h=Kr("float32",c);for(let m=0;m<i;m++){const g=Oh({inputs:{x:s},backend:n,attrs:{begin:[m,0],size:[1,a]}}),y=Oh({inputs:{x:u},backend:n,attrs:{begin:[m,0],size:[1,a]}}),x=ea({inputs:{real:g,imag:y},backend:n}),{real:w,imag:b}=oEe(x,e,n),C=Ju(w,b);for(let D=0;D<a;D++){const S=bF(C,D);f[m*a+D]=S.real,h[m*a+D]=S.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x)}const d=n.makeTensorInfo(l,"float32",f),p=n.makeTensorInfo(l,"float32",h),v=ea({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),v}function oEe(t,e,n){const r=he(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(sEe(r)){const s=JI(a,o,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",Pc(r,"float32")),h=lu({inputs:{x:f},backend:n}),d=QI.kernelFunc({inputs:{a:l,b:f},backend:n}),p=QI.kernelFunc({inputs:{a:c,b:h},backend:n}),v=n.data.get(d.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}else{const s=Ju(a,o),u=uEe(s,r,e);return rX(u)}}function sEe(t){return(t&t-1)===0}function JI(t,e,n,r,i){if(n===1)return{real:t,imag:e};const a=Ju(t,e),o=n/2,s=iX(a),u=s.real,l=s.imag,c=[u.length],f=i.makeTensorInfo(c,"float32",u),h=i.makeTensorInfo(c,"float32",l),d=ea({inputs:{real:f,imag:h},backend:i}),p=aX(a),v=p.real,m=p.imag,g=[v.length],y=i.makeTensorInfo(g,"float32",v),x=i.makeTensorInfo(g,"float32",m),w=ea({inputs:{real:y,imag:x},backend:i}),b=JI(u,l,o,r,i),C=b.real,D=b.imag,S=[C.length],_=i.makeTensorInfo(S,"float32",C),T=i.makeTensorInfo(S,"float32",D),E=ea({inputs:{real:_,imag:T},backend:i}),A=JI(v,m,o,r,i),N=A.real,R=A.imag,M=[N.length],$=i.makeTensorInfo(M,"float32",N),L=i.makeTensorInfo(M,"float32",R),O=ea({inputs:{real:$,imag:L},backend:i}),F=sX(n,r),V=[F.real.length],X=i.makeTensorInfo(V,"float32",F.real),P=i.makeTensorInfo(V,"float32",F.imag),U=ea({inputs:{real:X,imag:P},backend:i}),j=JD({inputs:{a:U,b:O},backend:i}),q=sv({inputs:{a:E,b:j},backend:i}),Y=nP({inputs:{a:E,b:j},backend:i}),ne=Mh({inputs:{input:q},backend:i}),ue=Mh({inputs:{input:Y},backend:i}),te=uv({inputs:{input:q},backend:i}),oe=uv({inputs:{input:Y},backend:i}),ce=lv({inputs:[ne,ue],backend:i,attrs:{axis:0}}),pe=lv({inputs:[te,oe],backend:i,attrs:{axis:0}}),me=i.data.get(ce.dataId).values,_e=i.data.get(pe.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(pe),{real:me,imag:_e}}function uEe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let a=0,o=0;for(let s=0;s<e;s++){const u=uX(i*s,e,n),l=bF(t,s);a+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(a/=e,o/=e),oX(r,a,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=he(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=on({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),u=WZ(s,!1,n),l=on({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}const cEe={kernelName:XM,backendName:"cpu",kernelFunc:lEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aP(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:a}=n,o=a||Fv(i),s=On(o,he(r));return hEe(s,i,o),e.makeTensorInfo(r,o,s)}const fEe={kernelName:KM,backendName:"cpu",kernelFunc:aP};function hEe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dEe={kernelName:YM,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=Kr(r.dtype,he(r.shape)),[o,s,u,l]=r.shape,c=i.data.get(r.dataId).values;for(let h=0;h<o;h++){const d=h*u*s*l;for(let p=0;p<s;p++){const v=p*(u*l);for(let m=0;m<u;m++){const g=m*l;for(let y=0;y<l;y++){const x=Math.round(u-m-1),w=d+v+g+y;let b=c[w];if(x>=0&&x<u){const C=x*l,D=d+v+C+y;b=c[D]}a[w]=b}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let v=BZ({inputs:{x:i,filter:a},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const m=v;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=on({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=sv({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=sv({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(d){const m=v;if(c==="NCHW"&&d==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const g=on({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=DC(n,v,d,g,p),n.disposeIntermediateTensorInfo(g)}else v=DC(n,v,d,s,p);n.disposeIntermediateTensorInfo(m)}return v}const vEe={kernelName:nC,backendName:"cpu",kernelFunc:pEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let v=VZ({inputs:{x:i,filter:a},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const m=v;v=sv({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(d){const m=v;v=DC(n,v,d,s,p),n.disposeIntermediateTensorInfo(m)}return v}const mEe={kernelName:Ij,backendName:"cpu",kernelFunc:gEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=he(r.shape),o=i.shape,s=o[o.length-1],[u,l,c,f]=iF(r,i);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const h=n.data.get(i.dataId).values,d=n.bufferSync(r),p=QY(h,d,r.dtype,l,s,c,f,r.shape,a);return n.makeTensorInfo(u,r.dtype,p.values)}const xEe={kernelName:hj,backendName:"cpu",kernelFunc:yEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r;Be([i,a],"gatherV2");const u=St(o,i.shape)[0],l=n.data.get(a.dataId).values,c=i.shape[u];for(let w=0;w<l.length;++w){const b=l[w];z(b<=c-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${c-1}]`)}let f=s;s==null&&(f=0);const h=he(a.shape),d=AF(i,a,u,f),p=on({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),v=on({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,h/d.batchSize]}}),m=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],g=n.bufferSync(v),y=n.bufferSync(p),x=JY(y,g,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(d.outputShape,x.dtype,x.values)}const bEe={kernelName:X2,backendName:"cpu",kernelFunc:wEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=he(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=on({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),u=WZ(s,!0,n),l=on({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}const SEe={kernelName:ZM,backendName:"cpu",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEe=jt(Ly,t=>Number.isFinite(t)?1:0,"bool"),_Ee={kernelName:Ly,backendName:"cpu",kernelFunc:DEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TEe=jt(zy,t=>Math.abs(t)===1/0?1:0,"bool"),EEe={kernelName:zy,backendName:"cpu",kernelFunc:TEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEe=jt(By,t=>Number.isNaN(t)?1:0,"bool"),kEe={kernelName:By,backendName:"cpu",kernelFunc:AEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=iZ(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const NEe={kernelName:dj,backendName:"cpu",kernelFunc:IEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const REe=jt(Wy,t=>Math.log1p(t)),$Ee={kernelName:Wy,backendName:"cpu",kernelFunc:REe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MEe=Wn((t,e)=>t&&e),OEe=hr(J2,MEe,null,"bool"),FEe={kernelName:J2,backendName:"cpu",kernelFunc:OEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PEe=jt(eD,t=>t?0:1,"bool"),LEe={kernelName:eD,backendName:"cpu",kernelFunc:PEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zEe=Wn((t,e)=>t||e),BEe=hr(tD,zEe,null,"bool"),VEe={kernelName:tD,backendName:"cpu",kernelFunc:BEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:u}=r;Be(i,"LRN");const l=i.shape[3],c=l-1,f=n.data.get(i.dataId).values,h=he(i.shape),d=new Float32Array(h);function p(v){const m=v%l;let g=v-m+Math.max(0,m-a);const y=v-m+Math.min(m+a,c);let x=0;for(;g<=y;g++){const w=f[g];x+=w*w}return x}for(let v=0;v<h;v++){const m=p(v),g=f[v]*Math.pow(o+s*m,-u);d[v]=g}return n.makeTensorInfo(i.shape,i.dtype,d)}const UEe={kernelName:nD,backendName:"cpu",kernelFunc:WEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:u,alpha:l,beta:c}=r;Be(o,"LRNGrad");const f=he(o.shape),h=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,m=new Float32Array(f),g=f;for(let y=0;y<g;y++){const x=y%h,w=y-x+Math.max(0,x-s),b=y-x+Math.min(h,x+s+1);let C=0;for(let D=w;D<b;D++)C+=Math.pow(p[D],2);C=l*C+u;for(let D=w;D<b;D++){let S=-2*l*c*p[D]*v[y]/C;y===D&&(S+=Math.pow(C,-c)),S*=d[y],m[D]+=S}}return n.makeTensorInfo(o.shape,i.dtype,m)}const HEe={kernelName:JM,backendName:"cpu",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=n;let u=i.shape;const l=u.length,c=St(a,u);let f=c;const h=Dn(f,l);let d=s.data.get(i.dataId).values;if(h!=null){const w=new Array(l);for(let b=0;b<w.length;b++)w[b]=u[h[b]];d=eP(d,u,i.dtype,h,w),f=Bn(f.length,l),u=w}Be(i,"max"),Fr("max",f,l);const[p,v]=_r(u,f),m=he(v),g=oZ(d,m,p,i.dtype),y=s.write(g,p,i.dtype);let x=p;return o&&(x=Zn(p,c)),{dataId:y,shape:x,dtype:i.dtype}}const jEe={kernelName:rD,backendName:"cpu",kernelFunc:UZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Be(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;z(Qr(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Oo(i.shape,a,o,l,s,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&zt(c.inShape,c.outShape))f=lu({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=He(i.shape),p=rP(h,i.shape,i.dtype,d,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const XEe={kernelName:iD,backendName:"cpu",kernelFunc:qEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r;Be(i,"maxPool3d");const c=ol(i.shape,a,o,1,s,u,l),f=n.data.get(i.dataId).values,h=zZ(f,i.shape,i.dtype,He(i.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const YEe={kernelName:aD,backendName:"cpu",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r;Be([i,a],"maxPool3DGrad");const c=ol(a.shape,o,s,1,u,l),f=n.bufferSync(a),h=z_e(f,c),d=c.strideDepth,p=c.strideHeight,v=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,b=c.effectiveFilterWidth,C=x-1-c.padInfo.front,D=b-1-c.padInfo.left,S=w-1-c.padInfo.top,_=Ct(a.shape,"float32"),T=n.bufferSync(i);for(let E=0;E<c.batchSize;++E)for(let A=0;A<c.inChannels;++A)for(let N=0;N<c.inDepth;++N)for(let R=0;R<c.inHeight;++R)for(let M=0;M<c.inWidth;++M){const $=N-C,L=R-S,O=M-D;let F=0;for(let V=0;V<x;V+=m){const X=($+V)/d;if(!(X<0||X>=c.outDepth||Math.floor(X)!==X))for(let P=0;P<w;P+=g){const U=(L+P)/p;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(let j=0;j<b;j+=y){const q=(O+j)/v;if(q<0||q>=c.outWidth||Math.floor(q)!==q)continue;const Y=x*w*b-1-h.get(E,X,U,q,A),ne=V*w*b+P*b+j,ue=Y===ne?1:0;if(ue===0)continue;const te=T.get(E,X,U,q,A);F+=te*ue}}}_.set(F,E,N,R,M,A)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const QEe={kernelName:tO,backendName:"cpu",kernelFunc:ZEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;Be([a,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,h=Oo(s.shape,u,l,1,c,f),d=n.data.get(s.dataId).values,p=Ct(h.outShape,s.dtype,LZ(d,s.shape,s.dtype,h).values),v=h.strideHeight,m=h.strideWidth,g=h.dilationHeight,y=h.dilationWidth,x=h.effectiveFilterHeight,w=h.effectiveFilterWidth,b=w-1-h.padInfo.left,C=x-1-h.padInfo.top,D=Ct(s.shape,"float32"),S=n.data.get(i.dataId).values,_=Ct(i.shape,"float32",S);for(let T=0;T<h.batchSize;++T)for(let E=0;E<h.inChannels;++E)for(let A=0;A<h.inHeight;++A)for(let N=0;N<h.inWidth;++N){const R=A-C,M=N-b;let $=0;for(let L=0;L<x;L+=g){const O=(R+L)/v;if(!(O<0||O>=h.outHeight||Math.floor(O)!==O))for(let F=0;F<w;F+=y){const V=(M+F)/m;if(V<0||V>=h.outWidth||Math.floor(V)!==V)continue;const X=x*w-1-p.get(T,O,V,E),P=L*w+F,U=X===P?1:0;if(U===0)continue;const j=_.get(T,O,V,E);$+=j*U}}D.set($,T,A,N,E)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const eAe={kernelName:eO,backendName:"cpu",kernelFunc:JEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(t,e,n,r,i){const a=He(e),o=rP(t,e,n,a,i,"max"),s=LZ(t,e,n,i,!0,r);return[o.values,s.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe={kernelName:pj,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,u=n;Be(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=Oo(r.shape,i,a,[1,1],o),[f,h]=tAe(l,r.shape,r.dtype,s,c),d=u.write(f,c.outShape,r.dtype),p=u.write(h,c.outShape,r.dtype);return[{dataId:d,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=St(a,i.shape),l=_r(i.shape,s)[1],c=he(l),f=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(h);const d=Dc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(d);const p=iP({inputs:{a:d,b:h},backend:n});f.push(p);const v=A1({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:o}});return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),v}const iAe={kernelName:oD,backendName:"cpu",kernelFunc:rAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"min");const s=St(a,i.shape);let u=s;const l=Dn(u,i.shape.length);let c=i;l!=null&&(c=Li({inputs:{x:i},backend:n,attrs:{perm:l}}),u=Bn(u.length,i.shape.length)),Fr("min",u,c.shape.length);const[f,h]=_r(c.shape,u),d=he(h),p=Yr(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];(Number.isNaN(b)||b<x)&&(x=b)}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=Zn(f,s),y=on({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const oAe={kernelName:sD,backendName:"cpu",kernelFunc:aAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,mode:o}=r;Be(i,"mirrorPad");const s=a.map((x,w)=>x[0]+i.shape[w]+x[1]),u=a.map(x=>x[0]),l=a.map((x,w)=>x[0]+i.shape[w]),c=o==="reflect"?0:1,f=n.data.get(i.dataId).values,h=i.shape.length,d=He(i.shape),p=he(s),v=s.length,m=He(s),g=Kr(i.dtype,p);for(let x=0;x<p;x++){let w=Pv(x,v,m);for(let C=0;C<v;C++)w[C]<u[C]?w[C]=u[C]*2-w[C]-c:w[C]>=l[C]&&(w[C]=(l[C]-1)*2-w[C]+c);w=w.map((C,D)=>C-u[D]);const b=Qs(w,h,d);g[x]=f[b]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}const uAe={kernelName:uD,backendName:"cpu",kernelFunc:sAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe=Wn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),cAe=hr(Hy,lAe),fAe={kernelName:Hy,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=i.shape.length;let s=a;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const u=St([s],i.shape),l=UZ({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=Zn(l.shape,u),f=on({inputs:{x:l},backend:n,attrs:{shape:c}}),h=nP({inputs:{a:i,b:f},backend:n}),d=XY({inputs:{x:h},backend:n}),p=A1({inputs:{x:d},backend:n,attrs:{axis:u,keepDims:!1}}),v=on({inputs:{x:p},backend:n,attrs:{shape:c}}),m=iP({inputs:{a:d,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const hAe={kernelName:TD,backendName:"cpu",kernelFunc:GZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r;Be(i,"multinomial");const u=s?i:GZ({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,h=[l,a],d=Yr(he(h),"int32");for(let p=0;p<l;++p){const v=p*c,m=new Float32Array(c-1);m[0]=f[v];for(let x=1;x<m.length;++x)m[x]=m[x-1]+f[v+x];const g=UO.alea(o.toString()),y=p*a;for(let x=0;x<a;++x){const w=g();d[y+x]=m.length;for(let b=0;b<m.length;b++)if(w<m[b]){d[y+x]=b;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",d)}const pAe={kernelName:vj,backendName:"cpu",kernelFunc:dAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe=QO;function gAe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=r;Be(i,"NonMaxSuppression");const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,{selectedIndices:f}=vAe(l,c,o,s,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const mAe={kernelName:nO,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe=JO;function xAe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r;Be(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:d}=yAe(c,f,o,s,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const wAe={kernelName:rO,backendName:"cpu",kernelFunc:xAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe=eF;function CAe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r;Be(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,h=o,d=s,p=u,v=l,{selectedIndices:m,selectedScores:g}=bAe(c,f,h,d,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const SAe={kernelName:iO,backendName:"cpu",kernelFunc:CAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:u}=r;Be(i,"oneHot");const l=he(i.shape),c=new Float32Array(l*o);c.fill(u);const f=n.data.get(i.dataId).values;for(let h=0;h<l;++h)f[h]>=0&&f[h]<o&&(c[h*o+f[h]]=s);return n.makeTensorInfo([...i.shape,o],a,c)}const _Ae={kernelName:hD,backendName:"cpu",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TC(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Mh({inputs:{input:r},backend:n}),a=TC({inputs:{x:i},backend:n}),o=uv({inputs:{input:r},backend:n}),s=TC({inputs:{x:o},backend:n}),u=ea({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return aP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const TAe={kernelName:kD,backendName:"cpu",kernelFunc:TC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Mh({inputs:{input:r},backend:n}),a=HZ({inputs:{x:i},backend:n}),o=uv({inputs:{input:r},backend:n}),s=TC({inputs:{x:o},backend:n}),u=ea({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return aP({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const EAe={kernelName:fD,backendName:"cpu",kernelFunc:HZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return _C({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(c=>{_M(a,c.shape,"All tensors passed to stack must have matching shapes"),z(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],u=e.map(c=>{const f=_C({inputs:{input:c},backend:n,attrs:{dim:i}});return s.push(f),f}),l=lv({inputs:u,backend:n,attrs:{axis:i}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const AAe={kernelName:dD,backendName:"cpu",kernelFunc:jZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;Be(i,"pad");const s=a.map((y,x)=>y[0]+i.shape[x]+y[1]),u=a.map(y=>y[0]),l=n.data.get(i.dataId).values,c=he(i.shape),f=i.shape.length,h=He(i.shape),d=he(s),p=s.length,v=He(s),m=Kr(i.dtype,d);o!==0&&m.fill(o);for(let y=0;y<c;y++){const w=Pv(y,f,h).map((C,D)=>C+u[D]),b=Qs(w,p,v);m[b]=l[y]}return{dataId:n.write(m,s,i.dtype),shape:s,dtype:i.dtype}}const qZ={kernelName:pD,backendName:"cpu",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe=Wn((t,e)=>Math.pow(t,e)),NAe=hr(qy,IAe),RAe={kernelName:qy,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,s=i.map(m=>n.data.get(m.dataId).values),u=i.map(m=>m.shape),l=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,[f,h,d]=hZ(s,u,l,a.shape,a.dtype,c,o.shape),p=f.map(m=>n.makeTensorInfo([m.length],"int32",m)),v=n.makeTensorInfo(d,a.dtype,h);return p.concat([v])}const MAe={kernelName:gj,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[l,c]=dZ(o,r.shape,r.dtype,s,i.shape,u,a.shape),f=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const FAe={kernelName:mj,backendName:"cpu",kernelFunc:OAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:u}=r,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,h=s.map(m=>n.data.get(m.dataId).values),d=s.map(m=>m.shape),[p,v]=pZ(l,i.shape,c,a.shape,a.dtype,f,o.shape,h,d,u);return n.makeTensorInfo(p,a.dtype,v)}const LAe={kernelName:yj,backendName:"cpu",kernelFunc:PAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:a,step:o}=n,s=vZ(r,i,o,a);return e.makeTensorInfo([s.length],a,s)}const BAe={kernelName:aO,backendName:"cpu",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe=jt(Xy,t=>1/t),WAe={kernelName:Xy,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Be(i,"resizeBilinear");const u=He(i.shape),[l,c]=s,[f,h,d,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(he([f,l,c,p])),g=[a&&l>1?h-1:h,a&&c>1?d-1:d],y=[a&&l>1?l-1:l,a&&c>1?c-1:c];let x=0;const w=g[0]/y[0],b=g[1]/y[1];for(let C=0;C<f;C++)for(let D=0;D<l;D++){let S;o?S=w*(D+.5)-.5:S=w*D;const _=Math.max(0,Math.floor(S)),T=S-_,E=Math.min(h-1,Math.ceil(S)),A=C*u[0]+_*u[1],N=C*u[0]+E*u[1];for(let R=0;R<c;R++){let M;o?M=b*(R+.5)-.5:M=b*R;const $=Math.max(0,Math.floor(M)),L=M-$,O=Math.min(d-1,Math.ceil(M)),F=A+$*u[2],V=N+$*u[2],X=A+O*u[2],P=N+O*u[2];for(let U=0;U<p;U++){const j=v[F+U],q=v[V+U],Y=v[X+U],ne=v[P+U],ue=j+(Y-j)*L,te=q+(ne-q)*L,oe=ue+(te-ue)*T;m[x++]=oe}}}return n.makeTensorInfo([f,l,c,p],"float32",m)}const GAe={kernelName:xD,backendName:"cpu",kernelFunc:UAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Be([a,i],"resizeBilinearGrad");const s=He(i.shape),[u,l,c,f]=i.shape,[,h,d]=a.shape,p=new Float32Array(u*l*c*f),v=[o&&h>1?l-1:l,o&&d>1?c-1:c],m=[o&&h>1?h-1:h,o&&d>1?d-1:d],g=v[0]/m[0],y=v[1]/m[1],x=n.data.get(a.dataId).values;let w=0;for(let b=0;b<u;b++){const C=b*s[0];for(let D=0;D<h;D++){const S=D*g,_=Math.floor(S),T=Math.min(Math.ceil(S),l-1),E=C+_*s[1],A=C+T*s[1],N=S-_,R=1-N;for(let M=0;M<d;M++){const $=M*y,L=Math.floor($),O=Math.min(Math.ceil($),c-1),F=$-L,V=1-F,X=E+L*s[2],P=E+O*s[2],U=A+L*s[2],j=A+O*s[2],q=R*V,Y=R*F,ne=N*V,ue=N*F;for(let te=0;te<f;te++){const oe=x[w++];p[X+te]+=oe*q,p[P+te]+=oe*Y,p[U+te]+=oe*ne,p[j+te]+=oe*ue}}}}return n.makeTensorInfo([u,c,l,f],"float32",p)}const jAe={kernelName:uO,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Be(i,"resizeNearestNeighbor");const u=He(i.shape),[l,c]=s,[f,h,d,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(f*l*c*p),g=[a&&l>1?h-1:h,a&&c>1?d-1:d],y=[a&&l>1?l-1:l,a&&c>1?c-1:c],x=g[0]/y[0],w=g[1]/y[1];let b=0;for(let C=0;C<f;C++){const D=C*u[0];for(let S=0;S<l;S++){const _=o?x*(S+.5):x*S;let T=Math.min(h-1,a?Math.round(_):Math.floor(_));o&&(T=Math.max(0,T));const E=D+T*u[1];for(let A=0;A<c;A++){const N=o?w*(A+.5):w*A;let R=Math.min(d-1,a?Math.round(N):Math.floor(N));o&&(R=Math.max(0,R));const M=E+R*u[2];for(let $=0;$<p;$++){const L=v[M+$];m[b++]=L}}}}return n.makeTensorInfo([f,l,c,p],i.dtype,m)}const XAe={kernelName:yD,backendName:"cpu",kernelFunc:qAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Be([a,i],"resizeNearestNeighborGrad");const s=He(i.shape),u=He(a.shape),[l,c,f,h]=i.shape,[,d,p]=a.shape,v=new Float32Array(l*c*f*h),m=n.data.get(a.dataId).values,g=[o&&d>1?c-1:c,o&&p>1?f-1:f],y=[o&&d>1?d-1:d,o&&p>1?p-1:p],x=g[0]/y[0],w=g[1]/y[1],b=1/x,C=1/w,D=Math.ceil(b)*2+2,S=Math.ceil(C)*2+2;for(let _=0;_<l;_++){const T=_*s[0];for(let E=0;E<c;E++){const A=T+E*s[1],N=Math.floor(E*b),R=Math.floor(N-D/2);for(let M=0;M<f;M++){const $=A+M*s[2],L=Math.floor(M*C),O=Math.floor(L-S/2);for(let F=0;F<h;F++){let V=0;for(let X=0;X<D;X++){const P=X+R;if(P<0||P>=d)continue;const U=T+P*u[1],j=P*x,q=Math.min(c-1,o?Math.round(j):Math.floor(j));if(E===q)for(let Y=0;Y<S;Y++){const ne=Y+O;if(ne<0||ne>=p)continue;const ue=U+ne*u[2],te=ne*w,oe=Math.min(f-1,o?Math.round(te):Math.floor(te));M===oe&&(V+=m[ue+F])}}v[$+F]=V}}}}return n.makeTensorInfo(i.shape,i.dtype,v)}const YAe={kernelName:sO,backendName:"cpu",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r;Be(i,"reverse");const o=i.shape.length,s=St(a,i.shape);if(o===0)return lu({inputs:{x:i},backend:n});const u=new Rr(i.shape,i.dtype),l=n.bufferSync(i);for(let c=0;c<u.size;c++){const f=u.indexToLoc(c),h=f.slice();s.forEach(d=>h[d]=i.shape[d]-1-h[d]),u.set(l.get(...h),...f)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const QAe={kernelName:wD,backendName:"cpu",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe={kernelName:vO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,u=Kr(r.dtype,he(r.shape)),[l,c,f,h]=r.shape,[d,p]=hF(o,c,f),v=255,m=Math.sin(i),g=Math.cos(i),y=s.data.get(r.dataId).values;for(let w=0;w<l;w++){const b=w*f*c*h;for(let C=0;C<c;C++){const D=C*(f*h);for(let S=0;S<f;S++){const _=S*h;for(let T=0;T<h;T++){const E=[l,C,S,T],A=E[2],N=E[1];let R=(A-d)*g-(N-p)*m,M=(A-d)*m+(N-p)*g;R=Math.round(R+d),M=Math.round(M+p);let $=a;if(typeof a!="number"&&(T===3?$=v:$=a[T]),R>=0&&R<f&&M>=0&&M<c){const O=M*(f*h),F=R*h,V=b+O+F+T;$=y[V]}const L=b+D+_+T;u[L]=$}}}}return{dataId:s.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke=jt(Zy,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),tke={kernelName:Zy,backendName:"cpu",kernelFunc:eke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=td(a,i,o),h=!0,d=n.bufferSync(i),p=n.bufferSync(a),v=Gf(d,p,o,f,l,u,s,c,0,h);return n.makeTensorInfo(o,v.dtype,v.values)}const rke={kernelName:xj,backendName:"cpu",kernelFunc:nke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function ake(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function oke(t,e,n,r,i,a){const o=On("int32",n*i);for(let s=0;s<n;++s){const u=t.slice(s*r,(s+1)*r),l=s*i;for(let c=0;c<i;++c)o[l+c]=a==="left"?ike(u,e[c+l]):ake(u,e[c+l])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,l=oke(s,u,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",l)}const uke={kernelName:bj,backendName:"cpu",kernelFunc:ske};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e;Be([r,i,a],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=pa(i.dtype,a.dtype),f=Yr(he(i.shape),c);let h=0;const d=o===0||o>1||i.shape.length===1?1:he(i.shape.slice(1));for(let p=0;p<s.length;p++)for(let v=0;v<d;v++)s[p]===1?f[h++]=u[p]:f[h++]=l[p];return n.makeTensorInfo(i.shape,c,f)}const cke={kernelName:bD,backendName:"cpu",kernelFunc:lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fke=BD,hke=VD,dke=jt(Jy,t=>t>=0?hke*t:fke*(Math.exp(t)-1)),pke={kernelName:Jy,backendName:"cpu",kernelFunc:dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke=jt(n1,t=>t<0?-1:t>0?1:0),gke={kernelName:n1,backendName:"cpu",kernelFunc:vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mke=jt(e1,t=>Math.sin(t)),yke={kernelName:e1,backendName:"cpu",kernelFunc:mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke=jt(t1,t=>Math.sinh(t)),wke={kernelName:t1,backendName:"cpu",kernelFunc:xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke=11920928955078125e-23,aB=Math.log(bke)+2,Cke=jt(i1,t=>{const e=t>-aB,n=t<aB,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),Ske={kernelName:i1,backendName:"cpu",kernelFunc:Cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;Be([i],"spaceToBatchND");const s=he(a),u=[[0,0]];u.push(...o);for(let C=1+a.length;C<i.shape.length;++C)u.push([0,0]);const l=qZ.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),c=m1(l.shape,a,s,!1),f=y1(c.length,a.length,!1),h=x1(l.shape,a,s,!1),v=on({inputs:{x:l},backend:n,attrs:{shape:c}}),y=Li({inputs:{x:v},backend:n,attrs:{perm:f}}),b=on({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}const _ke={kernelName:DD,backendName:"cpu",kernelFunc:Dke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values[0],[f,h,d,p,v]=xZ(s,r.shape,r.dtype,u,i.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const Eke={kernelName:Cj,backendName:"cpu",kernelFunc:Tke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(a.dataId).values),[l,c,f]=wZ(s,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const kke={kernelName:Sj,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[l,c]=tP(o,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const Nke={kernelName:Dj,backendName:"cpu",kernelFunc:Ike};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,[l,c]=tP(o,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}const $ke={kernelName:_j,backendName:"cpu",kernelFunc:Rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=td(a,i,s),d=!1,p=n.bufferSync(i);let v;switch(a.dtype){case"bool":{const m=n.bufferSync(a),g=!!n.data.get(o.dataId).values[0];v=Gf(p,m,s,h,c,l,u,f,g,d);break}case"float32":{const m=n.bufferSync(a),g=n.data.get(o.dataId).values[0];v=Gf(p,m,s,h,c,l,u,f,g,d);break}case"int32":{const m=n.bufferSync(a),g=n.data.get(o.dataId).values[0];v=Gf(p,m,s,h,c,l,u,f,g,d);break}case"string":{const m=n.bufferSync(a),g=yc(n.data.get(o.dataId).values[0]);v=Gf(p,m,s,h,c,l,u,f,g,d);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,v.dtype,v.values)}const Oke={kernelName:Tj,backendName:"cpu",kernelFunc:Mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=St(o,i.shape)[0],u=EF(i,a,s),l=new Array(i.shape.length).fill(0),c=i.shape.slice();return u.map(f=>{const h=[...c];h[s]=f;const d=Oh({inputs:{x:i},backend:n,attrs:{begin:l,size:h}});return l[s]+=f,d})}const Pke={kernelName:_D,backendName:"cpu",kernelFunc:Fke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke={kernelName:lO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Be(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const u=i[s];a[s]=u*u}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke=jt(f1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Bke={kernelName:f1,backendName:"cpu",kernelFunc:zke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r;Be(i,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:w}=lF(i.shape,a,o,s,u,l,c,f,h);let b;if(v)b=on({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){z(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=oF(y,x,w),D=Oh({inputs:{x:i},backend:n,attrs:{begin:y,size:C}});b=on({inputs:{x:D},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(D)}else{const C=n.bufferSync(i),D=SZ(d,C,w,y);b=n.makeTensorInfo(p,D.dtype,D.values)}return b}const Wke={kernelName:fO,backendName:"cpu",kernelFunc:Vke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,h=n.data.get(c.dataId).values,d=n.data.get(f.dataId).values,[p,v]=DZ(h,d,i,a,o,s,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",v)]}const Gke={kernelName:Ej,backendName:"cpu",kernelFunc:Uke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values[0],[l,c,f]=_Z(s,u,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const jke={kernelName:Aj,backendName:"cpu",kernelFunc:Hke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(a.dataId).values,s=TZ(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const Xke={kernelName:kj,backendName:"cpu",kernelFunc:qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke=jt(u1,t=>Math.tan(t)),Yke={kernelName:u1,backendName:"cpu",kernelFunc:Kke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke=jt(l1,t=>Math.tanh(t)),Qke={kernelName:l1,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:a}=e,{sliceRank:o,numUpdates:s,sliceSize:u,strides:l,outputSize:c}=td(a,i,r.shape),f=!1,h=n.bufferSync(i),d=n.bufferSync(a),p=n.bufferSync(r),v=Gf(h,d,r.shape,c,u,s,o,l,p,f);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const eIe={kernelName:wj,backendName:"cpu",kernelFunc:Jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;Be(i,"tile");const o=AZ(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const nIe={kernelName:c1,backendName:"cpu",kernelFunc:tIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r;Be(i,"topk");const s=n.data.get(i.dataId).values,[u,l]=IZ(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const iIe={kernelName:hO,backendName:"cpu",kernelFunc:rIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:u,outputShape:l}=n,[c,f,h,d]=i.shape,[p,v]=l??[f,h],m=[c,p,v,d],g=He(i.shape),y=g[0],x=g[1],w=g[2],b=He(m),C=b[0],D=b[1],S=b[2],_=Kr(i.dtype,he(m));_.fill(u);const T=r.data.get(i.dataId).values,E=r.data.get(a.dataId).values;for(let N=0;N<c;++N){const R=a.shape[0]===1?E:E.subarray(N*8,N*8+8);for(let M=0;M<p;++M)for(let $=0;$<v;++$)for(let L=0;L<d;++L){let O;const F=R[6]*$+R[7]*M+1;if(F===0)continue;const V=(R[0]*$+R[1]*M+R[2])/F,X=(R[3]*$+R[4]*M+R[5])/F,P=oB(V,h,s),U=oB(X,f,s);switch(o){case"nearest":O=fIe(T,f,h,y,x,w,N,U,P,L,u);break;case"bilinear":O=hIe(T,f,h,y,x,w,N,U,P,L,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const j=N*C+M*D+$*S+L;_[j]=O}return r.makeTensorInfo(m,i.dtype,_)}return{dataId:r.write(_,m,i.dtype),shape:i.shape,dtype:i.dtype}}const oIe={kernelName:dO,backendName:"cpu",kernelFunc:aIe};function oB(t,e,n){switch(n){case"reflect":return sIe(t,e);case"wrap":return uIe(t,e);case"nearest":return cIe(t,e);case"constant":default:return lIe(t)}}function sIe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Sh(0,n,e-1)}function uIe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Sh(0,n,e-1)}function lIe(t,e){return t}function cIe(t,e){return Sh(0,t,e-1)}function im(t,e,n,r,i,a,o,s,u,l,c){const f=o*r+s*i+u*a+l;return 0<=s&&s<e&&0<=u&&u<n?t[f]:c}function fIe(t,e,n,r,i,a,o,s,u,l,c){const f=Math.round(s),h=Math.round(u);return im(t,e,n,r,i,a,o,f,h,l,c)}function hIe(t,e,n,r,i,a,o,s,u,l,c){const f=Math.floor(s),h=Math.floor(u),d=f+1,p=h+1,v=(p-u)*im(t,e,n,r,i,a,o,f,h,l,c)+(u-h)*im(t,e,n,r,i,a,o,f,p,l,c),m=(p-u)*im(t,e,n,r,i,a,o,d,h,l,c)+(u-h)*im(t,e,n,r,i,a,o,d,p,l,c);return(d-s)*v+(s-f)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Be(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:u,indices:l}=NZ(o,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}const pIe={kernelName:pO,backendName:"cpu",kernelFunc:dIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i.shape.length,s=i.shape[a],u=new Array(o-1);let l=0;for(let d=0;d<o;d++)d!==a&&(u[l++]=i.shape[d]);const c=new Array(o).fill(0),f=i.shape.slice();f[a]=1;const h=new Array(s);for(let d=0;d<h.length;d++){c[a]=d;const p=Oh({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});h[d]=on({inputs:{x:p},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(p)}return h}const gIe={kernelName:ED,backendName:"cpu",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r;Be(i,"unsortedSegmentSum");const s=i.shape.length,u=a.shape.length,l=[],c=[],f=s-u;let h=a;for(let p=0;p<f;++p){const v=_C({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=v,c.push(v)}for(let p=0;p<o;++p){const v=Pc(p,"int32"),m=n.makeTensorInfo([],"int32",v),g=jY({inputs:{a:m,b:h},backend:n}),y=Dc({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=JD({inputs:{a:y,b:i},backend:n}),w=A1({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});l.push(w),c.push(m),c.push(g),c.push(y),c.push(x),c.push(w)}const d=jZ({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const yIe={kernelName:AD,backendName:"cpu",kernelFunc:mIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe=[d_e,q2e,v_e,m_e,J2e,x_e,b_e,S_e,__e,E_e,k_e,N_e,$_e,F_e,L_e,V_e,U_e,H_e,q_e,f_e,K_e,Z_e,J_e,tDe,tTe,Z2e,rDe,rTe,X2e,aTe,sTe,uTe,cTe,hTe,pTe,gTe,yTe,wTe,CTe,DTe,TTe,ATe,ITe,RTe,$Te,OTe,PTe,zTe,BTe,VTe,WTe,GTe,qTe,i_e,KTe,iDe,rEe,aDe,iEe,sDe,cEe,fEe,dEe,lDe,fDe,vEe,mEe,xEe,bEe,dDe,vDe,K2e,SEe,oTe,_Ee,EEe,kEe,a_e,mDe,xDe,NEe,bDe,$Ee,FEe,LEe,VEe,UEe,HEe,jEe,SDe,XEe,YEe,QEe,eAe,nAe,iAe,oAe,_De,uAe,fAe,pAe,EDe,kDe,mAe,wAe,SAe,NDe,_Ae,EAe,AAe,qZ,RAe,s_e,MDe,MAe,FAe,LAe,BAe,Y2e,QI,WAe,u_e,l_e,c_e,GAe,jAe,XAe,YAe,QAe,JAe,tke,WDe,rke,uke,cke,pke,GDe,gke,yke,wke,HDe,hAe,Ske,_ke,Eke,kke,Nke,$ke,Oke,Pke,XDe,Lke,YDe,QDe,Bke,Wke,Gke,jke,Xke,n_e,HTe,Yke,Qke,eIe,nIe,iIe,oIe,RDe,pIe,gIe,yIe,TAe];for(const t of xIe)Nj(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mf={},Mx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function wIe(t,e){Mf[t]=e}function xs(t,e){if(!(t in Mf)||e!=null){const r=CIe(t,e);if(r!==null)Mf[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Mf[t];return n==null||n.isContextLost()?(delete Mf[t],xs(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Mf[t])}function bIe(t){if(!le().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function CIe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??bIe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Mf[t]},!1),le().getBool("SOFTWARE_WEBGL_ENABLED")&&(Mx.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Mx)||n.getContext("experimental-webgl",Mx):n.getContext("webgl2",Mx)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var D0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(D0||(D0={}));var Aa;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Aa||(Aa={}));var kr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(kr||(kr={}));function k1(t,e){return[e,t]}function SIe(t,e){return t*e}function Ox(t){const e=he(t),n=Math.ceil(e/4);return wI(n)}function Gv(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function DIe(t,e){const[n,r]=Gv(t,e);return n*r*4}function oP(t,e){const n=t;let r,i,a,o,s,u,l,c,f,h;return le().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,l=4,c=1,f=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=t.RGBA,i=t.RGBA,a=t.RGBA,o=n.RGBA,s=t.RGBA,l=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oe(t,e){const n=e();return le().getBool("DEBUG")&&_Ie(t),n}function _Ie(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+kIe(t,e))}const TIe=596e-10,EIe=65504;function AIe(t){return!!(le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||TIe<Math.abs(t)&&Math.abs(t)<EIe)}function kIe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Fx(t,e){return ul(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function IIe(t,e){const n=ul(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Oe(t,()=>t.shaderSource(n,e)),Oe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function NIe(t,e){const n=ul(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Oe(t,()=>t.shaderSource(n,e)),Oe(t,()=>t.compileShader(n)),le().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw XZ(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const RIe=/ERROR: [0-9]+:([0-9]+):/g;function XZ(t,e){const n=RIe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),a=i.length.toString().length+2,o=i.map((f,h)=>Ep((h+1).toString(),a)+f);let s=0;for(let f=0;f<o.length;f++)s=Math.max(o[f].length,s);const u=o.slice(0,r-1),l=o.slice(r-1,r),c=o.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Ep(l[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function $Ie(t){return ul(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function MIe(t,e){if(Oe(t,()=>t.linkProgram(e)),!le().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function fE(t,e){if(Oe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function OIe(t,e){const n=ul(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Oe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function FIe(t,e){const n=ul(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Oe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Oe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function PIe(t){return ul(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function LIe(t,e){const n=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function zIe(t){return ul(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function sB(t,e,n,r,i,a,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Oe(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)),Oe(t,()=>t.enableVertexAttribArray(s)),!0)}function BIe(t,e,n){HIe(t,n),Oe(t,()=>t.activeTexture(t.TEXTURE0+n)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function VIe(t,e,n){return ul(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function WIe(t,e,n){return t.getUniformLocation(e,n)}function UIe(t,e,n,r){Oe(t,()=>BIe(t,e,r)),Oe(t,()=>t.uniform1i(n,r))}function hE(t,e,n){Oe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Oe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function uB(t,e){Oe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Oe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Px(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+GIe(t,e))}function GIe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ul(t,e,n){const r=Oe(t,()=>e());if(r==null)throw new Error(n);return r}function HIe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function cv(t,e=2){return he(t.slice(0,t.length-e))}function fv(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Lx(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[cv(t),...fv(t)]),e}function jIe(t,e=!1){let n=le().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=le().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&le().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,u)=>u>=t.length-2?DM(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Fc(t).newShape);let i=he(t),a=null;t.length<=1&&i<=n?a=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const s=cv(t);let u=2,l=2;t.length&&([u,l]=fv(t)),i=s*(u/2)*(l/2),a=wI(i).map(c=>c*2)}else a=wI(i);return a}function zx(t){return t%2===0}function EC(t,e){if(t=t.slice(-2),e=e.slice(-2),zt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||zx(n)&&zx(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&zx(t[0])&&zx(e[0])}let dE,pE;function qIe(t){if(dE==null){const e=xs(t);dE=e.getParameter(e.MAX_TEXTURE_SIZE)}return dE}function XIe(t){if(pE==null){const e=xs(t);pE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,pE)}function KIe(t){if(t===0)return 0;let e;const n=xs(t);return yo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:yo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function yo(t,e){return t.getExtension(e)!=null}function lB(t){try{if(xs(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function YIe(t){if(t===0)return!1;const e=xs(t);if(t===1){if(!yo(e,"OES_texture_float"))return!1}else if(!yo(e,"EXT_color_buffer_float"))return!1;return eN(e)}function ZIe(t){if(t===0)return!1;const e=xs(t);if(t===1){if(!yo(e,"OES_texture_float")||!yo(e,"WEBGL_color_buffer_float"))return!1}else{if(yo(e,"EXT_color_buffer_float"))return eN(e);const r="EXT_color_buffer_half_float";if(yo(e,r)){const i=e.getExtension(r);return QIe(e,i)}return!1}return eN(e)}function eN(t){const e=oP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),o}function QIe(t,e){const n=oP(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,a=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function JIe(t){return t!==2?!1:xs(t).fenceSync!=null}function I1(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&z(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const We=le();We.registerFlag("HAS_WEBGL",()=>We.getNumber("WEBGL_VERSION")>0);We.registerFlag("WEBGL_VERSION",()=>lB(2)?2:lB(1)?1:0);We.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);We.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>We.get("WEBGL_VERSION")===2);We.registerFlag("WEBGL_CPU_FORWARD",()=>!0);We.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);We.registerFlag("WEBGL_PACK",()=>We.getBool("HAS_WEBGL"));We.registerFlag("WEBGL_PACK_NORMALIZATION",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_CLIP",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_REDUCE",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_LAZILY_UNPACK",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_CONV_IM2COL",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>qIe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>XIe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=We.getNumber("WEBGL_VERSION");return t===0?0:KIe(t)});We.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>We.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Xj());We.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>YIe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>We.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:We.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));We.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>ZIe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_FENCE_API_ENABLED",()=>JIe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>We.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);We.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});We.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Xj()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});We.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);We.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);We.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);We.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);We.registerFlag("WEBGL_EXP_CONV",()=>!1);We.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>We.getBool("IS_TEST"));We.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);We.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);We.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);We.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ci(){let t,e,n,r,i,a,o,s,u,l;return le().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=le().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function id(t,e,n="index"){const r=He(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${i}`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i}`:`index -= ${t[a]} * ${i}`;return`${o}; ${s};`}).join("")}function e_(t,e,n="index"){const r=He(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${o}; ${s};`}).join("")}function eNe(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function tNe(t,e,n="index"){const r=t.map((a,o)=>o),i=eNe(r,e);return i.map((a,o)=>{const s=`int ${t[o]} = ${n} / ${i[o]}`,u=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${s}; ${u};`}).join("")}function sP(t){const e=He(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function uP(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const KZ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:YZ}=Hwe;function nNe(t,e,n){const r=[];if(t.forEach(d=>{const p=he(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),n.enableShapeUniforms){const{uniformShape:v}=lP(n.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const i=r.join(`
`),a=t.map(d=>rNe(d,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Ci(),u=oNe(s);let l,c,f=lNe(s);return e.isPacked?(l=iNe(e.logicalShape,o,n.enableShapeUniforms),c=uNe(s)):(l=aNe(e.logicalShape,o,n.enableShapeUniforms),c=sNe(s)),n.packedInputs&&(f+=dNe),[f,u,c,i,l,a,n.userCode].join(`
`)}function Hv(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return _Ne(t,e);case 1:return ENe(t,e);case 2:return kNe(t,e);case 3:return NNe(t,e);case 4:return $Ne(t,e);case 5:return MNe(t);case 6:return ONe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ZZ(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return DNe(t);case 1:return TNe(t,e);case 2:return ANe(t,e);case 3:return INe(t,e);default:return RNe(t,e)}}function rNe(t,e,n=!1,r){let i="";n?i+=ZZ(t,r):i+=Hv(t,r);const a=t.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(n?i+=FNe(t,e):i+=PNe(t,e)),i}function iNe(t,e,n){switch(t.length){case 0:return QZ();case 1:return pNe(t,e,n);case 2:return CNe(t,e,n);case 3:return gNe(t,e,n);default:return yNe(t,e,n)}}function aNe(t,e,n){switch(t.length){case 0:return QZ();case 1:return vNe(t,e,n);case 2:return SNe(t,e,n);case 3:return mNe(t,e,n);case 4:return xNe(t,e,n);case 5:return wNe(t,e);case 6:return bNe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function oNe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function sNe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function uNe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function lNe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${cNe}
    ${fNe}
    ${hNe}
  `}const cNe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fNe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hNe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dNe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function QZ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function pNe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function vNe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function gNe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),a=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function mNe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${e_(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=id(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function yNe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),a=i*Math.ceil(t[t.length-2]/2);let o=a,s="",u="b, r, c";for(let l=2;l<t.length-1;l++)o*=t[t.length-l-1],s=`
      int b${l} = index / ${o};
      index -= b${l} * ${o};
    `+s,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${u});
    }
  `}function xNe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${e_(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=id(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function wNe(t,e){const n=id(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function bNe(t,e){const n=id(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function CNe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(zt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function SNe(t,e,n){return zt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function ad(t){return`offset${t}`}function DNe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ci();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function _Ne(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=t.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=ad(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${u}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function TNe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=Ci();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function ENe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${jv(t)}
      }
    `;const i=t.shapeInfo.texShape,a=i[0],o=i[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=ad(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function ANe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=a[0],s=a[1],u=Ci();if(a!=null&&zt(n,a))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function kNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&zt(n,a)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=a[0],d=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=Fc(n),u=o;if(u.length<n.length){const h=qv(t,u),d=["row","col"];return`
      ${Hv(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${Xv(d,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${jv(t)}
      }
    `;const l=a[0],c=a[1],f=ad(r);return c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function INe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const h=n.slice(1),d=[1,2],p=qv(t,h),v=["b","row","col"];return`
        ${ZZ(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Xv(v,d)});
        }
      `}const s=Ci();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const u=o[0],l=o[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function NNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],{newShape:s,keptDims:u}=Fc(n),l=s;if(l.length<n.length){const v=qv(t,l),m=["row","col","depth"];return`
        ${Hv(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Xv(m,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${jv(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],h=c[1],d=t.shapeInfo.flatOffset;if(h===a&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=ad(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function RNe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Ci();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,o=a.length,s=t.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],f=Math.ceil(a[o-1]/2);let h=f*Math.ceil(a[o-2]/2),d="int b, int row, int col",p=`b * ${h} + (row / 2) * ${f} + (col / 2)`;for(let v=2;v<o-1;v++)d=`int b${v}, `+d,h*=a[o-v-1],p=`b${v} * ${h} + `+p;return`
    vec4 ${r}(${d}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${i.texture2D}(${n}, uv);
    }
  `}function $Ne(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,{newShape:u,keptDims:l}=Fc(n);if(u.length<n.length){const y=qv(t,u),x=["row","col","depth","depth2"];return`
      ${Hv(y,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Xv(x,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${jv(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1],p=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(d===s&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===a&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=ad(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${v}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${h}, ${d}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function MNe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:u,keptDims:l}=Fc(e);if(u.length<e.length){const v=qv(t,u),m=["row","col","depth","depth2","depth3"];return`
      ${Hv(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Xv(m,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${a}, ${i})) +
          depth3;
        ${jv(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1];if(d===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(d===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=ad(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${a} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${d}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ONe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=Fc(e);if(i.length<e.length){const m=qv(t,i),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${Hv(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Xv(g,a)});
      }
    `}const o=e[5],s=e[4]*o,u=e[3]*s,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${jv(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=ad(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function jv(t){const e=t.name,n=he(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function FNe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=YZ(t.shapeInfo.logicalShape,e.logicalShape),u=Yt(o),l=o-a;let c;const f=["x","y","z","w","u","v"];a===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(y=>`coords.${f[y+l]} = 0;`).join(`
`);let h="";o<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((y,x)=>`coords.${f[x+l]}`).join(", ");let d="return outputValue;";const v=he(t.shapeInfo.logicalShape)===1,g=he(e.logicalShape)===1;if(a===1&&!v&&!g)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!g)o===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(s.length){const y=a-2,x=a-1;s.indexOf(y)>-1&&s.indexOf(x)>-1?d="return vec4(outputValue.x);":s.indexOf(y)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(x)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${d}
    }
  `}function PNe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&t.shapeInfo.flatOffset==null&&zt(o,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=Yt(u),c=YZ(t.shapeInfo.logicalShape,e.logicalShape),f=u-s;let h;const d=["x","y","z","w","u","v"];s===0?h="":u<2&&c.length>=1?h="coords = 0;":h=c.map(v=>`coords.${d[v+f]} = 0;`).join(`
`);let p="";return u<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((v,m)=>`coords.${d[m+f]}`).join(", "),`
    float ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function Yt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function lP(t,e,n){const{newShape:r,keptDims:i}=Fc(e),a=e.length,o=t&&a===3&&e[0]===1,s=o?e.slice(1):r,u=!t&&a>1&&!zt(e,n)&&r.length<a||o;return{useSqueezeShape:u,uniformShape:u?s:e,keptDims:i}}function qv(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Xv(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LNe(t,e,n,r){const i=n.map((c,f)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:h}}),a=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=nNe(i,o,e),u=NIe(t.gl,s),l=t.createProgram(u);return le().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:o},JZ(t,e,l)))}function JZ(t,e,n){const r=[],i=[];let a,o,s,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),le().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const h={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${f}Shape`,c),h.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",c),s=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)i.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:u,nanLoc:l,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:o}}function cB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,a=e[r],o=a.shape;if(!zt(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&a.isUniform)return;const s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!zt(s,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${u} must match`)})}function zNe(t,e,n,r,i){e.program.enableShapeUniforms||(cB(e.inShapeInfos,n),cB([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):t.setOutputMatrixTexture(a.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),le().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:f,shape:h,texShape:d}=e.variablesLocations[u];if(h){const{uniformShape:p}=lP(e.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(d&&t.gl.uniform2i(d,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(he(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=He(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],f=i[u];if(l.type==="float")t.gl.uniform1fv(c,f);else if(l.type==="vec2")t.gl.uniform2fv(c,f);else if(l.type==="vec3")t.gl.uniform3fv(c,f);else if(l.type==="vec4")t.gl.uniform4fv(c,f);else if(l.type==="int")t.gl.uniform1iv(c,f);else if(l.type==="ivec2")t.gl.uniform2iv(c,f);else if(l.type==="ivec3")t.gl.uniform3iv(c,f);else if(l.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function BNe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const u=o.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=lP(t.packedInputs,o.shape,u);let h="",d="",p="";if(c.length===1&&t.packedInputs){const b=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];h=`${b[0]>1}_${b[1]>1}`}else if(c.length===2&&!t.packedInputs)d=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const b=He(c);p=`${b[0]===u[1]}_${b[b.length-1]===u[1]}`}const v=o.shape.length,m=c.length===2&&zt(o.shape,u),g=he(o.shape)===1,y=rv(o.shape,n.shape),x=!t.packedInputs&&v===n.shape.length&&zt(u,n.texData.texShape),w=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${v}_${x}_${l?f:""}_${c.length}_${g}_${y}_${m}_${h}_${d}_${p}_${w}_${s}`}else{const u=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${u}_${s}`}});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i+`${le().getNumber("WEBGL_VERSION")}`,a}function Jr(t){return le().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VNe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=D0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ci();this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?e_(["r","c","d"],e):id(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WNe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=D0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ci();this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?e_(["r","c","d"],e):id(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UNe{constructor(e){this.variableNames=["A"],this.outTexUsage=Aa.DOWNLOAD;const n=Ci();this.outputShape=e,this.userCode=`
      ${KZ}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GNe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Aa.DOWNLOAD;const n=Ci();this.outputShape=e,this.userCode=`
      ${KZ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe={R:0,G:1,B:2,A:3};class fB{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Ci();this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let o="";for(let s=0;s<r.length;s++){const u=r[s];o+=`
          if(offset == ${s}) {
            result = values[${HNe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?uP():sP(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jNe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ci();this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length);let i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const u=o*2+s;i+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?uP():sP(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t){const e=Ci(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return IIe(t,n)}function XNe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return OIe(t,e)}function KNe(t){const e=new Uint16Array([0,1,2,2,1,3]);return FIe(t,e)}function N1(t,e,n,r,i,a){LIe(e,n);const o=PIe(t),s=t.TEXTURE_2D;return Oe(t,()=>t.bindTexture(s,o)),Oe(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Oe(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Oe(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Oe(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),le().getNumber("WEBGL_VERSION")===1?Oe(t,()=>t.texImage2D(s,0,r,e,n,0,i,a,null)):Oe(t,()=>t.texStorage2D(s,1,r,e,n)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function eQ(t){return t.internalFormatFloat}function YNe(t,e,n,r){const[i,a]=k1(e,n);return N1(t,i,a,eQ(r),r.textureFormatFloat,t.FLOAT)}function tQ(t){return t.internalFormatHalfFloat}function ZNe(t,e,n,r){const[i,a]=k1(e,n);return N1(t,i,a,tQ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function nQ(t){return t.downloadTextureFormat}function QNe(t,e,n,r){const[i,a]=k1(e,n);return N1(t,i,a,nQ(r),t.RGBA,t.UNSIGNED_BYTE)}function rQ(t){return t.internalFormatPackedFloat}function JNe(t,e,n,r){const[i,a]=Gv(e,n);return N1(t,i,a,rQ(r),t.RGBA,t.FLOAT)}function iQ(t){return t.internalFormatPackedHalfFloat}function eRe(t,e,n,r){const[i,a]=Gv(e,n);return N1(t,i,a,iQ(r),t.RGBA,r.textureTypeHalfFloat)}function tRe(t,e,n){return Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),sB(t,e,"clipSpacePos",n,3,20,0)&&sB(t,e,"uv",n,2,20,12)}function nRe(t,e,n,r,i,a){Oe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,u;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,u=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,u=a.internalFormatPackedFloat),o.set(i),le().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,s,o)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function rRe(t,e,n){Oe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?le().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):le().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function iRe(t,e,n,r){const i=t.createBuffer();Oe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const s=4*4*e*n;return Oe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),Oe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Oe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function aRe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function oRe(t,e,n,r){const[i,a]=k1(e,n),o=4,s=new Uint8Array(SIe(e*n,o));return Oe(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function sRe(t,e,n,r,i,a,o,s){const u=t,l=new Float32Array(DIe(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function uRe(t,e,n){const r=new Float32Array(e*n*4);return Oe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=le().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,wIe(n,e)):this.gl=xs(n),e=this.gl,le().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>Oe(a,()=>a.createVertexArray()),this.bindVertexArray=o=>Oe(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>Oe(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>Oe(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Oe(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>Oe(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Oe(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>Oe(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),le().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Fx(this.gl,a),yo(this.gl,o))this.textureHalfFloatExtension=Fx(this.gl,o);else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),yo(this.gl,i))this.colorBufferHalfFloatExtension=Fx(this.gl,i);else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",yo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(yo(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=XNe(this.gl),this.indexBuffer=KNe(this.gl),this.framebuffer=zIe(this.gl),this.textureConfig=oP(this.gl,this.textureHalfFloatExtension)}get debug(){return le().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Oe(e,()=>e.finish()),Oe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Oe(e,()=>e.deleteFramebuffer(this.framebuffer)),Oe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Oe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Oe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),YNe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),ZNe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),QNe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),rRe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),nRe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),eRe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),JNe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uB(this.gl,this.framebuffer),this.outputTexture=null),Oe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>oRe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,a,o){return sRe(this.gl,e,n,r,i,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return aRe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=iRe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(le().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(a,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=a}else le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>uRe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=qNe(n));const r=$Ie(n);Oe(n,()=>n.attachShader(r,this.vertexShader)),Oe(n,()=>n.attachShader(r,e)),MIe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&fE(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Oe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),tRe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Oe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&fE(this.gl,this.program),Oe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?VIe(this.gl,e,n):WIe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Oe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),UIe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,a]=Gv(n,r);this.setOutputMatrixTextureDriver(e,i,a)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&fE(this.gl,this.program),Px(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Oe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Oe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Fx(this.gl,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Yz(()=>this.disposed||this.isQueryAvailable(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=lRe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in le().platform&&(r=le().platform.setTimeoutCustom.bind(le().platform)),Yz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),hE(this.gl,e,this.framebuffer),this.debug&&Px(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(hE(this.gl,this.outputTexture,this.framebuffer),this.debug&&Px(this.gl)):uB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;hE(i,e,this.framebuffer),this.debug&&Px(i),this.outputTexture=e,Oe(i,()=>i.viewport(0,0,n,r)),Oe(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Oe(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function lRe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:cRe,bincountImpl:aQ,bincountReduceImpl:fRe,bitwiseAndImpl:hRe,castImpl:dRe,ceilImpl:pRe,concatImpl:vRe,equalImpl:gRe,expImpl:mRe,expm1Impl:yRe,floorImpl:xRe,gatherNdImpl:wRe,gatherV2Impl:bRe,greaterImpl:CRe,greaterEqualImpl:SRe,lessImpl:DRe,lessEqualImpl:_Re,linSpaceImpl:TRe,logImpl:ERe,maxImpl:ARe,maximumImpl:kRe,minimumImpl:IRe,multiplyImpl:NRe,negImpl:RRe,notEqualImpl:$Re,prodImpl:MRe,raggedGatherImpl:ORe,raggedRangeImpl:FRe,raggedTensorToTensorImpl:PRe,rangeImpl:LRe,rsqrtImpl:zRe,scatterImpl:BRe,sigmoidImpl:VRe,simpleAbsImpl:oQ,sliceImpl:WRe,sparseFillEmptyRowsImpl:URe,sparseReshapeImpl:GRe,sparseSegmentReductionImpl:sQ,sqrtImpl:HRe,staticRegexReplaceImpl:jRe,stridedSliceImpl:qRe,stringNGramsImpl:XRe,stringSplitImpl:KRe,stringToHashBucketFastImpl:YRe,subImpl:ZRe,tileImpl:QRe,topKImpl:JRe,transposeImpl:cP,uniqueImpl:e$e}=r_e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function di(t,e){return e===1?[t]:uQ(t,e)}function t$e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n$e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Jr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=di("rc",this.rank),r=Yt(this.rank),i=this.getOutOfBoundsCondition(n),a=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lQ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${r$e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?uP():sP(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function r$e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?tNe(["r","c","d"],"inputShape"):id(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i$e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=dB(n,r),a=pB(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=hB(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const u=this.freeTextures[a].pop();return this.usedTextures[a].push(u),u}let s;return i===kr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===kr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===kr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===kr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===kr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const a=dB(r,i),o=pB(n,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);const s=hB(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=le().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const l=this.usedTextures[o],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function a$e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function hB(t,e,n,r,i){const a=o$e(e,r);let o;if(i){const[u,l]=Gv(t[0],t[1]);o=u*l}else{const[u,l]=k1(t[0],t[1]);o=u*l}const s=a$e(n,a);return o*s}function o$e(t,e){switch(t){case kr.PACKED_2X2_FLOAT32:return rQ(e);case kr.PACKED_2X2_FLOAT16:return iQ(e);case kr.UNPACKED_FLOAT32:return eQ(e);case kr.UNPACKED_FLOAT16:return tQ(e);case kr.PACKED_4X1_UNSIGNED_BYTE:return nQ(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function s$e(t){return le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?kr.PACKED_2X2_FLOAT32:kr.UNPACKED_FLOAT32:t?kr.PACKED_2X2_FLOAT16:kr.UNPACKED_FLOAT16}function dB(t,e){if(t===Aa.UPLOAD)return kr.PACKED_2X2_FLOAT32;if(t===Aa.RENDER||t==null)return s$e(e);if(t===Aa.DOWNLOAD||t===Aa.PIXELS)return kr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function pB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hs{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Po="if (isnan(x)) return x;",u$e="return x;",vB="return abs(x);",l$e="return (x >= 0.0) ? x : (exp(x) - 1.0);",c$e=Po+`
  return (x < 0.0) ? 0.0 : x;
`,f$e=Po+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Il="return x;",h$e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e="return x;",p$e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,v$e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,g$e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,m$e="return 1.0 / (1.0 + exp(-1.0 * x));";class Bl{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length);const n=e.length,r=di("rc",n),i=Yt(n),a=t$e(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e=$q,w$e=1e-7,b$e=1e-4,Bx={};function C$e(t){return t in Bx||(Bx[t]={}),Bx[t]}const S$e=le().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),D$e=600;function _$e(){return le().global.screen==null?1024:le().global.screen.height*le().global.screen.width*window.devicePixelRatio*D$e/1024/1024}class t_ extends SM{nextDataId(){return t_.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!le().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof vE)n=e;else{const r=xs(le().getNumber("WEBGL_VERSION"),e);n=new vE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=xs(le().getNumber("WEBGL_VERSION"));n=new vE(r),this.binaryCache=C$e(le().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new i$e(this.gpgpu),this.numMBBeforeWarning=_$e(),this.texData=new nj(this,$s())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,a,o){const s=this.makeTensorInfo(n,r),u=this.texData.get(s.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[i,a]},u.texShape=[i,a];const l=Lx(n),c=new fB(l,!1,o),f=this.runWebGLProgram(c,[s],r,[[i,a]]);return f.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(s),f.dataId}write(e,n,r){if((le().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||le().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Aa.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,a){if(le().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Aa.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:a,slice:o,shape:s,isPacked:u}=n;if(o!=null){let h;u?h=new Bl(s,Il):h=new Hs(s,Il);const d=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:i}],i),p=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Ii());let f;if(i==="complex64"){const h=this.readSync(a.real.dataId),d=this.readSync(a.imag.dataId);f=Ju(h,d)}else f=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Ii()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(v=>p.push(v))}const n=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,complexTensorInfos:s,isPacked:u}=n;if(a!=null){let p;u?p=new Bl(i,Il):p=new Hs(i,Il);const v=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),m=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(le().getBool("DEBUG")&&!le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&le().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(o!=="complex64"&&le().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...Ox(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),v=p[0],m=p[1];f=Ju(v,m)}else if(l==null)f=this.getValuesFromTexture(e);else{const p=he(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;Oe(p,()=>p.deleteBuffer(l))}const h=this.convertAndCacheOnCPU(e,f),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&$s().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:a,slice:o,dtype:s,isPacked:u,texture:l}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let d;u?d=new Bl(a,Il):d=new Hs(a,Il);const p=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),v=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),v}if(l==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=$s().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:f},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>yc(i));return Ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!AIe(r))throw le().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),a=he(n);if(le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),d=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...Ox(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),p}const o=le().getBool("WEBGL_PACK")&&i===!0,s=o?Lx(n):n,u=o?new GNe(s):new UNe(s),l=this.runWebGLProgram(u,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Dh(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),o=Dh(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(a);s.kernelMs=Kve(u),s.getExtraProfileInfo=()=>u.map((l,c)=>({name:o[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ii(),endMs:null}}endTimer(e){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ii(),e)}async getQueryTime(e){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:a,isPacked:o,slice:s}=this.texData.get(e),u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=S$e){return le().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&he(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){_a("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return x$e(e.shape,n)}packedUnaryOp(e,n,r){const i=new Bl(e.shape,n),a=this.compileAndRun(i,[e],r);return $s().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=oQ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,vB,e.dtype);const n=new Hs(e.shape,vB),r=this.compileAndRun(n,[e]);return $s().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&gy(r[0])){const a=r.map(o=>uc(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return $s().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new y$e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new n$e(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[cv(e.shape),...fv(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[cv(n),...fv(n)],o=new lQ(a,r),s=!0,u=[r],l=this.runWebGLProgram(o,[i],e.dtype,u,s);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:a,dtype:o}=r;if(n!=null){const h=he(a),d=n[0]*n[1]*4;z(h<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=Lx(a);let u;i?u=new WNe(s):u=new VNe(s);const l=!0,c=[n??Ox(s)],f=this.runWebGLProgram(u,[{shape:s,dtype:o,dataId:e}],o,c,l,n);return{dtype:o,shape:a,dataId:f.dataId}}runWebGLProgram(e,n,r,i,a=!1,o){const s=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===D0.DENSE){const g=o??Ox(e.outputShape);u.texShape=g.map(y=>y*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),he(s.shape)===0)return u.values=Kr(s.dtype,0),s;const l=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(g.dataId);if(y.texture==null){if(!e.packedInputs&&he(g.shape)<=le().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!y.isPacked!=!!e.packedInputs)g=y.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),y=this.texData.get(g.dataId);else if(y.isPacked&&!EC(y.shape,g.shape)){const x=g,w=g.shape;g.shape=y.shape,g=this.packedReshape(g,w),l.push(g),y=this.texData.get(g.dataId),x.shape=w}return{shape:g.shape,texData:y,isUniform:!1}});this.uploadToGPU(s.dataId);const f={shape:s.shape,texData:u,isUniform:!1},h=BNe(e,c,f),d=this.getAndSaveBinary(h,()=>LNe(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let v;p&&(v=this.startTimer()),le().get("ENGINE_COMPILE_ONLY")||zNe(this.gpgpu,d,c,f,i),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const m=le().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const g=Ii();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!le().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&a===!1){const g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}compileAndRun(e,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(le().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=se(()=>{if(!le().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=le().getBool("DEBUG");le().set("DEBUG",!1);const n=this.abs(Bt(1e-8)).dataSync()[0];if(le().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?w$e:b$e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:a,texture:o,usage:s,isPacked:u}=n;if(o!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Ii());let f=n.texShape;if(f==null&&(f=jIe(r,u),n.texShape=f),a!=null){const h=Lx(r);let d,p=f[1],v=f[0];const m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(u||!m)&&([p,v]=Gv(f[0],f[1])),u?d=new jNe(h,m):d=new fB(h,m);const g=m?[v,p]:f,y=this.makeTensorInfo(g,i),x=this.texData.get(y.dataId);m?x.usage=Aa.PIXELS:x.usage=Aa.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,v,a);const w=[[v,p]],b=!0,C=this.runWebGLProgram(d,[y],i,w,b),D=this.texData.get(C.dataId);n.texShape=D.texShape,n.isPacked=D.isPacked,n.usage=D.usage,le().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=D.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(y),l&&(this.uploadWaitMs+=Ii()-c)}else{const h=this.acquireTexture(f,s,i,u);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=T$e(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*eC(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Qq(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(XZ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:u}=JZ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:a,width:o,channels:s}=e,u=$s().backend;if(!u.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(i,n,r,a,o,s);return $s().makeTensorFromDataId(l,n,r,u)}}t_.nextDataId=0;function T$e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Kj()&&iq("webgl",()=>new t_,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fP=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Fh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=ht(n,r),this.enableShapeUniforms=Jr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const od=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Kv{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ht(n,r);const a=this.outputShape.length;this.enableShapeUniforms=Jr(a);let o="";if(i)if(a===0||he(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Yt(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=di("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${u[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${u[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${u[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${u[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const E$e={kernelName:Py,backendName:"webgl",kernelFunc:ga};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hc(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=ga({inputs:{x:r},backend:n}),u=ga({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:u},a}const A$e={kernelName:FM,backendName:"webgl",kernelFunc:Hc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ="return (a < 0.) ? b * a : a;",fQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function k$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r,o=n.makeTensorInfo([],"float32",Pc(a,"float32")),s=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kv(fQ,i.shape,o.shape):new Fh(cQ,i.shape,o.shape),u=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),u}const I$e={kernelName:Y2,backendName:"webgl",kernelFunc:k$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hQ="return (a < 0.) ? b * a : a;",dQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function N$e(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kv(dQ,r.shape,i.shape):new Fh(hQ,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const R$e={kernelName:vD,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yv="if (isnan(x)) return x;";function $t({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,u=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const f=s.texData.get(o.dataId),h=n(f.values,u);return s.makeTensorInfo(o.shape,u,h)}const l=le().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new Bl(o.shape,e):c=new Hs(o.shape,t),s.runWebGLProgram(c,[o],u)}}function Pr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:u,b:l}=o,c=s;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),v=c.texData.get(l.dataId),[m,g]=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(x=>{const[w,b]=x,C={dataId:w.dataId,dtype:w.dtype,shape:u.shape},D={dataId:b.dataId,dtype:b.dtype,shape:l.shape},S=new Fh(t,u.shape,l.shape);return c.runWebGLProgram(S,[C,D],pa(w.dtype,b.dtype))}),y=Hc({inputs:{real:m,imag:g},backend:c});return c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(g),y}const f=a||pa(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&i!=null){const p=c.texData.get(u.dataId).values,v=c.texData.get(l.dataId).values,m=u.dtype==="string"?el(p):p,g=u.dtype==="string"?el(v):v,[y,x]=i(u.shape,l.shape,m,g,f),w=c.makeTensorInfo(x,f),b=c.texData.get(w.dataId);return b.values=y,w}const h=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let d;return h?d=new Kv(e,u.shape,l.shape,n):d=new Fh(t,u.shape,l.shape),c.runWebGLProgram(d,[u,l],f)}}function _0(t,e=!1){if(t==="linear")return e?d$e:u$e;if(t==="relu")return e?v$e:c$e;if(t==="elu")return e?p$e:l$e;if(t==="relu6")return e?g$e:f$e;if(t==="prelu")return e?dQ:hQ;if(t==="leakyrelu")return e?fQ:cQ;if(t==="sigmoid")return e?m$e:h$e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pQ{constructor(e,n,r,i=!1,a=!1,o=!1,s=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Jr(this.outputShape.length);const c=i?e[1]:e[2],f=Math.ceil(c/2),h=i?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(u?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:l?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:m=`vec4 activation(vec4 x) {
          ${s}
        }`,g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let x="rc.x",w="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${w};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${v[0]});
          result += (${p[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class mB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ht(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yB="return a * b;";function hP(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=pa(r.dtype,i.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),u=n.texData.get(i.dataId),l=new mB(gB.REAL,r.shape,i.shape),c=new mB(gB.IMAG,r.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=n.runWebGLProgram(l,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=Hc({inputs:{real:h,imag:d},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(n.shouldExecuteOnCPU([r,i])){const s=n.texData.get(r.dataId),u=n.texData.get(i.dataId),[l,c]=NRe(r.shape,i.shape,s.values,u.values,a),f=n.makeTensorInfo(c,a),h=n.texData.get(f.dataId);return h.values=l,f}let o;return le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Kv(yB,r.shape,i.shape):o=new Fh(yB,r.shape,i.shape),n.runWebGLProgram(o,[r,i],a)}const $$e={kernelName:jy,backendName:"webgl",kernelFunc:hP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t,e,n){const r=[cv(t.shape),...fv(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[cv(e),...fv(e)],o=new lQ(a,r),s=!0,u=[r],l=n.runWebGLProgram(o,[i],t.dtype,u,s);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ie(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=n,s=he(i.shape),u=ij(a,s),l=he(u);z(s===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!EC(i.shape,u)&&!(c.texture!==null&&EC(c.shape,u))?M$e(i,u,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}const O$e={kernelName:mD,backendName:"webgl",kernelFunc:Ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];const s=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const f=1/n;l=`sumValue += dot(values * ${ev(f)?f.toPrecision(2):f}, ones);`}let c="";a%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${s};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F$e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];let s="0.0",u="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",u="min"):n==="max"&&(s="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";n==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):n==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=zD(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function sd(t,e,n,r){const i=P$e(t.shape);let a=t;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:u,outSize:l}=i[o];let c,f;n==="mean"?c=o===0?new xB({windowSize:u,inSize:s,batchSize:t.shape[0],outSize:l},s):new xB({windowSize:u,inSize:s,batchSize:t.shape[0],outSize:l}):c=new F$e({windowSize:u,inSize:s,batchSize:t.shape[0],outSize:l},n),f=a,a=r.runWebGLProgram(c,[a],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L$e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Yt(this.rank),a=z$e(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function z$e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B$e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Yt(this.rank),a=uQ("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=a[c];const s=`vec2(${o.slice(-2).join()})`,u=`++${a[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_(t,e,n){const r=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new B$e(t.shape,e):new L$e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t,e,n,r){const i=e,a=t.shape.length,o=St(i,t.shape);let s=o;const u=Dn(s,a),l=u!=null;let c=t;l&&(c=n_(t,u,r),s=Bn(s.length,a)),Fr("sum",s,a);const[f,h]=_r(c.shape,s);let d=f;n&&(d=Zn(f,o));const p=he(h),m=he(t.shape)/p,g=Ie({inputs:{x:c},attrs:{shape:[m,p]},backend:r}),y=mO(t.dtype),x=sd(g,y,"sum",r),w=Ie({inputs:{x},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),l&&r.disposeIntermediateTensorInfo(c),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;return V$e(i,a,o,n)}const W$e={kernelName:SD,backendName:"webgl",kernelFunc:r_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:a}=r,o=n,s=i.shape.length,u=new Array(s);for(let c=0;c<u.length;c++)u[c]=i.shape[a[c]];let l;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,h=cP(f,i.shape,i.dtype,a,u);l=o.makeTensorInfo(u,i.dtype);const d=o.texData.get(l.dataId);d.values=h}else l=n_(i,a,o);return l}const U$e={kernelName:Ap,backendName:"webgl",kernelFunc:xi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vQ=1e3;function AC({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,f=n?t.shape[l-2]:t.shape[l-1],h=r?e.shape[c-1]:e.shape[c-2],d=n?t.shape[l-1]:t.shape[l-2],p=r?e.shape[c-2]:e.shape[c-1],v=t.shape.slice(0,-2),m=e.shape.slice(0,-2),g=he(v),y=he(m),w=ht(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([d,p]);z(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=n?[g,f,d]:[g,d,f],C=r?[y,p,h]:[y,h,p],D=Ie({inputs:{x:t},backend:i,attrs:{shape:b}}),S=Ie({inputs:{x:e},backend:i,attrs:{shape:C}}),_=[D,S],T=Math.max(g,y),E=n?D.shape[1]:D.shape[2],A=a!=null,N=o!=null,R=u==="leakyrelu",M=u!=null?_0(u,!0):null,$=A||N||R||M!=null;let L;if((d===1||p===1)&&E>vQ&&$===!1){let F=D,V=S;n&&(F=xi({inputs:{x:D},backend:i,attrs:{perm:[0,2,1]}}),_.push(F)),r&&(V=xi({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),_.push(V));const X=p!==1,P=p===1;let U=F;X&&(U=Ie({inputs:{x:F},backend:i,attrs:{shape:[T,E,1]}}),_.push(U));const j=p===1?2:1;let q=V;P&&(q=Ie({inputs:{x:V},backend:i,attrs:{shape:[T,1,E]}}),_.push(q));const Y=hP({inputs:{a:U,b:q},backend:i});L=r_({inputs:{x:Y},backend:i,attrs:{axis:j,keepDims:!0}}),_.push(Y)}else{const F=pa(t.dtype,e.dtype),V=new pQ(b,C,[T,d,p],n,r,A,M,N,R),X=[D,S];if(a!=null&&X.push(a),N&&X.push(o),R){const P=i.makeTensorInfo([],"float32",Pc(s,"float32"));X.push(P),_.push(P)}L=i.runWebGLProgram(V,X,F)}const O=Ie({inputs:{x:L},backend:i,attrs:{shape:w}});_.push(L);for(const F of _)i.disposeIntermediateTensorInfo(F);return O}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return AC({a:i,b:a,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:f,activation:c})}const H$e={kernelName:tC,backendName:"webgl",kernelFunc:G$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wB="return abs(x);";function j$e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),o=oQ(a.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return le().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Bl(r.shape,wB):i=new Hs(r.shape,wB),n.runWebGLProgram(i,[r],r.dtype)}const q$e={kernelName:I2,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$e=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,K$e=$t({opSnippet:X$e}),Y$e={kernelName:my,backendName:"webgl",kernelFunc:K$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$e=Po+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Q$e=$t({opSnippet:Z$e}),J$e={kernelName:yy,backendName:"webgl",kernelFunc:Q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bB="return a + b;",eMe=Pr({opSnippet:bB,packedOpSnippet:bB,supportsComplex:!0,cpuKernelImpl:cRe}),tMe={kernelName:Lv,backendName:"webgl",kernelFunc:eMe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nMe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rMe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return ga({inputs:{x:r[0]},backend:n});if(r.length>le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=Yw({inputs:r.slice(0,u),backend:n}),c=Yw({inputs:r.slice(u),backend:n});return Yw({inputs:[l,c],backend:n})}const i=r.map(u=>u.dtype).reduce((u,l)=>pa(u,l)),a=r.map(u=>u.shape),s=le().getBool("WEBGL_PACK")?new rMe(r[0].shape,a):new nMe(r[0].shape,a);return n.runWebGLProgram(s,r,i)}const iMe={kernelName:kM,backendName:"webgl",kernelFunc:Yw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=St(a,i.shape);let l=u;const c=Dn(l,s);let f=i;c!=null&&(f=xi({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Bn(l.length,s)),Fr("all",l,s);const[h,d]=_r(f.shape,l),p=he(d),v=Ie({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=sd(v,v.dtype,"all",n);let g;if(o){const y=Zn(h,u);g=Ie({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=Ie({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const oMe={kernelName:IM,backendName:"webgl",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=St(a,i.shape);let l=u;const c=Dn(l,s);let f=i;c!=null&&(f=xi({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Bn(l.length,s)),Fr("any",l,s);const[h,d]=_r(f.shape,l),p=he(d),v=Ie({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=sd(v,v.dtype,"any",n);let g;if(o){const y=Zn(h,u);g=Ie({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=Ie({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const uMe={kernelName:NM,backendName:"webgl",kernelFunc:sMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lMe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cMe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,z(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const s=this.outputShape,u=s.length,l=Yt(u),c=di("coords",u);let f,h;if(o===1){h=u+1;const S=Yt(h);f=`
        ${S} sourceLocR = ${S}(${c.join()}, 0);
        ++${c[u-1]};
        ${S} sourceLocG = ${S}(${c.join()}, 0);
        ++${c[u-2]};
        ${S} sourceLocA = ${S}(${c.join()}, 0);
        --${c[u-1]};
        ${S} sourceLocB = ${S}(${c.join()}, 0);
        --${c[u-2]};`}else h=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],v=d.map(S=>"int "+S),m=di("sourceLocR",h-1).concat("inIdx.r"),g=di("sourceLocG",h-1).concat("inIdx.g"),y=di("sourceLocB",h-1).concat("inIdx.b"),x=di("sourceLocA",h-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",b=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,D=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${D}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${s[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${s[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${b}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(t,e,n,r=null){let i=e.shape[0],a=e.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const o=zD(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},u=new lMe(s,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=gQ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function mQ(t,e,n,r=null){const i=r!=null?r.shape:e.shape,a=i[i.length-1],o=zD(a),s=new cMe(i,o,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(s,u,"int32");if(l.shape.length===e.shape.length){const c=mQ(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function yQ(t,e,n,r){const i=[n];if(Fr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!le().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let u=e;s&&(u=t.unpackTensor(e),a.push(u));const[l,c]=_r(u.shape,i),f=he(c),h=Ie({inputs:{x:u},backend:t,attrs:{shape:[-1,f]}});a.push(h);const d=gQ(t,h,r);a.push(d);const p=Ie({inputs:{x:d},backend:t,attrs:{shape:l}});return a.forEach(v=>t.disposeIntermediateTensorInfo(v)),p}return mQ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=St(a,i.shape);const s=Dn(o,i.shape.length);let u=i;const l=[];s!=null&&(u=xi({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(u),o=Bn(o.length,u.shape.length)),Fr("argMax",[o[0]],u.shape.length);const c=yQ(n,u,o[0],"max");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const hMe={kernelName:N2,backendName:"webgl",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=St(a,i.shape);const s=Dn(o,i.shape.length);let u=i;const l=[];s!=null&&(u=xi({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(u),o=Bn(o.length,u.shape.length)),Fr("argMin",[o[0]],u.shape.length);const c=yQ(n,u,o[0],"min");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const pMe={kernelName:R2,backendName:"webgl",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vMe=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,gMe=$t({opSnippet:vMe}),mMe={kernelName:xy,backendName:"webgl",kernelFunc:gMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yMe=Po+"return log(x + sqrt(x * x + 1.0));",xMe=$t({opSnippet:yMe}),wMe={kernelName:wy,backendName:"webgl",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bMe=Po+`
  return atan(x);
`,CMe=$t({opSnippet:bMe}),SMe={kernelName:by,backendName:"webgl",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DMe=fP+`
  return atan(a, b);
`,_Me=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+od+`
  return result;
`,TMe=Pr({opSnippet:DMe,packedOpSnippet:_Me}),EMe={kernelName:Sy,backendName:"webgl",kernelFunc:TMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AMe=Po+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,kMe=$t({opSnippet:AMe}),IMe={kernelName:Cy,backendName:"webgl",kernelFunc:kMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T0{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(v||(y="-1.0 / 1e-20"),r){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${u});
        const ivec2 pads = ivec2(${d}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?m:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const b=Math.floor(o/4)*4,C=o%4,D=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${u});
      const ivec2 pads = ivec2(${d}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${b}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${D}
          }

          int xC = xCCorner + ${b};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${D}
          }
        }
        setOutput(${w});
      }
    `}}class dP{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let w="0.0";if(x||(w="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${u}, ${l});
        const ivec3 pads = ivec3(${m}, ${g}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${T} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const D=Math.floor(o/4)*4,S=o%4,_=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${u}, ${l});
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${D}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${D};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;I1(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;z(Qr(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Oo(i.shape,a,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&zt(c.inShape,c.outShape))return ga({inputs:{x:i},backend:n});const f=new T0(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const RMe={kernelName:$2,backendName:"webgl",kernelFunc:NMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=ol(i.shape,a,o,c,s,u,l),h=new dP(f,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const MMe={kernelName:M2,backendName:"webgl",kernelFunc:$Me};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OMe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class FMe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=f-1-e.padInfo.front,v=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${v}, ${m});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],h=ol(o.shape,s,u,f,l,c),d=new FMe(h);return n.runWebGLProgram(d,[i],o.dtype)}const LMe={kernelName:$M,backendName:"webgl",kernelFunc:PMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;I1([i,a],"avgPoolGrad");const{filterSize:s,strides:u,pad:l}=r,c=Oo(o.shape,s,u,1,l),f=new OMe(c);return n.runWebGLProgram(f,[i],o.dtype)}const BMe={kernelName:RM,backendName:"webgl",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;return AC({a:i,b:a,transposeA:o,transposeB:s,backend:n})}const WMe={kernelName:O2,backendName:"webgl",kernelFunc:VMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UMe{constructor(e,n,r,i,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ht(e,n),ht(e,r);let s="0.0";i!=null&&(ht(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let u="1.0";a!=null&&(ht(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GMe{constructor(e,n,r,i,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ht(e,n),ht(e,r);let s="vec4(0.0)";i!=null&&(ht(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let u="vec4(1.0)";a!=null&&(ht(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HMe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=t;z(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),z(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),z(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,i,a];let c=null;o!=null&&(c=o.shape,l.push(o));let f=null;s!=null&&(f=s.shape,l.push(s));const h=le().getBool("WEBGL_PACK_NORMALIZATION")?new GMe(r.shape,i.shape,a.shape,c,f,u):new UMe(r.shape,i.shape,a.shape,c,f,u);return e.runWebGLProgram(h,l,l[0].dtype)},jMe={kernelName:q2,backendName:"webgl",kernelFunc:HMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qMe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Yt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=XMe(this.rank);let i;const a=e.map((o,s)=>`sourceLoc.${tN[s]} = start[${s}] + coords.${tN[s]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const tN=["x","y","z","w","u","v"];function XMe(t){if(t===1)return"sourceLoc";if(t<=6)return tN.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KMe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Yt(this.rank),r=di("coords",this.rank),i=di("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${s}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e,n,r){const i=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=uF(e,He(t.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||t.dataId};const u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),a}function Zv(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r,[s,u]=LD(i,a,o);if(aF(i,s,u),he(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),h=WRe(f.values,s,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,h)}const{isPacked:l}=n.texData.get(i.dataId),c=sF(i.shape,s,u);if(l||!c){const f=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KMe(u):new qMe(u),h=[s];return n.runWebGLProgram(f,[i],i.dtype,h)}return n.uploadToGPU(i.dataId),YMe(i,s,u,n)}const ZMe={kernelName:CD,backendName:"webgl",kernelFunc:Zv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QMe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;z(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((y,x)=>y*x),u=m1(i.shape,a,s),l=y1(u.length,a.length),c=x1(i.shape,a,s),f=dF(o,a.length),h=pF(c,o,a.length),d=[],p=Ie({inputs:{x:i},backend:n,attrs:{shape:u}}),v=xi({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Ie({inputs:{x:v},backend:n,attrs:{shape:c}}),g=Zv({inputs:{x:m},backend:n,attrs:{begin:f,size:h}});return d.push(p),d.push(v),d.push(m),d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},JMe={kernelName:F2,backendName:"webgl",kernelFunc:QMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.readSync(i.dataId),u=n.readSync(a.dataId),l=aQ(s,u,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,l)}const tOe={kernelName:MM,backendName:"webgl",kernelFunc:eOe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,rOe=`
  return float(int(a.r) & int(b.r));
`;function iOe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=le().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(i.dataId).values,[c,f]=hRe(r.shape,i.shape,u,l,r.dtype),h=n.makeTensorInfo(f,r.dtype),d=n.texData.get(h.dataId);return d.values=c,h}let s;return a?s=new Kv(nOe,r.shape,i.shape,!1):s=new Fh(rOe,r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}const aOe={kernelName:OM,backendName:"webgl",kernelFunc:iOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=ht(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const sOe={kernelName:cj,backendName:"webgl",kernelFunc:oOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOe="return float(a != b);",xQ=Pr({opSnippet:uOe,cpuKernelImpl:$Re,dtype:"bool"}),lOe={kernelName:cD,backendName:"webgl",kernelFunc:xQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ga({inputs:{x:i.complexTensorInfos.real},backend:n})}const cOe={kernelName:oO,backendName:"webgl",kernelFunc:R1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe="return float(int(x));";function hOe(t,e){const n=new Hs(t.shape,fOe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nN(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return ga({inputs:{x:i},backend:n});const o=xr(i.shape),s=nN({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=Hc({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),u}if(i.dtype==="complex64"){const o=R1({inputs:{input:i},backend:n}),s=nN({inputs:{x:o},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(o),s}if(!aj(i.dtype,a)){const o=ga({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[s,u,l]=dRe(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,u,l)}if(a==="int32")return hOe(i,n);if(a==="bool"){const o=n.makeTensorInfo([],"bool",Kr("bool",1)),u=xQ({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const dOe={kernelName:Dy,backendName:"webgl",kernelFunc:nN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB="return ceil(x);",pOe=$t({opSnippet:CB,packedOpSnippet:CB,cpuKernelImpl:pRe}),vOe={kernelName:_y,backendName:"webgl",kernelFunc:pOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gOe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:a,clipValueMax:o}=r;let s;le().getBool("WEBGL_PACK_CLIP")?s=new mOe(i.shape):s=new gOe(i.shape);const u=[[a],[o]];return n.runWebGLProgram(s,[i],i.dtype,u)}const xOe={kernelName:Ty,backendName:"webgl",kernelFunc:yOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wOe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function bOe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),a=new wOe(r.shape),o=[SB(r,i.complexTensorInfos.real),SB(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}const COe={kernelName:P2,backendName:"webgl",kernelFunc:bOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SOe{constructor(e){this.outputShape=[],this.outputShape=eu(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const i=n.length,a=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DOe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=eu(e,n);const r=this.outputShape,i=r.length,a=Yt(i),o=di("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,m)=>`T${m}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let v=1;v<u.length;v++)u[v]=u[v-1]+e[v][n];const l=s[n],c=s.slice(-2),f=s.join();let h=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let v=1;v<u.length;v++){const m=u[v-1];h+=`
        if (${l} < ${u[v]}  && ${l} >= ${u[v-1]}) {
          return getChannel(
            getT${v}(${Vx(s,l,m)}),
            vec2(${Vx(c,l,m)}));
        }`}const d=u.length,p=u[u.length-1];h+=`
        return getChannel(
          getT${d}(${Vx(s,l,p)}),
          vec2(${Vx(c,l,p)}));`,this.userCode=`
      float getValue(${s.map(v=>"int "+v)}) {
        ${h}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function Vx(t,e,n){const r=t.indexOf(e);return t.map((a,o)=>o===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return ga({inputs:{x:i.complexTensorInfos.imag},backend:n})}const _Oe={kernelName:QM,backendName:"webgl",kernelFunc:i_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function am(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(y=>R1({inputs:{input:y},backend:n})),p=t.map(y=>i_({inputs:{input:y},backend:n})),v=am(d,e,n),m=am(p,e,n),g=Hc({inputs:{real:v,imag:m},backend:n});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const d=t.map(w=>{const C=[-1,he(w.shape.slice(e))];return Ie({inputs:{x:w},backend:n,attrs:{shape:C}})}),p=d.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),v=eu(d.map(w=>w.shape),1),m=d[0].shape[0]===1,g=vRe(p,v,r,m),y=eu(t.map(w=>w.shape),e),x=n.makeTensorInfo(y,r,g);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const a=t.filter(d=>he(d.shape)>0),o=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const d=o?new Hs(t[0].shape,Il):new Bl(t[0].shape,Il);return n.runWebGLProgram(d,t,r)}const s=le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const d=[];for(let v=0;v<a.length;v+=s){const m=a.slice(v,v+s);d.push(am(m,e,n))}const p=am(d,e,n);for(const v of d)n.disposeIntermediateTensorInfo(v);return p}if(o){const d=new DOe(a.map(p=>p.shape),e);return n.runWebGLProgram(d,a,r)}const{tensors2D:u,outShape:l}=TOe(a,e,n),c=new SOe(u.map(d=>d.shape)),f=n.runWebGLProgram(c,u,r);u.forEach(d=>n.disposeIntermediateTensorInfo(d));const h=Ie({inputs:{x:f},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(f),h}function TOe(t,e,n){const r=eu(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Ie({inputs:{x:a},attrs:{shape:[-1,he(a.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=St(i,e[0].shape)[0],o=e.map(l=>l.shape);cF(o,a);const s=eu(e.map(l=>l.shape),a);if(he(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const u=e.filter(l=>he(l.shape)>0);return u.length===1?ga({inputs:{x:u[0]},backend:n}):am(u,a,n)}const EOe={kernelName:L2,backendName:"webgl",kernelFunc:wQ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bQ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,y=m?2:3,x=m?3:1;let w="",b="";r&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,b="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${b}
        setOutput(result);
      }
    `}}class AOe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CQ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jr(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<c;m++)h+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;h+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<c;m++)h+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(f+1)/2;m++){const g=m*2;if(h+=`
           xC = xCCorner + ${g*u};
           `,s===1){if(g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,u===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const y=o%2===0?DM(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,u>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):y===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let d="",p="";r&&(i?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:d=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kOe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Jr(this.outputShape.length);const{dataFormat:r}=n,i=Ci(),a=r==="channelsLast",o=a?1:2,s=a?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kC(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function SQ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,f=u[0]*u[1]*u[2],h=n.outChannels,d=n.dataFormat==="channelsLast",p=!1,v=!1;let m;const g=[];if(a!=null){const w=kC(a.shape,d);w!=null&&(a=Ie({inputs:{x:a},backend:r,attrs:{shape:w}}),g.push(a))}if(i!=null){const w=kC(i.shape,d);w!=null&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:w}}),g.push(i))}if(!((f===1||h===1)&&c>vQ)&&l.isPacked&&d&&l.texture!=null&&u[2]%2!==0&&zt(l.shape.slice(-3),u.slice(-3))){const w=u[0]*u[1]*(u[2]+1),b={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,z(EC(l.shape,b.shape),()=>`packed reshape ${l.shape} to ${b.shape} isn't free`);const D=Ie({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(D);const S=AC({a:b,b:D,backend:r,transposeA:p,transposeB:v,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),_=r.texData.get(S.dataId);z(_.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=C,_.shape=n.outShape,m=ga({inputs:{x:S},backend:r}),m.shape=n.outShape,g.push(S)}else{const w=n.outHeight*n.outWidth,b=Ie({inputs:{x:t},backend:r,attrs:{shape:d?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=Ie({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),D=AC({a:d?b:C,b:d?C:b,transposeA:!d,transposeB:v,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});m=Ie({inputs:{x:D},backend:r,attrs:{shape:n.outShape}}),g.push(b),g.push(C),g.push(D)}for(const w of g)r.disposeIntermediateTensorInfo(w);return m}function DQ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:h,dataFormat:d}=n,p=d==="channelsLast",v=u*l*c,m=h*f,g=[n.batchSize,v,m],y=!0,x=!1,w=[];if(a!=null){const O=kC(a.shape,p);O!=null&&(a=Ie({inputs:{x:a},backend:r,attrs:{shape:O}}),w.push(a))}if(i!=null){const O=kC(i.shape,p);O!=null&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:O}}),w.push(i))}const b=Ie({inputs:{x:e},backend:r,attrs:{shape:[1,v,he(e.shape)/v]}});w.push(b);const C=new kOe(g,n),D=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=r.runWebGLProgram(C,[t],"float32",D),_=Ie({inputs:{x:S},backend:r,attrs:{shape:g}});w.push(S),w.push(_);const T=i!=null,E=a!=null,A=s==="leakyrelu",N=s?_0(s,!0):null,R=new pQ(p?_.shape:b.shape,p?b.shape:_.shape,p?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],y,x,T,N,E,A),M=p?[_,b]:[b,_];if(i&&M.push(i),E&&M.push(a),A){const O=r.makeTensorInfo([],"float32",Pc(o,"float32"));M.push(O),w.push(O)}const $=r.runWebGLProgram(R,M,"float32"),L=Ie({inputs:{x:$},backend:r,attrs:{shape:n.outShape}});w.push($);for(const O of w)r.disposeIntermediateTensorInfo(O);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=sl(u),h=Or(i.shape,a.shape,o,l,s,c,!1,f);let d;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))d=SQ({x:i,filter:a,convInfo:h,backend:n});else if(h.strideWidth<=2&&f==="channelsLast"&&le().getBool("WEBGL_EXP_CONV")){const v=new CQ(h),m=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=n.runWebGLProgram(v,[i,a],"float32",m)}else if(le().getBool("WEBGL_CONV_IM2COL"))d=DQ({x:i,filter:a,convInfo:h,backend:n});else{const v=new bQ(h);d=n.runWebGLProgram(v,[i,a],"float32")}const p=Ie({inputs:{x:d},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(d),p}const NOe={kernelName:z2,backendName:"webgl",kernelFunc:IOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ROe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $Oe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class MOe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class OOe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=sl(u),h=Or(i.shape,c,o,1,s,l,!1,f),d=new ROe(h);return n.runWebGLProgram(d,[i,a],"float32")}const POe={kernelName:PM,backendName:"webgl",kernelFunc:FOe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LOe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Jr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=sl(l),h=Or(o,a.shape,s,1,u,c,!1,f);if(le().getBool("WEBGL_PACK")&&f==="channelsLast"){const d=[[h.strideHeight,h.strideWidth]],p=new LOe(h);return n.runWebGLProgram(p,[i,a],"float32",d)}else{const d=new $Oe(h);return n.runWebGLProgram(d,[i,a],"float32")}}const BOe={kernelName:B2,backendName:"webgl",kernelFunc:zOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u}=r,l=zc(i.shape,a.shape,o,u,s),c=new AOe(l);return n.runWebGLProgram(c,[i,a],"float32")}const WOe={kernelName:V2,backendName:"webgl",kernelFunc:VOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:u}=r,l=zc(i.shape,u,o,1,s),c=new MOe(l);return n.runWebGLProgram(c,[i,a],"float32")}const GOe={kernelName:LM,backendName:"webgl",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:u}=r,l=zc(u,a.shape,s,1,o),c=new OOe(l);return n.runWebGLProgram(c,[i,a],"float32")}const jOe={kernelName:zM,backendName:"webgl",kernelFunc:HOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe=Yv+`
  return cos(x);
`,XOe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${od}
  return result;
`,KOe=$t({opSnippet:qOe,packedOpSnippet:XOe}),YOe={kernelName:Ey,backendName:"webgl",kernelFunc:KOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,QOe=$t({opSnippet:ZOe}),JOe={kernelName:Ay,backendName:"webgl",kernelFunc:QOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eFe{constructor(e,n,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,u,l]=e,[c]=n,[f,h]=r;this.outputShape=[c,f,h,l];const d=i==="bilinear"?1:0,[p,v]=[`${s-1}.0`,`${u-1}.0`],[m,g,y]=f>1?[`${(s-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,w,b]=h>1?[`${(u-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${w};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${b};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tFe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:u,extrapolationValue:l}=r,c=new eFe(i.shape,a.shape,s,u,l);return n.runWebGLProgram(c,[i,a,o],"float32")},nFe={kernelName:VM,backendName:"webgl",kernelFunc:tFe};var E0;(function(t){t.Prod="*",t.Sum="+"})(E0||(E0={}));class DB{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===E0.Prod?"1.0":"0.0",s=r?o:`getX(${_B(a,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=i?`end != ${u-1}`:"end != 0",c=i?"end + 1":"end - 1"):(l=i?`end + pow2 < ${u}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Yt(a)} coords = getOutputCoords();
        int end = ${TB(a,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${TB(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${_B(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function _B(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function TB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t,e,n,r,i,a){const o=e.shape.length,s=Dn([r],o);let u=e;s!=null&&(u=xi({inputs:{x:e},backend:n,attrs:{perm:s}}));const l=Bn(1,o)[0];if(l!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=ga({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const d=new DB(t,u.shape,!1,a),p=[[h]],v=f;f=n.runWebGLProgram(d,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(i){const h=new DB(t,u.shape,i,a),d=f;f=n.runWebGLProgram(h,[f],f.dtype),n.disposeIntermediateTensorInfo(d)}if(s!=null){const h=Bc(s),d=xi({inputs:{x:f},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),d}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return _Q(E0.Prod,i,n,a,o,s)}const iFe={kernelName:BM,backendName:"webgl",kernelFunc:rFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return _Q(E0.Sum,i,n,a,o,s)}const oFe={kernelName:W2,backendName:"webgl",kernelFunc:aFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const u=n.readSync(i.dataId),l=n.readSync(a.dataId),c=aQ(u,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}else if(i.shape.length===2){const u=n.bufferSync(i),l=n.bufferSync(a),c=fRe(u,l,o,s);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const uFe={kernelName:WM,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lFe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r,s=i.shape[0],u=o==="NHWC"?i.shape[1]:i.shape[2],l=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],f=u*a,h=l*a,d=c/(a*a),p=o==="NHWC"?[s,f,h,d]:[s,d,f,h],v=new lFe(p,a,o);return n.runWebGLProgram(v,[i],i.dtype)}const fFe={kernelName:UM,backendName:"webgl",kernelFunc:cFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TQ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jr(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(i?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EQ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jr(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<f;g++)d+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;d+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<f;g++)d+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const y=g*2;if(d+=`
          xC = xCCorner + ${y*l};
          `,u===1){if(y<f&&(s%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,l===1&&y>0?d+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<f)){const x=s%2===0?DM(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,l>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:d+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):x===1?d+=`
                    xC${y+1} = xTexelC${y};
                    `:d+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<f&&(s%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<f&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<f&&(d+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<f&&(d+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<f&&(d+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let p="",v="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),z(Qr(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=Or(i.shape,a.shape,o,c,s,l,!0);let h;le().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?h=new EQ(f):h=new TQ(f);const d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[i,a],"float32",d)}const dFe={kernelName:U2,backendName:"webgl",kernelFunc:hFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pFe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class vFe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r,f=Or(i.shape,c,o,s,u,l,!0),h=new pFe(f);return n.runWebGLProgram(h,[i,a],"float32")}const mFe={kernelName:GM,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r,f=Or(c,a.shape,o,s,u,l,!0),h=new vFe(f);return n.runWebGLProgram(h,[i,a],"float32")}const xFe={kernelName:HM,backendName:"webgl",kernelFunc:yFe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wFe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],a=he(r.shape),o=Ie({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new wFe(a),u=n.runWebGLProgram(s,[o],o.dtype),l=Ie({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const CFe={kernelName:fj,backendName:"webgl",kernelFunc:bFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SFe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:f,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${f}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u}=r,l=h1(i.shape,a.shape,o,s,"NHWC",u);let c;const f=new SFe(l);c=n.runWebGLProgram(f,[i,a],"float32");const h=Ie({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),h}const _Fe={kernelName:G2,backendName:"webgl",kernelFunc:DFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:u}=CF(i,a.length);DF(o.length,u,a);const{path:l,steps:c}=_F(s,u),f=c.length;let h=null,d=o.length;const p=[];for(let v=0;v<f;++v){for(const m of c[v]){const{permutationIndices:g,expandDims:y}=SF(d,u[m]);let x;TF(g)?x=a[m]:(x=xi({inputs:{x:a[m]},backend:n,attrs:{perm:g}}),p.push(x));const w=x.shape.slice();for(let b=0;b<y.length;++b)w.splice(y[b],0,1);zt(x.shape,w)||(x=Ie({inputs:{x},backend:n,attrs:{shape:w}}),p.push(x)),h===null?h=x:(h=hP({inputs:{a:x,b:h},backend:n}),p.push(h))}v<f-1&&(l[v]>=0&&(h=r_({inputs:{x:h},backend:n,attrs:{axis:l[v]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const v of p)v!==h&&n.disposeIntermediateTensorInfo(v);return h}const EFe={kernelName:jM,backendName:"webgl",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe="return (x >= 0.0) ? x : (exp(x) - 1.0);",kFe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,IFe=$t({opSnippet:AFe,packedOpSnippet:kFe}),NFe={kernelName:Iy,backendName:"webgl",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe="return (b >= 0.0) ? a : a * (b + 1.0);",$Fe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,MFe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kv($Fe,r.shape,i.shape):new Fh(RFe,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},OFe={kernelName:qM,backendName:"webgl",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FFe=`
  return vec4(equal(a, b));
`,PFe="return float(a == b);",LFe=Pr({opSnippet:PFe,packedOpSnippet:FFe,dtype:"bool",cpuKernelImpl:gRe}),zFe={kernelName:H2,backendName:"webgl",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${vF};
  float a1 = ${gF};
  float a2 = ${mF};
  float a3 = ${yF};
  float a4 = ${xF};
  float a5 = ${wF};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,VFe=$t({opSnippet:BFe}),WFe={kernelName:Ny,backendName:"webgl",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UFe=Yv+`
  return exp(x);
`,GFe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AQ=$t({opSnippet:UFe,packedOpSnippet:GFe,cpuKernelImpl:mRe,dtype:"float32"}),HFe={kernelName:Ry,backendName:"webgl",kernelFunc:AQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rN(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:a}=e,o=a.shape.length,s=a.shape.slice();let u=i;return i<0&&(z(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+i+1),s.splice(u,0,1),Ie({inputs:{x:a},backend:r,attrs:{shape:s}})}const jFe={kernelName:j2,backendName:"webgl",kernelFunc:rN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EB="return exp(x) - 1.0;",qFe=$t({opSnippet:EB,packedOpSnippet:EB,cpuKernelImpl:yRe}),XFe={kernelName:$y,backendName:"webgl",kernelFunc:qFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AB{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(t,e,n){const r=n.texData.get(t.dataId),i=he(t.shape),a=t.shape[t.shape.length-1],o=i/a,s=Ie({inputs:{x:t},backend:n,attrs:{shape:[o,a]}}),u=s.shape,l=new AB("real",u,e),c=new AB("imag",u,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=n.runWebGLProgram(l,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=Hc({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const v=Ie({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t){const{inputs:e,backend:n}=t,{input:r}=e;return kQ(r,!1,n)}const YFe={kernelName:XM,backendName:"webgl",kernelFunc:KFe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZFe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||Fv(i),a==="string"){const o=On(a,he(r));return o.fill(i),e.makeTensorInfo(r,a,o)}else{const o=new ZFe(r,i),s=[[i]];return e.runWebGLProgram(o,[],a,s)}}const QFe={kernelName:KM,backendName:"webgl",kernelFunc:$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JFe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe={kernelName:YM,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new JFe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kB="return floor(x);",tPe=$t({opSnippet:kB,packedOpSnippet:kB,cpuKernelImpl:xRe}),nPe={kernelName:My,backendName:"webgl",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,iPe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,aPe=Pr({opSnippet:rPe,packedOpSnippet:iPe,dtype:"int32"}),oPe={kernelName:Oy,backendName:"webgl",kernelFunc:aPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sPe{constructor(e){this.variableNames=["A"];const n=Ci(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uPe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ci(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe={kernelName:cge,backendName:"webgl",kernelFunc:cPe};let md,gE=le().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function cPe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,l]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[l,u],f=[l,u,a];if(s||o){const v=le().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(md==null||v!==gE)&&(gE=v,md=document.createElement("canvas").getContext("2d",{willReadFrequently:gE})),md.canvas.width=u,md.canvas.height=l,md.drawImage(i,0,0,u,l),i=md.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=Aa.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const d=le().getBool("WEBGL_PACK")?new uPe(f):new sPe(f),p=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,v=sl(c),m=Or(i.shape,a.shape,u,f,l,h,!1,v);let g;const y=[],x=o!=null,w=s!=null,b=d==="leakyrelu",C=()=>{const S=[i,a],_=(T,E)=>{if(E==="NCHW"&&T.shape.length===1&&T.shape[0]!==1){const A=Ie({inputs:{x:T},backend:n,attrs:{shape:[T.shape[0],1,1]}});return y.push(A),A}return T};if(x&&S.push(_(o,c)),w&&S.push(_(s,c)),b){const T=n.makeTensorInfo([],"float32",Pc(p,"float32"));S.push(T),y.push(T)}return S};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))g=SQ({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else if(m.strideWidth<=2&&v==="channelsLast"&&le().getBool("WEBGL_EXP_CONV")){const S=d?_0(d,!0):null,_=new CQ(m,x,S,w,b),T=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=C();g=n.runWebGLProgram(_,E,"float32",T)}else if(le().getBool("WEBGL_CONV_IM2COL"))g=DQ({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else{const S=d?_0(d,!1):null,_=new bQ(m,x,S,w,b),T=C();g=n.runWebGLProgram(_,T,"float32")}const D=Ie({inputs:{x:g},backend:n,attrs:{shape:m.outShape}});return y.push(g),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),D}const hPe={kernelName:nC,backendName:"webgl",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:h,leakyreluAlpha:d}=r,p=[];let v=c;v==null&&(v=[1,1]),z(Qr(u,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${v}'`);const m=Or(i.shape,a.shape,u,v,l,f,!0),g=le().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,y=h?_0(h,g):null,x=[i,a],w=o!=null,b=s!=null,C=h==="leakyrelu";if(w&&x.push(o),b&&x.push(s),C){const T=n.makeTensorInfo([],"float32",Pc(d,"float32"));x.push(T),p.push(T)}let D;g?D=new EQ(m,w,y,b,C):D=new TQ(m,w,y,b,C);const S=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],_=n.runWebGLProgram(D,x,"float32",S);return p.forEach(T=>n.disposeIntermediateTensorInfo(T)),_}const pPe={kernelName:Ij,backendName:"webgl",kernelFunc:dPe};class vPe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=Yt(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=i.shape,o=a[a.length-1],s=he(r.shape),[u,l,c,f]=iF(r,i),h=Ie({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),d=Ie({inputs:{x:r},backend:n,attrs:{shape:[he(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const g=n.readSync(i.dataId),y=n.bufferSync(r),x=wRe(g,y,r.dtype,l,o,c,f,r.shape,s);return n.makeTensorInfo(u,r.dtype,x.values)}const p=new vPe(o,f,[l,c],r.shape),v=n.runWebGLProgram(p,[d,h],d.dtype),m=Ie({inputs:{x:v},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),m}const mPe={kernelName:hj,backendName:"webgl",kernelFunc:gPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yPe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Yt(this.rank),i=xPe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function xPe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r,u=St(o,i.shape)[0];if(le().get("DEBUG")){const y=n.readSync(a.dataId),x=i.shape[u];for(let w=0;w<y.length;++w){const b=y[w];z(b<=x-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${x-1}]`)}}const l=AF(i,a,u,s),c=he(a.shape),f=[],h=Ie({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),d=Ie({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(h),f.push(d);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const y=n.bufferSync(d),x=n.bufferSync(h),w=bRe(x,y,p);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(l.outputShape,w.dtype,w.values)}const v=new yPe(h.shape,p),m=n.runWebGLProgram(v,[h,d],h.dtype);f.push(m);const g=Ie({inputs:{x:m},backend:n,attrs:{shape:l.outputShape}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const wPe={kernelName:X2,backendName:"webgl",kernelFunc:IQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe="return float(a > b);",CPe=`
  return vec4(greaterThan(a, b));
`,SPe=Pr({opSnippet:bPe,packedOpSnippet:CPe,cpuKernelImpl:CRe,dtype:"bool"}),DPe={kernelName:K2,backendName:"webgl",kernelFunc:SPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe="return float(a >= b);",TPe=`
  return vec4(greaterThanEqual(a, b));
`,EPe=Pr({opSnippet:_Pe,packedOpSnippet:TPe,dtype:"bool",cpuKernelImpl:SRe}),APe={kernelName:Fy,backendName:"webgl",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPe(t){const{inputs:e,backend:n}=t,{input:r}=e;return kQ(r,!0,n)}const IPe={kernelName:ZM,backendName:"webgl",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe="return float(!isnan(x) && !isinf(x));",RPe=$t({opSnippet:NPe,dtype:"bool"}),$Pe={kernelName:Ly,backendName:"webgl",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe="return float(isinf(x));",OPe=$t({opSnippet:MPe,dtype:"bool"}),FPe={kernelName:zy,backendName:"webgl",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe="return float(isnan(x));",LPe=$t({opSnippet:PPe,dtype:"bool"}),zPe={kernelName:By,backendName:"webgl",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe="return float(a < b);",VPe=`
  return vec4(lessThan(a, b));
`,WPe=Pr({opSnippet:BPe,packedOpSnippet:VPe,cpuKernelImpl:DRe,dtype:"bool"}),UPe={kernelName:Z2,backendName:"webgl",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GPe="return float(a <= b);",HPe=`
  return vec4(lessThanEqual(a, b));
`,jPe=Pr({opSnippet:GPe,packedOpSnippet:HPe,cpuKernelImpl:_Re,dtype:"bool"}),qPe={kernelName:Q2,backendName:"webgl",kernelFunc:jPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=TRe(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const KPe={kernelName:dj,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YPe=Yv+`
  return x < 0.0 ? 0./0. : log(x);
`,ZPe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,QPe=$t({opSnippet:YPe,packedOpSnippet:ZPe,cpuKernelImpl:ERe}),JPe={kernelName:Vy,backendName:"webgl",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3e=Yv+`
  return log(1.0 + x);
`,t3e=$t({opSnippet:e3e}),n3e={kernelName:Wy,backendName:"webgl",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e="return float(a >= 1.0 && b >= 1.0);",i3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,a3e=Pr({opSnippet:r3e,packedOpSnippet:i3e,dtype:"bool"}),o3e={kernelName:J2,backendName:"webgl",kernelFunc:a3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e="return float(!(x >= 1.0));",u3e=$t({opSnippet:s3e}),l3e={kernelName:eD,backendName:"webgl",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e="return float(a >= 1.0 || b >= 1.0);",f3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,h3e=Pr({opSnippet:c3e,packedOpSnippet:f3e,dtype:"bool"}),d3e={kernelName:tD,backendName:"webgl",kernelFunc:h3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p3e{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${i}) * sum`;a===.5?u=`inversesqrt(${l})`:a===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3e{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${i}) * sum`;a===.5?u=`inversesqrt(${l})`:a===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:u}=r,l=le().getBool("WEBGL_PACK_NORMALIZATION")?new v3e(i.shape,a,o,s,u):new p3e(i.shape,a,o,s,u);return n.runWebGLProgram(l,[i],i.dtype)},m3e={kernelName:nD,backendName:"webgl",kernelFunc:g3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y3e{constructor(e,n,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:u,alpha:l,beta:c}=r,f=new y3e(i.shape,s,u,l,c);return n.runWebGLProgram(f,[i,a,o],i.dtype)},w3e={kernelName:JM,backendName:"webgl",kernelFunc:x3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t,e,n,r){const i=he(e),o=he(t.shape)/i,s=Ie({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),u=sd(s,t.dtype,"max",r),l=Ie({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,u=St(a,i.shape);let l=u;const c=Dn(l,s),f=c!=null,h=n.shouldExecuteOnCPU([i]);let d=i;if(f){if(h){const x=n.texData.get(d.dataId).values,w=new Array(s);for(let D=0;D<w.length;D++)w[D]=i.shape[c[D]];const b=cP(x,i.shape,i.dtype,c,w);d=n.makeTensorInfo(w,i.dtype);const C=n.texData.get(d.dataId);C.values=b}else d=n_(i,c,n);l=Bn(l.length,s)}Fr("max",l,s);const[p,v]=_r(d.shape,l);let m=p;o&&(m=Zn(p,u));let g;if(h){const x=n.texData.get(d.dataId).values,w=ARe(x,he(v),m,i.dtype);g=n.makeTensorInfo(m,i.dtype);const b=n.texData.get(g.dataId);b.values=w}else g=b3e(d,v,m,n);return f&&n.disposeIntermediateTensorInfo(d),g}const C3e={kernelName:rD,backendName:"webgl",kernelFunc:NQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e=fP+`
  return max(a, b);
`,D3e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+od+`
  return result;
`,_3e=Pr({opSnippet:S3e,packedOpSnippet:D3e,cpuKernelImpl:kRe}),T3e={kernelName:Uy,backendName:"webgl",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;I1(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;z(Qr(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Oo(i.shape,a,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&zt(c.inShape,c.outShape))return ga({inputs:{x:i},backend:n});const f=new T0(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const A3e={kernelName:iD,backendName:"webgl",kernelFunc:E3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=ol(i.shape,a,o,c,s,l,u),h=new dP(f,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const I3e={kernelName:aD,backendName:"webgl",kernelFunc:k3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N3e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,u=o-1-e.padInfo.left,l=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class R3e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],h=ol(o.shape,s,u,f,l,c),d=new dP(h,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),v=new R3e(h),m=n.runWebGLProgram(v,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}const M3e={kernelName:tO,backendName:"webgl",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;I1([a,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,h=Oo(s.shape,u,l,1,c,f),d=!0,p=new T0(h,"max",d),v=n.runWebGLProgram(p,[s],s.dtype),m=new N3e(h),g=n.runWebGLProgram(m,[i,v],s.dtype);return n.disposeIntermediateTensorInfo(v),g}const F3e={kernelName:eO,backendName:"webgl",kernelFunc:O3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t,e,n,r){let i=new T0(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new T0(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e={kernelName:pj,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,u=n;z(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];z(Qr(a,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${l}'`);const c=Oo(r.shape,i,a,l,o),[f,h]=P3e(r,s,c,u);return[f,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(t,e,n,r){const i=he(e),o=he(t.shape)/i,s=Ie({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),u=sd(s,"float32","mean",r),l=Ie({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e={kernelName:oD,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:a}=e,o=n,s=r.shape.length,u=St(a,r.shape);let l=u;const c=Dn(l,s),f=c!=null,h=o.shouldExecuteOnCPU([r]),d=[];let p=r;if(f){if(h){const w=o.texData.get(p.dataId).values,b=new Array(s);for(let S=0;S<b.length;S++)b[S]=r.shape[c[S]];const C=cP(w,r.shape,r.dtype,c,b);p=o.makeTensorInfo(b,r.dtype);const D=o.texData.get(p.dataId);D.values=C}else p=n_(r,c,o);d.push(p),l=Bn(l.length,s)}Fr("sum",l,s);const[v,m]=_r(p.shape,l);let g=v;i&&(g=Zn(v,u));const y=z3e(p,m,g,o);for(const x of d)o.disposeIntermediateTensorInfo(x);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=St(a,i.shape);let l=u;const c=Dn(l,s);let f=i;c!=null&&(f=xi({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Bn(l.length,i.shape.length)),Fr("min",l,s);const[h,d]=_r(f.shape,l),p=he(d),v=Ie({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=sd(v,v.dtype,"min",n);let g;if(o){const y=Zn(h,u);g=Ie({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=Ie({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const W3e={kernelName:sD,backendName:"webgl",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=fP+`
  return min(a, b);
`,G3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+od+`
  return result;
`,H3e=Pr({opSnippet:U3e,packedOpSnippet:G3e,cpuKernelImpl:IRe}),j3e={kernelName:Gy,backendName:"webgl",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,a=Yt(i),o=n.map(c=>c[0]).join(","),s=n.map((c,f)=>c[0]+e[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),l=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,v)=>p[0]+e[v]+p[1]);const i=e.length,a=Yt(i),o=n.map(p=>p[0]).join(","),s=n.map((p,v)=>p[0]+e[v]).join(","),u=di("rc",i),l=di("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,h=r==="reflect"?0:1;let d="";if(i===1){const p=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const p=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K3e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:a}=n,o=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X3e(r.shape,i,a):new q3e(r.shape,i,a);return e.runWebGLProgram(o,[r],r.dtype)},Y3e={kernelName:uD,backendName:"webgl",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,Q3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+od+`
  return result;
`,J3e=Pr({opSnippet:Z3e,packedOpSnippet:Q3e}),eLe={kernelName:Hy,backendName:"webgl",kernelFunc:J3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tLe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe=`
if (a == b) {
  return 1.0;
};
return a / b;`,rLe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,RQ=Pr({opSnippet:nLe,packedOpSnippet:rLe,checkOutOfBounds:!0}),iLe={kernelName:ky,backendName:"webgl",kernelFunc:RQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB="return a - b;",$Q=Pr({opSnippet:IB,packedOpSnippet:IB,supportsComplex:!0,cpuKernelImpl:ZRe}),aLe={kernelName:s1,backendName:"webgl",kernelFunc:$Q};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MQ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=St([a],i.shape),s=NQ({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=Zn(s.shape,o),l=Ie({inputs:{x:s},backend:n,attrs:{shape:u}}),c=$Q({inputs:{a:i,b:l},backend:n}),f=AQ({inputs:{x:c},backend:n}),h=r_({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),d=Ie({inputs:{x:h},backend:n,attrs:{shape:u}}),p=RQ({inputs:{a:f,b:d},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}const oLe={kernelName:TD,backendName:"webgl",kernelFunc:MQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sLe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r,u=s?i:MQ({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new tLe(l,c,a),h=[[o]],d=n.runWebGLProgram(f,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),d}const uLe={kernelName:vj,backendName:"webgl",kernelFunc:sLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe=Po+`
  return -x;
`,cLe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function fLe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[o,s]=RRe(a.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let i;return le().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Bl(r.shape,cLe):i=new Hs(r.shape,lLe),n.runWebGLProgram(i,[r],r.dtype)}const hLe={kernelName:lD,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=QO;function pLe(t){_a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=r,l=n.readSync(i.dataId),c=n.readSync(a.dataId),{selectedIndices:f}=dLe(l,c,o,s,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const vLe={kernelName:nO,backendName:"webgl",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe=JO;function mLe(t){_a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(i.dataId),f=n.readSync(a.dataId),{selectedIndices:h,validOutputs:d}=gLe(c,f,o,s,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const yLe={kernelName:rO,backendName:"webgl",kernelFunc:mLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xLe=eF;function wLe(t){_a("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(i.dataId),f=n.readSync(a.dataId),h=o,d=s,p=u,v=l,{selectedIndices:m,selectedScores:g}=xLe(c,f,h,d,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const bLe={kernelName:iO,backendName:"webgl",kernelFunc:wLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CLe{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SLe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:u}=r,l=he(i.shape),c=new CLe(l,o,s,u),f=Ie({inputs:{x:i},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(c,[f],a);n.disposeIntermediateTensorInfo(f);const d=[...i.shape,o],p=Ie({inputs:{x:h},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(h),p},DLe={kernelName:hD,backendName:"webgl",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IC(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=R1({inputs:{input:r},backend:n}),a=IC({inputs:{x:i},backend:n}),o=i_({inputs:{input:r},backend:n}),s=IC({inputs:{x:o},backend:n}),u=Hc({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return $1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const _Le={kernelName:kD,backendName:"webgl",kernelFunc:IC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=R1({inputs:{input:r},backend:n}),a=OQ({inputs:{x:i},backend:n}),o=i_({inputs:{input:r},backend:n}),s=IC({inputs:{x:o},backend:n}),u=Hc({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return $1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const TLe={kernelName:fD,backendName:"webgl",kernelFunc:OQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return rN({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(c=>{_M(a,c.shape,"All tensors passed to stack must have matching shapes"),z(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],u=e.map(c=>{const f=rN({inputs:{input:c},backend:n,attrs:{dim:i}});return s.push(f),f}),l=wQ({inputs:u,backend:n,attrs:{axis:i}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const ALe={kernelName:dD,backendName:"webgl",kernelFunc:ELe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kLe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const i=e.length,a=Yt(i),o=n.map(l=>l[0]).join(","),s=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ILe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,m)=>v[0]+e[m]+v[1]);const i=e.length,a=Yt(i),o=n.map(v=>v[0]).join(","),s=n.map((v,m)=>v[0]+e[m]).join(","),u=di("rc",i),l=di("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,h=[`${a} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${c}) {`],d=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let v=0,m=i===1?2:4;v<m;v++)p+=`
        ${h[v]}
        if (${d}) {
          result[${v}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${v}] = getChannel(getX(${l.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQ=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;if(he(i.shape)===0){const l=a.map((c,f)=>c[0]+i.shape[f]+c[1]);return $1({backend:n,attrs:{shape:l,value:o,dtype:i.dtype}})}const s=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ILe(i.shape,a,o):new kLe(i.shape,a,o),u=[[o]];return n.runWebGLProgram(s,[i],i.dtype,u)},NLe={kernelName:pD,backendName:"webgl",kernelFunc:FQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RLe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,$Le=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+od+`
  return result;
`,MLe=Pr({opSnippet:RLe,packedOpSnippet:$Le}),OLe={kernelName:qy,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=[],l=St(a,i.shape);let c=l;const f=Dn(c,s);let h=i;f!=null&&(h=xi({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Bn(c.length,s),u.push(h)),Fr("prod",c,s);let d;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:v,outShape:m,outDtype:g}=MRe(h.shape,h.dtype,p,c);d=n.makeTensorInfo(m,g,v)}else{const[p,v]=_r(h.shape,c),m=he(v),g=Ie({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),y=mO(i.dtype),x=sd(g,y,"prod",n);d=Ie({inputs:{x},backend:n,attrs:{shape:p}}),u.push(g),u.push(x)}if(o){u.push(d);const p=Zn(d.shape,l);d=Ie({inputs:{x:d},backend:n,attrs:{shape:p}})}return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const PLe={kernelName:gD,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,u=i.map(g=>n.readSync(g.dataId)),l=i.map(g=>g.shape),c=n.readSync(a.dataId),f=n.readSync(o.dataId),[h,d,p]=ORe(u,l,c,a.shape,a.dtype,f,o.shape,s),v=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,a.dtype,d);return v.concat([m])}const zLe={kernelName:gj,backendName:"webgl",kernelFunc:LLe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.readSync(r.dataId),s=n.readSync(i.dataId),u=n.readSync(a.dataId),[l,c]=FRe(o,r.shape,r.dtype,s,i.shape,u,a.shape),f=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const VLe={kernelName:mj,backendName:"webgl",kernelFunc:BLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:u}=r,l=n.readSync(i.dataId),c=n.readSync(a.dataId),f=n.readSync(o.dataId),h=s.map(m=>n.readSync(m.dataId)),d=s.map(m=>m.shape),[p,v]=PRe(l,i.shape,c,a.shape,a.dtype,f,o.shape,h,d,u);return n.makeTensorInfo(p,a.dtype,v)}const ULe={kernelName:yj,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:a,dtype:o}=n,s=LRe(r,i,a,o);return e.makeTensorInfo([s.length],o,s)},GLe={kernelName:aO,backendName:"webgl",kernelFunc:PQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe="return 1.0 / x;",jLe=$t({opSnippet:HLe}),qLe={kernelName:Xy,backendName:"webgl",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe=Po+`
  return (x < 0.0) ? 0.0 : x;
`,KLe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,YLe=$t({opSnippet:XLe,packedOpSnippet:KLe}),ZLe={kernelName:Ky,backendName:"webgl",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe=Po+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,JLe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,e4e=$t({opSnippet:QLe,packedOpSnippet:JLe}),t4e={kernelName:Yy,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n4e{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,n,r,l];const c=[i&&n>1?s-1:s,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;a?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r4e{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,n,r,l];const c=[i&&n>1?s-1:s,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;a?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[u,l]=s,c=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new r4e(i.shape,u,l,a,o):new n4e(i.shape,u,l,a,o);return n.runWebGLProgram(c,[i],"float32")}const a4e={kernelName:xD,backendName:"webgl",kernelFunc:i4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,u=[r&&o>1?i-1:i,r&&s>1?a-1:a],l=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,v=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new o4e(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const u4e={kernelName:uO,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l4e{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,n,r,l];const c=[i&&n>1?s-1:s,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c4e{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,n,r,l];const c=[i&&n>1?s-1:s,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[u,l]=s,c=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new c4e(i.shape,u,l,a,o):new l4e(i.shape,u,l,a,o);return n.runWebGLProgram(c,[i],i.dtype)}const h4e={kernelName:yD,backendName:"webgl",kernelFunc:f4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,u=[r&&o>1?i-1:i,r&&s>1?a-1:a],l=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,v=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new d4e(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const v4e={kernelName:sO,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g4e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,a=e.map((s,u)=>i(u)).join(","),o=Yt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m4e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=di("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Yt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${a}){
            result.g = ${l(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${a}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return h(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const v=e.map((y,x)=>d(x,p)),m=v.join(","),g=v.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${g}))`}function d(p,v){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${v[p]} - 1`:`${v[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r,o=i.shape.length,s=St(a,i.shape);if(o===0)return ga({inputs:{x:i},backend:n});const u=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new m4e(i.shape,s):new g4e(i.shape,s);return n.runWebGLProgram(u,[i],i.dtype)}const x4e={kernelName:wD,backendName:"webgl",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w4e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:vO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,u=new w4e(r.shape,a),[l,c]=hF(o,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,S4e=$t({opSnippet:C4e}),D4e={kernelName:Zy,backendName:"webgl",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e="return inversesqrt(x);",T4e=$t({opSnippet:_4e,cpuKernelImpl:zRe}),E4e={kernelName:Qy,backendName:"webgl",kernelFunc:T4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pP{constructor(e,n,r,i,a,o,s=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=Yt(a.length),c=Yt(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let v="";u&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A4e{constructor(e,n,r,i,a,o,s=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const l=Yt(a.length),c=Yt(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let v="";u&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=td(a,i,o),h=[f/l,l];if(f===0)return n.makeTensorInfo(o,i.dtype);const d=Ie({inputs:{x:i},backend:n,attrs:{shape:[u,s]}}),p=Ie({inputs:{x:a},backend:n,attrs:{shape:[u,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;le().getBool("WEBGL_PACK")?m=new A4e(u,s,d.shape.length,p.shape.length,c,h):m=new pP(u,s,d.shape.length,p.shape.length,c,h);const g=n.runWebGLProgram(m,[p,d,v],p.dtype),y=Ie({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),y}const I4e={kernelName:xj,backendName:"webgl",kernelFunc:k4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N4e{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=le().getNumber("WEBGL_VERSION")===2?a:o,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=new N4e(i.shape[0],i.shape[1],a.shape[1],o),u=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",u)}const $4e={kernelName:bj,backendName:"webgl",kernelFunc:R4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M4e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${s[c]}`),c<e&&u.push(`${s[c]}`);i=u.join(),a=l.join()}const o=Yt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e,o=new M4e(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],pa(i.dtype,a.dtype))}const F4e={kernelName:bD,backendName:"webgl",kernelFunc:O4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${BD};
  float scale = ${VD};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,L4e=$t({opSnippet:P4e}),z4e={kernelName:Jy,backendName:"webgl",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e=Yv+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,V4e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,W4e=$t({opSnippet:B4e,packedOpSnippet:V4e,cpuKernelImpl:VRe}),U4e={kernelName:r1,backendName:"webgl",kernelFunc:W4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,H4e=$t({opSnippet:G4e}),j4e={kernelName:n1,backendName:"webgl",kernelFunc:H4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e=Yv+`
  return sin(x);
`,X4e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${od}
  return result;
`,K4e=$t({opSnippet:q4e,packedOpSnippet:X4e}),Y4e={kernelName:e1,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Q4e=$t({opSnippet:Z4e}),J4e={kernelName:t1,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,tze=$t({opSnippet:eze}),nze={kernelName:i1,backendName:"webgl",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;z(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((g,y)=>g*y),u=[[0,0]];u.push(...o);for(let g=1+a.length;g<i.shape.length;++g)u.push([0,0]);const l=[],c=FQ({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=m1(c.shape,a,s,!1),h=y1(f.length,a.length,!1),d=x1(c.shape,a,s,!1),p=Ie({inputs:{x:c},backend:n,attrs:{shape:f}}),v=xi({inputs:{x:p},backend:n,attrs:{perm:h}}),m=Ie({inputs:{x:v},backend:n,attrs:{shape:d}});return l.push(c),l.push(p),l.push(v),l.forEach(g=>n.disposeIntermediateTensorInfo(g)),m},ize={kernelName:DD,backendName:"webgl",kernelFunc:rze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aze(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),u=n.readSync(i.dataId),l=n.readSync(a.dataId),c=n.readSync(o.dataId)[0],[f,h,d,p,v]=URe(s,r.shape,r.dtype,u,i.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const oze={kernelName:Cj,backendName:"webgl",kernelFunc:aze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sze(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(a.dataId)),[l,c,f]=GRe(s,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const uze={kernelName:Sj,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lze(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),u=n.readSync(a.dataId),[l,c]=sQ(o,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const cze={kernelName:Dj,backendName:"webgl",kernelFunc:lze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fze(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),u=n.readSync(a.dataId),[l,c]=sQ(o,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}const hze={kernelName:_j,backendName:"webgl",kernelFunc:fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dze(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=td(a,i,s),d=!1;if(a.dtype==="string"){const g=n.bufferSync(i),y=n.bufferSync(a),x=yc(n.readSync(o.dataId)[0]),w=BRe(g,y,s,h,c,l,u,f,x,d);return n.makeTensorInfo(s,w.dtype,w.values)}const p=new pP(l,u,i.shape.length,a.shape.length,f,[h,1],d),v=n.runWebGLProgram(p,[a,i,o],a.dtype),m=Ie({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(v),m}const pze={kernelName:Tj,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=St(o,i.shape)[0],u=EF(i,a,s),l=i.shape.length,c=new Array(l).fill(0),f=i.shape.slice();return u.map(h=>{const d=[...f];d[s]=h;const p=Zv({inputs:{x:i},backend:n,attrs:{begin:c,size:d}});return c[s]+=h,p})}const gze={kernelName:_D,backendName:"webgl",kernelFunc:vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NB="return sqrt(x);",mze=$t({opSnippet:NB,packedOpSnippet:NB,cpuKernelImpl:HRe}),yze={kernelName:a1,backendName:"webgl",kernelFunc:mze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze="return x * x;",wze=$t({opSnippet:xze}),bze={kernelName:lO,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RB="return (a - b) * (a - b);",Cze=Pr({opSnippet:RB,packedOpSnippet:RB}),Sze={kernelName:o1,backendName:"webgl",kernelFunc:Cze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),o=el(a),s=jRe(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}const _ze={kernelName:cO,backendName:"webgl",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tze({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Po+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Hs(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Eze={kernelName:f1,backendName:"webgl",kernelFunc:Tze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aze{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=Yt(r.length),o=Yt(r.length);let s="";if(i===1)s="coords * strides + begin";else{let u=0;s=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:w}=lF(i.shape,a,o,s,u,l,c,f,h);let b;if(v)b=Ie({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){z(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const D=oF(y,x,w),S=Zv({inputs:{x:i},backend:n,attrs:{begin:y,size:D}});b=Ie({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([i])){const S=n.readSync(i.dataId),_=Ct(i.shape,i.dtype,S),T=qRe(d,_,w,y);b=n.makeTensorInfo(p,i.dtype,T.values)}else{const S=new Aze(y,w,d);b=n.runWebGLProgram(S,[i],i.dtype)}const C=Ie({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),C}const Ize={kernelName:fO,backendName:"webgl",kernelFunc:kze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nze(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,h=n.readSync(c.dataId),d=n.readSync(f.dataId),[p,v]=XRe(h,d,i,a,o,s,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",v)]}const Rze={kernelName:Ej,backendName:"webgl",kernelFunc:Nze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(a.dataId),u=n.readSync(o.dataId)[0],[l,c,f]=KRe(s,u,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const Mze={kernelName:Aj,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(a.dataId),s=YRe(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const Fze={kernelName:kj,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pze="return tan(x);",Lze=$t({opSnippet:Pze}),zze={kernelName:u1,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bze=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Vze=$t({opSnippet:Bze}),Wze={kernelName:l1,backendName:"webgl",kernelFunc:Vze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uze(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:a,updates:o}=e,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=td(o,a,i.shape),h=[f/l,l];if(f===0)return n.makeTensorInfo(i.shape,a.dtype);const d=Ie({inputs:{x:a},backend:n,attrs:{shape:[u,s]}}),p=Ie({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),v=Ie({inputs:{x:i},backend:n,attrs:{shape:h}}),m=new pP(u,s,d.shape.length,p.shape.length,c,h,!1,!0),g=n.runWebGLProgram(m,[p,d,v],v.dtype),y=Ie({inputs:{x:g},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}const Gze={kernelName:wj,backendName:"webgl",kernelFunc:Uze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hze{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Yt(this.rank),a=jze(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function jze(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const u=n.readSync(i.dataId),l=i.dtype==="string"?u.map(h=>yc(h)):u,c=Ct(i.shape,i.dtype,l),f=QRe(c,a);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new Hze(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const qze={kernelName:c1,backendName:"webgl",kernelFunc:LQ};class Xze{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Kze{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jc(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function $B(t){let e=1;for(;e<t;)e*=2;return e}function Yze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r,s=le().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=le().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=i.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([i])||c<s||a>u){const T=n.readSync(i.dataId),[E,A]=JRe(T,l,i.dtype,a,o);return[n.makeTensorInfo(E.shape,E.dtype,E.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(a===0)return l[l.length-1]=0,[n.makeTensorInfo(l,i.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[i,$1({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const f=n.texData.get(i.dataId),h=f!==null&&f.isPacked,d=h?n.unpackTensor(i):i,v=he(l)/c,m=Ie({inputs:{x:d},attrs:{shape:[v,c]},backend:n});h&&Jc(n,d);const g=$B(a),y=$B(c);let x=null;const w=()=>x===null?[m,m]:[m,x],b=(T,E,A)=>{const N=w(),R=new Xze(A),$=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[T],[E]],L=x;x=n.runWebGLProgram(R,N,"int32",$),Jc(n,L)};for(let T=1;T<g;T*=2){const E=T*2;for(let A=T;A>=1;A/=2)b(E,A,[v,y])}for(let T=y;T>g;T/=2){const E=w(),A=new Kze([v,T/2]),R=[[c],[x===null?1:0],[g]],M=x;x=n.runWebGLProgram(A,E,"int32",R),Jc(n,M);const $=g/2,L=$*2;for(let O=$;O>=1;O/=2)b(L,O,x.shape)}let C=x;x=Zv({inputs:{x},backend:n,attrs:{begin:0,size:[v,a]}}),Jc(n,C);let D=IQ({inputs:{x:m,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Jc(n,m);const S=l.slice(0,-1);S.push(a),C=x,x=Ie({inputs:{x},attrs:{shape:S},backend:n}),Jc(n,C);const _=D;return D=Ie({inputs:{x:D},attrs:{shape:S},backend:n}),Jc(n,_),[D,x]}const Zze={kernelName:hO,backendName:"webgl",kernelFunc:Yze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qze{constructor(e,n,r,i,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:u,outputShape:l}=r,[c,f,h,d]=i.shape,[p,v]=l??[f,h],m=[c,p,v,d],g=new Qze(f,h,o,s,u,m);return n.runWebGLProgram(g,[i,a],"float32")}const e5e={kernelName:dO,backendName:"webgl",kernelFunc:Jze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;I1(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:u,indices:l}=e$e(o,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}const n5e={kernelName:pO,backendName:"webgl",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,u=i.shape[a],l=new Array(s-1);let c=0;for(let v=0;v<s;v++)v!==a&&(l[c++]=o.shape[v]);const f=[],h=new Array(s).fill(0),d=o.shape.slice();d[a]=1;const p=new Array(u);for(let v=0;v<p.length;v++){h[a]=v;const m=Zv({inputs:{x:o},backend:n,attrs:{begin:h,size:d}}),g=Ie({inputs:{x:m},backend:n,attrs:{shape:l}});p[v]=g,f.push(m)}return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const i5e={kernelName:ED,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a5e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/r);this.outputShape=[i,s];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let d="";a%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r,s=i.shape.length,u=[];let l=0;const c=Dn([l],s);let f=i;c!=null&&(f=xi({inputs:{x:i},backend:n,attrs:{perm:c}}),u.push(f),l=Bn(1,s)[0]);const h=bX(f.shape,l,o),d=he([f.shape[l]]),p=Ie({inputs:{x:f},backend:n,attrs:{shape:[-1,d]}});u.push(p);const v=mO(i.dtype),m=(w,b,C,D,S)=>{const _=w.shape[0],T=w.shape[1],E=wX(T,S),A={windowSize:E,inSize:T,batchSize:_,numSegments:S},N=new a5e(A,b),R=n.compileAndRun(N,[w,C],D);if(u.push(R),R.shape[1]===S)return R;const M=PQ({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),$=LQ({inputs:{x:M},backend:n,attrs:{reps:[T/E]}});return u.push(M),u.push($),m(R,b,$,D,S)},g=m(p,"unsortedSegmentSum",a,v,o),y=Ie({inputs:{x:g},backend:n,attrs:{shape:h}});let x=y;if(c!=null){u.push(y);const w=Bc(c);x=xi({inputs:{x},backend:n,attrs:{perm:w}})}return u.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const s5e={kernelName:AD,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e=[H$e,q$e,Y$e,J$e,tMe,iMe,oMe,uMe,hMe,pMe,mMe,wMe,SMe,EMe,IMe,RMe,MMe,LMe,BMe,WMe,jMe,JMe,tOe,aOe,sOe,dOe,vOe,xOe,A$e,COe,EOe,NOe,POe,BOe,WOe,GOe,jOe,YOe,JOe,nFe,iFe,oFe,uFe,fFe,dFe,mFe,xFe,CFe,_Fe,EFe,NFe,OFe,zFe,WFe,HFe,jFe,XFe,YFe,QFe,ePe,nPe,oPe,lPe,hPe,pPe,mPe,wPe,DPe,APe,E$e,IPe,_Oe,$Pe,FPe,zPe,I$e,UPe,qPe,KPe,JPe,n3e,o3e,l3e,d3e,m3e,w3e,C3e,T3e,A3e,I3e,M3e,F3e,L3e,B3e,W3e,j3e,Y3e,eLe,uLe,$$e,hLe,vLe,yLe,bLe,lOe,DLe,TLe,ALe,NLe,OLe,R$e,PLe,zLe,VLe,ULe,GLe,cOe,iLe,qLe,ZLe,t4e,O$e,a4e,u4e,h4e,v4e,x4e,b4e,D4e,E4e,I4e,$4e,F4e,z4e,U4e,j4e,Y4e,J4e,ZMe,oLe,nze,ize,oze,uze,cze,hze,pze,gze,yze,bze,Sze,_ze,Eze,Ize,Rze,Mze,Fze,aLe,W$e,zze,Wze,Gze,qze,Zze,e5e,U$e,n5e,i5e,s5e,_Le];for(const t of u5e)Nj(t);let Wx,Ux;const l5e=async()=>Ux||(Ux=await(await fetch("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/metadata.json")).json(),Ux),c5e=(t,e)=>t.map(n=>{if(n.length>e.max_len&&n.splice(0,n.length-e.max_len),n.length<e.max_len){const r=[];for(let i=0;i<e.max_len-n.length;++i)r.push(0);n=r.concat(n)}return n}),f5e=async()=>Wx||(Wx=await D2e("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json"),Wx),h5e=(t,e,n)=>{const i=t.trim().toLowerCase().replace(/(\.|,!)/g,"").split(" ").map(l=>{const c=n.word_index[l];return typeof c>"u"?2:c+n.index_from}),a=c5e([i],n),o=Kw(a,[1,n.max_len]),s=e.predict(o),u=s.dataSync()[0];return s.dispose(),u},d5e=t=>t>.5?"Positive":t>.3?"Neutral":"Negative";async function p5e(t,e,n){const r=await f5e(),i=await l5e();let a=[];const o=e+k2(5);t.forEach(u=>{let l={...u};l[o]=d5e(h5e(u[e],r,i)),a.push(l)});let s=[...n.cols];return s.splice(s.indexOf(e),0,o),{result:a,rowsAffected:a.length,cols:s}}const v5e={addPrefixSuffix:Bve,remove_duplicates:Vve,delete_column:Wve,remove_blanks:Uve,duplicate_column:Gve,find_and_replace:Hve,sentiment:p5e},g5e={},zQ=bM({name:"Toasts",initialState:g5e,reducers:{addToast:(t,e)=>{t[e.payload.id]=e.payload,setTimeout(()=>{delete t[e.payload.id]},e.payload.timeout||5e3)},removeToast:(t,e)=>{delete t[e.payload.id]}}}),{addToast:m5e,removeToast:y5e}=zQ.actions,x5e=zQ.reducer;function vP(t){const{col:e,type:n,options:r={}}=t;return async function(i,a){const o=a(),s=o.data.transformed,u=o.data.order,l=v5e[n];i(pi({path:"loader",value:!0})),setTimeout(async()=>{const c=await l(s,e,{...r,cols:u}),{rowsAffected:f,result:h,cols:d}=c;i(pve({type:n,col:e,rowsAffected:f})),f&&(i(Yu({path:"transformed",value:h})),d&&i(Yu({path:"order",value:d}))),i(m5e({id:k2(),message:`Transform ${n} completed. Affected ${f} rows.`})),i(pi({path:"loader",value:!1}))})}}const sp={addPrefixSuffix:"addPrefixSuffix",remove_duplicates:"remove_duplicates",delete_column:"delete_column",remove_blanks:"remove_blanks",duplicate_column:"duplicate_column",find_and_replace:"find_and_replace",sentiment:"sentiment"};function w5e(t){return Dr({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M16.499 1.843l-1.403-1.403c-0.566-0.566-1.555-0.566-2.122 0l-7.536 7.536-1.722 5.287 5.249-1.765 7.534-7.534c0.283-0.283 0.439-0.66 0.439-1.061s-0.156-0.777-0.439-1.060zM5.584 10.758l0.638-1.957 1.92 1.919-1.942 0.653-0.616-0.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zM11.525 3.303l0.729-0.729 2.11 2.11-0.729 0.729-2.11-2.11zM15.792 3.257l-0.72 0.721-2.11-2.11 0.72-0.721c0.19-0.189 0.519-0.189 0.707 0l1.403 1.403c0.094 0.095 0.146 0.22 0.146 0.354s-0.052 0.258-0.146 0.353zM15 7.5h1v9.5h-16v-15h7.5v1h-6.5v13h14v-8.5z"}}]})(t)}function b5e({col:t}){const e=Ga(),n=(a,o)=>e(vP({col:t,type:a,options:o})),r=a=>e(pi({path:a,value:{open:!0,col:t}})),i=()=>{e(Yu({path:"drawer",value:{open:!0,type:"profile",column:t}}))};return H.jsxs(dy,{role:"list",style:{maxHeight:"100vh",overflow:"auto",width:270},children:[H.jsx(Zp,{placeholder:"search options",leftIcon:"search",style:{marginBottom:5}}),H.jsx(Ze,{text:"Data profile",icon:H.jsx(Wz,{size:16}),onClick:i}),H.jsx(Ze,{text:"Extended data profile",icon:H.jsx(Wz,{size:16}),onClick:i}),H.jsx(kl,{title:"New Column"}),H.jsx(Ze,{icon:"duplicate",text:"Duplicate this column",onClick:()=>n(sp.duplicate_column)}),H.jsx(Ze,{text:"Insert column",icon:"add-column-right",onClick:i}),H.jsx(kl,{}),H.jsxs(Ze,{text:"Remove rows",icon:"remove",children:[H.jsx(kl,{title:"Select condition"}),H.jsx(Ze,{icon:"applications",text:"Duplicates",onClick:()=>n(sp.remove_duplicates)}),H.jsx(Ze,{icon:"cross",text:"Blanks",onClick:()=>n(sp.remove_blanks)}),H.jsx(Ze,{icon:"filter",text:"Specific values"}),H.jsx(Ze,{icon:"locate",text:"Custom"})]}),H.jsx(Ze,{icon:"search-text",text:"Find and replace",onClick:()=>r("findAndReplace")}),H.jsx(Ze,{icon:"regex",text:"Replace characters"}),H.jsx(Ze,{icon:"one-to-many",text:"Split text"}),H.jsx(Ze,{icon:"many-to-one",text:"Merge text"}),H.jsxs(Ze,{icon:"cut",text:"Trim",children:[H.jsx(kl,{title:"Select character"}),H.jsx(Ze,{text:"Whitespaces",icon:H.jsx(Rde,{size:16})}),H.jsx(Ze,{text:"Quotes",icon:H.jsx(Nde,{size:16})}),H.jsx(Ze,{text:"Remove Prefix",icon:H.jsx(H.Fragment,{children:"-a"})}),H.jsx(Ze,{text:"Remove Suffix",icon:H.jsx(H.Fragment,{children:"a-"})}),H.jsx(Ze,{text:"Custom",icon:H.jsx(H.Fragment,{children:"ab"})})]}),H.jsx(Ze,{icon:"new-link",text:"Add Prefix / Suffix",onClick:()=>r("prefixInput")}),H.jsxs(Ze,{icon:H.jsx(w5e,{size:16}),text:"Fill empty cells",children:[H.jsx(kl,{title:"Select value to fill with"}),H.jsx(Ze,{text:"Average"}),H.jsx(Ze,{text:"Moving average"}),H.jsx(Ze,{text:"Mode"}),H.jsx(Ze,{text:"Median"}),H.jsx(Ze,{text:"Previous Row"}),H.jsx(Ze,{text:"Next Row"})]}),H.jsxs(Ze,{icon:H.jsx(Lve,{size:16}),text:"Change case",children:[H.jsx(Ze,{text:"UPPERCASE"}),H.jsx(Ze,{text:"lowercase"}),H.jsx(Ze,{text:"camelCase"}),H.jsx(Ze,{text:"snake_case"}),H.jsx(Ze,{text:"Sentence case"})]}),H.jsx(Ze,{icon:"floating-point",text:"Round off"}),H.jsx(Ze,{icon:"lightning",text:"Advanced",children:H.jsx(Ze,{icon:H.jsx($de,{size:16}),text:"Extract keywords"})}),H.jsx(kl,{}),H.jsx(Ze,{icon:"trash",text:"Delete column",intent:jr.DANGER,onClick:()=>n(sp.delete_column)})]})}var gP={exports:{}},M1={},a_={exports:{}},BQ={};function VQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=VQ(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function hv(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=VQ(t))&&(r&&(r+=" "),r+=e);return r}const C5e=Object.freeze(Object.defineProperty({__proto__:null,clsx:hv,default:hv},Symbol.toStringTag,{value:"Module"})),S5e=fG(C5e);var Un={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.dontSetMe=A5e;gu.findInArray=D5e;gu.int=E5e;gu.isFunction=_5e;gu.isNum=T5e;function D5e(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function _5e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function T5e(t){return typeof t=="number"&&!isNaN(t)}function E5e(t){return parseInt(t,10)}function A5e(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.browserPrefixToKey=UQ;ud.browserPrefixToStyle=k5e;ud.default=void 0;ud.getPrefix=WQ;var mE=["Moz","Webkit","O","ms"];function WQ(){var t,e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var r=(t=window.document)===null||t===void 0||(e=t.documentElement)===null||e===void 0?void 0:e.style;if(!r||n in r)return"";for(var i=0;i<mE.length;i++)if(UQ(n,mE[i])in r)return mE[i];return""}function UQ(t,e){return e?"".concat(e).concat(I5e(t)):t}function k5e(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function I5e(t){for(var e="",n=!0,r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}var N5e=WQ();ud.default=N5e;function iN(t){"@babel/helpers - typeof";return iN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iN(t)}Object.defineProperty(Un,"__esModule",{value:!0});Un.addClassName=XQ;Un.addEvent=M5e;Un.addUserSelectStyles=H5e;Un.createCSSTransform=V5e;Un.createSVGTransform=W5e;Un.getTouch=U5e;Un.getTouchIdentifier=G5e;Un.getTranslation=mP;Un.innerHeight=L5e;Un.innerWidth=z5e;Un.matchesSelector=qQ;Un.matchesSelectorAndParentsTo=$5e;Un.offsetXYFromParent=B5e;Un.outerHeight=F5e;Un.outerWidth=P5e;Un.removeClassName=KQ;Un.removeEvent=O5e;Un.removeUserSelectStyles=j5e;var Na=gu,MB=R5e(ud);function GQ(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(GQ=function(i){return i?n:e})(t)}function R5e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||iN(t)!=="object"&&typeof t!="function")return{default:t};var n=GQ(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){jQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gx="";function qQ(t,e){return Gx||(Gx=(0,Na.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Na.isFunction)(t[n])})),(0,Na.isFunction)(t[Gx])?t[Gx](e):!1}function $5e(t,e,n){var r=t;do{if(qQ(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function M5e(t,e,n,r){if(t){var i=HQ({capture:!0},r);t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}}function O5e(t,e,n,r){if(t){var i=HQ({capture:!0},r);t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}}function F5e(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Na.int)(n.borderTopWidth),e+=(0,Na.int)(n.borderBottomWidth),e}function P5e(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Na.int)(n.borderLeftWidth),e+=(0,Na.int)(n.borderRightWidth),e}function L5e(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Na.int)(n.paddingTop),e-=(0,Na.int)(n.paddingBottom),e}function z5e(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Na.int)(n.paddingLeft),e-=(0,Na.int)(n.paddingRight),e}function B5e(t,e,n){var r=e===e.ownerDocument.body,i=r?{left:0,top:0}:e.getBoundingClientRect(),a=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:a,y:o}}function V5e(t,e){var n=mP(t,e,"px");return jQ({},(0,MB.browserPrefixToKey)("transform",MB.default),n)}function W5e(t,e){var n=mP(t,e,"");return n}function mP(t,e,n){var r=t.x,i=t.y,a="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){var o="".concat(typeof e.x=="string"?e.x:e.x+n),s="".concat(typeof e.y=="string"?e.y:e.y+n);a="translate(".concat(o,", ").concat(s,")")+a}return a}function U5e(t,e){return t.targetTouches&&(0,Na.findInArray)(t.targetTouches,function(n){return e===n.identifier})||t.changedTouches&&(0,Na.findInArray)(t.changedTouches,function(n){return e===n.identifier})}function G5e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function H5e(t){if(t){var e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&XQ(t.body,"react-draggable-transparent-selection")}}function j5e(t){if(t)try{if(t.body&&KQ(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{var e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function XQ(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function KQ(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.canDragX=K5e;mu.canDragY=Y5e;mu.createCoreData=Q5e;mu.createDraggableData=J5e;mu.getBoundPosition=q5e;mu.getControlPosition=Z5e;mu.snapToGrid=X5e;var Sa=gu,up=Un;function q5e(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r=typeof r=="string"?r:eBe(r);var i=yP(t);if(typeof r=="string"){var a=i.ownerDocument,o=a.defaultView,s;if(r==="parent"?s=i.parentNode:s=a.querySelector(r),!(s instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=s,l=o.getComputedStyle(i),c=o.getComputedStyle(u);r={left:-i.offsetLeft+(0,Sa.int)(c.paddingLeft)+(0,Sa.int)(l.marginLeft),top:-i.offsetTop+(0,Sa.int)(c.paddingTop)+(0,Sa.int)(l.marginTop),right:(0,up.innerWidth)(u)-(0,up.outerWidth)(i)-i.offsetLeft+(0,Sa.int)(c.paddingRight)-(0,Sa.int)(l.marginRight),bottom:(0,up.innerHeight)(u)-(0,up.outerHeight)(i)-i.offsetTop+(0,Sa.int)(c.paddingBottom)-(0,Sa.int)(l.marginBottom)}}return(0,Sa.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Sa.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Sa.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Sa.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function X5e(t,e,n){var r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function K5e(t){return t.props.axis==="both"||t.props.axis==="x"}function Y5e(t){return t.props.axis==="both"||t.props.axis==="y"}function Z5e(t,e,n){var r=typeof e=="number"?(0,up.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;var i=yP(n),a=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,up.offsetXYFromParent)(r||t,a,n.props.scale)}function Q5e(t,e,n){var r=t.state,i=!(0,Sa.isNum)(r.lastX),a=yP(t);return i?{node:a,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:a,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function J5e(t,e){var n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function eBe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function yP(t){var e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var o_={},s_={};Object.defineProperty(s_,"__esModule",{value:!0});s_.default=tBe;function tBe(){}function NC(t){"@babel/helpers - typeof";return NC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NC(t)}Object.defineProperty(o_,"__esModule",{value:!0});o_.default=void 0;var yE=rBe(B),Ca=xP(hy),nBe=xP(qu),ri=Un,dl=mu,xE=gu,Sg=xP(s_);function xP(t){return t&&t.__esModule?t:{default:t}}function YQ(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(YQ=function(i){return i?n:e})(t)}function rBe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||NC(t)!=="object"&&typeof t!="function")return{default:t};var n=YQ(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function FB(t,e){return sBe(t)||oBe(t,e)||aBe(t,e)||iBe()}function iBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aBe(t,e){if(t){if(typeof t=="string")return PB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PB(t,e)}}function PB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,s;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,s=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function sBe(t){if(Array.isArray(t))return t}function uBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lBe(t,e,n){return e&&LB(t.prototype,e),n&&LB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aN(t,e)}function aN(t,e){return aN=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},aN(t,e)}function fBe(t){var e=dBe();return function(){var r=RC(t),i;if(e){var a=RC(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return hBe(this,i)}}function hBe(t,e){if(e&&(NC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oi(t)}function oi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},RC(t)}function ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},pl=jo.mouse,u_=function(t){cBe(n,t);var e=fBe(n);function n(){var r;uBe(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),ro(oi(r),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),ro(oi(r),"mounted",!1),ro(oi(r),"handleDragStart",function(s){if(r.props.onMouseDown(s),!r.props.allowAnyClick&&typeof s.button=="number"&&s.button!==0)return!1;var u=r.findDOMNode();if(!u||!u.ownerDocument||!u.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var l=u.ownerDocument;if(!(r.props.disabled||!(s.target instanceof l.defaultView.Node)||r.props.handle&&!(0,ri.matchesSelectorAndParentsTo)(s.target,r.props.handle,u)||r.props.cancel&&(0,ri.matchesSelectorAndParentsTo)(s.target,r.props.cancel,u))){s.type==="touchstart"&&s.preventDefault();var c=(0,ri.getTouchIdentifier)(s);r.setState({touchIdentifier:c});var f=(0,dl.getControlPosition)(s,c,oi(r));if(f!=null){var h=f.x,d=f.y,p=(0,dl.createCoreData)(oi(r),h,d);(0,Sg.default)("DraggableCore: handleDragStart: %j",p),(0,Sg.default)("calling",r.props.onStart);var v=r.props.onStart(s,p);v===!1||r.mounted===!1||(r.props.enableUserSelectHack&&(0,ri.addUserSelectStyles)(l),r.setState({dragging:!0,lastX:h,lastY:d}),(0,ri.addEvent)(l,pl.move,r.handleDrag),(0,ri.addEvent)(l,pl.stop,r.handleDragStop))}}}),ro(oi(r),"handleDrag",function(s){var u=(0,dl.getControlPosition)(s,r.state.touchIdentifier,oi(r));if(u!=null){var l=u.x,c=u.y;if(Array.isArray(r.props.grid)){var f=l-r.state.lastX,h=c-r.state.lastY,d=(0,dl.snapToGrid)(r.props.grid,f,h),p=FB(d,2);if(f=p[0],h=p[1],!f&&!h)return;l=r.state.lastX+f,c=r.state.lastY+h}var v=(0,dl.createCoreData)(oi(r),l,c);(0,Sg.default)("DraggableCore: handleDrag: %j",v);var m=r.props.onDrag(s,v);if(m===!1||r.mounted===!1){try{r.handleDragStop(new MouseEvent("mouseup"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(g)}return}r.setState({lastX:l,lastY:c})}}),ro(oi(r),"handleDragStop",function(s){if(r.state.dragging){var u=(0,dl.getControlPosition)(s,r.state.touchIdentifier,oi(r));if(u!=null){var l=u.x,c=u.y;if(Array.isArray(r.props.grid)){var f=l-r.state.lastX||0,h=c-r.state.lastY||0,d=(0,dl.snapToGrid)(r.props.grid,f,h),p=FB(d,2);f=p[0],h=p[1],l=r.state.lastX+f,c=r.state.lastY+h}var v=(0,dl.createCoreData)(oi(r),l,c),m=r.props.onStop(s,v);if(m===!1||r.mounted===!1)return!1;var g=r.findDOMNode();g&&r.props.enableUserSelectHack&&(0,ri.removeUserSelectStyles)(g.ownerDocument),(0,Sg.default)("DraggableCore: handleDragStop: %j",v),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),g&&((0,Sg.default)("DraggableCore: Removing handlers"),(0,ri.removeEvent)(g.ownerDocument,pl.move,r.handleDrag),(0,ri.removeEvent)(g.ownerDocument,pl.stop,r.handleDragStop))}}}),ro(oi(r),"onMouseDown",function(s){return pl=jo.mouse,r.handleDragStart(s)}),ro(oi(r),"onMouseUp",function(s){return pl=jo.mouse,r.handleDragStop(s)}),ro(oi(r),"onTouchStart",function(s){return pl=jo.touch,r.handleDragStart(s)}),ro(oi(r),"onTouchEnd",function(s){return pl=jo.touch,r.handleDragStop(s)}),r}return lBe(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var i=this.findDOMNode();i&&(0,ri.addEvent)(i,jo.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.findDOMNode();if(i){var a=i.ownerDocument;(0,ri.removeEvent)(a,jo.mouse.move,this.handleDrag),(0,ri.removeEvent)(a,jo.touch.move,this.handleDrag),(0,ri.removeEvent)(a,jo.mouse.stop,this.handleDragStop),(0,ri.removeEvent)(a,jo.touch.stop,this.handleDragStop),(0,ri.removeEvent)(i,jo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ri.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){var i,a,o;return(i=this.props)!==null&&i!==void 0&&i.nodeRef?(a=this.props)===null||a===void 0||(o=a.nodeRef)===null||o===void 0?void 0:o.current:nBe.default.findDOMNode(this)}},{key:"render",value:function(){return yE.cloneElement(yE.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(yE.Component);o_.default=u_;ro(u_,"displayName","DraggableCore");ro(u_,"propTypes",{allowAnyClick:Ca.default.bool,disabled:Ca.default.bool,enableUserSelectHack:Ca.default.bool,offsetParent:function(e,n){if(e[n]&&e[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ca.default.arrayOf(Ca.default.number),handle:Ca.default.string,cancel:Ca.default.string,nodeRef:Ca.default.object,onStart:Ca.default.func,onDrag:Ca.default.func,onStop:Ca.default.func,onMouseDown:Ca.default.func,scale:Ca.default.number,className:xE.dontSetMe,style:xE.dontSetMe,transform:xE.dontSetMe});ro(u_,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){function e(P){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},e(P)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var n=p(B),r=h(hy),i=h(qu),a=h(S5e),o=Un,s=mu,u=gu,l=h(o_),c=h(s_),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function h(P){return P&&P.__esModule?P:{default:P}}function d(P){if(typeof WeakMap!="function")return null;var U=new WeakMap,j=new WeakMap;return(d=function(Y){return Y?j:U})(P)}function p(P,U){if(!U&&P&&P.__esModule)return P;if(P===null||e(P)!=="object"&&typeof P!="function")return{default:P};var j=d(U);if(j&&j.has(P))return j.get(P);var q={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in P)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(P,ne)){var ue=Y?Object.getOwnPropertyDescriptor(P,ne):null;ue&&(ue.get||ue.set)?Object.defineProperty(q,ne,ue):q[ne]=P[ne]}return q.default=P,j&&j.set(P,q),q}function v(){return v=Object.assign||function(P){for(var U=1;U<arguments.length;U++){var j=arguments[U];for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(P[q]=j[q])}return P},v.apply(this,arguments)}function m(P,U){if(P==null)return{};var j=g(P,U),q,Y;if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(P);for(Y=0;Y<ne.length;Y++)q=ne[Y],!(U.indexOf(q)>=0)&&Object.prototype.propertyIsEnumerable.call(P,q)&&(j[q]=P[q])}return j}function g(P,U){if(P==null)return{};var j={},q=Object.keys(P),Y,ne;for(ne=0;ne<q.length;ne++)Y=q[ne],!(U.indexOf(Y)>=0)&&(j[Y]=P[Y]);return j}function y(P,U){var j=Object.keys(P);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(P);U&&(q=q.filter(function(Y){return Object.getOwnPropertyDescriptor(P,Y).enumerable})),j.push.apply(j,q)}return j}function x(P){for(var U=1;U<arguments.length;U++){var j=arguments[U]!=null?arguments[U]:{};U%2?y(Object(j),!0).forEach(function(q){V(P,q,j[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(j)):y(Object(j)).forEach(function(q){Object.defineProperty(P,q,Object.getOwnPropertyDescriptor(j,q))})}return P}function w(P,U){return _(P)||S(P,U)||C(P,U)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(P,U){if(P){if(typeof P=="string")return D(P,U);var j=Object.prototype.toString.call(P).slice(8,-1);if(j==="Object"&&P.constructor&&(j=P.constructor.name),j==="Map"||j==="Set")return Array.from(P);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return D(P,U)}}function D(P,U){(U==null||U>P.length)&&(U=P.length);for(var j=0,q=new Array(U);j<U;j++)q[j]=P[j];return q}function S(P,U){var j=P==null?null:typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(j!=null){var q=[],Y=!0,ne=!1,ue,te;try{for(j=j.call(P);!(Y=(ue=j.next()).done)&&(q.push(ue.value),!(U&&q.length===U));Y=!0);}catch(oe){ne=!0,te=oe}finally{try{!Y&&j.return!=null&&j.return()}finally{if(ne)throw te}}return q}}function _(P){if(Array.isArray(P))return P}function T(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function E(P,U){for(var j=0;j<U.length;j++){var q=U[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(P,q.key,q)}}function A(P,U,j){return U&&E(P.prototype,U),j&&E(P,j),Object.defineProperty(P,"prototype",{writable:!1}),P}function N(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),U&&R(P,U)}function R(P,U){return R=Object.setPrototypeOf||function(q,Y){return q.__proto__=Y,q},R(P,U)}function M(P){var U=O();return function(){var q=F(P),Y;if(U){var ne=F(this).constructor;Y=Reflect.construct(q,arguments,ne)}else Y=q.apply(this,arguments);return $(this,Y)}}function $(P,U){if(U&&(e(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(P)}function L(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(P){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},F(P)}function V(P,U,j){return U in P?Object.defineProperty(P,U,{value:j,enumerable:!0,configurable:!0,writable:!0}):P[U]=j,P}var X=function(P){N(j,P);var U=M(j);function j(q){var Y;return T(this,j),Y=U.call(this,q),V(L(Y),"onDragStart",function(ne,ue){(0,c.default)("Draggable: onDragStart: %j",ue);var te=Y.props.onStart(ne,(0,s.createDraggableData)(L(Y),ue));if(te===!1)return!1;Y.setState({dragging:!0,dragged:!0})}),V(L(Y),"onDrag",function(ne,ue){if(!Y.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",ue);var te=(0,s.createDraggableData)(L(Y),ue),oe={x:te.x,y:te.y};if(Y.props.bounds){var ce=oe.x,pe=oe.y;oe.x+=Y.state.slackX,oe.y+=Y.state.slackY;var me=(0,s.getBoundPosition)(L(Y),oe.x,oe.y),_e=w(me,2),Ne=_e[0],ke=_e[1];oe.x=Ne,oe.y=ke,oe.slackX=Y.state.slackX+(ce-oe.x),oe.slackY=Y.state.slackY+(pe-oe.y),te.x=oe.x,te.y=oe.y,te.deltaX=oe.x-Y.state.x,te.deltaY=oe.y-Y.state.y}var Ve=Y.props.onDrag(ne,te);if(Ve===!1)return!1;Y.setState(oe)}),V(L(Y),"onDragStop",function(ne,ue){if(!Y.state.dragging)return!1;var te=Y.props.onStop(ne,(0,s.createDraggableData)(L(Y),ue));if(te===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",ue);var oe={dragging:!1,slackX:0,slackY:0},ce=!!Y.props.position;if(ce){var pe=Y.props.position,me=pe.x,_e=pe.y;oe.x=me,oe.y=_e}Y.setState(oe)}),Y.state={dragging:!1,dragged:!1,x:q.position?q.position.x:q.defaultPosition.x,y:q.position?q.position.y:q.defaultPosition.y,prevPropsPosition:x({},q.position),slackX:0,slackY:0,isElementSVG:!1},q.position&&!(q.onDrag||q.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Y}return A(j,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Y,ne,ue;return(Y=(ne=this.props)===null||ne===void 0||(ue=ne.nodeRef)===null||ue===void 0?void 0:ue.current)!==null&&Y!==void 0?Y:i.default.findDOMNode(this)}},{key:"render",value:function(){var Y,ne=this.props;ne.axis,ne.bounds;var ue=ne.children,te=ne.defaultPosition,oe=ne.defaultClassName,ce=ne.defaultClassNameDragging,pe=ne.defaultClassNameDragged,me=ne.position,_e=ne.positionOffset;ne.scale;var Ne=m(ne,f),ke={},Ve=null,je=!!me,ct=!je||this.state.dragging,rt=me||te,xt={x:(0,s.canDragX)(this)&&ct?this.state.x:rt.x,y:(0,s.canDragY)(this)&&ct?this.state.y:rt.y};this.state.isElementSVG?Ve=(0,o.createSVGTransform)(xt,_e):ke=(0,o.createCSSTransform)(xt,_e);var it=(0,a.default)(ue.props.className||"",oe,(Y={},V(Y,ce,this.state.dragging),V(Y,pe,this.state.dragged),Y));return n.createElement(l.default,v({},Ne,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(ue),{className:it,style:x(x({},ue.props.style),ke),transform:Ve}))}}],[{key:"getDerivedStateFromProps",value:function(Y,ne){var ue=Y.position,te=ne.prevPropsPosition;return ue&&(!te||ue.x!==te.x||ue.y!==te.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:ue,prevPropsPosition:te}),{x:ue.x,y:ue.y,prevPropsPosition:x({},ue)}):null}}]),j}(n.Component);t.default=X,V(X,"displayName","Draggable"),V(X,"propTypes",x(x({},l.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),V(X,"defaultProps",x(x({},l.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(BQ);var ZQ=BQ,QQ=ZQ.default,pBe=ZQ.DraggableCore;a_.exports=QQ;a_.exports.default=QQ;a_.exports.DraggableCore=pBe;var vBe=a_.exports,wP={};wP.__esModule=!0;wP.cloneElement=bBe;var gBe=mBe(B);function mBe(t){return t&&t.__esModule?t:{default:t}}function zB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(n),!0).forEach(function(r){yBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yBe(t,e,n){return e=xBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xBe(t){var e=wBe(t,"string");return typeof e=="symbol"?e:String(e)}function wBe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bBe(t,e){return e.style&&t.props.style&&(e.style=BB(BB({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),gBe.default.cloneElement(t,e)}var O1={};O1.__esModule=!0;O1.resizableProps=void 0;var gt=CBe(hy);function CBe(t){return t&&t.__esModule?t:{default:t}}var SBe={axis:gt.default.oneOf(["both","x","y","none"]),className:gt.default.string,children:gt.default.element.isRequired,draggableOpts:gt.default.shape({allowAnyClick:gt.default.bool,cancel:gt.default.string,children:gt.default.node,disabled:gt.default.bool,enableUserSelectHack:gt.default.bool,offsetParent:gt.default.node,grid:gt.default.arrayOf(gt.default.number),handle:gt.default.string,nodeRef:gt.default.object,onStart:gt.default.func,onDrag:gt.default.func,onStop:gt.default.func,onMouseDown:gt.default.func,scale:gt.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var a;return(a=gt.default.number).isRequired.apply(a,n)}return gt.default.number.apply(gt.default,n)},handle:gt.default.oneOfType([gt.default.node,gt.default.func]),handleSize:gt.default.arrayOf(gt.default.number),lockAspectRatio:gt.default.bool,maxConstraints:gt.default.arrayOf(gt.default.number),minConstraints:gt.default.arrayOf(gt.default.number),onResizeStop:gt.default.func,onResizeStart:gt.default.func,onResize:gt.default.func,resizeHandles:gt.default.arrayOf(gt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:gt.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var a;return(a=gt.default.number).isRequired.apply(a,n)}return gt.default.number.apply(gt.default,n)}};O1.resizableProps=SBe;M1.__esModule=!0;M1.default=void 0;var Dg=ABe(B),DBe=vBe,_Be=wP,TBe=O1,EBe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function JQ(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(JQ=function(i){return i?n:e})(t)}function ABe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=JQ(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oN.apply(this,arguments)}function kBe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function VB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(n),!0).forEach(function(r){IBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IBe(t,e,n){return e=NBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NBe(t){var e=RBe(t,"string");return typeof e=="symbol"?e:String(e)}function RBe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Be(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sN(t,e)}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sN(t,e)}var bP=function(t){$Be(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,a){var o=this.props,s=o.minConstraints,u=o.maxConstraints,l=o.lockAspectRatio;if(!s&&!u&&!l)return[i,a];if(l){var c=this.props.width/this.props.height,f=i-this.props.width,h=a-this.props.height;Math.abs(f)>Math.abs(h*c)?a=i/c:i=a*c}var d=i,p=a,v=this.slack||[0,0],m=v[0],g=v[1];return i+=m,a+=g,s&&(i=Math.max(s[0],i),a=Math.max(s[1],a)),u&&(i=Math.min(u[0],i),a=Math.min(u[1],a)),this.slack=[m+(d-i),g+(p-a)],[i,a]},n.resizeHandler=function(i,a){var o=this;return function(s,u){var l=u.node,c=u.deltaX,f=u.deltaY;i==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&a!=="n"&&a!=="s",d=(o.props.axis==="both"||o.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!h&&!d)){var p=a[0],v=a[a.length-1],m=l.getBoundingClientRect();if(o.lastHandleRect!=null){if(v==="w"){var g=m.left-o.lastHandleRect.left;c+=g}if(p==="n"){var y=m.top-o.lastHandleRect.top;f+=y}}o.lastHandleRect=m,v==="w"&&(c=-c),p==="n"&&(f=-f);var x=o.props.width+(h?c/o.props.transformScale:0),w=o.props.height+(d?f/o.props.transformScale:0),b=o.runConstraints(x,w);x=b[0],w=b[1];var C=x!==o.props.width||w!==o.props.height,D=typeof o.props[i]=="function"?o.props[i]:null,S=i==="onResize"&&!C;D&&!S&&(s.persist==null||s.persist(),D(s,{node:l,size:{width:x,height:w},handle:a})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,a){var o=this.props.handle;if(!o)return Dg.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:a});if(typeof o=="function")return o(i,a);var s=typeof o.type=="string",u=wE({ref:a},s?{}:{handleAxis:i});return Dg.cloneElement(o,u)},n.render=function(){var i=this,a=this.props,o=a.children,s=a.className,u=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var l=a.resizeHandles;a.transformScale;var c=kBe(a,EBe);return(0,_Be.cloneElement)(o,wE(wE({},c),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(o.props.children,l.map(function(f){var h,d=(h=i.handleRefs[f])!=null?h:i.handleRefs[f]=Dg.createRef();return Dg.createElement(DBe.DraggableCore,oN({},u,{nodeRef:d,key:"resizableHandle-"+f,onStop:i.resizeHandler("onResizeStop",f),onStart:i.resizeHandler("onResizeStart",f),onDrag:i.resizeHandler("onResize",f)}),i.renderResizeHandle(f,d))}))}))},e}(Dg.Component);M1.default=bP;bP.propTypes=TBe.resizableProps;bP.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var l_={};l_.__esModule=!0;l_.default=void 0;var bE=LBe(B),MBe=eJ(hy),OBe=eJ(M1),FBe=O1,PBe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function eJ(t){return t&&t.__esModule?t:{default:t}}function tJ(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(tJ=function(i){return i?n:e})(t)}function LBe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=tJ(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uN.apply(this,arguments)}function WB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $C(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(n),!0).forEach(function(r){zBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zBe(t,e,n){return e=BBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BBe(t){var e=VBe(t,"string");return typeof e=="symbol"?e:String(e)}function VBe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WBe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UBe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,lN(t,e)}function lN(t,e){return lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lN(t,e)}var nJ=function(t){UBe(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(s,u){var l=u.size;r.props.onResize?(s.persist==null||s.persist(),r.setState(l,function(){return r.props.onResize&&r.props.onResize(s,u)})):r.setState(l)},r}e.getDerivedStateFromProps=function(i,a){return a.propsWidth!==i.width||a.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,a=i.handle,o=i.handleSize;i.onResize;var s=i.onResizeStart,u=i.onResizeStop,l=i.draggableOpts,c=i.minConstraints,f=i.maxConstraints,h=i.lockAspectRatio,d=i.axis;i.width,i.height;var p=i.resizeHandles,v=i.style,m=i.transformScale,g=WBe(i,PBe);return bE.createElement(OBe.default,{axis:d,draggableOpts:l,handle:a,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:f,minConstraints:c,onResizeStart:s,onResize:this.onResize,onResizeStop:u,resizeHandles:p,transformScale:m,width:this.state.width},bE.createElement("div",uN({},g,{style:$C($C({},v),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(bE.Component);l_.default=nJ;nJ.propTypes=$C($C({},FBe.resizableProps),{},{children:MBe.default.element});gP.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};gP.exports.Resizable=M1.default;var GBe=gP.exports.ResizableBox=l_.default;var dn="-ms-",Im="-moz-",Ut="-webkit-",rJ="comm",c_="rule",CP="decl",HBe="@import",iJ="@keyframes",jBe="@layer",qBe=Math.abs,SP=String.fromCharCode,cN=Object.assign;function XBe(t,e){return Ar(t,0)^45?(((e<<2^Ar(t,0))<<2^Ar(t,1))<<2^Ar(t,2))<<2^Ar(t,3):0}function aJ(t){return t.trim()}function Eu(t,e){return(t=e.exec(t))?t[0]:t}function wt(t,e,n){return t.replace(e,n)}function Zw(t,e){return t.indexOf(e)}function Ar(t,e){return t.charCodeAt(e)|0}function dv(t,e,n){return t.slice(e,n)}function zs(t){return t.length}function oJ(t){return t.length}function om(t,e){return e.push(t),t}function KBe(t,e){return t.map(e).join("")}function UB(t,e){return t.filter(function(n){return!Eu(n,e)})}var f_=1,pv=1,sJ=0,ko=0,rr=0,Qv="";function h_(t,e,n,r,i,a,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:f_,column:pv,length:o,return:"",siblings:s}}function Dl(t,e){return cN(h_("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function yd(t){for(;t.root;)t=Dl(t.root,{children:[t]});om(t,t.siblings)}function YBe(){return rr}function ZBe(){return rr=ko>0?Ar(Qv,--ko):0,pv--,rr===10&&(pv=1,f_--),rr}function hs(){return rr=ko<sJ?Ar(Qv,ko++):0,pv++,rr===10&&(pv=1,f_++),rr}function ih(){return Ar(Qv,ko)}function Qw(){return ko}function d_(t,e){return dv(Qv,t,e)}function fN(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QBe(t){return f_=pv=1,sJ=zs(Qv=t),ko=0,[]}function JBe(t){return Qv="",t}function CE(t){return aJ(d_(ko-1,hN(t===91?t+2:t===40?t+1:t)))}function e8e(t){for(;(rr=ih())&&rr<33;)hs();return fN(t)>2||fN(rr)>3?"":" "}function t8e(t,e){for(;--e&&hs()&&!(rr<48||rr>102||rr>57&&rr<65||rr>70&&rr<97););return d_(t,Qw()+(e<6&&ih()==32&&hs()==32))}function hN(t){for(;hs();)switch(rr){case t:return ko;case 34:case 39:t!==34&&t!==39&&hN(rr);break;case 40:t===41&&hN(t);break;case 92:hs();break}return ko}function n8e(t,e){for(;hs()&&t+rr!==47+10;)if(t+rr===42+42&&ih()===47)break;return"/*"+d_(e,ko-1)+"*"+SP(t===47?t:hs())}function r8e(t){for(;!fN(ih());)hs();return d_(t,ko)}function i8e(t){return JBe(Jw("",null,null,null,[""],t=QBe(t),0,[0],t))}function Jw(t,e,n,r,i,a,o,s,u){for(var l=0,c=0,f=o,h=0,d=0,p=0,v=1,m=1,g=1,y=0,x="",w=i,b=a,C=r,D=x;m;)switch(p=y,y=hs()){case 40:if(p!=108&&Ar(D,f-1)==58){Zw(D+=wt(CE(y),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:D+=CE(y);break;case 9:case 10:case 13:case 32:D+=e8e(p);break;case 92:D+=t8e(Qw()-1,7);continue;case 47:switch(ih()){case 42:case 47:om(a8e(n8e(hs(),Qw()),e,n,u),u);break;default:D+="/"}break;case 123*v:s[l++]=zs(D)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:g==-1&&(D=wt(D,/\f/g,"")),d>0&&zs(D)-f&&om(d>32?HB(D+";",r,n,f-1,u):HB(wt(D," ","")+";",r,n,f-2,u),u);break;case 59:D+=";";default:if(om(C=GB(D,e,n,l,c,i,s,x,w=[],b=[],f,a),a),y===123)if(c===0)Jw(D,e,C,C,w,a,f,s,b);else switch(h===99&&Ar(D,3)===110?100:h){case 100:case 108:case 109:case 115:Jw(t,C,C,r&&om(GB(t,C,C,0,0,i,s,x,i,w=[],f,b),b),i,b,f,s,r?w:b);break;default:Jw(D,C,C,C,[""],b,0,s,b)}}l=c=d=0,v=g=1,x=D="",f=o;break;case 58:f=1+zs(D),d=p;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&ZBe()==125)continue}switch(D+=SP(y),y*v){case 38:g=c>0?1:(D+="\f",-1);break;case 44:s[l++]=(zs(D)-1)*g,g=1;break;case 64:ih()===45&&(D+=CE(hs())),h=ih(),c=f=zs(x=D+=r8e(Qw())),y++;break;case 45:p===45&&zs(D)==2&&(v=0)}}return a}function GB(t,e,n,r,i,a,o,s,u,l,c,f){for(var h=i-1,d=i===0?a:[""],p=oJ(d),v=0,m=0,g=0;v<r;++v)for(var y=0,x=dv(t,h+1,h=qBe(m=o[v])),w=t;y<p;++y)(w=aJ(m>0?d[y]+" "+x:wt(x,/&\f/g,d[y])))&&(u[g++]=w);return h_(t,e,n,i===0?c_:s,u,l,c,f)}function a8e(t,e,n,r){return h_(t,e,n,rJ,SP(YBe()),dv(t,2,-2),0,r)}function HB(t,e,n,r,i){return h_(t,e,n,CP,dv(t,0,r),dv(t,r+1,-1),r,i)}function uJ(t,e,n){switch(XBe(t,e)){case 5103:return Ut+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ut+t+t;case 4789:return Im+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ut+t+Im+t+dn+t+t;case 5936:switch(Ar(t,e+11)){case 114:return Ut+t+dn+wt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ut+t+dn+wt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ut+t+dn+wt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Ut+t+dn+t+t;case 6165:return Ut+t+dn+"flex-"+t+t;case 5187:return Ut+t+wt(t,/(\w+).+(:[^]+)/,Ut+"box-$1$2"+dn+"flex-$1$2")+t;case 5443:return Ut+t+dn+"flex-item-"+wt(t,/flex-|-self/g,"")+(Eu(t,/flex-|baseline/)?"":dn+"grid-row-"+wt(t,/flex-|-self/g,""))+t;case 4675:return Ut+t+dn+"flex-line-pack"+wt(t,/align-content|flex-|-self/g,"")+t;case 5548:return Ut+t+dn+wt(t,"shrink","negative")+t;case 5292:return Ut+t+dn+wt(t,"basis","preferred-size")+t;case 6060:return Ut+"box-"+wt(t,"-grow","")+Ut+t+dn+wt(t,"grow","positive")+t;case 4554:return Ut+wt(t,/([^-])(transform)/g,"$1"+Ut+"$2")+t;case 6187:return wt(wt(wt(t,/(zoom-|grab)/,Ut+"$1"),/(image-set)/,Ut+"$1"),t,"")+t;case 5495:case 3959:return wt(t,/(image-set\([^]*)/,Ut+"$1$`$1");case 4968:return wt(wt(t,/(.+:)(flex-)?(.*)/,Ut+"box-pack:$3"+dn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ut+t+t;case 4200:if(!Eu(t,/flex-|baseline/))return dn+"grid-column-align"+dv(t,e)+t;break;case 2592:case 3360:return dn+wt(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Eu(r.props,/grid-\w+-end/)})?~Zw(t+(n=n[e].value),"span")?t:dn+wt(t,"-start","")+t+dn+"grid-row-span:"+(~Zw(n,"span")?Eu(n,/\d+/):+Eu(n,/\d+/)-+Eu(t,/\d+/))+";":dn+wt(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Eu(r.props,/grid-\w+-start/)})?t:dn+wt(wt(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return wt(t,/(.+)-inline(.+)/,Ut+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zs(t)-1-e>6)switch(Ar(t,e+1)){case 109:if(Ar(t,e+4)!==45)break;case 102:return wt(t,/(.+:)(.+)-([^]+)/,"$1"+Ut+"$2-$3$1"+Im+(Ar(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Zw(t,"stretch")?uJ(wt(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return wt(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,a,o,s,u,l){return dn+i+":"+a+l+(o?dn+i+"-span:"+(s?u:+u-+a)+l:"")+t});case 4949:if(Ar(t,e+6)===121)return wt(t,":",":"+Ut)+t;break;case 6444:switch(Ar(t,Ar(t,14)===45?18:11)){case 120:return wt(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ut+(Ar(t,14)===45?"inline-":"")+"box$3$1"+Ut+"$2$3$1"+dn+"$2box$3")+t;case 100:return wt(t,":",":"+dn)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return wt(t,"scroll-","scroll-snap-")+t}return t}function MC(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function o8e(t,e,n,r){switch(t.type){case jBe:if(t.children.length)break;case HBe:case CP:return t.return=t.return||t.value;case rJ:return"";case iJ:return t.return=t.value+"{"+MC(t.children,r)+"}";case c_:if(!zs(t.value=t.props.join(",")))return""}return zs(n=MC(t.children,r))?t.return=t.value+"{"+n+"}":""}function s8e(t){var e=oJ(t);return function(n,r,i,a){for(var o="",s=0;s<e;s++)o+=t[s](n,r,i,a)||"";return o}}function u8e(t){return function(e){e.root||(e=e.return)&&t(e)}}function l8e(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case CP:t.return=uJ(t.value,t.length,n);return;case iJ:return MC([Dl(t,{value:wt(t.value,"@","@"+Ut)})],r);case c_:if(t.length)return KBe(n=t.props,function(i){switch(Eu(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":yd(Dl(t,{props:[wt(i,/:(read-\w+)/,":"+Im+"$1")]})),yd(Dl(t,{props:[i]})),cN(t,{props:UB(n,r)});break;case"::placeholder":yd(Dl(t,{props:[wt(i,/:(plac\w+)/,":"+Ut+"input-$1")]})),yd(Dl(t,{props:[wt(i,/:(plac\w+)/,":"+Im+"$1")]})),yd(Dl(t,{props:[wt(i,/:(plac\w+)/,dn+"input-$1")]})),yd(Dl(t,{props:[i]})),cN(t,{props:UB(n,r)});break}return""})}}var c8e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vv=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",DP=typeof window<"u"&&"HTMLElement"in window,f8e=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),p_=Object.freeze([]),gv=Object.freeze({});function h8e(t,e,n){return n===void 0&&(n=gv),t.theme!==n.theme&&t.theme||e||n.theme}var lJ=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),d8e=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,p8e=/(^-|-$)/g;function jB(t){return t.replace(d8e,"-").replace(p8e,"")}var v8e=/(a)(d)/gi,qB=function(t){return String.fromCharCode(t+(t>25?39:97))};function dN(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=qB(e%52)+n;return(qB(e%52)+n).replace(v8e,"$1-$2")}var SE,lp=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},cJ=function(t){return lp(5381,t)};function g8e(t){return dN(cJ(t)>>>0)}function m8e(t){return t.displayName||t.name||"Component"}function DE(t){return typeof t=="string"&&!0}var fJ=typeof Symbol=="function"&&Symbol.for,hJ=fJ?Symbol.for("react.memo"):60115,y8e=fJ?Symbol.for("react.forward_ref"):60112,x8e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},w8e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dJ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b8e=((SE={})[y8e]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SE[hJ]=dJ,SE);function XB(t){return("type"in(e=t)&&e.type.$$typeof)===hJ?dJ:"$$typeof"in t?b8e[t.$$typeof]:x8e;var e}var C8e=Object.defineProperty,S8e=Object.getOwnPropertyNames,KB=Object.getOwnPropertySymbols,D8e=Object.getOwnPropertyDescriptor,_8e=Object.getPrototypeOf,YB=Object.prototype;function pJ(t,e,n){if(typeof e!="string"){if(YB){var r=_8e(e);r&&r!==YB&&pJ(t,r,n)}var i=S8e(e);KB&&(i=i.concat(KB(e)));for(var a=XB(t),o=XB(e),s=0;s<i.length;++s){var u=i[s];if(!(u in w8e||n&&n[u]||o&&u in o||a&&u in a)){var l=D8e(e,u);try{C8e(t,u,l)}catch{}}}}return t}function mv(t){return typeof t=="function"}function _P(t){return typeof t=="object"&&"styledComponentId"in t}function Hf(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function ZB(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e?e+t[r]:t[r];return n}function A0(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function pN(t,e,n){if(n===void 0&&(n=!1),!n&&!A0(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=pN(t[r],e[r]);else if(A0(e))for(var r in e)t[r]=pN(t[r],e[r]);return t}function TP(t,e){Object.defineProperty(t,"toString",{value:e})}function F1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var T8e=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,a=i;e>=a;)if((a<<=1)<0)throw F1(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var o=i;o<a;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(s,n[o])&&(this.groupSizes[e]++,s++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var a=r;a<i;a++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),a=i+r,o=i;o<a;o++)n+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return n},t}(),eb=new Map,OC=new Map,_E=1,Hx=function(t){if(eb.has(t))return eb.get(t);for(;OC.has(_E);)_E++;var e=_E++;return eb.set(t,e),OC.set(e,t),e},E8e=function(t,e){eb.set(t,e),OC.set(e,t)},A8e="style[".concat(vv,"][").concat("data-styled-version",'="').concat("6.0.2",'"]'),k8e=new RegExp("^".concat(vv,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),I8e=function(t,e,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&t.registerName(e,r)},N8e=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(`/*!sc*/
`),i=[],a=0,o=r.length;a<o;a++){var s=r[a].trim();if(s){var u=s.match(k8e);if(u){var l=0|parseInt(u[1],10),c=u[2];l!==0&&(E8e(c,l),I8e(t,c,u[3]),t.getTag().insertRules(l,i)),i.length=0}else i.push(s)}}};function R8e(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var vJ=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(s){var u=Array.from(s.querySelectorAll("style[".concat(vv,"]")));return u[u.length-1]}(n),a=i!==void 0?i.nextSibling:null;r.setAttribute(vv,"active"),r.setAttribute("data-styled-version","6.0.2");var o=R8e();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},$8e=function(){function t(e){this.element=vJ(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,a=r.length;i<a;i++){var o=r[i];if(o.ownerNode===n)return o}throw F1(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),M8e=function(){function t(e){this.element=vJ(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),O8e=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),QB=DP,F8e={isServer:!DP,useCSSOMInjection:!f8e},gJ=function(){function t(e,n,r){e===void 0&&(e=gv),n===void 0&&(n={});var i=this;this.options=xe(xe({},F8e),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&DP&&QB&&(QB=!1,function(a){for(var o=document.querySelectorAll(A8e),s=0,u=o.length;s<u;s++){var l=o[s];l&&l.getAttribute(vv)!=="active"&&(N8e(a,l),l.parentNode&&l.parentNode.removeChild(l))}}(this)),TP(this,function(){return function(a){for(var o=a.getTag(),s=o.length,u="",l=function(f){var h=function(g){return OC.get(g)}(f);if(h===void 0)return"continue";var d=a.names.get(h),p=o.getGroup(f);if(d===void 0||p.length===0)return"continue";var v="".concat(vv,".g").concat(f,'[id="').concat(h,'"]'),m="";d!==void 0&&d.forEach(function(g){g.length>0&&(m+="".concat(g,","))}),u+="".concat(p).concat(v,'{content:"').concat(m,'"}').concat(`/*!sc*/
`)},c=0;c<s;c++)l(c);return u}(i)})}return t.registerId=function(e){return Hx(e)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(xe(xe({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new O8e(i):r?new $8e(i):new M8e(i)}(this.options),new T8e(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Hx(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Hx(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Hx(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),P8e=/&/g,L8e=/^\s*\/\/.*$/gm;function mJ(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=mJ(n.children,e)),n})}function z8e(t){var e,n,r,i=t===void 0?gv:t,a=i.options,o=a===void 0?gv:a,s=i.plugins,u=s===void 0?p_:s,l=function(h,d,p){return p===n||p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):h},c=u.slice();c.push(function(h){h.type===c_&&h.value.includes("&")&&(h.props[0]=h.props[0].replace(P8e,n).replace(r,l))}),o.prefix&&c.push(l8e),c.push(o8e);var f=function(h,d,p,v){d===void 0&&(d=""),p===void 0&&(p=""),v===void 0&&(v="&"),e=v,n=d,r=new RegExp("\\".concat(n,"\\b"),"g");var m=h.replace(L8e,""),g=i8e(p||d?"".concat(p," ").concat(d," { ").concat(m," }"):m);o.namespace&&(g=mJ(g,o.namespace));var y=[];return MC(g,s8e(c.concat(u8e(function(x){return y.push(x)})))),y};return f.hash=u.length?u.reduce(function(h,d){return d.name||F1(15),lp(h,d.name)},5381).toString():"",f}var B8e=new gJ,vN=z8e(),yJ=Cn.createContext({shouldForwardProp:void 0,styleSheet:B8e,stylis:vN});yJ.Consumer;Cn.createContext(void 0);function JB(){return B.useContext(yJ)}var V8e=function(){function t(e,n){var r=this;this.inject=function(i,a){a===void 0&&(a=vN);var o=r.name+a.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,a(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,TP(this,function(){throw F1(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=vN),this.name+e.hash},t}(),W8e=function(t){return t>="A"&&t<="Z"};function e8(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;W8e(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var xJ=function(t){return t==null||t===!1||t===""},wJ=function(t){var e,n,r=[];for(var i in t){var a=t[i];t.hasOwnProperty(i)&&!xJ(a)&&(Array.isArray(a)&&a.isCss||mv(a)?r.push("".concat(e8(i),":"),a,";"):A0(a)?r.push.apply(r,Qf(Qf(["".concat(i," {")],wJ(a),!1),["}"],!1)):r.push("".concat(e8(i),": ").concat((e=i,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in c8e||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function ah(t,e,n,r){if(xJ(t))return[];if(_P(t))return[".".concat(t.styledComponentId)];if(mv(t)){if(!mv(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var i=t(e);return ah(i,e,n,r)}var a;return t instanceof V8e?n?(t.inject(n,r),[t.getName(r)]):[t]:A0(t)?wJ(t):Array.isArray(t)?Array.prototype.concat.apply(p_,t.map(function(o){return ah(o,e,n,r)})):[t.toString()]}function U8e(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(mv(n)&&!_P(n))return!1}return!0}var G8e=cJ("6.0.2"),H8e=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&U8e(e),this.componentId=n,this.baseHash=lp(G8e,n),this.baseStyle=r,gJ.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Hf(i,this.staticRulesId);else{var a=ZB(ah(this.rules,e,n,r)),o=dN(lp(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,o)){var s=r(a,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,s)}i=Hf(i,o),this.staticRulesId=o}else{for(var u=lp(this.baseHash,r.hash),l="",c=0;c<this.rules.length;c++){var f=this.rules[c];if(typeof f=="string")l+=f;else if(f){var h=ZB(ah(f,e,n,r));u=lp(u,h),l+=h}}if(l){var d=dN(u>>>0);n.hasNameForId(this.componentId,d)||n.insertRules(this.componentId,d,r(l,".".concat(d),void 0,this.componentId)),i=Hf(i,d)}}return i},t}(),bJ=Cn.createContext(void 0);bJ.Consumer;var TE={};function j8e(t,e,n){var r=_P(t),i=t,a=!DE(t),o=e.attrs,s=o===void 0?p_:o,u=e.componentId,l=u===void 0?function(x,w){var b=typeof x!="string"?"sc":jB(x);TE[b]=(TE[b]||0)+1;var C="".concat(b,"-").concat(g8e("6.0.2"+b+TE[b]));return w?"".concat(w,"-").concat(C):C}(e.displayName,e.parentComponentId):u,c=e.displayName;c===void 0&&function(x){return DE(x)?"styled.".concat(x):"Styled(".concat(m8e(x),")")}(t);var f=e.displayName&&e.componentId?"".concat(jB(e.displayName),"-").concat(e.componentId):e.componentId||l,h=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,d=e.shouldForwardProp;if(r&&i.shouldForwardProp){var p=i.shouldForwardProp;if(e.shouldForwardProp){var v=e.shouldForwardProp;d=function(x,w){return p(x,w)&&v(x,w)}}else d=p}var m=new H8e(n,f,r?i.componentStyle:void 0);function g(x,w){return function(b,C,D){var S=b.attrs,_=b.componentStyle,T=b.defaultProps,E=b.foldedComponentIds,A=b.styledComponentId,N=b.target,R=Cn.useContext(bJ),M=JB(),$=b.shouldForwardProp||M.shouldForwardProp,L=function(U,j,q){for(var Y,ne=xe(xe({},j),{className:void 0,theme:q}),ue=0;ue<U.length;ue+=1){var te=mv(Y=U[ue])?Y(ne):Y;for(var oe in te)ne[oe]=oe==="className"?Hf(ne[oe],te[oe]):oe==="style"?xe(xe({},ne[oe]),te[oe]):te[oe]}return j.className&&(ne.className=Hf(ne.className,j.className)),ne}(S,C,h8e(C,R,T)||gv),O=L.as||N,F={};for(var V in L)L[V]===void 0||V[0]==="$"||V==="as"||V==="theme"||(V==="forwardedAs"?F.as=L.forwardedAs:$&&!$(V,O)||(F[V]=L[V]));var X=function(U,j){var q=JB(),Y=U.generateAndInjectStyles(j,q.styleSheet,q.stylis);return Y}(_,L),P=Hf(E,A);return X&&(P+=" "+X),L.className&&(P+=" "+L.className),F[DE(O)&&!lJ.has(O)?"class":"className"]=P,F.ref=D,B.createElement(O,F)}(y,x,w)}var y=Cn.forwardRef(g);return y.attrs=h,y.componentStyle=m,y.shouldForwardProp=d,y.foldedComponentIds=r?Hf(i.foldedComponentIds,i.styledComponentId):"",y.styledComponentId=f,y.target=r?i.target:t,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(w){for(var b=[],C=1;C<arguments.length;C++)b[C-1]=arguments[C];for(var D=0,S=b;D<S.length;D++)pN(w,S[D],!0);return w}({},i.defaultProps,x):x}}),TP(y,function(){return".".concat(y.styledComponentId)}),a&&pJ(y,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function t8(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var n8=function(t){return Object.assign(t,{isCss:!0})};function q8e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mv(t)||A0(t)){var r=t;return n8(ah(t8(p_,Qf([r],e,!0))))}var i=t;return e.length===0&&i.length===1&&typeof i[0]=="string"?ah(i):n8(ah(t8(i,e)))}function gN(t,e,n){if(n===void 0&&(n=gv),!e)throw F1(1,e);var r=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return t(e,n,q8e.apply(void 0,Qf([i],a,!1)))};return r.attrs=function(i){return gN(t,e,xe(xe({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return gN(t,e,xe(xe({},n),i))},r}var CJ=function(t){return gN(j8e,t)},v_=CJ;lJ.forEach(function(t){v_[t]=CJ(t)});function SJ(t){return Dr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 8h2V6h3.252L7.68 18H5v2h8v-2h-2.252L13.32 6H17v2h2V4H5z"}}]})(t)}const X8e={number:tj,string:SJ,date:ej},K8e=({col:t,type:e})=>H.jsxs(dy,{children:[H.jsx(kl,{title:"Data Type"}),H.jsx(Ze,{text:"Number",icon:H.jsx(tj,{size:16}),active:e==="number"}),H.jsx(Ze,{text:"Date",icon:H.jsx(ej,{size:16,active:e==="date"})}),H.jsx(Ze,{text:"Text / categorical",icon:H.jsx(SJ,{size:16}),active:e==="string"})]});function Y8e({col:t}){const e=mi(r=>{var i;return((i=r.data.details[t])==null?void 0:i.type)||"string"}),n=X8e[e];return console.log(e),t==="DataPrepIndex"?H.jsx(H.Fragment,{}):H.jsxs("div",{className:"fcc",style:{justifyContent:"start",height:30,lineHeight:"30px",width:"calc(100% - 20px)"},children:[H.jsx(Xh,{minimal:!0,position:"bottom-left",content:H.jsx(K8e,{col:t,type:e}),className:"fcc",children:H.jsx("div",{className:"data-type fcc",children:H.jsx(n,{size:13})})}),H.jsx("div",{className:"ellipsis col-name",children:t})]})}const EP=nve({reducer:{data:gve,appState:yve,toasts:x5e},middleware:t=>t({immutableCheck:!1,serializableCheck:!1})}),EE=t=>typeof t=="number"?!0:typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t)),r8=t=>!0,Z8e=t=>!1,AE={number:EE,string:r8,text:r8,int:EE,float:EE,date:Z8e};async function Q8e(t){const e=EP.getState(),{transformed:n,details:r}=e.data,{type:i}=r[t],a=AE[i]||(AE[i]=()=>!1);let o=0,s=0,u=0;return n.forEach(l=>{const c=l[t];c===""?s++:a(c)?o++:u++}),{valid:o,missing:s,invalid:u}}const J8e=v_.div`
    width: 300px;
    padding: 10px;
    background: var(--bg);
    opacity: ${t=>t.loading?.5:1};
    .group {
        margin-top: 10px;
    }
    .label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
    }
    *,
    .bp5-progress-bar * {
        border-radius: 0;
    }
`,e6e=({col:t="",quality:e={},loading:n=!1})=>{const{valid:r=0,invalid:i=0,missing:a=0}=e,o=[{label:"Valid",value:r,intent:jr.PRIMARY},{label:"Invalid",value:i,intent:jr.DANGER},{label:"Missing",value:a,intent:jr.NONE}],s=r+i+a||1;return H.jsxs(J8e,{loading:n,children:[H.jsx("b",{children:"Data Quality"}),H.jsx("div",{children:o.map(u=>H.jsxs("div",{className:"group",children:[H.jsxs("div",{className:"label",children:[H.jsx("div",{children:u.label}),H.jsxs("div",{children:[u.value," (~",(u.value*100/s).toFixed(2),"%)"]})]}),H.jsx(Dde,{animate:!1,value:u.value/s,intent:u.intent})]},u.label))})]})};function t6e({col:t}){const[e,n]=B.useState({}),[r,i]=B.useState(!1);if(t==="DataPrepIndex")return H.jsx(H.Fragment,{});const a=()=>{i(!0),setTimeout(()=>{Q8e(t).then(l=>{n(l)}).finally(()=>i(!1))},1e3)},o=r?QS:Do,s="tick",u=jr.PRIMARY;return H.jsx(Xh,{onOpened:a,content:H.jsx(e6e,{col:t,quality:e,loading:r}),minimal:!0,placement:"bottom-start",children:H.jsx(o,{icon:s,intent:u,size:16})})}const n6e=v_.div`
    width: ${t=>t.width}px;
    position: relative;
`;function r6e({columns:t=[],sizes:e={}}){const n=Ga(),r=(o,s,u)=>{n(pi({path:"placeholder.x",value:u.x}))},i=(o,s,u)=>{n(Yu({path:`sizes.${o}`,value:s.size.width})),n(pi({path:"placeholder.visible",value:!1}))},a=o=>n(pi({path:"activeCol",value:o}));return H.jsx("div",{className:"sk-header",children:t.map(o=>H.jsx(n6e,{width:e[o]??150,className:"header-cell fill",children:H.jsx(mH,{content:H.jsx(b5e,{col:o}),className:"fill",children:H.jsx(GBe,{className:"fill",width:e[o]??150,height:30,minConstraints:[40,0],resizeHandles:["e"],onResize:(s,u)=>r(o,u,s),onResizeStart:s=>n(pi({path:"placeholder",value:{visible:!0,x:s.x}})),onResizeStop:(s,u)=>i(o,u),children:H.jsxs("div",{onClick:()=>a(o),className:"column-title",children:[H.jsx(Y8e,{col:o}),H.jsx(t6e,{col:o})]})})})},o))})}function i6e(){const{visible:t,x:e}=mi(n=>n.appState.placeholder);return!t||!e?H.jsx(H.Fragment,{}):H.jsx("div",{className:"drag-placeholder",style:{left:e,top:0}})}const a6e=({columnIndex:t,rowIndex:e,style:n,data:r})=>{const i=Ga(),a=r.rows[e],o=r.columns[t];let s=a[o];t===0&&(s=e+1);const u=l=>{let c=l.target.textContent;i(vve({rowIndex:e,col:o,value:c}))};return H.jsx("div",{style:n,contentEditable:t>0,suppressContentEditableWarning:!0,className:hv("sk-cell",!t&&"serial-no"),spellCheck:!1,onBlur:u,children:s})};function o6e(t,e){const n=B.useRef();return B.useEffect(()=>{n.current&&n.current.resetAfterIndices({columnIndex:0,rowIndex:0,shouldForceUpdate:!0})},[t,e]),n}const s6e=({rows:t=[],columns:e=[],sizes:n={}})=>{const r=o6e(n,e),i=B.useRef(),a=B.useRef(),{ref:o,width:s,height:u}=JH(),l=h=>{i.current.scrollLeft=h.scrollLeft,h.verticalScrollDirection==="forward"&&a.current.scrollHeight-a.current.scrollTop===a.current.clientHeight&&console.log("bottom reached")},c=h=>{i.current.style.overflow=h},f=h=>n[e[h]]??150;return H.jsxs("div",{className:"sk wrapper",ref:o,children:[H.jsx("div",{className:"header",ref:i,style:{minWidth:s},onScrollCapture:()=>c("auto"),onScroll:()=>c("hidden"),children:H.jsx(r6e,{columns:e,sizes:n})}),H.jsx(Rve,{ref:r,outerRef:a,className:"sk-grid",columnCount:e.length,columnWidth:f,height:u-30,rowCount:t.length,rowHeight:()=>26,width:s,onScroll:l,itemData:{rows:t,columns:e},children:a6e}),H.jsx(i6e,{})]})};var DJ={},u6e=bo&&bo.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_J=bo&&bo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(DJ,"__esModule",{value:!0});var Za=_J(hy),kE=_J(B),l6e=function(t){u6e(e,t);function e(n){var r=t.call(this,n)||this;return r.resetDragging=function(){r.frameDragCounter=0,r.setState({draggingOverFrame:!1,draggingOverTarget:!1})},r.handleWindowDragOverOrDrop=function(i){i.preventDefault()},r.handleFrameDrag=function(i){if(e.eventHasFiles(i)){if(r.frameDragCounter+=i.type==="dragenter"?1:-1,r.frameDragCounter===1){r.setState({draggingOverFrame:!0}),r.props.onFrameDragEnter&&r.props.onFrameDragEnter(i);return}if(r.frameDragCounter===0){r.setState({draggingOverFrame:!1}),r.props.onFrameDragLeave&&r.props.onFrameDragLeave(i);return}}},r.handleFrameDrop=function(i){r.state.draggingOverTarget||(r.resetDragging(),r.props.onFrameDrop&&r.props.onFrameDrop(i))},r.handleDragOver=function(i){e.eventHasFiles(i)&&(r.setState({draggingOverTarget:!0}),!e.isIE()&&r.props.dropEffect&&(i.dataTransfer.dropEffect=r.props.dropEffect),r.props.onDragOver&&r.props.onDragOver(i))},r.handleDragLeave=function(i){r.setState({draggingOverTarget:!1}),r.props.onDragLeave&&r.props.onDragLeave(i)},r.handleDrop=function(i){if(r.props.onDrop&&e.eventHasFiles(i)){var a=i.dataTransfer?i.dataTransfer.files:null;r.props.onDrop(a,i)}r.resetDragging()},r.handleTargetClick=function(i){r.props.onTargetClick&&r.props.onTargetClick(i),r.resetDragging()},r.stopFrameListeners=function(i){i&&(i.removeEventListener("dragenter",r.handleFrameDrag),i.removeEventListener("dragleave",r.handleFrameDrag),i.removeEventListener("drop",r.handleFrameDrop))},r.startFrameListeners=function(i){i&&(i.addEventListener("dragenter",r.handleFrameDrag),i.addEventListener("dragleave",r.handleFrameDrag),i.addEventListener("drop",r.handleFrameDrop))},r.frameDragCounter=0,r.state={draggingOverFrame:!1,draggingOverTarget:!1},r}return e.prototype.componentDidMount=function(){this.startFrameListeners(this.props.frame),this.resetDragging(),window.addEventListener("dragover",this.handleWindowDragOverOrDrop),window.addEventListener("drop",this.handleWindowDragOverOrDrop)},e.prototype.componentDidUpdate=function(n){n.frame!==this.props.frame&&(this.resetDragging(),this.stopFrameListeners(n.frame),this.startFrameListeners(this.props.frame))},e.prototype.componentWillUnmount=function(){this.stopFrameListeners(this.props.frame),window.removeEventListener("dragover",this.handleWindowDragOverOrDrop),window.removeEventListener("drop",this.handleWindowDragOverOrDrop)},e.prototype.render=function(){var n=this.props,r=n.children,i=n.className,a=n.targetClassName,o=n.draggingOverFrameClassName,s=n.draggingOverTargetClassName,u=this.state,l=u.draggingOverTarget,c=u.draggingOverFrame,f=a;return c&&(f+=" "+o),l&&(f+=" "+s),kE.default.createElement("div",{className:i,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},kE.default.createElement("div",{className:f,onClick:this.handleTargetClick},r))},e.isIE=function(){return typeof window<"u"&&(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>0)},e.eventHasFiles=function(n){var r=!1;if(n.dataTransfer){var i=n.dataTransfer.types;for(var a in i)if(i[a]==="Files"){r=!0;break}}return r},e.propTypes={className:Za.default.string,targetClassName:Za.default.string,draggingOverFrameClassName:Za.default.string,draggingOverTargetClassName:Za.default.string,onDragOver:Za.default.func,onDragLeave:Za.default.func,onDrop:Za.default.func,onTargetClick:Za.default.func,dropEffect:Za.default.oneOf(["copy","move","link","none"]),frame:function(n,r,i){var a=n[r];if(a==null)return new Error("Warning: Required prop `"+r+"` was not specified in `"+i+"`");if(a!==document&&!(a instanceof HTMLElement))return new Error("Warning: Prop `"+r+"` must be one of the following: document, HTMLElement!")},onFrameDragEnter:Za.default.func,onFrameDragLeave:Za.default.func,onFrameDrop:Za.default.func},e.defaultProps={dropEffect:"copy",frame:typeof window>"u"?void 0:window.document,className:"file-drop",targetClassName:"file-drop-target",draggingOverFrameClassName:"file-drop-dragging-over-frame",draggingOverTargetClassName:"file-drop-dragging-over-target"},e}(kE.default.PureComponent),c6e=DJ.FileDrop=l6e;function f6e({onDrop:t=()=>null,accept:e="*",iconSize:n=80}){const r=B.useRef(null),i=a=>t(a.target.files);return H.jsxs(c6e,{onDrop:t,onTargetClick:()=>{var a;return(a=r.current)==null?void 0:a.click()},children:[H.jsx(Ade,{size:n,className:"file-drop-icon"}),H.jsx("input",{ref:r,type:"file",className:"psuedo-file-input",onChange:i,accept:e}),H.jsx("div",{className:"file-drop-msg",children:"Drop file here or click to select"})]})}var TJ={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(bo,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},s=0,u={parse:function(S,_){var T=(_=_||{}).dynamicTyping||!1;if(D(T)&&(_.dynamicTypingFunction=T,T={}),_.dynamicTyping=T,_.transform=!!D(_.transform)&&_.transform,_.worker&&u.WORKERS_SUPPORTED){var E=function(){if(!u.WORKERS_SUPPORTED)return!1;var N=(M=r.URL||r.webkitURL||null,$=n.toString(),u.BLOB_URL||(u.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",$,")();"],{type:"text/javascript"})))),R=new r.Worker(N),M,$;return R.onmessage=y,R.id=s++,o[R.id]=R}();return E.userStep=_.step,E.userChunk=_.chunk,E.userComplete=_.complete,E.userError=_.error,_.step=D(_.step),_.chunk=D(_.chunk),_.complete=D(_.complete),_.error=D(_.error),delete _.worker,void E.postMessage({input:S,config:_,workerId:E.id})}var A=null;return u.NODE_STREAM_INPUT,typeof S=="string"?(S=function(N){return N.charCodeAt(0)===65279?N.slice(1):N}(S),A=_.download?new f(_):new d(_)):S.readable===!0&&D(S.read)&&D(S.on)?A=new p(_):(r.File&&S instanceof File||S instanceof Object)&&(A=new h(_)),A.stream(S)},unparse:function(S,_){var T=!1,E=!0,A=",",N=`\r
`,R='"',M=R+R,$=!1,L=null,O=!1;(function(){if(typeof _=="object"){if(typeof _.delimiter!="string"||u.BAD_DELIMITERS.filter(function(P){return _.delimiter.indexOf(P)!==-1}).length||(A=_.delimiter),(typeof _.quotes=="boolean"||typeof _.quotes=="function"||Array.isArray(_.quotes))&&(T=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||($=_.skipEmptyLines),typeof _.newline=="string"&&(N=_.newline),typeof _.quoteChar=="string"&&(R=_.quoteChar),typeof _.header=="boolean"&&(E=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");L=_.columns}_.escapeChar!==void 0&&(M=_.escapeChar+R),(typeof _.escapeFormulae=="boolean"||_.escapeFormulae instanceof RegExp)&&(O=_.escapeFormulae instanceof RegExp?_.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var F=new RegExp(m(R),"g");if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return V(null,S,$);if(typeof S[0]=="object")return V(L||Object.keys(S[0]),S,$)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||L),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),V(S.fields||[],S.data||[],$);throw new Error("Unable to serialize unrecognized input");function V(P,U,j){var q="";typeof P=="string"&&(P=JSON.parse(P)),typeof U=="string"&&(U=JSON.parse(U));var Y=Array.isArray(P)&&0<P.length,ne=!Array.isArray(U[0]);if(Y&&E){for(var ue=0;ue<P.length;ue++)0<ue&&(q+=A),q+=X(P[ue],ue);0<U.length&&(q+=N)}for(var te=0;te<U.length;te++){var oe=Y?P.length:U[te].length,ce=!1,pe=Y?Object.keys(U[te]).length===0:U[te].length===0;if(j&&!Y&&(ce=j==="greedy"?U[te].join("").trim()==="":U[te].length===1&&U[te][0].length===0),j==="greedy"&&Y){for(var me=[],_e=0;_e<oe;_e++){var Ne=ne?P[_e]:_e;me.push(U[te][Ne])}ce=me.join("").trim()===""}if(!ce){for(var ke=0;ke<oe;ke++){0<ke&&!pe&&(q+=A);var Ve=Y&&ne?P[ke]:ke;q+=X(U[te][Ve],ke)}te<U.length-1&&(!j||0<oe&&!pe)&&(q+=N)}}return q}function X(P,U){if(P==null)return"";if(P.constructor===Date)return JSON.stringify(P).slice(1,25);var j=!1;O&&typeof P=="string"&&O.test(P)&&(P="'"+P,j=!0);var q=P.toString().replace(F,M);return(j=j||T===!0||typeof T=="function"&&T(P,U)||Array.isArray(T)&&T[U]||function(Y,ne){for(var ue=0;ue<ne.length;ue++)if(-1<Y.indexOf(ne[ue]))return!0;return!1}(q,u.BAD_DELIMITERS)||-1<q.indexOf(A)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?R+q+R:q}}};if(u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=g,u.ParserHandle=v,u.NetworkStreamer=f,u.FileStreamer=h,u.StringStreamer=d,u.ReadableStreamStreamer=p,r.jQuery){var l=r.jQuery;l.fn.parse=function(S){var _=S.config||{},T=[];return this.each(function(N){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var R=0;R<this.files.length;R++)T.push({file:this.files[R],inputElem:this,instanceConfig:l.extend({},_)})}),E(),this;function E(){if(T.length!==0){var N,R,M,$,L=T[0];if(D(S.before)){var O=S.before(L.file,L.inputElem);if(typeof O=="object"){if(O.action==="abort")return N="AbortError",R=L.file,M=L.inputElem,$=O.reason,void(D(S.error)&&S.error({name:N},R,M,$));if(O.action==="skip")return void A();typeof O.config=="object"&&(L.instanceConfig=l.extend(L.instanceConfig,O.config))}else if(O==="skip")return void A()}var F=L.instanceConfig.complete;L.instanceConfig.complete=function(V){D(F)&&F(V,L.file,L.inputElem),A()},u.parse(L.file,L.instanceConfig)}else D(S.complete)&&S.complete()}function A(){T.splice(0,1),E()}}}function c(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var T=b(_);T.chunkSize=parseInt(T.chunkSize),_.step||_.chunk||(T.chunkSize=null),this._handle=new v(T),(this._handle.streamer=this)._config=T}).call(this,S),this.parseChunk=function(_,T){if(this.isFirstChunk&&D(this._config.beforeFirstChunk)){var E=this._config.beforeFirstChunk(_);E!==void 0&&(_=E)}this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+_;this._partialLine="";var N=this._handle.parse(A,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var R=N.meta.cursor;this._finished||(this._partialLine=A.substring(R-this._baseIndex),this._baseIndex=R),N&&N.data&&(this._rowCount+=N.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:N,workerId:u.WORKER_ID,finished:M});else if(D(this._config.chunk)&&!T){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);N=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!M||!D(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(_){D(this._config.error)?this._config.error(_):a&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:_,finished:!1})}}function f(S){var _;(S=S||{}).chunkSize||(S.chunkSize=u.RemoteChunkSize),c.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var T=this._config.downloadRequestHeaders;for(var E in T)_.setRequestHeader(E,T[E])}if(this._config.chunkSize){var A=this._start+this._config.chunkSize-1;_.setRequestHeader("Range","bytes="+this._start+"-"+A)}try{_.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:_.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(T){var E=T.getResponseHeader("Content-Range");return E===null?-1:parseInt(E.substring(E.lastIndexOf("/")+1))}(_),this.parseChunk(_.responseText)))},this._chunkError=function(T){var E=_.statusText||T;this._sendError(new Error(E))}}function h(S){var _,T;(S=S||{}).chunkSize||(S.chunkSize=u.LocalChunkSize),c.call(this,S);var E=typeof FileReader<"u";this.stream=function(A){this._input=A,T=A.slice||A.webkitSlice||A.mozSlice,E?((_=new FileReader).onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input;if(this._config.chunkSize){var N=Math.min(this._start+this._config.chunkSize,this._input.size);A=T.call(A,this._start,N)}var R=_.readAsText(A,this._config.encoding);E||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(_.error)}}function d(S){var _;c.call(this,S=S||{}),this.stream=function(T){return _=T,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var T,E=this._config.chunkSize;return E?(T=_.substring(0,E),_=_.substring(E)):(T=_,_=""),this._finished=!_,this.parseChunk(T)}}}function p(S){c.call(this,S=S||{});var _=[],T=!0,E=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):T=!0},this._streamData=C(function(A){try{_.push(typeof A=="string"?A:A.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(N){this._streamError(N)}},this),this._streamError=C(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=C(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(S){var _,T,E,A=Math.pow(2,53),N=-A,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,L=0,O=0,F=!1,V=!1,X=[],P={data:[],errors:[],meta:{}};if(D(S.step)){var U=S.step;S.step=function(te){if(P=te,Y())q();else{if(q(),P.data.length===0)return;L+=te.data.length,S.preview&&L>S.preview?T.abort():(P.data=P.data[0],U(P,$))}}}function j(te){return S.skipEmptyLines==="greedy"?te.join("").trim()==="":te.length===1&&te[0].length===0}function q(){return P&&E&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),E=!1),S.skipEmptyLines&&(P.data=P.data.filter(function(te){return!j(te)})),Y()&&function(){if(!P)return;function te(ce,pe){D(S.transformHeader)&&(ce=S.transformHeader(ce,pe)),X.push(ce)}if(Array.isArray(P.data[0])){for(var oe=0;Y()&&oe<P.data.length;oe++)P.data[oe].forEach(te);P.data.splice(0,1)}else P.data.forEach(te)}(),function(){if(!P||!S.header&&!S.dynamicTyping&&!S.transform)return P;function te(ce,pe){var me,_e=S.header?{}:[];for(me=0;me<ce.length;me++){var Ne=me,ke=ce[me];S.header&&(Ne=me>=X.length?"__parsed_extra":X[me]),S.transform&&(ke=S.transform(ke,Ne)),ke=ne(Ne,ke),Ne==="__parsed_extra"?(_e[Ne]=_e[Ne]||[],_e[Ne].push(ke)):_e[Ne]=ke}return S.header&&(me>X.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+X.length+" fields but parsed "+me,O+pe):me<X.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+X.length+" fields but parsed "+me,O+pe)),_e}var oe=1;return!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(te),oe=P.data.length):P.data=te(P.data,0),S.header&&P.meta&&(P.meta.fields=X),O+=oe,P}()}function Y(){return S.header&&X.length===0}function ne(te,oe){return ce=te,S.dynamicTypingFunction&&S.dynamicTyping[ce]===void 0&&(S.dynamicTyping[ce]=S.dynamicTypingFunction(ce)),(S.dynamicTyping[ce]||S.dynamicTyping)===!0?oe==="true"||oe==="TRUE"||oe!=="false"&&oe!=="FALSE"&&(function(pe){if(R.test(pe)){var me=parseFloat(pe);if(N<me&&me<A)return!0}return!1}(oe)?parseFloat(oe):M.test(oe)?new Date(oe):oe===""?null:oe):oe;var ce}function ue(te,oe,ce,pe){var me={type:te,code:oe,message:ce};pe!==void 0&&(me.row=pe),P.errors.push(me)}this.parse=function(te,oe,ce){var pe=S.quoteChar||'"';if(S.newline||(S.newline=function(Ne,ke){Ne=Ne.substring(0,1048576);var Ve=new RegExp(m(ke)+"([^]*?)"+m(ke),"gm"),je=(Ne=Ne.replace(Ve,"")).split("\r"),ct=Ne.split(`
`),rt=1<ct.length&&ct[0].length<je[0].length;if(je.length===1||rt)return`
`;for(var xt=0,it=0;it<je.length;it++)je[it][0]===`
`&&xt++;return xt>=je.length/2?`\r
`:"\r"}(te,pe)),E=!1,S.delimiter)D(S.delimiter)&&(S.delimiter=S.delimiter(te),P.meta.delimiter=S.delimiter);else{var me=function(Ne,ke,Ve,je,ct){var rt,xt,it,G;ct=ct||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Z=0;Z<ct.length;Z++){var re=ct[Z],de=0,ge=0,ye=0;it=void 0;for(var Se=new g({comments:je,delimiter:re,newline:ke,preview:10}).parse(Ne),ve=0;ve<Se.data.length;ve++)if(Ve&&j(Se.data[ve]))ye++;else{var Ce=Se.data[ve].length;ge+=Ce,it!==void 0?0<Ce&&(de+=Math.abs(Ce-it),it=Ce):it=Ce}0<Se.data.length&&(ge/=Se.data.length-ye),(xt===void 0||de<=xt)&&(G===void 0||G<ge)&&1.99<ge&&(xt=de,rt=re,G=ge)}return{successful:!!(S.delimiter=rt),bestDelimiter:rt}}(te,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess);me.successful?S.delimiter=me.bestDelimiter:(E=!0,S.delimiter=u.DefaultDelimiter),P.meta.delimiter=S.delimiter}var _e=b(S);return S.preview&&S.header&&_e.preview++,_=te,T=new g(_e),P=T.parse(_,oe,ce),q(),F?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,T.abort(),_=D(S.chunk)?"":_.substring(T.getCharIndex())},this.resume=function(){$.streamer._halted?(F=!1,$.streamer.parseChunk(_,!0)):setTimeout($.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,T.abort(),P.meta.aborted=!0,D(S.complete)&&S.complete(P),_=""}}function m(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(S){var _,T=(S=S||{}).delimiter,E=S.newline,A=S.comments,N=S.step,R=S.preview,M=S.fastMode,$=_=S.quoteChar===void 0||S.quoteChar===null?'"':S.quoteChar;if(S.escapeChar!==void 0&&($=S.escapeChar),(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=","),A===T)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var L=0,O=!1;this.parse=function(F,V,X){if(typeof F!="string")throw new Error("Input must be a string");var P=F.length,U=T.length,j=E.length,q=A.length,Y=D(N),ne=[],ue=[],te=[],oe=L=0;if(!F)return Pe();if(S.header&&!V){var ce=F.split(E)[0].split(T),pe=[],me={},_e=!1;for(var Ne in ce){var ke=ce[Ne];D(S.transformHeader)&&(ke=S.transformHeader(ke,Ne));var Ve=ke,je=me[ke]||0;for(0<je&&(_e=!0,Ve=ke+"_"+je),me[ke]=je+1;pe.includes(Ve);)Ve=Ve+"_"+je;pe.push(Ve)}if(_e){var ct=F.split(E);ct[0]=pe.join(T),F=ct.join(E)}}if(M||M!==!1&&F.indexOf(_)===-1){for(var rt=F.split(E),xt=0;xt<rt.length;xt++){if(te=rt[xt],L+=te.length,xt!==rt.length-1)L+=E.length;else if(X)return Pe();if(!A||te.substring(0,q)!==A){if(Y){if(ne=[],ye(te.split(T)),at(),O)return Pe()}else ye(te.split(T));if(R&&R<=xt)return ne=ne.slice(0,R),Pe(!0)}}return Pe()}for(var it=F.indexOf(T,L),G=F.indexOf(E,L),Z=new RegExp(m($)+m(_),"g"),re=F.indexOf(_,L);;)if(F[L]!==_)if(A&&te.length===0&&F.substring(L,L+q)===A){if(G===-1)return Pe();L=G+j,G=F.indexOf(E,L),it=F.indexOf(T,L)}else if(it!==-1&&(it<G||G===-1))te.push(F.substring(L,it)),L=it+U,it=F.indexOf(T,L);else{if(G===-1)break;if(te.push(F.substring(L,G)),Ce(G+j),Y&&(at(),O))return Pe();if(R&&ne.length>=R)return Pe(!0)}else for(re=L,L++;;){if((re=F.indexOf(_,re+1))===-1)return X||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:L}),ve();if(re===P-1)return ve(F.substring(L,re).replace(Z,_));if(_!==$||F[re+1]!==$){if(_===$||re===0||F[re-1]!==$){it!==-1&&it<re+1&&(it=F.indexOf(T,re+1)),G!==-1&&G<re+1&&(G=F.indexOf(E,re+1));var de=Se(G===-1?it:Math.min(it,G));if(F.substr(re+1+de,U)===T){te.push(F.substring(L,re).replace(Z,_)),F[L=re+1+de+U]!==_&&(re=F.indexOf(_,L)),it=F.indexOf(T,L),G=F.indexOf(E,L);break}var ge=Se(G);if(F.substring(re+1+ge,re+1+ge+j)===E){if(te.push(F.substring(L,re).replace(Z,_)),Ce(re+1+ge+j),it=F.indexOf(T,L),re=F.indexOf(_,L),Y&&(at(),O))return Pe();if(R&&ne.length>=R)return Pe(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:L}),re++}}else re++}return ve();function ye(Ae){ne.push(Ae),oe=L}function Se(Ae){var er=0;if(Ae!==-1){var Hn=F.substring(re+1,Ae);Hn&&Hn.trim()===""&&(er=Hn.length)}return er}function ve(Ae){return X||(Ae===void 0&&(Ae=F.substring(L)),te.push(Ae),L=P,ye(te),Y&&at()),Pe()}function Ce(Ae){L=Ae,ye(te),te=[],G=F.indexOf(E,L)}function Pe(Ae){return{data:ne,errors:ue,meta:{delimiter:T,linebreak:E,aborted:O,truncated:!!Ae,cursor:oe+(V||0)}}}function at(){N(Pe()),ne=[],ue=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return L}}function y(S){var _=S.data,T=o[_.workerId],E=!1;if(_.error)T.userError(_.error,_.file);else if(_.results&&_.results.data){var A={abort:function(){E=!0,x(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(D(T.userStep)){for(var N=0;N<_.results.data.length&&(T.userStep({data:_.results.data[N],errors:_.results.errors,meta:_.results.meta},A),!E);N++);delete _.results}else D(T.userChunk)&&(T.userChunk(_.results,A,_.file),delete _.results)}_.finished&&!E&&x(_.workerId,_.results)}function x(S,_){var T=o[S];D(T.userComplete)&&T.userComplete(_),T.terminate(),delete o[S]}function w(){throw new Error("Not implemented.")}function b(S){if(typeof S!="object"||S===null)return S;var _=Array.isArray(S)?[]:{};for(var T in S)_[T]=b(S[T]);return _}function C(S,_){return function(){S.apply(_,arguments)}}function D(S){return typeof S=="function"}return a&&(r.onmessage=function(S){var _=S.data;if(u.WORKER_ID===void 0&&_&&(u.WORKER_ID=_.workerId),typeof _.input=="string")r.postMessage({workerId:u.WORKER_ID,results:u.parse(_.input,_.config),finished:!0});else if(r.File&&_.input instanceof File||_.input instanceof Object){var T=u.parse(_.input,_.config);T&&r.postMessage({workerId:u.WORKER_ID,results:T,finished:!0})}}),(f.prototype=Object.create(c.prototype)).constructor=f,(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,u})})(TJ);var h6e=TJ.exports;const d6e=nl(h6e),p6e=t=>new Date(t)!=="Invalid Date"&&!isNaN(new Date(t))?t===new Date(t).toISOString():!1,v6e=t=>p6e(t)?"date":Number.isNaN(Number(t))?"string":"number";function g6e(t){if(!t||!t.length)return{};let e=t[0],n={},r=Object.keys(e);return r.forEach(i=>{n[i]={missing:0,invalid:0,type:v6e(e[i])}}),t.forEach(i=>{r.forEach(a=>{i[a]||(n[a].missing+=1)})}),n}function m6e(t){const e=t.data;return async function(n){const r=g6e(e);n(Yu({path:"details",value:r}))}}function EJ({message:t="Transforming Data...",visible:e=!1}){return!mi(r=>r.appState.loader)&&!e?H.jsx(H.Fragment,{}):H.jsx("div",{className:"loader fcc",children:H.jsx(Mv,{elevation:3,className:"inprogress fcc",children:H.jsx(Sde,{icon:H.jsx(QS,{size:48}),description:t})})})}function y6e(){const t=Ga(),[e,n]=B.useState(!1),r=a=>{const o=new FileReader;n(!0),o.onload=function(){let s=d6e.parse(o.result.trim(),{header:!0}),u=(s==null?void 0:s.data)||[];t(dve({data:u})),t(m6e({data:u})),n(!1)},o.readAsText(a)},i=a=>{r(a[0])};return H.jsx("div",{className:"fcc",style:{height:"100%"},children:e?H.jsx(EJ,{message:"Parsing file...",visible:!0}):H.jsx("div",{style:{width:"60%",height:"50%"},children:H.jsx(f6e,{accept:".csv",onDrop:i})})})}function x6e(){return function(t,e){const n=e(),r=n.data.transformed,i=n.data.order;t(pi({path:"loader",value:!0})),setTimeout(async()=>{let a=[];i.forEach((o,s)=>{let u={},l=[];s?a.length&&(a.forEach(c=>{let f=r[c][o];u[f]?l.push(c):u[f]=1}),a=l):(r.forEach((c,f)=>{let h=c[o];u[h]?l.push(f):u[h]=1}),a=l)}),console.log({duplicates:a}),a.length&&t(Yu({path:"transformed",value:r.filter((o,s)=>!a.includes(s))})),t(pi({path:"loader",value:!1}))})}}function i8(t){const e=t.type==="partial";return function(n,r){const i=r(),a=i.data.transformed,o=i.data.order;n(pi({path:"loader",value:!0})),setTimeout(async()=>{let s=[];a.forEach((u,l)=>{let c=!e;for(let f=0;f<o.length;f++){const h=o[f];if(u[h]!==""&&!e||e&&u[h]===""){c=e;break}}c&&s.push(l)}),s.length&&n(Yu({path:"transformed",value:a.filter((u,l)=>!s.includes(l))})),n(pi({path:"loader",value:!1}))})}}const w6e=()=>{const t=Ga(),e=()=>t(x6e()),n=()=>t(i8({type:"full"})),r=()=>t(i8({type:"partial"}));return H.jsxs(dy,{children:[H.jsx(eh,{content:"Rows where all the columns have same values as other rows",children:H.jsx(Ze,{text:"Duplicate rows",icon:"duplicate",onClick:e})}),H.jsx(eh,{content:"Rows where all the columns have missing values",children:H.jsx(Ze,{text:"Blank rows",icon:"circle",onClick:n})}),H.jsx(eh,{content:"Rows where some of the columns have missing values",children:H.jsx(Ze,{text:"Rows with missing values",icon:"warning-sign",onClick:r})})]})},IE=({active:t=!1,...e})=>H.jsx(Oa,{...e,intent:t?jr.PRIMARY:jr.NONE,active:t,minimal:!0});function b6e(){const t=mi(r=>r.appState.searchOptions),e=Ga(),n=r=>{e(pi({path:`searchOptions.${r}`,value:!t[r]}))};return H.jsxs(oM,{children:[H.jsx(eh,{content:"Case sensitive",children:H.jsx(IE,{icon:H.jsx(Fve,{size:16}),active:t.caseSensitive,onClick:()=>n("caseSensitive"),disabled:t.regex})}),H.jsx(eh,{content:"Match whole word",children:H.jsx(IE,{icon:H.jsx(zve,{size:16}),active:t.wholeWord,onClick:()=>n("wholeWord"),disabled:t.regex})}),H.jsx(eh,{content:"Use regular expression",children:H.jsx(IE,{icon:H.jsx(Pve,{size:16}),active:t.regex,onClick:()=>n("regex")})})]})}function C6e(){const[t,e]=B.useState(""),n=Ga(),r=o=>e(o.target.value),i=o=>{o.key==="Enter"&&n(pi({path:"searchQuery",value:t}))},a=()=>{e(""),n(pi({path:"searchQuery",value:""}))};return H.jsx(H.Fragment,{children:H.jsxs(o2,{children:[H.jsx(Oa,{icon:"reset",style:{width:40},outlined:!0,onClick:a}),H.jsx(Zp,{value:t,leftIcon:"search",placeholder:"Search data ( type something and hit enter )",style:{width:600},onChange:r,onKeyDown:i,rightElement:H.jsx(b6e,{})}),H.jsx(Xh,{interactionKind:"hover",content:H.jsx(w6e,{}),minimal:!0,position:"bottom-left",children:H.jsx(Oa,{text:"Remove rows",icon:"remove",outlined:!0,intent:jr.WARNING})})]})})}const S6e="_wrapper_1ssu1_1",D6e="_header_1ssu1_6",_6e="_table_1ssu1_13",T6e="_footer_1ssu1_18",E6e="_info_1ssu1_29",cp={wrapper:S6e,header:D6e,table:_6e,footer:T6e,info:E6e};function A6e(){const{rows:t,columns:e}=mi(n=>{let r=n.data.transformed||[];const i=r.length,a=Object.keys(r[0]).length;return{rows:i,columns:a}},i2);return H.jsxs(H.Fragment,{children:[H.jsxs("div",{className:"fcc",children:[H.jsxs("div",{className:cp.info,children:[H.jsx("b",{children:"Total Rows"})," : ",t.toLocaleString()]}),H.jsxs("div",{className:cp.info,children:[H.jsx("b",{children:"Total Columns"})," : ",e]})]}),H.jsx("div",{className:"fcc",children:H.jsx(Do,{icon:"console",className:"pointer"})})]})}const k6e=()=>null;function AJ({title:t="",onConfirm:e=k6e,children:n,dialogKey:r,...i}){const a=Ga(),o=mi(l=>{var c;return(c=l.appState[r])==null?void 0:c.open}),s=()=>a(pi({path:r,value:!1})),u=()=>{e(),s()};return H.jsxs(Ife,{isOpen:o,title:t,onClose:s,...i,children:[H.jsx(gde,{children:n}),H.jsx(mde,{minimal:!0,actions:H.jsxs(o2,{children:[H.jsx(Oa,{intent:jr.DANGER,onClick:s,text:"Cancel"}),H.jsx(Oa,{intent:jr.PRIMARY,text:"Confirm",onClick:u})]})})]})}function I6e(){const t=Ga(),[e,n]=B.useState(""),[r,i]=B.useState(""),a=mi(s=>s.appState.prefixInput.col),o=()=>t(vP({col:a,type:sp.addPrefixSuffix,options:{prefix:e,suffix:r}}));return H.jsxs(AJ,{dialogKey:"prefixInput",title:"Prefix / Suffix",onConfirm:o,children:["Enter prefix and (or) suffix for the column ",H.jsx("b",{children:a}),H.jsxs(o2,{fill:!0,style:{marginTop:10},children:[H.jsx(Zp,{value:e,onChange:s=>n(s.target.value),placeholder:"prefix"}),H.jsx(Oa,{minimal:!0,text:"word",disabled:!0}),H.jsx(Zp,{value:r,onChange:s=>i(s.target.value),placeholder:"suffix"})]})]})}function N6e(){const t=Ga(),[e,n]=B.useState(""),[r,i]=B.useState(""),[a,o]=B.useState(!0),s=mi(l=>l.appState.findAndReplace.col),u=()=>t(vP({col:s,type:sp.find_and_replace,options:{find:e,replace:r,caseSensitive:a}}));return H.jsxs(AJ,{dialogKey:"findAndReplace",title:"Find and replace",onConfirm:u,children:[H.jsx(Zp,{value:e,onChange:l=>n(l.target.value),placeholder:"find"}),H.jsx(Zp,{className:"mt7",value:r,onChange:l=>i(l.target.value),placeholder:"replace"}),H.jsx(yH,{checked:a,onChange:l=>o(l.target.checked),className:"mt7",label:"Case Sensitive",alignIndicator:"left"})]})}const R6e=(t,e)=>t===e,$6e=(t,e)=>{let n=!1;try{n=new RegExp(e).test(t)}catch{}return n},M6e=(t,e)=>t.includes(e),O6e=(t,e,n)=>{const r=EP.getState(),{caseSensitive:i,wholeWord:a,regex:o}=r.appState.searchOptions;if(!n)return t;let s=[];const u=!i&&!o;let l=u?n.toLowerCase():n;return t.forEach(c=>{let f=!1;for(let h=0;h<e.length;h++){let d=c[e[h]];if(typeof d!="string")continue;if(u&&(d=d.toLowerCase()),(o?$6e:a?R6e:M6e)(d,l)){f=!0;break}}f&&s.push(c)}),s},F6e=(t,e)=>{let n={};return e.forEach(r=>n[r]=t[r]),n},P6e=["transformed","order","sizes"];function L6e(){const{transformed:t,order:e,sizes:n}=mi(o=>F6e(o.data,P6e),i2),r=mi(o=>o.appState.searchQuery);if(!t)return H.jsx(y6e,{});const i=O6e(t,e,r),a=["DataPrepIndex",...e];return H.jsxs("div",{className:cp.wrapper,children:[H.jsx("div",{className:cp.header,children:H.jsx(C6e,{})}),H.jsx("div",{className:cp.table,children:H.jsx(s6e,{rows:i,columns:a,sizes:n})}),H.jsx("div",{className:cp.footer,children:H.jsx(A6e,{})}),H.jsx(I6e,{}),H.jsx(N6e,{})]})}function z6e(){return H.jsx("div",{children:"Data Details"})}const B6e=v_.div`
    .card {
        margin-bottom: 10px;
    }
`;function V6e(){const{order:t,params:e}=mi(n=>n.data.transforms);return H.jsx(B6e,{children:t.map(n=>{const r=e[n];return H.jsxs(Mv,{className:"card",interactive:!0,children:[H.jsxs("div",{className:"col",children:["Column : ",r.col]}),H.jsxs("div",{className:"type",children:["Type : ",r.type]})]})})})}var kJ={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function xn(t){return typeof t=="number"}function Ir(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function IJ(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function NJ(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function RJ(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Bs(t){return typeof t=="string"}var _n=Array.isArray;function Mn(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function k0(t){return Array.isArray(t)||Mn(t)}function W6e(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function U6e(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function G6e(t){return t&&t.constructor.prototype.isRange===!0||!1}function AP(t){return t&&t.constructor.prototype.isIndex===!0||!1}function H6e(t){return typeof t=="boolean"}function j6e(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function q6e(t){return t&&t.constructor.prototype.isHelp===!0||!1}function X6e(t){return typeof t=="function"}function K6e(t){return t instanceof Date}function Y6e(t){return t instanceof RegExp}function Z6e(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!IJ(t)&&!NJ(t))}function Q6e(t){return t===null}function J6e(t){return t===void 0}function eVe(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function tVe(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function nVe(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function rVe(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function iVe(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function aVe(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function oVe(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function sVe(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function uVe(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function lVe(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function cVe(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function fVe(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function hVe(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function dVe(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function pVe(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function vVe(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function gVe(t){return t&&t.constructor.prototype.isChain===!0||!1}function ds(t){var e=typeof t;return e==="object"?t===null?"null":Ir(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Rn(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Rn(n)});if(t instanceof Date)return new Date(t.valueOf());if(Ir(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return mVe(t,Rn)}function mVe(t,e){var n={};for(var r in t)I0(t,r)&&(n[r]=e(t[r]));return n}function $J(t,e){for(var n in e)I0(e,n)&&(t[n]=e[n]);return t}function yv(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!yv(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!yv(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function I0(t,e){return t&&Object.hasOwnProperty.call(t,e)}function yVe(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=t[i];a!==void 0&&(n[i]=a)}return n}var xVe=["Matrix","Array"],wVe=["number","BigNumber","Fraction"],Jv=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(kJ)};wh(Jv,kJ,{MATRIX_OPTIONS:xVe,NUMBER_OPTIONS:wVe});function Uo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=bVe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function bVe(t,e){if(t){if(typeof t=="string")return a8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a8(t,e)}}function a8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function o8(){return!0}function Qa(){return!1}function xd(){}var s8="Argument is not a typed-function.";function MJ(){function t(G){return fp(G)==="object"&&G!==null&&G.constructor===Object}var e=[{name:"number",test:function(Z){return typeof Z=="number"}},{name:"string",test:function(Z){return typeof Z=="string"}},{name:"boolean",test:function(Z){return typeof Z=="boolean"}},{name:"Function",test:function(Z){return typeof Z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Z){return Z instanceof Date}},{name:"RegExp",test:function(Z){return Z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Z){return Z===null}},{name:"undefined",test:function(Z){return Z===void 0}}],n={name:"any",test:o8,isAny:!0},r,i,a=0,o={createCount:0};function s(G){var Z=r.get(G);if(Z)return Z;var re='Unknown type "'+G+'"',de=G.toLowerCase(),ge,ye=Uo(i),Se;try{for(ye.s();!(Se=ye.n()).done;)if(ge=Se.value,ge.toLowerCase()===de){re+='. Did you mean "'+ge+'" ?';break}}catch(ve){ye.e(ve)}finally{ye.f()}throw new TypeError(re)}function u(G){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",re=Z?s(Z).index:i.length,de=[],ge=0;ge<G.length;++ge){if(!G[ge]||typeof G[ge].name!="string"||typeof G[ge].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var ye=G[ge].name;if(r.has(ye))throw new TypeError('Duplicate type name "'+ye+'"');de.push(ye),r.set(ye,{name:ye,test:G[ge].test,isAny:G[ge].isAny,index:re+ge,conversionsTo:[]})}var Se=i.slice(re);i=i.slice(0,re).concat(de).concat(Se);for(var ve=re+de.length;ve<i.length;++ve)r.get(i[ve]).index=ve}function l(){r=new Map,i=[],a=0,u([n],!1)}l(),u(e);function c(){var G,Z=Uo(i),re;try{for(Z.s();!(re=Z.n()).done;)G=re.value,r.get(G).conversionsTo=[]}catch(de){Z.e(de)}finally{Z.f()}a=0}function f(G){var Z=i.filter(function(re){var de=r.get(re);return!de.isAny&&de.test(G)});return Z.length?Z:["any"]}function h(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function d(G,Z,re){if(!h(G))throw new TypeError(s8);var de=re&&re.exact,ge=Array.isArray(Z)?Z.join(","):Z,ye=w(ge),Se=m(ye);if(!de||Se in G.signatures){var ve=G._typedFunctionData.signatureMap.get(Se);if(ve)return ve}var Ce=ye.length,Pe;if(de){Pe=[];var at;for(at in G.signatures)Pe.push(G._typedFunctionData.signatureMap.get(at))}else Pe=G._typedFunctionData.signatures;for(var Ae=0;Ae<Ce;++Ae){var er=ye[Ae],Hn=[],ei=void 0,dr=Uo(Pe),Gi;try{for(dr.s();!(Gi=dr.n()).done;){ei=Gi.value;var Tr=S(ei.params,Ae);if(!(!Tr||er.restParam&&!Tr.restParam)){if(!Tr.hasAny){var qa=function(){var Hi=x(Tr);if(er.types.some(function(Zc){return!Hi.has(Zc.name)}))return"continue"}();if(qa==="continue")continue}Hn.push(ei)}}}catch(Hi){dr.e(Hi)}finally{dr.f()}if(Pe=Hn,Pe.length===0)break}var Si,Di=Uo(Pe),Yc;try{for(Di.s();!(Yc=Di.n()).done;)if(Si=Yc.value,Si.params.length<=Ce)return Si}catch(Hi){Di.e(Hi)}finally{Di.f()}throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+m(ye,", ")+"))")}function p(G,Z,re){return d(G,Z,re).implementation}function v(G,Z){var re=s(Z);if(re.test(G))return G;var de=re.conversionsTo;if(de.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(var ge=0;ge<de.length;ge++){var ye=s(de[ge].from);if(ye.test(G))return de[ge].convert(G)}throw new Error("Cannot convert "+G+" to "+Z)}function m(G){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(function(re){return re.name}).join(Z)}function g(G){var Z=G.indexOf("...")===0,re=Z?G.length>3?G.slice(3):"any":G,de=re.split("|").map(function(ve){return s(ve.trim())}),ge=!1,ye=Z?"...":"",Se=de.map(function(ve){return ge=ve.isAny||ge,ye+=ve.name+"|",{name:ve.name,typeIndex:ve.index,test:ve.test,isAny:ve.isAny,conversion:null,conversionIndex:-1}});return{types:Se,name:ye.slice(0,-1),hasAny:ge,hasConversion:!1,restParam:Z}}function y(G){var Z=G.types.map(function(Se){return Se.name}),re=L(Z),de=G.hasAny,ge=G.name,ye=re.map(function(Se){var ve=s(Se.from);return de=ve.isAny||de,ge+="|"+Se.from,{name:Se.from,typeIndex:ve.index,test:ve.test,isAny:ve.isAny,conversion:Se,conversionIndex:Se.index}});return{types:G.types.concat(ye),name:ge,hasAny:de,hasConversion:ye.length>0,restParam:G.restParam}}function x(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(function(Z){return G.typeSet.add(Z.name)})),G.typeSet}function w(G){var Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");var re=G.trim();if(re==="")return Z;for(var de=re.split(","),ge=0;ge<de.length;++ge){var ye=g(de[ge].trim());if(ye.restParam&&ge!==de.length-1)throw new SyntaxError('Unexpected rest parameter "'+de[ge]+'": only allowed for the last parameter');if(ye.types.length===0)return null;Z.push(ye)}return Z}function b(G){var Z=te(G);return Z?Z.restParam:!1}function C(G){if(!G||G.types.length===0)return o8;if(G.types.length===1)return s(G.types[0].name).test;if(G.types.length===2){var Z=s(G.types[0].name).test,re=s(G.types[1].name).test;return function(ye){return Z(ye)||re(ye)}}else{var de=G.types.map(function(ge){return s(ge.name).test});return function(ye){for(var Se=0;Se<de.length;Se++)if(de[Se](ye))return!0;return!1}}}function D(G){var Z,re,de;if(b(G)){Z=ue(G).map(C);var ge=Z.length,ye=C(te(G)),Se=function(Ce){for(var Pe=ge;Pe<Ce.length;Pe++)if(!ye(Ce[Pe]))return!1;return!0};return function(Ce){for(var Pe=0;Pe<Z.length;Pe++)if(!Z[Pe](Ce[Pe]))return!1;return Se(Ce)&&Ce.length>=ge+1}}else return G.length===0?function(Ce){return Ce.length===0}:G.length===1?(re=C(G[0]),function(Ce){return re(Ce[0])&&Ce.length===1}):G.length===2?(re=C(G[0]),de=C(G[1]),function(Ce){return re(Ce[0])&&de(Ce[1])&&Ce.length===2}):(Z=G.map(C),function(Ce){for(var Pe=0;Pe<Z.length;Pe++)if(!Z[Pe](Ce[Pe]))return!1;return Ce.length===Z.length})}function S(G,Z){return Z<G.length?G[Z]:b(G)?te(G):null}function _(G,Z){var re=S(G,Z);return re?x(re):new Set}function T(G){return G.conversion===null||G.conversion===void 0}function E(G,Z){var re=new Set;return G.forEach(function(de){var ge=_(de.params,Z),ye,Se=Uo(ge),ve;try{for(Se.s();!(ve=Se.n()).done;)ye=ve.value,re.add(ye)}catch(Ce){Se.e(Ce)}finally{Se.f()}}),re.has("any")?["any"]:Array.from(re)}function A(G,Z,re){var de,ge,ye=G||"unnamed",Se=re,ve,Ce=function(){var dr=[];if(Se.forEach(function(Tr){var qa=S(Tr.params,ve),Si=C(qa);(ve<Tr.params.length||b(Tr.params))&&Si(Z[ve])&&dr.push(Tr)}),dr.length===0){if(ge=E(Se,ve),ge.length>0){var Gi=f(Z[ve]);return de=new TypeError("Unexpected type of argument in function "+ye+" (expected: "+ge.join(" or ")+", actual: "+Gi.join(" | ")+", index: "+ve+")"),de.data={category:"wrongType",fn:ye,index:ve,actual:Gi,expected:ge},{v:de}}}else Se=dr};for(ve=0;ve<Z.length;ve++){var Pe=Ce();if(fp(Pe)==="object")return Pe.v}var at=Se.map(function(ei){return b(ei.params)?1/0:ei.params.length});if(Z.length<Math.min.apply(null,at))return ge=E(Se,ve),de=new TypeError("Too few arguments in function "+ye+" (expected: "+ge.join(" or ")+", index: "+Z.length+")"),de.data={category:"tooFewArgs",fn:ye,index:Z.length,expected:ge},de;var Ae=Math.max.apply(null,at);if(Z.length>Ae)return de=new TypeError("Too many arguments in function "+ye+" (expected: "+Ae+", actual: "+Z.length+")"),de.data={category:"tooManyArgs",fn:ye,index:Z.length,expectedLength:Ae},de;for(var er=[],Hn=0;Hn<Z.length;++Hn)er.push(f(Z[Hn]).join("|"));return de=new TypeError('Arguments of type "'+er.join(", ")+'" do not match any of the defined signatures of function '+ye+"."),de.data={category:"mismatch",actual:er},de}function N(G){for(var Z=i.length+1,re=0;re<G.types.length;re++)T(G.types[re])&&(Z=Math.min(Z,G.types[re].typeIndex));return Z}function R(G){for(var Z=a+1,re=0;re<G.types.length;re++)T(G.types[re])||(Z=Math.min(Z,G.types[re].conversionIndex));return Z}function M(G,Z){if(G.hasAny){if(!Z.hasAny)return 1}else if(Z.hasAny)return-1;if(G.restParam){if(!Z.restParam)return 1}else if(Z.restParam)return-1;if(G.hasConversion){if(!Z.hasConversion)return 1}else if(Z.hasConversion)return-1;var re=N(G)-N(Z);if(re<0)return-1;if(re>0)return 1;var de=R(G)-R(Z);return de<0?-1:de>0?1:0}function $(G,Z){var re=G.params,de=Z.params,ge=te(re),ye=te(de),Se=b(re),ve=b(de);if(Se&&ge.hasAny){if(!ve||!ye.hasAny)return 1}else if(ve&&ye.hasAny)return-1;var Ce=0,Pe=0,at,Ae=Uo(re),er;try{for(Ae.s();!(er=Ae.n()).done;)at=er.value,at.hasAny&&++Ce,at.hasConversion&&++Pe}catch(ag){Ae.e(ag)}finally{Ae.f()}var Hn=0,ei=0,dr=Uo(de),Gi;try{for(dr.s();!(Gi=dr.n()).done;)at=Gi.value,at.hasAny&&++Hn,at.hasConversion&&++ei}catch(ag){dr.e(ag)}finally{dr.f()}if(Ce!==Hn)return Ce-Hn;if(Se&&ge.hasConversion){if(!ve||!ye.hasConversion)return 1}else if(ve&&ye.hasConversion)return-1;if(Pe!==ei)return Pe-ei;if(Se){if(!ve)return 1}else if(ve)return-1;var Tr=(re.length-de.length)*(Se?-1:1);if(Tr!==0)return Tr;for(var qa=[],Si=0,Di=0;Di<re.length;++Di){var Yc=M(re[Di],de[Di]);qa.push(Yc),Si+=Yc}if(Si!==0)return Si;for(var Hi,Zc=0,rx=qa;Zc<rx.length;Zc++)if(Hi=rx[Zc],Hi!==0)return Hi;return 0}function L(G){if(G.length===0)return[];var Z=G.map(s);G.length>1&&Z.sort(function(Ce,Pe){return Ce.index-Pe.index});var re=Z[0].conversionsTo;if(G.length===1)return re;re=re.concat([]);for(var de=new Set(G),ge=1;ge<Z.length;++ge){var ye=void 0,Se=Uo(Z[ge].conversionsTo),ve;try{for(Se.s();!(ve=Se.n()).done;)ye=ve.value,de.has(ye.from)||(re.push(ye),de.add(ye.from))}catch(Ce){Se.e(Ce)}finally{Se.f()}}return re}function O(G,Z){var re=Z;if(G.some(function(ve){return ve.hasConversion})){var de=b(G),ge=G.map(F);re=function(){for(var Ce=[],Pe=de?arguments.length-1:arguments.length,at=0;at<Pe;at++)Ce[at]=ge[at](arguments[at]);return de&&(Ce[Pe]=arguments[Pe].map(ge[Pe])),Z.apply(this,Ce)}}var ye=re;if(b(G)){var Se=G.length-1;ye=function(){return re.apply(this,oe(arguments,0,Se).concat([oe(arguments,Se)]))}}return ye}function F(G){var Z,re,de,ge,ye=[],Se=[];switch(G.types.forEach(function(ve){ve.conversion&&(ye.push(s(ve.conversion.from).test),Se.push(ve.conversion.convert))}),Se.length){case 0:return function(Ce){return Ce};case 1:return Z=ye[0],de=Se[0],function(Ce){return Z(Ce)?de(Ce):Ce};case 2:return Z=ye[0],re=ye[1],de=Se[0],ge=Se[1],function(Ce){return Z(Ce)?de(Ce):re(Ce)?ge(Ce):Ce};default:return function(Ce){for(var Pe=0;Pe<Se.length;Pe++)if(ye[Pe](Ce))return Se[Pe](Ce);return Ce}}}function V(G){function Z(re,de,ge){if(de<re.length){var ye=re[de],Se=[];if(ye.restParam){var ve=ye.types.filter(T);ve.length<ye.types.length&&Se.push({types:ve,name:"..."+ve.map(function(Ce){return Ce.name}).join("|"),hasAny:ve.some(function(Ce){return Ce.isAny}),hasConversion:!1,restParam:!0}),Se.push(ye)}else Se=ye.types.map(function(Ce){return{types:[Ce],name:Ce.name,hasAny:Ce.isAny,hasConversion:Ce.conversion,restParam:!1}});return pe(Se,function(Ce){return Z(re,de+1,ge.concat([Ce]))})}else return[ge]}return Z(G,0,[])}function X(G,Z){for(var re=Math.max(G.length,Z.length),de=0;de<re;de++){var ge=_(G,de),ye=_(Z,de),Se=!1,ve=void 0,Ce=Uo(ye),Pe;try{for(Ce.s();!(Pe=Ce.n()).done;)if(ve=Pe.value,ge.has(ve)){Se=!0;break}}catch(ei){Ce.e(ei)}finally{Ce.f()}if(!Se)return!1}var at=G.length,Ae=Z.length,er=b(G),Hn=b(Z);return er?Hn?at===Ae:Ae>=at:Hn?at>=Ae:at===Ae}function P(G){return G.map(function(Z){return Ve(Z)?Ne(Z.referToSelf.callback):ke(Z)?_e(Z.referTo.references,Z.referTo.callback):Z})}function U(G,Z,re){var de=[],ge,ye=Uo(G),Se;try{for(ye.s();!(Se=ye.n()).done;){ge=Se.value;var ve=re[ge];if(typeof ve!="number")throw new TypeError('No definition for referenced signature "'+ge+'"');if(ve=Z[ve],typeof ve!="function")return!1;de.push(ve)}}catch(Ce){ye.e(Ce)}finally{ye.f()}return de}function j(G,Z,re){for(var de=P(G),ge=new Array(de.length).fill(!1),ye=!0;ye;){ye=!1;for(var Se=!0,ve=0;ve<de.length;++ve)if(!ge[ve]){var Ce=de[ve];if(Ve(Ce))de[ve]=Ce.referToSelf.callback(re),de[ve].referToSelf=Ce.referToSelf,ge[ve]=!0,Se=!1;else if(ke(Ce)){var Pe=U(Ce.referTo.references,de,Z);Pe?(de[ve]=Ce.referTo.callback.apply(this,Pe),de[ve].referTo=Ce.referTo,ge[ve]=!0,Se=!1):ye=!0}}if(Se&&ye)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return de}function q(G){var Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(function(re){var de=G[re];if(Z.test(de.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Y(G,Z){if(o.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&q(Z);var re=[],de=[],ge={},ye=[],Se,ve=function(){if(!Object.prototype.hasOwnProperty.call(Z,Se))return"continue";var Lr=w(Se);if(!Lr)return"continue";re.forEach(function(fd){if(X(fd,Lr))throw new TypeError('Conflicting signatures "'+m(fd)+'" and "'+m(Lr)+'".')}),re.push(Lr);var TL=de.length;de.push(Z[Se]);var Soe=Lr.map(y),ix=void 0,ax=Uo(V(Soe)),EL;try{for(ax.s();!(EL=ax.n()).done;){ix=EL.value;var AL=m(ix);ye.push({params:ix,name:AL,fn:TL}),ix.every(function(fd){return!fd.hasConversion})&&(ge[AL]=TL)}}catch(fd){ax.e(fd)}finally{ax.f()}};for(Se in Z)var Ce=ve();ye.sort($);var Pe=j(de,ge,sg),at;for(at in ge)Object.prototype.hasOwnProperty.call(ge,at)&&(ge[at]=Pe[ge[at]]);for(var Ae=[],er=new Map,Hn=0,ei=ye;Hn<ei.length;Hn++)at=ei[Hn],er.has(at.name)||(at.fn=Pe[at.fn],Ae.push(at),er.set(at.name,at));for(var dr=Ae[0]&&Ae[0].params.length<=2&&!b(Ae[0].params),Gi=Ae[1]&&Ae[1].params.length<=2&&!b(Ae[1].params),Tr=Ae[2]&&Ae[2].params.length<=2&&!b(Ae[2].params),qa=Ae[3]&&Ae[3].params.length<=2&&!b(Ae[3].params),Si=Ae[4]&&Ae[4].params.length<=2&&!b(Ae[4].params),Di=Ae[5]&&Ae[5].params.length<=2&&!b(Ae[5].params),Yc=dr&&Gi&&Tr&&qa&&Si&&Di,Hi=0;Hi<Ae.length;++Hi)Ae[Hi].test=D(Ae[Hi].params);for(var Zc=dr?C(Ae[0].params[0]):Qa,rx=Gi?C(Ae[1].params[0]):Qa,ag=Tr?C(Ae[2].params[0]):Qa,Zae=qa?C(Ae[3].params[0]):Qa,Qae=Si?C(Ae[4].params[0]):Qa,Jae=Di?C(Ae[5].params[0]):Qa,eoe=dr?C(Ae[0].params[1]):Qa,toe=Gi?C(Ae[1].params[1]):Qa,noe=Tr?C(Ae[2].params[1]):Qa,roe=qa?C(Ae[3].params[1]):Qa,ioe=Si?C(Ae[4].params[1]):Qa,aoe=Di?C(Ae[5].params[1]):Qa,og=0;og<Ae.length;++og)Ae[og].implementation=O(Ae[og].params,Ae[og].fn);var ooe=dr?Ae[0].implementation:xd,soe=Gi?Ae[1].implementation:xd,uoe=Tr?Ae[2].implementation:xd,loe=qa?Ae[3].implementation:xd,coe=Si?Ae[4].implementation:xd,foe=Di?Ae[5].implementation:xd,hoe=dr?Ae[0].params.length:-1,doe=Gi?Ae[1].params.length:-1,poe=Tr?Ae[2].params.length:-1,voe=qa?Ae[3].params.length:-1,goe=Si?Ae[4].params.length:-1,moe=Di?Ae[5].params.length:-1,yoe=Yc?6:0,xoe=Ae.length,woe=Ae.map(function(ba){return ba.test}),boe=Ae.map(function(ba){return ba.implementation}),Coe=function(){for(var Lr=yoe;Lr<xoe;Lr++)if(woe[Lr](arguments))return boe[Lr].apply(this,arguments);return o.onMismatch(G,arguments,Ae)};function sg(ba,Lr){return arguments.length===hoe&&Zc(ba)&&eoe(Lr)?ooe.apply(this,arguments):arguments.length===doe&&rx(ba)&&toe(Lr)?soe.apply(this,arguments):arguments.length===poe&&ag(ba)&&noe(Lr)?uoe.apply(this,arguments):arguments.length===voe&&Zae(ba)&&roe(Lr)?loe.apply(this,arguments):arguments.length===goe&&Qae(ba)&&ioe(Lr)?coe.apply(this,arguments):arguments.length===moe&&Jae(ba)&&aoe(Lr)?foe.apply(this,arguments):Coe.apply(this,arguments)}try{Object.defineProperty(sg,"name",{value:G})}catch{}return sg.signatures=ge,sg._typedFunctionData={signatures:Ae,signatureMap:er},sg}function ne(G,Z,re){throw A(G,Z,re)}function ue(G){return oe(G,0,G.length-1)}function te(G){return G[G.length-1]}function oe(G,Z,re){return Array.prototype.slice.call(G,Z,re)}function ce(G,Z){for(var re=0;re<G.length;re++)if(Z(G[re]))return G[re]}function pe(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function me(){var G=ue(arguments).map(function(re){return m(w(re))}),Z=te(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return _e(G,Z)}function _e(G,Z){return{referTo:{references:G,callback:Z}}}function Ne(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function ke(G){return G&&fp(G.referTo)==="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function Ve(G){return G&&fp(G.referToSelf)==="object"&&typeof G.referToSelf.callback=="function"}function je(G,Z){if(!G)return Z;if(Z&&Z!==G){var re=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw re.data={actual:Z,expected:G},re}return G}function ct(G){var Z;for(var re in G)Object.prototype.hasOwnProperty.call(G,re)&&(h(G[re])||typeof G[re].signature=="string")&&(Z=je(Z,G[re].name));return Z}function rt(G,Z){var re;for(re in Z)if(Object.prototype.hasOwnProperty.call(Z,re)){if(re in G&&Z[re]!==G[re]){var de=new Error('Signature "'+re+'" is defined twice');throw de.data={signature:re,sourceFunction:Z[re],destFunction:G[re]},de}G[re]=Z[re]}}var xt=o;o=function(Z){for(var re=typeof Z=="string",de=re?1:0,ge=re?Z:"",ye={},Se=de;Se<arguments.length;++Se){var ve=arguments[Se],Ce={},Pe=void 0;if(typeof ve=="function"?(Pe=ve.name,typeof ve.signature=="string"?Ce[ve.signature]=ve:h(ve)&&(Ce=ve.signatures)):t(ve)&&(Ce=ve,re||(Pe=ct(ve))),Object.keys(Ce).length===0){var at=new TypeError("Argument to 'typed' at index "+Se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw at.data={index:Se,argument:ve},at}re||(ge=je(ge,Pe)),rt(ye,Ce)}return Y(ge||"",ye)},o.create=MJ,o.createCount=xt.createCount,o.onMismatch=ne,o.throwMismatchError=ne,o.createError=A,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=s,o.referTo=me,o.referToSelf=Ne,o.convert=v,o.findSignature=d,o.find=p,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,Z){var re="any";Z!==!1&&r.has("Object")&&(re="Object"),o.addTypes([G],re)};function it(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){it(G);var Z=s(G.to);if(Z.conversionsTo.every(function(re){return re.from!==G.from}))Z.conversionsTo.push({from:G.from,convert:G.convert,index:a++});else throw new Error('There is already a conversion from "'+G.from+'" to "'+Z.name+'"')},o.addConversions=function(G){G.forEach(o.addConversion)},o.removeConversion=function(G){it(G);var Z=s(G.to),re=ce(Z.conversionsTo,function(ge){return ge.from===G.from});if(!re)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(re.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");var de=Z.conversionsTo.indexOf(re);Z.conversionsTo.splice(de,1)},o.resolve=function(G,Z){if(!h(G))throw new TypeError(s8);for(var re=G._typedFunctionData.signatures,de=0;de<re.length;++de)if(re[de].test(Z))return re[de];return null},o}const hp=MJ();function nr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function NE(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!nr(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!nr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),a="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function mN(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n="auto",r,i;if(e&&(e.notation&&(n=e.notation),xn(e)?r=e:xn(e.precision)&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return SVe(t,r);case"exponential":return OJ(t,r);case"engineering":return CVe(t,r);case"bin":return NE(t,2,i);case"oct":return NE(t,8,i);case"hex":return NE(t,16,i);case"auto":return DVe(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function g_(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function CVe(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=g_(t),r=m_(n,e),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(xn(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),u=0;u<s;u++)a.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),h=xn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+o.toString();return r.sign+d}function SVe(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=g_(t),r=typeof e=="number"?m_(n,n.exponent+1+e):n,i=r.coefficients,a=r.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Rp(o-i.length))),a<0&&(i=Rp(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function OJ(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=g_(t),r=e?m_(n,e):n,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Rp(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function DVe(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=n&&n.lowerExp!==void 0?n.lowerExp:-3,i=n&&n.upperExp!==void 0?n.upperExp:5,a=g_(t),o=e?m_(a,e):a;if(o.exponent<r||o.exponent>=i)return OJ(t,e);var s=o.coefficients,u=o.exponent;s.length<e&&(s=s.concat(Rp(e-s.length))),s=s.concat(Rp(u-s.length+1+(s.length<e?e-s.length:0))),s=Rp(-u).concat(s);var l=u>0?u:0;return l<s.length-1&&s.splice(l+1,0,"."),o.sign+s.join("")}function m_(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),n.exponent++,a++),a--,r[a]++}}return n}function Rp(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function _Ve(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var TVe=Number.EPSILON||2220446049250313e-31;function FC(t,e,n){if(n==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<TVe?!0:r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}function RE(t,e,n){var r=t.constructor,i=new r(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!nr(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function EVe(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",r,i;if(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?r=e:e.precision!==void 0&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return kVe(t,r);case"exponential":return u8(t,r);case"engineering":return AVe(t,r);case"bin":return RE(t,2,i);case"oct":return RE(t,8,i);case"hex":return RE(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,u=t.toSignificantDigits(r),l=u.e;return l>=a&&l<o?s=u.toFixed():s=u8(t,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function AVe(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.indexOf("e")!==-1){var o=t.constructor;a=new o(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}function u8(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function kVe(t,e){return t.toFixed(e)}function tr(t,e){var n=IVe(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function IVe(t,e){if(typeof t=="number")return mN(t,e);if(Ir(t))return EVe(t,e);if(NVe(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return FJ(t,e);if(Bs(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>'"'+r+'": '+tr(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function FJ(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=FJ(t[i],e);return n+="]",n}else return tr(t,e)}function NVe(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Gt(t,e,n){if(!(this instanceof Gt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Gt.prototype=new RangeError;Gt.prototype.constructor=RangeError;Gt.prototype.name="DimensionError";Gt.prototype.isDimensionError=!0;function jc(t,e,n){if(!(this instanceof jc))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}jc.prototype=new RangeError;jc.prototype.constructor=RangeError;jc.prototype.name="IndexError";jc.prototype.isIndexError=!0;function ca(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function PJ(t,e,n){var r,i=t.length;if(i!==e[n])throw new Gt(i,e[n]);if(n<e.length-1){var a=n+1;for(r=0;r<i;r++){var o=t[r];if(!Array.isArray(o))throw new Gt(e.length-1,e.length,"<");PJ(t[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new Gt(e.length+1,e.length,">")}function l8(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new Gt(t.length,0)}else PJ(t,e,0)}function Tn(t,e){if(t!==void 0){if(!xn(t)||!nr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new jc(t,e)}}function yN(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!xn(i)||!nr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tr(e)+")")}),(xn(t)||Ir(t))&&(t=[t]);var r=n!==void 0?n:0;return xN(t,e,0,r),t}function xN(t,e,n,r){var i,a,o=t.length,s=e[n],u=Math.min(o,s);if(t.length=s,n<e.length-1){var l=n+1;for(i=0;i<u;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),xN(a,e,l,r);for(i=u;i<s;i++)a=[],t[i]=a,xN(a,e,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=r}}function LJ(t,e){var n=$Ve(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Gt(0,r,"!=");e=kP(e,r);var i=zJ(e);if(r!==i)throw new Gt(i,r,"!=");try{return RVe(n,e)}catch(a){throw a instanceof Gt?new Gt(i,r,"!="):a}}function kP(t,e){var n=zJ(t),r=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,u=e%n===0;if(s)if(u)r[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function zJ(t){return t.reduce((e,n)=>e*n,1)}function RVe(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var o=n.length/a,s=0;s<o;s++)r.push(n.slice(s*a,(s+1)*a));n=r}return n}function BJ(t,e,n,r){var i=r||ca(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=VJ(t,e,0);i.length<e;)i.push(1);return t}function VJ(t,e,n){var r,i;if(Array.isArray(t)){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=VJ(t[r],e,a)}else for(var o=n;o<e;o++)t=[t];return t}function $Ve(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function PC(t,e){for(var n,r=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(r=a.length),o&&a.length!==r)return;var s=o?PC(a,e):e(a);if(n===void 0)n=s;else if(n!==s)return"mixed"}return n}function WJ(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Gt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=WJ(t[a],e[a],n,r+1);return i}else return t.concat(e)}function UJ(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return WJ(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function MVe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(h=>h.length),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],u=r[o],l=0;l<u;l++){var c=i-u+l;s[l]>a[c]&&(a[c]=s[l])}for(var f=0;f<e.length;f++)LC(e[f],a);return a}function LC(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var a=n-r+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[a]))}}function c8(t,e){var n=ca(t);if(yv(n,e))return t;LC(n,e);var r=MVe(n,e),i=r.length,a=[...Array(i-n.length).fill(1),...n],o=FVe(t);n.length<i&&(o=LJ(o,a),n=ca(o));for(var s=0;s<i;s++)n[s]<r[s]&&(o=OVe(o,r[s],s),n=ca(o));return o}function OVe(t,e,n){return UJ(...Array(e).fill(t),n)}function FVe(t){return wh([],t)}function et(t,e,n,r){function i(a){var o=yVe(a,e.map(zVe));return PVe(t,e,a),n(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function PVe(t,e,n){var r=e.filter(a=>!LVe(a)).every(a=>n[a]!==void 0);if(!r){var i=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function LVe(t){return t&&t[0]==="?"}function zVe(t){return t&&t[0]==="?"?t.slice(1):t}function BVe(t,e){if(HJ(t)&&GJ(t,e))return t[e];throw typeof t[e]=="function"&&UVe(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function VVe(t,e,n){if(HJ(t)&&GJ(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function WVe(t,e){return e in t}function GJ(t,e){return!t||typeof t!="object"?!1:I0(GVe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function UVe(t,e){return t==null||typeof t[e]!="function"||I0(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:I0(HVe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function HJ(t){return typeof t=="object"&&t&&t.constructor===Object}var GVe={length:!0,name:!0},HVe={toString:!0,valueOf:!0,toLocaleString:!0};class jVe{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return BVe(this.wrappedObject,e)}set(e,n){return VVe(this.wrappedObject,e,n),this}has(e){return WVe(this.wrappedObject,e)}}function qVe(t){return t?t instanceof Map||t instanceof jVe||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var jJ=function(){return jJ=hp.create,hp},XVe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],KVe=et("typed",XVe,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:a}=e,o=jJ();return o.clear(),o.addTypes([{name:"number",test:xn},{name:"Complex",test:IJ},{name:"BigNumber",test:Ir},{name:"Fraction",test:NJ},{name:"Unit",test:RJ},{name:"identifier",test:s=>Bs&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:Bs},{name:"Chain",test:gVe},{name:"Array",test:_n},{name:"Matrix",test:Mn},{name:"DenseMatrix",test:W6e},{name:"SparseMatrix",test:U6e},{name:"Range",test:G6e},{name:"Index",test:AP},{name:"boolean",test:H6e},{name:"ResultSet",test:j6e},{name:"Help",test:q6e},{name:"function",test:X6e},{name:"Date",test:K6e},{name:"RegExp",test:Y6e},{name:"null",test:Q6e},{name:"undefined",test:J6e},{name:"AccessorNode",test:eVe},{name:"ArrayNode",test:tVe},{name:"AssignmentNode",test:nVe},{name:"BlockNode",test:rVe},{name:"ConditionalNode",test:iVe},{name:"ConstantNode",test:aVe},{name:"FunctionNode",test:sVe},{name:"FunctionAssignmentNode",test:oVe},{name:"IndexNode",test:uVe},{name:"Node",test:lVe},{name:"ObjectNode",test:cVe},{name:"OperatorNode",test:fVe},{name:"ParenthesisNode",test:hVe},{name:"RangeNode",test:dVe},{name:"RelationalNode",test:pVe},{name:"SymbolNode",test:vVe},{name:"Map",test:qVe},{name:"Object",test:Z6e}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||$E(u),_Ve(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||jx(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||jx(u),new r(u.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||jx(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||ME(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||$E(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(u){a||ME(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||jx(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||$E(u),new n(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||ME(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||YVe(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&k0(u[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&k0(u[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function $E(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function jx(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function YVe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ME(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var dp=9e15,qc=1e9,wN="0123456789abcdef",zC="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",BC="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",bN={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-dp,maxE:dp,crypto:!1},qJ,Lu,lt=!0,y_="[DecimalError] ",_c=y_+"Invalid argument: ",XJ=y_+"Precision limit exceeded",KJ=y_+"crypto unavailable",YJ="[object Decimal]",wi=Math.floor,gr=Math.pow,ZVe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,QVe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,JVe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ZJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ps=1e7,Qe=7,eWe=9007199254740991,tWe=zC.length-1,CN=BC.length-1,we={toStringTag:YJ};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Xe(t)};we.ceil=function(){return Xe(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(_c+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(t){var e,n,r,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,u=a.s,l=t.s;if(!o||!s)return!u||!l?NaN:u!==l?u:o===s?0:!o^u<0?1:-1;if(!o[0]||!s[0])return o[0]?u:s[0]?-l:0;if(u!==l)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=s.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==s[e])return o[e]>s[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};we.cosine=we.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Qe,r.rounding=1,n=nWe(r,nee(r,n)),r.precision=t,r.rounding=e,Xe(Lu==2||Lu==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var t,e,n,r,i,a,o,s,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(lt=!1,a=c.s*gr(c.s*c,1/3),!a||Math.abs(a)==1/0?(n=Gr(c.d),t=c.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=gr(n,1/3),t=wi((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(a.toString()),o=(t=f.precision)+3;;)if(s=r,u=s.times(s).times(s),l=u.plus(c),r=an(l.plus(c).times(s),l.plus(u),o+2,1),Gr(s.d).slice(0,o)===(n=Gr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Xe(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Xe(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return lt=!0,Xe(r,t,f.rounding,e)};we.decimalPlaces=we.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-wi(this.e/Qe))*Qe,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};we.dividedBy=we.div=function(t){return an(this,new this.constructor(t))};we.dividedToIntegerBy=we.divToInt=function(t){var e=this,n=e.constructor;return Xe(an(e,new n(t),0,1,1),n.precision,n.rounding)};we.equals=we.eq=function(t){return this.cmp(t)===0};we.floor=function(){return Xe(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){var e=this.cmp(t);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/w_(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=xv(o,1,a.times(e),new o(1),!0);for(var u,l=t,c=new o(8);l--;)u=a.times(a),a=s.minus(u.times(c.minus(u.times(c))));return Xe(a,o.precision=n,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=xv(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/w_(5,t)),i=xv(a,2,i,i,!0);for(var o,s=new a(5),u=new a(16),l=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(l))))}return a.precision=e,a.rounding=n,Xe(i,e,n,!0)};we.hyperbolicTangent=we.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,an(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};we.inverseCosine=we.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,a=n.rounding;return r!==-1?r===0?e.isNeg()?as(n,i,a):new n(0):new n(NaN):e.isZero()?as(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=as(n,i+4,a).times(.5),n.precision=i,n.rounding=a,t.minus(e))};we.inverseHyperbolicCosine=we.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,lt=!1,n=n.times(n).minus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};we.inverseHyperbolicSine=we.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,lt=!1,n=n.times(n).plus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Xe(new a(i),t,e,!0):(a.precision=n=r-i.e,i=an(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=as(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var t,e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=CN)return o=as(c,f+4,h).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=CN)return o=as(c,f+4,h).times(.5),o.s=l.s,o}for(c.precision=s=f+10,c.rounding=1,n=Math.min(28,s/Qe+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(lt=!1,e=Math.ceil(s/Qe),r=1,u=l.times(l),o=new c(l),i=l;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),lt=!0,Xe(o,c.precision=f,c.rounding=h,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&wi(this.e/Qe)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(lt=!1,s=f+d,o=Vl(l,s),r=e?VC(c,s+10):Vl(t,s),u=an(o,r,s,1),N0(u.d,i=f,h))do if(s+=10,o=Vl(l,s),r=e?VC(c,s+10):Vl(t,s),u=an(o,r,s,1),!a){+Gr(u.d).slice(i+1,i+15)+1==1e14&&(u=Xe(u,f+1,0));break}while(N0(u.d,i+=10,h));return lt=!0,Xe(u,f,h)};we.minus=we.sub=function(t){var e,n,r,i,a,o,s,u,l,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(l=d.d,h=t.d,s=p.precision,u=p.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else if(l[0])t=new p(d);else return new p(u===3?-0:0);return lt?Xe(t,s,u):t}if(n=wi(t.e/Qe),c=wi(d.e/Qe),l=l.slice(),a=c-n,a){for(f=a<0,f?(e=l,a=-a,o=h.length):(e=h,n=c,o=l.length),r=Math.max(Math.ceil(s/Qe),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=l.length,o=h.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=h[r]){f=l[r]<h[r];break}a=0}for(f&&(e=l,l=h,h=e,t.s=-t.s),o=l.length,r=h.length-o;r>0;--r)l[o++]=0;for(r=h.length;r>a;){if(l[--r]<h[r]){for(i=r;i&&l[--i]===0;)l[i]=ps-1;--l[i],l[r]+=ps}l[r]-=h[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=x_(l,n),lt?Xe(t,s,u):t):new p(u===3?-0:0)};we.modulo=we.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Xe(new r(n),r.precision,r.rounding):(lt=!1,r.modulo==9?(e=an(n,t.abs(),0,3,1),e.s*=t.s):e=an(n,t,0,r.modulo,1),e=e.times(t),lt=!0,n.minus(e))};we.naturalExponential=we.exp=function(){return SN(this)};we.naturalLogarithm=we.ln=function(){return Vl(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Xe(t)};we.plus=we.add=function(t){var e,n,r,i,a,o,s,u,l,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,s=h.precision,u=h.rounding,!l[0]||!c[0])return c[0]||(t=new h(f)),lt?Xe(t,s,u):t;if(a=wi(f.e/Qe),r=wi(t.e/Qe),l=l.slice(),i=a-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=a,o=l.length),a=Math.ceil(s/Qe),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/ps|0,l[i]%=ps;for(e&&(l.unshift(e),++r),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=x_(l,r),lt?Xe(t,s,u):t};we.precision=we.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(_c+t);return n.d?(e=QJ(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};we.round=function(){var t=this,e=t.constructor;return Xe(new e(t),t.e+1,e.rounding)};we.sine=we.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Qe,r.rounding=1,n=iWe(r,nee(r,n)),r.precision=t,r.rounding=e,Xe(Lu>2?n.neg():n,t,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var t,e,n,r,i,a,o=this,s=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(lt=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=Gr(s),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=wi((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(a=r,r=a.plus(an(o,a,n+2,1)).times(.5),Gr(a.d).slice(0,n)===(e=Gr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Xe(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Xe(r,u+1,1),t=!r.times(r).eq(o));break}return lt=!0,Xe(r,u,c.rounding,t)};we.tangent=we.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=an(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Xe(Lu==2||Lu==4?n.neg():n,t,e,!0)):new r(NaN)};we.times=we.mul=function(t){var e,n,r,i,a,o,s,u,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=wi(c.e/Qe)+wi(t.e/Qe),u=h.length,l=d.length,u<l&&(a=h,h=d,d=a,o=u,u=l,l=o),a=[],o=u+l,r=o;r--;)a.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=a[i]+d[r]*h[i-r-1]+e,a[i--]=s%ps|0,e=s/ps|0;a[i]=(a[i]+e)%ps|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=x_(a,n),lt?Xe(t,f.precision,f.rounding):t};we.toBinary=function(t,e){return IP(this,2,t,e)};we.toDecimalPlaces=we.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ma(t,0,qc),e===void 0?e=r.rounding:ma(e,0,8),Xe(n,t+n.e+1,e))};we.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=cu(r,!0):(ma(t,0,qc),e===void 0?e=i.rounding:ma(e,0,8),r=Xe(new i(r),t+1,e),n=cu(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=cu(i):(ma(t,0,qc),e===void 0?e=a.rounding:ma(e,0,8),r=Xe(new a(i),t+i.e+1,e),n=cu(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};we.toFraction=function(t){var e,n,r,i,a,o,s,u,l,c,f,h,d=this,p=d.d,v=d.constructor;if(!p)return new v(d);if(l=n=new v(1),r=u=new v(0),e=new v(r),a=e.e=QJ(p)-d.e-1,o=a%Qe,e.d[0]=gr(10,o<0?Qe+o:o),t==null)t=a>0?e:l;else{if(s=new v(t),!s.isInt()||s.lt(l))throw Error(_c+s);t=s.gt(e)?a>0?e:l:s}for(lt=!1,s=new v(Gr(p)),c=v.precision,v.precision=a=p.length*Qe*2;f=an(s,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=s.minus(f.times(i)),s=i;return i=an(t.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=d.s,h=an(l,r,a,1).minus(d).abs().cmp(an(u,n,a,1).minus(d).abs())<1?[l,r]:[u,n],v.precision=c,lt=!0,h};we.toHexadecimal=we.toHex=function(t,e){return IP(this,16,t,e)};we.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:ma(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(lt=!1,n=an(n,t,0,e,1).times(t),lt=!0,Xe(n)):(t.s=n.s,n=t),n};we.toNumber=function(){return+this};we.toOctal=function(t,e){return IP(this,8,t,e)};we.toPower=we.pow=function(t){var e,n,r,i,a,o,s=this,u=s.constructor,l=+(t=new u(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new u(gr(+s,l));if(s=new u(s),s.eq(1))return s;if(r=u.precision,a=u.rounding,t.eq(1))return Xe(s,r,a);if(e=wi(t.e/Qe),e>=t.d.length-1&&(n=l<0?-l:l)<=eWe)return i=JJ(u,s,n,r),t.s<0?new u(1).div(i):Xe(i,r,a);if(o=s.s,o<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return n=gr(+s,l),e=n==0||!isFinite(n)?wi(l*(Math.log("0."+Gr(s.d))/Math.LN10+s.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(lt=!1,u.rounding=s.s=1,n=Math.min(12,(e+"").length),i=SN(t.times(Vl(s,r+n)),r),i.d&&(i=Xe(i,r+5,1),N0(i.d,r,a)&&(e=r+10,i=Xe(SN(t.times(Vl(s,e+n)),e),e+5,1),+Gr(i.d).slice(r+1,r+15)+1==1e14&&(i=Xe(i,r+1,0)))),i.s=o,lt=!0,u.rounding=a,Xe(i,r,a))};we.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=cu(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(ma(t,1,qc),e===void 0?e=i.rounding:ma(e,0,8),r=Xe(new i(r),t,e),n=cu(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toSignificantDigits=we.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ma(t,1,qc),e===void 0?e=r.rounding:ma(e,0,8)),Xe(new r(n),t,e)};we.toString=function(){var t=this,e=t.constructor,n=cu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};we.truncated=we.trunc=function(){return Xe(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var t=this,e=t.constructor,n=cu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Gr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Qe-r.length,n&&(a+=Nl(n)),a+=r;o=t[e],r=o+"",n=Qe-r.length,n&&(a+=Nl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function ma(t,e,n){if(t!==~~t||t<e||t>n)throw Error(_c+t)}function N0(t,e,n,r){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Qe,i=0):(i=Math.ceil((e+1)/Qe),e%=Qe),a=gr(10,Qe-e),s=t[i]%a|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(t[i+1]/a/100|0)==gr(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(r||n<4)&&s==9999||!r&&n>3&&s==4999):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==gr(10,e-3)-1,o}function tb(t,e,n){for(var r,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=wN.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function nWe(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/w_(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=xv(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var an=function(){function t(r,i,a){var o,s=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+s,r[u]=o%a|0,s=o/a|0;return s&&r.unshift(s),r}function e(r,i,a,o){var s,u;if(a!=o)u=a>o?1:-1;else for(s=u=0;s<a;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,a,o){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,s,u){var l,c,f,h,d,p,v,m,g,y,x,w,b,C,D,S,_,T,E,A,N=r.constructor,R=r.s==i.s?1:-1,M=r.d,$=i.d;if(!M||!M[0]||!$||!$[0])return new N(!r.s||!i.s||(M?$&&M[0]==$[0]:!$)?NaN:M&&M[0]==0||!$?R*0:R/0);for(u?(d=1,c=r.e-i.e):(u=ps,d=Qe,c=wi(r.e/d)-wi(i.e/d)),E=$.length,_=M.length,g=new N(R),y=g.d=[],f=0;$[f]==(M[f]||0);f++);if($[f]>(M[f]||0)&&c--,a==null?(C=a=N.precision,o=N.rounding):s?C=a+(r.e-i.e)+1:C=a,C<0)y.push(1),p=!0;else{if(C=C/d+2|0,f=0,E==1){for(h=0,$=$[0],C++;(f<_||h)&&C--;f++)D=h*u+(M[f]||0),y[f]=D/$|0,h=D%$|0;p=h||f<_}else{for(h=u/($[0]+1)|0,h>1&&($=t($,h,u),M=t(M,h,u),E=$.length,_=M.length),S=E,x=M.slice(0,E),w=x.length;w<E;)x[w++]=0;A=$.slice(),A.unshift(0),T=$[0],$[1]>=u/2&&++T;do h=0,l=e($,x,E,w),l<0?(b=x[0],E!=w&&(b=b*u+(x[1]||0)),h=b/T|0,h>1?(h>=u&&(h=u-1),v=t($,h,u),m=v.length,w=x.length,l=e(v,x,m,w),l==1&&(h--,n(v,E<m?A:$,m,u))):(h==0&&(l=h=1),v=$.slice()),m=v.length,m<w&&v.unshift(0),n(x,v,w,u),l==-1&&(w=x.length,l=e($,x,E,w),l<1&&(h++,n(x,E<w?A:$,w,u))),w=x.length):l===0&&(h++,x=[0]),y[f++]=h,l&&x[0]?x[w++]=M[S]||0:(x=[M[S]],w=1);while((S++<_||x[0]!==void 0)&&C--);p=x[0]!==void 0}y[0]||y.shift()}if(d==1)g.e=c,qJ=p;else{for(f=1,h=y[0];h>=10;h/=10)f++;g.e=f+c*d-1,Xe(g,s?a+g.e+1:a,o,p)}return g}}();function Xe(t,e,n,r){var i,a,o,s,u,l,c,f,h,d=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=Qe,o=e,c=f[h=0],u=c/gr(10,i-o-1)%10|0;else if(h=Math.ceil((a+1)/Qe),s=f.length,h>=s)if(r){for(;s++<=h;)f.push(0);c=u=0,i=1,a%=Qe,o=a-Qe+1}else break e;else{for(c=s=f[h],i=1;s>=10;s/=10)i++;a%=Qe,o=a-Qe+i,u=o<0?0:c/gr(10,i-o-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(o<0?c:c%gr(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?c/gr(10,i-o):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=gr(10,(Qe-e%Qe)%Qe),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=h,s=1,h--):(f.length=h+1,s=gr(10,Qe-a),f[h]=o>0?(c/gr(10,i-o)%gr(10,o)|0)*s:0),l)for(;;)if(h==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==ps&&(f[0]=1));break}else{if(f[h]+=s,f[h]!=ps)break;f[h--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return lt&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function cu(t,e,n){if(!t.isFinite())return tee(t);var r,i=t.e,a=Gr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Nl(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Nl(-i-1)+a,n&&(r=n-o)>0&&(a+=Nl(r))):i>=o?(a+=Nl(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Nl(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Nl(r))),a}function x_(t,e){var n=t[0];for(e*=Qe;n>=10;n/=10)e++;return e}function VC(t,e,n){if(e>tWe)throw lt=!0,n&&(t.precision=n),Error(XJ);return Xe(new t(zC),e,1,!0)}function as(t,e,n){if(e>CN)throw Error(XJ);return Xe(new t(BC),e,n,!0)}function QJ(t){var e=t.length-1,n=e*Qe+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Nl(t){for(var e="";t--;)e+="0";return e}function JJ(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/Qe+4);for(lt=!1;;){if(n%2&&(a=a.times(e),h8(a.d,o)&&(i=!0)),n=wi(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),h8(e.d,o)}return lt=!0,a}function f8(t){return t.d[t.d.length-1]&1}function eee(t,e,n){for(var r,i=new t(e[0]),a=0;++a<e.length;)if(r=new t(e[a]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function SN(t,e){var n,r,i,a,o,s,u,l=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(lt=!1,u=p):u=e,s=new h(.03125);t.e>-2;)t=t.times(s),f+=5;for(r=Math.log(gr(2,f))/Math.LN10*2+5|0,u+=r,n=a=o=new h(1),h.precision=u;;){if(a=Xe(a.times(t),u,1),n=n.times(++c),s=o.plus(an(a,n,u,1)),Gr(s.d).slice(0,u)===Gr(o.d).slice(0,u)){for(i=f;i--;)o=Xe(o.times(o),u,1);if(e==null)if(l<3&&N0(o.d,u-r,d,l))h.precision=u+=10,n=a=s=new h(1),c=0,l++;else return Xe(o,h.precision=p,d,lt=!0);else return h.precision=p,o}o=s}}function Vl(t,e){var n,r,i,a,o,s,u,l,c,f,h,d=1,p=10,v=t,m=v.d,g=v.constructor,y=g.rounding,x=g.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(lt=!1,c=x):c=e,g.precision=c+=p,n=Gr(m),r=n.charAt(0),Math.abs(a=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Gr(v.d),r=n.charAt(0),d++;a=v.e,r>1?(v=new g("0."+n),a++):v=new g(r+"."+n.slice(1))}else return l=VC(g,c+2,x).times(a+""),v=Vl(new g(r+"."+n.slice(1)),c-p).plus(l),g.precision=x,e==null?Xe(v,x,y,lt=!0):v;for(f=v,u=o=v=an(v.minus(1),v.plus(1),c,1),h=Xe(v.times(v),c,1),i=3;;){if(o=Xe(o.times(h),c,1),l=u.plus(an(o,new g(i),c,1)),Gr(l.d).slice(0,c)===Gr(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus(VC(g,c+2,x).times(a+""))),u=an(u,new g(d),c,1),e==null)if(N0(u.d,c-p,y,s))g.precision=c+=p,l=o=v=an(f.minus(1),f.plus(1),c,1),h=Xe(v.times(v),c,1),i=s=1;else return Xe(u,g.precision=x,y,lt=!0);else return g.precision=x,u;u=l,i+=2}}function tee(t){return String(t.s*t.s/0)}function DN(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Qe,n<0&&(r+=Qe),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qe;r<i;)t.d.push(+e.slice(r,r+=Qe));e=e.slice(r),r=Qe-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function rWe(t,e){var n,r,i,a,o,s,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),ZJ.test(e))return DN(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(QVe.test(e))n=16,e=e.toLowerCase();else if(ZVe.test(e))n=2;else if(JVe.test(e))n=8;else throw Error(_c+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=JJ(r,new r(n),a,a*2)),l=tb(e,n,ps),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new r(t.s*0):(t.e=x_(l,c),t.d=l,lt=!1,o&&(t=an(t,i,s*4)),u&&(t=t.times(Math.abs(u)<54?gr(2,u):wv.pow(2,u))),lt=!0,t)}function iWe(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:xv(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/w_(5,n)),e=xv(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function xv(t,e,n,r,i){var a,o,s,u,l=t.precision,c=Math.ceil(l/Qe);for(lt=!1,u=n.times(n),s=new t(r);;){if(o=an(s.times(u),new t(e++*e++),l,1),s=i?r.plus(o):r.minus(o),r=an(o.times(u),new t(e++*e++),l,1),o=s.plus(r),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=r,r=o,o=a}return lt=!0,o.d.length=c+1,o}function w_(t,e){for(var n=t;--e;)n*=t;return n}function nee(t,e){var n,r=e.s<0,i=as(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Lu=r?4:1,e;if(n=e.divToInt(i),n.isZero())Lu=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return Lu=f8(n)?r?2:3:r?4:1,e;Lu=f8(n)?r?1:4:r?3:2}return e.minus(i).abs()}function IP(t,e,n,r){var i,a,o,s,u,l,c,f,h,d=t.constructor,p=n!==void 0;if(p?(ma(n,1,qc),r===void 0?r=d.rounding:ma(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())c=tee(t);else{for(c=cu(t),o=c.indexOf("."),p?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-o,h.d=tb(cu(h),10,i),h.e=h.d.length),f=tb(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?a--:(t=new d(t),t.d=f,t.e=a,t=an(t,h,n,r,0,i),f=t.d,a=t.e,l=qJ),o=f[n],s=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(t.s<0?3:2)):o>s||o===s&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=wN.charAt(f[o]);if(p){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)c+="0";for(f=tb(c,i,e),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=wN.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function h8(t,e){if(t.length>e)return t.length=e,!0}function aWe(t){return new this(t).abs()}function oWe(t){return new this(t).acos()}function sWe(t){return new this(t).acosh()}function uWe(t,e){return new this(t).plus(e)}function lWe(t){return new this(t).asin()}function cWe(t){return new this(t).asinh()}function fWe(t){return new this(t).atan()}function hWe(t){return new this(t).atanh()}function dWe(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=as(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?as(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=as(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(an(t,e,a,1)),e=as(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(an(t,e,a,1)),n}function pWe(t){return new this(t).cbrt()}function vWe(t){return Xe(t=new this(t),t.e+1,2)}function gWe(t,e,n){return new this(t).clamp(e,n)}function mWe(t){if(!t||typeof t!="object")throw Error(y_+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,qc,"rounding",0,8,"toExpNeg",-dp,0,"toExpPos",0,dp,"maxE",0,dp,"minE",-dp,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=bN[n]),(r=t[n])!==void 0)if(wi(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(_c+n+": "+r);if(n="crypto",i&&(this[n]=bN[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(KJ);else this[n]=!1;else throw Error(_c+n+": "+r);return this}function yWe(t){return new this(t).cos()}function xWe(t){return new this(t).cosh()}function ree(t){var e,n,r;function i(a){var o,s,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,d8(a)){l.s=a.s,lt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;lt?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[a]):(l.e=o,l.d=[a]);return}else if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return DN(l,a.toString())}else if(u!=="string")throw Error(_c+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(s===43&&(a=a.slice(1)),l.s=1),ZJ.test(a)?DN(l,a):rWe(l,a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=mWe,i.clone=ree,i.isDecimal=d8,i.abs=aWe,i.acos=oWe,i.acosh=sWe,i.add=uWe,i.asin=lWe,i.asinh=cWe,i.atan=fWe,i.atanh=hWe,i.atan2=dWe,i.cbrt=pWe,i.ceil=vWe,i.clamp=gWe,i.cos=yWe,i.cosh=xWe,i.div=wWe,i.exp=bWe,i.floor=CWe,i.hypot=SWe,i.ln=DWe,i.log=_We,i.log10=EWe,i.log2=TWe,i.max=AWe,i.min=kWe,i.mod=IWe,i.mul=NWe,i.pow=RWe,i.random=$We,i.round=MWe,i.sign=OWe,i.sin=FWe,i.sinh=PWe,i.sqrt=LWe,i.sub=zWe,i.sum=BWe,i.tan=VWe,i.tanh=WWe,i.trunc=UWe,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function wWe(t,e){return new this(t).div(e)}function bWe(t){return new this(t).exp()}function CWe(t){return Xe(t=new this(t),t.e+1,3)}function SWe(){var t,e,n=new this(0);for(lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return lt=!0,new this(1/0);n=e}return lt=!0,n.sqrt()}function d8(t){return t instanceof wv||t&&t.toStringTag===YJ||!1}function DWe(t){return new this(t).ln()}function _We(t,e){return new this(t).log(e)}function TWe(t){return new this(t).log(2)}function EWe(t){return new this(t).log(10)}function AWe(){return eee(this,arguments,"lt")}function kWe(){return eee(this,arguments,"gt")}function IWe(t,e){return new this(t).mod(e)}function NWe(t,e){return new this(t).mul(e)}function RWe(t,e){return new this(t).pow(e)}function $We(t){var e,n,r,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:ma(t,1,qc),r=Math.ceil(t/Qe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=r/4}else throw Error(KJ);else for(;a<r;)s[a++]=Math.random()*1e7|0;for(r=s[--a],t%=Qe,r&&t&&(i=gr(10,Qe-t),s[a]=(r/i|0)*i);s[a]===0;a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=Qe)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<Qe&&(n-=Qe-r)}return o.e=n,o.d=s,o}function MWe(t){return Xe(t=new this(t),t.e+1,this.rounding)}function OWe(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function FWe(t){return new this(t).sin()}function PWe(t){return new this(t).sinh()}function LWe(t){return new this(t).sqrt()}function zWe(t,e){return new this(t).sub(e)}function BWe(){var t=0,e=arguments,n=new this(e[t]);for(lt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return lt=!0,Xe(n,this.precision,this.rounding)}function VWe(t){return new this(t).tan()}function WWe(t){return new this(t).tanh()}function UWe(t){return Xe(t=new this(t),t.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var wv=we.constructor=ree(bN);zC=new wv(zC);BC=new wv(BC);var GWe="BigNumber",HWe=["?on","config"],jWe=et(GWe,HWe,t=>{var{on:e,config:n}=t,r=wv.clone({precision:n.precision,modulo:wv.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),iee={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var d=f*f;return d*(d*(d*(d*(d*(d*(d*(d/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,h){var d=Math.abs(f),p=Math.abs(h);return d<3e3&&p<3e3?Math.sqrt(d*d+p*p):(d<p?(d=p,p=f/h):p=h/f,d*Math.sqrt(1+p*p))},s=function(){throw SyntaxError("Invalid Param")};function u(f,h){var d=Math.abs(f),p=Math.abs(h);return f===0?Math.log(p):h===0?Math.log(d):d<3e3&&p<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var l=function(f,h){var d={re:0,im:0};if(f==null)d.re=d.im=0;else if(h!==void 0)d.re=f,d.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)d.re=f.re,d.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;d.re=f.abs*Math.cos(f.arg),d.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;d.re=f.r*Math.cos(f.phi),d.im=f.r*Math.sin(f.phi)}else f.length===2?(d.re=f[0],d.im=f[1]):s();break;case"string":d.im=d.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;p===null&&s();for(var g=0;g<p.length;g++){var y=p[g];y===" "||y==="	"||y===`
`||(y==="+"?v++:y==="-"?m++:y==="i"||y==="I"?(v+m===0&&s(),p[g+1]!==" "&&!isNaN(p[g+1])?(d.im+=parseFloat((m%2?"-":"")+p[g+1]),g++):d.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(y))&&s(),p[g+1]==="i"||p[g+1]==="I"?(d.im+=parseFloat((m%2?"-":"")+y),g++):d.re+=parseFloat((m%2?"-":"")+y),v=m=0))}v+m>0&&s();break;case"number":d.im=0,d.re=f;break;default:s()}return isNaN(d.re)||isNaN(d.im),d};function c(f,h){if(!(this instanceof c))return new c(f,h);var d=l(f,h);this.re=d.re,this.im=d.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re+d.re,this.im+d.im)},sub:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re-d.re,this.im-d.im)},mul:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isZero()||this.isZero()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:d.im===0&&this.im===0?new c(this.re*d.re,0):new c(this.re*d.re-this.im*d.im,this.re*d.im+this.im*d.re)},div:function(f,h){var d=new c(f,h);if(this.isZero()&&d.isZero()||this.isInfinite()&&d.isInfinite())return c.NAN;if(this.isInfinite()||d.isZero())return c.INFINITY;if(this.isZero()||d.isInfinite())return c.ZERO;f=this.re,h=this.im;var p=d.re,v=d.im,m,g;return v===0?new c(f/p,h/p):Math.abs(p)<Math.abs(v)?(g=p/v,m=p*g+v,new c((f*g+h)/m,(h*g-f)/m)):(g=v/p,m=v*g+p,new c((f+h*g)/m,(h-f*g)/m))},pow:function(f,h){var d=new c(f,h);if(f=this.re,h=this.im,d.isZero())return c.ONE;if(d.im===0){if(h===0&&f>0)return new c(Math.pow(f,d.re),0);if(f===0)switch((d.re%4+4)%4){case 0:return new c(Math.pow(h,d.re),0);case 1:return new c(0,Math.pow(h,d.re));case 2:return new c(-Math.pow(h,d.re),0);case 3:return new c(0,-Math.pow(h,d.re))}}if(f===0&&h===0&&d.re>0&&d.im>=0)return c.ZERO;var p=Math.atan2(h,f),v=u(f,h);return f=Math.exp(d.re*v-d.im*p),h=d.im*v+d.re*p,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,d=this.abs(),p,v;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(d+f))}else p=Math.abs(h)/Math.sqrt(2*(d-f));return f<=0?v=.5*Math.sqrt(2*(d-f)):v=Math.abs(h)/Math.sqrt(2*(d+f)),new c(p,h<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+a(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(u(f,h),Math.atan2(h,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*r(h),Math.cos(f)*i(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*r(h),-Math.sin(f)*i(h))},tan:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)+r(h);return new c(Math.sin(f)/d,i(h)/d)},cot:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)-r(h);return new c(-Math.sin(f)/d,i(h)/d)},sec:function(){var f=this.re,h=this.im,d=.5*r(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(h)/d,Math.sin(f)*i(h)/d)},csc:function(){var f=this.re,h=this.im,d=.5*r(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(h)/d,-Math.cos(f)*i(h)/d)},asin:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var d=f*f+(1-h)*(1-h),p=new c((1-h*h-f*f)/d,-2*f/d).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),r(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(r(f)*Math.cos(h),i(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,d=r(f)+Math.cos(h);return new c(i(f)/d,Math.sin(h)/d)},coth:function(){var f=2*this.re,h=2*this.im,d=r(f)-Math.cos(h);return new c(i(f)/d,-Math.sin(h)/d)},csch:function(){var f=this.re,h=this.im,d=Math.cos(2*h)-r(2*f);return new c(-2*i(f)*Math.cos(h)/d,2*r(f)*Math.sin(h)/d)},sech:function(){var f=this.re,h=this.im,d=Math.cos(2*h)+r(2*f);return new c(2*r(f)*Math.cos(h)/d,-2*i(f)*Math.sin(h)/d)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,d=f>1&&h===0,p=1-f,v=1+f,m=p*p+h*h,g=m!==0?new c((v*p-h*h)/m,(h*p+v*h)/m):new c(f!==-1?f/0:0,h!==0?h/0:0),y=g.re;return g.re=u(g.re,g.im)/2,g.im=Math.atan2(g.im,y)/2,d&&(g.im=-g.im),g},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,d=f*f+h*h;return new c(f/d,-h/d)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var d=new c(f,h);return Math.abs(d.re-this.re)<=c.EPSILON&&Math.abs(d.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,d="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?d+f:(f!==0?(d+=f,d+=" ",h<0?(h=-h,d+="-"):d+="+",d+=" "):h<0&&(h=-h,d+="-"),h!==1&&(d+=h),d+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(iee);var qWe=iee.exports;const zr=nl(qWe);var XWe="Complex",KWe=[],YWe=et(XWe,KWe,()=>(Object.defineProperty(zr,"name",{value:"Complex"}),zr.prototype.constructor=zr,zr.prototype.type="Complex",zr.prototype.isComplex=!0,zr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},zr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},zr.prototype.format=function(t){var e="",n=this.im,r=this.re,i=mN(this.re,t),a=mN(this.im,t),o=xn(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(r/n)<s&&(r=0),Math.abs(n/r)<s&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+a+"i",e},zr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return zr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(xn(n)){if(RJ(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),xn(r))return new zr({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},zr.prototype.valueOf=zr.prototype.toString,zr.fromJSON=function(t){return new zr(t)},zr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},zr),{isClass:!0}),aee={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=2e3,i={s:1,n:0,d:1};function a(g,y){if(isNaN(g=parseInt(g,10)))throw v();return g*y}function o(g,y){if(y===0)throw p();var x=Object.create(d.prototype);x.s=g<0?-1:1,g=g<0?-g:g;var w=h(g,y);return x.n=g/w,x.d=y/w,x}function s(g){for(var y={},x=g,w=2,b=4;b<=x;){for(;x%w===0;)x/=w,y[w]=(y[w]||0)+1;b+=1+2*w++}return x!==g?x>1&&(y[x]=(y[x]||0)+1):y[g]=(y[g]||0)+1,y}var u=function(g,y){var x=0,w=1,b=1,C=0,D=0,S=0,_=1,T=1,E=0,A=1,N=1,R=1,M=1e7,$;if(g!=null)if(y!==void 0){if(x=g,w=y,b=x*w,x%1!==0||w%1!==0)throw m()}else switch(typeof g){case"object":{if("d"in g&&"n"in g)x=g.n,w=g.d,"s"in g&&(x*=g.s);else if(0 in g)x=g[0],1 in g&&(w=g[1]);else throw v();b=x*w;break}case"number":{if(g<0&&(b=g,g=-g),g%1===0)x=g;else if(g>0){for(g>=1&&(T=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=T);A<=M&&R<=M;)if($=(E+N)/(A+R),g===$){A+R<=M?(x=E+N,w=A+R):R>A?(x=N,w=R):(x=E,w=A);break}else g>$?(E+=N,A+=R):(N+=E,R+=A),A>M?(x=N,w=R):(x=E,w=A);x*=T}else(isNaN(g)||isNaN(y))&&(w=x=NaN);break}case"string":{if(A=g.match(/\d+|./g),A===null)throw v();if(A[E]==="-"?(b=-1,E++):A[E]==="+"&&E++,A.length===E+1?D=a(A[E++],b):A[E+1]==="."||A[E]==="."?(A[E]!=="."&&(C=a(A[E++],b)),E++,(E+1===A.length||A[E+1]==="("&&A[E+3]===")"||A[E+1]==="'"&&A[E+3]==="'")&&(D=a(A[E],b),_=Math.pow(10,A[E].length),E++),(A[E]==="("&&A[E+2]===")"||A[E]==="'"&&A[E+2]==="'")&&(S=a(A[E+1],b),T=Math.pow(10,A[E+1].length)-1,E+=3)):A[E+1]==="/"||A[E+1]===":"?(D=a(A[E],b),_=a(A[E+2],1),E+=3):A[E+3]==="/"&&A[E+1]===" "&&(C=a(A[E],b),D=a(A[E+2],b),_=a(A[E+4],1),E+=5),A.length<=E){w=_*T,b=x=S+w*C+T*D;break}}default:throw v()}if(w===0)throw p();i.s=b<0?-1:1,i.n=Math.abs(x),i.d=Math.abs(w)};function l(g,y,x){for(var w=1;y>0;g=g*g%x,y>>=1)y&1&&(w=w*g%x);return w}function c(g,y){for(;y%2===0;y/=2);for(;y%5===0;y/=5);if(y===1)return 0;for(var x=10%y,w=1;x!==1;w++)if(x=x*10%y,w>r)return 0;return w}function f(g,y,x){for(var w=1,b=l(10,x,y),C=0;C<300;C++){if(w===b)return C;w=w*10%y,b=b*10%y}return 0}function h(g,y){if(!g)return y;if(!y)return g;for(;;){if(g%=y,!g)return y;if(y%=g,!y)return g}}function d(g,y){if(u(g,y),this instanceof d)g=h(i.d,i.n),this.s=i.s,this.n=i.n/g,this.d=i.d/g;else return o(i.s*i.n,i.d)}var p=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},m=function(){return new Error("Parameters must be integer")};d.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(g,y){return u(g,y),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(g,y){return u(g,y),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(g,y){return u(g,y),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(g,y){return u(g,y),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(g,y){if(isNaN(this.n)||isNaN(this.d))return new d(NaN);if(g===void 0)return o(this.s*this.n%this.d,1);if(u(g,y),i.n===0&&this.d===0)throw p();return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(g,y){return u(g,y),o(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(g,y){return u(g,y),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(g,y){if(u(g,y),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var x=s(this.n),w=s(this.d),b=1,C=1;for(var D in x)if(D!=="1"){if(D==="0"){b=0;break}if(x[D]*=i.n,x[D]%i.d===0)x[D]/=i.d;else return null;b*=Math.pow(D,x[D])}for(var D in w)if(D!=="1"){if(w[D]*=i.n,w[D]%i.d===0)w[D]/=i.d;else return null;C*=Math.pow(D,w[D])}return i.s<0?o(C,b):o(b,C)},equals:function(g,y){return u(g,y),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(g,y){u(g,y);var x=this.s*this.n*i.d-i.s*i.n*this.d;return(0<x)-(x<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var y=this.abs(),x=y.toContinued(),w=1;w<x.length;w++){for(var b=o(x[w-1],1),C=w-2;C>=0;C--)b=b.inverse().add(x[C]);if(Math.abs(b.sub(y).valueOf())<g)return b.mul(this.s)}return this},divisible:function(g,y){return u(g,y),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var y,x="",w=this.n,b=this.d;return this.s<0&&(x+="-"),b===1?x+=w:(g&&(y=Math.floor(w/b))>0&&(x+=y,x+=" ",w%=b),x+=w,x+="/",x+=b),x},toLatex:function(g){var y,x="",w=this.n,b=this.d;return this.s<0&&(x+="-"),b===1?x+=w:(g&&(y=Math.floor(w/b))>0&&(x+=y,w%=b),x+="\\frac{",x+=w,x+="}{",x+=b,x+="}"),x},toContinued:function(){var g,y=this.n,x=this.d,w=[];if(isNaN(y)||isNaN(x))return w;do w.push(Math.floor(y/x)),g=y%x,y=x,x=g;while(y!==1);return w},toString:function(g){var y=this.n,x=this.d;if(isNaN(y)||isNaN(x))return"NaN";g=g||15;var w=c(y,x),b=f(y,x,w),C=this.s<0?"-":"";if(C+=y/x|0,y%=x,y*=10,y&&(C+="."),w){for(var D=b;D--;)C+=y/x|0,y%=x,y*=10;C+="(";for(var D=w;D--;)C+=y/x|0,y%=x,y*=10;C+=")"}else for(var D=g;y&&D--;)C+=y/x|0,y%=x,y*=10;return C}},Object.defineProperty(d,"__esModule",{value:!0}),d.default=d,d.Fraction=d,t.exports=d})()})(aee);var ZWe=aee.exports;const Cu=nl(ZWe);var QWe="Fraction",JWe=[],eUe=et(QWe,JWe,()=>(Object.defineProperty(Cu,"name",{value:"Fraction"}),Cu.prototype.constructor=Cu,Cu.prototype.type="Fraction",Cu.prototype.isFraction=!0,Cu.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Cu.fromJSON=function(t){return new Cu(t)},Cu),{isClass:!0}),tUe="Matrix",nUe=[],rUe=et(tUe,nUe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function oee(t){return Object.keys(t.signatures||{}).reduce(function(e,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var iUe="DenseMatrix",aUe=["Matrix"],oUe=et(iUe,aUe,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Bs(f))throw new Error("Invalid datatype: "+f);if(Mn(c))c.type==="DenseMatrix"?(this._data=Rn(c._data),this._size=Rn(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&_n(c.data)&&_n(c.size))this._data=c.data,this._size=c.size,l8(this._data,this._size),this._datatype=f||c.datatype;else if(_n(c))this._data=l(c),this._size=ca(this._data),l8(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+ds(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return PC(this._data,ds)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!_n(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Gt(c.length,this._size.length);for(var f=0;f<c.length;f++)Tn(c[f],this._size[f]);for(var h=this._data,d=0,p=c.length;d<p;d++){var v=c[d];Tn(v,h.length),h=h[v]}return h},n.prototype.set=function(c,f,h){if(!_n(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Gt(c.length,this._size.length,"<");var d,p,v,m=c.map(function(y){return y+1});u(this,m,h);var g=this._data;for(d=0,p=c.length-1;d<p;d++)v=c[d],Tn(v,g.length),g=g[v];return v=c[c.length-1],Tn(v,g.length),g[v]=f,this};function r(c,f){if(!AP(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new Gt(d.length,c._size.length);for(var p=f.min(),v=f.max(),m=0,g=c._size.length;m<g;m++)Tn(p[m],c._size[m]),Tn(v[m],c._size[m]);return new n(i(c._data,f,d.length,0),c._datatype)}function i(c,f,h,d){var p=d===h-1,v=f.dimension(d);return p?v.map(function(m){return Tn(m,c.length),c[m]}).valueOf():v.map(function(m){Tn(m,c.length);var g=c[m];return i(g,f,h,d+1)}).valueOf()}function a(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),v=f.isScalar(),m;if(Mn(h)?(m=h.size(),h=h.valueOf()):m=ca(h),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(!yv(m,p))try{m.length===0?h=c8([h],p):h=c8(h,p),m=ca(h)}catch{}if(p.length<c._size.length)throw new Gt(p.length,c._size.length,"<");if(m.length<p.length){for(var g=0,y=0;p[g]===1&&m[g]===1;)g++;for(;p[g]===1;)y++,g++;h=BJ(h,p.length,y,m)}if(!yv(p,m))throw new Gt(p,m,">");var x=f.max().map(function(C){return C+1});u(c,x,d);var w=p.length,b=0;o(c._data,f,h,w,b)}return c}function o(c,f,h,d,p){var v=p===d-1,m=f.dimension(p);v?m.forEach(function(g,y){Tn(g),c[g]=h[y[0]]}):m.forEach(function(g,y){Tn(g),o(c[g],f,h[y[0]],d,p+1)})}n.prototype.resize=function(c,f,h){if(!k0(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),p=h?this.clone():this;return s(p,d,f)};function s(c,f,h){if(f.length===0){for(var d=c._data;_n(d);)d=d[0];return d}return c._size=f.slice(0),c._data=yN(c._data,c._size,h),c}n.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=LJ(h._data,c);var d=h._size.reduce((p,v)=>p*v);return h._size=kP(c,d),h};function u(c,f,h){for(var d=c._size.slice(0),p=!1;d.length<f.length;)d.push(0),p=!0;for(var v=0,m=f.length;v<m;v++)f[v]>d[v]&&(d[v]=f[v],p=!0);p&&s(c,d,h)}n.prototype.clone=function(){var c=new n({data:Rn(this._data),size:Rn(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,h=oee(c),d=function m(g,y){return _n(g)?g.map(function(x,w){return m(x,y.concat(w))}):h===1?c(g):h===2?c(g,y):c(g,y,f)},p=d(this._data,[]),v=this._datatype!==void 0?PC(p,ds):void 0;return new n(p,v)},n.prototype.forEach=function(c){var f=this,h=function d(p,v){_n(p)?p.forEach(function(m,g){d(m,v.concat(g))}):c(p,v,f)};h(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(h,d){if(_n(h))for(var p=0;p<h.length;p++)yield*f(h[p],d.concat(p));else yield{value:h,index:d}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new n([d],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,p=function(g){var y=d.map(x=>[x[g]]);f.push(new n(y,c._datatype))},v=0;v<h[1];v++)p(v);return f},n.prototype.toArray=function(){return Rn(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return tr(this._data,c)},n.prototype.toString=function(){return tr(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Ir(c)&&(c=c.toNumber()),!xn(c)||!nr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],p=this._size[1],v=Math.min(d-h,p-f),m=[],g=0;g<v;g++)m[g]=this._data[g+h][g+f];return new n({data:m,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,h,d){if(!_n(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(D){if(Ir(D)&&(D=D.toNumber()),!xn(D)||!nr(D)||D<1)throw new Error("Size values must be positive integers");return D}),h){if(Ir(h)&&(h=h.toNumber()),!xn(h)||!nr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var p=h>0?h:0,v=h<0?-h:0,m=c[0],g=c[1],y=Math.min(m-v,g-p),x;if(_n(f)){if(f.length!==y)throw new Error("Invalid value array length");x=function(S){return f[S]}}else if(Mn(f)){var w=f.size();if(w.length!==1||w[0]!==y)throw new Error("Invalid matrix length");x=function(S){return f.get([S])}}else x=function(){return f};d||(d=Ir(x(0))?x(0).mul(0):0);var b=[];if(c.length>0){b=yN(b,c,d);for(var C=0;C<y;C++)b[C+v][C+p]=x(C)}return new n({data:b,size:[m,g]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!xn(c)||!nr(c)||!xn(f)||!nr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Tn(c,this._size[0]),Tn(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function l(c){return Mn(c)?l(c.valueOf()):_n(c)?c.map(l):c}return n},{isClass:!0});function _N(t,e){Mn(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?_N(i,e):e(i)}}function yu(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return yu(r,e)}):e(t)}var p8="isInteger",sUe=["typed"],uUe=et(p8,sUe,t=>{var{typed:e}=t;return e(p8,{number:nr,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(n=>r=>yu(r,n))})}),NP="number",see="number, number";function uee(t){return Math.abs(t)}uee.signature=NP;function lee(t,e){return t+e}lee.signature=see;function cee(t,e){return t*e}cee.signature=see;function fee(t){return-t}fee.signature=NP;function hee(t){return t*t}hee.signature=NP;var dee="number";function pee(t){return t===0}pee.signature=dee;function vee(t){return Number.isNaN(t)}vee.signature=dee;var v8="isZero",lUe=["typed"],cUe=et(v8,lUe,t=>{var{typed:e}=t;return e(v8,{number:pee,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>yu(r,n))})}),g8="isNaN",fUe=["typed"],hUe=et(g8,fUe,t=>{var{typed:e}=t;return e(g8,{number:vee,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":function(r){return yu(r,Number.isNaN)}})});function dUe(t,e,n){if(n==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}function pUe(t,e,n){return FC(t.re,e.re,n)&&FC(t.im,e.im,n)}var vUe=et("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),WC="equalScalar",gUe=["typed","config"],mUe=et(WC,gUe,t=>{var{typed:e,config:n}=t,r=vUe({typed:e});return e(WC,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return FC(a,o,n.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||dUe(a,o,n.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return pUe(a,o,n.epsilon)}},r)});et(WC,["typed","config"],t=>{var{typed:e,config:n}=t;return e(WC,{"number, number":function(i,a){return FC(i,a,n.epsilon)}})});var yUe="SparseMatrix",xUe=["typed","equalScalar","Matrix"],wUe=et(yUe,xUe,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Bs(m))throw new Error("Invalid datatype: "+m);if(Mn(v))a(this,v,m);else if(v&&_n(v.index)&&_n(v.ptr)&&_n(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(_n(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+ds(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,g){m.type==="SparseMatrix"?(v._values=m._values?Rn(m._values):void 0,v._index=Rn(m._index),v._ptr=Rn(m._ptr),v._size=Rn(m._size),v._datatype=g||m._datatype):o(v,m.valueOf(),g||m._datatype)}function o(v,m,g){v._values=[],v._index=[],v._ptr=[],v._datatype=g;var y=m.length,x=0,w=n,b=0;if(Bs(g)&&(w=e.find(n,[g,g])||n,b=e.convert(0,g)),y>0){var C=0;do{v._ptr.push(v._index.length);for(var D=0;D<y;D++){var S=m[D];if(_n(S)){if(C===0&&x<S.length&&(x=S.length),C<S.length){var _=S[C];w(_,b)||(v._values.push(_),v._index.push(D))}}else C===0&&x<1&&(x=1),w(S,b)||(v._values.push(S),v._index.push(D))}C++}while(C<x)}v._ptr.push(v._index.length),v._size=[y,x]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return PC(this._values,ds)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return u(this,v,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!AP(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return v.get(m.min());var y=m.size();if(y.length!==v._size.length)throw new Gt(y.length,v._size.length);var x,w,b,C,D=m.min(),S=m.max();for(x=0,w=v._size.length;x<w;x++)Tn(D[x],v._size[x]),Tn(S[x],v._size[x]);var _=v._values,T=v._index,E=v._ptr,A=m.dimension(0),N=m.dimension(1),R=[],M=[];A.forEach(function(F,V){M[F]=V[0],R[F]=!0});var $=_?[]:void 0,L=[],O=[];return N.forEach(function(F){for(O.push(L.length),b=E[F],C=E[F+1];b<C;b++)x=T[b],R[x]===!0&&(L.push(M[x]),$&&$.push(_[b]))}),O.push(L.length),new i({values:$,index:L,ptr:O,size:y,datatype:v._datatype})}function u(v,m,g,y){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var x=m.size(),w=m.isScalar(),b;if(Mn(g)?(b=g.size(),g=g.toArray()):b=ca(g),w){if(b.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),g,y)}else{if(x.length!==1&&x.length!==2)throw new Gt(x.length,v._size.length,"<");if(b.length<x.length){for(var C=0,D=0;x[C]===1&&b[C]===1;)C++;for(;x[C]===1;)D++,C++;g=BJ(g,x.length,D,b)}if(!yv(x,b))throw new Gt(x,b,">");if(x.length===1){var S=m.dimension(0);S.forEach(function(E,A){Tn(E),v.set([E,0],g[A[0]],y)})}else{var _=m.dimension(0),T=m.dimension(1);_.forEach(function(E,A){Tn(E),T.forEach(function(N,R){Tn(N),v.set([E,N],g[A[0]][R[0]],y)})})}}return v}i.prototype.get=function(v){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Gt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],g=v[1];Tn(m,this._size[0]),Tn(g,this._size[1]);var y=l(m,this._ptr[g],this._ptr[g+1],this._index);return y<this._ptr[g+1]&&this._index[y]===m?this._values[y]:0},i.prototype.set=function(v,m,g){if(!_n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Gt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var y=v[0],x=v[1],w=this._size[0],b=this._size[1],C=n,D=0;Bs(this._datatype)&&(C=e.find(n,[this._datatype,this._datatype])||n,D=e.convert(0,this._datatype)),(y>w-1||x>b-1)&&(h(this,Math.max(y+1,w),Math.max(x+1,b),g),w=this._size[0],b=this._size[1]),Tn(y,w),Tn(x,b);var S=l(y,this._ptr[x],this._ptr[x+1],this._index);return S<this._ptr[x+1]&&this._index[S]===y?C(m,D)?c(S,x,this._values,this._index,this._ptr):this._values[S]=m:C(m,D)||f(S,y,x,m,this._values,this._index,this._ptr),this};function l(v,m,g,y){if(g-m===0)return g;for(var x=m;x<g;x++)if(y[x]===v)return x;return m}function c(v,m,g,y,x){g.splice(v,1),y.splice(v,1);for(var w=m+1;w<x.length;w++)x[w]--}function f(v,m,g,y,x,w,b){x.splice(v,0,y),w.splice(v,0,m);for(var C=g+1;C<b.length;C++)b[C]++}i.prototype.resize=function(v,m,g){if(!k0(v))throw new TypeError("Array or Matrix expected");var y=v.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(y.length!==2)throw new Error("Only two dimensions matrix are supported");y.forEach(function(w){if(!xn(w)||!nr(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tr(y)+")")});var x=g?this.clone():this;return h(x,y[0],y[1],m)};function h(v,m,g,y){var x=y||0,w=n,b=0;Bs(v._datatype)&&(w=e.find(n,[v._datatype,v._datatype])||n,b=e.convert(0,v._datatype),x=e.convert(x,v._datatype));var C=!w(x,b),D=v._size[0],S=v._size[1],_,T,E;if(g>S){for(T=S;T<g;T++)if(v._ptr[T]=v._values.length,C)for(_=0;_<D;_++)v._values.push(x),v._index.push(_);v._ptr[g]=v._values.length}else g<S&&(v._ptr.splice(g+1,S-g),v._values.splice(v._ptr[g],v._values.length),v._index.splice(v._ptr[g],v._index.length));if(S=g,m>D){if(C){var A=0;for(T=0;T<S;T++){v._ptr[T]=v._ptr[T]+A,E=v._ptr[T+1]+A;var N=0;for(_=D;_<m;_++,N++)v._values.splice(E+N,0,x),v._index.splice(E+N,0,_),A++}v._ptr[S]=v._values.length}}else if(m<D){var R=0;for(T=0;T<S;T++){v._ptr[T]=v._ptr[T]-R;var M=v._ptr[T],$=v._ptr[T+1]-R;for(E=M;E<$;E++)_=v._index[E],_>m-1&&(v._values.splice(E,1),v._index.splice(E,1),R++)}v._ptr[T]=v._values.length}return v._size[0]=m,v._size[1]=g,v}i.prototype.reshape=function(v,m){if(!_n(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(F){if(!xn(F)||!nr(F)||F<=-2||F===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+tr(v)+")")});var g=this._size[0]*this._size[1];v=kP(v,g);var y=v[0]*v[1];if(g!==y)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var x=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return x;for(var w=[],b=0;b<x._ptr.length;b++)for(var C=0;C<x._ptr[b+1]-x._ptr[b];C++)w.push(b);for(var D=x._values.slice(),S=x._index.slice(),_=0;_<x._index.length;_++){var T=S[_],E=w[_],A=T*x._size[1]+E;w[_]=A%v[1],S[_]=Math.floor(A/v[1])}x._values.length=0,x._index.length=0,x._ptr.length=v[1]+1,x._size=v.slice();for(var N=0;N<x._ptr.length;N++)x._ptr[N]=0;for(var R=0;R<D.length;R++){var M=S[R],$=w[R],L=D[R],O=l(M,x._ptr[$],x._ptr[$+1],x._index);f(O,M,$,L,x._values,x._index,x._ptr)}return x},i.prototype.clone=function(){var v=new i({values:this._values?Rn(this._values):void 0,index:Rn(this._index),ptr:Rn(this._ptr),size:Rn(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,y=this._size[0],x=this._size[1],w=oee(v),b=function(D,S,_){return w===1?v(D):w===2?v(D,[S,_]):v(D,[S,_],g)};return d(this,0,y-1,0,x-1,b,m)};function d(v,m,g,y,x,w,b){var C=[],D=[],S=[],_=n,T=0;Bs(v._datatype)&&(_=e.find(n,[v._datatype,v._datatype])||n,T=e.convert(0,v._datatype));for(var E=function(U,j,q){U=w(U,j,q),_(U,T)||(C.push(U),D.push(j))},A=y;A<=x;A++){S.push(C.length);var N=v._ptr[A],R=v._ptr[A+1];if(b)for(var M=N;M<R;M++){var $=v._index[M];$>=m&&$<=g&&E(v._values[M],$-m,A-y)}else{for(var L={},O=N;O<R;O++){var F=v._index[O];L[F]=v._values[O]}for(var V=m;V<=g;V++){var X=V in L?L[V]:0;E(X,V-m,A-y)}}}return S.push(C.length),new i({values:C,index:D,ptr:S,size:[g-m+1,x-y+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,y=this._size[0],x=this._size[1],w=0;w<x;w++){var b=this._ptr[w],C=this._ptr[w+1];if(m)for(var D=b;D<C;D++){var S=this._index[D];v(this._values[D],[S,w],g)}else{for(var _={},T=b;T<C;T++){var E=this._index[T];_[E]=this._values[T]}for(var A=0;A<y;A++){var N=A in _?_[A]:0;v(N,[A,w],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var g=this._ptr[m],y=this._ptr[m+1],x=g;x<y;x++){var w=this._index[x];yield{value:this._values[x],index:[w,m]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,m,g,y,x){var w=y[0],b=y[1],C=[],D,S;for(D=0;D<w;D++)for(C[D]=[],S=0;S<b;S++)C[D][S]=0;for(S=0;S<b;S++)for(var _=g[S],T=g[S+1],E=_;E<T;E++)D=m[E],C[D][S]=v?x?Rn(v[E]):v[E]:1;return C}return i.prototype.format=function(v){for(var m=this._size[0],g=this._size[1],y=this.density(),x="Sparse Matrix ["+tr(m,v)+" x "+tr(g,v)+"] density: "+tr(y,v)+`
`,w=0;w<g;w++)for(var b=this._ptr[w],C=this._ptr[w+1],D=b;D<C;D++){var S=this._index[D];x+=`
    (`+tr(S,v)+", "+tr(w,v)+") ==> "+(this._values?tr(this._values[D],v):"X")}return x},i.prototype.toString=function(){return tr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Ir(v)&&(v=v.toNumber()),!xn(v)||!nr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,g=v<0?-v:0,y=this._size[0],x=this._size[1],w=Math.min(y-g,x-m),b=[],C=[],D=[];D[0]=0;for(var S=m;S<x&&b.length<w;S++)for(var _=this._ptr[S],T=this._ptr[S+1],E=_;E<T;E++){var A=this._index[E];if(A===S-m+g){b.push(this._values[E]),C[b.length-1]=A-g;break}}return D.push(b.length),new i({values:b,index:C,ptr:D,size:[w,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,g,y,x){if(!_n(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(F){if(Ir(F)&&(F=F.toNumber()),!xn(F)||!nr(F)||F<1)throw new Error("Size values must be positive integers");return F}),g){if(Ir(g)&&(g=g.toNumber()),!xn(g)||!nr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var w=n,b=0;Bs(x)&&(w=e.find(n,[x,x])||n,b=e.convert(0,x));var C=g>0?g:0,D=g<0?-g:0,S=v[0],_=v[1],T=Math.min(S-D,_-C),E;if(_n(m)){if(m.length!==T)throw new Error("Invalid value array length");E=function(V){return m[V]}}else if(Mn(m)){var A=m.size();if(A.length!==1||A[0]!==T)throw new Error("Invalid matrix length");E=function(V){return m.get([V])}}else E=function(){return m};for(var N=[],R=[],M=[],$=0;$<_;$++){M.push(N.length);var L=$-C;if(L>=0&&L<T){var O=E(L);w(O,b)||(R.push(L+D),N.push(O))}}return M.push(N.length),new i({values:N,index:R,ptr:M,size:[S,_]})},i.prototype.swapRows=function(v,m){if(!xn(v)||!nr(v)||!xn(m)||!nr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Tn(v,this._size[0]),Tn(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,g,y,x){for(var w=y[v],b=y[v+1],C=w;C<b;C++)x(g[C],m[C])},i._swapRows=function(v,m,g,y,x,w){for(var b=0;b<g;b++){var C=w[b],D=w[b+1],S=l(v,C,D,x),_=l(m,C,D,x);if(S<D&&_<D&&x[S]===v&&x[_]===m){if(y){var T=y[S];y[S]=y[_],y[_]=T}continue}if(S<D&&x[S]===v&&(_>=D||x[_]!==m)){var E=y?y[S]:void 0;x.splice(_,0,m),y&&y.splice(_,0,E),x.splice(_<=S?S+1:S,1),y&&y.splice(_<=S?S+1:S,1);continue}if(_<D&&x[_]===m&&(S>=D||x[S]!==v)){var A=y?y[_]:void 0;x.splice(S,0,v),y&&y.splice(S,0,A),x.splice(S<=_?_+1:_,1),y&&y.splice(S<=_?_+1:_,1)}}},i},{isClass:!0}),bUe="number",CUe=["typed"];function SUe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function DUe(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is no valid number');return a}var _Ue=et(bUe,CUe,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=SUe(i);if(a)return DUe(a);var o=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(o=Number(s[2]),i=s[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is no valid number');if(s){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(r=>i=>yu(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),TUe="bignumber",EUe=["typed","BigNumber"],AUe=et(TUe,EUe,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var o=a[2],s=n(a[1]),u=new n(2).pow(Number(o));if(s.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return s.gte(l)?s.sub(u):s}return new n(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>yu(i,r))})}),kUe="fraction",IUe=["typed","Fraction"],NUe=et(kUe,IUe,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,a){return new n(i,a)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>yu(i,r))})}),m8="matrix",RUe=["typed","Matrix","DenseMatrix","SparseMatrix"],$Ue=et(m8,RUe,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(m8,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,u){return a([],s,u)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,u){if(s==="dense"||s==="default"||s===void 0)return new r(o,u);if(s==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),y8="unaryMinus",MUe=["typed"],OUe=et(y8,MUe,t=>{var{typed:e}=t;return e(y8,{number:fee,"Complex | BigNumber | Fraction":n=>n.neg(),Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>yu(r,n))})}),x8="abs",FUe=["typed"],PUe=et(x8,FUe,t=>{var{typed:e}=t;return e(x8,{number:uee,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),"Array | Matrix":e.referToSelf(n=>r=>yu(r,n))})}),w8="apply",LUe=["typed","isInteger"],zUe=et(w8,LUe,t=>{var{typed:e,isInteger:n}=t;return e(w8,{"Array | Matrix, number | BigNumber, function":function(i,a,o){if(!n(a))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?ca(i):i.size();if(a<0||a>=s.length)throw new jc(a,s.length);return Mn(i)?i.create(UC(i.valueOf(),a,o)):UC(i,a,o)}})});function UC(t,e,n){var r,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=BUe(t),i=[],r=0;r<a.length;r++)i[r]=UC(a[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=UC(t[r],e-1,n);return i}}function BUe(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}var b8="addScalar",VUe=["typed"],WUe=et(b8,VUe,t=>{var{typed:e}=t;return e(b8,{"number, number":lee,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),UUe="matAlgo11xS0s",GUe=["typed","equalScalar"],gee=et(UUe,GUe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=n,g=0,y=o;typeof h=="string"&&(v=h,m=e.find(n,[v,v]),g=e.convert(0,v),a=e.convert(a,v),y=e.find(o,[v,v]));for(var x=[],w=[],b=[],C=0;C<p;C++){b[C]=w.length;for(var D=c[C],S=c[C+1],_=D;_<S;_++){var T=l[_],E=s?y(a,u[_]):y(u[_],a);m(E,g)||(w.push(T),x.push(E))}}return b[p]=w.length,i.createSparseMatrix({values:x,index:w,ptr:b,size:[d,p],datatype:v})}}),HUe="matAlgo12xSfs",jUe=["typed","DenseMatrix"],qUe=et(HUe,jUe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=o;typeof h=="string"&&(v=h,a=e.convert(a,v),m=e.find(o,[v,v]));for(var g=[],y=[],x=[],w=0;w<p;w++){for(var b=w+1,C=c[w],D=c[w+1],S=C;S<D;S++){var _=l[S];y[_]=u[S],x[_]=b}for(var T=0;T<d;T++)w===0&&(g[T]=[]),x[T]===b?g[T][w]=s?m(a,y[T]):m(y[T],a):g[T][w]=s?m(a,0):m(0,a)}return new n({data:g,size:[d,p],datatype:v})}}),XUe="matAlgo14xDs",KUe=["typed"],RP=et(XUe,KUe,t=>{var{typed:e}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype,f,h=o;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(o,[f,f]));var d=l.length>0?n(h,0,l,l[0],u,a,s):[];return i.createDenseMatrix({data:d,size:Rn(l),datatype:f})};function n(r,i,a,o,s,u,l){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,s[f]):r(s[f],u);else for(var h=0;h<o;h++)c[h]=n(r,i+1,a,a[i+1],s[h],u,l);return c}}),YUe="matAlgo01xDSid",ZUe=["typed"],mee=et(YUe,ZUe,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(u.length!==d.length)throw new Gt(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],m=u[1],g=typeof l=="string"&&l===p?l:void 0,y=g?e.find(a,[g,g]):a,x,w,b=[];for(x=0;x<v;x++)b[x]=[];var C=[],D=[];for(w=0;w<m;w++){for(var S=w+1,_=h[w],T=h[w+1],E=_;E<T;E++)x=f[E],C[x]=o?y(c[E],s[x][w]):y(s[x][w],c[E]),D[x]=S;for(x=0;x<v;x++)D[x]===S?b[x][w]=C[x]:b[x][w]=s[x][w]}return r.createDenseMatrix({data:b,size:[v,m],datatype:g})}}),QUe="matAlgo04xSidSid",JUe=["typed","equalScalar"],eGe=et(QUe,JUe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,p=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Gt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var g=c[0],y=c[1],x,w=n,b=0,C=o;typeof f=="string"&&f===m&&(x=f,w=e.find(n,[x,x]),b=e.convert(0,x),C=e.find(o,[x,x]));var D=s&&h?[]:void 0,S=[],_=[],T=s&&h?[]:void 0,E=s&&h?[]:void 0,A=[],N=[],R,M,$,L,O;for(M=0;M<y;M++){_[M]=S.length;var F=M+1;for(L=l[M],O=l[M+1],$=L;$<O;$++)R=u[$],S.push(R),A[R]=F,T&&(T[R]=s[$]);for(L=p[M],O=p[M+1],$=L;$<O;$++)if(R=d[$],A[R]===F){if(T){var V=C(T[R],h[$]);w(V,b)?A[R]=null:T[R]=V}}else S.push(R),N[R]=F,E&&(E[R]=h[$]);if(T&&E)for($=_[M];$<S.length;)R=S[$],A[R]===F?(D[$]=T[R],$++):N[R]===F?(D[$]=E[R],$++):S.splice($,1)}return _[y]=S.length,i.createSparseMatrix({values:D,index:S,ptr:_,size:[g,y],datatype:x})}}),tGe="matAlgo10xSids",nGe=["typed","DenseMatrix"],yee=et(tGe,nGe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=o;typeof h=="string"&&(v=h,a=e.convert(a,v),m=e.find(o,[v,v]));for(var g=[],y=[],x=[],w=0;w<p;w++){for(var b=w+1,C=c[w],D=c[w+1],S=C;S<D;S++){var _=l[S];y[_]=u[S],x[_]=b}for(var T=0;T<d;T++)w===0&&(g[T]=[]),x[T]===b?g[T][w]=s?m(a,y[T]):m(y[T],a):g[T][w]=a}return new n({data:g,size:[d,p],datatype:v})}}),rGe="matAlgo13xDD",iGe=["typed"],aGe=et(rGe,iGe,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,h=a._datatype,d=[];if(u.length!==f.length)throw new Gt(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");d[p]=u[p]}var v,m=o;typeof l=="string"&&l===h&&(v=l,m=e.find(o,[v,v]));var g=d.length>0?n(m,0,d,d[0],s,c):[];return i.createDenseMatrix({data:g,size:d,datatype:v})};function n(r,i,a,o,s,u){var l=[];if(i===a.length-1)for(var c=0;c<o;c++)l[c]=r(s[c],u[c]);else for(var f=0;f<o;f++)l[f]=n(r,i+1,a,a[i+1],s[f],u[f]);return l}}),oGe="broadcast",sGe=["concat"],uGe=et(oGe,sGe,t=>{var{concat:e}=t;return function(i,a){var o=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((p,v)=>p===a._size[v]))return[i,a];for(var s=n(i._size,o,0),u=n(a._size,o,0),l=[],c=0;c<o;c++)l[c]=Math.max(s[c],u[c]);LC(s,l),LC(u,l);var f=i.clone(),h=a.clone();f._size.length<o?f.reshape(n(f._size,o,1)):h._size.length<o&&h.reshape(n(h._size,o,1));for(var d=0;d<o;d++)f._size[d]<l[d]&&(f=r(f,l[d],d)),h._size[d]<l[d]&&(h=r(h,l[d],d));return[f,h]};function n(i,a,o){return[...Array(a-i.length).fill(o),...i]}function r(i,a,o){return e(...Array(a).fill(i),o)}}),lGe="matrixAlgorithmSuite",cGe=["typed","matrix","concat"],xee=et(lGe,cGe,t=>{var{typed:e,matrix:n,concat:r}=t,i=aGe({typed:e}),a=RP({typed:e}),o=uGe({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),l),"Array, Array":(v,m)=>i(...o(n(v),n(m)),l).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(n(v),m),l),"DenseMatrix, Array":(v,m)=>i(...o(v,n(m)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>u.SS(...o(v,m),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>u.DS(...o(v,m),l,!1),f["Array, SparseMatrix"]=(v,m)=>u.DS(...o(n(v),m),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),l,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(n(m),v),l,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,g)=>i(...o(m,g),v)),"Array, Array":e.referToSelf(v=>(m,g)=>i(...o(n(m),n(g)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,g)=>i(...o(n(m),g),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,g)=>i(...o(m,n(g)),v))},u.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,g)=>u.SS(...o(m,g),v,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,g)=>u.DS(...o(m,g),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,g)=>u.DS(...o(n(m),g),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,g)=>c(...o(g,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,g)=>c(...o(n(g),m),v,!0))));var h=u.scalar||"any",d=u.Ds||u.Ss;d&&(l?(f["DenseMatrix,"+h]=(v,m)=>a(v,m,l,!1),f[h+", DenseMatrix"]=(v,m)=>a(m,v,l,!0),f["Array,"+h]=(v,m)=>a(n(v),m,l,!1).valueOf(),f[h+", Array"]=(v,m)=>a(n(m),v,l,!0).valueOf()):(f["DenseMatrix,"+h]=e.referToSelf(v=>(m,g)=>a(m,g,v,!1)),f[h+", DenseMatrix"]=e.referToSelf(v=>(m,g)=>a(g,m,v,!0)),f["Array,"+h]=e.referToSelf(v=>(m,g)=>a(n(m),g,v,!1).valueOf()),f[h+", Array"]=e.referToSelf(v=>(m,g)=>a(n(g),m,v,!0).valueOf())));var p=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+h]=(v,m)=>u.Ss(v,m,l,!1)),p&&(f[h+", SparseMatrix"]=(v,m)=>p(m,v,l,!0))):(u.Ss&&(f["SparseMatrix,"+h]=e.referToSelf(v=>(m,g)=>u.Ss(m,g,v,!1))),p&&(f[h+", SparseMatrix"]=e.referToSelf(v=>(m,g)=>p(g,m,v,!0)))),l&&l.signatures&&$J(f,l.signatures),f}}),fGe="matAlgo03xDSf",hGe=["typed"],dGe=et(fGe,hGe,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(u.length!==d.length)throw new Gt(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],m=u[1],g,y=0,x=a;typeof l=="string"&&l===p&&(g=l,y=e.convert(0,g),x=e.find(a,[g,g]));for(var w=[],b=0;b<v;b++)w[b]=[];for(var C=[],D=[],S=0;S<m;S++){for(var _=S+1,T=h[S],E=h[S+1],A=T;A<E;A++){var N=f[A];C[N]=o?x(c[A],s[N][S]):x(s[N][S],c[A]),D[N]=_}for(var R=0;R<v;R++)D[R]===_?w[R][S]=C[R]:w[R][S]=o?x(y,s[R][S]):x(s[R][S],y)}return r.createDenseMatrix({data:w,size:[v,m],datatype:g})}}),pGe="matAlgo05xSfSf",vGe=["typed","equalScalar"],gGe=et(pGe,vGe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,p=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Gt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var g=c[0],y=c[1],x,w=n,b=0,C=o;typeof f=="string"&&f===m&&(x=f,w=e.find(n,[x,x]),b=e.convert(0,x),C=e.find(o,[x,x]));var D=s&&h?[]:void 0,S=[],_=[],T=D?[]:void 0,E=D?[]:void 0,A=[],N=[],R,M,$,L;for(M=0;M<y;M++){_[M]=S.length;var O=M+1;for($=l[M],L=l[M+1];$<L;$++)R=u[$],S.push(R),A[R]=O,T&&(T[R]=s[$]);for($=p[M],L=p[M+1];$<L;$++)R=d[$],A[R]!==O&&S.push(R),N[R]=O,E&&(E[R]=h[$]);if(D)for($=_[M];$<S.length;){R=S[$];var F=A[R],V=N[R];if(F===O||V===O){var X=F===O?T[R]:b,P=V===O?E[R]:b,U=C(X,P);w(U,b)?S.splice($,1):(D.push(U),$++)}}}return _[y]=S.length,i.createSparseMatrix({values:D,index:S,ptr:_,size:[g,y],datatype:x})}}),mGe="multiplyScalar",yGe=["typed"],xGe=et(mGe,yGe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":cee,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),C8="multiply",wGe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],bGe=et(C8,wGe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=t,s=gee({typed:e,equalScalar:a}),u=RP({typed:e});function l(b,C){switch(b.length){case 1:switch(C.length){case 1:if(b[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(b[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+b[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(b[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+b[1]+") must match Vector length ("+C[0]+")");break;case 2:if(b[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+b[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+b.length+" dimensions)")}}function c(b,C,D){if(D===0)throw new Error("Cannot multiply two empty vectors");return o(b,C)}function f(b,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(b,C)}function h(b,C){var D=b._data,S=b._size,_=b._datatype,T=C._data,E=C._size,A=C._datatype,N=S[0],R=E[1],M,$=r,L=i;_&&A&&_===A&&typeof _=="string"&&(M=_,$=e.find(r,[M,M]),L=e.find(i,[M,M]));for(var O=[],F=0;F<R;F++){for(var V=L(D[0],T[0][F]),X=1;X<N;X++)V=$(V,L(D[X],T[X][F]));O[F]=V}return b.createDenseMatrix({data:O,size:[R],datatype:M})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":y}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":w});function v(b,C){var D=b._data,S=b._size,_=b._datatype,T=C._data,E=C._datatype,A=S[0],N=S[1],R,M=r,$=i;_&&E&&_===E&&typeof _=="string"&&(R=_,M=e.find(r,[R,R]),$=e.find(i,[R,R]));for(var L=[],O=0;O<A;O++){for(var F=D[O],V=$(F[0],T[0]),X=1;X<N;X++)V=M(V,$(F[X],T[X]));L[O]=V}return b.createDenseMatrix({data:L,size:[A],datatype:R})}function m(b,C){var D=b._data,S=b._size,_=b._datatype,T=C._data,E=C._size,A=C._datatype,N=S[0],R=S[1],M=E[1],$,L=r,O=i;_&&A&&_===A&&typeof _=="string"&&($=_,L=e.find(r,[$,$]),O=e.find(i,[$,$]));for(var F=[],V=0;V<N;V++){var X=D[V];F[V]=[];for(var P=0;P<M;P++){for(var U=O(X[0],T[0][P]),j=1;j<R;j++)U=L(U,O(X[j],T[j][P]));F[V][P]=U}}return b.createDenseMatrix({data:F,size:[N,M],datatype:$})}function g(b,C){var D=b._data,S=b._size,_=b._datatype,T=C._values,E=C._index,A=C._ptr,N=C._size,R=C._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var M=S[0],$=N[1],L,O=r,F=i,V=a,X=0;_&&R&&_===R&&typeof _=="string"&&(L=_,O=e.find(r,[L,L]),F=e.find(i,[L,L]),V=e.find(a,[L,L]),X=e.convert(0,L));for(var P=[],U=[],j=[],q=C.createSparseMatrix({values:P,index:U,ptr:j,size:[M,$],datatype:L}),Y=0;Y<$;Y++){j[Y]=U.length;var ne=A[Y],ue=A[Y+1];if(ue>ne)for(var te=0,oe=0;oe<M;oe++){for(var ce=oe+1,pe=void 0,me=ne;me<ue;me++){var _e=E[me];te!==ce?(pe=F(D[oe][_e],T[me]),te=ce):pe=O(pe,F(D[oe][_e],T[me]))}te===ce&&!V(pe,X)&&(U.push(oe),P.push(pe))}}return j[$]=U.length,q}function y(b,C){var D=b._values,S=b._index,_=b._ptr,T=b._datatype;if(!D)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var E=C._data,A=C._datatype,N=b._size[0],R=C._size[0],M=[],$=[],L=[],O,F=r,V=i,X=a,P=0;T&&A&&T===A&&typeof T=="string"&&(O=T,F=e.find(r,[O,O]),V=e.find(i,[O,O]),X=e.find(a,[O,O]),P=e.convert(0,O));var U=[],j=[];L[0]=0;for(var q=0;q<R;q++){var Y=E[q];if(!X(Y,P))for(var ne=_[q],ue=_[q+1],te=ne;te<ue;te++){var oe=S[te];j[oe]?U[oe]=F(U[oe],V(Y,D[te])):(j[oe]=!0,$.push(oe),U[oe]=V(Y,D[te]))}}for(var ce=$.length,pe=0;pe<ce;pe++){var me=$[pe];M[pe]=U[me]}return L[1]=$.length,b.createSparseMatrix({values:M,index:$,ptr:L,size:[N,1],datatype:O})}function x(b,C){var D=b._values,S=b._index,_=b._ptr,T=b._datatype;if(!D)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var E=C._data,A=C._datatype,N=b._size[0],R=C._size[0],M=C._size[1],$,L=r,O=i,F=a,V=0;T&&A&&T===A&&typeof T=="string"&&($=T,L=e.find(r,[$,$]),O=e.find(i,[$,$]),F=e.find(a,[$,$]),V=e.convert(0,$));for(var X=[],P=[],U=[],j=b.createSparseMatrix({values:X,index:P,ptr:U,size:[N,M],datatype:$}),q=[],Y=[],ne=0;ne<M;ne++){U[ne]=P.length;for(var ue=ne+1,te=0;te<R;te++){var oe=E[te][ne];if(!F(oe,V))for(var ce=_[te],pe=_[te+1],me=ce;me<pe;me++){var _e=S[me];Y[_e]!==ue?(Y[_e]=ue,P.push(_e),q[_e]=O(oe,D[me])):q[_e]=L(q[_e],O(oe,D[me]))}}for(var Ne=U[ne],ke=P.length,Ve=Ne;Ve<ke;Ve++){var je=P[Ve];X[Ve]=q[je]}}return U[M]=P.length,j}function w(b,C){var D=b._values,S=b._index,_=b._ptr,T=b._datatype,E=C._values,A=C._index,N=C._ptr,R=C._datatype,M=b._size[0],$=C._size[1],L=D&&E,O,F=r,V=i;T&&R&&T===R&&typeof T=="string"&&(O=T,F=e.find(r,[O,O]),V=e.find(i,[O,O]));for(var X=L?[]:void 0,P=[],U=[],j=b.createSparseMatrix({values:X,index:P,ptr:U,size:[M,$],datatype:O}),q=L?[]:void 0,Y=[],ne,ue,te,oe,ce,pe,me,_e,Ne=0;Ne<$;Ne++){U[Ne]=P.length;var ke=Ne+1;for(ce=N[Ne],pe=N[Ne+1],oe=ce;oe<pe;oe++)if(_e=A[oe],L)for(ue=_[_e],te=_[_e+1],ne=ue;ne<te;ne++)me=S[ne],Y[me]!==ke?(Y[me]=ke,P.push(me),q[me]=V(E[oe],D[ne])):q[me]=F(q[me],V(E[oe],D[ne]));else for(ue=_[_e],te=_[_e+1],ne=ue;ne<te;ne++)me=S[ne],Y[me]!==ke&&(Y[me]=ke,P.push(me));if(L)for(var Ve=U[Ne],je=P.length,ct=Ve;ct<je;ct++){var rt=P[ct];X[ct]=q[rt]}}return U[$]=P.length,j}return e(C8,i,{"Array, Array":e.referTo("Matrix, Matrix",b=>(C,D)=>{l(ca(C),ca(D));var S=b(n(C),n(D));return Mn(S)?S.valueOf():S}),"Matrix, Matrix":function(C,D){var S=C.size(),_=D.size();return l(S,_),S.length===1?_.length===1?c(C,D,S[0]):f(C,D):_.length===1?d(C,D):p(C,D)},"Matrix, Array":e.referTo("Matrix,Matrix",b=>(C,D)=>b(C,n(D))),"Array, Matrix":e.referToSelf(b=>(C,D)=>b(n(C,D.storage()),D)),"SparseMatrix, any":function(C,D){return s(C,D,i,!1)},"DenseMatrix, any":function(C,D){return u(C,D,i,!1)},"any, SparseMatrix":function(C,D){return s(D,C,i,!0)},"any, DenseMatrix":function(C,D){return u(D,C,i,!0)},"Array, any":function(C,D){return u(n(C),D,i,!1).valueOf()},"any, Array":function(C,D){return u(n(D),C,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(b=>(C,D,S)=>{for(var _=b(C,D),T=0;T<S.length;T++)_=b(_,S[T]);return _})})}),CGe="sqrt",SGe=["config","typed","Complex"],DGe=et(CGe,SGe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),S8="square",_Ge=["typed"],TGe=et(S8,_Ge,t=>{var{typed:e}=t;return e(S8,{number:hee,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),D8="subtract",EGe=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],AGe=et(D8,EGe,t=>{var{typed:e,matrix:n,equalScalar:r,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,u=mee({typed:e}),l=dGe({typed:e}),c=gGe({typed:e,equalScalar:r}),f=yee({typed:e,DenseMatrix:o}),h=qUe({typed:e,DenseMatrix:o}),d=xee({typed:e,matrix:n,concat:s});return e(D8,{"number, number":(p,v)=>p-v,"Complex, Complex":(p,v)=>p.sub(v),"BigNumber, BigNumber":(p,v)=>p.minus(v),"Fraction, Fraction":(p,v)=>p.sub(v),"Unit, Unit":e.referToSelf(p=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var g=v.clone();return g.value=e.find(p,[g.valueType(),m.valueType()])(g.value,m.value),g.fixPrefix=!1,g})},d({SS:c,DS:u,SD:l,Ss:h,sS:f}))}),_8="conj",kGe=["typed"],IGe=et(_8,kGe,t=>{var{typed:e}=t;return e(_8,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>yu(r,n))})}),T8="concat",NGe=["typed","matrix","isInteger"],RGe=et(T8,NGe,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(T8,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,u=-1,l,c=!1,f=[];for(o=0;o<s;o++){var h=a[o];if(Mn(h)&&(c=!0),xn(h)||Ir(h)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=h.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new jc(u,l+1)}else{var d=Rn(h).valueOf(),p=ca(d);if(f[o]=d,l=u,u=p.length-1,o>0&&u!==l)throw new Gt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=UJ(v,f.shift(),u);return c?n(v):v},"...string":function(a){return a.join("")}})});function $Ge(t,e,n,r,i){if(hp.isTypedFunction(t)){var a=[e,n,r],o=hp.resolve(t,a);if(o)return f(o.implementation,a);var s=[e,n],u=hp.resolve(t,s);if(u)return f(u.implementation,s);var l=[e],c=hp.resolve(t,l);return c?f(c.implementation,l):f(t,a)}else return t(e,n,r);function f(h,d){try{return h.apply(h,d)}catch(m){var p;if(m instanceof TypeError&&((p=m.data)===null||p===void 0?void 0:p.category)==="wrongType"){var v=[];throw v.push("value: ".concat(ds(e))),d.length>=2&&v.push("index: ".concat(ds(n))),d.length>=3&&v.push("array: ".concat(ds(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(t.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(t.name,": ").concat(m.message))}}}var E8="identity",MGe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],OGe=et(E8,MGe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=t;return e(E8,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return u(c,f,h)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var h=Ir(l)||Ir(c)?i:null;if(Ir(l)&&(l=l.toNumber()),Ir(c)&&(c=c.toNumber()),!nr(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!nr(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var d=h?new i(1):1,p=h?new h(0):0,v=[l,c];if(f){if(f==="sparse")return o.diagonal(v,d,0,p);if(f==="dense")return a.diagonal(v,d,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var m=yN([],v,p),g=l<c?l:c,y=0;y<g;y++)m[y][y]=d;return m}}),A8="map",FGe=["typed"],PGe=et(A8,FGe,t=>{var{typed:e}=t;return e(A8,{"Array, function":LGe,"Matrix, function":function(r,i){return r.map(i)}})});function LGe(t,e){var n=function r(i,a){return Array.isArray(i)?i.map(function(o,s){return r(o,a.concat(s))}):$Ge(e,i,a,t,"map")};return n(t,[])}function zGe(){throw new Error('No "bignumber" implementation available')}function BGe(){throw new Error('No "fraction" implementation available')}function VGe(){throw new Error('No "matrix" implementation available')}var k8="size",WGe=["typed","config","?matrix"],UGe=et(k8,WGe,t=>{var{typed:e,config:n,matrix:r}=t;return e(k8,{Matrix:function(a){return a.create(a.size())},Array:ca,string:function(a){return n.matrix==="Array"?[a.length]:r([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:r?r([]):VGe()}})});function I8(t,e,n){var r;return String(t).indexOf("Unexpected type")!==-1?(r=arguments.length>2?" (type: "+ds(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).indexOf("complex numbers")!==-1?(r=arguments.length>2?" (type: "+ds(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var GGe="numeric",HGe=["number","?bignumber","?fraction"],jGe=et(GGe,HGe,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:n?o=>n(o):zGe,Fraction:r?o=>r(o):BGe};return function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=ds(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+s+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?s:a[u](s)}}),N8="divideScalar",qGe=["typed","numeric"],XGe=et(N8,qGe,t=>{var{typed:e,numeric:n}=t;return e(N8,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),R8="add",KGe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],YGe=et(R8,KGe,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,u=mee({typed:e}),l=eGe({typed:e,equalScalar:i}),c=yee({typed:e,DenseMatrix:a}),f=xee({typed:e,matrix:n,concat:s});return e(R8,{"any, any":r,"any, any, ...any":e.referToSelf(h=>(d,p,v)=>{for(var m=h(d,p),g=0;g<v.length;g++)m=h(m,v[g]);return m})},f({elop:r,DS:u,SS:l,Ss:c}))}),$8="dot",ZGe=["typed","addScalar","multiplyScalar","conj","size"],QGe=et($8,ZGe,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:a}=t;return e($8,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":u});function o(c,f){var h=l(c),d=l(f),p,v;if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)v=d[0];else if(d.length===2&&d[1]===1)v=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(p!==v)throw new RangeError("Vectors must have equal length ("+p+" != "+v+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,f){var h=o(c,f),d=Mn(c)?c._data:c,p=Mn(c)?c._datatype:void 0,v=Mn(f)?f._data:f,m=Mn(f)?f._datatype:void 0,g=l(c).length===2,y=l(f).length===2,x=n,w=r;if(p&&m&&p===m&&typeof p=="string"){var b=p;x=e.find(n,[b,b]),w=e.find(r,[b,b])}if(!g&&!y){for(var C=w(i(d[0]),v[0]),D=1;D<h;D++)C=x(C,w(i(d[D]),v[D]));return C}if(!g&&y){for(var S=w(i(d[0]),v[0][0]),_=1;_<h;_++)S=x(S,w(i(d[_]),v[_][0]));return S}if(g&&!y){for(var T=w(i(d[0][0]),v[0]),E=1;E<h;E++)T=x(T,w(i(d[E][0]),v[E]));return T}if(g&&y){for(var A=w(i(d[0][0]),v[0][0]),N=1;N<h;N++)A=x(A,w(i(d[N][0]),v[N][0]));return A}}function u(c,f){o(c,f);for(var h=c._index,d=c._values,p=f._index,v=f._values,m=0,g=n,y=r,x=0,w=0;x<h.length&&w<p.length;){var b=h[x],C=p[w];if(b<C){x++;continue}if(b>C){w++;continue}b===C&&(m=g(m,y(d[x],v[w])),x++,w++)}return m}function l(c){return Mn(c)?c.size():a(c)}}),M8="det",JGe=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],e9e=et(M8,JGe,t=>{var{typed:e,matrix:n,subtract:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=t;return e(M8,{any:function(c){return Rn(c)},"Array | Matrix":function(c){var f;switch(Mn(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Rn(c);case 1:if(f[0]===1)return Rn(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+tr(f)+")");case 2:{var h=f[0],d=f[1];if(h===d)return u(c.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+tr(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+tr(f)+")")}}});function u(l,c,f){if(c===1)return Rn(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var h=!1,d=new Array(c).fill(0).map((D,S)=>S),p=0;p<c;p++){var v=d[p];if(o(l[v][p])){var m=void 0;for(m=p+1;m<c;m++)if(!o(l[d[m]][p])){v=d[m],d[m]=d[p],d[p]=v,h=!h;break}if(m===c)return l[v][p]}for(var g=l[v][p],y=p===0?1:l[d[p-1]][p-1],x=p+1;x<c;x++)for(var w=d[x],b=p+1;b<c;b++)l[w][b]=a(r(i(l[w][b],g),i(l[w][p],l[v][b])),y)}var C=l[d[c-1]][c-1];return h?s(C):C}}),O8="inv",t9e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],n9e=et(O8,t9e,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:u,abs:l}=t;return e(O8,{"Array | Matrix":function(h){var d=Mn(h)?h.size():ca(h);switch(d.length){case 1:if(d[0]===1)return Mn(h)?n([r(1,h.valueOf()[0])]):[r(1,h[0])];throw new RangeError("Matrix must be square (size: "+tr(d)+")");case 2:{var p=d[0],v=d[1];if(p===v)return Mn(h)?n(c(h.valueOf(),p,v),h.storage()):c(h,p,v);throw new RangeError("Matrix must be square (size: "+tr(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+tr(d)+")")}},any:function(h){return r(1,h)}});function c(f,h,d){var p,v,m,g,y;if(h===1){if(g=f[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,g)]]}else if(h===2){var x=s(f);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],x),r(o(f[0][1]),x)],[r(o(f[1][0]),x),r(f[0][0],x)]]}else{var w=f.concat();for(p=0;p<h;p++)w[p]=w[p].concat();for(var b=u(h).valueOf(),C=0;C<d;C++){var D=l(w[C][C]),S=C;for(p=C+1;p<h;)l(w[p][C])>D&&(D=l(w[p][C]),S=p),p++;if(D===0)throw Error("Cannot calculate inverse, determinant is zero");p=S,p!==C&&(y=w[C],w[C]=w[p],w[p]=y,y=b[C],b[C]=b[p],b[p]=y);var _=w[C],T=b[C];for(p=0;p<h;p++){var E=w[p],A=b[p];if(p!==C){if(E[C]!==0){for(m=r(o(E[C]),_[C]),v=C;v<d;v++)E[v]=i(E[v],a(m,_[v]));for(v=0;v<d;v++)A[v]=i(A[v],a(m,T[v]))}}else{for(m=_[C],v=C;v<d;v++)E[v]=r(E[v],m);for(v=0;v<d;v++)A[v]=r(A[v],m)}}}return b}}}),r9e="divide",i9e=["typed","matrix","multiply","equalScalar","divideScalar","inv"],a9e=et(r9e,i9e,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=t,s=gee({typed:e,equalScalar:i}),u=RP({typed:e});return e("divide",$J({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return s(c,f,a,!1)},"Array, any":function(c,f){return u(n(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},a.signatures))}),OE="unbiased",F8="variance",o9e=["typed","add","subtract","multiply","divide","apply","isNaN"],s9e=et(F8,o9e,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=t;return e(F8,{"Array | Matrix":function(f){return u(f,OE)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,h){return l(f,h,OE)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,OE)}});function u(c,f){var h,d=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(_N(c,function(m){try{h=h===void 0?m:n(h,m),d++}catch(g){throw I8(g,"variance",m)}}),d===0)throw new Error("Cannot calculate variance of an empty array");var p=a(h,d);if(h=void 0,_N(c,function(m){var g=r(m,p);h=h===void 0?i(g,g):n(h,i(g,g))}),s(h))return h;switch(f){case"uncorrected":return a(h,d);case"biased":return a(h,d+1);case"unbiased":{var v=Ir(h)?h.mul(0):0;return d===1?v:a(h,d-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,h){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,d=>u(d,h))}catch(d){throw I8(d,"variance")}}}),P8="std",u9e=["typed","map","sqrt","variance"],l9e=et(P8,u9e,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(P8,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(s){return a(s)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return k0(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.indexOf(" variance")!==-1?new TypeError(l.message.replace(" variance"," std")):l}}}),$P=jWe({config:Jv}),wee=YWe({}),bee=eUe({}),MP=rUe({}),P1=oUe({Matrix:MP}),Vt=KVe({BigNumber:$P,Complex:wee,DenseMatrix:P1,Fraction:bee}),c9e=PUe({typed:Vt}),L1=WUe({typed:Vt}),f9e=AUe({BigNumber:$P,typed:Vt}),h9e=IGe({typed:Vt}),z1=mUe({config:Jv,typed:Vt}),Cee=uUe({typed:Vt}),d9e=cUe({typed:Vt}),p9e=PGe({typed:Vt}),See=xGe({typed:Vt}),v9e=_Ue({typed:Vt}),OP=wUe({Matrix:MP,equalScalar:z1,typed:Vt}),g9e=TGe({typed:Vt}),m9e=zUe({isInteger:Cee,typed:Vt}),y9e=hUe({typed:Vt}),x9e=DGe({Complex:wee,config:Jv,typed:Vt}),FP=OUe({typed:Vt}),w9e=NUe({Fraction:bee,typed:Vt}),ll=$Ue({DenseMatrix:P1,Matrix:MP,SparseMatrix:OP,typed:Vt}),b9e=jGe({bignumber:f9e,fraction:w9e,number:v9e}),C9e=UGe({matrix:ll,config:Jv,typed:Vt}),Dee=RGe({isInteger:Cee,matrix:ll,typed:Vt}),PP=XGe({numeric:b9e,typed:Vt}),S9e=OGe({BigNumber:$P,DenseMatrix:P1,SparseMatrix:OP,config:Jv,matrix:ll,typed:Vt}),_ee=AGe({DenseMatrix:P1,addScalar:L1,concat:Dee,equalScalar:z1,matrix:ll,typed:Vt,unaryMinus:FP}),D9e=YGe({DenseMatrix:P1,SparseMatrix:OP,addScalar:L1,concat:Dee,equalScalar:z1,matrix:ll,typed:Vt}),_9e=QGe({addScalar:L1,conj:h9e,multiplyScalar:See,size:C9e,typed:Vt}),b_=bGe({addScalar:L1,dot:_9e,equalScalar:z1,matrix:ll,multiplyScalar:See,typed:Vt}),T9e=e9e({divideScalar:PP,isZero:d9e,matrix:ll,multiply:b_,subtract:_ee,typed:Vt,unaryMinus:FP}),E9e=n9e({abs:c9e,addScalar:L1,det:T9e,divideScalar:PP,identity:S9e,matrix:ll,multiply:b_,typed:Vt,unaryMinus:FP}),A9e=a9e({divideScalar:PP,equalScalar:z1,inv:E9e,matrix:ll,multiply:b_,typed:Vt}),k9e=s9e({add:D9e,apply:m9e,divide:A9e,isNaN:y9e,multiply:b_,subtract:_ee,typed:Vt}),I9e=l9e({map:p9e,sqrt:x9e,typed:Vt,variance:k9e});const N9e=t=>typeof t=="number"?!0:typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t)),R9e=(t,e=!1)=>I9e(t),$9e=(t,e=!1)=>{let n=0,r=0,i=0,a=0,o=0,s=0,u=0,l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,f={},h={},d=[];t.forEach(g=>{N9e(g)?d.push(parseFloat(g)):g===""?r++:i++}),d.forEach(g=>{if(g===void 0){r++;return}g===0?a++:g>0?s++:o++,f[g]?f[g]++:(f[g]=1,n++),l=Math.min(l,g),c=Math.max(c,g),u=u+g});const p=Object.entries(f).sort((g,y)=>y[1]-g[1]);for(let g=0;g<Math.min(20,p.length);g++)h[p[g][0]]=p[g][1];let v={frequency:h,Count:t.length,"Distinct values":n,"Missing values":r,"Invalid values":i,Zeros:a,Negatives:o,Positives:s,Sum:u,Average:u/t.length,Minimum:l,Maximum:c};if(!e)return v;const m=R9e(d);return v["Standard Deviation"]=m,v.Variance=g9e(m),v},M9e=t=>{let e=0,n=0,r=0,i={},a={};t.forEach(s=>{if(s===void 0){n++;return}i[s]?i[s]++:(i[s]=1,e++)});const o=Object.entries(i).sort((s,u)=>u[1]-s[1]);for(let s=0;s<Math.min(20,o.length);s++)a[o[s][0]]=o[s][1];return{frequency:a,unique:e,missing:n,invalid:r}};async function O9e({data:t,column:e,type:n,extended:r=!1}){const i=n==="number",a=t.map(o=>o[e]);return i?$9e(a,r):M9e(a)}const Tee=({visible:t})=>t?H.jsx("div",{style:{height:"100%"},className:"fcc fill",children:H.jsx(QS,{})}):H.jsx(H.Fragment,{}),F9e="_row_78wr6_1",P9e="_danger_78wr6_7",L9e="_chart_78wr6_10",z9e="_switcher_78wr6_19",GC={row:F9e,danger:P9e,chart:L9e,switcher:z9e};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TN=function(t,e){return TN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},TN(t,e)};function Ge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");TN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var B9e=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),V9e=function(){function t(){this.browser=new B9e,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),kf=new V9e;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(kf.wxa=!0,kf.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?kf.worker=!0:typeof navigator>"u"?(kf.node=!0,kf.svgSupported=!0):W9e(navigator.userAgent,kf);function W9e(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),a=t.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),o&&(n.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}const bt=kf;var LP=12,Eee="sans-serif",Tc=LP+"px "+Eee,U9e=20,G9e=100,H9e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function j9e(t){var e={};if(typeof JSON>"u")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-U9e)/G9e;e[r]=i}return e}var q9e=j9e(H9e),tl={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var i=tl.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==r&&(e=t.font=r||Tc),t.measureText(n);n=n||"",r=r||Tc;var a=/(\d+)px/.exec(r),o=a&&+a[1]||LP,s=0;if(r.indexOf("mono")>=0)s=o*n.length;else for(var u=0;u<n.length;u++){var l=q9e[n[u]];s+=l==null?o:l*o}return{width:s}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}};function Aee(t){for(var e in tl)t[e]&&(tl[e]=t[e])}var kee=fu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),Iee=fu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),eg=Object.prototype.toString,C_=Array.prototype,X9e=C_.forEach,K9e=C_.filter,zP=C_.slice,Y9e=C_.map,L8=(function(){}).constructor,qx=L8?L8.prototype:null,BP="__proto__",Z9e=2311;function VP(){return Z9e++}function S_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console<"u"&&console.error.apply(console,t)}function ft(t){if(t==null||typeof t!="object")return t;var e=t,n=eg.call(t);if(n==="[object Array]"){if(!Mp(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=ft(t[r])}}else if(Iee[n]){if(!Mp(t)){var a=t.constructor;if(a.from)e=a.from(t);else{e=new a(t.length);for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}}}else if(!kee[n]&&!Mp(t)&&!bv(t)){e={};for(var o in t)t.hasOwnProperty(o)&&o!==BP&&(e[o]=ft(t[o]))}return e}function vt(t,e,n){if(!Ke(e)||!Ke(t))return n?ft(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==BP){var i=t[r],a=e[r];Ke(a)&&Ke(i)&&!Me(a)&&!Me(i)&&!bv(a)&&!bv(i)&&!EN(a)&&!EN(i)&&!Mp(a)&&!Mp(i)?vt(i,a,n):(n||!(r in t))&&(t[r]=ft(e[r]))}return t}function Q9e(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=vt(n,t[r],e);return n}function De(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==BP&&(t[n]=e[n]);return t}function dt(t,e,n){for(var r=Mt(e),i=0;i<r.length;i++){var a=r[i];(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}return t}var J9e=tl.createCanvas;function At(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function WP(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function Lo(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}else dt(t,e,n)}function zi(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function W(t,e,n){if(t&&e)if(t.forEach&&t.forEach===X9e)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function $e(t,e,n){if(!t)return[];if(!e)return D_(t);if(t.map&&t.map===Y9e)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r}function fu(t,e,n,r){if(t&&e){for(var i=0,a=t.length;i<a;i++)n=e.call(r,n,t[i],i,t);return n}}function $n(t,e,n){if(!t)return[];if(!e)return D_(t);if(t.filter&&t.filter===K9e)return t.filter(e,n);for(var r=[],i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function e7e(t,e,n){if(t&&e){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]}}function Mt(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function t7e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(zP.call(arguments)))}}var Ht=qx&&ot(qx.bind)?qx.call.bind(qx.bind):t7e;function Ot(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(zP.call(arguments)))}}function Me(t){return Array.isArray?Array.isArray(t):eg.call(t)==="[object Array]"}function ot(t){return typeof t=="function"}function ze(t){return typeof t=="string"}function HC(t){return eg.call(t)==="[object String]"}function Kt(t){return typeof t=="number"}function Ke(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function EN(t){return!!kee[eg.call(t)]}function ya(t){return!!Iee[eg.call(t)]}function bv(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function B1(t){return t.colorStops!=null}function Nee(t){return t.image!=null}function n7e(t){return eg.call(t)==="[object RegExp]"}function R0(t){return t!==t}function Cv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function yt(t,e){return t??e}function $p(t,e,n){return t??e??n}function D_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return zP.apply(t,e)}function UP(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function za(t,e){if(!t)throw new Error(e)}function os(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Ree="__ec_primitive__";function jC(t){t[Ree]=!0}function Mp(t){return t[Ree]}var r7e=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return Mt(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),$ee=typeof Map=="function";function i7e(){return $ee?new Map:new r7e}var Mee=function(){function t(e){var n=Me(e);this.data=i7e();var r=this;e instanceof t?e.each(i):e&&W(e,i);function i(a,o){n?r.set(a,o):r.set(o,a)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,i){e.call(n,r,i)})},t.prototype.keys=function(){var e=this.data.keys();return $ee?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function st(t){return new Mee(t)}function Oee(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var i=t.length,r=0;r<e.length;r++)n[r+i]=e[r];return n}function V1(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&De(n,e),n}function GP(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Ph(t,e){return t.hasOwnProperty(e)}function qr(){}var Nm=180/Math.PI;const a7e=Object.freeze(Object.defineProperty({__proto__:null,HashMap:Mee,RADIAN_TO_DEGREE:Nm,assert:za,bind:Ht,clone:ft,concatArray:Oee,createCanvas:J9e,createHashMap:st,createObject:V1,curry:Ot,defaults:dt,disableUserSelect:GP,each:W,eqNaN:R0,extend:De,filter:$n,find:e7e,guid:VP,hasOwn:Ph,indexOf:At,inherits:WP,isArray:Me,isArrayLike:zi,isBuiltInObject:EN,isDom:bv,isFunction:ot,isGradientObject:B1,isImagePatternObject:Nee,isNumber:Kt,isObject:Ke,isPrimitive:Mp,isRegExp:n7e,isString:ze,isStringSafe:HC,isTypedArray:ya,keys:Mt,logError:S_,map:$e,merge:vt,mergeAll:Q9e,mixin:Lo,noop:qr,normalizeCssArray:UP,reduce:fu,retrieve:Cv,retrieve2:yt,retrieve3:$p,setAsPrimitive:jC,slice:D_,trim:os},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AN=function(t,e){return AN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},AN(t,e)};function en(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");AN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function ld(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function o7e(t,e){return t[0]=e[0],t[1]=e[1],t}function Fee(t){return[t[0],t[1]]}function s7e(t,e,n){return t[0]=e,t[1]=n,t}function kN(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function u7e(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Pee(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function HP(t){return Math.sqrt(jP(t))}var l7e=HP;function jP(t){return t[0]*t[0]+t[1]*t[1]}var c7e=jP;function f7e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function h7e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function d7e(t,e){return t[0]*e[0]+t[1]*e[1]}function nb(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Lee(t,e){var n=HP(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function qC(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var XC=qC;function zee(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var oh=zee;function p7e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Rm(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function Fi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Wl(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Ul(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}const v7e=Object.freeze(Object.defineProperty({__proto__:null,add:kN,applyTransform:Fi,clone:Fee,copy:o7e,create:ld,dist:XC,distSquare:oh,distance:qC,distanceSquare:zee,div:h7e,dot:d7e,len:HP,lenSquare:jP,length:l7e,lengthSquare:c7e,lerp:Rm,max:Ul,min:Wl,mul:f7e,negate:p7e,normalize:Lee,scale:nb,scaleAndAdd:u7e,set:s7e,sub:Pee},Symbol.toStringTag,{value:"Module"}));var wd=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),g7e=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new wd(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,n.drift(a,o,e),this.handler.dispatchToElement(new wd(n,e),"drag",e.event);var s=this.handler.findHover(r,i,n).target,u=this._dropTarget;this._dropTarget=s,n!==s&&(u&&s!==u&&this.handler.dispatchToElement(new wd(u,e),"dragleave",e.event),s&&s!==u&&this.handler.dispatchToElement(new wd(s,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new wd(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new wd(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}();const m7e=g7e;var y7e=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!e)return this;var o=this._$eventProcessor;n!=null&&o&&o.normalizeQuery&&(n=o.normalizeQuery(n)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var u={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},l=a[e].length-1,c=a[e][l];return c&&c.callAtLast?a[e].splice(l,0,u):a[e].push(u),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==n&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=n.length,s=i.length,u=0;u<s;u++){var l=i[u];if(!(a&&a.filter&&l.query!=null&&!a.filter(e,l.query)))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,n[0]);break;case 2:l.h.call(l.ctx,n[0],n[1]);break;default:l.h.apply(l.ctx,n);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=n.length,s=n[o-1],u=i.length,l=0;l<u;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,n[0]);break;case 2:c.h.call(s,n[0],n[1]);break;default:c.h.apply(s,n.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t}();const Ss=y7e;var x7e=Math.log(2);function IN(t,e,n,r,i,a){var o=r+"-"+i,s=t.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var u=Math.round(Math.log((1<<s)-1&~i)/x7e);return t[n][u]}for(var l=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*t[n][h]*IN(t,e-1,c,l,i|p,a),d++)}return a[o]=f,f}function z8(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=IN(n,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*IN(n,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(u,l,c){var f=l*a[6]+c*a[7]+1;u[0]=(l*a[0]+c*a[1]+a[2])/f,u[1]=(l*a[3]+c*a[4]+a[5])/f}}}var B8="___zrEVENTSAVED",FE=[];function w7e(t,e,n,r,i){return NN(FE,e,r,i,!0)&&NN(t,n,FE[0],FE[1])}function NN(t,e,n,r,i){if(e.getBoundingClientRect&&bt.domSupported&&!Bee(e)){var a=e[B8]||(e[B8]={}),o=b7e(e,a),s=C7e(o,a,i);if(s)return s(t,n,r),!0}return!1}function b7e(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,u=a%2,l=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[u]+":0",i[l]+":0",r[1-u]+":auto",i[1-l]+":auto",""].join("!important;"),t.appendChild(o),n.push(o)}return n}function C7e(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],u=!0,l=0;l<4;l++){var c=t[l].getBoundingClientRect(),f=2*l,h=c.left,d=c.top;o.push(h,d),u=u&&a&&h===a[f]&&d===a[f+1],s.push(t[l].offsetLeft,t[l].offsetTop)}return u&&i?i:(e.srcCoords=o,e[r]=n?z8(s,o):z8(o,s))}function Bee(t){return t.nodeName.toUpperCase()==="CANVAS"}var S7e=/([&<>"'])/g,D7e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Yi(t){return t==null?"":(t+"").replace(S7e,function(e,n){return D7e[n]})}var _7e=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,PE=[],T7e=bt.browser.firefox&&+bt.browser.version.split(".")[0]<39;function RN(t,e,n,r){return n=n||{},r?V8(t,e,n):T7e&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):V8(t,e,n),n}function V8(t,e,n){if(bt.domSupported&&t.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(Bee(t)){var a=t.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}else if(NN(PE,t,r,i)){n.zrX=PE[0],n.zrY=PE[1];return}}n.zrX=n.zrY=0}function qP(t){return t||window.event}function io(t,e,n){if(e=qP(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&RN(t,o,e,n)}else{RN(t,e,e,n);var a=E7e(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&_7e.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function E7e(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var i=Math.abs(r!==0?r:n),a=r>0?-1:r<0?1:n>0?-1:1;return 3*i*a}function $N(t,e,n,r){t.addEventListener(e,n,r)}function A7e(t,e,n,r){t.removeEventListener(e,n,r)}var Vee=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0},k7e=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:n,event:e},o=0,s=i.length;o<s;o++){var u=i[o],l=RN(r,u,{});a.points.push([l.zrX,l.zrY]),a.touches.push(u)}this._track.push(a)}},t.prototype._recognize=function(e){for(var n in LE)if(LE.hasOwnProperty(n)){var r=LE[n](this._track,e);if(r)return r}},t}();function W8(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function I7e(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var LE={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=W8(r)/W8(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=I7e(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}};function Lh(){return[1,0,0,1,0,0]}function W1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function XP(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function fc(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],o=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],u=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t}function KC(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function __(t,e,n){var r=e[0],i=e[2],a=e[4],o=e[1],s=e[3],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=-r*l+o*c,t[2]=i*c+s*l,t[3]=-i*l+c*s,t[4]=c*a+l*u,t[5]=c*u-l*a,t}function Wee(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function U1(t,e){var n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=n*o-a*r;return u?(u=1/u,t[0]=o*u,t[1]=-a*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*s-o*i)*u,t[5]=(a*i-n*s)*u,t):null}function N7e(t){var e=Lh();return XP(e,t),e}const R7e=Object.freeze(Object.defineProperty({__proto__:null,clone:N7e,copy:XP,create:Lh,identity:W1,invert:U1,mul:fc,rotate:__,scale:Wee,translate:KC},Symbol.toStringTag,{value:"Module"}));var $7e=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,i){e.x=n.x+r.x*i,e.y=n.y+r.y*i},t.lerp=function(e,n,r,i){var a=1-i;e.x=a*n.x+i*r.x,e.y=a*n.y+i*r.y},t}();const Je=$7e;var Xx=Math.min,Kx=Math.max,ef=new Je,tf=new Je,nf=new Je,rf=new Je,_g=new Je,Tg=new Je,M7e=function(){function t(e,n,r,i){r<0&&(e=e+r,r=-r),i<0&&(n=n+i,i=-i),this.x=e,this.y=n,this.width=r,this.height=i}return t.prototype.union=function(e){var n=Xx(e.x,this.x),r=Xx(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Kx(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Kx(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,i=e.height/n.height,a=Lh();return KC(a,a,[-n.x,-n.y]),Wee(a,a,[r,i]),KC(a,a,[e.x,e.y]),a},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,u=e.x,l=e.x+e.width,c=e.y,f=e.y+e.height,h=!(a<u||l<i||s<c||f<o);if(n){var d=1/0,p=0,v=Math.abs(a-u),m=Math.abs(l-i),g=Math.abs(s-c),y=Math.abs(f-o),x=Math.min(v,m),w=Math.min(g,y);a<u||l<i?x>p&&(p=x,v<m?Je.set(Tg,-v,0):Je.set(Tg,m,0)):x<d&&(d=x,v<m?Je.set(_g,v,0):Je.set(_g,-m,0)),s<c||f<o?w>p&&(p=w,g<y?Je.set(Tg,0,-g):Je.set(Tg,0,y)):x<d&&(d=x,g<y?Je.set(_g,0,g):Je.set(_g,0,-y))}return n&&Je.copy(n,h?_g:Tg),h},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=n.x*i+o,e.y=n.y*a+s,e.width=n.width*i,e.height=n.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}ef.x=nf.x=n.x,ef.y=rf.y=n.y,tf.x=rf.x=n.x+n.width,tf.y=nf.y=n.y+n.height,ef.transform(r),rf.transform(r),tf.transform(r),nf.transform(r),e.x=Xx(ef.x,tf.x,nf.x,rf.x),e.y=Xx(ef.y,tf.y,nf.y,rf.y);var u=Kx(ef.x,tf.x,nf.x,rf.x),l=Kx(ef.y,tf.y,nf.y,rf.y);e.width=u-e.x,e.height=l-e.y},t}();const _t=M7e;var Uee="silent";function O7e(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:F7e}}function F7e(){Vee(this.event)}var P7e=function(t){en(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Ss),Eg=function(){function t(e,n){this.x=e,this.y=n}return t}(),L7e=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],zE=new _t(0,0,0,0),Gee=function(t){en(e,t);function e(n,r,i,a,o){var s=t.call(this)||this;return s._hovered=new Eg(0,0),s.storage=n,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new P7e,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new m7e(s),s}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(W(L7e,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,a=Hee(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var u=this._hovered=a?new Eg(r,i):this.findHover(r,i),l=u.target,c=this.proxy;c.setCursor&&c.setCursor(l?l.cursor:"default"),s&&l!==s&&this.dispatchToElement(o,"mouseout",n),this.dispatchToElement(u,"mousemove",n),l&&l!==s&&this.dispatchToElement(u,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new Eg(0,0)},e.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,i){n=n||{};var a=n.target;if(!(a&&a.silent)){for(var o="on"+r,s=O7e(r,n,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(u){typeof u[o]=="function"&&u[o].call(u,s),u.trigger&&u.trigger(r,s)}))}},e.prototype.findHover=function(n,r,i){var a=this.storage.getDisplayList(),o=new Eg(n,r);if(U8(a,o,n,r,i),this._pointerSize&&!o.target){for(var s=[],u=this._pointerSize,l=u/2,c=new _t(n-l,r-l,u,u),f=a.length-1;f>=0;f--){var h=a[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(zE.copy(h.getBoundingRect()),h.transform&&zE.applyTransform(h.transform),zE.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<l;m+=d)for(var g=0;g<v;g+=p){var y=n+m*Math.cos(g),x=r+m*Math.sin(g);if(U8(s,o,y,x,i),o.target)return o}}return o},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new k7e);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;n.gestureEvent=o;var s=new Eg;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(Ss);W(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Gee.prototype[t]=function(e){var n=e.zrX,r=e.zrY,i=Hee(this,n,r),a,o;if((t!=="mouseup"||!i)&&(a=this.findHover(n,r),o=a.target),t==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(t==="mouseup")this._upEl=o;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||XC(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,t,e)}});function z7e(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,n))return!1;r.silent&&(i=!0)}var s=r.__hostTarget;r=s||r.parent}return i?Uee:!0}return!1}function U8(t,e,n,r,i){for(var a=t.length-1;a>=0;a--){var o=t[a],s=void 0;if(o!==i&&!o.ignore&&(s=z7e(o,n,r))&&(!e.topTarget&&(e.topTarget=o),s!==Uee)){e.target=o;break}}}function Hee(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}const B7e=Gee;var jee=32,Ag=7;function V7e(t){for(var e=0;t>=jee;)e|=t&1,t>>=1;return t+e}function G8(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;W7e(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function W7e(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function H8(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var a=t[r],o=e,s=r,u;o<s;)u=o+s>>>1,i(a,t[u])<0?s=u:o=u+1;var l=r-o;switch(l){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:for(;l>0;)t[o+l]=t[o+l-1],l--}t[o]=a}}function BE(t,e,n,r,i,a){var o=0,s=0,u=1;if(a(t,e[n+i])>0){for(s=r-i;u<s&&a(t,e[n+i+u])>0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}else{for(s=i+1;u<s&&a(t,e[n+i-u])<=0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}for(o++;o<u;){var c=o+(u-o>>>1);a(t,e[n+c])>0?o=c+1:u=c}return u}function VE(t,e,n,r,i,a){var o=0,s=0,u=1;if(a(t,e[n+i])<0){for(s=i+1;u<s&&a(t,e[n+i-u])<0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}else{for(s=r-i;u<s&&a(t,e[n+i+u])>=0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}for(o++;o<u;){var c=o+(u-o>>>1);a(t,e[n+c])<0?u=c:o=c+1}return u}function U7e(t,e){var n=Ag,r,i,a=0;t.length;var o=[];r=[],i=[];function s(d,p){r[a]=d,i[a]=p,a+=1}function u(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function l(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=r[d],v=i[d],m=r[d+1],g=i[d+1];i[d]=v+g,d===a-3&&(r[d+1]=r[d+2],i[d+1]=i[d+2]),a--;var y=VE(t[m],t,p,v,0,e);p+=y,v-=y,v!==0&&(g=BE(t[p+v-1],t,m,g,g-1,e),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)o[g]=t[d+g];var y=0,x=v,w=d;if(t[w++]=t[x++],--m===0){for(g=0;g<p;g++)t[w+g]=o[y+g];return}if(p===1){for(g=0;g<m;g++)t[w+g]=t[x+g];t[w+m]=o[y];return}for(var b=n,C,D,S;;){C=0,D=0,S=!1;do if(e(t[x],o[y])<0){if(t[w++]=t[x++],D++,C=0,--m===0){S=!0;break}}else if(t[w++]=o[y++],C++,D=0,--p===1){S=!0;break}while((C|D)<b);if(S)break;do{if(C=VE(t[x],o,y,p,0,e),C!==0){for(g=0;g<C;g++)t[w+g]=o[y+g];if(w+=C,y+=C,p-=C,p<=1){S=!0;break}}if(t[w++]=t[x++],--m===0){S=!0;break}if(D=BE(o[y],t,x,m,0,e),D!==0){for(g=0;g<D;g++)t[w+g]=t[x+g];if(w+=D,x+=D,m-=D,m===0){S=!0;break}}if(t[w++]=o[y++],--p===1){S=!0;break}b--}while(C>=Ag||D>=Ag);if(S)break;b<0&&(b=0),b+=2}if(n=b,n<1&&(n=1),p===1){for(g=0;g<m;g++)t[w+g]=t[x+g];t[w+m]=o[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)t[w+g]=o[y+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)o[g]=t[v+g];var y=d+p-1,x=m-1,w=v+m-1,b=0,C=0;if(t[w--]=t[y--],--p===0){for(b=w-(m-1),g=0;g<m;g++)t[b+g]=o[g];return}if(m===1){for(w-=p,y-=p,C=w+1,b=y+1,g=p-1;g>=0;g--)t[C+g]=t[b+g];t[w]=o[x];return}for(var D=n;;){var S=0,_=0,T=!1;do if(e(o[x],t[y])<0){if(t[w--]=t[y--],S++,_=0,--p===0){T=!0;break}}else if(t[w--]=o[x--],_++,S=0,--m===1){T=!0;break}while((S|_)<D);if(T)break;do{if(S=p-VE(o[x],t,d,p,p-1,e),S!==0){for(w-=S,y-=S,p-=S,C=w+1,b=y+1,g=S-1;g>=0;g--)t[C+g]=t[b+g];if(p===0){T=!0;break}}if(t[w--]=o[x--],--m===1){T=!0;break}if(_=m-BE(t[y],o,0,m,m-1,e),_!==0){for(w-=_,x-=_,m-=_,C=w+1,b=x+1,g=0;g<_;g++)t[C+g]=o[b+g];if(m<=1){T=!0;break}}if(t[w--]=t[y--],--p===0){T=!0;break}D--}while(S>=Ag||_>=Ag);if(T)break;D<0&&(D=0),D+=2}if(n=D,n<1&&(n=1),m===1){for(w-=p,y-=p,C=w+1,b=y+1,g=p-1;g>=0;g--)t[C+g]=t[b+g];t[w]=o[x]}else{if(m===0)throw new Error;for(b=w-(m-1),g=0;g<m;g++)t[b+g]=o[g]}}return{mergeRuns:u,forceMergeRuns:l,pushRun:s}}function rb(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var a=0;if(i<jee){a=G8(t,n,r,e),H8(t,n,r,n+a,e);return}var o=U7e(t,e),s=V7e(i);do{if(a=G8(t,n,r,e),a<s){var u=i;u>s&&(u=s),H8(t,n,n+u,n+a,e),a=u}o.pushRun(n,a),o.mergeRuns(),i-=a,n+=a}while(i!==0);o.forceMergeRuns()}}var Ta=1,sm=2,Wd=4,j8=!1;function WE(){j8||(j8=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function q8(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var G7e=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=q8}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,a=n.length;i<a;i++)this._updateAndAddDisplayable(n[i],null,e);r.length=this._displayListLen,rb(r,q8)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),n.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),u=0;u<s.length;u++){var l=s[u];e.__dirty&&(l.__dirty|=Ta),this._updateAndAddDisplayable(l,n,r)}e.__dirty=0}else{var c=e;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(WE(),c.z=0),isNaN(c.z2)&&(WE(),c.z2=0),isNaN(c.zlevel)&&(WE(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,n,r);var d=e.getTextContent();d&&this._updateAndAddDisplayable(d,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var i=At(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();const H7e=G7e;var qee;qee=bt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};const MN=qee;var ib={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-ib.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?ib.bounceIn(t*2)*.5:ib.bounceOut(t*2-1)*.5+.5}};const Xee=ib;var Yx=Math.pow,hc=Math.sqrt,YC=1e-8,Kee=1e-4,X8=hc(3),Zx=1/3,Ws=ld(),lo=ld(),Op=ld();function Gl(t){return t>-YC&&t<YC}function Yee(t){return t>YC||t<-YC}function mr(t,e,n,r,i){var a=1-i;return a*a*(a*t+3*i*e)+i*i*(i*r+3*a*n)}function K8(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)}function ZC(t,e,n,r,i,a){var o=r+3*(e-n)-t,s=3*(n-e*2+t),u=3*(e-t),l=t-i,c=s*s-3*o*u,f=s*u-9*o*l,h=u*u-3*s*l,d=0;if(Gl(c)&&Gl(f))if(Gl(s))a[0]=0;else{var p=-u/s;p>=0&&p<=1&&(a[d++]=p)}else{var v=f*f-4*c*h;if(Gl(v)){var m=f/c,p=-s/o+m,g=-m/2;p>=0&&p<=1&&(a[d++]=p),g>=0&&g<=1&&(a[d++]=g)}else if(v>0){var y=hc(v),x=c*s+1.5*o*(-f+y),w=c*s+1.5*o*(-f-y);x<0?x=-Yx(-x,Zx):x=Yx(x,Zx),w<0?w=-Yx(-w,Zx):w=Yx(w,Zx);var p=(-s-(x+w))/(3*o);p>=0&&p<=1&&(a[d++]=p)}else{var b=(2*c*s-3*o*f)/(2*hc(c*c*c)),C=Math.acos(b)/3,D=hc(c),S=Math.cos(C),p=(-s-2*D*S)/(3*o),g=(-s+D*(S+X8*Math.sin(C)))/(3*o),_=(-s+D*(S-X8*Math.sin(C)))/(3*o);p>=0&&p<=1&&(a[d++]=p),g>=0&&g<=1&&(a[d++]=g),_>=0&&_<=1&&(a[d++]=_)}}return d}function Zee(t,e,n,r,i){var a=6*n-12*e+6*t,o=9*e+3*r-3*t-9*n,s=3*e-3*t,u=0;if(Gl(o)){if(Yee(a)){var l=-s/a;l>=0&&l<=1&&(i[u++]=l)}}else{var c=a*a-4*o*s;if(Gl(c))i[0]=-a/(2*o);else if(c>0){var f=hc(c),l=(-a+f)/(2*o),h=(-a-f)/(2*o);l>=0&&l<=1&&(i[u++]=l),h>=0&&h<=1&&(i[u++]=h)}}return u}function Ec(t,e,n,r,i,a){var o=(e-t)*i+t,s=(n-e)*i+e,u=(r-n)*i+n,l=(s-o)*i+o,c=(u-s)*i+s,f=(c-l)*i+l;a[0]=t,a[1]=o,a[2]=l,a[3]=f,a[4]=f,a[5]=c,a[6]=u,a[7]=r}function j7e(t,e,n,r,i,a,o,s,u,l,c){var f,h=.005,d=1/0,p,v,m,g;Ws[0]=u,Ws[1]=l;for(var y=0;y<1;y+=.05)lo[0]=mr(t,n,i,o,y),lo[1]=mr(e,r,a,s,y),m=oh(Ws,lo),m<d&&(f=y,d=m);d=1/0;for(var x=0;x<32&&!(h<Kee);x++)p=f-h,v=f+h,lo[0]=mr(t,n,i,o,p),lo[1]=mr(e,r,a,s,p),m=oh(lo,Ws),p>=0&&m<d?(f=p,d=m):(Op[0]=mr(t,n,i,o,v),Op[1]=mr(e,r,a,s,v),g=oh(Op,Ws),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=mr(t,n,i,o,f),c[1]=mr(e,r,a,s,f)),hc(d)}function q7e(t,e,n,r,i,a,o,s,u){for(var l=t,c=e,f=0,h=1/u,d=1;d<=u;d++){var p=d*h,v=mr(t,n,i,o,p),m=mr(e,r,a,s,p),g=v-l,y=m-c;f+=Math.sqrt(g*g+y*y),l=v,c=m}return f}function li(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function Y8(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function X7e(t,e,n,r,i){var a=t-2*e+n,o=2*(e-t),s=t-r,u=0;if(Gl(a)){if(Yee(o)){var l=-s/o;l>=0&&l<=1&&(i[u++]=l)}}else{var c=o*o-4*a*s;if(Gl(c)){var l=-o/(2*a);l>=0&&l<=1&&(i[u++]=l)}else if(c>0){var f=hc(c),l=(-o+f)/(2*a),h=(-o-f)/(2*a);l>=0&&l<=1&&(i[u++]=l),h>=0&&h<=1&&(i[u++]=h)}}return u}function Qee(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function QC(t,e,n,r,i){var a=(e-t)*r+t,o=(n-e)*r+e,s=(o-a)*r+a;i[0]=t,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function K7e(t,e,n,r,i,a,o,s,u){var l,c=.005,f=1/0;Ws[0]=o,Ws[1]=s;for(var h=0;h<1;h+=.05){lo[0]=li(t,n,i,h),lo[1]=li(e,r,a,h);var d=oh(Ws,lo);d<f&&(l=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<Kee);p++){var v=l-c,m=l+c;lo[0]=li(t,n,i,v),lo[1]=li(e,r,a,v);var d=oh(lo,Ws);if(v>=0&&d<f)l=v,f=d;else{Op[0]=li(t,n,i,m),Op[1]=li(e,r,a,m);var g=oh(Op,Ws);m<=1&&g<f?(l=m,f=g):c*=.5}}return u&&(u[0]=li(t,n,i,l),u[1]=li(e,r,a,l)),hc(f)}function Y7e(t,e,n,r,i,a,o){for(var s=t,u=e,l=0,c=1/o,f=1;f<=o;f++){var h=f*c,d=li(t,n,i,h),p=li(e,r,a,h),v=d-s,m=p-u;l+=Math.sqrt(v*v+m*m),s=d,u=p}return l}var Z7e=/cubic-bezier\(([0-9,\.e ]+)\)/;function KP(t){var e=t&&Z7e.exec(t);if(e){var n=e[1].split(","),r=+os(n[0]),i=+os(n[1]),a=+os(n[2]),o=+os(n[3]);if(isNaN(r+i+a+o))return;var s=[];return function(u){return u<=0?0:u>=1?1:ZC(0,r,a,1,u,s)&&mr(0,i,o,1,s[0])}}}var Q7e=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||qr,this.ondestroy=e.ondestroy||qr,this.onrestart=e.onrestart||qr,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var u=i%r;this._startTime=e-u,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=ot(e)?e:Xee[e]||KP(e)},t}();const J7e=Q7e;var Jee=function(){function t(e){this.value=e}return t}(),eHe=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new Jee(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),tHe=function(){function t(e){this._list=new eHe,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var u=r.head;r.remove(u),delete i[u.key],a=u.value,this._lastRemovedEntry=u}s?s.value=n:s=new Jee(n),s.key=e,r.insertEntry(s),i[e]=s}return a},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}();const G1=tHe;var Z8={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vs(t){return t=Math.round(t),t<0?0:t>255?255:t}function nHe(t){return t=Math.round(t),t<0?0:t>360?360:t}function $0(t){return t<0?0:t>1?1:t}function UE(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?vs(parseFloat(e)/100*255):vs(parseInt(e,10))}function sh(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?$0(parseFloat(e)/100):$0(parseFloat(e))}function GE(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function Hl(t,e,n){return t+(e-t)*n}function to(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function ON(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var ete=new G1(20),Qx=null;function bd(t,e){Qx&&ON(Qx,e),Qx=ete.put(t,Qx||e.slice())}function fa(t,e){if(t){e=e||[];var n=ete.get(t);if(n)return ON(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in Z8)return ON(e,Z8[r]),bd(t,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){to(e,0,0,0,1);return}return to(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),bd(t,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){to(e,0,0,0,1);return}return to(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),bd(t,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var u=r.substr(0,o),l=r.substr(o+1,s-(o+1)).split(","),c=1;switch(u){case"rgba":if(l.length!==4)return l.length===3?to(e,+l[0],+l[1],+l[2],1):to(e,0,0,0,1);c=sh(l.pop());case"rgb":if(l.length>=3)return to(e,UE(l[0]),UE(l[1]),UE(l[2]),l.length===3?c:sh(l[3])),bd(t,e),e;to(e,0,0,0,1);return;case"hsla":if(l.length!==4){to(e,0,0,0,1);return}return l[3]=sh(l[3]),FN(l,e),bd(t,e),e;case"hsl":if(l.length!==3){to(e,0,0,0,1);return}return FN(l,e),bd(t,e),e;default:return}}to(e,0,0,0,1)}}function FN(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=sh(t[1]),i=sh(t[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],to(e,vs(GE(o,a,n+1/3)*255),vs(GE(o,a,n)*255),vs(GE(o,a,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function rHe(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=a-i,s=(a+i)/2,u,l;if(o===0)u=0,l=0;else{s<.5?l=o/(a+i):l=o/(2-a-i);var c=((a-e)/6+o/2)/o,f=((a-n)/6+o/2)/o,h=((a-r)/6+o/2)/o;e===a?u=h-f:n===a?u=1/3+c-h:r===a&&(u=2/3+f-c),u<0&&(u+=1),u>1&&(u-=1)}var d=[u*360,l,s];return t[3]!=null&&d.push(t[3]),d}}function PN(t,e){var n=fa(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Xc(n,n.length===4?"rgba":"rgb")}}function iHe(t){var e=fa(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function tte(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],u=r-i;return n[0]=vs(Hl(o[0],s[0],u)),n[1]=vs(Hl(o[1],s[1],u)),n[2]=vs(Hl(o[2],s[2],u)),n[3]=$0(Hl(o[3],s[3],u)),n}}var aHe=tte;function YP(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=fa(e[i]),s=fa(e[a]),u=r-i,l=Xc([vs(Hl(o[0],s[0],u)),vs(Hl(o[1],s[1],u)),vs(Hl(o[2],s[2],u)),$0(Hl(o[3],s[3],u))],"rgba");return n?{color:l,leftIndex:i,rightIndex:a,value:r}:l}}var oHe=YP;function sHe(t,e,n,r){var i=fa(t);if(t)return i=rHe(i),e!=null&&(i[0]=nHe(e)),n!=null&&(i[1]=sh(n)),r!=null&&(i[2]=sh(r)),Xc(FN(i),"rgba")}function uHe(t,e){var n=fa(t);if(n&&e!=null)return n[3]=$0(e),Xc(n,"rgba")}function Xc(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function M0(t,e){var n=fa(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}function lHe(){return Xc([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}const cHe=Object.freeze(Object.defineProperty({__proto__:null,fastLerp:tte,fastMapToColor:aHe,lerp:YP,lift:PN,lum:M0,mapToColor:oHe,modifyAlpha:uHe,modifyHSL:sHe,parse:fa,random:lHe,stringify:Xc,toHex:iHe},Symbol.toStringTag,{value:"Module"}));var JC=Math.round;function O0(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=fa(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e??1}}var Q8=1e-4;function jl(t){return t<Q8&&t>-Q8}function Jx(t){return JC(t*1e3)/1e3}function LN(t){return JC(t*1e4)/1e4}function fHe(t){return"matrix("+Jx(t[0])+","+Jx(t[1])+","+Jx(t[2])+","+Jx(t[3])+","+LN(t[4])+","+LN(t[5])+")"}var hHe={left:"start",right:"end",center:"middle",middle:"middle"};function dHe(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function pHe(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function vHe(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function nte(t){return t&&!!t.image}function gHe(t){return t&&!!t.svgElement}function ZP(t){return nte(t)||gHe(t)}function rte(t){return t.type==="linear"}function ite(t){return t.type==="radial"}function ate(t){return t&&(t.type==="linear"||t.type==="radial")}function T_(t){return"url(#"+t+")"}function ote(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function ste(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*Nm,i=yt(t.scaleX,1),a=yt(t.scaleY,1),o=t.skewX||0,s=t.skewY||0,u=[];return(e||n)&&u.push("translate("+e+"px,"+n+"px)"),r&&u.push("rotate("+r+")"),(i!==1||a!==1)&&u.push("scale("+i+","+a+")"),(o||s)&&u.push("skew("+JC(o*Nm)+"deg, "+JC(s*Nm)+"deg)"),u.join(" ")}var mHe=function(){return bt.hasGlobalWindow&&ot(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),zN=Array.prototype.slice;function Au(t,e,n){return(e-t)*n+t}function HE(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=Au(e[a],n[a],r);return t}function yHe(t,e,n,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=Au(e[o][s],n[o][s],r)}return t}function ew(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=e[a]+n[a]*r;return t}function J8(t,e,n,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=e[o][s]+n[o][s]*r}return t}function xHe(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,a=Math.min(n,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(n,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function wHe(t,e,n){var r=t,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var u=a;u<o;u++)r.push(n===1?i[u]:zN.call(i[u]))}for(var l=r[0]&&r[0].length,u=0;u<r.length;u++)if(n===1)isNaN(r[u])&&(r[u]=i[u]);else for(var c=0;c<l;c++)isNaN(r[u][c])&&(r[u][c]=i[u][c])}}function ab(t){if(zi(t)){var e=t.length;if(zi(t[0])){for(var n=[],r=0;r<e;r++)n.push(zN.call(t[r]));return n}return zN.call(t)}return t}function ob(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function bHe(t){return zi(t&&t[0])?2:1}var tw=0,sb=1,ute=2,um=3,BN=4,VN=5,e6=6;function t6(t){return t===BN||t===VN}function nw(t){return t===sb||t===ute}var kg=[0,0,0,0],CHe=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=e6,u=n;if(zi(n)){var l=bHe(n);s=l,(l===1&&!Kt(n[0])||l===2&&!Kt(n[0][0]))&&(o=!0)}else if(Kt(n)&&!R0(n))s=tw;else if(ze(n))if(!isNaN(+n))s=tw;else{var c=fa(n);c&&(u=c,s=um)}else if(B1(n)){var f=De({},u);f.colorStops=$e(n.colorStops,function(d){return{offset:d.offset,color:fa(d.color)}}),rte(n)?s=BN:ite(n)&&(s=VN),u=f}a===0?this.valType=s:(s!==this.valType||s===e6)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:u,rawValue:n,percent:0};return r&&(h.easing=r,h.easingFunc=ot(r)?r:Xee[r]||KP(r)),i.push(h),h},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(v,m){return v.time-m.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,u=nw(i),l=t6(i),c=0;c<a;c++){var f=r[c],h=f.value,d=o.value;f.percent=f.time/e,s||(u&&c!==a-1?wHe(h,d,i):l&&xHe(h.colorStops,d.colorStops))}if(!s&&i!==VN&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var p=r[0].value,c=0;c<a;c++)i===tw?r[c].additiveValue=r[c].value-p:i===um?r[c].additiveValue=ew([],r[c].value,p,-1):nw(i)&&(r[c].additiveValue=i===sb?ew([],r[c].value,p,-1):J8([],r[c].value,p,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,u=this.propName,l=a===um,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=o[0];else{if(n<0)c=0;else if(n<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(o[c].percent<=n);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(o[c].percent>n);c++);c=h(c-1,s-2)}p=o[c+1],d=o[c]}if(d&&p){this._lastFr=c,this._lastFrP=n;var m=p.percent-d.percent,g=m===0?1:h((n-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var y=r?this._additiveValue:l?kg:e[u];if((nw(a)||l)&&!y&&(y=this._additiveValue=[]),this.discrete)e[u]=g<1?d.rawValue:p.rawValue;else if(nw(a))a===sb?HE(y,d[i],p[i],g):yHe(y,d[i],p[i],g);else if(t6(a)){var x=d[i],w=p[i],b=a===BN;e[u]={type:b?"linear":"radial",x:Au(x.x,w.x,g),y:Au(x.y,w.y,g),colorStops:$e(x.colorStops,function(D,S){var _=w.colorStops[S];return{offset:Au(D.offset,_.offset,g),color:ob(HE([],D.color,_.color,g))}}),global:w.global},b?(e[u].x2=Au(x.x2,w.x2,g),e[u].y2=Au(x.y2,w.y2,g)):e[u].r=Au(x.r,w.r,g)}else if(l)HE(y,d[i],p[i],g),r||(e[u]=ob(y));else{var C=Au(d[i],p[i],g);r?this._additiveValue=C:e[u]=C}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,i=this._additiveValue;n===tw?e[r]=e[r]+i:n===um?(fa(e[r],kg),ew(kg,kg,i,1),e[r]=ob(kg)):n===sb?ew(e[r],e[r],i,1):n===ute&&J8(e[r],e[r],i,1)},t}(),SHe=function(){function t(e,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&i){S_("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,Mt(n),r)},t.prototype.whenWithKeys=function(e,n,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],u=a[s];if(!u){u=a[s]=new CHe(s);var l=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];l=h&&h.value,c.valType===um&&l&&(l=ob(l))}else l=this._target[s];if(l==null)continue;e>0&&u.addKeyframe(0,ab(l),i),this._trackKeys.push(s)}u.addKeyframe(e,ab(n[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(n=a)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],u=this._getAdditiveTrack(o),l=s.keyframes,c=l.length;if(s.prepare(i,u),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=l[c-1];f&&(n._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new J7e({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){n._started=2;var p=n._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(n._additiveAnimators=null)}for(var m=0;m<r.length;m++)r[m].step(n._target,d);var g=n._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](n._target,d)},ondestroy:function(){n._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return $e(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(n?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var a=n[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,u=s[r?0:s.length-1];u&&(e[a]=ab(u.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||Mt(e);for(var r=0;r<n.length;r++){var i=n[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},t}();const QP=SHe;function pp(){return new Date().getTime()}var DHe=function(t){en(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=pp()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(MN(r),!n._paused&&n.update())}MN(r)},e.prototype.start=function(){this._running||(this._time=pp(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=pp(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=pp()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var i=new QP(n,r.loop);return this.addAnimator(i),i},e}(Ss);const _He=DHe;var THe=300,jE=bt.domSupported,qE=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=$e(t,function(i){var a=i.replace("mouse","pointer");return n.hasOwnProperty(a)?a:i});return{mouse:t,touch:e,pointer:r}}(),n6={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},r6=!1;function WN(t){var e=t.pointerType;return e==="pen"||e==="touch"}function EHe(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function XE(t){t&&(t.zrByTouch=!0)}function AHe(t,e){return io(t.dom,new kHe(t,e),!0)}function lte(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var kHe=function(){function t(e,n){this.stopPropagation=qr,this.stopImmediatePropagation=qr,this.preventDefault=qr,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),Ko={mousedown:function(t){t=io(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=io(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=io(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=io(this.dom,t);var e=t.toElement||t.relatedTarget;lte(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){r6=!0,t=io(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){r6||(t=io(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=io(this.dom,t),XE(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Ko.mousemove.call(this,t),Ko.mousedown.call(this,t)},touchmove:function(t){t=io(this.dom,t),XE(t),this.handler.processGesture(t,"change"),Ko.mousemove.call(this,t)},touchend:function(t){t=io(this.dom,t),XE(t),this.handler.processGesture(t,"end"),Ko.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<THe&&Ko.click.call(this,t)},pointerdown:function(t){Ko.mousedown.call(this,t)},pointermove:function(t){WN(t)||Ko.mousemove.call(this,t)},pointerup:function(t){Ko.mouseup.call(this,t)},pointerout:function(t){WN(t)||Ko.mouseout.call(this,t)}};W(["click","dblclick","contextmenu"],function(t){Ko[t]=function(e){e=io(this.dom,e),this.trigger(t,e)}});var UN={pointermove:function(t){WN(t)||UN.mousemove.call(this,t)},pointerup:function(t){UN.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function IHe(t,e){var n=e.domHandlers;bt.pointerEventsSupported?W(qE.pointer,function(r){ub(e,r,function(i){n[r].call(t,i)})}):(bt.touchEventsSupported&&W(qE.touch,function(r){ub(e,r,function(i){n[r].call(t,i),EHe(e)})}),W(qE.mouse,function(r){ub(e,r,function(i){i=qP(i),e.touching||n[r].call(t,i)})}))}function NHe(t,e){bt.pointerEventsSupported?W(n6.pointer,n):bt.touchEventsSupported||W(n6.mouse,n);function n(r){function i(a){a=qP(a),lte(t,a.target)||(a=AHe(t,a),e.domHandlers[r].call(t,a))}ub(e,r,i,{capture:!0})}}function ub(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,$N(t.domTarget,e,n,r)}function KE(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&A7e(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var i6=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),RHe=function(t){en(e,t);function e(n,r){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new i6(n,Ko),jE&&(i._globalHandlerScope=new i6(document,UN)),IHe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){KE(this._localHandlerScope),jE&&KE(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,jE&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?NHe(this,r):KE(r)}},e}(Ss);const $He=RHe;var cte=1;bt.hasGlobalWindow&&(cte=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var eS=cte,GN=.4,HN="#333",jN="#ccc",MHe="#eee",a6=W1,o6=5e-5;function af(t){return t>o6||t<-o6}var of=[],Cd=[],YE=Lh(),ZE=Math.abs,OHe=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return af(this.rotation)||af(this.x)||af(this.y)||af(this.scaleX-1)||af(this.scaleY-1)||af(this.skewX)||af(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(a6(r),this.invTransform=null);return}r=r||Lh(),n?this.getLocalTransform(r):a6(r),e&&(n?fc(r,e,r):XP(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(of);var r=of[0]<0?-1:1,i=of[1]<0?-1:1,a=((of[0]-r)*n+r)/of[0]||0,o=((of[1]-i)*n+i)/of[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Lh(),U1(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),n=Math.sqrt(n),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(fc(Cd,e.invTransform,n),n=Cd);var r=this.originX,i=this.originY;(r||i)&&(YE[4]=r,YE[5]=i,fc(Cd,n,YE),Cd[4]-=r,Cd[5]-=i,n=Cd),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],i=this.invTransform;return i&&Fi(r,r,i),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],i=this.transform;return i&&Fi(r,r,i),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&ZE(e[0]-1)>1e-10&&ZE(e[3]-1)>1e-10?Math.sqrt(ZE(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){fte(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,u=e.anchorY,l=e.rotation||0,c=e.x,f=e.y,h=e.skewX?Math.tan(e.skewX):0,d=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||u){var p=r+s,v=i+u;n[4]=-p*a-h*v*o,n[5]=-v*o-d*p*a}else n[4]=n[5]=0;return n[0]=a,n[3]=o,n[1]=d*a,n[2]=h*o,l&&__(n,n,l),n[4]+=r+c,n[5]+=i+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),F0=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function fte(t,e){for(var n=0;n<F0.length;n++){var r=F0[n];t[r]=e[r]}}const E_=OHe;var s6={};function Ra(t,e){e=e||Tc;var n=s6[e];n||(n=s6[e]=new G1(500));var r=n.get(t);return r==null&&(r=tl.measureText(t,e).width,n.put(t,r)),r}function u6(t,e,n,r){var i=Ra(t,e),a=k_(e),o=lm(0,i,n),s=Ud(0,a,r),u=new _t(o,s,i,a);return u}function A_(t,e,n,r){var i=((t||"")+"").split(`
`),a=i.length;if(a===1)return u6(i[0],e,n,r);for(var o=new _t(0,0,0,0),s=0;s<i.length;s++){var u=u6(i[s],e,n,r);s===0?o.copy(u):o.union(u)}return o}function lm(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Ud(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function k_(t){return Ra("",t)}function Ac(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function tS(t,e,n){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=n.height,o=n.width,s=a/2,u=n.x,l=n.y,c="left",f="top";if(r instanceof Array)u+=Ac(r[0],n.width),l+=Ac(r[1],n.height),c=null,f=null;else switch(r){case"left":u-=i,l+=s,c="right",f="middle";break;case"right":u+=i+o,l+=s,f="middle";break;case"top":u+=o/2,l-=i,c="center",f="bottom";break;case"bottom":u+=o/2,l+=a+i,c="center";break;case"inside":u+=o/2,l+=s,c="center",f="middle";break;case"insideLeft":u+=i,l+=s,f="middle";break;case"insideRight":u+=o-i,l+=s,c="right",f="middle";break;case"insideTop":u+=o/2,l+=i,c="center";break;case"insideBottom":u+=o/2,l+=a-i,c="center",f="bottom";break;case"insideTopLeft":u+=i,l+=i;break;case"insideTopRight":u+=o-i,l+=i,c="right";break;case"insideBottomLeft":u+=i,l+=a-i,f="bottom";break;case"insideBottomRight":u+=o-i,l+=a-i,c="right",f="bottom";break}return t=t||{},t.x=u,t.y=l,t.align=c,t.verticalAlign=f,t}var QE="__zr_normal__",JE=F0.concat(["ignore"]),FHe=fu(F0,function(t,e){return t[e]=!0,t},{ignore:!1}),Sd={},PHe=new _t(0,0,0,0),JP=function(){function t(e){this.id=VP(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=n.innerTransformable,o=void 0,s=void 0,u=!1;a.parent=i?this:null;var l=!1;if(a.copyTransform(n),r.position!=null){var c=PHe;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Sd,r,c):tS(Sd,r,c),a.x=Sd.x,a.y=Sd.y,o=Sd.align,s=Sd.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=Ac(f[0],c.width),d=Ac(f[1],c.height)),l=!0,a.originX=-a.x+h+(i?0:c.x),a.originY=-a.y+d+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],l||(a.originX=-p[0],a.originY=-p[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,x=void 0;v&&this.canBeInsideText()?(g=r.insideFill,y=r.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),x=!0)):(g=r.outsideFill,y=r.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),x=!0)),g=g||"#000",(g!==m.fill||y!==m.stroke||x!==m.autoStroke||o!==m.align||s!==m.verticalAlign)&&(u=!0,m.fill=g,m.stroke=y,m.autoStroke=x,m.align=o,m.verticalAlign=s,n.setDefaultTextStyle(m)),n.__dirty|=Ta,u&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?jN:HN},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&fa(n);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,Xc(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},De(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(Ke(e))for(var r=e,i=Mt(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==QE)){var o=i.targetName,s=o?n[o]:n;i.saveTo(s)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,JE)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in n)&&(n[a]=this[a])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(QE,!1,e)},t.prototype.useState=function(e,n,r,i){var a=e===QE,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,u=this.stateTransition;if(!(At(s,e)>=0&&(n||s.length===1))){var l;if(this.stateProxy&&!a&&(l=this.stateProxy(e)),l||(l=this.states&&this.states[e]),!l&&!a){S_("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(l);var c=!!(l&&l.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,l,this._normalState,n,!r&&!this.__inHover&&u&&u.duration>0,u);var f=this._textContent,h=this._textGuide;return f&&f.useState(e,n,r,c),h&&h.useState(e,n,r,c),a?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ta),l}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var u=0;u<o;u++)if(e[u]!==a[u]){s=!1;break}}if(s)return;for(var u=0;u<o;u++){var l=e[u],c=void 0;this.stateProxy&&(c=this.stateProxy(l,e)),c||(c=this.states[l]),c&&i.push(c)}var f=i[o-1],h=!!(f&&f.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(e.join(","),d,this._normalState,!1,!n&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(e,n,h),m&&m.useStates(e,n,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ta)}},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=At(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var i=this.currentStates.slice(),a=At(i,e),o=At(i,n)>=0;a>=0?o?i.splice(a,1):i[a]=n:r&&!o&&i.push(n),this.useStates(i)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,i=0;i<e.length;i++){var a=e[i];De(n,a),a.textConfig&&(r=r||{},De(r,a.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,i,a,o){var s=!(n&&i);n&&n.textConfig?(this.textConfig=De({},i?this.textConfig:r.textConfig),De(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var u={},l=!1,c=0;c<JE.length;c++){var f=JE[c],h=a&&FHe[f];n&&n[f]!=null?h?(l=!0,u[f]=n[f]):this[f]=n[f]:s&&r[f]!=null&&(h?(l=!0,u[f]=r[f]):this[f]=r[f])}if(!a)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(n||r)[p]:n||r)}l&&this._transitionState(e,u,o)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new E_,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),De(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=Ta;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var i=e?this[e]:this,a=new QP(i,n,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},t.prototype.addAnimator=function(e,n){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(n)}).done(function(){var a=i.animators,o=At(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(n):a.push(s)}return this.animators=a,this},t.prototype.animateTo=function(e,n,r){eA(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){eA(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,i){for(var a=eA(this,n,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ta;function n(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var u=this[i]=[];s(this,u)}return this[i]},set:function(u){this[a]=u[0],this[o]=u[1],this[i]=u,s(this,u)}});function s(u,l){Object.defineProperty(l,0,{get:function(){return u[a]},set:function(c){u[a]=c}}),Object.defineProperty(l,1,{get:function(){return u[o]},set:function(c){u[o]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();Lo(JP,Ss);Lo(JP,E_);function eA(t,e,n,r,i){n=n||{};var a=[];hte(t,"",t,e,n,r,a,i);var o=a.length,s=!1,u=n.done,l=n.aborted,c=function(){s=!0,o--,o<=0&&(s?u&&u():l&&l())},f=function(){o--,o<=0&&(s?u&&u():l&&l())};o||u&&u(),a.length>0&&n.during&&a[0].during(function(p,v){n.during(v)});for(var h=0;h<a.length;h++){var d=a[h];c&&d.done(c),f&&d.aborted(f),n.force&&d.duration(n.duration),d.start(n.easing)}return a}function tA(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function LHe(t){return zi(t[0])}function zHe(t,e,n){if(zi(e[n]))if(zi(t[n])||(t[n]=[]),ya(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),tA(t[n],e[n],r))}else{var i=e[n],a=t[n],o=i.length;if(LHe(i))for(var s=i[0].length,u=0;u<o;u++)a[u]?tA(a[u],i[u],s):a[u]=Array.prototype.slice.call(i[u]);else tA(a,i,o);a.length=i.length}else t[n]=e[n]}function BHe(t,e){return t===e||zi(t)&&zi(e)&&VHe(t,e)}function VHe(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function hte(t,e,n,r,i,a,o,s){for(var u=Mt(r),l=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Ke(a),p=t.animators,v=[],m=0;m<u.length;m++){var g=u[m],y=r[g];if(y!=null&&n[g]!=null&&(d||a[g]))if(Ke(y)&&!zi(y)&&!B1(y)){if(e){s||(n[g]=y,t.updateDuringAnimation(e));continue}hte(t,g,n[g],y,i,a&&a[g],o,s)}else v.push(g);else s||(n[g]=y,t.updateDuringAnimation(e),v.push(g))}var x=v.length;if(!f&&x)for(var w=0;w<p.length;w++){var b=p[w];if(b.targetName===e){var C=b.stopTracks(v);if(C){var D=At(p,b);p.splice(D,1)}}}if(i.force||(v=$n(v,function(E){return!BHe(r[E],n[E])}),x=v.length),x>0||i.force&&!o.length){var S=void 0,_=void 0,T=void 0;if(s){_={},h&&(S={});for(var w=0;w<x;w++){var g=v[w];_[g]=n[g],h?S[g]=r[g]:n[g]=r[g]}}else if(h){T={};for(var w=0;w<x;w++){var g=v[w];T[g]=ab(n[g]),zHe(n,r,g)}}var b=new QP(n,!1,!1,f?$n(p,function(A){return A.targetName===e}):null);b.targetName=e,i.scope&&(b.scope=i.scope),h&&S&&b.whenWithKeys(0,S,v),T&&b.whenWithKeys(0,T,v),b.whenWithKeys(l??500,s?_:r,v).delay(c||0),t.addAnimator(b,e),o.push(b)}}const dte=JP;var pte=function(t){en(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var i=At(this._children,n);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(n,r){var i=this._children,a=i[r];if(n&&n!==this&&n.parent!==this&&n!==a){i[r]=n,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,i=this._children,a=At(i,n);return a<0?this:(i.splice(a,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var a=n[i];r&&a.removeSelfFromZr(r),a.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];n.call(r,o,a)}return this},e.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=n.call(r,a);a.isGroup&&!o&&a.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new _t(0,0,0,0),i=n||this._children,a=[],o=null,s=0;s<i.length;s++){var u=i[s];if(!(u.ignore||u.invisible)){var l=u.getBoundingRect(),c=u.getLocalTransform(a);c?(_t.applyTransform(r,l,c),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}}return o||r},e}(dte);pte.prototype.type="group";const Qn=pte;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var lb={},jf={};function WHe(t){delete jf[t]}function UHe(t){if(!t)return!1;if(typeof t=="string")return M0(t,1)<GN;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=M0(e[i].color,1);return n/=r,n<GN}return!1}var GHe=function(){function t(e,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var a=new H7e,o=r.renderer||"canvas";lb[o]||(o=Mt(lb)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new lb[o](n,a,r,e),u=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var l=!bt.node&&!bt.worker&&!u?new $He(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?bt.touchEventsSupported:!!c,h=44,d;f&&(d=yt(r.pointerSize,h)),this.handler=new B7e(a,s,l,s.root,d),this.animation=new _He({stage:{update:u?null:function(){return i._flush(!0)}}}),u||this.animation.start()}return t.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh()},t.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=UHe(e)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(e){var n,r=pp();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=pp();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},t.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this.handler.off(e,n)},t.prototype.trigger=function(e,n){this.handler.trigger(e,n)},t.prototype.clear=function(){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof Qn&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,WHe(this.id)},t}();function qN(t,e){var n=new GHe(VP(),t,e);return jf[n.id]=n,n}function HHe(t){t.dispose()}function jHe(){for(var t in jf)jf.hasOwnProperty(t)&&jf[t].dispose();jf={}}function qHe(t){return jf[t]}function vte(t,e){lb[t]=e}var XHe="5.4.4";const KHe=Object.freeze(Object.defineProperty({__proto__:null,dispose:HHe,disposeAll:jHe,getInstance:qHe,init:qN,registerPainter:vte,version:XHe},Symbol.toStringTag,{value:"Module"}));var l6=1e-4,gte=20;function YHe(t){return t.replace(/^\s+|\s+$/g,"")}function Mu(t,e,n,r){var i=e[0],a=e[1],o=n[0],s=n[1],u=a-i,l=s-o;if(u===0)return l===0?o:(o+s)/2;if(r)if(u>0){if(t<=i)return o;if(t>=a)return s}else{if(t>=i)return o;if(t<=a)return s}else{if(t===i)return o;if(t===a)return s}return(t-i)/u*l+o}function bn(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return ze(t)?YHe(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function Yn(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),gte),t=(+t).toFixed(e),n?t:+t}function mte(t){return t.sort(function(e,n){return e-n}),t}function js(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return yte(t)}function yte(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,i=n>0?n:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function e3(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),a=Math.round(n(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function ZHe(t,e,n){if(!t[e])return 0;var r=xte(t,n);return r[e]||0}function xte(t,e){var n=fu(t,function(d,p){return d+(isNaN(p)?0:p)},0);if(n===0)return[];for(var r=Math.pow(10,e),i=$e(t,function(d){return(isNaN(d)?0:d)/n*r*100}),a=r*100,o=$e(i,function(d){return Math.floor(d)}),s=fu(o,function(d,p){return d+p},0),u=$e(i,function(d,p){return d-o[p]});s<a;){for(var l=Number.NEGATIVE_INFINITY,c=null,f=0,h=u.length;f<h;++f)u[f]>l&&(l=u[f],c=f);++o[c],u[c]=0,++s}return $e(o,function(d){return d/r})}function QHe(t,e){var n=Math.max(js(t),js(e)),r=t+e;return n>gte?r:Yn(r,n)}var JHe=9007199254740991;function t3(t){var e=Math.PI*2;return(t%e+e)%e}function P0(t){return t>-l6&&t<l6}var eje=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Io(t){if(t instanceof Date)return t;if(ze(t)){var e=eje.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function wte(t){return Math.pow(10,I_(t))}function I_(t){if(t===0)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function n3(t,e){var n=I_(t),r=Math.pow(10,n),i=t/r,a;return e?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,t=a*r,n>=-20?+t.toFixed(n<0?-n:0):t}function tje(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i}function nje(t){t.sort(function(u,l){return s(u,l,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,a=t[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-n),e=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!==1?t.splice(r,1):r++}return t;function s(u,l,c){return u.interval[c]<l.interval[c]||u.interval[c]===l.interval[c]&&(u.close[c]-l.close[c]===(c?-1:1)||!c&&s(u,l,1))}}function L0(t){var e=parseFloat(t);return e==t&&(e!==0||!ze(t)||t.indexOf("x")<=0)?e:NaN}function bte(t){return!isNaN(L0(t))}function Cte(){return Math.round(Math.random()*9)}function Ste(t,e){return e===0?t:Ste(e,t%e)}function c6(t,e){return t==null?e:e==null?t:t*e/Ste(t,e)}function Zi(t){throw new Error(t)}function f6(t,e,n){return(e-t)*n+t}var Dte="series\0",_te="\0_ec_\0";function cr(t){return t instanceof Array?t:t==null?[]:[t]}function XN(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var h6=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function H1(t){return Ke(t)&&!Me(t)&&!(t instanceof Date)?t.value:t}function rje(t){return Ke(t)&&!(t instanceof Array)}function ije(t,e,n){var r=n==="normalMerge",i=n==="replaceMerge",a=n==="replaceAll";t=t||[],e=(e||[]).slice();var o=st();W(e,function(u,l){if(!Ke(u)){e[l]=null;return}});var s=aje(t,o,n);return(r||i)&&oje(s,t,o,e),r&&sje(s,e),r||i?uje(s,e,i):a&&lje(s,e),cje(s),s}function aje(t,e,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<t.length;i++){var a=t[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:n==="replaceMerge"||z0(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function oje(t,e,n,r){W(r,function(i,a){if(!(!i||i.id==null)){var o=$m(i.id),s=n.get(o);if(s!=null){var u=t[s];za(!u.newOption,'Duplicated option on id "'+o+'".'),u.newOption=i,u.existing=e[s],r[a]=null}}})}function sje(t,e){W(e,function(n,r){if(!(!n||n.name==null))for(var i=0;i<t.length;i++){var a=t[i].existing;if(!t[i].newOption&&a&&(a.id==null||n.id==null)&&!z0(n)&&!z0(a)&&Tte("name",a,n)){t[i].newOption=n,e[r]=null;return}}})}function uje(t,e,n){W(e,function(r){if(r){for(var i,a=0;(i=t[a])&&(i.newOption||z0(i.existing)||i.existing&&r.id!=null&&!Tte("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),a++}})}function lje(t,e){W(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function cje(t){var e=st();W(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),W(t,function(n){var r=n.newOption;za(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),W(t,function(n,r){var i=n.existing,a=n.newOption,o=n.keyInfo;if(Ke(a)){if(o.name=a.name!=null?$m(a.name):i?i.name:Dte+r,i)o.id=$m(i.id);else if(a.id!=null)o.id=$m(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,n)}})}function Tte(t,e,n){var r=iu(e[t],null),i=iu(n[t],null);return r!=null&&i!=null&&r===i}function $m(t){return iu(t,"")}function iu(t,e){return t==null?e:ze(t)?t:Kt(t)||HC(t)?t+"":e}function r3(t){var e=t.name;return!!(e&&e.indexOf(Dte))}function z0(t){return t&&t.id!=null&&$m(t.id).indexOf(_te)===0}function fje(t){return _te+t}function hje(t,e,n){W(t,function(r){var i=r.newOption;Ke(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=dje(e,i,r.existing,n))})}function dje(t,e,n,r){var i=e.type?e.type:n?n.subType:r.determineSubType(t,e);return i}function zh(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Me(e.dataIndex)?$e(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Me(e.name)?$e(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function Gn(){var t="__ec_inner_"+pje++;return function(e){return e[t]||(e[t]={})}}var pje=Cte();function Mm(t,e,n){var r=i3(e,n),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,u=n?n.defaultMainType:null;return!i&&u&&a.set(u,{}),a.each(function(l,c){var f=j1(t,c,l,{useDefault:u===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function i3(t,e){var n;if(ze(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var i=st(),a={},o=!1;return W(n,function(s,u){if(u==="dataIndex"||u==="dataIndexInside"){a[u]=s;return}var l=u.match(/^(\w+)(Index|Id|Name)$/)||[],c=l[1],f=(l[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&At(e.includeMainTypes,c)<0)){o=o||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var $i={useDefault:!0,enableAll:!1,enableNone:!1},vje={useDefault:!1,enableAll:!0,enableNone:!0};function j1(t,e,n,r){r=r||$i;var i=n.index,a=n.id,o=n.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var u=void 0;return s.models=r.useDefault&&(u=t.getComponent(e))?[u]:[],s}return i==="none"||i===!1?(za(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(za(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=t.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function Ete(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function gje(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function mje(t){return t==="auto"?bt.domSupported?"html":"richText":t||"html"}function yje(t,e,n,r,i){var a=e==null||e==="auto";if(r==null)return r;if(Kt(r)){var o=f6(n||0,r,i);return Yn(o,a?Math.max(js(n||0),js(r)):e)}else{if(ze(r))return i<1?n:r;for(var s=[],u=n,l=r,c=Math.max(u?u.length:0,l.length),f=0;f<c;++f){var h=t.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&u?u:l)[f];else{var d=u&&u[f]?u[f]:0,p=l[f],o=f6(d,p,i);s[f]=Yn(o,a?Math.max(js(d),js(p)):e)}}return s}}var xje=".",sf="___EC__COMPONENT__CONTAINER___",Ate="___EC__EXTENDED_CLASS___";function qs(t){var e={main:"",sub:""};if(t){var n=t.split(xje);e.main=n[0]||"",e.sub=n[1]||""}return e}function wje(t){za(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function bje(t){return!!(t&&t[Ate])}function a3(t,e){t.$constructor=t,t.extend=function(n){var r=this,i;return Cje(r)?i=function(a){Ge(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},WP(i,this)),De(i.prototype,n),i[Ate]=!0,i.extend=this.extend,i.superCall=_je,i.superApply=Tje,i.superClass=r,i}}function Cje(t){return ot(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function kte(t,e){t.extend=e.extend}var Sje=Math.round(Math.random()*10);function Dje(t){var e=["__\0is_clz",Sje++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function _je(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function Tje(t,e,n){return this.superClass.prototype[e].apply(t,n)}function N_(t){var e={};t.registerClass=function(r){var i=r.type||r.prototype.type;if(i){wje(i),r.prototype.type=i;var a=qs(i);if(!a.sub)e[a.main]=r;else if(a.sub!==sf){var o=n(a);o[a.sub]=r}}return r},t.getClass=function(r,i,a){var o=e[r];if(o&&o[sf]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},t.getClassesByMainType=function(r){var i=qs(r),a=[],o=e[i.main];return o&&o[sf]?W(o,function(s,u){u!==sf&&a.push(s)}):a.push(o),a},t.hasClass=function(r){var i=qs(r);return!!e[i.main]},t.getAllClassMainTypes=function(){var r=[];return W(e,function(i,a){r.push(a)}),r},t.hasSubTypes=function(r){var i=qs(r),a=e[i.main];return a&&a[sf]};function n(r){var i=e[r.main];return(!i||!i[sf])&&(i=e[r.main]={},i[sf]=!0),i}}function B0(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<t.length;s++){var u=t[s][1];if(!(i&&At(i,u)>=0||a&&At(a,u)<0)){var l=r.getShallow(u,e);l!=null&&(o[t[s][0]]=l)}}return o}}var Eje=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Aje=B0(Eje),kje=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return Aje(this,e,n)},t}(),KN=new G1(50);function Ije(t){if(typeof t=="string"){var e=KN.get(t);return e&&e.image}else return t}function o3(t,e,n,r,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var a=KN.get(t),o={hostEl:n,cb:r,cbPayload:i};return a?(e=a.image,!R_(e)&&a.pending.push(o)):(e=tl.loadImage(t,d6,d6),e.__zrImageSrc=t,KN.put(t,e.__cachedImgObj={image:e,pending:[o]})),e}else return t;else return e}function d6(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function R_(t){return t&&t.width&&t.height}var nA=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Ite(t,e,n,r,i){if(!e)return"";var a=(t+"").split(`
`);i=Nte(e,n,r,i);for(var o=0,s=a.length;o<s;o++)a[o]=Rte(a[o],i);return a.join(`
`)}function Nte(t,e,n,r){r=r||{};var i=De({},r);i.font=e,n=yt(n,"..."),i.maxIterations=yt(r.maxIterations,2);var a=i.minChar=yt(r.minChar,0);i.cnCharWidth=Ra("",e);var o=i.ascCharWidth=Ra("a",e);i.placeholder=yt(r.placeholder,"");for(var s=t=Math.max(0,t-1),u=0;u<a&&s>=o;u++)s-=o;var l=Ra(n,e);return l>s&&(n="",l=0),s=t-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=s,i.containerWidth=t,i}function Rte(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var a=Ra(t,r);if(a<=n)return t;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){t+=e.ellipsis;break}var s=o===0?Nje(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;t=t.substr(0,s),a=Ra(t,r)}return t===""&&(t=e.placeholder),t}function Nje(t,e,n,r){for(var i=0,a=0,o=t.length;a<o&&i<e;a++){var s=t.charCodeAt(a);i+=0<=s&&s<=127?n:r}return a}function Rje(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,i=e.font,a=n==="truncate",o=k_(i),s=yt(e.lineHeight,o),u=!!e.backgroundColor,l=e.lineOverflow==="truncate",c=e.width,f;c!=null&&(n==="break"||n==="breakAll")?f=t?$te(t,e.font,c,n==="breakAll",0).lines:[]:f=t?t.split(`
`):[];var h=f.length*s,d=yt(e.height,h);if(h>d&&l){var p=Math.floor(d/s);f=f.slice(0,p)}if(t&&a&&c!=null)for(var v=Nte(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),m=0;m<f.length;m++)f[m]=Rte(f[m],v);for(var g=d,y=0,m=0;m<f.length;m++)y=Math.max(Ra(f[m],i),y);c==null&&(c=y);var x=y;return r&&(g+=r[0]+r[2],x+=r[1]+r[3],c+=r[1]+r[3]),u&&(x=c),{lines:f,height:d,outerWidth:x,outerHeight:g,lineHeight:s,calculatedLineHeight:o,contentWidth:y,contentHeight:h,width:c}}var $je=function(){function t(){}return t}(),p6=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),Mje=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function Oje(t,e){var n=new Mje;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=nA.lastIndex=0,u;(u=nA.exec(t))!=null;){var l=u.index;l>s&&rA(n,t.substring(s,l),e,o),rA(n,u[2],e,o,u[1]),s=nA.lastIndex}s<t.length&&rA(n,t.substring(s,t.length),e,o);var c=[],f=0,h=0,d=e.padding,p=a==="truncate",v=e.lineOverflow==="truncate";function m(O,F,V){O.width=F,O.lineHeight=V,f+=V,h=Math.max(h,F)}e:for(var g=0;g<n.lines.length;g++){for(var y=n.lines[g],x=0,w=0,b=0;b<y.tokens.length;b++){var C=y.tokens[b],D=C.styleName&&e.rich[C.styleName]||{},S=C.textPadding=D.padding,_=S?S[1]+S[3]:0,T=C.font=D.font||e.font;C.contentHeight=k_(T);var E=yt(D.height,C.contentHeight);if(C.innerHeight=E,S&&(E+=S[0]+S[2]),C.height=E,C.lineHeight=$p(D.lineHeight,e.lineHeight,E),C.align=D&&D.align||e.align,C.verticalAlign=D&&D.verticalAlign||"middle",v&&i!=null&&f+C.lineHeight>i){b>0?(y.tokens=y.tokens.slice(0,b),m(y,w,x),n.lines=n.lines.slice(0,g+1)):n.lines=n.lines.slice(0,g);break e}var A=D.width,N=A==null||A==="auto";if(typeof A=="string"&&A.charAt(A.length-1)==="%")C.percentWidth=A,c.push(C),C.contentWidth=Ra(C.text,T);else{if(N){var R=D.backgroundColor,M=R&&R.image;M&&(M=Ije(M),R_(M)&&(C.width=Math.max(C.width,M.width*E/M.height)))}var $=p&&r!=null?r-w:null;$!=null&&$<C.width?!N||$<_?(C.text="",C.width=C.contentWidth=0):(C.text=Ite(C.text,$-_,T,e.ellipsis,{minChar:e.truncateMinChar}),C.width=C.contentWidth=Ra(C.text,T)):C.contentWidth=Ra(C.text,T)}C.width+=_,w+=C.width,D&&(x=Math.max(x,C.lineHeight))}m(y,w,x)}n.outerWidth=n.width=yt(r,h),n.outerHeight=n.height=yt(i,f),n.contentHeight=f,n.contentWidth=h,d&&(n.outerWidth+=d[1]+d[3],n.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var C=c[g],L=C.percentWidth;C.width=parseInt(L,10)/100*n.width}return n}function rA(t,e,n,r,i){var a=e==="",o=i&&n.rich[i]||{},s=t.lines,u=o.font||n.font,l=!1,c,f;if(r){var h=o.padding,d=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Ac(o.width,r.width)+d;s.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),l=!0),r.accumWidth=p}else{var v=$te(e,u,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=e.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],y=new $je;if(y.styleName=i,y.text=g,y.isLineHolder=!g&&!a,typeof o.width=="number"?y.width=o.width:y.width=f?f[m]:Ra(g,u),!m&&!l){var x=(s[s.length-1]||(s[0]=new p6)).tokens,w=x.length;w===1&&x[0].isLineHolder?x[0]=y:(g||!w||a)&&x.push(y)}else s.push(new p6([y]))}}function Fje(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var Pje=fu(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function Lje(t){return Fje(t)?!!Pje[t]:!0}function $te(t,e,n,r,i){for(var a=[],o=[],s="",u="",l=0,c=0,f=0;f<t.length;f++){var h=t.charAt(f);if(h===`
`){u&&(s+=u,c+=l),a.push(s),o.push(c),s="",u="",l=0,c=0;continue}var d=Ra(h,e),p=r?!1:!Lje(h);if(a.length?c+d>n:i+c+d>n){c?(s||u)&&(p?(s||(s=u,u="",l=0,c=l),a.push(s),o.push(c-l),u+=h,l+=d,s="",c=l):(u&&(s+=u,u="",l=0),a.push(s),o.push(c),s=h,c=d)):p?(a.push(u),o.push(l),u=h,l=d):(a.push(h),o.push(d));continue}c+=d,p?(u+=h,l+=d):(u&&(s+=u,u="",l=0),s+=h)}return!a.length&&!s&&(s=t,u="",l=0),u&&(s+=u),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var YN="__zr_style_"+Math.round(Math.random()*10),uh={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},$_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};uh[YN]=!0;var v6=["z","z2","invisible"],zje=["invisible"],Bje=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=Mt(n),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(n[a]):t.prototype.attrKV.call(this,a,n[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Vje(this,n,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var u=this.parent;u;){if(u.ignore)return!1;u=u.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,u=a.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new _t(0,0,0,0)),r?_t.applyTransform(n,i,r):n.copy(i),(o||s||u)&&(n.width+=o*2+Math.abs(s),n.height+=o*2+Math.abs(u),n.x=Math.min(n.x,n.x+s-o),n.y=Math.min(n.y,n.y+u-o));var l=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-l),n.y=Math.floor(n.y-l),n.width=Math.ceil(n.width+1+l*2),n.height=Math.ceil(n.height+1+l*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new _t(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:De(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=sm,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&sm)},e.prototype.styleUpdated=function(){this.__dirty&=~sm},e.prototype.createStyle=function(n){return V1(uh,n)},e.prototype.useStyle=function(n){n[YN]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[YN]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,v6)},e.prototype._applyStateObj=function(n,r,i,a,o,s){t.prototype._applyStateObj.call(this,n,r,i,a,o,s);var u=!(r&&a),l;if(r&&r.style?o?a?l=r.style:(l=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(l,r.style)):(l=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(l,r.style)):u&&(l=i.style),l)if(o){var c=this.style;if(this.style=this.createStyle(u?{}:c),u)for(var f=Mt(c),h=0;h<f.length;h++){var d=f[h];d in l&&(l[d]=l[d],this.style[d]=c[d])}for(var p=Mt(l),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(n,{style:l},s,this.getAnimationStyleProps())}else this.useStyle(l);for(var v=this.__inHover?zje:v6,h=0;h<v.length;h++){var d=v[h];r&&r[d]!=null?this[d]=r[d]:u&&i[d]!=null&&(this[d]=i[d])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(n,r){return De(n,r),n},e.prototype.getAnimationStyleProps=function(){return $_},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=Ta|sm}(),e}(dte),iA=new _t(0,0,0,0),aA=new _t(0,0,0,0);function Vje(t,e,n){return iA.copy(t.getBoundingRect()),t.transform&&iA.applyTransform(t.transform),aA.width=e,aA.height=n,!iA.intersect(aA)}const tg=Bje;var Qi=Math.min,Ji=Math.max,oA=Math.sin,sA=Math.cos,uf=Math.PI*2,rw=ld(),iw=ld(),aw=ld();function Mte(t,e,n){if(t.length!==0){for(var r=t[0],i=r[0],a=r[0],o=r[1],s=r[1],u=1;u<t.length;u++)r=t[u],i=Qi(i,r[0]),a=Ji(a,r[0]),o=Qi(o,r[1]),s=Ji(s,r[1]);e[0]=i,e[1]=o,n[0]=a,n[1]=s}}function g6(t,e,n,r,i,a){i[0]=Qi(t,n),i[1]=Qi(e,r),a[0]=Ji(t,n),a[1]=Ji(e,r)}var m6=[],y6=[];function Wje(t,e,n,r,i,a,o,s,u,l){var c=Zee,f=mr,h=c(t,n,i,o,m6);u[0]=1/0,u[1]=1/0,l[0]=-1/0,l[1]=-1/0;for(var d=0;d<h;d++){var p=f(t,n,i,o,m6[d]);u[0]=Qi(p,u[0]),l[0]=Ji(p,l[0])}h=c(e,r,a,s,y6);for(var d=0;d<h;d++){var v=f(e,r,a,s,y6[d]);u[1]=Qi(v,u[1]),l[1]=Ji(v,l[1])}u[0]=Qi(t,u[0]),l[0]=Ji(t,l[0]),u[0]=Qi(o,u[0]),l[0]=Ji(o,l[0]),u[1]=Qi(e,u[1]),l[1]=Ji(e,l[1]),u[1]=Qi(s,u[1]),l[1]=Ji(s,l[1])}function Uje(t,e,n,r,i,a,o,s){var u=Qee,l=li,c=Ji(Qi(u(t,n,i),1),0),f=Ji(Qi(u(e,r,a),1),0),h=l(t,n,i,c),d=l(e,r,a,f);o[0]=Qi(t,i,h),o[1]=Qi(e,a,d),s[0]=Ji(t,i,h),s[1]=Ji(e,a,d)}function Gje(t,e,n,r,i,a,o,s,u){var l=Wl,c=Ul,f=Math.abs(i-a);if(f%uf<1e-4&&f>1e-4){s[0]=t-n,s[1]=e-r,u[0]=t+n,u[1]=e+r;return}if(rw[0]=sA(i)*n+t,rw[1]=oA(i)*r+e,iw[0]=sA(a)*n+t,iw[1]=oA(a)*r+e,l(s,rw,iw),c(u,rw,iw),i=i%uf,i<0&&(i=i+uf),a=a%uf,a<0&&(a=a+uf),i>a&&!o?a+=uf:i<a&&o&&(i+=uf),o){var h=a;a=i,i=h}for(var d=0;d<a;d+=Math.PI/2)d>i&&(aw[0]=sA(d)*n+t,aw[1]=oA(d)*r+e,l(s,aw,s),c(u,aw,u))}var Wt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},lf=[],cf=[],Es=[],vl=[],As=[],ks=[],uA=Math.min,lA=Math.max,ff=Math.cos,hf=Math.sin,Su=Math.abs,ZN=Math.PI,_l=ZN*2,cA=typeof Float32Array<"u",Ig=[];function fA(t){var e=Math.round(t/ZN*1e8)/1e8;return e%2*ZN}function Hje(t,e){var n=fA(t[0]);n<0&&(n+=_l);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=_l?i=n+_l:e&&n-i>=_l?i=n-_l:!e&&n>i?i=n+(_l-fA(n-i)):e&&n<i&&(i=n-(_l-fA(i-n))),t[0]=n,t[1]=i}var jje=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=Su(r/eS/e)||0,this._uy=Su(r/eS/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(Wt.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=Su(e-this._xi),i=Su(n-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Wt.L,e,n),this._ctx&&a&&this._ctx.lineTo(e,n),a)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(e,n,r,i,a,o){return this._drawPendingPt(),this.addData(Wt.C,e,n,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,n,r,i,a,o),this._xi=a,this._yi=o,this},t.prototype.quadraticCurveTo=function(e,n,r,i){return this._drawPendingPt(),this.addData(Wt.Q,e,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,i),this._xi=r,this._yi=i,this},t.prototype.arc=function(e,n,r,i,a,o){this._drawPendingPt(),Ig[0]=i,Ig[1]=a,Hje(Ig,o),i=Ig[0],a=Ig[1];var s=a-i;return this.addData(Wt.A,e,n,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,n,r,i,a,o),this._xi=ff(a)*r+e,this._yi=hf(a)*r+n,this},t.prototype.arcTo=function(e,n,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,i,a),this},t.prototype.rect=function(e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,i),this.addData(Wt.R,e,n,r,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(Wt.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&cA&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,i=this._len,a=0;a<n;a++)r+=e[a].len();cA&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<n;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},t.prototype.addData=function(e,n,r,i,a,o,s,u,l){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,cA&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){Es[0]=Es[1]=As[0]=As[1]=Number.MAX_VALUE,vl[0]=vl[1]=ks[0]=ks[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],u=o===1;switch(u&&(n=e[o],r=e[o+1],i=n,a=r),s){case Wt.M:n=i=e[o++],r=a=e[o++],As[0]=i,As[1]=a,ks[0]=i,ks[1]=a;break;case Wt.L:g6(n,r,e[o],e[o+1],As,ks),n=e[o++],r=e[o++];break;case Wt.C:Wje(n,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],As,ks),n=e[o++],r=e[o++];break;case Wt.Q:Uje(n,r,e[o++],e[o++],e[o],e[o+1],As,ks),n=e[o++],r=e[o++];break;case Wt.A:var l=e[o++],c=e[o++],f=e[o++],h=e[o++],d=e[o++],p=e[o++]+d;o+=1;var v=!e[o++];u&&(i=ff(d)*f+l,a=hf(d)*h+c),Gje(l,c,f,h,d,p,v,As,ks),n=ff(p)*f+l,r=hf(p)*h+c;break;case Wt.R:i=n=e[o++],a=r=e[o++];var m=e[o++],g=e[o++];g6(i,a,i+m,a+g,As,ks);break;case Wt.Z:n=i,r=a;break}Wl(Es,Es,As),Ul(vl,vl,ks)}return o===0&&(Es[0]=Es[1]=vl[0]=vl[1]=0),new _t(Es[0],Es[1],vl[0]-Es[0],vl[1]-Es[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,u=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,c=0,f=0,h=0;h<n;){var d=e[h++],p=h===1;p&&(a=e[h],o=e[h+1],s=a,u=o);var v=-1;switch(d){case Wt.M:a=s=e[h++],o=u=e[h++];break;case Wt.L:{var m=e[h++],g=e[h++],y=m-a,x=g-o;(Su(y)>r||Su(x)>i||h===n-1)&&(v=Math.sqrt(y*y+x*x),a=m,o=g);break}case Wt.C:{var w=e[h++],b=e[h++],m=e[h++],g=e[h++],C=e[h++],D=e[h++];v=q7e(a,o,w,b,m,g,C,D,10),a=C,o=D;break}case Wt.Q:{var w=e[h++],b=e[h++],m=e[h++],g=e[h++];v=Y7e(a,o,w,b,m,g,10),a=m,o=g;break}case Wt.A:var S=e[h++],_=e[h++],T=e[h++],E=e[h++],A=e[h++],N=e[h++],R=N+A;h+=1,e[h++],p&&(s=ff(A)*T+S,u=hf(A)*E+_),v=lA(T,E)*uA(_l,Math.abs(N)),a=ff(R)*T+S,o=hf(R)*E+_;break;case Wt.R:{s=a=e[h++],u=o=e[h++];var M=e[h++],$=e[h++];v=M*2+$*2;break}case Wt.Z:{var y=s-a,x=u-o;v=Math.sqrt(y*y+x*x),a=s,o=u;break}}v>=0&&(l[f++]=v,c+=v)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,n){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,u,l,c,f,h,d=n<1,p,v,m=0,g=0,y,x=0,w,b;if(!(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=n*v,!y)))e:for(var C=0;C<o;){var D=r[C++],S=C===1;switch(S&&(l=r[C],c=r[C+1],s=l,u=c),D!==Wt.L&&x>0&&(e.lineTo(w,b),x=0),D){case Wt.M:s=l=r[C++],u=c=r[C++],e.moveTo(l,c);break;case Wt.L:{f=r[C++],h=r[C++];var _=Su(f-l),T=Su(h-c);if(_>i||T>a){if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;e.lineTo(l*(1-A)+f*A,c*(1-A)+h*A);break e}m+=E}e.lineTo(f,h),l=f,c=h,x=0}else{var N=_*_+T*T;N>x&&(w=f,b=h,x=N)}break}case Wt.C:{var R=r[C++],M=r[C++],$=r[C++],L=r[C++],O=r[C++],F=r[C++];if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;Ec(l,R,$,O,A,lf),Ec(c,M,L,F,A,cf),e.bezierCurveTo(lf[1],cf[1],lf[2],cf[2],lf[3],cf[3]);break e}m+=E}e.bezierCurveTo(R,M,$,L,O,F),l=O,c=F;break}case Wt.Q:{var R=r[C++],M=r[C++],$=r[C++],L=r[C++];if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;QC(l,R,$,A,lf),QC(c,M,L,A,cf),e.quadraticCurveTo(lf[1],cf[1],lf[2],cf[2]);break e}m+=E}e.quadraticCurveTo(R,M,$,L),l=$,c=L;break}case Wt.A:var V=r[C++],X=r[C++],P=r[C++],U=r[C++],j=r[C++],q=r[C++],Y=r[C++],ne=!r[C++],ue=P>U?P:U,te=Su(P-U)>.001,oe=j+q,ce=!1;if(d){var E=p[g++];m+E>y&&(oe=j+q*(y-m)/E,ce=!0),m+=E}if(te&&e.ellipse?e.ellipse(V,X,P,U,Y,j,oe,ne):e.arc(V,X,ue,j,oe,ne),ce)break e;S&&(s=ff(j)*P+V,u=hf(j)*U+X),l=ff(oe)*P+V,c=hf(oe)*U+X;break;case Wt.R:s=l=r[C],u=c=r[C+1],f=r[C++],h=r[C++];var pe=r[C++],me=r[C++];if(d){var E=p[g++];if(m+E>y){var _e=y-m;e.moveTo(f,h),e.lineTo(f+uA(_e,pe),h),_e-=pe,_e>0&&e.lineTo(f+pe,h+uA(_e,me)),_e-=me,_e>0&&e.lineTo(f+lA(pe-_e,0),h+me),_e-=pe,_e>0&&e.lineTo(f,h+lA(me-_e,0));break e}m+=E}e.rect(f,h,pe,me);break;case Wt.Z:if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;e.lineTo(l*(1-A)+s*A,c*(1-A)+u*A);break e}m+=E}e.closePath(),l=s,c=u}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=Wt,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();const hu=jje;function Dd(t,e,n,r,i,a,o){if(i===0)return!1;var s=i,u=0,l=t;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>t+s&&a>n+s||a<t-s&&a<n-s)return!1;if(t!==n)u=(e-r)/(t-n),l=(t*r-n*e)/(t-n);else return Math.abs(a-t)<=s/2;var c=u*a-o+l,f=c*c/(u*u+1);return f<=s/2*s/2}function qje(t,e,n,r,i,a,o,s,u,l,c){if(u===0)return!1;var f=u;if(c>e+f&&c>r+f&&c>a+f&&c>s+f||c<e-f&&c<r-f&&c<a-f&&c<s-f||l>t+f&&l>n+f&&l>i+f&&l>o+f||l<t-f&&l<n-f&&l<i-f&&l<o-f)return!1;var h=j7e(t,e,n,r,i,a,o,s,l,c,null);return h<=f/2}function Xje(t,e,n,r,i,a,o,s,u){if(o===0)return!1;var l=o;if(u>e+l&&u>r+l&&u>a+l||u<e-l&&u<r-l&&u<a-l||s>t+l&&s>n+l&&s>i+l||s<t-l&&s<n-l&&s<i-l)return!1;var c=K7e(t,e,n,r,i,a,s,u,null);return c<=l/2}var x6=Math.PI*2;function ow(t){return t%=x6,t<0&&(t+=x6),t}var Ng=Math.PI*2;function Kje(t,e,n,r,i,a,o,s,u){if(o===0)return!1;var l=o;s-=t,u-=e;var c=Math.sqrt(s*s+u*u);if(c-l>n||c+l<n)return!1;if(Math.abs(r-i)%Ng<1e-4)return!0;if(a){var f=r;r=ow(i),i=ow(f)}else r=ow(r),i=ow(i);r>i&&(i+=Ng);var h=Math.atan2(u,s);return h<0&&(h+=Ng),h>=r&&h<=i||h+Ng>=r&&h+Ng<=i}function ku(t,e,n,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var u=o*(n-t)+t;return u===i?1/0:u>i?s:0}var gl=hu.CMD,df=Math.PI*2,Yje=1e-4;function Zje(t,e){return Math.abs(t-e)<Yje}var Ei=[-1,-1,-1],oo=[-1,-1];function Qje(){var t=oo[0];oo[0]=oo[1],oo[1]=t}function Jje(t,e,n,r,i,a,o,s,u,l){if(l>e&&l>r&&l>a&&l>s||l<e&&l<r&&l<a&&l<s)return 0;var c=ZC(e,r,a,s,l,Ei);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=Ei[v],g=m===0||m===1?.5:1,y=mr(t,n,i,o,m);y<u||(h<0&&(h=Zee(e,r,a,s,oo),oo[1]<oo[0]&&h>1&&Qje(),d=mr(e,r,a,s,oo[0]),h>1&&(p=mr(e,r,a,s,oo[1]))),h===2?m<oo[0]?f+=d<e?g:-g:m<oo[1]?f+=p<d?g:-g:f+=s<p?g:-g:m<oo[0]?f+=d<e?g:-g:f+=s<d?g:-g)}return f}function eqe(t,e,n,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var u=X7e(e,r,a,s,Ei);if(u===0)return 0;var l=Qee(e,r,a);if(l>=0&&l<=1){for(var c=0,f=li(e,r,a,l),h=0;h<u;h++){var d=Ei[h]===0||Ei[h]===1?.5:1,p=li(t,n,i,Ei[h]);p<o||(Ei[h]<l?c+=f<e?d:-d:c+=a<f?d:-d)}return c}else{var d=Ei[0]===0||Ei[0]===1?.5:1,p=li(t,n,i,Ei[0]);return p<o?0:a<e?d:-d}}function tqe(t,e,n,r,i,a,o,s){if(s-=e,s>n||s<-n)return 0;var u=Math.sqrt(n*n-s*s);Ei[0]=-u,Ei[1]=u;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l>=df-1e-4){r=0,i=df;var c=a?1:-1;return o>=Ei[0]+t&&o<=Ei[1]+t?c:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=df,i+=df);for(var h=0,d=0;d<2;d++){var p=Ei[d];if(p+t>o){var v=Math.atan2(s,p),c=a?1:-1;v<0&&(v=df+v),(v>=r&&v<=i||v+df>=r&&v+df<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function Ote(t,e,n,r,i){for(var a=t.data,o=t.len(),s=0,u=0,l=0,c=0,f=0,h,d,p=0;p<o;){var v=a[p++],m=p===1;switch(v===gl.M&&p>1&&(n||(s+=ku(u,l,c,f,r,i))),m&&(u=a[p],l=a[p+1],c=u,f=l),v){case gl.M:c=a[p++],f=a[p++],u=c,l=f;break;case gl.L:if(n){if(Dd(u,l,a[p],a[p+1],e,r,i))return!0}else s+=ku(u,l,a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case gl.C:if(n){if(qje(u,l,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=Jje(u,l,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case gl.Q:if(n){if(Xje(u,l,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=eqe(u,l,a[p++],a[p++],a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case gl.A:var g=a[p++],y=a[p++],x=a[p++],w=a[p++],b=a[p++],C=a[p++];p+=1;var D=!!(1-a[p++]);h=Math.cos(b)*x+g,d=Math.sin(b)*w+y,m?(c=h,f=d):s+=ku(u,l,h,d,r,i);var S=(r-g)*w/x+g;if(n){if(Kje(g,y,w,b,b+C,D,e,S,i))return!0}else s+=tqe(g,y,w,b,b+C,D,S,i);u=Math.cos(b+C)*x+g,l=Math.sin(b+C)*w+y;break;case gl.R:c=u=a[p++],f=l=a[p++];var _=a[p++],T=a[p++];if(h=c+_,d=f+T,n){if(Dd(c,f,h,f,e,r,i)||Dd(h,f,h,d,e,r,i)||Dd(h,d,c,d,e,r,i)||Dd(c,d,c,f,e,r,i))return!0}else s+=ku(h,f,h,d,r,i),s+=ku(c,d,c,f,r,i);break;case gl.Z:if(n){if(Dd(u,l,c,f,e,r,i))return!0}else s+=ku(u,l,c,f,r,i);u=c,l=f;break}}return!n&&!Zje(l,f)&&(s+=ku(u,l,c,f,r,i)||0),s!==0}function nqe(t,e,n){return Ote(t,0,!1,e,n)}function rqe(t,e,n,r){return Ote(t,e,!0,n,r)}var nS=dt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},uh),iqe={style:dt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},$_.style)},hA=F0.concat(["invisible","culling","z","z2","zlevel","parent"]),aqe=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(u){n.buildPath(u,n.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<hA.length;++s)i[hA[s]]=this[hA[s]];i.__dirty|=Ta}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=Mt(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=n[o];o==="style"?this.style?De(this.style,s):this.useStyle(s):o==="shape"?De(this.shape,s):t.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(ze(n)){var r=M0(n,0);return r>.5?HN:r>.2?MHe:jN}else if(n)return jN}return HN},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(ze(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=M0(n,0)<GN;if(a===o)return r}},e.prototype.buildPath=function(n,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~Wd},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new hu(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Wd)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),n=o.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var u=r.strokeNoScale?this.getLineScale():1,l=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;l=Math.max(l,c??4)}u>1e-10&&(s.width+=l/u,s.height+=l/u,s.x-=l/u/2,s.y-=l/u/2)}return s}return n},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect(),o=this.style;if(n=i[0],r=i[1],a.contain(n,r)){var s=this.path;if(this.hasStroke()){var u=o.lineWidth,l=o.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(this.hasFill()||(u=Math.max(u,this.strokeContainThreshold)),rqe(s,u/l,n,r)))return!0}if(this.hasFill())return nqe(s,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Wd,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:De(i,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Wd)},e.prototype.createStyle=function(n){return V1(nS,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=De({},this.shape))},e.prototype._applyStateObj=function(n,r,i,a,o,s){t.prototype._applyStateObj.call(this,n,r,i,a,o,s);var u=!(r&&a),l;if(r&&r.shape?o?a?l=r.shape:(l=De({},i.shape),De(l,r.shape)):(l=De({},a?this.shape:i.shape),De(l,r.shape)):u&&(l=i.shape),l)if(o){this.shape=De({},this.shape);for(var c={},f=Mt(l),h=0;h<f.length;h++){var d=f[h];typeof l[d]=="object"?this.shape[d]=l[d]:c[d]=l[d]}this._transitionState(n,{shape:c},s)}else this.shape=l,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return iqe},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(a){en(o,a);function o(s){var u=a.call(this,s)||this;return n.init&&n.init.call(u,s),u}return o.prototype.getDefaultStyle=function(){return ft(n.style)},o.prototype.getDefaultShape=function(){return ft(n.shape)},o}(e);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=Ta|sm|Wd}(),e}(tg);const Tt=aqe;var oqe=dt({strokeFirst:!0,font:Tc,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},nS),Fte=function(t){en(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return V1(oqe,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=A_(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var a=n.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(tg);Fte.prototype.type="tspan";const rS=Fte;var sqe=dt({x:0,y:0},uh),uqe={style:dt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},$_.style)};function lqe(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var Pte=function(t){en(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return V1(sqe,n)},e.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var a=lqe(r.image)?r.image:this.__image;if(!a)return 0;var o=n==="width"?"height":"width",s=r[o];return s==null?a[n]:a[n]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return uqe},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new _t(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(tg);Pte.prototype.type="image";const xu=Pte;function cqe(t,e){var n=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,u,l,c;i<0&&(n=n+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=u=l=c=o:o instanceof Array?o.length===1?s=u=l=c=o[0]:o.length===2?(s=l=o[0],u=c=o[1]):o.length===3?(s=o[0],u=c=o[1],l=o[2]):(s=o[0],u=o[1],l=o[2],c=o[3]):s=u=l=c=0;var f;s+u>i&&(f=s+u,s*=i/f,u*=i/f),l+c>i&&(f=l+c,l*=i/f,c*=i/f),u+l>a&&(f=u+l,u*=a/f,l*=a/f),s+c>a&&(f=s+c,s*=a/f,c*=a/f),t.moveTo(n+s,r),t.lineTo(n+i-u,r),u!==0&&t.arc(n+i-u,r+u,u,-Math.PI/2,0),t.lineTo(n+i,r+a-l),l!==0&&t.arc(n+i-l,r+a-l,l,0,Math.PI/2),t.lineTo(n+c,r+a),c!==0&&t.arc(n+c,r+a-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+s),s!==0&&t.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var vp=Math.round;function Lte(t,e,n){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;t.x1=r,t.x2=i,t.y1=a,t.y2=o;var s=n&&n.lineWidth;return s&&(vp(r*2)===vp(i*2)&&(t.x1=t.x2=qf(r,s,!0)),vp(a*2)===vp(o*2)&&(t.y1=t.y2=qf(a,s,!0))),t}}function zte(t,e,n){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;t.x=r,t.y=i,t.width=a,t.height=o;var s=n&&n.lineWidth;return s&&(t.x=qf(r,s,!0),t.y=qf(i,s,!0),t.width=Math.max(qf(r+a,s,!1)-t.x,a===0?0:1),t.height=Math.max(qf(i+o,s,!1)-t.y,o===0?0:1)),t}}function qf(t,e,n){if(!e)return t;var r=vp(t*2);return(r+vp(e))%2===0?r/2:(r+(n?1:-1))/2}var fqe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),hqe={},Bte=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new fqe},e.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var u=zte(hqe,r,this.style);i=u.x,a=u.y,o=u.width,s=u.height,u.r=r.r,r=u}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?cqe(n,r):n.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Tt);Bte.prototype.type="rect";const Pn=Bte;var w6={fill:"#000"},b6=2,dqe={style:dt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},$_.style)},Vte=function(t){en(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=w6,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,gqe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new _t(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],u=s.getBoundingRect(),l=s.getLocalTransform(i);l?(n.copy(u),n.applyTransform(l),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}this._rect=a||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||w6},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,a=n.rich||i&&{};return De(n,r),i&&a?(this._mergeRich(a,i),n.rich=a):a&&(n.rich=a),n},e.prototype._mergeRich=function(n,r){for(var i=Mt(r),a=0;a<i.length;a++){var o=i[a];n[o]=n[o]||{},De(n[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return dqe},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||Tc,i=n.padding,a=A6(n),o=Rje(a,n),s=dA(n),u=!!n.backgroundColor,l=o.outerHeight,c=o.outerWidth,f=o.contentWidth,h=o.lines,d=o.lineHeight,p=this._defaultStyle,v=n.x||0,m=n.y||0,g=n.align||p.align||"left",y=n.verticalAlign||p.verticalAlign||"top",x=v,w=Ud(m,o.contentHeight,y);if(s||i){var b=lm(v,c,g),C=Ud(m,l,y);s&&this._renderBackground(n,n,b,C,c,l)}w+=d/2,i&&(x=E6(v,g,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var D=0,S=!1,_=T6("fill"in n?n.fill:(S=!0,p.fill)),T=_6("stroke"in n?n.stroke:!u&&(!p.autoStroke||S)?(D=b6,p.stroke):null),E=n.textShadowBlur>0,A=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),N=o.calculatedLineHeight,R=0;R<h.length;R++){var M=this._getOrCreateChild(rS),$=M.createStyle();M.useStyle($),$.text=h[R],$.x=x,$.y=w,g&&($.textAlign=g),$.textBaseline="middle",$.opacity=n.opacity,$.strokeFirst=!0,E&&($.shadowBlur=n.textShadowBlur||0,$.shadowColor=n.textShadowColor||"transparent",$.shadowOffsetX=n.textShadowOffsetX||0,$.shadowOffsetY=n.textShadowOffsetY||0),$.stroke=T,$.fill=_,T&&($.lineWidth=n.lineWidth||D,$.lineDash=n.lineDash,$.lineDashOffset=n.lineDashOffset||0),$.font=r,S6($,n),w+=d,A&&M.setBoundingRect(new _t(lm($.x,n.width,$.textAlign),Ud($.y,N,$.textBaseline),f,N))}},e.prototype._updateRichTexts=function(){var n=this.style,r=A6(n),i=Oje(r,n),a=i.width,o=i.outerWidth,s=i.outerHeight,u=n.padding,l=n.x||0,c=n.y||0,f=this._defaultStyle,h=n.align||f.align,d=n.verticalAlign||f.verticalAlign,p=lm(l,o,h),v=Ud(c,s,d),m=p,g=v;u&&(m+=u[3],g+=u[0]);var y=m+a;dA(n)&&this._renderBackground(n,n,p,v,o,s);for(var x=!!n.backgroundColor,w=0;w<i.lines.length;w++){for(var b=i.lines[w],C=b.tokens,D=C.length,S=b.lineHeight,_=b.width,T=0,E=m,A=y,N=D-1,R=void 0;T<D&&(R=C[T],!R.align||R.align==="left");)this._placeToken(R,n,S,g,E,"left",x),_-=R.width,E+=R.width,T++;for(;N>=0&&(R=C[N],R.align==="right");)this._placeToken(R,n,S,g,A,"right",x),_-=R.width,A-=R.width,N--;for(E+=(a-(E-m)-(y-A)-_)/2;T<=N;)R=C[T],this._placeToken(R,n,S,g,E+R.width/2,"center",x),E+=R.width,T++;g+=S}},e.prototype._placeToken=function(n,r,i,a,o,s,u){var l=r.rich[n.styleName]||{};l.text=n.text;var c=n.verticalAlign,f=a+i/2;c==="top"?f=a+n.height/2:c==="bottom"&&(f=a+i-n.height/2);var h=!n.isLineHolder&&dA(l);h&&this._renderBackground(l,r,s==="right"?o-n.width:s==="center"?o-n.width/2:o,f-n.height/2,n.width,n.height);var d=!!l.backgroundColor,p=n.textPadding;p&&(o=E6(o,s,p),f-=n.height/2-p[0]-n.innerHeight/2);var v=this._getOrCreateChild(rS),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,y=!1,x=0,w=T6("fill"in l?l.fill:"fill"in r?r.fill:(y=!0,g.fill)),b=_6("stroke"in l?l.stroke:"stroke"in r?r.stroke:!d&&!u&&(!g.autoStroke||y)?(x=b6,g.stroke):null),C=l.textShadowBlur>0||r.textShadowBlur>0;m.text=n.text,m.x=o,m.y=f,C&&(m.shadowBlur=l.textShadowBlur||r.textShadowBlur||0,m.shadowColor=l.textShadowColor||r.textShadowColor||"transparent",m.shadowOffsetX=l.textShadowOffsetX||r.textShadowOffsetX||0,m.shadowOffsetY=l.textShadowOffsetY||r.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=n.font||Tc,m.opacity=$p(l.opacity,r.opacity,1),S6(m,l),b&&(m.lineWidth=$p(l.lineWidth,r.lineWidth,x),m.lineDash=yt(l.lineDash,r.lineDash),m.lineDashOffset=r.lineDashOffset||0,m.stroke=b),w&&(m.fill=w);var D=n.contentWidth,S=n.contentHeight;v.setBoundingRect(new _t(lm(m.x,D,m.textAlign),Ud(m.y,S,m.textBaseline),D,S))},e.prototype._renderBackground=function(n,r,i,a,o,s){var u=n.backgroundColor,l=n.borderWidth,c=n.borderColor,f=u&&u.image,h=u&&!f,d=n.borderRadius,p=this,v,m;if(h||n.lineHeight||l&&c){v=this._getOrCreateChild(Pn),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=a,g.width=o,g.height=s,g.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=u||null,y.fillOpacity=yt(n.fillOpacity,1)}else if(f){m=this._getOrCreateChild(xu),m.onload=function(){p.dirtyStyle()};var x=m.style;x.image=u.image,x.x=i,x.y=a,x.width=o,x.height=s}if(l&&c){var y=v.style;y.lineWidth=l,y.stroke=c,y.strokeOpacity=yt(n.strokeOpacity,1),y.lineDash=n.borderDash,y.lineDashOffset=n.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=n.shadowBlur||0,w.shadowColor=n.shadowColor||"transparent",w.shadowOffsetX=n.shadowOffsetX||0,w.shadowOffsetY=n.shadowOffsetY||0,w.opacity=$p(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return Ute(n)&&(r=[n.fontStyle,n.fontWeight,Wte(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&os(r)||n.textFont||n.font},e}(tg),pqe={left:!0,right:1,center:1},vqe={top:1,bottom:1,middle:1},C6=["fontStyle","fontWeight","fontSize","fontFamily"];function Wte(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?LP+"px":t+"px"}function S6(t,e){for(var n=0;n<C6.length;n++){var r=C6[n],i=e[r];i!=null&&(t[r]=i)}}function Ute(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function gqe(t){return D6(t),W(t.rich,D6),t}function D6(t){if(t){t.font=Vte.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||pqe[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||vqe[n]?n:"top";var r=t.padding;r&&(t.padding=UP(t.padding))}}function _6(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function T6(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function E6(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function A6(t){var e=t.text;return e!=null&&(e+=""),e}function dA(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}const $r=Vte;var qt=Gn(),mqe=function(t,e,n,r){if(r){var i=qt(r);i.dataIndex=n,i.dataType=e,i.seriesIndex=t,r.type==="group"&&r.traverse(function(a){var o=qt(a);o.seriesIndex=t,o.dataIndex=n,o.dataType=e})}},k6=1,I6={},Gte=Gn(),s3=Gn(),u3=0,M_=1,O_=2,No=["emphasis","blur","select"],iS=["normal","emphasis","blur","select"],yqe=10,xqe=9,lh="highlight",cb="downplay",Om="select",fb="unselect",Fm="toggleSelect";function _d(t){return t!=null&&t!=="none"}var N6=new G1(100);function R6(t){if(ze(t)){var e=N6.get(t);return e||(e=PN(t,-.1),N6.put(t,e)),e}else if(B1(t)){var n=De({},t);return n.colorStops=$e(t.colorStops,function(r){return{offset:r.offset,color:PN(r.color,-.1)}}),n}return t}function F_(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function Hte(t){F_(t,"emphasis",O_)}function jte(t){t.hoverState===O_&&F_(t,"normal",u3)}function l3(t){F_(t,"blur",M_)}function qte(t){t.hoverState===M_&&F_(t,"normal",u3)}function wqe(t){t.selected=!0}function bqe(t){t.selected=!1}function $6(t,e,n){e(t,n)}function cl(t,e,n){$6(t,e,n),t.isGroup&&t.traverse(function(r){$6(r,e,n)})}function M6(t,e){switch(e){case"emphasis":t.hoverState=O_;break;case"normal":t.hoverState=u3;break;case"blur":t.hoverState=M_;break;case"select":t.selected=!0}}function Cqe(t,e,n,r){for(var i=t.style,a={},o=0;o<e.length;o++){var s=e[o],u=i[s];a[s]=u??(r&&r[s])}for(var o=0;o<t.animators.length;o++){var l=t.animators[o];l.__fromStateTransition&&l.__fromStateTransition.indexOf(n)<0&&l.targetName==="style"&&l.saveTo(a,e)}return a}function Sqe(t,e,n,r){var i=n&&At(n,"select")>=0,a=!1;if(t instanceof Tt){var o=Gte(t),s=i&&o.selectFill||o.normalFill,u=i&&o.selectStroke||o.normalStroke;if(_d(s)||_d(u)){r=r||{};var l=r.style||{};l.fill==="inherit"?(a=!0,r=De({},r),l=De({},l),l.fill=s):!_d(l.fill)&&_d(s)?(a=!0,r=De({},r),l=De({},l),l.fill=R6(s)):!_d(l.stroke)&&_d(u)&&(a||(r=De({},r),l=De({},l)),l.stroke=R6(u)),r.style=l}}if(r&&r.z2==null){a||(r=De({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(c??yqe)}return r}function Dqe(t,e,n){if(n&&n.z2==null){n=De({},n);var r=t.z2SelectLift;n.z2=t.z2+(r??xqe)}return n}function _qe(t,e,n){var r=At(t.currentStates,e)>=0,i=t.style.opacity,a=r?null:Cqe(t,["opacity"],e,{opacity:1});n=n||{};var o=n.style||{};return o.opacity==null&&(n=De({},n),o=De({opacity:r?i:a.opacity*.1},o),n.style=o),n}function pA(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return Sqe(this,t,e,n);if(t==="blur")return _qe(this,t,n);if(t==="select")return Dqe(this,t,n)}return n}function Tqe(t){t.stateProxy=pA;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=pA),n&&(n.stateProxy=pA)}function O6(t,e){!Zte(t,e)&&!t.__highByOuter&&cl(t,Hte)}function F6(t,e){!Zte(t,e)&&!t.__highByOuter&&cl(t,jte)}function Sv(t,e){t.__highByOuter|=1<<(e||0),cl(t,Hte)}function Dv(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&cl(t,jte)}function Eqe(t){cl(t,l3)}function Xte(t){cl(t,qte)}function Kte(t){cl(t,wqe)}function Yte(t){cl(t,bqe)}function Zte(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Qte(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(i,a){var o=s3(a),s=i==="series",u=s?t.getViewOfSeriesModel(a):t.getViewOfComponentModel(a);!s&&r.push(u),o.isBlured&&(u.group.traverse(function(l){qte(l)}),s&&n.push(a)),o.isBlured=!1}),W(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,e)})}function QN(t,e,n,r){var i=r.getModel();n=n||"coordinateSystem";function a(l,c){for(var f=0;f<c.length;f++){var h=l.getItemGraphicEl(c[f]);h&&Xte(h)}}if(t!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(t),s=o.coordinateSystem;s&&s.master&&(s=s.master);var u=[];i.eachSeries(function(l){var c=o===l,f=l.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!h||e==="series"&&c)){var d=r.getViewOfSeriesModel(l);if(d.group.traverse(function(m){m.__highByOuter&&c&&e==="self"||l3(m)}),zi(e))a(l.getData(),e);else if(Ke(e))for(var p=Mt(e),v=0;v<p.length;v++)a(l.getData(p[v]),e[p[v]]);u.push(l),s3(l).isBlured=!0}}),i.eachComponent(function(l,c){if(l!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(u,!0,i)}})}}function JN(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){s3(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){l3(a)})}}}function Aqe(t,e,n){var r=t.seriesIndex,i=t.getData(e.dataType);if(i){var a=zh(i,e);a=(Me(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),u=0;!o&&u<s;)o=i.getItemGraphicEl(u++);if(o){var l=qt(o);QN(r,l.focus,l.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&QN(r,c,f,n)}}}function c3(t,e,n,r){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return i;var a=r.getModel().getComponent(t,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(n),u,l=0;l<s.length;l++)if(qt(s[l]).focus==="self"){u=!0;break}return{focusSelf:u,dispatchers:s}}function kqe(t,e,n){var r=qt(t),i=c3(r.componentMainType,r.componentIndex,r.componentHighDownName,n),a=i.dispatchers,o=i.focusSelf;a?(o&&JN(r.componentMainType,r.componentIndex,n),W(a,function(s){return O6(s,e)})):(QN(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&JN(r.componentMainType,r.componentIndex,n),O6(t,e))}function Iqe(t,e,n){Qte(n);var r=qt(t),i=c3(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?W(i,function(a){return F6(a,e)}):F6(t,e)}function Nqe(t,e,n){if(tR(e)){var r=e.dataType,i=t.getData(r),a=zh(i,e);Me(a)||(a=[a]),t[e.type===Fm?"toggleSelect":e.type===Om?"select":"unselect"](a,r)}}function P6(t){var e=t.getAllData();W(e,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(a,o){t.isSelected(o,i)?Kte(a):Yte(a)})})}function Rqe(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();W(r,function(i){i.data;var a=i.type,o=n.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:n.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function aS(t,e,n){Jte(t,!0),cl(t,Tqe),Mqe(t,e,n)}function $qe(t){Jte(t,!1)}function V0(t,e,n,r){r?$qe(t):aS(t,e,n)}function Mqe(t,e,n){var r=qt(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var L6=["emphasis","blur","select"],Oqe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function oS(t,e,n,r){n=n||"itemStyle";for(var i=0;i<L6.length;i++){var a=L6[i],o=e.getModel([a,n]),s=t.ensureState(a);s.style=r?r(o):o[Oqe[n]]()}}function Jte(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function eR(t){return!!(t&&t.__highDownDispatcher)}function Fqe(t){var e=I6[t];return e==null&&k6<=32&&(e=I6[t]=k6++),e}function tR(t){var e=t.type;return e===Om||e===fb||e===Fm}function z6(t){var e=t.type;return e===lh||e===cb}function Pqe(t){var e=Gte(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Td=hu.CMD,Lqe=[[],[],[]],B6=Math.sqrt,zqe=Math.atan2;function ene(t,e){if(e){var n=t.data,r=t.len(),i,a,o,s,u,l,c=Td.M,f=Td.C,h=Td.L,d=Td.R,p=Td.A,v=Td.Q;for(o=0,s=0;o<r;){switch(i=n[o++],s=o,a=0,i){case c:a=1;break;case h:a=1;break;case f:a=3;break;case v:a=2;break;case p:var m=e[4],g=e[5],y=B6(e[0]*e[0]+e[1]*e[1]),x=B6(e[2]*e[2]+e[3]*e[3]),w=zqe(-e[1]/x,e[0]/y);n[o]*=y,n[o++]+=m,n[o]*=x,n[o++]+=g,n[o++]*=y,n[o++]*=x,n[o++]+=w,n[o++]+=w,o+=2,s=o;break;case d:l[0]=n[o++],l[1]=n[o++],Fi(l,l,e),n[s++]=l[0],n[s++]=l[1],l[0]+=n[o++],l[1]+=n[o++],Fi(l,l,e),n[s++]=l[0],n[s++]=l[1]}for(u=0;u<a;u++){var b=Lqe[u];b[0]=n[o++],b[1]=n[o++],Fi(b,b,e),n[s++]=b[0],n[s++]=b[1]}}t.increaseVersion()}}var vA=Math.sqrt,sw=Math.sin,uw=Math.cos,Rg=Math.PI;function V6(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nR(t,e){return(t[0]*e[0]+t[1]*e[1])/(V6(t)*V6(e))}function W6(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(nR(t,e))}function U6(t,e,n,r,i,a,o,s,u,l,c){var f=u*(Rg/180),h=uw(f)*(t-n)/2+sw(f)*(e-r)/2,d=-1*sw(f)*(t-n)/2+uw(f)*(e-r)/2,p=h*h/(o*o)+d*d/(s*s);p>1&&(o*=vA(p),s*=vA(p));var v=(i===a?-1:1)*vA((o*o*(s*s)-o*o*(d*d)-s*s*(h*h))/(o*o*(d*d)+s*s*(h*h)))||0,m=v*o*d/s,g=v*-s*h/o,y=(t+n)/2+uw(f)*m-sw(f)*g,x=(e+r)/2+sw(f)*m+uw(f)*g,w=W6([1,0],[(h-m)/o,(d-g)/s]),b=[(h-m)/o,(d-g)/s],C=[(-1*h-m)/o,(-1*d-g)/s],D=W6(b,C);if(nR(b,C)<=-1&&(D=Rg),nR(b,C)>=1&&(D=0),D<0){var S=Math.round(D/Rg*1e6)/1e6;D=Rg*2+S%2*Rg}c.addData(l,y,x,o,s,w,D,f,a)}var Bqe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Vqe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Wqe(t){var e=new hu;if(!t)return e;var n=0,r=0,i=n,a=r,o,s=hu.CMD,u=t.match(Bqe);if(!u)return e;for(var l=0;l<u.length;l++){for(var c=u[l],f=c.charAt(0),h=void 0,d=c.match(Vqe)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0,D=void 0,S=n,_=r,T=void 0,E=void 0;switch(f){case"l":n+=d[m++],r+=d[m++],h=s.L,e.addData(h,n,r);break;case"L":n=d[m++],r=d[m++],h=s.L,e.addData(h,n,r);break;case"m":n+=d[m++],r+=d[m++],h=s.M,e.addData(h,n,r),i=n,a=r,f="l";break;case"M":n=d[m++],r=d[m++],h=s.M,e.addData(h,n,r),i=n,a=r,f="L";break;case"h":n+=d[m++],h=s.L,e.addData(h,n,r);break;case"H":n=d[m++],h=s.L,e.addData(h,n,r);break;case"v":r+=d[m++],h=s.L,e.addData(h,n,r);break;case"V":r=d[m++],h=s.L,e.addData(h,n,r);break;case"C":h=s.C,e.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),n=d[m-2],r=d[m-1];break;case"c":h=s.C,e.addData(h,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r),n+=d[m-2],r+=d[m-1];break;case"S":g=n,y=r,T=e.len(),E=e.data,o===s.C&&(g+=n-E[T-4],y+=r-E[T-3]),h=s.C,S=d[m++],_=d[m++],n=d[m++],r=d[m++],e.addData(h,g,y,S,_,n,r);break;case"s":g=n,y=r,T=e.len(),E=e.data,o===s.C&&(g+=n-E[T-4],y+=r-E[T-3]),h=s.C,S=n+d[m++],_=r+d[m++],n+=d[m++],r+=d[m++],e.addData(h,g,y,S,_,n,r);break;case"Q":S=d[m++],_=d[m++],n=d[m++],r=d[m++],h=s.Q,e.addData(h,S,_,n,r);break;case"q":S=d[m++]+n,_=d[m++]+r,n+=d[m++],r+=d[m++],h=s.Q,e.addData(h,S,_,n,r);break;case"T":g=n,y=r,T=e.len(),E=e.data,o===s.Q&&(g+=n-E[T-4],y+=r-E[T-3]),n=d[m++],r=d[m++],h=s.Q,e.addData(h,g,y,n,r);break;case"t":g=n,y=r,T=e.len(),E=e.data,o===s.Q&&(g+=n-E[T-4],y+=r-E[T-3]),n+=d[m++],r+=d[m++],h=s.Q,e.addData(h,g,y,n,r);break;case"A":x=d[m++],w=d[m++],b=d[m++],C=d[m++],D=d[m++],S=n,_=r,n=d[m++],r=d[m++],h=s.A,U6(S,_,n,r,C,D,x,w,b,h,e);break;case"a":x=d[m++],w=d[m++],b=d[m++],C=d[m++],D=d[m++],S=n,_=r,n+=d[m++],r+=d[m++],h=s.A,U6(S,_,n,r,C,D,x,w,b,h,e);break}}(f==="z"||f==="Z")&&(h=s.Z,e.addData(h),n=i,r=a),o=h}return e.toStatic(),e}var tne=function(t){en(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(Tt);function nne(t){return t.setData!=null}function rne(t,e){var n=Wqe(t),r=De({},e);return r.buildPath=function(i){if(nne(i)){i.setData(n.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;n.rebuildPath(a,1)}},r.applyTransform=function(i){ene(n,i),this.dirtyShape()},r}function Uqe(t,e){return new tne(rne(t,e))}function Gqe(t,e){var n=rne(t,e),r=function(i){en(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return a}(tne);return r}function Hqe(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var a=t[i];n.push(a.getUpdatedPathProxy(!0))}var o=new Tt(e);return o.createPathProxy(),o.buildPath=function(s){if(nne(s)){s.appendPath(n);var u=s.getContext();u&&s.rebuildPath(u,1)}},o}function f3(t,e){e=e||{};var n=new Tt;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?ene(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}var jqe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),ine=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new jqe},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Tt);ine.prototype.type="circle";const P_=ine;var qqe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),ane=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new qqe},e.prototype.buildPath=function(n,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,u=r.ry,l=s*i,c=u*i;n.moveTo(a-s,o),n.bezierCurveTo(a-s,o-c,a-l,o-u,a,o-u),n.bezierCurveTo(a+l,o-u,a+s,o-c,a+s,o),n.bezierCurveTo(a+s,o+c,a+l,o+u,a,o+u),n.bezierCurveTo(a-l,o+u,a-s,o+c,a-s,o),n.closePath()},e}(Tt);ane.prototype.type="ellipse";const h3=ane;var one=Math.PI,gA=one*2,pf=Math.sin,Ed=Math.cos,Xqe=Math.acos,ii=Math.atan2,G6=Math.abs,Pm=Math.sqrt,cm=Math.max,Is=Math.min,qo=1e-4;function Kqe(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,h=f*u-c*l;if(!(h*h<qo))return h=(c*(e-a)-f*(t-i))/h,[t+h*u,e+h*l]}function lw(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/Pm(s*s+u*u),c=l*u,f=-l*s,h=t+c,d=e+f,p=n+c,v=r+f,m=(h+p)/2,g=(d+v)/2,y=p-h,x=v-d,w=y*y+x*x,b=i-a,C=h*v-p*d,D=(x<0?-1:1)*Pm(cm(0,b*b*w-C*C)),S=(C*x-y*D)/w,_=(-C*y-x*D)/w,T=(C*x+y*D)/w,E=(-C*y+x*D)/w,A=S-m,N=_-g,R=T-m,M=E-g;return A*A+N*N>R*R+M*M&&(S=T,_=E),{cx:S,cy:_,x0:-c,y0:-f,x1:S*(i/b-1),y1:_*(i/b-1)}}function Yqe(t){var e;if(Me(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function Zqe(t,e){var n,r=cm(e.r,0),i=cm(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var u=e.startAngle,l=e.endAngle;if(!(isNaN(u)||isNaN(l))){var c=e.cx,f=e.cy,h=!!e.clockwise,d=G6(l-u),p=d>gA&&d%gA;if(p>qo&&(d=p),!(r>qo))t.moveTo(c,f);else if(d>gA-qo)t.moveTo(c+r*Ed(u),f+r*pf(u)),t.arc(c,f,r,u,l,!h),i>qo&&(t.moveTo(c+i*Ed(l),f+i*pf(l)),t.arc(c,f,i,l,u,h));else{var v=void 0,m=void 0,g=void 0,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0,D=void 0,S=void 0,_=void 0,T=void 0,E=void 0,A=void 0,N=void 0,R=void 0,M=r*Ed(u),$=r*pf(u),L=i*Ed(l),O=i*pf(l),F=d>qo;if(F){var V=e.cornerRadius;V&&(n=Yqe(V),v=n[0],m=n[1],g=n[2],y=n[3]);var X=G6(r-i)/2;if(x=Is(X,g),w=Is(X,y),b=Is(X,v),C=Is(X,m),_=D=cm(x,w),T=S=cm(b,C),(D>qo||S>qo)&&(E=r*Ed(l),A=r*pf(l),N=i*Ed(u),R=i*pf(u),d<one)){var P=Kqe(M,$,N,R,E,A,L,O);if(P){var U=M-P[0],j=$-P[1],q=E-P[0],Y=A-P[1],ne=1/pf(Xqe((U*q+j*Y)/(Pm(U*U+j*j)*Pm(q*q+Y*Y)))/2),ue=Pm(P[0]*P[0]+P[1]*P[1]);_=Is(D,(r-ue)/(ne+1)),T=Is(S,(i-ue)/(ne-1))}}}if(!F)t.moveTo(c+M,f+$);else if(_>qo){var te=Is(g,_),oe=Is(y,_),ce=lw(N,R,M,$,r,te,h),pe=lw(E,A,L,O,r,oe,h);t.moveTo(c+ce.cx+ce.x0,f+ce.cy+ce.y0),_<D&&te===oe?t.arc(c+ce.cx,f+ce.cy,_,ii(ce.y0,ce.x0),ii(pe.y0,pe.x0),!h):(te>0&&t.arc(c+ce.cx,f+ce.cy,te,ii(ce.y0,ce.x0),ii(ce.y1,ce.x1),!h),t.arc(c,f,r,ii(ce.cy+ce.y1,ce.cx+ce.x1),ii(pe.cy+pe.y1,pe.cx+pe.x1),!h),oe>0&&t.arc(c+pe.cx,f+pe.cy,oe,ii(pe.y1,pe.x1),ii(pe.y0,pe.x0),!h))}else t.moveTo(c+M,f+$),t.arc(c,f,r,u,l,!h);if(!(i>qo)||!F)t.lineTo(c+L,f+O);else if(T>qo){var te=Is(v,T),oe=Is(m,T),ce=lw(L,O,E,A,i,-oe,h),pe=lw(M,$,N,R,i,-te,h);t.lineTo(c+ce.cx+ce.x0,f+ce.cy+ce.y0),T<S&&te===oe?t.arc(c+ce.cx,f+ce.cy,T,ii(ce.y0,ce.x0),ii(pe.y0,pe.x0),!h):(oe>0&&t.arc(c+ce.cx,f+ce.cy,oe,ii(ce.y0,ce.x0),ii(ce.y1,ce.x1),!h),t.arc(c,f,i,ii(ce.cy+ce.y1,ce.cx+ce.x1),ii(pe.cy+pe.y1,pe.cx+pe.x1),h),te>0&&t.arc(c+pe.cx,f+pe.cy,te,ii(pe.y1,pe.x1),ii(pe.y0,pe.x0),!h))}else t.lineTo(c+L,f+O),t.arc(c,f,i,l,u,h)}t.closePath()}}}var Qqe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),sne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new Qqe},e.prototype.buildPath=function(n,r){Zqe(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Tt);sne.prototype.type="sector";const du=sne;var Jqe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),une=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new Jqe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.PI*2;n.moveTo(i+r.r,a),n.arc(i,a,r.r,0,o,!1),n.moveTo(i+r.r0,a),n.arc(i,a,r.r0,0,o,!0)},e}(Tt);une.prototype.type="ring";const d3=une;function eXe(t,e,n,r){var i=[],a=[],o=[],s=[],u,l,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=t.length;h<d;h++)Wl(c,c,t[h]),Ul(f,f,t[h]);Wl(c,c,r[0]),Ul(f,f,r[1])}for(var h=0,d=t.length;h<d;h++){var p=t[h];if(n)u=t[h?h-1:d-1],l=t[(h+1)%d];else if(h===0||h===d-1){i.push(Fee(t[h]));continue}else u=t[h-1],l=t[h+1];Pee(a,l,u),nb(a,a,e);var v=qC(p,u),m=qC(p,l),g=v+m;g!==0&&(v/=g,m/=g),nb(o,a,-v),nb(s,a,m);var y=kN([],p,o),x=kN([],p,s);r&&(Ul(y,y,c),Wl(y,y,f),Ul(x,x,c),Wl(x,x,f)),i.push(y),i.push(x)}return n&&i.push(i.shift()),i}function lne(t,e,n){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=eXe(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var u=a[s*2],l=a[s*2+1],c=i[(s+1)%o];t.bezierCurveTo(u[0],u[1],l[0],l[1],c[0],c[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var tXe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),cne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new tXe},e.prototype.buildPath=function(n,r){lne(n,r,!0)},e}(Tt);cne.prototype.type="polygon";const q1=cne;var nXe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),fne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new nXe},e.prototype.buildPath=function(n,r){lne(n,r,!1)},e}(Tt);fne.prototype.type="polyline";const ng=fne;var rXe={},iXe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),hne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new iXe},e.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var u=Lte(rXe,r,this.style);i=u.x1,a=u.y1,o=u.x2,s=u.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var l=r.percent;l!==0&&(n.moveTo(i,a),l<1&&(o=i*(1-l)+o*l,s=a*(1-l)+s*l),n.lineTo(o,s))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(Tt);hne.prototype.type="line";const kc=hne;var qi=[],aXe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function H6(t,e,n){var r=t.cpx2,i=t.cpy2;return r!=null||i!=null?[(n?K8:mr)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?K8:mr)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Y8:li)(t.x1,t.cpx1,t.x2,e),(n?Y8:li)(t.y1,t.cpy1,t.y2,e)]}var dne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new aXe},e.prototype.buildPath=function(n,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.cpx1,l=r.cpy1,c=r.cpx2,f=r.cpy2,h=r.percent;h!==0&&(n.moveTo(i,a),c==null||f==null?(h<1&&(QC(i,u,o,h,qi),u=qi[1],o=qi[2],QC(a,l,s,h,qi),l=qi[1],s=qi[2]),n.quadraticCurveTo(u,l,o,s)):(h<1&&(Ec(i,u,c,o,h,qi),u=qi[1],c=qi[2],o=qi[3],Ec(a,l,f,s,h,qi),l=qi[1],f=qi[2],s=qi[3]),n.bezierCurveTo(u,l,c,f,o,s)))},e.prototype.pointAt=function(n){return H6(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=H6(this.shape,n,!0);return Lee(r,r)},e}(Tt);dne.prototype.type="bezier-curve";const p3=dne;var oXe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),pne=function(t){en(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new oXe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,u=r.endAngle,l=r.clockwise,c=Math.cos(s),f=Math.sin(s);n.moveTo(c*o+i,f*o+a),n.arc(i,a,o,s,u,!l)},e}(Tt);pne.prototype.type="arc";const L_=pne;var sXe=function(t){en(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(n,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Tt.prototype.getBoundingRect.call(this)},e}(Tt);const v3=sXe;var uXe=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}();const vne=uXe;var lXe=function(t){en(e,t);function e(n,r,i,a,o,s){var u=t.call(this,o)||this;return u.x=n??0,u.y=r??0,u.x2=i??1,u.y2=a??0,u.type="linear",u.global=s||!1,u}return e}(vne);const g3=lXe;var cXe=function(t){en(e,t);function e(n,r,i,a,o){var s=t.call(this,a)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(vne);const gne=cXe;var vf=[0,0],gf=[0,0],cw=new Je,fw=new Je,fXe=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Je;for(var r=0;r<2;r++)this._axes[r]=new Je;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,u=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,u),r[3].set(a,u),n)for(var l=0;l<4;l++)r[l].transform(n);Je.sub(i[0],r[1],r[0]),Je.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var l=0;l<2;l++)this._origin[l]=i[l].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,i=!n;return cw.set(1/0,1/0),fw.set(0,0),!this._intersectCheckOneSide(this,e,cw,fw,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,cw,fw,i,-1)&&(r=!1,i)||i||Je.copy(n,r?cw:fw),r},t.prototype._intersectCheckOneSide=function(e,n,r,i,a,o){for(var s=!0,u=0;u<2;u++){var l=this._axes[u];if(this._getProjMinMaxOnAxis(u,e._corners,vf),this._getProjMinMaxOnAxis(u,n._corners,gf),vf[1]<gf[0]||vf[0]>gf[1]){if(s=!1,a)return s;var c=Math.abs(gf[0]-vf[1]),f=Math.abs(vf[0]-gf[1]);Math.min(c,f)>i.len()&&(c<f?Je.scale(i,l,-c*o):Je.scale(i,l,f*o))}else if(r){var c=Math.abs(gf[0]-vf[1]),f=Math.abs(vf[0]-gf[1]);Math.min(c,f)<r.len()&&(c<f?Je.scale(r,l,c*o):Je.scale(r,l,-f*o))}}return s},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var i=this._axes[e],a=this._origin,o=n[0].dot(i)+a[e],s=o,u=o,l=1;l<n.length;l++){var c=n[l].dot(i)+a[e];s=Math.min(c,s),u=Math.max(c,u)}r[0]=s,r[1]=u},t}();const sS=fXe;var hXe=[],dXe=function(t){en(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new _t(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(hXe)),n.union(a)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(n,r))return!0}return!1},e}(tg);const mne=dXe;var yne=Gn();function z_(t,e,n,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),u=t==="update";if(s){var l=void 0,c=void 0,f=void 0;r?(l=yt(r.duration,200),c=yt(r.easing,"cubicOut"),f=0):(l=e.getShallow(u?"animationDurationUpdate":"animationDuration"),c=e.getShallow(u?"animationEasingUpdate":"animationEasing"),f=e.getShallow(u?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(l=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(f=a.delay)),ot(f)&&(f=f(n,i)),ot(l)&&(l=l(n));var h={duration:l||0,delay:f,easing:c};return h}else return null}function m3(t,e,n,r,i,a,o){var s=!1,u;ot(i)?(o=a,a=i,i=null):Ke(i)&&(a=i.cb,o=i.during,s=i.isFrom,u=i.removeOpt,i=i.dataIndex);var l=t==="leave";l||e.stopAnimation("leave");var c=z_(t,r,i,l?u||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:a,force:!!a||!!o,setToFinal:!l,scope:t,during:o};s?e.animateFrom(n,p):e.animateTo(n,p)}else e.stopAnimation(),!s&&e.attr(n),o&&o(1),a&&a()}function bi(t,e,n,r,i,a){m3("update",t,e,n,r,i,a)}function ha(t,e,n,r,i,a){m3("enter",t,e,n,r,i,a)}function Lm(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function uS(t,e,n,r,i,a){Lm(t)||m3("leave",t,e,n,r,i,a)}function j6(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),uS(t,{style:{opacity:0}},e,n,r)}function lS(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||j6(i,e,n,r)}):j6(t,e,n,r)}function y3(t){yne(t).oldStyle=t.style}function pXe(t){return yne(t).oldStyle}var cS=Math.max,fS=Math.min,rR={};function xne(t){return Tt.extend(t)}var vXe=Gqe;function wne(t,e){return vXe(t,e)}function zo(t,e){rR[t]=e}function bne(t){if(rR.hasOwnProperty(t))return rR[t]}function B_(t,e,n,r){var i=Uqe(t,e);return n&&(r==="center"&&(n=Cne(n,i.getBoundingRect())),w3(i,n)),i}function x3(t,e,n){var r=new xu({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(n==="center"){var a={width:i.width,height:i.height};r.setStyle(Cne(e,a))}}});return r}function Cne(t,e){var n=e.width/e.height,r=t.height*n,i;r<=t.width?i=t.height:(r=t.width,i=r/n);var a=t.x+t.width/2,o=t.y+t.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Sne=Hqe;function w3(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function W0(t,e){return Lte(t,t,{lineWidth:e}),t}function gXe(t){return zte(t.shape,t.shape,t.style),t}var mXe=qf;function V_(t,e){for(var n=W1([]);t&&t!==e;)fc(n,t.getLocalTransform(),n),t=t.parent;return n}function b3(t,e,n){return e&&!zi(e)&&(e=E_.getLocalTransform(e)),n&&(e=U1([],e)),Fi([],t,e)}function Dne(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[t==="left"?-r:t==="right"?r:0,t==="top"?-i:t==="bottom"?i:0];return a=b3(a,e,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function q6(t){return!t.isGroup}function yXe(t){return t.shape!=null}function _ne(t,e,n){if(!t||!e)return;function r(o){var s={};return o.traverse(function(u){q6(u)&&u.anid&&(s[u.anid]=u)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return yXe(o)&&(s.shape=De({},o.shape)),s}var a=r(t);e.traverse(function(o){if(q6(o)&&o.anid){var s=a[o.anid];if(s){var u=i(o);o.attr(i(s)),bi(o,u,n,qt(o).dataIndex)}}})}function C3(t,e){return $e(t,function(n){var r=n[0];r=cS(r,e.x),r=fS(r,e.x+e.width);var i=n[1];return i=cS(i,e.y),i=fS(i,e.y+e.height),[r,i]})}function Tne(t,e){var n=cS(t.x,e.x),r=fS(t.x+t.width,e.x+e.width),i=cS(t.y,e.y),a=fS(t.y+t.height,e.y+e.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function X1(t,e,n){var r=De({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),dt(i,n),new xu(r)):B_(t.replace("path://",""),r,n,"center")}function xXe(t,e,n,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(Ene(t,e,n,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function Ene(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,h=mA(c,f,u,l);if(wXe(h))return!1;var d=t-i,p=e-a,v=mA(d,p,u,l)/h;if(v<0||v>1)return!1;var m=mA(d,p,c,f)/h;return!(m<0||m>1)}function mA(t,e,n,r){return t*r-n*e}function wXe(t){return t<=1e-6&&t>=-1e-6}function W_(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,i=ze(e)?{formatter:e}:e,a=n.mainType,o=n.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var u=t.formatterParamsExtra;u&&W(Mt(u),function(c){Ph(s,c)||(s[c]=u[c],s.$vars.push(c))});var l=qt(t.el);l.componentMainType=a,l.componentIndex=o,l.tooltipConfig={name:r,option:dt({content:r,formatterParams:s},i)}}function X6(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function U_(t,e){if(t)if(Me(t))for(var n=0;n<t.length;n++)X6(t[n],e);else X6(t,e)}zo("circle",P_);zo("ellipse",h3);zo("sector",du);zo("ring",d3);zo("polygon",q1);zo("polyline",ng);zo("rect",Pn);zo("line",kc);zo("bezierCurve",p3);zo("arc",L_);const bXe=Object.freeze(Object.defineProperty({__proto__:null,Arc:L_,BezierCurve:p3,BoundingRect:_t,Circle:P_,CompoundPath:v3,Ellipse:h3,Group:Qn,Image:xu,IncrementalDisplayable:mne,Line:kc,LinearGradient:g3,OrientedBoundingRect:sS,Path:Tt,Point:Je,Polygon:q1,Polyline:ng,RadialGradient:gne,Rect:Pn,Ring:d3,Sector:du,Text:$r,applyTransform:b3,clipPointsByRect:C3,clipRectByRect:Tne,createIcon:X1,extendPath:wne,extendShape:xne,getShapeClass:bne,getTransform:V_,groupTransition:_ne,initProps:ha,isElementRemoved:Lm,lineLineIntersect:Ene,linePolygonIntersect:xXe,makeImage:x3,makePath:B_,mergePath:Sne,registerShape:zo,removeElement:uS,removeElementWithFadeOut:lS,resizePath:w3,setTooltipConfig:W_,subPixelOptimize:mXe,subPixelOptimizeLine:W0,subPixelOptimizeRect:gXe,transformDirection:Dne,traverseElements:U_,updateProps:bi},Symbol.toStringTag,{value:"Module"}));var G_={};function CXe(t,e){for(var n=0;n<No.length;n++){var r=No[n],i=e[r],a=t.ensureState(r);a.style=a.style||{},a.style.text=i}var o=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(o,!0)}function K6(t,e,n){var r=t.labelFetcher,i=t.labelDataIndex,a=t.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=ot(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var u={normal:s},l=0;l<No.length;l++){var c=No[l],f=e[c];u[c]=yt(r?r.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,s)}return u}function K1(t,e,n,r){n=n||G_;for(var i=t instanceof $r,a=!1,o=0;o<iS.length;o++){var s=e[iS[o]];if(s&&s.getShallow("show")){a=!0;break}}var u=i?t:t.getTextContent();if(a){i||(u||(u=new $r,t.setTextContent(u)),t.stateProxy&&(u.stateProxy=t.stateProxy));var l=K6(n,e),c=e.normal,f=!!c.getShallow("show"),h=Bh(c,r&&r.normal,n,!1,!i);h.text=l.normal,i||t.setTextConfig(Y6(c,n,!1));for(var o=0;o<No.length;o++){var d=No[o],s=e[d];if(s){var p=u.ensureState(d),v=!!yt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=Bh(s,r&&r[d],n,!0,!i),p.style.text=l[d],!i){var m=t.ensureState(d);m.textConfig=Y6(s,n,!0)}}}u.silent=!!c.getShallow("silent"),u.style.x!=null&&(h.x=u.style.x),u.style.y!=null&&(h.y=u.style.y),u.ignore=!f,u.useStyle(h),u.dirty(),n.enableTextSetter&&(H_(u).setLabelText=function(g){var y=K6(n,e,g);CXe(u,y)})}else u&&(u.ignore=!0);t.dirty()}function Y1(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<No.length;r++){var i=No[r];n[i]=t.getModel([i,e])}return n}function Bh(t,e,n,r,i){var a={};return SXe(a,t,n,r,i),e&&De(a,e),a}function Y6(t,e,n){e=e||{};var r={},i,a=t.getShallow("rotate"),o=yt(t.getShallow("distance"),n?null:5),s=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function SXe(t,e,n,r,i){n=n||G_;var a=e.ecModel,o=a&&a.option.textStyle,s=DXe(e),u;if(s){u={};for(var l in s)if(s.hasOwnProperty(l)){var c=e.getModel(["rich",l]);eV(u[l]={},c,o,n,r,i,!1,!0)}}u&&(t.rich=u);var f=e.get("overflow");f&&(t.overflow=f);var h=e.get("minMargin");h!=null&&(t.margin=h),eV(t,e,o,n,r,i,!0,!1)}function DXe(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||G_).rich;if(n){e=e||{};for(var r=Mt(n),i=0;i<r.length;i++){var a=r[i];e[a]=1}}t=t.parentModel}return e}var Z6=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Q6=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],J6=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function eV(t,e,n,r,i,a,o,s){n=!i&&n||G_;var u=r&&r.inheritColor,l=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=yt(e.getShallow("opacity"),n.opacity);(l==="inherit"||l==="auto")&&(u?l=u:l=null),(c==="inherit"||c==="auto")&&(u?c=u:c=null),a||(l=l||n.color,c=c||n.textBorderColor),l!=null&&(t.fill=l),c!=null&&(t.stroke=c);var h=yt(e.getShallow("textBorderWidth"),n.textBorderWidth);h!=null&&(t.lineWidth=h);var d=yt(e.getShallow("textBorderType"),n.textBorderType);d!=null&&(t.lineDash=d);var p=yt(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);p!=null&&(t.lineDashOffset=p),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!i&&!a&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var v=0;v<Z6.length;v++){var m=Z6[v],g=yt(e.getShallow(m),n[m]);g!=null&&(t[m]=g)}for(var v=0;v<Q6.length;v++){var m=Q6[v],g=e.getShallow(m);g!=null&&(t[m]=g)}if(t.verticalAlign==null){var y=e.getShallow("baseline");y!=null&&(t.verticalAlign=y)}if(!o||!r.disableBox){for(var v=0;v<J6.length;v++){var m=J6[v],g=e.getShallow(m);g!=null&&(t[m]=g)}var x=e.getShallow("borderType");x!=null&&(t.borderDash=x),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&u&&(t.backgroundColor=u),(t.borderColor==="auto"||t.borderColor==="inherit")&&u&&(t.borderColor=u)}}function _Xe(t,e){var n=e&&e.getModel("textStyle");return os([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var H_=Gn();function TXe(t,e,n,r){if(t){var i=H_(t);i.prevValue=i.value,i.value=n;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}var EXe=["textStyle","color"],yA=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],xA=new $r,AXe=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(EXe):null)},t.prototype.getFont=function(){return _Xe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<yA.length;r++)n[yA[r]]=this.getShallow(yA[r]);return xA.useStyle(n),xA.update(),xA.getBoundingRect()},t}();const kXe=AXe;var Ane=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],IXe=B0(Ane),NXe=function(){function t(){}return t.prototype.getLineStyle=function(e){return IXe(this,e)},t}(),kne=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],RXe=B0(kne),$Xe=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return RXe(this,e,n)},t}(),cd=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){vt(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,i=r==null?r:r[e];if(i==null&&!n){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},t.prototype.getModel=function(e,n){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(a,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(ft(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!bt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();a3(cd);Dje(cd);Lo(cd,NXe);Lo(cd,$Xe);Lo(cd,kje);Lo(cd,kXe);const sr=cd;var MXe=Math.round(Math.random()*10);function Z1(t){return[t||"",MXe++].join("_")}function OXe(t){var e={};t.registerSubTypeDefaulter=function(n,r){var i=qs(n);e[i.main]=r},t.determineSubType=function(n,r){var i=r.type;if(!i){var a=qs(n).main;t.hasSubTypes(n)&&e[a]&&(i=e[a](r))}return i}}function FXe(t,e){t.topologicalTravel=function(a,o,s,u){if(!a.length)return;var l=n(o),c=l.graph,f=l.noEntryList,h={};for(W(a,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(u,d,p.originalDeps.slice()),delete h[d]),W(p.successor,v?g:m)}W(h,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function g(y){h[y]=!0,m(y)}};function n(a){var o={},s=[];return W(a,function(u){var l=r(o,u),c=l.originalDeps=e(u),f=i(c,a);l.entryCount=f.length,l.entryCount===0&&s.push(u),W(f,function(h){At(l.predecessor,h)<0&&l.predecessor.push(h);var d=r(o,h);At(d.successor,h)<0&&d.successor.push(u)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return W(a,function(u){At(o,u)>=0&&s.push(u)}),s}}function Ine(t,e){return vt(vt({},t,!0),e,!0)}const PXe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},LXe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var hS="ZH",S3="EN",U0=S3,hb={},D3={},Nne=bt.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(hS)>-1?hS:U0}():U0;function _3(t,e){t=t.toUpperCase(),D3[t]=new sr(e),hb[t]=e}function zXe(t){if(ze(t)){var e=hb[t.toUpperCase()]||{};return t===hS||t===S3?ft(e):vt(ft(e),ft(hb[U0]),!1)}else return vt(ft(t),ft(hb[U0]),!1)}function BXe(t){return D3[t]}function VXe(){return D3[U0]}_3(S3,PXe);_3(hS,LXe);var T3=1e3,E3=T3*60,zm=E3*60,fo=zm*24,tV=fo*365,fm={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},hw="{yyyy}-{MM}-{dd}",nV={year:"{yyyy}",month:"{yyyy}-{MM}",day:hw,hour:hw+" "+fm.hour,minute:hw+" "+fm.minute,second:hw+" "+fm.second,millisecond:fm.none},wA=["year","month","day","hour","minute","second","millisecond"],Rne=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ai(t,e){return t+="","0000".substr(0,e-t.length)+t}function Fp(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function WXe(t){return t===Fp(t)}function UXe(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Q1(t,e,n,r){var i=Io(t),a=i[A3(n)](),o=i[Pp(n)]()+1,s=Math.floor((o-1)/3)+1,u=i[j_(n)](),l=i["get"+(n?"UTC":"")+"Day"](),c=i[G0(n)](),f=(c-1)%12+1,h=i[q_(n)](),d=i[X_(n)](),p=i[K_(n)](),v=r instanceof sr?r:BXe(r||Nne)||VXe(),m=v.getModel("time"),g=m.get("month"),y=m.get("monthAbbr"),x=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Ai(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,g[o-1]).replace(/{MMM}/g,y[o-1]).replace(/{MM}/g,Ai(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Ai(u,2)).replace(/{d}/g,u+"").replace(/{eeee}/g,x[l]).replace(/{ee}/g,w[l]).replace(/{e}/g,l+"").replace(/{HH}/g,Ai(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Ai(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Ai(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Ai(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,Ai(p,3)).replace(/{S}/g,p+"")}function GXe(t,e,n,r,i){var a=null;if(ze(n))a=n;else if(ot(n))a=n(t.value,e,{level:t.level});else{var o=De({},fm);if(t.level>0)for(var s=0;s<wA.length;++s)o[wA[s]]="{primary|"+o[wA[s]]+"}";var u=n?n.inherit===!1?n:dt(n,o):o,l=$ne(t.value,i);if(u[l])a=u[l];else if(u.inherit){for(var c=Rne.indexOf(l),s=c-1;s>=0;--s)if(u[l]){a=u[l];break}a=a||o.none}if(Me(a)){var f=t.level==null?0:t.level>=0?t.level:a.length+t.level;f=Math.min(f,a.length-1),a=a[f]}}return Q1(new Date(t.value),a,i,r)}function $ne(t,e){var n=Io(t),r=n[Pp(e)]()+1,i=n[j_(e)](),a=n[G0(e)](),o=n[q_(e)](),s=n[X_(e)](),u=n[K_(e)](),l=u===0,c=l&&s===0,f=c&&o===0,h=f&&a===0,d=h&&i===1,p=d&&r===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":l?"second":"millisecond"}function rV(t,e,n){var r=Kt(t)?Io(t):t;switch(e=e||$ne(t,n),e){case"year":return r[A3(n)]();case"half-year":return r[Pp(n)]()>=6?1:0;case"quarter":return Math.floor((r[Pp(n)]()+1)/4);case"month":return r[Pp(n)]();case"day":return r[j_(n)]();case"half-day":return r[G0(n)]()/24;case"hour":return r[G0(n)]();case"minute":return r[q_(n)]();case"second":return r[X_(n)]();case"millisecond":return r[K_(n)]()}}function A3(t){return t?"getUTCFullYear":"getFullYear"}function Pp(t){return t?"getUTCMonth":"getMonth"}function j_(t){return t?"getUTCDate":"getDate"}function G0(t){return t?"getUTCHours":"getHours"}function q_(t){return t?"getUTCMinutes":"getMinutes"}function X_(t){return t?"getUTCSeconds":"getSeconds"}function K_(t){return t?"getUTCMilliseconds":"getMilliseconds"}function HXe(t){return t?"setUTCFullYear":"setFullYear"}function Mne(t){return t?"setUTCMonth":"setMonth"}function One(t){return t?"setUTCDate":"setDate"}function Fne(t){return t?"setUTCHours":"setHours"}function Pne(t){return t?"setUTCMinutes":"setMinutes"}function Lne(t){return t?"setUTCSeconds":"setSeconds"}function zne(t){return t?"setUTCMilliseconds":"setMilliseconds"}function jXe(t,e,n,r,i,a,o,s){var u=new $r({style:{text:t,font:e,align:n,verticalAlign:r,padding:i,rich:a,overflow:o?"truncate":null,lineHeight:s}});return u.getBoundingRect()}function k3(t){if(!bte(t))return ze(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function I3(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var J1=UP;function iR(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&os(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=e==="time",s=t instanceof Date;if(o||s){var u=o?Io(t):t;if(isNaN(+u)){if(s)return"-"}else return Q1(u,r,n)}if(e==="ordinal")return HC(t)?i(t):Kt(t)&&a(t)?t+"":"-";var l=L0(t);return a(l)?k3(l):HC(t)?i(t):typeof t=="boolean"?t+"":"-"}var iV=["a","b","c","d","e","f","g"],bA=function(t,e){return"{"+t+(e??"")+"}"};function N3(t,e,n){Me(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=iV[a];t=t.replace(bA(o),bA(o,0))}for(var s=0;s<r;s++)for(var u=0;u<i.length;u++){var l=e[s][i[u]];t=t.replace(bA(iV[u],s),n?Yi(l):l)}return t}function Bne(t,e){var n=ze(t)?{color:t,extraCssText:e}:t||{},r=n.color,i=n.type;e=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Yi(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Yi(r)+";"+(e||"")+'"></span>';var o=n.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function qXe(t,e,n){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var r=Io(e),i=n?"getUTC":"get",a=r[i+"FullYear"](),o=r[i+"Month"]()+1,s=r[i+"Date"](),u=r[i+"Hours"](),l=r[i+"Minutes"](),c=r[i+"Seconds"](),f=r[i+"Milliseconds"]();return t=t.replace("MM",Ai(o,2)).replace("M",o).replace("yyyy",a).replace("yy",Ai(a%100+"",2)).replace("dd",Ai(s,2)).replace("d",s).replace("hh",Ai(u,2)).replace("h",u).replace("mm",Ai(l,2)).replace("m",l).replace("ss",Ai(c,2)).replace("s",c).replace("SSS",Ai(f,3)),t}function XXe(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function Vh(t,e){return e=e||"transparent",ze(t)?t:Ke(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}var db=W,KXe=["left","right","top","bottom","width","height"],dw=[["width","left","right"],["height","top","bottom"]];function R3(t,e,n,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(u,l){var c=u.getBoundingRect(),f=e.childAt(l+1),h=f&&f.getBoundingRect(),d,p;if(t==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=a+v,d>r||u.newline?(a=0,d=v,o+=s+n,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=o+m,p>i||u.newline?(a+=s+n,o=0,p=m,s=c.width):s=Math.max(s,c.width)}u.newline||(u.x=a,u.y=o,u.markRedraw(),t==="horizontal"?a=d+n:o=p+n)})}var Lp=R3;Ot(R3,"vertical");Ot(R3,"horizontal");function Ic(t,e,n){n=J1(n||0);var r=e.width,i=e.height,a=bn(t.left,r),o=bn(t.top,i),s=bn(t.right,r),u=bn(t.bottom,i),l=bn(t.width,r),c=bn(t.height,i),f=n[2]+n[0],h=n[1]+n[3],d=t.aspect;switch(isNaN(l)&&(l=r-s-h-a),isNaN(c)&&(c=i-u-f-o),d!=null&&(isNaN(l)&&isNaN(c)&&(d>r/i?l=r*.8:c=i*.8),isNaN(l)&&(l=d*c),isNaN(c)&&(c=l/d)),isNaN(a)&&(a=r-s-l-h),isNaN(o)&&(o=i-u-c-f),t.left||t.right){case"center":a=r/2-l/2-n[3];break;case"right":a=r-l-h;break}switch(t.top||t.bottom){case"middle":case"center":o=i/2-c/2-n[0];break;case"bottom":o=i-c-f;break}a=a||0,o=o||0,isNaN(l)&&(l=r-h-a-(s||0)),isNaN(c)&&(c=i-f-o-(u||0));var p=new _t(a+n[3],o+n[0],l,c);return p.margin=n,p}function YXe(t,e,n,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],u=i&&i.boundingMode||"all";if(a=a||t,a.x=t.x,a.y=t.y,!o&&!s)return!1;var l;if(u==="raw")l=t.type==="group"?new _t(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();l=l.clone(),l.applyTransform(c)}var f=Ic(dt({width:l.width,height:l.height},e),n,r),h=o?f.x-l.x:0,d=s?f.y-l.y:0;return u==="raw"?(a.x=h,a.y=d):(a.x+=h,a.y+=d),a===t&&t.markRedraw(),!0}function H0(t){var e=t.layoutMode||t.constructor.layoutMode;return Ke(e)?e:e?{type:e}:null}function _v(t,e,n){var r=n&&n.ignoreSize;!Me(r)&&(r=[r,r]);var i=o(dw[0],0),a=o(dw[1],1);l(dw[0],t,i),l(dw[1],t,a);function o(c,f){var h={},d=0,p={},v=0,m=2;if(db(c,function(x){p[x]=t[x]}),db(c,function(x){s(e,x)&&(h[x]=p[x]=e[x]),u(h,x)&&d++,u(p,x)&&v++}),r[f])return u(e,c[1])?p[c[2]]=null:u(e,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var y=c[g];if(!s(h,y)&&s(t,y)){h[y]=t[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function u(c,f){return c[f]!=null&&c[f]!=="auto"}function l(c,f,h){db(c,function(d){f[d]=h[d]})}}function Y_(t){return ZXe({},t)}function ZXe(t,e){return e&&t&&db(KXe,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var QXe=Gn(),rg=function(t){Ge(e,t);function e(n,r,i){var a=t.call(this,n,r,i)||this;return a.uid=Z1("ec_cpt_model"),a}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=H0(this),a=i?Y_(n):{},o=r.getTheme();vt(n,o.get(this.mainType)),vt(n,this.getDefaultOption()),i&&_v(n,a,i)},e.prototype.mergeOption=function(n,r){vt(this.option,n,!0);var i=H0(this);i&&_v(this.option,n,i)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!bje(n))return n.defaultOption;var r=QXe(this);if(!r.defaultOption){for(var i=[],a=n;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},u=i.length-1;u>=0;u--)s=vt(s,i[u],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var i=n+"Index",a=n+"Id";return j1(this.ecModel,n,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(sr);kte(rg,sr);N_(rg);OXe(rg);FXe(rg,JXe);function JXe(t){var e=[];return W(rg.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=$e(e,function(n){return qs(n).main}),t!=="dataset"&&At(e,"dataset")<=0&&e.unshift("dataset"),e}const Qt=rg;var Vne="";typeof navigator<"u"&&(Vne=navigator.platform||"");var Ad="rgba(0, 0, 0, 0.2)";const eKe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Ad,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Ad,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Ad,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Ad,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Ad,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Ad,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Vne.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Wne=st(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Bo="original",xa="arrayRows",Ds="objectRows",wu="keyedColumns",dc="typedArray",Une="unknown",Wu="column",ig="row",Vr={Must:1,Might:2,Not:3},Gne=Gn();function tKe(t){Gne(t).datasetMap=st()}function nKe(t,e,n){var r={},i=$3(e);if(!i||!t)return r;var a=[],o=[],s=e.ecModel,u=Gne(s).datasetMap,l=i.uid+"_"+n.seriesLayoutBy,c,f;t=t.slice(),W(t,function(v,m){var g=Ke(v)?v:t[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),r[g.name]=[]});var h=u.get(l)||u.set(l,{categoryWayDim:f,valueWayDim:0});W(t,function(v,m){var g=v.name,y=p(v);if(c==null){var x=h.valueWayDim;d(r[g],x,y),d(o,x,y),h.valueWayDim+=y}else if(c===m)d(r[g],0,y),d(a,0,y);else{var x=h.categoryWayDim;d(r[g],x,y),d(o,x,y),h.categoryWayDim+=y}});function d(v,m,g){for(var y=0;y<g;y++)v.push(m+y)}function p(v){var m=v.dimsDef;return m?m.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function rKe(t,e,n){var r={},i=$3(t);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===Ds||a===wu)&&W(o,function(c,f){(Ke(c)?c.name:c)==="name"&&(s=f)});var u=function(){for(var c={},f={},h=[],d=0,p=Math.min(5,n);d<p;d++){var v=jne(e.data,a,e.seriesLayoutBy,o,e.startIndex,d);h.push(v);var m=v===Vr.Not;if(m&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!m&&h[c.n]===Vr.Not)&&(c.n=d),g(c)&&h[c.n]!==Vr.Not)return c;m||(v===Vr.Might&&f.v==null&&d!==s&&(f.v=d),(f.n==null||f.n===f.v)&&(f.n=d))}function g(y){return y.v!=null&&y.n!=null}return g(c)?c:g(f)?f:null}();if(u){r.value=[u.v];var l=s??u.n;r.itemName=[l],r.seriesName=[l]}return r}function $3(t){var e=t.get("data",!0);if(!e)return j1(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},$i).models[0]}function iKe(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:j1(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},$i).models}function Hne(t,e){return jne(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function jne(t,e,n,r,i,a){var o,s=5;if(ya(t))return Vr.Not;var u,l;if(r){var c=r[a];Ke(c)?(u=c.name,l=c.type):ze(c)&&(u=c)}if(l!=null)return l==="ordinal"?Vr.Must:Vr.Not;if(e===xa){var f=t;if(n===ig){for(var h=f[a],d=0;d<(h||[]).length&&d<s;d++)if((o=w(h[i+d]))!=null)return o}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(o=w(p[a]))!=null)return o}}else if(e===Ds){var v=t;if(!u)return Vr.Not;for(var d=0;d<v.length&&d<s;d++){var m=v[d];if(m&&(o=w(m[u]))!=null)return o}}else if(e===wu){var g=t;if(!u)return Vr.Not;var h=g[u];if(!h||ya(h))return Vr.Not;for(var d=0;d<h.length&&d<s;d++)if((o=w(h[d]))!=null)return o}else if(e===Bo)for(var y=t,d=0;d<y.length&&d<s;d++){var m=y[d],x=H1(m);if(!Me(x))return Vr.Not;if((o=w(x[a]))!=null)return o}function w(b){var C=ze(b);if(b!=null&&isFinite(b)&&b!=="")return C?Vr.Might:Vr.Not;if(C&&b!=="-")return Vr.Must}return Vr.Not}var aR=st();function aKe(t,e){za(aR.get(t)==null&&e),aR.set(t,e)}function oKe(t,e,n){var r=aR.get(e);if(!r)return n;var i=r(t);return i?n.concat(i):n}var aV=Gn();Gn();var M3=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var i=cr(this.get("color",!0)),a=this.get("colorLayer",!0);return uKe(this,aV,i,a,e,n,r)},t.prototype.clearColorPalette=function(){lKe(this,aV)},t}();function sKe(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function uKe(t,e,n,r,i,a,o){a=a||t;var s=e(a),u=s.paletteIdx||0,l=s.paletteNameMap=s.paletteNameMap||{};if(l.hasOwnProperty(i))return l[i];var c=o==null||!r?n:sKe(r,o);if(c=c||n,!(!c||!c.length)){var f=c[u];return i&&(l[i]=f),s.paletteIdx=(u+1)%c.length,f}}function lKe(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var pw,$g,oV,sV="\0_ec_inner",cKe=1,qne=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i,a,o,s){a=a||{},this.option=null,this._theme=new sr(a),this._locale=new sr(o),this._optionManager=s},e.prototype.setOption=function(n,r,i){var a=cV(r);this._optionManager.setOption(n,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(n,r){return this._resetOption(n,cV(r))},e.prototype._resetOption=function(n,r){var i=!1,a=this._optionManager;if(!n||n==="recreate"){var o=a.mountOption(n==="recreate");!this.option||n==="recreate"?oV(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var u=a.getMediaOption(this);u.length&&W(u,function(l){i=!0,this._mergeOption(l,r)},this)}return i},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],u=st(),l=r&&r.replaceMergeMainTypeMap;tKe(this),W(n,function(f,h){f!=null&&(Qt.hasClass(h)?h&&(s.push(h),u.set(h,!0)):i[h]=i[h]==null?ft(f):vt(i[h],f,!0))}),l&&l.each(function(f,h){Qt.hasClass(h)&&!u.get(h)&&(s.push(h),u.set(h,!0))}),Qt.topologicalTravel(s,Qt.getAllClassMainTypes(),c,this);function c(f){var h=oKe(this,f,cr(n[f])),d=a.get(f),p=d?l&&l.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=ije(d,h,p);hje(v,f,Qt),i[f]=null,a.set(f,null),o.set(f,0);var m=[],g=[],y=0,x;W(v,function(w,b){var C=w.existing,D=w.newOption;if(!D)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var S=f==="series",_=Qt.getClass(f,w.keyInfo.subType,!S);if(!_)return;if(f==="tooltip"){if(x)return;x=!0}if(C&&C.constructor===_)C.name=w.keyInfo.name,C.mergeOption(D,this),C.optionUpdated(D,!1);else{var T=De({componentIndex:b},w.keyInfo);C=new _(D,this,this,T),De(C,T),w.brandNew&&(C.__requireNewView=!0),C.init(D,this,this),C.optionUpdated(null,!0)}}C?(m.push(C.option),g.push(C),y++):(m.push(void 0),g.push(void 0))},this),i[f]=m,a.set(f,g),o.set(f,y),f==="series"&&pw(this)}this._seriesIndices||pw(this)},e.prototype.getOption=function(){var n=ft(this.option);return W(n,function(r,i){if(Qt.hasClass(i)){for(var a=cr(r),o=a.length,s=!1,u=o-1;u>=0;u--)a[u]&&!z0(a[u])?s=!0:(a[u]=null,!s&&o--);a.length=o,n[i]=a}}),delete n[sV],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,a=n.id,o=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var u;return i!=null?(u=[],W(cr(i),function(l){s[l]&&u.push(s[l])})):a!=null?u=uV("id",a,s):o!=null?u=uV("name",o,s):u=$n(s,function(l){return!!l}),lV(u,n)},e.prototype.findComponents=function(n){var r=n.query,i=n.mainType,a=s(r),o=a?this.queryComponents(a):$n(this._componentsMap.get(i),function(l){return!!l});return u(lV(o,n));function s(l){var c=i+"Index",f=i+"Id",h=i+"Name";return l&&(l[c]!=null||l[f]!=null||l[h]!=null)?{mainType:i,index:l[c],id:l[f],name:l[h]}:null}function u(l){return n.filter?$n(l,n.filter):l}},e.prototype.eachComponent=function(n,r,i){var a=this._componentsMap;if(ot(n)){var o=r,s=n;a.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(o,h,p,p.componentIndex)}})}else for(var u=ze(n)?a.get(n):Ke(n)?this.findComponents(n):null,l=0;u&&l<u.length;l++){var c=u[l];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=iu(n,null);return $n(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return $n(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return $n(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){$g(this),W(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)},this)},e.prototype.eachRawSeries=function(n,r){W(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,i){$g(this),W(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===n&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(n,r,i){return W(this.getSeriesByType(n),r,i)},e.prototype.isSeriesFiltered=function(n){return $g(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){$g(this);var i=[];W(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];n.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=st(i)},e.prototype.restoreData=function(n){pw(this);var r=this._componentsMap,i=[];r.each(function(a,o){Qt.hasClass(o)&&i.push(o)}),Qt.topologicalTravel(i,Qt.getAllClassMainTypes(),function(a){W(r.get(a),function(o){o&&(a!=="series"||!fKe(o,n))&&o.restoreData()})})},e.internalField=function(){pw=function(n){var r=n._seriesIndices=[];W(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=st(r)},$g=function(n){},oV=function(n,r){n.option={},n.option[sV]=cKe,n._componentsMap=st({series:[]}),n._componentsCount=st();var i=r.aria;Ke(i)&&i.enabled==null&&(i.enabled=!0),hKe(r,n._theme.option),vt(r,eKe,!1),n._mergeOption(r,null)}}(),e}(sr);function fKe(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,i=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||i!=null&&t.name!==i}}function hKe(t,e){var n=t.color&&!t.colorLayer;W(e,function(r,i){i==="colorLayer"&&n||Qt.hasClass(i)||(typeof r=="object"?t[i]=t[i]?vt(t[i],r,!1):ft(r):t[i]==null&&(t[i]=r))})}function uV(t,e,n){if(Me(e)){var r=st();return W(e,function(a){if(a!=null){var o=iu(a,null);o!=null&&r.set(a,!0)}}),$n(n,function(a){return a&&r.get(a[t])})}else{var i=iu(e,null);return $n(n,function(a){return a&&i!=null&&a[t]===i})}}function lV(t,e){return e.hasOwnProperty("subType")?$n(t,function(n){return n&&n.subType===e.subType}):t}function cV(t){var e=st();return t&&W(cr(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}Lo(qne,M3);const Xne=qne;var dKe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],pKe=function(){function t(e){W(dKe,function(n){this[n]=Ht(e[n],e)},this)}return t}();const Kne=pKe;var CA={},vKe=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];W(CA,function(i,a){var o=i.create(e,n);r=r.concat(o||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){W(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){CA[e]=n},t.get=function(e){return CA[e]},t}();const Z_=vKe;var gKe=/^(min|max)?(.+)$/,mKe=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(W(cr(e.series),function(o){o&&o.data&&ya(o.data)&&jC(o.data)}),W(cr(e.dataset),function(o){o&&o.source&&ya(o.source)&&jC(o.source)})),e=ft(e);var i=this._optionBackup,a=yKe(e,n,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],ft(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(n=ft(r[i.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var u=0,l=i.length;u<l;u++)xKe(i[u].query,n,r)&&o.push(u);return!o.length&&a&&(o=[-1]),o.length&&!bKe(o,this._currentMediaIndices)&&(s=$e(o,function(c){return ft(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},t}();function yKe(t,e,n){var r=[],i,a,o=t.baseOption,s=t.timeline,u=t.options,l=t.media,c=!!t.media,f=!!(u||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((f||c)&&(t.options=t.media=null),a=t),c&&Me(l)&&W(l,function(d){d&&d.option&&(d.query?r.push(d):i||(i=d))}),h(a),W(u,function(d){return h(d)}),W(r,function(d){return h(d.option)});function h(d){W(e,function(p){p(d,n)})}return{baseOption:a,timelineOptions:u||[],mediaDefault:i,mediaList:r}}function xKe(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return W(t,function(a,o){var s=o.match(gKe);if(!(!s||!s[1]||!s[2])){var u=s[1],l=s[2].toLowerCase();wKe(r[l],a,u)||(i=!1)}}),i}function wKe(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function bKe(t,e){return t.join(",")===e.join(",")}const CKe=mKe;var Go=W,j0=Ke,fV=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function SA(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=fV.length;n<r;n++){var i=fV[n],a=e.normal,o=e.emphasis;a&&a[i]&&(t[i]=t[i]||{},t[i].normal?vt(t[i].normal,a[i]):t[i].normal=a[i],a[i]=null),o&&o[i]&&(t[i]=t[i]||{},t[i].emphasis?vt(t[i].emphasis,o[i]):t[i].emphasis=o[i],o[i]=null)}}function ci(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,dt(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function hm(t){ci(t,"itemStyle"),ci(t,"lineStyle"),ci(t,"areaStyle"),ci(t,"label"),ci(t,"labelLine"),ci(t,"upperLabel"),ci(t,"edgeLabel")}function jn(t,e){var n=j0(t)&&t[e],r=j0(n)&&n.textStyle;if(r)for(var i=0,a=h6.length;i<a;i++){var o=h6[i];r.hasOwnProperty(o)&&(n[o]=r[o])}}function ao(t){t&&(hm(t),jn(t,"label"),t.emphasis&&jn(t.emphasis,"label"))}function SKe(t){if(j0(t)){SA(t),hm(t),jn(t,"label"),jn(t,"upperLabel"),jn(t,"edgeLabel"),t.emphasis&&(jn(t.emphasis,"label"),jn(t.emphasis,"upperLabel"),jn(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(SA(e),ao(e));var n=t.markLine;n&&(SA(n),ao(n));var r=t.markArea;r&&ao(r);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var a=t.links||t.edges;if(a&&!ya(a))for(var o=0;o<a.length;o++)ao(a[o]);W(t.categories,function(l){hm(l)})}if(i&&!ya(i))for(var o=0;o<i.length;o++)ao(i[o]);if(e=t.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)ao(s[o]);if(n=t.markLine,n&&n.data)for(var u=n.data,o=0;o<u.length;o++)Me(u[o])?(ao(u[o][0]),ao(u[o][1])):ao(u[o]);t.type==="gauge"?(jn(t,"axisLabel"),jn(t,"title"),jn(t,"detail")):t.type==="treemap"?(ci(t.breadcrumb,"itemStyle"),W(t.levels,function(l){hm(l)})):t.type==="tree"&&hm(t.leaves)}}function Du(t){return Me(t)?t:t?[t]:[]}function hV(t){return(Me(t)?t[0]:t)||{}}function DKe(t,e){Go(Du(t.series),function(r){j0(r)&&SKe(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Go(n,function(r){Go(Du(t[r]),function(i){i&&(jn(i,"axisLabel"),jn(i.axisPointer,"label"))})}),Go(Du(t.parallel),function(r){var i=r&&r.parallelAxisDefault;jn(i,"axisLabel"),jn(i&&i.axisPointer,"label")}),Go(Du(t.calendar),function(r){ci(r,"itemStyle"),jn(r,"dayLabel"),jn(r,"monthLabel"),jn(r,"yearLabel")}),Go(Du(t.radar),function(r){jn(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Go(Du(t.geo),function(r){j0(r)&&(ao(r),Go(Du(r.regions),function(i){ao(i)}))}),Go(Du(t.timeline),function(r){ao(r),ci(r,"label"),ci(r,"itemStyle"),ci(r,"controlStyle",!0);var i=r.data;Me(i)&&W(i,function(a){Ke(a)&&(ci(a,"label"),ci(a,"itemStyle"))})}),Go(Du(t.toolbox),function(r){ci(r,"iconStyle"),Go(r.feature,function(i){ci(i,"iconStyle")})}),jn(hV(t.axisPointer),"label"),jn(hV(t.tooltip).axisPointer,"label")}function _Ke(t,e){for(var n=e.split(","),r=t,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function TKe(t,e,n,r){for(var i=e.split(","),a=t,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];(r||a[i[s]]==null)&&(a[i[s]]=n)}function dV(t){t&&W(EKe,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var EKe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],AKe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],DA=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Mg(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<DA.length;n++){var r=DA[n][1],i=DA[n][0];e[r]!=null&&(e[i]=e[r])}}function pV(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function vV(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function kKe(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function Yne(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&Yne(t[n].children,e)}function Zne(t,e){DKe(t,e),t.series=cr(t.series),W(t.series,function(n){if(Ke(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),pV(n.label);var i=n.data;if(i&&!ya(i))for(var a=0;a<i.length;a++)pV(i[a]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var o=_Ke(n,"pointer.color");o!=null&&TKe(n,"itemStyle.color",o)}else if(r==="bar"){Mg(n),Mg(n.backgroundStyle),Mg(n.emphasis);var i=n.data;if(i&&!ya(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Mg(i[a]),Mg(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),vV(n),Yne(n.data,vV)}else r==="graph"||r==="sankey"?kKe(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&dt(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),dV(n)}}),t.dataRange&&(t.visualMap=t.dataRange),W(AKe,function(n){var r=t[n];r&&(Me(r)||(r=[r]),W(r,function(i){dV(i)}))})}function IKe(t){var e=st();t.eachSeries(function(n){var r=n.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=n.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(NKe)}function NKe(t){W(t,function(e,n){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,u=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(l,c,f){var h=o.get(e.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=o.getRawIndex(f):d=o.get(e.stackedByDimension,f);for(var v=NaN,m=n-1;m>=0;m--){var g=t[m];if(s||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(u==="all"||u==="positive"&&y>0||u==="negative"&&y<0||u==="samesign"&&h>=0&&y>0||u==="samesign"&&h<=0&&y<0){h=QHe(h,y),v=y;break}}}return r[0]=h,r[1]=v,r})})}var Q_=function(){function t(e){this.data=e.data||(e.sourceFormat===wu?{}:[]),this.sourceFormat=e.sourceFormat||Une,this.seriesLayoutBy=e.seriesLayoutBy||Wu,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&Hne(this,r)===Vr.Must&&(i.type="ordinal")}}return t}();function O3(t){return t instanceof Q_}function oR(t,e,n){n=n||Qne(t);var r=e.seriesLayoutBy,i=$Ke(t,n,r,e.sourceHeader,e.dimensions),a=new Q_({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:ft(e)});return a}function F3(t){return new Q_({data:t,sourceFormat:ya(t)?dc:Bo})}function RKe(t){return new Q_({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:ft(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function Qne(t){var e=Une;if(ya(t))e=dc;else if(Me(t)){t.length===0&&(e=xa);for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null){if(Me(i)){e=xa;break}else if(Ke(i)){e=Ds;break}}}}else if(Ke(t)){for(var a in t)if(Ph(t,a)&&zi(t[a])){e=wu;break}}return e}function $Ke(t,e,n,r,i){var a,o;if(!t)return{dimensionsDefine:gV(i),startIndex:o,dimensionsDetectedCount:a};if(e===xa){var s=t;r==="auto"||r==null?mV(function(l){l!=null&&l!=="-"&&(ze(l)?o==null&&(o=1):o=0)},n,s,10):o=Kt(r)?r:r?1:0,!i&&o===1&&(i=[],mV(function(l,c){i[c]=l!=null?l+"":""},n,s,1/0)),a=i?i.length:n===ig?s.length:s[0]?s[0].length:null}else if(e===Ds)i||(i=MKe(t));else if(e===wu)i||(i=[],W(t,function(l,c){i.push(c)}));else if(e===Bo){var u=H1(t[0]);a=Me(u)&&u.length||1}return{startIndex:o,dimensionsDefine:gV(i),dimensionsDetectedCount:a}}function MKe(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return Mt(n)}function gV(t){if(t){var e=st();return $e(t,function(n,r){n=Ke(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function mV(t,e,n,r){if(e===ig)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)t(a[i],i)}function Jne(t){var e=t.sourceFormat;return e===Ds||e===wu}var mf,yf,xf,yV,xV,ere=function(){function t(e,n){var r=O3(e)?e:F3(e);this._source=r;var i=this._data=r.data;r.sourceFormat===dc&&(this._offset=0,this._dimSize=n,this._data=i),xV(this,i,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;xV=function(o,s,u){var l=u.sourceFormat,c=u.seriesLayoutBy,f=u.startIndex,h=u.dimensionsDefine,d=yV[P3(l,c)];if(De(o,d),l===dc)o.getItem=n,o.count=i,o.fillStorage=r;else{var p=tre(l,c);o.getItem=Ht(p,null,s,f,h);var v=nre(l,c);o.count=Ht(v,null,s,f,h)}};var n=function(o,s){o=o-this._offset,s=s||[];for(var u=this._data,l=this._dimSize,c=l*o,f=0;f<l;f++)s[f]=u[c+f];return s},r=function(o,s,u,l){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=l[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=s-o,g=u[h],y=0;y<m;y++){var x=c[y*f+h];g[o+y]=x,x<p&&(p=x),x>v&&(v=x)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};yV=(e={},e[xa+"_"+Wu]={pure:!0,appendData:a},e[xa+"_"+ig]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Ds]={pure:!0,appendData:a},e[wu]={pure:!0,appendData:function(o){var s=this._data;W(o,function(u,l){for(var c=s[l]||(s[l]=[]),f=0;f<(u||[]).length;f++)c.push(u[f])})}},e[Bo]={appendData:a},e[dc]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),t}(),wV=function(t,e,n,r){return t[r]},OKe=(mf={},mf[xa+"_"+Wu]=function(t,e,n,r){return t[r+e]},mf[xa+"_"+ig]=function(t,e,n,r,i){r+=e;for(var a=i||[],o=t,s=0;s<o.length;s++){var u=o[s];a[s]=u?u[r]:null}return a},mf[Ds]=wV,mf[wu]=function(t,e,n,r,i){for(var a=i||[],o=0;o<n.length;o++){var s=n[o].name,u=t[s];a[o]=u?u[r]:null}return a},mf[Bo]=wV,mf);function tre(t,e){var n=OKe[P3(t,e)];return n}var bV=function(t,e,n){return t.length},FKe=(yf={},yf[xa+"_"+Wu]=function(t,e,n){return Math.max(0,t.length-e)},yf[xa+"_"+ig]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},yf[Ds]=bV,yf[wu]=function(t,e,n){var r=n[0].name,i=t[r];return i?i.length:0},yf[Bo]=bV,yf);function nre(t,e){var n=FKe[P3(t,e)];return n}var _A=function(t,e,n){return t[e]},PKe=(xf={},xf[xa]=_A,xf[Ds]=function(t,e,n){return t[n]},xf[wu]=_A,xf[Bo]=function(t,e,n){var r=H1(t);return r instanceof Array?r[e]:r},xf[dc]=_A,xf);function rre(t){var e=PKe[t];return e}function P3(t,e){return t===xa?t+"_"+e:t}function Tv(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var i=t.getStore(),a=i.getSource().sourceFormat;if(n!=null){var o=t.getDimensionIndex(n),s=i.getDimensionProperty(o);return rre(a)(r,o,s)}else{var u=r;return a===Bo&&(u=H1(r)),u}}}}var LKe=/\{@(.+?)\}/g,zKe=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),i=this.getRawValue(e,n),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),u=r.getItemVisual(e,"style"),l=u&&u[r.getItemVisual(e,"drawType")||"fill"],c=u&&u.stroke,f=this.mainType,h=f==="series",d=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:n,value:i,color:l,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,i,a,o){n=n||"normal";var s=this.getData(r),u=this.getDataParams(e,r);if(o&&(u.value=o.interpolatedValue),i!=null&&Me(u.value)&&(u.value=u.value[i]),!a){var l=s.getItemModel(e);a=l.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(ot(a))return u.status=n,u.dimensionIndex=i,a(u);if(ze(a)){var c=N3(a,u);return c.replace(LKe,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Tv(s,e,p);if(o&&Me(o.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(v=o.interpolatedValue[m])}return v!=null?v+"":""})}},t.prototype.getRawValue=function(e,n){return Tv(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function CV(t){var e,n;return Ke(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function Bm(t){return new BKe(t)}var BKe=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,u=c(e&&e.modBy),l=e&&e.modDataCount||0;(o!==u||s!==l)&&(a="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=u,this._modDataCount=l;var h=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(f||d<p)){var v=this._progress;if(Me(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,u,l);else this._doProgress(v,d,p,u,l)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,i,a){SV.reset(n,r,i,a),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:SV.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),Me(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),SV=function(){var t,e,n,r,i,a={reset:function(u,l,c,f){e=u,t=l,n=c,r=f,i=Math.ceil(r/n),a.next=n>1&&r>0?s:o}};return a;function o(){return e<t?e++:null}function s(){var u=e%i*n+Math.ceil(e/i),l=e>=t?null:u<r?u:e;return e++,l}}();function pb(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!Kt(t)&&t!=null&&t!=="-"&&(t=+Io(t)),t==null||t===""?NaN:+t)}st({number:function(t){return parseFloat(t)},time:function(t){return+Io(t)},trim:function(t){return ze(t)?os(t):t}});var VKe=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=Kt(e)?e:L0(e),i=Kt(n)?n:L0(n),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=ze(e),u=ze(n);s&&(r=u?e:0),u&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},t}(),WKe=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return pb(e,n)},t}();function UKe(t,e){var n=new WKe,r=t.data,i=n.sourceFormat=t.sourceFormat,a=t.startIndex,o="";t.seriesLayoutBy!==Wu&&Zi(o);var s=[],u={},l=t.dimensionsDefine;if(l)W(l,function(v,m){var g=v.name,y={index:m,name:g,displayName:v.displayName};if(s.push(y),g!=null){var x="";Ph(u,g)&&Zi(x),u[g]=y}});else for(var c=0;c<t.dimensionsDetectedCount;c++)s.push({index:c});var f=tre(i,Wu);e.__isBuiltIn&&(n.getRawDataItem=function(v){return f(r,a,s,v)},n.getRawData=Ht(GKe,null,t)),n.cloneRawData=Ht(HKe,null,t);var h=nre(i,Wu);n.count=Ht(h,null,r,a,s);var d=rre(i);n.retrieveValue=function(v,m){var g=f(r,a,s,v);return p(g,m)};var p=n.retrieveValueFromItem=function(v,m){if(v!=null){var g=s[m];if(g)return d(v,m,g.name)}};return n.getDimensionInfo=Ht(jKe,null,s,u),n.cloneAllDimensionInfo=Ht(qKe,null,s),n}function GKe(t){var e=t.sourceFormat;if(!L3(e)){var n="";Zi(n)}return t.data}function HKe(t){var e=t.sourceFormat,n=t.data;if(!L3(e)){var r="";Zi(r)}if(e===xa){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].slice());return i}else if(e===Ds){for(var i=[],a=0,o=n.length;a<o;a++)i.push(De({},n[a]));return i}}function jKe(t,e,n){if(n!=null){if(Kt(n)||!isNaN(n)&&!Ph(e,n))return t[n];if(Ph(e,n))return e[n]}}function qKe(t){return ft(t)}var ire=st();function XKe(t){t=ft(t);var e=t.type,n="";e||Zi(n);var r=e.split(":");r.length!==2&&Zi(n);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),t.__isBuiltIn=i,ire.set(e,t)}function KKe(t,e,n){var r=cr(t),i=r.length,a="";i||Zi(a);for(var o=0,s=i;o<s;o++){var u=r[o];e=YKe(u,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function YKe(t,e,n,r){var i="";e.length||Zi(i),Ke(t)||Zi(i);var a=t.type,o=ire.get(a);o||Zi(i);var s=$e(e,function(l){return UKe(l,o)}),u=cr(o.transform({upstream:s[0],upstreamList:s,config:ft(t.config)}));return $e(u,function(l,c){var f="";Ke(l)||Zi(f),l.data||Zi(f);var h=Qne(l.data);L3(h)||Zi(f);var d,p=e[0];if(p&&c===0&&!l.dimensions){var v=p.startIndex;v&&(l.data=p.data.slice(0,v).concat(l.data)),d={seriesLayoutBy:Wu,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Wu,sourceHeader:0,dimensions:l.dimensions};return oR(l.data,d,null)})}function L3(t){return t===xa||t===Ds}var J_="undefined",ZKe=typeof Uint32Array===J_?Array:Uint32Array,QKe=typeof Uint16Array===J_?Array:Uint16Array,are=typeof Int32Array===J_?Array:Int32Array,DV=typeof Float64Array===J_?Array:Float64Array,ore={float:DV,int:are,ordinal:Array,number:Array,time:DV},TA;function Og(t){return t>65535?ZKe:QKe}function kd(){return[1/0,-1/0]}function JKe(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function _V(t,e,n,r,i){var a=ore[n||"float"];if(i){var o=t[e],s=o&&o.length;if(s!==r){for(var u=new a(r),l=0;l<s;l++)u[l]=o[l];t[e]=u}}else t[e]=new a(r)}var eYe=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=st()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=TA[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],Jne(i),this._dimensions=$e(n,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===n)return a}else a=i.length;return i[a]={type:n},r.set(e,a),this._chunks[a]=new ore[n||"float"](this._rawCount),this._rawExtent[a]=kd(),a},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=kd());for(var u=a[e],l=o;l<s;l++){var c=r[l]=n.parseAndCollect(r[l]);isNaN(c)||(u[0]=Math.min(c,u[0]),u[1]=Math.max(c,u[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),u=s+Math.max(e.length,n||0),l=0;l<a;l++){var c=i[l];_V(r,l,c.type,u,!0)}for(var f=[],h=s;h<u;h++)for(var d=h-s,p=0;p<a;p++){var c=i[p],v=TA.arrayRows.call(this,e[d]||f,c.property,d,p);r[p][h]=v;var m=o[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=u,{start:s,end:u}},t.prototype._initDataFromProvider=function(e,n,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,u=this._rawExtent,l=$e(o,function(y){return y.property}),c=0;c<s;c++){var f=o[c];u[c]||(u[c]=kd()),_V(a,c,f.type,n,r)}if(i.fillStorage)i.fillStorage(e,n,a,u);else for(var h=[],d=e;d<n;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=a[p],m=this._dimValueGetter(h,l[p],d,p);v[d]=m;var g=u[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],i=[];if(n==null){n=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(a){isNaN(a)||n.push(a)});var r=n.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(n[o]<e)i=o+1;else if(n[o]>e)a=o-1;else return o}return-1},t.prototype.indicesOfNearest=function(e,n,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,u=-1,l=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=n-a[h],p=Math.abs(d);p<=r&&((p<s||p===s&&d>=0&&u<0)&&(s=p,u=d,l=0),d===u&&(o[l++]=c))}return o.length=l,o},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=n[a]}else e=new r(n.buffer,0,i)}else{var r=Og(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=Og(r._rawCount),o=new a(i),s=[],u=e.length,l=0,c=e[0],f=r._chunks,h=0;h<i;h++){var d=void 0,p=r.getRawIndex(h);if(u===0)d=n(h);else if(u===1){var v=f[c][p];d=n(v,h)}else{for(var m=0;m<u;m++)s[m]=f[e[m]][p];s[m]=h,d=n.apply(null,s)}d&&(o[l++]=p)}return l<i&&(r._indices=o),r._count=l,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var i=Mt(e),a=i.length;if(!a)return this;var o=n.count(),s=Og(n._rawCount),u=new s(o),l=0,c=i[0],f=e[c][0],h=e[c][1],d=n._chunks,p=!1;if(!n._indices){var v=0;if(a===1){for(var m=d[i[0]],g=0;g<r;g++){var y=m[g];(y>=f&&y<=h||isNaN(y))&&(u[l++]=v),v++}p=!0}else if(a===2){for(var m=d[i[0]],x=d[i[1]],w=e[i[1]][0],b=e[i[1]][1],g=0;g<r;g++){var y=m[g],C=x[g];(y>=f&&y<=h||isNaN(y))&&(C>=w&&C<=b||isNaN(C))&&(u[l++]=v),v++}p=!0}}if(!p)if(a===1)for(var g=0;g<o;g++){var D=n.getRawIndex(g),y=d[i[0]][D];(y>=f&&y<=h||isNaN(y))&&(u[l++]=D)}else for(var g=0;g<o;g++){for(var S=!0,D=n.getRawIndex(g),_=0;_<a;_++){var T=i[_],y=d[T][D];(y<e[T][0]||y>e[T][1])&&(S=!1)}S&&(u[l++]=n.getRawIndex(g))}return l<o&&(n._indices=u),n._count=l,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var i=e._chunks,a=[],o=n.length,s=e.count(),u=[],l=e._rawExtent,c=0;c<n.length;c++)l[n[c]]=kd();for(var f=0;f<s;f++){for(var h=e.getRawIndex(f),d=0;d<o;d++)u[d]=i[n[d]][h];u[o]=f;var p=r&&r.apply(null,u);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var v=n[c],m=p[c],g=l[v],y=i[v];y&&(y[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,u=Math.floor(1/n),l=this.getRawIndex(0),c,f,h,d=new(Og(this._rawCount))(Math.min((Math.ceil(o/u)+2)*2,o));d[s++]=l;for(var p=1;p<o-1;p+=u){for(var v=Math.min(p+u,o-1),m=Math.min(p+u*2,o),g=(m+v)/2,y=0,x=v;x<m;x++){var w=this.getRawIndex(x),b=a[w];isNaN(b)||(y+=b)}y/=m-v;var C=p,D=Math.min(p+u,o),S=p-1,_=a[l];c=-1,h=C;for(var T=-1,E=0,x=C;x<D;x++){var w=this.getRawIndex(x),b=a[w];if(isNaN(b)){E++,T<0&&(T=w);continue}f=Math.abs((S-g)*(b-_)-(S-x)*(y-_)),f>c&&(c=f,h=w)}E>0&&E<D-C&&(d[s++]=Math.min(T,h),h=Math.max(T,h)),d[s++]=h,l=h}return d[s++]=this.getRawIndex(o-1),r._count=s,r._indices=d,r.getRawIndex=this._getRawIdx,r},t.prototype.downSample=function(e,n,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],u=Math.floor(1/n),l=o[e],c=this.count(),f=a._rawExtent[e]=kd(),h=new(Og(this._rawCount))(Math.ceil(c/u)),d=0,p=0;p<c;p+=u){u>c-p&&(u=c-p,s.length=u);for(var v=0;v<u;v++){var m=this.getRawIndex(p+v);s[v]=l[m]}var g=r(s),y=this.getRawIndex(Math.min(p+i(s,g)||0,c-1));l[y]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=y}return a._count=d,a._indices=h,a._updateGetRawIdx(),a},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:n(a);break;case 1:n(i[e[0]][s],a);break;case 2:n(i[e[0]][s],i[e[1]][s],a);break;default:for(var u=0,l=[];u<r;u++)l[u]=i[e[u]][s];l[u]=a,n.apply(null,l)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=kd();if(!n)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],u=o[1],l=0;l<i;l++){var c=this.getRawIndex(l),f=n[c];f<s&&(s=f),f>u&&(u=f)}return o=[s,u],this._extent[e]=o,o},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][n]);return r},t.prototype.clone=function(e,n){var r=new t,i=this._chunks,a=e&&fu(e,function(s,u){return s[u]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?JKe(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=ft(this._extent),e._rawExtent=ft(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,i,a){return pb(n[a],this._dimensions[a])}TA={arrayRows:e,objectRows:function(n,r,i,a){return pb(n[r],this._dimensions[a])},keyedColumns:e,original:function(n,r,i,a){var o=n&&(n.value==null?n:n.value);return pb(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(n,r,i,a){return n[a]}}}(),t}();const sR=eYe;var tYe=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,a;if(vw(e)){var o=e,s=void 0,u=void 0,l=void 0;if(r){var c=n[0];c.prepareSource(),l=c.getSource(),s=l.data,u=l.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),u=ya(s)?dc:Bo,a=[];var f=this._getSourceMetaRawOption()||{},h=l&&l.metaRawOption||{},d=yt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=yt(f.sourceHeader,h.sourceHeader),v=yt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[oR(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},u)]:[]}else{var g=e;if(r){var y=this._applyTransform(n);i=y.sourceList,a=y.upstreamSignList}else{var x=g.get("source",!0);i=[oR(x,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&TV(a)}var o,s=[],u=[];return W(e,function(l){l.prepareSource();var c=l.getSource(i||0),f="";i!=null&&!c&&TV(f),s.push(c),u.push(l._getVersionSign())}),r?o=KKe(r,s,{datasetIndex:n.componentIndex}):i!=null&&(o=[RKe(s[0])]),{sourceList:o,upstreamSignList:u}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var u=this._getUpstreamSourceManagers()[0];vw(this._sourceHost)&&u?s=u._innerGetDataStore(e,n,r):(s=new sR,s.initData(new ere(n,e.length),e)),o[r]=s}return s},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(vw(e)){var n=$3(e);return n?[n.getSourceManager()]:[]}else return $e(iKe(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,i;if(vw(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;n=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},t}();function vw(t){return t.mainType==="series"}function TV(t){throw new Error(t)}var sre="line-height:1";function ure(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,i=t.fontWeight||"400",a=t.color||"#464646",o=t.fontSize||14,s=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Yi(r+"")+"px;color:"+Yi(n)+";font-weight:"+Yi(i+""),valueStyle:"font-size:"+Yi(o+"")+"px;color:"+Yi(a)+";font-weight:"+Yi(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var nYe=[0,10,20,30],rYe=["",`
`,`

`,`


`];function q0(t,e){return e.type=t,e}function uR(t){return t.type==="section"}function lre(t){return uR(t)?iYe:aYe}function cre(t){if(uR(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return W(t.blocks,function(i){var a=cre(i);a>=e&&(e=a+ +(r&&(!a||uR(i)&&!i.noHeader)))}),e}return 0}function iYe(t,e,n,r){var i=e.noHeader,a=oYe(cre(e)),o=[],s=e.blocks||[];za(!s||Me(s)),s=s||[];var u=t.orderMode;if(e.sortBlocks&&u){s=s.slice();var l={valueAsc:"asc",valueDesc:"desc"};if(Ph(l,u)){var c=new VKe(l[u],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else u==="seriesDesc"&&s.reverse()}W(s,function(p,v){var m=e.valueFormatter,g=lre(p)(m?De(De({},t),{valueFormatter:m}):t,p,v>0?a.html:0,r);g!=null&&o.push(g)});var f=t.renderMode==="richText"?o.join(a.richText):lR(o.join(""),i?n:a.html);if(i)return f;var h=iR(e.header,"ordinal",t.useUTC),d=ure(r,t.renderMode).nameStyle;return t.renderMode==="richText"?fre(t,h,d)+a.richText+f:lR('<div style="'+d+";"+sre+';">'+Yi(h)+"</div>"+f,n)}function aYe(t,e,n,r){var i=t.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,u=e.name,l=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(w){return w=Me(w)?w:[w],$e(w,function(b,C){return iR(b,Me(d)?d[C]:d,l)})};if(!(a&&o)){var f=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":iR(u,"ordinal",l),d=e.valueType,p=o?[]:c(e.value),v=!s||!a,m=!s&&a,g=ure(r,i),y=g.nameStyle,x=g.valueStyle;return i==="richText"?(s?"":f)+(a?"":fre(t,h,y))+(o?"":lYe(t,p,v,m,x)):lR((s?"":f)+(a?"":sYe(h,!s,y))+(o?"":uYe(p,v,m,x)),n)}}function EV(t,e,n,r,i,a){if(t){var o=lre(t),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return o(s,t,0,a)}}function oYe(t){return{html:nYe[t],richText:rYe[t]}}function lR(t,e){var n='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+sre+';">'+t+n+"</div>"}function sYe(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Yi(t)+"</span>"}function uYe(t,e,n,r){var i=n?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return t=Me(t)?t:[t],'<span style="'+a+";"+r+'">'+$e(t,function(o){return Yi(o)}).join("&nbsp;&nbsp;")+"</span>"}function fre(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function lYe(t,e,n,r,i){var a=[i],o=r?10:20;return n&&a.push({padding:[0,0,0,o],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Me(e)?e.join("  "):e,a)}function cYe(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return Vh(r)}function hre(t,e){var n=t.get("padding");return n??(e==="richText"?[8,10]:10)}var EA=function(){function t(){this.richTextStyles={},this._nextStyleNameId=Cte()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var i=r==="richText"?this._generateStyleName():null,a=Bne({color:n,type:e,renderMode:r,markerId:i});return ze(a)?a:(this.richTextStyles[i]=a.style,a.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};Me(n)?W(n,function(a){return De(r,a)}):De(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},t}();function fYe(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(n),u=Me(s),l=cYe(e,n),c,f,h,d;if(o>1||u&&!o){var p=hYe(s,e,n,a,l);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);d=c=Tv(i,n,a[0]),f=v.type}else d=c=u?s[0]:s;var m=r3(e),g=m&&e.name||"",y=i.getName(n),x=r?g:y;return q0("section",{header:g,noHeader:r||!m,sortParam:d,blocks:[q0("nameValue",{markerType:"item",markerColor:l,name:x,noName:!os(x),value:c,valueType:f})].concat(h||[])})}function hYe(t,e,n,r,i){var a=e.getData(),o=fu(t,function(f,h,d){var p=a.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],u=[],l=[];r.length?W(r,function(f){c(Tv(a,n,f),f)}):W(t,c);function c(f,h){var d=a.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(o?l.push(q0("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),u.push(d.type)))}return{inlineValues:s,inlineValueTypes:u,blocks:l}}var ml=Gn();function gw(t,e){return t.getName(e)||t.getId(e)}var vb="__universalTransitionEnabled",eT=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=Bm({count:pYe,reset:vYe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var a=ml(this).sourceManager=new tYe(this);a.prepareSource();var o=this.getInitialData(n,i);kV(o,this),this.dataTask.context.data=o,ml(this).dataBeforeProcessed=o,AV(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=H0(this),a=i?Y_(n):{},o=this.subType;Qt.hasClass(o)&&(o+="Series"),vt(n,r.getTheme().get(this.subType)),vt(n,this.getDefaultOption()),XN(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&_v(n,a,i)},e.prototype.mergeOption=function(n,r){n=vt(this.option,n,!0),this.fillDataTextStyle(n.data);var i=H0(this);i&&_v(this.option,n,i);var a=ml(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(n,r);kV(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,ml(this).dataBeforeProcessed=o,AV(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(n){if(n&&!ya(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&XN(n[i],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=cR(this);if(r){var i=r.context.data;return n==null?i:i.getLinkedData(n)}else return ml(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=cR(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}ml(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return st(n)},e.prototype.getSourceManager=function(){return ml(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return ml(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,i){return fYe({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(bt.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,i){var a=this.ecModel,o=M3.prototype.getColorFromPalette.call(this,n,r,i);return o||(o=a.getColorFromPalette(n,r,i)),o},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var u=n[s],l=gw(o,u);i[l]=!1,this._selectedDataIndicesMap[l]=-1}}},e.prototype.toggleSelect=function(n,r){for(var i=[],a=0;a<n.length;a++)i[0]=n[a],this.isSelected(n[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=Mt(n),i=[],a=0;a<r.length;a++){var o=n[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[gw(a,n)])&&!a.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[vb])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var i,a,o=this.option,s=o.selectedMode,u=r.length;if(!(!s||!u)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Ke(o.selectedMap)||(o.selectedMap={});for(var l=o.selectedMap,c=0;c<u;c++){var f=r[c],h=gw(n,f);l[h]=!0,this._selectedDataIndicesMap[h]=n.getRawIndex(f)}}else if(s==="single"||s===!0){var d=r[u-1],h=gw(n,d);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=n.getRawIndex(d),a)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var a=n.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return Qt.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(Qt);Lo(eT,zKe);Lo(eT,M3);kte(eT,Qt);function AV(t){var e=t.name;r3(t)||(t.name=dYe(t)||e)}function dYe(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return W(n,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function pYe(t){return t.model.getRawData().count()}function vYe(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),gYe}function gYe(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function kV(t,e){W(Oee(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,Ot(mYe,e))})}function mYe(t,e){var n=cR(t);return n&&n.setOutputEnd((e||this).count()),e}function cR(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}const Ro=eT;var z3=function(){function t(){this.group=new Qn,this.uid=Z1("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){},t.prototype.updateLayout=function(e,n,r,i){},t.prototype.updateVisual=function(e,n,r,i){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();a3(z3);N_(z3);const Ba=z3;function B3(){var t=Gn();return function(e){var n=t(e),r=e.pipelineContext,i=!!n.large,a=!!n.progressiveRender,o=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var dre=Gn(),yYe=B3(),V3=function(){function t(){this.group=new Qn,this.uid=Z1("viewChart"),this.renderTask=Bm({plan:xYe,reset:wYe}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.highlight=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&NV(a,i,"emphasis")},t.prototype.downplay=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&NV(a,i,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateLayout=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateVisual=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.eachRendered=function(e){U_(this.group,e)},t.markUpdateMethod=function(e,n){dre(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function IV(t,e,n){t&&eR(t)&&(e==="emphasis"?Sv:Dv)(t,n)}function NV(t,e,n){var r=zh(t,e),i=e&&e.highlightKey!=null?Fqe(e.highlightKey):null;r!=null?W(cr(r),function(a){IV(t.getItemGraphicEl(a),n,i)}):t.eachItemGraphicEl(function(a){IV(a,n,i)})}a3(V3);N_(V3);function xYe(t){return yYe(t.model)}function wYe(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=i&&dre(i).updateMethod,u=a?"incrementalPrepareRender":s&&o[s]?s:"render";return u!=="render"&&o[u](e,n,r,i),bYe[u]}var bYe={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const da=V3;var dS="\0__throttleOriginMethod",RV="\0__throttleRate",$V="\0__throttleType";function tT(t,e,n){var r,i=0,a=0,o=null,s,u,l,c;e=e||0;function f(){a=new Date().getTime(),o=null,t.apply(u,l||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];r=new Date().getTime(),u=this,l=d;var v=c||e,m=c||n;c=null,s=r-(m?i:a)-v,clearTimeout(o),m?o=setTimeout(f,v):s>=0?f():o=setTimeout(f,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(d){c=d},h}function pre(t,e,n,r){var i=t[e];if(i){var a=i[dS]||i,o=i[$V],s=i[RV];if(s!==n||o!==r){if(n==null||!r)return t[e]=a;i=t[e]=tT(a,n,r==="debounce"),i[dS]=a,i[$V]=r,i[RV]=n}return i}}function fR(t,e){var n=t[e];n&&n[dS]&&(n.clear&&n.clear(),t[e]=n[dS])}var MV=Gn(),OV={itemStyle:B0(kne,!0),lineStyle:B0(Ane,!0)},CYe={lineStyle:"stroke",itemStyle:"fill"};function vre(t,e){var n=t.visualStyleMapper||OV[e];return n||(console.warn("Unknown style type '"+e+"'."),OV.itemStyle)}function gre(t,e){var n=t.visualDrawType||CYe[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var SYe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=t.getModel(r),a=vre(t,r),o=a(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var u=gre(t,r),l=o[u],c=ot(l)?l:null,f=o.fill==="auto"||o.stroke==="auto";if(!o[u]||c||f){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[u]||(o[u]=h,n.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||ot(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||ot(o.stroke)?h:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",u),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=t.getDataParams(p),m=De({},o);m[u]=c(v),d.setItemVisual(p,"style",m)}}}},Fg=new sr,DYe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=vre(t,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(o,s){var u=o.getRawDataItem(s);if(u&&u[r]){Fg.option=u[r];var l=i(Fg),c=o.ensureUniqueItemVisual(s,"style");De(c,l),Fg.option.decal&&(o.setItemVisual(s,"decal",Fg.option.decal),Fg.option.decal.dirty=!0),a in l&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},_Ye={performRawSeries:!0,overallReset:function(t){var e=st();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),MV(n).scope=a}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),i={},a=n.getData(),o=MV(n).scope,s=n.visualStyleAccessPath||"itemStyle",u=gre(n,s);a.each(function(l){var c=a.getRawIndex(l);i[c]=l}),r.each(function(l){var c=i[l],f=a.getItemVisual(c,"colorFromPalette");if(f){var h=a.ensureUniqueItemVisual(c,"style"),d=r.getName(l)||l+"",p=r.count();h[u]=n.getColorFromPalette(d,o,p)}})}})}},mw=Math.PI;function TYe(t,e){e=e||{},dt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Qn,r=new Pn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var i=new $r({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Pn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(a);var o;return e.showSpinner&&(o=new L_({shape:{startAngle:-mw/2,endAngle:-mw/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:mw*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:mw*3/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var s=i.getBoundingRect().width,u=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-u*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:u),c=t.getHeight()/2;e.showSpinner&&o.setShape({cx:l,cy:c}),a.setShape({x:l-u,y:c-u,width:u*2,height:u*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var EYe=function(){function t(e,n,r,i){this._stageTaskMap=st(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,u=s!=null?Math.ceil(s/o):null;return{step:o,modBy:u,modDataCount:s}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&n.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),u=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:u,large:s}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=st();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),n._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;W(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";za(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,n,r),i.overallReset&&this._createOverallStageTask(i,a,n,r)},this)},t.prototype.prepareView=function(e,n,r,i){var a=e.renderTask,o=a.context;o.model=n,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(n,a)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,i){i=i||{};var a=!1,o=this;W(e,function(u,l){if(!(i.visualType&&i.visualType!==u.visualType)){var c=o._stageTaskMap.get(u.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),o.updatePayload(h,r);var v=o.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(a=!0)}else f&&f.each(function(m,g){s(i,m)&&m.dirty();var y=o.getPerformArgs(m,i.block);y.skip=!u.performRawSeries&&n.isSeriesFiltered(m.context.model),o.updatePayload(m,r),m.perform(y)&&(a=!0)})}});function s(u,l){return u.setDirty&&(!u.dirtyMap||u.dirtyMap.get(l.__pipeline.id))}this.unfinished=a||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,i){var a=this,o=n.seriesTaskMap,s=n.seriesTaskMap=st(),u=e.seriesType,l=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):u?r.eachRawSeriesByType(u,c):l&&l(r,i).each(c);function c(f){var h=f.uid,d=s.set(h,o&&o.get(h)||Bm({plan:RYe,reset:$Ye,count:OYe}));d.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(f,d)}},t.prototype._createOverallStageTask=function(e,n,r,i){var a=this,o=n.overallTask=n.overallTask||Bm({reset:AYe});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,u=o.agentStubMap=st(),l=e.seriesType,c=e.getTargetSeries,f=!0,h=!1,d="";za(!e.createOnAllSeries,d),l?r.eachRawSeriesByType(l,p):c?c(r,i).each(p):(f=!1,W(r.getSeries(),p));function p(v){var m=v.uid,g=u.set(m,s&&s.get(m)||(h=!0,Bm({reset:kYe,onDirty:NYe})));g.context={model:v,overallProgress:f},g.agent=o,g.__block=f,a._pipe(v,g)}h&&o.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},t.wrapStageHandler=function(e,n){return ot(e)&&(e={overallReset:e,seriesType:FYe(e)}),e.uid=Z1("stageHandler"),n&&(e.visualType=n),e},t}();function AYe(t){t.overallReset(t.ecModel,t.api,t.payload)}function kYe(t){return t.overallProgress&&IYe}function IYe(){this.agent.dirty(),this.getDownstream().dirty()}function NYe(){this.agent&&this.agent.dirty()}function RYe(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function $Ye(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=cr(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?$e(e,function(n,r){return mre(r)}):MYe}var MYe=mre(0);function mre(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function OYe(t){return t.data.count()}function FYe(t){pS=null;try{t(X0,yre)}catch{}return pS}var X0={},yre={},pS;xre(X0,Xne);xre(yre,Kne);X0.eachSeriesByType=X0.eachRawSeriesByType=function(t){pS=t};X0.eachComponent=function(t){t.mainType==="series"&&t.subType&&(pS=t.subType)};function xre(t,e){for(var n in e.prototype)t[n]=qr}const wre=EYe;var FV=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const PYe={color:FV,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],FV]};var _i="#B9B8CE",PV="#100C2A",yw=function(){return{axisLine:{lineStyle:{color:_i}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},LV=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],bre={darkMode:!0,color:LV,backgroundColor:PV,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:_i}},textStyle:{color:_i},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:_i}},dataZoom:{borderColor:"#71708A",textStyle:{color:_i},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:_i}},timeline:{lineStyle:{color:_i},label:{color:_i},controlStyle:{color:_i,borderColor:_i}},calendar:{itemStyle:{color:PV},dayLabel:{color:_i},monthLabel:{color:_i},yearLabel:{color:_i}},timeAxis:yw(),logAxis:yw(),valueAxis:yw(),categoryAxis:yw(),line:{symbol:"circle"},graph:{color:LV},gauge:{title:{color:_i},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:_i},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};bre.categoryAxis.splitLine.show=!1;const LYe=bre;var zYe=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},i={};if(ze(e)){var a=qs(e);n.mainType=a.main||null,n.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};W(e,function(u,l){for(var c=!1,f=0;f<o.length;f++){var h=o[f],d=l.lastIndexOf(h);if(d>0&&d===l.length-h.length){var p=l.slice(0,d);p!=="data"&&(n.mainType=p,n[h.toLowerCase()]=u,c=!0)}}s.hasOwnProperty(l)&&(r[l]=u,c=!0),c||(i[l]=u)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var u=n.cptQuery,l=n.dataQuery;return c(u,o,"mainType")&&c(u,o,"subType")&&c(u,o,"index","componentIndex")&&c(u,o,"name")&&c(u,o,"id")&&c(l,a,"name")&&c(l,a,"dataIndex")&&c(l,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,n.otherQuery,i,a));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),hR=["symbol","symbolSize","symbolRotate","symbolOffset"],zV=hR.concat(["symbolKeepAspect"]),BYe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<hR.length;o++){var s=hR[o],u=t.get(s);ot(u)?(a=!0,i[s]=u):r[s]=u}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(De({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var l=Mt(i);function c(f,h){for(var d=t.getRawValue(h),p=t.getDataParams(h),v=0;v<l.length;v++){var m=l[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:a?c:null}}},VYe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<zV.length;s++){var u=zV[s],l=o.getShallow(u,!0);l!=null&&i.setItemVisual(a,u,l)}}return{dataEach:n.hasItemOption?r:null}}};function WYe(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function UYe(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function GYe(t,e){function n(r,i){var a=[];return r.eachComponent({mainType:"series",subType:t,query:i},function(o){a.push(o.seriesIndex)}),a}W([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=De({},i),o.dispatchAction(De(i,{type:r[1],seriesIndex:n(a,i)}))})})}function Id(t,e,n,r,i){var a=t+e;n.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,u=o.option.selectedMap,l=i.selected,c=0;c<l.length;c++)if(l[c].seriesIndex===s){var f=o.getData(),h=zh(f,i.fromActionPayload);n.trigger(a,{type:a,seriesId:o.id,name:Me(h)?f.getName(h[0]):f.getName(h),selected:ze(u)?u:De({},u)})}})}function HYe(t,e,n){t.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(Id("map","selectchanged",e,i,r),Id("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Id("map","selected",e,i,r),Id("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Id("map","unselected",e,i,r),Id("pie","unselected",e,i,r))})}function dm(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var jYe=Math.round(Math.random()*9),qYe=typeof Object.defineProperty=="function",XYe=function(){function t(){this._id="__ec_inner_"+jYe++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return qYe?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}();const KYe=XYe;var YYe=Tt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r+a),t.lineTo(n-i,r+a),t.closePath()}}),ZYe=Tt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r),t.lineTo(n,r+a),t.lineTo(n-i,r),t.closePath()}}),QYe=Tt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),u=r-a+o+s,l=Math.asin(s/o),c=Math.cos(l)*o,f=Math.sin(l),h=Math.cos(l),d=o*.6,p=o*.7;t.moveTo(n-c,u+s),t.arc(n,u,o,Math.PI-l,Math.PI*2+l),t.bezierCurveTo(n+c-f*d,u+s+h*d,n,r-p,n,r),t.bezierCurveTo(n,r-p,n-c+f*d,u+s+h*d,n-c,u+s),t.closePath()}}),JYe=Tt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;t.moveTo(i,a),t.lineTo(i+o,a+n),t.lineTo(i,a+n/4*3),t.lineTo(i-o,a+n),t.lineTo(i,a),t.closePath()}}),eZe={line:kc,rect:Pn,roundRect:Pn,square:Pn,circle:P_,diamond:ZYe,pin:QYe,arrow:JYe,triangle:YYe},tZe={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var a=Math.min(n,r);i.x=t,i.y=e,i.width=a,i.height=a},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},dR={};W(eZe,function(t,e){dR[e]=new t});var nZe=Tt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=tS(t,e,n),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var i=dR[r];i||(r="rect",i=dR[r]),tZe[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function rZe(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function Nc(t,e,n,r,i,a,o){var s=t.indexOf("empty")===0;s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var u;return t.indexOf("image://")===0?u=x3(t.slice(8),new _t(e,n,r,i),o?"center":"cover"):t.indexOf("path://")===0?u=B_(t.slice(7),{},new _t(e,n,r,i),o?"center":"cover"):u=new nZe({shape:{symbolType:t,x:e,y:n,width:r,height:i}}),u.__isEmptyBrush=s,u.setColor=rZe,a&&u.setColor(a),u}function iZe(t){return Me(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function Cre(t,e){if(t!=null)return Me(t)||(t=[t,t]),[bn(t[0],e[0])||0,bn(yt(t[1],t[0]),e[1])||0]}function Xf(t){return isFinite(t)}function aZe(t,e,n){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),r=Xf(r)?r:0,i=Xf(i)?i:1,a=Xf(a)?a:0,o=Xf(o)?o:0;var s=t.createLinearGradient(r,a,i,o);return s}function oZe(t,e,n){var r=n.width,i=n.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,u=e.r==null?.5:e.r;e.global||(o=o*r+n.x,s=s*i+n.y,u=u*a),o=Xf(o)?o:.5,s=Xf(s)?s:.5,u=u>=0&&Xf(u)?u:.5;var l=t.createRadialGradient(o,s,0,o,s,u);return l}function pR(t,e,n){for(var r=e.type==="radial"?oZe(t,e,n):aZe(t,e,n),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function sZe(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function xw(t){return parseInt(t,10)}function gp(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(t);return(t[i]||xw(s[r])||xw(t.style[r]))-(xw(s[a])||0)-(xw(s[o])||0)|0}function uZe(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:Kt(t)?[t]:Me(t)?t:null}function W3(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&uZe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(n=$e(n,function(a){return a/i}),r/=i)}return[n,r]}var lZe=new hu(!0);function vS(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function BV(t){return typeof t=="string"&&t!=="none"}function gS(t){var e=t.fill;return e!=null&&e!=="none"}function VV(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function WV(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function vR(t,e,n){var r=o3(e.image,e.__image,n);if(R_(r)){var i=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*Nm),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function cZe(t,e,n,r){var i,a=vS(n),o=gS(n),s=n.strokePercent,u=s<1,l=!e.path;(!e.silent||u)&&l&&e.createPathProxy();var c=e.path||lZe,f=e.__dirty;if(!r){var h=n.fill,d=n.stroke,p=o&&!!h.colorStops,v=a&&!!d.colorStops,m=o&&!!h.image,g=a&&!!d.image,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0;(p||v)&&(C=e.getBoundingRect()),p&&(y=f?pR(t,h,C):e.__canvasFillGradient,e.__canvasFillGradient=y),v&&(x=f?pR(t,d,C):e.__canvasStrokeGradient,e.__canvasStrokeGradient=x),m&&(w=f||!e.__canvasFillPattern?vR(t,h,e):e.__canvasFillPattern,e.__canvasFillPattern=w),g&&(b=f||!e.__canvasStrokePattern?vR(t,d,e):e.__canvasStrokePattern,e.__canvasStrokePattern=w),p?t.fillStyle=y:m&&(w?t.fillStyle=w:o=!1),v?t.strokeStyle=x:g&&(b?t.strokeStyle=b:a=!1)}var D=e.getGlobalScale();c.setScale(D[0],D[1],e.segmentIgnoreThreshold);var S,_;t.setLineDash&&n.lineDash&&(i=W3(e),S=i[0],_=i[1]);var T=!0;(l||f&Wd)&&(c.setDPR(t.dpr),u?c.setContext(null):(c.setContext(t),T=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),T&&c.rebuildPath(t,u?s:1),S&&(t.setLineDash(S),t.lineDashOffset=_),r||(n.strokeFirst?(a&&WV(t,n),o&&VV(t,n)):(o&&VV(t,n),a&&WV(t,n))),S&&t.setLineDash([])}function fZe(t,e,n){var r=e.__image=o3(n.image,e.__image,e,e.onload);if(!(!r||!R_(r))){var i=n.x||0,a=n.y||0,o=e.getWidth(),s=e.getHeight(),u=r.width/r.height;if(o==null&&s!=null?o=s*u:s==null&&o!=null?s=o/u:o==null&&s==null&&(o=r.width,s=r.height),n.sWidth&&n.sHeight){var l=n.sx||0,c=n.sy||0;t.drawImage(r,l,c,n.sWidth,n.sHeight,i,a,o,s)}else if(n.sx&&n.sy){var l=n.sx,c=n.sy,f=o-l,h=s-c;t.drawImage(r,l,c,f,h,i,a,o,s)}else t.drawImage(r,i,a,o,s)}}function hZe(t,e,n){var r,i=n.text;if(i!=null&&(i+=""),i){t.font=n.font||Tc,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var a=void 0,o=void 0;t.setLineDash&&n.lineDash&&(r=W3(e),a=r[0],o=r[1]),a&&(t.setLineDash(a),t.lineDashOffset=o),n.strokeFirst?(vS(n)&&t.strokeText(i,n.x,n.y),gS(n)&&t.fillText(i,n.x,n.y)):(gS(n)&&t.fillText(i,n.x,n.y),vS(n)&&t.strokeText(i,n.x,n.y)),a&&t.setLineDash([])}}var UV=["shadowBlur","shadowOffsetX","shadowOffsetY"],GV=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Sre(t,e,n,r,i){var a=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){ta(t,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(o)?uh.opacity:o}(r||e.blend!==n.blend)&&(a||(ta(t,i),a=!0),t.globalCompositeOperation=e.blend||uh.blend);for(var s=0;s<UV.length;s++){var u=UV[s];(r||e[u]!==n[u])&&(a||(ta(t,i),a=!0),t[u]=t.dpr*(e[u]||0))}return(r||e.shadowColor!==n.shadowColor)&&(a||(ta(t,i),a=!0),t.shadowColor=e.shadowColor||uh.shadowColor),a}function HV(t,e,n,r,i){var a=K0(e,i.inHover),o=r?null:n&&K0(n,i.inHover)||{};if(a===o)return!1;var s=Sre(t,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(ta(t,i),s=!0),BV(a.fill)&&(t.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(ta(t,i),s=!0),BV(a.stroke)&&(t.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(ta(t,i),s=!0),t.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var u=a.lineWidth,l=u/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==l&&(s||(ta(t,i),s=!0),t.lineWidth=l)}for(var c=0;c<GV.length;c++){var f=GV[c],h=f[0];(r||a[h]!==o[h])&&(s||(ta(t,i),s=!0),t[h]=a[h]||f[1])}return s}function dZe(t,e,n,r,i){return Sre(t,K0(e,i.inHover),n&&K0(n,i.inHover),r,i)}function Dre(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function pZe(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i];r=r||a.isZeroArea(),Dre(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}n.allClipped=r}function vZe(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var jV=1,qV=2,XV=3,KV=4;function gZe(t){var e=gS(t),n=vS(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function ta(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function K0(t,e){return e&&t.__hoverStyle||t.style}function U3(t,e){Kf(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Kf(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~Ta,e.__isRendered=!1;return}var a=e.__clipPaths,o=n.prevElClipPaths,s=!1,u=!1;if((!o||sZe(a,o))&&(o&&o.length&&(ta(t,n),t.restore(),u=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),a&&a.length&&(ta(t,n),t.save(),pZe(a,t,n),s=!0),n.prevElClipPaths=a),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var l=n.prevEl;l||(u=s=!0);var c=e instanceof Tt&&e.autoBatch&&gZe(e.style);s||vZe(i,l.transform)?(ta(t,n),Dre(t,e)):c||ta(t,n);var f=K0(e,n.inHover);e instanceof Tt?(n.lastDrawType!==jV&&(u=!0,n.lastDrawType=jV),HV(t,e,l,u,n),(!c||!n.batchFill&&!n.batchStroke)&&t.beginPath(),cZe(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof rS?(n.lastDrawType!==XV&&(u=!0,n.lastDrawType=XV),HV(t,e,l,u,n),hZe(t,e,f)):e instanceof xu?(n.lastDrawType!==qV&&(u=!0,n.lastDrawType=qV),dZe(t,e,l,u,n),fZe(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==KV&&(u=!0,n.lastDrawType=KV),mZe(t,e,n)),c&&r&&ta(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function mZe(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var u=r[o];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Kf(t,u,a,o===s-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),a.prevEl=u}for(var l=0,c=i.length;l<c;l++){var u=i[l];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Kf(t,u,a,l===c-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),a.prevEl=u}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var AA=new KYe,YV=new G1(100),ZV=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function gR(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";t.dirty&&AA.delete(t);var a=AA.get(t);if(a)return a;var o=dt(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return u(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/n,AA.set(t,s),t.dirty=!1,s;function u(l){for(var c=[n],f=!0,h=0;h<ZV.length;++h){var d=o[ZV[h]];if(d!=null&&!Me(d)&&!ze(d)&&!Kt(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=YV.get(p);v&&(i?l.svgElement=v:l.image=v)}var m=Tre(o.dashArrayX),g=yZe(o.dashArrayY),y=_re(o.symbol),x=xZe(m),w=Ere(g),b=!i&&tl.createCanvas(),C=i&&{tag:"g",attrs:{},key:"dcl",children:[]},D=_(),S;b&&(b.width=D.width*n,b.height=D.height*n,S=b.getContext("2d")),T(),f&&YV.put(p,b||C),l.image=b,l.svgElement=C,l.svgWidth=D.width,l.svgHeight=D.height;function _(){for(var E=1,A=0,N=x.length;A<N;++A)E=c6(E,x[A]);for(var R=1,A=0,N=y.length;A<N;++A)R=c6(R,y[A].length);E*=R;var M=w*x.length*y.length;return{width:Math.max(1,Math.min(E,o.maxTileWidth)),height:Math.max(1,Math.min(M,o.maxTileHeight))}}function T(){S&&(S.clearRect(0,0,b.width,b.height),o.backgroundColor&&(S.fillStyle=o.backgroundColor,S.fillRect(0,0,b.width,b.height)));for(var E=0,A=0;A<g.length;++A)E+=g[A];if(E<=0)return;for(var N=-w,R=0,M=0,$=0;N<D.height;){if(R%2===0){for(var L=M/2%y.length,O=0,F=0,V=0;O<D.width*2;){for(var X=0,A=0;A<m[$].length;++A)X+=m[$][A];if(X<=0)break;if(F%2===0){var P=(1-o.symbolSize)*.5,U=O+m[$][F]*P,j=N+g[R]*P,q=m[$][F]*o.symbolSize,Y=g[R]*o.symbolSize,ne=V/2%y[L].length;ue(U,j,q,Y,y[L][ne])}O+=m[$][F],++V,++F,F===m[$].length&&(F=0)}++$,$===m.length&&($=0)}N+=g[R],++M,++R,R===g.length&&(R=0)}function ue(te,oe,ce,pe,me){var _e=i?1:n,Ne=Nc(me,te*_e,oe*_e,ce*_e,pe*_e,o.color,o.symbolKeepAspect);if(i){var ke=r.painter.renderOneToVNode(Ne);ke&&C.children.push(ke)}else U3(S,Ne)}}}}function _re(t){if(!t||t.length===0)return[["rect"]];if(ze(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!ze(t[n])){e=!1;break}if(e)return _re([t]);for(var r=[],n=0;n<t.length;++n)ze(t[n])?r.push([t[n]]):r.push(t[n]);return r}function Tre(t){if(!t||t.length===0)return[[0,0]];if(Kt(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!Kt(t[r])){n=!1;break}if(n)return Tre([t]);for(var i=[],r=0;r<t.length;++r)if(Kt(t[r])){var e=Math.ceil(t[r]);i.push([e,e])}else{var e=$e(t[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function yZe(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(Kt(t)){var e=Math.ceil(t);return[e,e]}var n=$e(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function xZe(t){return $e(t,function(e){return Ere(e)})}function Ere(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function wZe(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var u=r.ensureUniqueItemVisual(o,"style");u.decal=gR(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=gR(i,e)}}})}var bZe=new Ss;const Yo=bZe;var Are={};function CZe(t,e){Are[t]=e}function kre(t){return Are[t]}var SZe="5.4.3",DZe={zrender:"5.4.4"},_Ze=1,TZe=800,EZe=900,AZe=1e3,kZe=2e3,IZe=5e3,Ire=1e3,NZe=1100,G3=2e3,Nre=3e3,RZe=4e3,nT=4500,$Ze=4600,MZe=5e3,OZe=6e3,Rre=7e3,$re={PROCESSOR:{FILTER:AZe,SERIES_FILTER:TZe,STATISTIC:IZe},VISUAL:{LAYOUT:Ire,PROGRESSIVE_LAYOUT:NZe,GLOBAL:G3,CHART:Nre,POST_CHART_LAYOUT:$Ze,COMPONENT:RZe,BRUSH:MZe,CHART_ITEM:nT,ARIA:OZe,DECAL:Rre}},ai="__flagInMainProcess",Xi="__pendingUpdate",kA="__needsUpdateStatus",QV=/^[a-zA-Z0-9_]+$/,IA="__connectUpdateStatus",JV=0,FZe=1,PZe=2;function Mre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return Fre(this,t,e)}}function Ore(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Fre(this,t,e)}}function Fre(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),Ss.prototype[e].apply(t,n)}var Pre=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Ss),Lre=Pre.prototype;Lre.on=Ore("on");Lre.off=Ore("off");var Nd,NA,ww,yl,RA,$A,MA,Pg,Lg,eW,tW,OA,nW,bw,rW,zre,Ja,iW,mS=function(t){Ge(e,t);function e(n,r,i){var a=t.call(this,new zYe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},ze(r)&&(r=Bre[r]),a._dom=n;var o="canvas",s="auto",u=!1,l=a._zr=qN(n,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:yt(i.useDirtyRect,u),useCoarsePointer:yt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=tT(Ht(l.flush,l),17),r=ft(r),r&&Zne(r,!0),a._theme=r,a._locale=zXe(i.locale||Nne),a._coordSysMgr=new Z_;var c=a._api=rW(a);function f(h,d){return h.__prio-d.__prio}return rb(xS,f),rb(mR,f),a._scheduler=new wre(a,c,mR,xS),a._messageCenter=new Pre,a._initEvents(),a.resize=Ht(a.resize,a),l.animation.on("frame",a._onframe,a),eW(l,a),tW(l,a),jC(a),a}return e.prototype._onframe=function(){if(!this._disposed){iW(this);var n=this._scheduler;if(this[Xi]){var r=this[Xi].silent;this[ai]=!0;try{Nd(this),yl.update.call(this,null,this[Xi].updateParams)}catch(u){throw this[ai]=!1,this[Xi]=null,u}this._zr.flush(),this[ai]=!1,this[Xi]=null,Pg.call(this,r),Lg.call(this,r)}else if(n.unfinished){var i=_Ze,a=this._model,o=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(a),n.performDataProcessorTasks(a),$A(this,a),n.performVisualTasks(a),bw(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,i){if(!this[ai]){if(this._disposed){this.id;return}var a,o,s;if(Ke(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[ai]=!0,!this._model||r){var u=new CKe(this._api),l=this._theme,c=this._model=new Xne;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,l,this._locale,u)}this._model.setOption(n,{replaceMerge:o},yR);var f={seriesTransition:s,optionChanged:!0};if(i)this[Xi]={silent:a,updateParams:f},this[ai]=!1,this.getZr().wakeUp();else{try{Nd(this),yl.update.call(this,null,f)}catch(h){throw this[Xi]=null,this[ai]=!1,h}this._ssr||this._zr.flush(),this[Xi]=null,this[ai]=!1,Pg.call(this,a),Lg.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||bt.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(bt.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return W(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,a=[],o=this;W(r,function(u){i.eachComponent({mainType:u},function(l){var c=o._componentsMap[l.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return W(a,function(u){u.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(wS[i]){var u=s,l=s,c=-s,f=-s,h=[],d=n&&n.pixelRatio||this.getDevicePixelRatio();W(ch,function(x,w){if(x.group===i){var b=r?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(ft(n)),C=x.getDom().getBoundingClientRect();u=a(C.left,u),l=a(C.top,l),c=o(C.right,c),f=o(C.bottom,f),h.push({dom:b,left:C.left,top:C.top})}}),u*=d,l*=d,c*=d,f*=d;var p=c-u,v=f-l,m=tl.createCanvas(),g=qN(m,{renderer:r?"svg":"canvas"});if(g.resize({width:p,height:v}),r){var y="";return W(h,function(x){var w=x.left-u,b=x.top-l;y+='<g transform="translate('+w+","+b+')">'+x.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,n.connectedBackgroundColor&&g.painter.setBackgroundColor(n.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return n.connectedBackgroundColor&&g.add(new Pn({shape:{x:0,y:0,width:p,height:v},style:{fill:n.connectedBackgroundColor}})),W(h,function(x){var w=new xu({style:{x:x.left*d-u,y:x.top*d-l,image:x.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return RA(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return RA(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,a,o=Mm(i,n);return W(o,function(s,u){u.indexOf("Models")>=0&&W(s,function(l){var c=l.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(u==="seriesModels"){var f=this._chartsMap[l.__viewId];f&&f.containPoint&&(a=a||f.containPoint(r,l))}},this)},this),!!a},e.prototype.getVisual=function(n,r){var i=this._model,a=Mm(i,n,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),u=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return u!=null?WYe(s,u,r):UYe(s,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;W(LZe,function(r){var i=function(a){var o=n.getModel(),s=a.target,u,l=r==="globalout";if(l?u={}:s&&dm(s,function(p){var v=qt(p);if(v&&v.dataIndex!=null){var m=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return u=m&&m.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return u=De({},v.eventData),!0},!0),u){var c=u.componentType,f=u.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=u.seriesIndex);var h=c&&f!=null&&o.getComponent(c,f),d=h&&n[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];u.event=a,u.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:u,model:h,view:d},n.trigger(r,u)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),W(Vm,function(r,i){n._messageCenter.on(i,function(a){this.trigger(i,a)},n)}),W(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),HYe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&Ete(this.getDom(),j3,"");var r=this,i=r._api,a=r._model;W(r._componentsViews,function(o){o.dispose(a,i)}),W(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete ch[r.id]},e.prototype.resize=function(n){if(!this[ai]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=n&&n.silent;this[Xi]&&(a==null&&(a=this[Xi].silent),i=!0,this[Xi]=null),this[ai]=!0;try{i&&Nd(this),yl.update.call(this,{type:"resize",animation:De({duration:0},n&&n.animation)})}catch(o){throw this[ai]=!1,o}this[ai]=!1,Pg.call(this,a),Lg.call(this,a)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(Ke(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!xR[n]){var i=xR[n](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=De({},n);return r.type=Vm[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(Ke(r)||(r={silent:!!r}),!!yS[n.type]&&this._model){if(this[ai]){this._pendingActions.push(n);return}var i=r.silent;MA.call(this,n,i);var a=r.flush;a?this._zr.flush():a!==!1&&bt.browser.weChat&&this._throttledZrFlush(),Pg.call(this,i),Lg.call(this,i)}},e.prototype.updateLabelLayout=function(){Yo.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Nd=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),NA(f,!0),NA(f,!1),h.plan()},NA=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,y=f._api,x=0;x<v.length;x++)v[x].__alive=!1;h?d.eachComponent(function(C,D){C!=="series"&&w(D)}):d.eachSeries(w);function w(C){var D=C.__requireNewView;C.__requireNewView=!1;var S="_ec_"+C.id+"_"+C.type,_=!D&&m[S];if(!_){var T=qs(C.type),E=h?Ba.getClass(T.main,T.sub):da.getClass(T.sub);_=new E,_.init(d,y),m[S]=_,v.push(_),g.add(_.group)}C.__viewId=_.__id=S,_.__alive=!0,_.__model=C,_.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!h&&p.prepareView(_,C,d,y)}for(var x=0;x<v.length;){var b=v[x];b.__alive?x++:(!h&&b.renderTask.dispose(),g.remove(b.group),b.dispose(d,y),v.splice(x,1),m[b.__id]===b&&delete m[b.__id],b.__id=b.group.__ecComponentInfo=null)}},ww=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){W([].concat(f._componentsViews).concat(f._chartsViews),b);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var y={mainType:p,query:g};v&&(y.subType=v);var x=d.excludeSeriesId,w;x!=null&&(w=st(),W(cr(x),function(C){var D=iu(C,null);D!=null&&w.set(D,!0)})),m&&m.eachComponent(y,function(C){var D=w&&w.get(C.id)!=null;if(!D)if(z6(d))if(C instanceof Ro)d.type===lh&&!d.notBlur&&!C.get(["emphasis","disabled"])&&Aqe(C,d,f._api);else{var S=c3(C.mainType,C.componentIndex,d.name,f._api),_=S.focusSelf,T=S.dispatchers;d.type===lh&&_&&!d.notBlur&&JN(C.mainType,C.componentIndex,f._api),T&&W(T,function(E){d.type===lh?Sv(E):Dv(E)})}else tR(d)&&C instanceof Ro&&(Nqe(C,d,f._api),P6(C),Ja(f))},f),m&&m.eachComponent(y,function(C){var D=w&&w.get(C.id)!=null;D||b(f[p==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},f);function b(C){C&&C.__alive&&C[h]&&C[h](C.__model,m,f._api,d)}},yl={prepareAndUpdate:function(f){Nd(this),yl.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),$A(this,d),m.update(d,p),n(d),g.performVisualTasks(d,f),OA(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",x=d.get("darkMode");v.setBackgroundColor(y),x!=null&&x!=="auto"&&v.setDarkMode(x),Yo.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,y){if(g!=="series"){var x=h.getViewOfComponentModel(y);if(x&&x.__alive)if(x.updateTransform){var w=x.updateTransform(y,d,p,f);w&&w.update&&v.push(x)}else v.push(x)}});var m=st();d.eachSeries(function(g){var y=h._chartsMap[g.__viewId];if(y.updateTransform){var x=y.updateTransform(g,d,p,f);x&&x.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),n(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),bw(this,d,p,f,{},m),Yo.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;h&&(h.setUpdatePayload(f),da.markUpdateMethod(f,"updateView"),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),OA(this,h,this._api,f,{}),Yo.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;d&&(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),da.markUpdateMethod(f,"updateVisual"),n(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),Yo.trigger("afterupdate",d,this._api))},updateLayout:function(f){yl.update.call(this,f)}},RA=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,y=Mm(v,d),x=0;x<m.length;x++){var w=m[x];if(w[h]&&(g=w[h](v,y,p))!=null)return g}},$A=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},MA=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=yS[v],y=g.actionInfo,x=(y.update||"update").split(":"),w=x.pop(),b=x[0]!=null&&qs(x[0]);this[ai]=!0;var C=[f],D=!1;f.batch&&(D=!0,C=$e(f.batch,function(R){return R=dt(De({},R),f),R.batch=null,R}));var S=[],_,T=tR(f),E=z6(f);if(E&&Qte(this._api),W(C,function(R){if(_=g.action(R,d._model,d._api),_=_||De({},R),_.type=y.event||_.type,S.push(_),E){var M=i3(f),$=M.queryOptionMap,L=M.mainTypeSpecified,O=L?$.keys()[0]:"series";ww(d,w,R,O),Ja(d)}else T?(ww(d,w,R,"series"),Ja(d)):b&&ww(d,w,R,b.main,b.sub)}),w!=="none"&&!E&&!T&&!b)try{this[Xi]?(Nd(this),yl.update.call(this,f),this[Xi]=null):yl[w].call(this,f)}catch(R){throw this[ai]=!1,R}if(D?_={type:y.event||v,escapeConnect:m,batch:S}:_=S[0],this[ai]=!1,!h){var A=this._messageCenter;if(A.trigger(_.type,_),T){var N={type:"selectchanged",escapeConnect:m,selected:Rqe(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};A.trigger(N.type,N)}}},Pg=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();MA.call(this,d,f)}},Lg=function(f){!f&&this.trigger("updated")},eW=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[Xi]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},tW=function(f,h){f.on("mouseover",function(d){var p=d.target,v=dm(p,eR);v&&(kqe(v,d,h._api),Ja(h))}).on("mouseout",function(d){var p=d.target,v=dm(p,eR);v&&(Iqe(v,d,h._api),Ja(h))}).on("click",function(d){var p=d.target,v=dm(p,function(y){return qt(y).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=qt(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function r(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,x){var w=x.get("zlevel")||0,b=x.get("z")||0,C=x.getZLevelKey();p=p||!!C,(y==="series"?d:h).push({zlevel:w,z:b,idx:x.componentIndex,type:y,key:C})}),p){var v=h.concat(d),m,g;rb(v,function(y,x){return y.zlevel===x.zlevel?y.z-x.z:y.zlevel-x.zlevel}),W(v,function(y){var x=f.getComponent(y.type,y.idx),w=y.zlevel,b=y.key;m!=null&&(w=Math.max(m,w)),b?(w===m&&b!==g&&w++,g=b):g&&(w===m&&w++,g=""),m=w,x.setZLevel(w)})}}OA=function(f,h,d,p,v){r(h),nW(f,h,d,p,v),W(f._chartsViews,function(m){m.__alive=!1}),bw(f,h,d,p,v),W(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},nW=function(f,h,d,p,v,m){W(m||f._componentsViews,function(g){var y=g.__model;l(y,g),g.render(y,h,d,p),s(y,g),c(y,g)})},bw=function(f,h,d,p,v,m){var g=f._scheduler;v=De(v||{},{updatedSeries:h.getSeries()}),Yo.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(x){var w=f._chartsMap[x.__viewId];w.__alive=!0;var b=w.renderTask;g.updatePayload(b,p),l(x,w),m&&m.get(x.uid)&&b.dirty(),b.perform(g.getPerformArgs(b))&&(y=!0),w.group.silent=!!x.get("silent"),o(x,w),P6(x)}),g.unfinished=y||g.unfinished,Yo.trigger("series:layoutlabels",h,d,v),Yo.trigger("series:transition",h,d,v),h.eachSeries(function(x){var w=f._chartsMap[x.__viewId];s(x,w),c(x,w)}),a(f,h),Yo.trigger("series:afterupdate",h,d,v)},Ja=function(f){f[kA]=!0,f.getZr().wakeUp()},iW=function(f){f[kA]&&(f.getZr().storage.traverse(function(h){Lm(h)||i(h)}),f[kA]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===O_&&f.states.emphasis?h.push("emphasis"):f.hoverState===M_&&f.states.blur&&h.push("blur"),f.useStates(h)}function a(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!bt.node&&!bt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function o(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return u(v,d,p,-1/0),!0})}}function u(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var y=f.childrenRef(),x=0;x<y.length;x++)p=Math.max(u(y[x],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function l(f,h){h.eachRendered(function(d){if(!Lm(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Lm(g))return;if(g instanceof Tt&&Pqe(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=m;var x=g.getTextContent(),w=g.getTextGuideLine();x&&(x.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}rW=function(f){return new(function(h){Ge(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Sv(p,v),Ja(f)},d.prototype.leaveEmphasis=function(p,v){Dv(p,v),Ja(f)},d.prototype.enterBlur=function(p){Eqe(p),Ja(f)},d.prototype.leaveBlur=function(p){Xte(p),Ja(f)},d.prototype.enterSelect=function(p){Kte(p),Ja(f)},d.prototype.leaveSelect=function(p){Yte(p),Ja(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(Kne))(f)},zre=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[IA]=p}}W(Vm,function(d,p){f._messageCenter.on(p,function(v){if(wS[f.group]&&f[IA]!==JV){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];W(ch,function(y){y!==f&&y.group===f.group&&g.push(y)}),h(g,JV),W(g,function(y){y[IA]!==FZe&&y.dispatchAction(m)}),h(g,PZe)}})})}}(),e}(Ss),H3=mS.prototype;H3.on=Mre("on");H3.off=Mre("off");H3.one=function(t,e,n){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(t,i)}this.on.call(this,t,i,n)};var LZe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var yS={},Vm={},mR=[],yR=[],xS=[],Bre={},xR={},ch={},wS={},zZe=+new Date-0,BZe=+new Date-0,j3="_echarts_instance_";function VZe(t,e,n){var r=!(n&&n.ssr);if(r){var i=q3(t);if(i)return i}var a=new mS(t,e,n);return a.id="ec_"+zZe++,ch[a.id]=a,r&&Ete(t,j3,a.id),zre(a),Yo.trigger("afterinit",a),a}function WZe(t){if(Me(t)){var e=t;t=null,W(e,function(n){n.group!=null&&(t=n.group)}),t=t||"g_"+BZe++,W(e,function(n){n.group=t})}return wS[t]=!0,t}function Vre(t){wS[t]=!1}var UZe=Vre;function GZe(t){ze(t)?t=ch[t]:t instanceof mS||(t=q3(t)),t instanceof mS&&!t.isDisposed()&&t.dispose()}function q3(t){return ch[gje(t,j3)]}function HZe(t){return ch[t]}function X3(t,e){Bre[t]=e}function K3(t){At(yR,t)<0&&yR.push(t)}function Y3(t,e){Z3(mR,t,e,kZe)}function Wre(t){rT("afterinit",t)}function Ure(t){rT("afterupdate",t)}function rT(t,e){Yo.on(t,e)}function _s(t,e,n){ot(e)&&(n=e,e="");var r=Ke(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!Vm[e]&&(za(QV.test(r)&&QV.test(e)),yS[r]||(yS[r]={action:n,actionInfo:t}),Vm[e]=r)}function Gre(t,e){Z_.register(t,e)}function jZe(t){var e=Z_.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function Hre(t,e){Z3(xS,t,e,Ire,"layout")}function Kc(t,e){Z3(xS,t,e,Nre,"visual")}var aW=[];function Z3(t,e,n,r,i){if((ot(e)||Ke(e))&&(n=e,e=r),!(At(aW,n)>=0)){aW.push(n);var a=wre.wrapStageHandler(n,i);a.__prio=e,a.__raw=n,t.push(a)}}function Q3(t,e){xR[t]=e}function qZe(t){Aee({createCanvas:t})}function jre(t,e,n){var r=kre("registerMap");r&&r(t,e,n)}function XZe(t){var e=kre("getMap");return e&&e(t)}var qre=XKe;Kc(G3,SYe);Kc(nT,DYe);Kc(nT,_Ye);Kc(G3,BYe);Kc(nT,VYe);Kc(Rre,wZe);K3(Zne);Y3(EZe,IKe);Q3("default",TYe);_s({type:lh,event:lh,update:lh},qr);_s({type:cb,event:cb,update:cb},qr);_s({type:Om,event:Om,update:Om},qr);_s({type:fb,event:fb,update:fb},qr);_s({type:Fm,event:Fm,update:Fm},qr);X3("light",PYe);X3("dark",LYe);var KZe={};function zg(t){return t==null?0:t.length||1}function oW(t){return t}var YZe=function(){function t(e,n,r,i,a,o){this._old=e,this._new=n,this._oldKeyGetter=r||oW,this._newKeyGetter=i||oW,this.context=a,this._diffModeMultiple=o==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},i=new Array(e.length),a=new Array(n.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],u=r[s],l=zg(u);if(l>1){var c=u.shift();u.length===1&&(r[s]=u[0]),this._update&&this._update(c,o)}else l===1?(r[s]=null,this._update&&this._update(u,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(n,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var u=a[s],l=r[u],c=i[u],f=zg(l),h=zg(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,l),i[u]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,l),i[u]=null;else if(f===1&&h===1)this._update&&this._update(c,l),i[u]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,l),i[u]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(l[d]);else this._remove&&this._remove(l)}this._performRestAdd(o,i)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=n[i],o=zg(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);n[i]=null}},t.prototype._initIndexMap=function(e,n,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!n){var u=n[s],l=zg(u);l===0?(n[s]=o,a&&r.push(s)):l===1?n[s]=[u,o]:u.push(o)}}},t}();const Y0=YZe;var ZZe=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function QZe(t,e){var n={},r=n.encode={},i=st(),a=[],o=[],s={};W(t.dimensions,function(h){var d=t.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;FA(r,p)[v]=h,d.isExtraCoord||(i.set(p,1),eQe(d.type)&&(a[0]=h),FA(s,p)[v]=t.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(h)}Wne.each(function(m,g){var y=FA(r,g),x=d.otherDims[g];x!=null&&x!==!1&&(y[x]=d.name)})});var u=[],l={};i.each(function(h,d){var p=r[d];l[d]=p[0],u=u.concat(p)}),n.dataDimsOnCoord=u,n.dataDimIndicesOnCoord=$e(u,function(h){return t.getDimensionInfo(h).storeDimIndex}),n.encodeFirstDimNotExtra=l;var c=r.label;c&&c.length&&(a=c.slice());var f=r.tooltip;return f&&f.length?o=f.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,n.userOutput=new ZZe(s,e),n}function FA(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function JZe(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function eQe(t){return!(t==="ordinal"||t==="time")}var tQe=function(){function t(e){this.otherDims={},e!=null&&De(this,e)}return t}();const gb=tQe;var nQe=Gn(),rQe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Xre=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Zre(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return yt(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=Jne(this.source),r=!Qre(e),i="",a=[],o=0,s=0;o<e;o++){var u=void 0,l=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===o)u=n?f.name:null,l=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(u=n?h.name:null,l=h.type)}a.push({property:u,type:l,ordinalMeta:c}),n&&u!=null&&(!f||!f.isCalculationCoord)&&(i+=r?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),i+="$",i+=rQe[l]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:p}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===n)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(n);o&&(i=o.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Kre(t){return t instanceof Xre}function Yre(t){for(var e=st(),n=0;n<(t||[]).length;n++){var r=t[n],i=Ke(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,n)}return e}function Zre(t){var e=nQe(t);return e.dimNameMap||(e.dimNameMap=Yre(t.dimensionsDefine))}function Qre(t){return t>30}var Bg=Ke,xl=$e,iQe=typeof Int32Array>"u"?Array:Int32Array,aQe="e\0\0",sW=-1,oQe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],sQe=["_approximateExtent"],uW,Cw,Vg,Wg,PA,Sw,LA,uQe=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;Kre(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},u=!1,l={},c=0;c<r.length;c++){var f=r[c],h=ze(f)?new gb({name:f}):f instanceof gb?f:new gb(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),a[d]=h,l[d]!=null&&(u=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(u),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=st();W(o,function(m){v.set(a[m].storeDimIndex,m)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(Kt(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var i=this,a;if(e instanceof sR&&(a=e),!a){var o=this.dimensions,s=O3(e)||zi(e)?new ere(e,o.length):e;a=new sR;var u=xl(o,function(l){return{type:i._dimInfos[l].type,property:l}});a.initData(s,u,r)}this._store=a,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=QZe(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<a;s++){var u=s-i;this._nameList[s]=n[u],o&&LA(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==dc&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,u=s===Bo;if(u&&!i.pure)for(var l=[],c=e;c<n;c++){var f=i.getItem(c,l);if(!this.hasItemOption&&rje(f)&&(this.hasItemOption=!0),f){var h=f.name;a[c]==null&&h!=null&&(a[c]=iu(h,null));var d=f.id;o[c]==null&&d!=null&&(o[c]=iu(d,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<n;c++)LA(this,c);uW(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){Bg(e)?De(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=Vg(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},t.prototype.getId=function(e){return Cw(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,i=this._store;return Me(e)?i.getValues(xl(e,function(a){return r._getStoreDimIndex(a)}),n):i.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],i=r[n];return i==null||isNaN(i)?sW:i},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){ot(e)&&(r=n,n=e,e=[]);var i=r||this,a=xl(Wg(e),this._getStoreDimIndex,this);this._store.each(a,i?Ht(n,i):n)},t.prototype.filterSelf=function(e,n,r){ot(e)&&(r=n,n=e,e=[]);var i=r||this,a=xl(Wg(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Ht(n,i):n),this},t.prototype.selectRange=function(e){var n=this,r={},i=Mt(e);return W(i,function(a){var o=n._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){ot(e)&&(r=n,n=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(n&&n.apply(this,arguments))},r),i},t.prototype.map=function(e,n,r,i){var a=r||i||this,o=xl(Wg(e),this._getStoreDimIndex,this),s=Sw(this);return s._store=this._store.map(o,a?Ht(n,a):n),s},t.prototype.modify=function(e,n,r,i){var a=r||i||this,o=xl(Wg(e),this._getStoreDimIndex,this);this._store.modify(o,a?Ht(n,a):n)},t.prototype.downSample=function(e,n,r,i){var a=Sw(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),n,r,i),a},t.prototype.lttbDownSample=function(e,n){var r=Sw(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new sr(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new Y0(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Cw(e,r)},function(r){return Cw(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},Bg(e)?De(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],i=r&&r[n];return i??this.getVisual(n)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[n];return a==null&&(a=this.getVisual(n),Me(a)?a=a.slice():Bg(a)&&(a=De({},a)),i[n]=a),a},t.prototype.setItemVisual=function(e,n,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Bg(n)?De(i,n):i[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){Bg(e)?De(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?De(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;mqe(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){W(this._graphicEls,function(r,i){r&&e&&e.call(n,r,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:xl(this.dimensions,this._getDimInfo,this),this.hostModel)),PA(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];ot(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(D_(arguments)))})},t.internalField=function(){uW=function(e){var n=e._invertedIndicesMap;W(n,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=n[i]=new iQe(o.categories.length);for(var u=0;u<r.length;u++)r[u]=sW;for(var u=0;u<s.count();u++)r[s.get(a.storeDimIndex,u)]=u}})},Vg=function(e,n,r){return iu(e._getCategory(n,r),null)},Cw=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=Vg(e,e._idDimIdx,n)),r==null&&(r=aQe+n),r},Wg=function(e){return Me(e)||(e=e!=null?[e]:[]),e},Sw=function(e){var n=new t(e._schema?e._schema:xl(e.dimensions,e._getDimInfo,e),e.hostModel);return PA(n,e),n},PA=function(e,n){W(oQe.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,W(sQe,function(r){e[r]=ft(n[r])}),e._calculationInfo=De({},n._calculationInfo)},LA=function(e,n){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[n],u=i[n];if(s==null&&a!=null&&(r[n]=s=Vg(e,a,n)),u==null&&o!=null&&(i[n]=u=Vg(e,o,n)),u==null&&s!=null){var l=e._nameRepeatCount,c=l[s]=(l[s]||0)+1;u=s,c>1&&(u+="__ec__"+c),i[n]=u}}}(),t}();const J3=uQe;function lQe(t,e){return eL(t,e).dimensions}function eL(t,e){O3(t)||(t=F3(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],i=st(),a=[],o=fQe(t,n,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&Qre(o),u=r===t.dimensionsDefine,l=u?Zre(t):Yre(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,o));for(var f=st(c),h=new are(o),d=0;d<h.length;d++)h[d]=-1;function p(_){var T=h[_];if(T<0){var E=r[_],A=Ke(E)?E:{name:E},N=new gb,R=A.name;R!=null&&l.get(R)!=null&&(N.name=N.displayName=R),A.type!=null&&(N.type=A.type),A.displayName!=null&&(N.displayName=A.displayName);var M=a.length;return h[_]=M,N.storeDimIndex=_,a.push(N),N}return a[T]}if(!s)for(var d=0;d<o;d++)p(d);f.each(function(_,T){var E=cr(_).slice();if(E.length===1&&!ze(E[0])&&E[0]<0){f.set(T,!1);return}var A=f.set(T,[]);W(E,function(N,R){var M=ze(N)?l.get(N):N;M!=null&&M<o&&(A[R]=M,m(p(M),T,R))})});var v=0;W(n,function(_){var T,E,A,N;if(ze(_))T=_,N={};else{N=_,T=N.name;var R=N.ordinalMeta;N.ordinalMeta=null,N=De({},N),N.ordinalMeta=R,E=N.dimsDef,A=N.otherDims,N.name=N.coordDim=N.coordDimIndex=N.dimsDef=N.otherDims=null}var M=f.get(T);if(M!==!1){if(M=cr(M),!M.length)for(var $=0;$<(E&&E.length||1);$++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&M.push(v++)}W(M,function(L,O){var F=p(L);if(u&&N.type!=null&&(F.type=N.type),m(dt(F,N),T,O),F.name==null&&E){var V=E[O];!Ke(V)&&(V={name:V}),F.name=F.displayName=V.name,F.defaultTooltip=V.defaultTooltip}A&&dt(F.otherDims,A)})}});function m(_,T,E){Wne.get(T)!=null?_.otherDims[T]=E:(_.coordDim=T,_.coordDimIndex=E,i.set(T,!0))}var g=e.generateCoord,y=e.generateCoordCount,x=y!=null;y=g?y||1:0;var w=g||"value";function b(_){_.name==null&&(_.name=_.coordDim)}if(s)W(a,function(_){b(_)}),a.sort(function(_,T){return _.storeDimIndex-T.storeDimIndex});else for(var C=0;C<o;C++){var D=p(C),S=D.coordDim;S==null&&(D.coordDim=hQe(w,i,x),D.coordDimIndex=0,(!g||y<=0)&&(D.isExtraCoord=!0),y--),b(D),D.type==null&&(Hne(t,C)===Vr.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return cQe(a),new Xre({source:t,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function cQe(t){for(var e=st(),n=0;n<t.length;n++){var r=t[n],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function fQe(t,e,n,r){var i=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return W(e,function(a){var o;Ke(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function hQe(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var dQe=function(){function t(e){this.coordSysDims=[],this.axisMap=st(),this.categoryAxisMap=st(),this.coordSysName=e}return t}();function pQe(t){var e=t.get("coordinateSystem"),n=new dQe(e),r=vQe[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var vQe={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis",$i).models[0],a=t.getReferringComponents("yAxis",$i).models[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),Rd(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Rd(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis",$i).models[0];e.coordSysDims=["single"],n.set("single",i),Rd(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar",$i).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Rd(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),Rd(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,a=i.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();W(a.parallelAxisIndex,function(s,u){var l=i.getComponent("parallelAxis",s),c=o[u];n.set(c,l),Rd(l)&&(r.set(c,l),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=u))})}};function Rd(t){return t.get("type")==="category"}function Jre(t,e,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,a,o,s;gQe(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var u=!!(t&&t.get("stack")),l,c,f,h;if(W(a,function(y,x){ze(y)&&(a[x]=y={name:y}),u&&!y.isExtraCoord&&(!r&&!l&&y.ordinalMeta&&(l=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!r&&!l&&(r=!0),c){f="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,l&&(l.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;W(a,function(y){y.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(h,p),g.storeDimIndex=s.ensureCalculationDimension(f,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(a.push(m),a.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:f}}function gQe(t){return!Kre(t.schema)}function Wh(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function eie(t,e){return Wh(t,e)?t.getCalculationInfo("stackResultDimension"):e}function mQe(t,e){var n=t.get("coordinateSystem"),r=Z_.get(n),i;return e&&e.coordSysDims&&(i=$e(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var u=s.get("type");o.type=JZe(u)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function yQe(t,e,n){var r,i;return n&&W(t,function(a,o){var s=a.coordDim,u=n.categoryAxisMap.get(s);u&&(r==null&&(r=o),a.ordinalMeta=u.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(t[r].otherDims.itemName=0),r}function ex(t,e,n){n=n||{};var r=e.getSourceManager(),i,a=!1;t?(a=!0,i=F3(t)):(i=r.getSource(),a=i.sourceFormat===Bo);var o=pQe(e),s=mQe(e,o),u=n.useEncodeDefaulter,l=ot(u)?u:u?Ot(nKe,s,e):null,c={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!a},f=eL(i,c),h=yQe(f.dimensions,n.createInvertedIndices,o),d=a?null:r.getSharedDataStore(f),p=Jre(e,{schema:f,store:d}),v=new J3(f,e);v.setCalculationInfo(p);var m=h!=null&&xQe(i)?function(g,y,x,w){return w===h?x:this.defaultDimValueGetter(g,y,x,w)}:null;return v.hasItemOption=!1,v.initData(a?i:d,null,m),v}function xQe(t){if(t.sourceFormat===Bo){var e=wQe(t.data||[]);return!Me(H1(e))}}function wQe(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}var tie=function(){function t(e){this._setting=e||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(e){return this._setting[e]},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1])},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(e,n){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(n)||(r[1]=n)},t.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(e){this._isBlank=e},t}();N_(tie);const fl=tie;var bQe=0,CQe=function(){function t(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++bQe}return t.createByAxisModel=function(e){var n=e.option,r=n.data,i=r&&$e(r,SQe);return new t({categories:i,needCollect:!i,deduplication:n.dedplication!==!1})},t.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},t.prototype.parseAndCollect=function(e){var n,r=this._needCollect;if(!ze(e)&&!r)return e;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=e,n;var i=this._getOrCreateMap();return n=i.get(e),n==null&&(r?(n=this.categories.length,this.categories[n]=e,i.set(e,n)):n=NaN),n},t.prototype._getOrCreateMap=function(){return this._map||(this._map=st(this.categories))},t}();function SQe(t){return Ke(t)&&t.value!=null?t.value:t+""}const wR=CQe;function bR(t){return t.type==="interval"||t.type==="log"}function DQe(t,e,n,r){var i={},a=t[1]-t[0],o=i.interval=n3(a/e,!0);n!=null&&o<n&&(o=i.interval=n),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=nie(o),u=i.niceTickExtent=[Yn(Math.ceil(t[0]/o)*o,s),Yn(Math.floor(t[1]/o)*o,s)];return _Qe(u,t),i}function zA(t){var e=Math.pow(10,I_(t)),n=t/e;return n?n===2?n=3:n===3?n=5:n*=2:n=1,Yn(n*e)}function nie(t){return js(t)+2}function lW(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function _Qe(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),lW(t,0,e),lW(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function iT(t,e){return t>=e[0]&&t<=e[1]}function aT(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function oT(t,e){return t*(e[1]-e[0])+e[0]}var rie=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new wR({})),Me(i)&&(i=new wR({categories:$e(i,function(a){return Ke(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(n){return n==null?NaN:ze(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},e.prototype.contain=function(n){return n=this.parse(n),iT(n,this._extent)&&this._ordinalMeta.categories[n]!=null},e.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),aT(n,this._extent)},e.prototype.scale=function(n){return n=Math.round(oT(n,this._extent)),this.getRawOrdinalNumber(n)},e.prototype.getTicks=function(){for(var n=[],r=this._extent,i=r[0];i<=r[1];)n.push({value:i}),i++;return n},e.prototype.getMinorTicks=function(n){},e.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,u=Math.min(s,r.length);o<u;++o){var l=r[o];i[o]=l,a[l]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},e.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(fl);fl.registerClass(rie);const iie=rie;var wf=Yn,aie=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return iT(n,this._extent)},e.prototype.normalize=function(n){return aT(n,this._extent)},e.prototype.scale=function(n){return oT(n,this._extent)},e.prototype.setExtent=function(n,r){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=nie(n)},e.prototype.getTicks=function(n){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var u=1e4;i[0]<a[0]&&(n?s.push({value:wf(a[0]-r,o)}):s.push({value:i[0]}));for(var l=a[0];l<=a[1]&&(s.push({value:l}),l=wf(l+r,o),l!==s[s.length-1].value);)if(s.length>u)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(n?s.push({value:wf(c+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],u=r[o-1],l=0,c=[],f=s.value-u.value,h=f/n;l<n-1;){var d=wf(u.value+(l+1)*h);d>a[0]&&d<a[1]&&c.push(d),l++}i.push(c)}return i},e.prototype.getLabel=function(n,r){if(n==null)return"";var i=r&&r.precision;i==null?i=js(n.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=wf(n.value,i,!0);return k3(a)},e.prototype.calcNiceTicks=function(n,r,i){n=n||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=DQe(a,n,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);n.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var o=this._interval;n.fixMin||(r[0]=wf(Math.floor(r[0]/o)*o)),n.fixMax||(r[1]=wf(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},e.type="interval",e}(fl);fl.registerClass(aie);const tx=aie;var oie=typeof Float32Array<"u",TQe=oie?Float32Array:Array;function zu(t){return Me(t)?oie?new Float32Array(t):t:new TQe(t)}var EQe="__ec_stack_";function tL(t){return t.get("stack")||EQe+t.seriesIndex}function nL(t){return t.dim+t.index}function sie(t,e){var n=[];return e.eachSeriesByType(t,function(r){lie(r)&&n.push(r)}),n}function AQe(t){var e={};W(t,function(u){var l=u.coordinateSystem,c=l.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=u.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);e[h]?e[h].push(g):e[h]=[g]}});var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(u,l){return u-l});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}n[r]=a}}return n}function uie(t){var e=AQe(t),n=[];return W(t,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var u=a.dim+"_"+a.index,l=e[u],c=Math.abs(o[1]-o[0]),f=a.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=l?c/h*l:c}else{var d=r.getData();s=Math.abs(o[1]-o[0])/d.count()}var p=bn(r.get("barWidth"),s),v=bn(r.get("barMaxWidth"),s),m=bn(r.get("barMinWidth")||(cie(r)?.5:1),s),g=r.get("barGap"),y=r.get("barCategoryGap");n.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:nL(a),stackId:tL(r)})}),kQe(n)}function kQe(t){var e={};W(t,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},u=s.stacks;e[a]=s;var l=r.stackId;u[l]||s.autoWidthCount++,u[l]=u[l]||{width:0,maxWidth:0};var c=r.barWidth;c&&!u[l].width&&(u[l].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=r.barMaxWidth;f&&(u[l].maxWidth=f);var h=r.barMinWidth;h&&(u[l].minWidth=h);var d=r.barGap;d!=null&&(s.gap=d);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var n={};return W(e,function(r,i){n[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var u=Mt(a).length;s=Math.max(35-u*4,15)+"%"}var l=bn(s,o),c=bn(r.gap,1),f=r.remainedWidth,h=r.autoWidthCount,d=(f-l)/(h+(h-1)*c);d=Math.max(d,0),W(a,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var w=g.width;y&&(w=Math.min(w,y)),x&&(w=Math.max(w,x)),g.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),x&&x>w&&(w=x),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-l)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;W(a,function(g,y){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;W(a,function(g,y){n[i][y]=n[i][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+c)})}),n}function IQe(t,e,n){if(t&&e){var r=t[nL(e)];return r!=null&&n!=null?r[tL(n)]:r}}function NQe(t,e){var n=sie(t,e),r=uie(n);W(n,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),u=tL(i),l=r[nL(s)][u],c=l.offset,f=l.width;a.setLayout({bandWidth:l.bandWidth,offset:c,size:f})})}function RQe(t){return{seriesType:t,plan:B3(),reset:function(e){if(lie(e)){var n=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=n.getDimensionIndex(n.mapDimension(a.dim)),s=n.getDimensionIndex(n.mapDimension(i.dim)),u=e.get("showBackground",!0),l=n.mapDimension(a.dim),c=n.getCalculationInfo("stackResultDimension"),f=Wh(n,l)&&!!n.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),d=$Qe(i,a),p=cie(e),v=e.get("barMinHeight")||0,m=c&&n.getDimensionIndex(c),g=n.getLayout("size"),y=n.getLayout("offset");return{progress:function(x,w){for(var b=x.count,C=p&&zu(b*3),D=p&&u&&zu(b*3),S=p&&zu(b),_=r.master.getRect(),T=h?_.width:_.height,E,A=w.getStore(),N=0;(E=x.next())!=null;){var R=A.get(f?m:o,E),M=A.get(s,E),$=d,L=void 0;f&&(L=+R-A.get(o,E));var O=void 0,F=void 0,V=void 0,X=void 0;if(h){var P=r.dataToPoint([R,M]);if(f){var U=r.dataToPoint([L,M]);$=U[0]}O=$,F=P[1]+y,V=P[0]-$,X=g,Math.abs(V)<v&&(V=(V<0?-1:1)*v)}else{var P=r.dataToPoint([M,R]);if(f){var U=r.dataToPoint([M,L]);$=U[1]}O=P[0]+y,F=$,V=g,X=P[1]-$,Math.abs(X)<v&&(X=(X<=0?-1:1)*v)}p?(C[N]=O,C[N+1]=F,C[N+2]=h?V:X,D&&(D[N]=h?_.x:O,D[N+1]=h?F:_.y,D[N+2]=T),S[E]=E):w.setItemLayout(E,{x:O,y:F,width:V,height:X}),N+=3}p&&w.setLayout({largePoints:C,largeDataIndices:S,largeBackgroundPoints:D,valueAxisHorizontal:h})}}}}}}function lie(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function cie(t){return t.pipelineContext&&t.pipelineContext.large}function $Qe(t,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var MQe=function(t,e,n,r){for(;n<r;){var i=n+r>>>1;t[i][1]<e?n=i+1:r=i}return n},fie=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="time",r}return e.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return Q1(n.value,nV[UXe(Fp(this._minLevelUnit))]||nV.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(n,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return GXe(n,r,i,o,a)},e.prototype.getTicks=function(){var n=this._interval,r=this._extent,i=[];if(!n)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=VQe(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=fo,r[1]+=fo),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-fo}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},e.prototype.calcNiceTicks=function(n,r,i){n=n||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Dw.length,u=Math.min(MQe(Dw,this._approxInterval,0,s),s-1);this._interval=Dw[u][1],this._minLevelUnit=Dw[Math.max(u-1,0)][0]},e.prototype.parse=function(n){return Kt(n)?n:+Io(n)},e.prototype.contain=function(n){return iT(this.parse(n),this._extent)},e.prototype.normalize=function(n){return aT(this.parse(n),this._extent)},e.prototype.scale=function(n){return oT(n,this._extent)},e.type="time",e}(tx),Dw=[["second",T3],["minute",E3],["hour",zm],["quarter-day",zm*6],["half-day",zm*12],["day",fo*1.2],["half-week",fo*3.5],["week",fo*7],["month",fo*31],["quarter",fo*95],["half-year",tV/2],["year",tV]];function OQe(t,e,n,r){var i=Io(e),a=Io(n),o=function(p){return rV(i,p,r)===rV(a,p,r)},s=function(){return o("year")},u=function(){return s()&&o("month")},l=function(){return u()&&o("day")},c=function(){return l()&&o("hour")},f=function(){return c()&&o("minute")},h=function(){return f()&&o("second")},d=function(){return h()&&o("millisecond")};switch(t){case"year":return s();case"month":return u();case"day":return l();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function FQe(t,e){return t/=fo,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function PQe(t){var e=30*fo;return t/=e,t>6?6:t>3?3:t>2?2:1}function LQe(t){return t/=zm,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function cW(t,e){return t/=e?E3:T3,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function zQe(t){return n3(t,!0)}function BQe(t,e,n){var r=new Date(t);switch(Fp(e)){case"year":case"month":r[Mne(n)](0);case"day":r[One(n)](1);case"hour":r[Fne(n)](0);case"minute":r[Pne(n)](0);case"second":r[Lne(n)](0),r[zne(n)](0)}return r.getTime()}function VQe(t,e,n,r){var i=1e4,a=Rne,o=0;function s(T,E,A,N,R,M,$){for(var L=new Date(E),O=E,F=L[N]();O<A&&O<=r[1];)$.push({value:O}),F+=T,L[R](F),O=L.getTime();$.push({value:O,notAdd:!0})}function u(T,E,A){var N=[],R=!E.length;if(!OQe(Fp(T),r[0],r[1],n)){R&&(E=[{value:BQe(new Date(r[0]),T,n)},{value:r[1]}]);for(var M=0;M<E.length-1;M++){var $=E[M].value,L=E[M+1].value;if($!==L){var O=void 0,F=void 0,V=void 0,X=!1;switch(T){case"year":O=Math.max(1,Math.round(e/fo/365)),F=A3(n),V=HXe(n);break;case"half-year":case"quarter":case"month":O=PQe(e),F=Pp(n),V=Mne(n);break;case"week":case"half-week":case"day":O=FQe(e),F=j_(n),V=One(n),X=!0;break;case"half-day":case"quarter-day":case"hour":O=LQe(e),F=G0(n),V=Fne(n);break;case"minute":O=cW(e,!0),F=q_(n),V=Pne(n);break;case"second":O=cW(e,!1),F=X_(n),V=Lne(n);break;case"millisecond":O=zQe(e),F=K_(n),V=zne(n);break}s(O,$,L,F,V,X,N),T==="year"&&A.length>1&&M===0&&A.unshift({value:A[0].value-O})}}for(var M=0;M<N.length;M++)A.push(N[M]);return N}}for(var l=[],c=[],f=0,h=0,d=0;d<a.length&&o++<i;++d){var p=Fp(a[d]);if(WXe(a[d])){u(a[d],l[l.length-1]||[],c);var v=a[d+1]?Fp(a[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(T,E){return T.value-E.value});for(var m=[],g=0;g<c.length;++g){var y=c[g].value;(g===0||c[g-1].value!==y)&&(m.push(c[g]),y>=r[0]&&y<=r[1]&&f++)}var x=(r[1]-r[0])/e;if(f>x*1.5&&h>x/1.5||(l.push(m),f>x||t===a[d]))break}c=[]}}}for(var w=$n($e(l,function(T){return $n(T,function(E){return E.value>=r[0]&&E.value<=r[1]&&!E.notAdd})}),function(T){return T.length>0}),b=[],C=w.length-1,d=0;d<w.length;++d)for(var D=w[d],S=0;S<D.length;++S)b.push({value:D[S].value,level:C-d});b.sort(function(T,E){return T.value-E.value});for(var _=[],d=0;d<b.length;++d)(d===0||b[d].value!==b[d-1].value)&&_.push(b[d]);return _}fl.registerClass(fie);const WQe=fie;var fW=fl.prototype,Wm=tx.prototype,UQe=Yn,GQe=Math.floor,HQe=Math.ceil,_w=Math.pow,Ho=Math.log,rL=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new tx,n._interval=0,n}return e.prototype.getTicks=function(n){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=Wm.getTicks.call(this,n);return $e(o,function(s){var u=s.value,l=Yn(_w(this.base,u));return l=u===i[0]&&this._fixMin?Tw(l,a[0]):l,l=u===i[1]&&this._fixMax?Tw(l,a[1]):l,{value:l}},this)},e.prototype.setExtent=function(n,r){var i=Ho(this.base);n=Ho(Math.max(0,n))/i,r=Ho(Math.max(0,r))/i,Wm.setExtent.call(this,n,r)},e.prototype.getExtent=function(){var n=this.base,r=fW.getExtent.call(this);r[0]=_w(n,r[0]),r[1]=_w(n,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=Tw(r[0],a[0])),this._fixMax&&(r[1]=Tw(r[1],a[1])),r},e.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=Ho(n[0])/Ho(r),n[1]=Ho(n[1])/Ho(r),fW.unionExtent.call(this,n)},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=wte(i),o=n/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[Yn(HQe(r[0]/a)*a),Yn(GQe(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(n){Wm.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return n=Ho(n)/Ho(this.base),iT(n,this._extent)},e.prototype.normalize=function(n){return n=Ho(n)/Ho(this.base),aT(n,this._extent)},e.prototype.scale=function(n){return n=oT(n,this._extent),_w(this.base,n)},e.type="log",e}(fl),hie=rL.prototype;hie.getMinorTicks=Wm.getMinorTicks;hie.getLabel=Wm.getLabel;function Tw(t,e){return UQe(t,js(e))}fl.registerClass(rL);const jQe=rL;var qQe=function(){function t(e,n,r){this._prepareParams(e,n,r)}return t.prototype._prepareParams=function(e,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var a=this._modelMinRaw=n.get("min",!0);ot(a)?this._modelMinNum=Ew(e,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=Ew(e,a));var o=this._modelMaxRaw=n.get("max",!0);if(ot(o)?this._modelMaxNum=Ew(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=Ew(e,o)),i)this._axisDataLen=n.getCategories().length;else{var s=n.get("boundaryGap"),u=Me(s)?s:[s||0,s||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Ac(u[0],1),Ac(u[1],1)]}},t.prototype.calculate=function(){var e=this._isOrdinal,n=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-n||Math.abs(n),s=this._modelMinRaw==="dataMin"?n:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,l=s!=null,c=u!=null;s==null&&(s=e?i?0:NaN:n-a[0]*o),u==null&&(u=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(u==null||!isFinite(u))&&(u=NaN);var f=R0(s)||R0(u)||e&&!i;this._needCrossZero&&(s>0&&u>0&&!l&&(s=0),s<0&&u<0&&!c&&(u=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,l=!0),d!=null&&(u=d,c=!0),{min:s,max:u,minFixed:l,maxFixed:c,isBlank:f}},t.prototype.modifyDataMinMax=function(e,n){this[KQe[e]]=n},t.prototype.setDeterminedMinMax=function(e,n){var r=XQe[e];this[r]=n},t.prototype.freeze=function(){this.frozen=!0},t}(),XQe={min:"_determinedMin",max:"_determinedMax"},KQe={min:"_dataMin",max:"_dataMax"};function die(t,e,n){var r=t.rawExtentInfo;return r||(r=new qQe(t,e,n),t.rawExtentInfo=r,r)}function Ew(t,e){return e==null?null:R0(e)?NaN:t.parse(e)}function pie(t,e){var n=t.type,r=die(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&n==="time"){var s=sie("bar",o),u=!1;if(W(s,function(f){u=u||f.getBaseAxis()===e.axis}),u){var l=uie(s),c=YQe(i,a,e,l);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function YQe(t,e,n,r){var i=n.axis.getExtent(),a=i[1]-i[0],o=IQe(r,n.axis);if(o===void 0)return{min:t,max:e};var s=1/0;W(o,function(d){s=Math.min(d.offset,s)});var u=-1/0;W(o,function(d){u=Math.max(d.offset+d.width,u)}),s=Math.abs(s),u=Math.abs(u);var l=s+u,c=e-t,f=1-(s+u)/a,h=c/f-c;return e+=h*(u/l),t-=h*(s/l),{min:t,max:e}}function CR(t,e){var n=e,r=pie(t,n),i=r.extent,a=n.get("splitNumber");t instanceof jQe&&(t.base=n.get("logBase"));var o=t.type,s=n.get("interval"),u=o==="interval"||o==="time";t.setExtent(i[0],i[1]),t.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:u?n.get("minInterval"):null,maxInterval:u?n.get("maxInterval"):null}),s!=null&&t.setInterval&&t.setInterval(s)}function vie(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new iie({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new WQe({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(fl.getClass(e)||tx)}}function ZQe(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function nx(t){var e=t.getLabelModel().get("formatter"),n=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(r){return function(i,a){return t.scale.getFormattedLabel(i,a,r)}}(e):ze(e)?function(r){return function(i){var a=t.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):ot(e)?function(r){return function(i,a){return n!=null&&(a=i.value-n),r(iL(t,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return t.scale.getLabel(r)}}function iL(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function QQe(t){var e=t.model,n=t.scale;if(!(!e.get(["axisLabel","show"])||n.isBlank())){var r,i,a=n.getExtent();n instanceof iie?i=n.count():(r=n.getTicks(),i=r.length);var o=t.getLabelModel(),s=nx(t),u,l=1;i>40&&(l=Math.ceil(i/40));for(var c=0;c<i;c+=l){var f=r?r[c]:{value:a[0]+c},h=s(f,c),d=o.getTextRect(h),p=JQe(d,o.get("rotate")||0);u?u.union(p):u=p}return u}}function JQe(t,e){var n=e*Math.PI/180,r=t.width,i=t.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),o=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n)),s=new _t(t.x,t.y,a,o);return s}function aL(t){var e=t.get("interval");return e??"auto"}function gie(t){return t.type==="category"&&aL(t.getLabelModel())===0}function mie(t,e){var n={};return W(t.mapDimensionsAll(e),function(r){n[eie(t,r)]=!0}),Mt(n)}function eJe(t,e,n){e&&W(mie(e,n),function(r){var i=e.getApproximateExtent(r);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])})}var yie=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},t.prototype.getCoordSysModel=function(){},t}();function tJe(t){return ex(null,t)}var nJe={isDimensionStacked:Wh,enableDataStack:Jre,getStackedDimension:eie};function rJe(t,e){var n=e;e instanceof sr||(n=new sr(e));var r=vie(n);return r.setExtent(t[0],t[1]),CR(r,n),r}function iJe(t){Lo(t,yie)}function aJe(t,e){return e=e||{},Bh(t,null,null,e.state!=="normal")}const oJe=Object.freeze(Object.defineProperty({__proto__:null,createDimensions:lQe,createList:tJe,createScale:rJe,createSymbol:Nc,createTextStyle:aJe,dataStack:nJe,enableHoverEmphasis:aS,getECData:qt,getLayoutRect:Ic,mixinAxisModelCommonMethods:iJe},Symbol.toStringTag,{value:"Module"}));var hW=[],sJe={registerPreprocessor:K3,registerProcessor:Y3,registerPostInit:Wre,registerPostUpdate:Ure,registerUpdateLifecycle:rT,registerAction:_s,registerCoordinateSystem:Gre,registerLayout:Hre,registerVisual:Kc,registerTransform:qre,registerLoading:Q3,registerMap:jre,registerImpl:CZe,PRIORITY:$re,ComponentModel:Qt,ComponentView:Ba,SeriesModel:Ro,ChartView:da,registerComponentModel:function(t){Qt.registerClass(t)},registerComponentView:function(t){Ba.registerClass(t)},registerSeriesModel:function(t){Ro.registerClass(t)},registerChartView:function(t){da.registerClass(t)},registerSubTypeDefaulter:function(t,e){Qt.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){vte(t,e)}};function ws(t){if(Me(t)){W(t,function(e){ws(e)});return}At(hW,t)>=0||(hW.push(t),ot(t)&&(t={install:t}),t.install(sJe))}var uJe=1e-8;function dW(t,e){return Math.abs(t-e)<uJe}function pW(t,e,n){var r=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var o=t[a];r+=ku(i[0],i[1],o[0],o[1],e,n),i=o}var s=t[0];return(!dW(i[0],s[0])||!dW(i[1],s[1]))&&(r+=ku(i[0],i[1],s[0],s[1],e,n)),r!==0}var lJe=[];function BA(t,e){for(var n=0;n<t.length;n++)Fi(t[n],t[n],e)}function vW(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Wl(e,e,a),Ul(n,n,a))}}function cJe(t){for(var e=0,n=0,r=0,i=t.length,a=t[i-1][0],o=t[i-1][1],s=0;s<i;s++){var u=t[s][0],l=t[s][1],c=a*l-u*o;e+=c,n+=(a+u)*c,r+=(o+l)*c,a=u,o=l}return e?[n/e/3,r/e/3,e]:[t[0][0]||0,t[0][1]||0]}var xie=function(){function t(e){this.name=e}return t.prototype.setCenter=function(e){this._center=e},t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},t}(),gW=function(){function t(e,n){this.type="polygon",this.exterior=e,this.interiors=n}return t}(),mW=function(){function t(e){this.type="linestring",this.points=e}return t}(),fJe=function(t){Ge(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var n=this.geometries,r,i=0,a=0;a<n.length;a++){var o=n[a],s=o.exterior,u=s&&s.length;u>i&&(r=o,i=u)}if(r)return cJe(r.exterior);var l=this.getBoundingRect();return[l.x+l.width/2,l.y+l.height/2]},e.prototype.getBoundingRect=function(n){var r=this._rect;if(r&&!n)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return W(o,function(s){s.type==="polygon"?vW(s.exterior,i,a,n):W(s.points,function(u){vW(u,i,a,n)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new _t(i[0],i[1],a[0]-i[0],a[1]-i[1]),n||(this._rect=r),r},e.prototype.contain=function(n){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(n[0],n[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var u=s.exterior,l=s.interiors;if(pW(u,n[0],n[1])){for(var c=0;c<(l?l.length:0);c++)if(pW(l[c],n[0],n[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var u=new _t(n,r,i,a),l=o.calculateTransform(u),c=this.geometries,f=0;f<c.length;f++){var h=c[f];h.type==="polygon"?(BA(h.exterior,l),W(h.interiors,function(d){BA(d,l)})):W(h.points,function(d){BA(d,l)})}o=this._rect,o.copy(u),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(n){n==null&&(n=this.name);var r=new e(n,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(xie);(function(t){Ge(e,t);function e(n,r){var i=t.call(this,n)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,r=n.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=W1(lJe),o=n;o&&!o.isGeoSVGGraphicRoot;)fc(a,o.getLocalTransform(),a),o=o.parent;return U1(a,a),Fi(i,i,a),i},e})(xie);function hJe(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;n==null&&(n=1024);var r=e.features;return W(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=wie(s,o,n);break;case"Polygon":VA(s,o,n);break;case"MultiLineString":VA(s,o,n);break;case"MultiPolygon":W(s,function(u,l){return VA(u,o[l],n)})}}),e.UTF8Encoding=!1,e}function VA(t,e,n){for(var r=0;r<t.length;r++)t[r]=wie(t[r],e[r],n)}function wie(t,e,n){for(var r=[],i=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,u=t.charCodeAt(o+1)-64;s=s>>1^-(s&1),u=u>>1^-(u&1),s+=i,u+=a,i=s,a=u,r.push([s/n,u/n])}return r}function yW(t,e){return t=hJe(t),$e($n(t.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var r=n.properties,i=n.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new gW(o[0],o.slice(1)));break;case"MultiPolygon":W(i.coordinates,function(u){u[0]&&a.push(new gW(u[0],u.slice(1)))});break;case"LineString":a.push(new mW([i.coordinates]));break;case"MultiLineString":a.push(new mW(i.coordinates))}var s=new fJe(r[e||"name"],a,r.cp);return s.properties=r,s})}const dJe=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER:JHe,asc:mte,getPercentWithPrecision:ZHe,getPixelPrecision:e3,getPrecision:js,getPrecisionSafe:yte,isNumeric:bte,isRadianAroundZero:P0,linearMap:Mu,nice:n3,numericToNumber:L0,parseDate:Io,quantile:tje,quantity:wte,quantityExponent:I_,reformIntervals:nje,remRadian:t3,round:Yn},Symbol.toStringTag,{value:"Module"})),pJe=Object.freeze(Object.defineProperty({__proto__:null,format:Q1,parse:Io},Symbol.toStringTag,{value:"Module"})),vJe=Object.freeze(Object.defineProperty({__proto__:null,Arc:L_,BezierCurve:p3,BoundingRect:_t,Circle:P_,CompoundPath:v3,Ellipse:h3,Group:Qn,Image:xu,IncrementalDisplayable:mne,Line:kc,LinearGradient:g3,Polygon:q1,Polyline:ng,RadialGradient:gne,Rect:Pn,Ring:d3,Sector:du,Text:$r,clipPointsByRect:C3,clipRectByRect:Tne,createIcon:X1,extendPath:wne,extendShape:xne,getShapeClass:bne,getTransform:V_,initProps:ha,makeImage:x3,makePath:B_,mergePath:Sne,registerShape:zo,resizePath:w3,updateProps:bi},Symbol.toStringTag,{value:"Module"})),gJe=Object.freeze(Object.defineProperty({__proto__:null,addCommas:k3,capitalFirst:XXe,encodeHTML:Yi,formatTime:qXe,formatTpl:N3,getTextRect:jXe,getTooltipMarker:Bne,normalizeCssArray:J1,toCamelCase:I3,truncateText:Ite},Symbol.toStringTag,{value:"Module"})),mJe=Object.freeze(Object.defineProperty({__proto__:null,bind:Ht,clone:ft,curry:Ot,defaults:dt,each:W,extend:De,filter:$n,indexOf:At,inherits:WP,isArray:Me,isFunction:ot,isObject:Ke,isString:ze,map:$e,merge:vt,reduce:fu},Symbol.toStringTag,{value:"Module"}));var Z0=Gn();function yJe(t){return t.type==="category"?wJe(t):CJe(t)}function xJe(t,e){return t.type==="category"?bJe(t,e):{ticks:$e(t.scale.getTicks(),function(n){return n.value})}}function wJe(t){var e=t.getLabelModel(),n=bie(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function bie(t,e){var n=Cie(t,"labels"),r=aL(e),i=Sie(n,r);if(i)return i;var a,o;return ot(r)?a=Tie(t,r):(o=r==="auto"?SJe(t):r,a=_ie(t,o)),Die(n,r,{labels:a,labelCategoryInterval:o})}function bJe(t,e){var n=Cie(t,"ticks"),r=aL(e),i=Sie(n,r);if(i)return i;var a,o;if((!e.get("show")||t.scale.isBlank())&&(a=[]),ot(r))a=Tie(t,r,!0);else if(r==="auto"){var s=bie(t,t.getLabelModel());o=s.labelCategoryInterval,a=$e(s.labels,function(u){return u.tickValue})}else o=r,a=_ie(t,o,!0);return Die(n,r,{ticks:a,tickCategoryInterval:o})}function CJe(t){var e=t.scale.getTicks(),n=nx(t);return{labels:$e(e,function(r,i){return{level:r.level,formattedLabel:n(r,i),rawLabel:t.scale.getLabel(r),tickValue:r.value}})}}function Cie(t,e){return Z0(t)[e]||(Z0(t)[e]=[])}function Sie(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Die(t,e,n){return t.push({key:e,value:n}),n}function SJe(t){var e=Z0(t).autoInterval;return e??(Z0(t).autoInterval=t.calculateCategoryInterval())}function DJe(t){var e=_Je(t),n=nx(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=a[0],l=t.dataToCoord(u+1)-t.dataToCoord(u),c=Math.abs(l*Math.cos(r)),f=Math.abs(l*Math.sin(r)),h=0,d=0;u<=a[1];u+=s){var p=0,v=0,m=A_(n({value:u}),e.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,y=d/f;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(g,y))),w=Z0(t.model),b=t.getExtent(),C=w.lastAutoInterval,D=w.lastTickCount;return C!=null&&D!=null&&Math.abs(C-x)<=1&&Math.abs(D-o)<=1&&C>x&&w.axisExtent0===b[0]&&w.axisExtent1===b[1]?x=C:(w.lastTickCount=o,w.lastAutoInterval=x,w.axisExtent0=b[0],w.axisExtent1=b[1]),x}function _Je(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function _ie(t,e,n){var r=nx(t),i=t.scale,a=i.getExtent(),o=t.getLabelModel(),s=[],u=Math.max((e||0)+1,1),l=a[0],c=i.count();l!==0&&u>1&&c/u>2&&(l=Math.round(Math.ceil(l/u)*u));var f=gie(t),h=o.get("showMinLabel")||f,d=o.get("showMaxLabel")||f;h&&l!==a[0]&&v(a[0]);for(var p=l;p<=a[1];p+=u)v(p);d&&p-u!==a[1]&&v(a[1]);function v(m){var g={value:m};s.push(n?m:{formattedLabel:r(g),rawLabel:i.getLabel(g),tickValue:m})}return s}function Tie(t,e,n){var r=t.scale,i=nx(t),a=[];return W(r.getTicks(),function(o){var s=r.getLabel(o),u=o.value;e(o.value,s)&&a.push(n?u:{formattedLabel:i(o),rawLabel:s,tickValue:u})}),a}var xW=[0,1],TJe=function(){function t(e,n,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=n,this._extent=r||[0,0]}return t.prototype.contain=function(e){var n=this._extent,r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return e>=r&&e<=i},t.prototype.containData=function(e){return this.scale.contain(e)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(e){return e3(e||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(e,n){var r=this._extent;r[0]=e,r[1]=n},t.prototype.dataToCoord=function(e,n){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),wW(r,i.count())),Mu(e,xW,r,n)},t.prototype.coordToData=function(e,n){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),wW(r,i.count()));var a=Mu(e,r,xW,n);return this.scale.scale(a)},t.prototype.pointToData=function(e,n){},t.prototype.getTicksCoords=function(e){e=e||{};var n=e.tickModel||this.getTickModel(),r=xJe(this,n),i=r.ticks,a=$e(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=n.get("alignWithLabel");return EJe(this,a,o,e.clamp),a},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),n=e.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),i=$e(r,function(a){return $e(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},t.prototype.getViewLabels=function(){return yJe(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var e=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},t.prototype.calculateCategoryInterval=function(){return DJe(this)},t}();function wW(t,e){var n=t[1]-t[0],r=e,i=n/r/2;t[0]+=i,t[1]-=i}function EJe(t,e,n,r){var i=e.length;if(!t.onBand||n||!i)return;var a=t.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1]};else{var u=e[i-1].tickValue-e[0].tickValue,l=(e[i-1].coord-e[0].coord)/u;W(e,function(d){d.coord-=l/2});var c=t.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+l*s},e.push(o)}var f=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(d,p){return d=Yn(d),p=Yn(p),f?d>p:d<p}}const Eie=TJe;function AJe(t){var e=Qt.extend(t);return Qt.registerClass(e),e}function kJe(t){var e=Ba.extend(t);return Ba.registerClass(e),e}function IJe(t){var e=Ro.extend(t);return Ro.registerClass(e),e}function NJe(t){var e=da.extend(t);return da.registerClass(e),e}hu.CMD;function Aie(t,e,n,r,i,a,o,s){var u=i-t,l=a-e,c=n-t,f=r-e,h=Math.sqrt(c*c+f*f);c/=h,f/=h;var d=u*c+l*f,p=d/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var v=o[0]=t+p*c,m=o[1]=e+p*f;return Math.sqrt((v-i)*(v-i)+(m-a)*(m-a))}var ql=new Je,In=new Je,Wr=new Je,Xl=new Je,Us=new Je,bS=[],ki=new Je;function RJe(t,e){if(e<=180&&e>0){e=e/180*Math.PI,ql.fromArray(t[0]),In.fromArray(t[1]),Wr.fromArray(t[2]),Je.sub(Xl,ql,In),Je.sub(Us,Wr,In);var n=Xl.len(),r=Us.len();if(!(n<.001||r<.001)){Xl.scale(1/n),Us.scale(1/r);var i=Xl.dot(Us),a=Math.cos(e);if(a<i){var o=Aie(In.x,In.y,Wr.x,Wr.y,ql.x,ql.y,bS,!1);ki.fromArray(bS),ki.scaleAndAdd(Us,o/Math.tan(Math.PI-e));var s=Wr.x!==In.x?(ki.x-In.x)/(Wr.x-In.x):(ki.y-In.y)/(Wr.y-In.y);if(isNaN(s))return;s<0?Je.copy(ki,In):s>1&&Je.copy(ki,Wr),ki.toArray(t[1])}}}}function $Je(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,ql.fromArray(t[0]),In.fromArray(t[1]),Wr.fromArray(t[2]),Je.sub(Xl,In,ql),Je.sub(Us,Wr,In);var r=Xl.len(),i=Us.len();if(!(r<.001||i<.001)){Xl.scale(1/r),Us.scale(1/i);var a=Xl.dot(e),o=Math.cos(n);if(a<o){var s=Aie(In.x,In.y,Wr.x,Wr.y,ql.x,ql.y,bS,!1);ki.fromArray(bS);var u=Math.PI/2,l=Math.acos(Us.dot(e)),c=u+l-n;if(c>=u)Je.copy(ki,Wr);else{ki.scaleAndAdd(Us,s/Math.tan(Math.PI/2-c));var f=Wr.x!==In.x?(ki.x-In.x)/(Wr.x-In.x):(ki.y-In.y)/(Wr.y-In.y);if(isNaN(f))return;f<0?Je.copy(ki,In):f>1&&Je.copy(ki,Wr)}ki.toArray(t[1])}}}}function bW(t,e,n,r){var i=n==="normal",a=i?t:t.ensureState(n);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?t.useStyle(s):a.style=s}function MJe(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=XC(r[0],r[1]),a=XC(r[1],r[2]);if(!i||!a){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=Rm([],r[1],r[0],o/i),u=Rm([],r[1],r[2],o/a),l=Rm([],s,u,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],l[0],l[1]),t.bezierCurveTo(u[0],u[1],u[0],u[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function OJe(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,u=0;u<iS.length;u++){var l=iS[u],c=e[l],f=l==="normal";if(c){var h=c.get("show"),d=f?s:yt(i.states[l]&&i.states[l].ignore,s);if(d||!yt(h,o)){var p=f?r:r&&r.states[l];p&&(p.ignore=!0);continue}r||(r=new ng,t.setTextGuideLine(r),!f&&(s||!o)&&bW(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),bW(r,!1,l,c)}}if(r){dt(r.style,n),r.style.fill=null;var v=a.get("showAbove"),m=t.textGuideLineConfig=t.textGuideLineConfig||{};m.showAbove=v||!1,r.buildPath=MJe}}function FJe(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<No.length;r++){var i=No[r];n[i]=t.getModel([i,e])}return n}function PJe(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,u=i.style.margin||0,l=o.clone();l.applyTransform(a),l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u;var c=s?new sS(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:l,localRect:o,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function LJe(t,e,n,r,i,a){var o=t.length;if(o<2)return;t.sort(function(S,_){return S.rect[e]-_.rect[e]});for(var s=0,u,l=!1,c=0,f=0;f<o;f++){var h=t[f],d=h.rect;u=d[e]-s,u<0&&(d[e]-=u,h.label[e]-=u,l=!0);var p=Math.max(-u,0);c+=p,s=d[e]+d[n]}c>0&&a&&b(-c/o,0,o);var v=t[0],m=t[o-1],g,y;x(),g<0&&C(-g,.8),y<0&&C(y,.8),x(),w(g,y,1),w(y,g,-1),x(),g<0&&D(-g),y<0&&D(y);function x(){g=v.rect[e]-r,y=i-m.rect[e]-m.rect[n]}function w(S,_,T){if(S<0){var E=Math.min(_,-S);if(E>0){b(E*T,0,o);var A=E+S;A<0&&C(-A*T,1)}else C(-S*T,1)}}function b(S,_,T){S!==0&&(l=!0);for(var E=_;E<T;E++){var A=t[E],N=A.rect;N[e]+=S,A.label[e]+=S}}function C(S,_){for(var T=[],E=0,A=1;A<o;A++){var N=t[A-1].rect,R=Math.max(t[A].rect[e]-N[e]-N[n],0);T.push(R),E+=R}if(E){var M=Math.min(Math.abs(S)/E,_);if(S>0)for(var A=0;A<o-1;A++){var $=T[A]*M;b($,0,A+1)}else for(var A=o-1;A>0;A--){var $=T[A-1]*M;b(-$,A,o)}}}function D(S){var _=S<0?-1:1;S=Math.abs(S);for(var T=Math.ceil(S/(o-1)),E=0;E<o-1;E++)if(_>0?b(T,0,E+1):b(-T,o-E-1,o),S-=T,S<=0)return}return l}function zJe(t,e,n,r){return LJe(t,"y","height",e,n,r)}function BJe(t){var e=[];t.sort(function(v,m){return m.priority-v.priority});var n=new _t(0,0,0,0);function r(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<t.length;i++){var a=t[i],o=a.axisAligned,s=a.localRect,u=a.transform,l=a.label,c=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=a.obb,h=!1,d=0;d<e.length;d++){var p=e[d];if(n.intersect(p.rect)){if(o&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new sS(p.localRect,p.transform)),f||(f=new sS(s,u)),f.intersect(p.obb)){h=!0;break}}}h?(r(l),c&&r(c)):(l.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}const VJe=Object.freeze(Object.defineProperty({__proto__:null,Axis:Eie,ChartView:da,ComponentModel:Qt,ComponentView:Ba,List:J3,Model:sr,PRIORITY:$re,SeriesModel:Ro,color:cHe,connect:WZe,dataTool:KZe,dependencies:DZe,disConnect:UZe,disconnect:Vre,dispose:GZe,env:bt,extendChartView:NJe,extendComponentModel:AJe,extendComponentView:kJe,extendSeriesModel:IJe,format:gJe,getCoordinateSystemDimensions:jZe,getInstanceByDom:q3,getInstanceById:HZe,getMap:XZe,graphic:vJe,helper:oJe,init:VZe,innerDrawElementOnCanvas:U3,matrix:R7e,number:dJe,parseGeoJSON:yW,parseGeoJson:yW,registerAction:_s,registerCoordinateSystem:Gre,registerLayout:Hre,registerLoading:Q3,registerLocale:_3,registerMap:jre,registerPostInit:Wre,registerPostUpdate:Ure,registerPreprocessor:K3,registerProcessor:Y3,registerTheme:X3,registerTransform:qre,registerUpdateLifecycle:rT,registerVisual:Kc,setCanvasCreator:qZe,setPlatformAPI:Aee,throttle:tT,time:pJe,use:ws,util:mJe,vector:v7e,version:SZe,zrUtil:a7e,zrender:KHe},Symbol.toStringTag,{value:"Module"}));var WJe=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Qt);const UJe=WJe;var SR=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",$i).models[0]},e.type="cartesian2dAxis",e}(Qt);Lo(SR,yie);var kie={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},GJe=vt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},kie),oL=vt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},kie),HJe=vt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},oL),jJe=dt({logBase:10},oL);const qJe={category:GJe,value:oL,time:HJe,log:jJe};var XJe={value:1,category:1,time:1,log:1};function CW(t,e,n,r){W(XJe,function(i,a){var o=vt(vt({},qJe[a],!0),r,!0),s=function(u){Ge(l,u);function l(){var c=u!==null&&u.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return l.prototype.mergeDefaultAndTheme=function(c,f){var h=H0(this),d=h?Y_(c):{},p=f.getTheme();vt(c,p.get(a+"Axis")),vt(c,this.getDefaultOption()),c.type=SW(c),h&&_v(c,d,h)},l.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=wR.createByAxisModel(this))},l.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},l.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},l.type=e+"Axis."+a,l.defaultOption=o,l}(n);t.registerComponentModel(s)}),t.registerSubTypeDefaulter(e+"Axis",SW)}function SW(t){return t.type||(t.data?"category":"value")}var KJe=function(){function t(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return t.prototype.getAxis=function(e){return this._axes[e]},t.prototype.getAxes=function(){return $e(this._dimList,function(e){return this._axes[e]},this)},t.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),$n(this.getAxes(),function(n){return n.scale.type===e})},t.prototype.addAxis=function(e){var n=e.dim;this._axes[n]=e,this._dimList.push(n)},t}();const YJe=KJe;var DR=["x","y"];function DW(t){return t.type==="interval"||t.type==="time"}var ZJe=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=DR,n}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!DW(n)||!DW(r))){var i=n.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),u=i[1]-i[0],l=a[1]-a[0];if(!(!u||!l)){var c=(s[0]-o[0])/u,f=(s[1]-o[1])/l,h=o[0]-i[0]*c,d=o[1]-a[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=U1([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(n){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},e.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},e.prototype.containZone=function(n,r){var i=this.dataToPoint(n),a=this.dataToPoint(r),o=this.getArea(),s=new _t(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(n,r,i){i=i||[];var a=n[0],o=n[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Fi(i,n,this._transform);var s=this.getAxis("x"),u=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=u.toGlobalCoord(u.dataToCoord(o,r)),i},e.prototype.clampData=function(n,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),u=i.parse(n[0]),l=a.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(n,r){var i=[];if(this._invTransform)return Fi(i,n,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(n[0]),r),i[1]=o.coordToData(o.toLocalCoord(n[1]),r),i},e.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},e.prototype.getArea=function(){var n=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),i=Math.min(n[0],n[1]),a=Math.min(r[0],r[1]),o=Math.max(n[0],n[1])-i,s=Math.max(r[0],r[1])-a;return new _t(i,a,o,s)},e}(YJe),QJe=function(t){Ge(e,t);function e(n,r,i,a,o){var s=t.call(this,n,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},e}(Eie);const JJe=QJe;function _R(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,u=o?"onZero":s,l=i.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,p=l==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[l==="y"?p[h[u]]:f[0],l==="x"?p[h[u]]:f[3]],a.rotation=Math.PI/2*(l==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?p[h[s]]-p[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Cv(n.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var g=e.get(["axisLabel","rotate"]);return a.labelRotate=u==="top"?-g:g,a.z2=1,a}function _W(t){return t.get("coordinateSystem")==="cartesian2d"}function TW(t){var e={xAxisModel:null,yAxisModel:null};return W(e,function(n,r){var i=r.replace(/Model$/,""),a=t.getReferringComponents(i,$i).models[0];e[r]=a}),e}var WA=Math.log;function eet(t,e,n){var r=tx.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),o=i.length-1,s=r.getInterval.call(n),u=pie(t,e),l=u.extent,c=u.fixMin,f=u.fixMax;if(t.type==="log"){var h=WA(t.base);l=[WA(l[0])/h,WA(l[1])/h]}t.setExtent(l[0],l[1]),t.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var d=r.getExtent.call(t);c&&(l[0]=d[0]),f&&(l[1]=d[1]);var p=r.getInterval.call(t),v=l[0],m=l[1];if(c&&f)p=(m-v)/o;else if(c)for(m=l[0]+p*o;m<l[1]&&isFinite(m)&&isFinite(l[1]);)p=zA(p),m=l[0]+p*o;else if(f)for(v=l[1]-p*o;v>l[0]&&isFinite(v)&&isFinite(l[0]);)p=zA(p),v=l[1]-p*o;else{var g=t.getTicks().length-1;g>o&&(p=zA(p));var y=p*o;m=Math.ceil(l[1]/p)*p,v=Yn(m-y),v<0&&l[0]>=0?(v=0,m=Yn(y)):m>0&&l[1]<=0&&(m=0,v=-Yn(y))}var x=(i[0].value-a[0].value)/s,w=(i[o].value-a[o].value)/s;r.setExtent.call(t,v+p*x,m+p*w),r.setInterval.call(t,p),(x||w)&&r.setNiceExtent.call(t,v+p,m-p)}var tet=function(){function t(e,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=DR,this._initCartesian(e,n,r),this.model=e}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(e,n){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,u=Mt(o),l=u.length;if(l){for(var c=[],f=l-1;f>=0;f--){var h=+u[f],d=o[h],p=d.model,v=d.scale;bR(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(CR(v,p),bR(v)&&(s=d))}c.length&&(s||(s=c.pop(),CR(s.scale,s.model)),W(c,function(m){eet(m.scale,m.model,s.scale)}))}}i(r.x),i(r.y);var a={};W(r.x,function(o){EW(r,"y",o,a)}),W(r.y,function(o){EW(r,"x",o,a)}),this.resize(this.model,n)},t.prototype.resize=function(e,n,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=Ic(i,{width:n.getWidth(),height:n.getHeight()});this._rect=o;var s=this._axesList;u(),a&&(W(s,function(l){if(!l.model.get(["axisLabel","inside"])){var c=QQe(l);if(c){var f=l.isHorizontal()?"height":"width",h=l.model.get(["axisLabel","margin"]);o[f]-=c[f]+h,l.position==="top"?o.y+=c.height+h:l.position==="left"&&(o.x+=c.width+h)}}}),u()),W(this._coordsList,function(l){l.calcAffineTransform()});function u(){W(s,function(l){var c=l.isHorizontal(),f=c?[0,o.width]:[0,o.height],h=l.inverse?1:0;l.setExtent(f[h],f[1-h]),net(l,c?o.x:o.y)})}},t.prototype.getAxis=function(e,n){var r=this._axesMap[e];if(r!=null)return r[n||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(e,n){if(e!=null&&n!=null){var r="x"+e+"y"+n;return this._coordsMap[r]}Ke(e)&&(n=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===n)return a[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},t.prototype.convertFromPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},t.prototype._findConvertTarget=function(e){var n=e.seriesModel,r=e.xAxisModel||n&&n.getReferringComponents("xAxis",$i).models[0],i=e.yAxisModel||n&&n.getReferringComponents("yAxis",$i).models[0],a=e.gridModel,o=this._coordsList,s,u;if(n)s=n.coordinateSystem,At(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)u=this.getAxis("x",r.componentIndex);else if(i)u=this.getAxis("y",i.componentIndex);else if(a){var l=a.coordinateSystem;l===this&&(s=this._coordsList[0])}return{cartesian:s,axis:u}},t.prototype.containPoint=function(e){var n=this._coordsList[0];if(n)return n.containPoint(e)},t.prototype._initCartesian=function(e,n,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},u={x:0,y:0};if(n.eachComponent("xAxis",l("x"),this),n.eachComponent("yAxis",l("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,W(s.x,function(c,f){W(s.y,function(h,d){var p="x"+f+"y"+d,v=new ZJe(p);v.master=i,v.model=e,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function l(c){return function(f,h){if(UA(f,e)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var p=new JJe(c,vie(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=a,p.index=h,a._axesList.push(p),s[c][h]=p,u[c]++}}}},t.prototype._updateScale=function(e,n){W(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(_W(i)){var a=TW(i),o=a.xAxisModel,s=a.yAxisModel;if(!UA(o,n)||!UA(s,n))return;var u=this.getCartesian(o.componentIndex,s.componentIndex),l=i.getData(),c=u.getAxis("x"),f=u.getAxis("y");r(l,c),r(l,f)}},this);function r(i,a){W(mie(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},t.prototype.getTooltipAxes=function(e){var n=[],r=[];return W(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);At(n,a)<0&&n.push(a),At(r,o)<0&&r.push(o)}),{baseAxes:n,otherAxes:r}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(i,a){var o=new t(i,e,n);o.name="grid_"+a,o.resize(i,n,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(_W(i)){var a=TW(i),o=a.xAxisModel,s=a.yAxisModel,u=o.getCoordSysModel(),l=u.coordinateSystem;i.coordinateSystem=l.getCartesian(o.componentIndex,s.componentIndex)}}),r},t.dimensions=DR,t}();function UA(t,e){return t.getCoordSysModel()===e}function EW(t,e,n,r){n.getAxesOnZeroOf=function(){return a?[a]:[]};var i=t[e],a,o=n.model,s=o.get(["axisLine","onZero"]),u=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(u!=null)AW(i[u])&&(a=i[u]);else for(var l in i)if(i.hasOwnProperty(l)&&AW(i[l])&&!r[c(i[l])]){a=i[l];break}a&&(r[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function AW(t){return t&&t.type!=="category"&&t.type!=="time"&&ZQe(t)}function net(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord=t.dim==="x"?function(i){return i+e}:function(i){return r-i+e},t.toLocalCoord=t.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}const ret=tet;var Kl=Math.PI,fh=function(){function t(e,n){this.group=new Qn,this.opt=n,this.axisModel=e,dt(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Qn({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!kW[e]},t.prototype.add=function(e){kW[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var i=t3(n-e),a,o;return P0(i)?(o=r>0?"top":"bottom",a="center"):P0(i-Kl)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Kl?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),kW={axisLine:function(t,e,n,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],u=[a[1],0],l=s[0]>u[0];o&&(Fi(s,s,o),Fi(u,u,o));var c=De({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new kc({shape:{x1:s[0],y1:s[1],x2:u[0],y2:u[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});W0(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);ze(h)&&(h=[h,h]),(ze(d)||Kt(d))&&(d=[d,d]);var p=Cre(e.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];W([{rotate:t.rotation+Math.PI/2,offset:p[0],r:0},{rotate:t.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-u[0])*(s[0]-u[0])+(s[1]-u[1])*(s[1]-u[1]))}],function(g,y){if(h[y]!=="none"&&h[y]!=null){var x=Nc(h[y],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,b=l?u:s;x.attr({rotation:g.rotate,x:b[0]+w*Math.cos(t.rotation),y:b[1]-w*Math.sin(t.rotation),silent:!0,z2:11}),n.add(x)}})}}},axisTickLabel:function(t,e,n,r){var i=oet(n,r,e,t),a=uet(n,r,e,t);if(aet(e,a,i),set(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=PJe($e(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));BJe(o)}},axisName:function(t,e,n,r){var i=Cv(t.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=t.nameDirection,s=e.getModel("nameTextStyle"),u=e.get("nameGap")||0,l=e.axis.getExtent(),c=l[0]>l[1]?-1:1,f=[a==="start"?l[0]-c*u:a==="end"?l[1]+c*u:(l[0]+l[1])/2,NW(a)?t.labelOffset+o*u:0],h,d=e.get("nameRotate");d!=null&&(d=d*Kl/180);var p;NW(a)?h=fh.innerTextLayout(t.rotation,d??t.rotation,o):(h=iet(t.rotation,a,d||0,l),p=t.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),m=e.get("nameTruncate",!0)||{},g=m.ellipsis,y=Cv(t.nameTruncateMaxWidth,m.maxWidth,p),x=new $r({x:f[0],y:f[1],rotation:h.rotation,silent:fh.isLabelSilent(e),style:Bh(s,{text:i,font:v,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(W_({el:x,componentModel:e,itemName:i}),x.__fullText=i,x.anid="name",e.get("triggerEvent")){var w=fh.makeAxisEventDataBase(e);w.targetType="axisName",w.name=i,qt(x).eventData=w}r.add(x),x.updateTransform(),n.add(x),x.decomposeTransform()}}};function iet(t,e,n,r){var i=t3(n-t),a,o,s=r[0]>r[1],u=e==="start"&&!s||e!=="start"&&s;return P0(i-Kl/2)?(o=u?"bottom":"top",a="center"):P0(i-Kl*1.5)?(o=u?"top":"bottom",a="center"):(o="middle",i<Kl*1.5&&i>Kl/2?a=u?"left":"right":a=u?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function aet(t,e,n){if(!gie(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var a=e[0],o=e[1],s=e[e.length-1],u=e[e.length-2],l=n[0],c=n[1],f=n[n.length-1],h=n[n.length-2];r===!1?(eo(a),eo(l)):IW(a,o)&&(r?(eo(o),eo(c)):(eo(a),eo(l))),i===!1?(eo(s),eo(f)):IW(u,s)&&(i?(eo(u),eo(h)):(eo(s),eo(f)))}}function eo(t){t&&(t.ignore=!0)}function IW(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var i=W1([]);return __(i,i,-t.rotation),n.applyTransform(fc([],i,t.getLocalTransform())),r.applyTransform(fc([],i,e.getLocalTransform())),n.intersect(r)}}function NW(t){return t==="middle"||t==="center"}function Iie(t,e,n,r,i){for(var a=[],o=[],s=[],u=0;u<t.length;u++){var l=t[u].coord;o[0]=l,o[1]=0,s[0]=l,s[1]=n,e&&(Fi(o,o,e),Fi(s,s,e));var c=new kc({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});W0(c.shape,c.style.lineWidth),c.anid=i+"_"+t[u].tickValue,a.push(c)}return a}function oet(t,e,n,r){var i=n.axis,a=n.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),u=r.tickDirection*a.get("length"),l=i.getTicksCoords(),c=Iie(l,e.transform,u,dt(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function set(t,e,n,r){var i=n.axis,a=n.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),u=r*a.get("length"),l=dt(s.getLineStyle(),dt(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var f=Iie(o[c],e.transform,u,l,"minorticks_"+c),h=0;h<f.length;h++)t.add(f[h])}}function uet(t,e,n,r){var i=n.axis,a=Cv(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=n.getModel("axisLabel"),s=o.get("margin"),u=i.getViewLabels(),l=(Cv(r.labelRotate,o.get("rotate"))||0)*Kl/180,c=fh.innerTextLayout(r.rotation,l,r.labelDirection),f=n.getCategories&&n.getCategories(!0),h=[],d=fh.isLabelSilent(n),p=n.get("triggerEvent");return W(u,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,x=v.rawLabel,w=o;if(f&&f[g]){var b=f[g];Ke(b)&&b.textStyle&&(w=new sr(b.textStyle,o,n.ecModel))}var C=w.getTextColor()||n.get(["axisLine","lineStyle","color"]),D=i.dataToCoord(g),S=new $r({x:D,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:Bh(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:ot(C)?C(i.type==="category"?x:i.type==="value"?g+"":g,m):C})});if(S.anid="label_"+g,p){var _=fh.makeAxisEventDataBase(n);_.targetType="axisLabel",_.value=x,_.tickIndex=m,i.type==="category"&&(_.dataIndex=g),qt(S).eventData=_}e.add(S),S.updateTransform(),h.push(S),t.add(S),S.decomposeTransform()}),h}}const Nie=fh;function cet(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return fet(n,t,e),n.seriesInvolved&&det(n,t),n}function fet(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];W(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var u=Q0(s.model),l=t.coordSysAxesInfo[u]={};t.coordSysMap[u]=s;var c=s.model,f=c.getModel("tooltip",r);if(W(s.getAxes(),Ot(v,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&W(p.baseAxes,Ot(v,d?"cross":!0,h)),d&&W(p.otherAxes,Ot(v,"cross",!1))}function v(m,g,y){var x=y.model.getModel("axisPointer",i),w=x.get("show");if(!(!w||w==="auto"&&!m&&!TR(x))){g==null&&(g=x.get("triggerTooltip")),x=m?het(y,f,i,e,m,g):x;var b=x.get("snap"),C=x.get("triggerEmphasis"),D=Q0(y.model),S=g||b||y.type==="category",_=t.axesInfo[D]={key:D,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:C,involveSeries:S,snap:b,useHandle:TR(x),seriesModels:[],linkGroup:null};l[D]=_,t.seriesInvolved=t.seriesInvolved||S;var T=pet(a,y);if(T!=null){var E=o[T]||(o[T]={axesInfo:{}});E.axesInfo[D]=_,E.mapper=a[T].mapper,_.linkGroup=E}}}})}function het(t,e,n,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],u={};W(s,function(h){u[h]=ft(o.get(h))}),u.snap=t.type!=="category"&&!!a,o.get("type")==="cross"&&(u.type="line");var l=u.label||(u.label={});if(l.show==null&&(l.show=!1),i==="cross"){var c=o.get(["label","show"]);if(l.show=c??!0,!a){var f=u.lineStyle=o.get("crossStyle");f&&dt(l,f.textStyle)}}return t.model.getModel("axisPointer",new sr(u,n,r))}function det(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),a=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||n.get(["axisPointer","show"],!0)===!1||W(t.coordSysAxesInfo[Q0(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(n),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=n.getData().count())})})}function pet(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var a=t[i]||{};if(GA(a[r+"AxisId"],n.id)||GA(a[r+"AxisIndex"],n.componentIndex)||GA(a[r+"AxisName"],n.name))return i}}function GA(t,e){return t==="all"||Me(t)&&At(t,e)>=0||t===e}function vet(t){var e=sL(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,a=n.get("status"),o=n.get("value");o!=null&&(o=r.parse(o));var s=TR(n);a==null&&(i.status=s?"show":"hide");var u=r.getExtent().slice();u[0]>u[1]&&u.reverse(),(o==null||o>u[1])&&(o=u[1]),o<u[0]&&(o=u[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function sL(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Q0(t)]}function get(t){var e=sL(t);return e&&e.axisPointerModel}function TR(t){return!!t.get(["handle","show"])}function Q0(t){return t.type+"||"+t.id}var RW={},met=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.axisPointerClass&&vet(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},e.prototype.updateAxisPointer=function(n,r,i,a){this._doUpdateAxisPointerClass(n,i,!1)},e.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=get(n);o?(this._axisPointer||(this._axisPointer=new a)).render(n,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){RW[n]=r},e.getAxisPointerClass=function(n){return n&&RW[n]},e.type="axis",e}(Ba);const Rie=met;var ER=Gn();function yet(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),u=r.coordinateSystem.getRect(),l=i.getTicksCoords({tickModel:a,clamp:!0});if(l.length){var c=s.length,f=ER(t).splitAreaColors,h=st(),d=0;if(f)for(var p=0;p<l.length;p++){var v=f.get(l[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(l[0].coord),g=o.getAreaStyle();s=Me(s)?s:[s];for(var p=1;p<l.length;p++){var y=i.toGlobalCoord(l[p].coord),x=void 0,w=void 0,b=void 0,C=void 0;i.isHorizontal()?(x=m,w=u.y,b=y-x,C=u.height,m=x+b):(x=u.x,w=m,b=u.width,C=y-w,m=w+C);var D=l[p-1].tickValue;D!=null&&h.set(D,d),e.add(new Pn({anid:D!=null?"area_"+D:null,shape:{x,y:w,width:b,height:C},style:dt({fill:s[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}ER(t).splitAreaColors=h}}}function xet(t){ER(t).splitAreaColors=null}var wet=["axisLine","axisTickLabel","axisName"],bet=["splitArea","splitLine","minorSplitLine"],$ie=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return e.prototype.render=function(n,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Qn,this.group.add(this._axisGroup),!!n.get("show")){var s=n.getCoordSysModel(),u=_R(s,n),l=new Nie(n,De({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(bR(h[d].getOtherAxis(n.axis).scale))return!0;return!1}},u));W(wet,l.add,l),this._axisGroup.add(l.getGroup()),W(bet,function(f){n.get([f,"show"])&&Cet[f](this,this._axisGroup,n,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||_ne(o,this._axisGroup,n),t.prototype.render.call(this,n,r,i,a)}},e.prototype.remove=function(){xet(this)},e.type="cartesianAxis",e}(Rie),Cet={splitLine:function(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Me(s)?s:[s];for(var u=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:a}),h=[],d=[],p=o.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);l?(h[0]=m,h[1]=u.y,d[0]=m,d[1]=u.y+u.height):(h[0]=u.x,h[1]=m,d[0]=u.x+u.width,d[1]=m);var g=c++%s.length,y=f[v].tickValue,x=new kc({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:dt({stroke:s[g]},p),silent:!0});W0(x.shape,p.lineWidth),e.add(x)}}},minorSplitLine:function(t,e,n,r){var i=n.axis,a=n.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),u=i.isHorizontal(),l=i.getMinorTicksCoords();if(l.length)for(var c=[],f=[],h=o.getLineStyle(),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var v=i.toGlobalCoord(l[d][p].coord);u?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var m=new kc({anid:"minor_line_"+l[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});W0(m.shape,h.lineWidth),e.add(m)}},splitArea:function(t,e,n,r){yet(t,e,n,r)}},Mie=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="xAxis",e}($ie),Det=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=Mie.type,n}return e.type="yAxis",e}($ie),_et=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="grid",n}return e.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new Pn({shape:n.coordinateSystem.getRect(),style:dt({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Ba),$W={offset:0};function Oie(t){t.registerComponentView(_et),t.registerComponentModel(UJe),t.registerCoordinateSystem("cartesian2d",ret),CW(t,"x",SR,$W),CW(t,"y",SR,$W),t.registerComponentView(Mie),t.registerComponentView(Det),t.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var Of=Gn(),MW=ft,HA=Ht,Tet=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,i){var a=n.get("value"),o=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,u=this._handle;if(!o||o==="hide"){s&&s.hide(),u&&u.hide();return}s&&s.show(),u&&u.show();var l={};this.makeElOption(l,a,e,n,r);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,n);if(!s)s=this._group=new Qn,this.createPointerEl(s,l,e,n),this.createLabelEl(s,l,e,n),r.getZr().add(s);else{var h=Ot(OW,n,f);this.updatePointerEl(s,l,h),this.updateLabelEl(s,l,h,n)}PW(s,n,!0),this._renderHandle(a)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),i=e.axis,a=i.type==="category",o=n.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var u=sL(e).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/u>s}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,i,a){},t.prototype.createPointerEl=function(e,n,r,i){var a=n.pointer;if(a){var o=Of(e).pointerEl=new bXe[a.type](MW(n.pointer));e.add(o)}},t.prototype.createLabelEl=function(e,n,r,i){if(n.label){var a=Of(e).labelEl=new $r(MW(n.label));e.add(a),FW(a,i)}},t.prototype.updatePointerEl=function(e,n,r){var i=Of(e).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,i){var a=Of(e).labelEl;a&&(a.setStyle(n.label.style),r(a,{x:n.label.x,y:n.label.y}),FW(a,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=X1(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(l){Vee(l.event)},onmousedown:HA(this._onHandleDragMove,this,0,0),drift:HA(this._onHandleDragMove,this),ondragend:HA(this._onHandleDragEnd,this)}),r.add(i)),PW(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=a.get("size");Me(u)||(u=[u,u]),i.scaleX=u[0]/2,i.scaleY=u[1]/2,pre(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},t.prototype._moveHandleToValue=function(e,n){OW(this._axisPointerModel,!n&&this._moveAnimation,this._handle,jA(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(jA(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(jA(i)),Of(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),fR(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function OW(t,e,n,r){Fie(Of(n).lastProp,r)||(Of(n).lastProp=r,e?bi(n,r,t):(n.stopAnimation(),n.attr(r)))}function Fie(t,e){if(Ke(t)&&Ke(e)){var n=!0;return W(e,function(r,i){n=n&&Fie(t[i],r)}),!!n}else return t===e}function FW(t,e){t[e.get(["label","show"])?"show":"hide"]()}function jA(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function PW(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=n)})}const Eet=Tet;function Aet(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function ket(t,e,n,r,i){var a=n.get("value"),o=Pie(a,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),u=J1(s.get("padding")||0),l=s.getFont(),c=A_(o,l),f=i.position,h=c.width+u[1]+u[3],d=c.height+u[0]+u[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Iet(f,h,d,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:Bh(s,{text:o,font:l,fill:s.getTextColor(),padding:u,backgroundColor:m}),z2:10}}function Iet(t,e,n,r){var i=r.getWidth(),a=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function Pie(t,e,n,r,i){t=e.scale.parse(t);var a=e.scale.getLabel({value:t},{precision:i.precision}),o=i.formatter;if(o){var s={value:iL(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};W(r,function(u){var l=n.getSeriesByIndex(u.seriesIndex),c=u.dataIndexInside,f=l&&l.getDataParams(c);f&&s.seriesData.push(f)}),ze(o)?a=o.replace("{value}",a):ot(o)&&(a=o(s))}return a}function Lie(t,e,n){var r=Lh();return __(r,r,n.rotation),KC(r,r,n.position),b3([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function Net(t,e,n,r,i,a){var o=Nie.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),ket(e,r,i,a,{position:Lie(r.axis,t,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Ret(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function $et(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}var Met=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis,u=s.grid,l=a.get("type"),c=LW(u,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(l&&l!=="none"){var h=Aet(a),d=Oet[l](s,f,c);d.style=h,n.graphicKey=d.type,n.pointer=d}var p=_R(u.model,i);Net(r,n,p,i,a,o)},e.prototype.getHandleTransform=function(n,r,i){var a=_R(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=Lie(r.axis,n,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,a){var o=i.axis,s=o.grid,u=o.getGlobalExtent(!0),l=LW(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,f=[n.x,n.y];f[c]+=r[c],f[c]=Math.min(u[1],f[c]),f[c]=Math.max(u[0],f[c]);var h=(l[1]+l[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:d,tooltipOption:p[c]}},e}(Eet);function LW(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var Oet={line:function(t,e,n){var r=Ret([e,n[0]],[e,n[1]],zW(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:$et([e-r/2,n[0]],[r,i],zW(t))}}};function zW(t){return t.dim==="x"?0:1}const Fet=Met;var Pet=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Qt);const Let=Pet;var Bu=Gn(),zet=W;function zie(t,e,n){if(!bt.node){var r=e.getZr();Bu(r).records||(Bu(r).records={}),Bet(r,e);var i=Bu(r).records[t]||(Bu(r).records[t]={});i.handler=n}}function Bet(t,e){if(Bu(t).initialized)return;Bu(t).initialized=!0,n("click",Ot(BW,"click")),n("mousemove",Ot(BW,"mousemove")),n("globalout",Wet);function n(r,i){t.on(r,function(a){var o=Uet(e);zet(Bu(t).records,function(s){s&&i(s,a,o.dispatchAction)}),Vet(o.pendings,e)})}}function Vet(t,e){var n=t.showTip.length,r=t.hideTip.length,i;n?i=t.showTip[n-1]:r&&(i=t.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Wet(t,e,n){t.handler("leave",null,n)}function BW(t,e,n,r){e.handler(t,n,r)}function Uet(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function AR(t,e){if(!bt.node){var n=e.getZr(),r=(Bu(n).records||{})[t];r&&(Bu(n).records[t]=null)}}var Get=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=r.getComponent("tooltip"),o=n.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";zie("axisPointer",i,function(s,u,l){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&l({type:"updateAxisPointer",currTrigger:s,x:u&&u.offsetX,y:u&&u.offsetY})})},e.prototype.remove=function(n,r){AR("axisPointer",r)},e.prototype.dispose=function(n,r){AR("axisPointer",r)},e.type="axisPointer",e}(Ba);const Het=Get;function Bie(t,e){var n=[],r=t.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=zh(a,t);if(o==null||o<0||Me(o))return{point:[]};var s=a.getItemGraphicEl(o),u=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(o)||[];else if(u&&u.dataToPoint)if(t.isStacked){var l=u.getBaseAxis(),c=u.getOtherAxis(l),f=c.dim,h=l.dim,d=f==="x"||f==="radius"?1:0,p=a.mapDimension(h),v=[];v[d]=a.get(p,o),v[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),n=u.dataToPoint(v)||[]}else n=u.dataToPoint(a.getValues($e(u.dimensions,function(g){return a.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),n=[m.x+m.width/2,m.y+m.height/2]}return{point:n,el:s}}var VW=Gn();function jet(t,e,n){var r=t.currTrigger,i=[t.x,t.y],a=t,o=t.dispatchAction||Ht(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){mb(i)&&(i=Bie({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var u=mb(i),l=a.axesInfo,c=s.axesInfo,f=r==="leave"||mb(i),h={},d={},p={list:[],map:{}},v={showPointer:Ot(Xet,d),showTooltip:Ot(Ket,p)};W(s.coordSysMap,function(g,y){var x=u||g.containPoint(i);W(s.coordSysAxesInfo[y],function(w,b){var C=w.axis,D=Jet(l,w);if(!f&&x&&(!l||D)){var S=D&&D.value;S==null&&!u&&(S=C.pointToData(i)),S!=null&&WW(w,S,v,!1,h)}})});var m={};return W(c,function(g,y){var x=g.linkGroup;x&&!d[y]&&W(x.axesInfo,function(w,b){var C=d[b];if(w!==g&&C){var D=C.value;x.mapper&&(D=g.axis.scale.parse(x.mapper(D,UW(w),UW(g)))),m[g.key]=D}})}),W(m,function(g,y){WW(c[y],g,v,!0,h)}),Yet(d,c,h),Zet(p,i,t,o),Qet(c,o,n),h}}function WW(t,e,n,r,i){var a=t.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var o=qet(e,t),s=o.payloadBatch,u=o.snapToValue;s[0]&&i.seriesIndex==null&&De(i,s[0]),!r&&t.snap&&a.containData(u)&&u!=null&&(e=u),n.showPointer(t,e,s),n.showTooltip(t,o,u)}}function qet(t,e){var n=e.axis,r=n.dim,i=t,a=[],o=Number.MAX_VALUE,s=-1;return W(e.seriesModels,function(u,l){var c=u.getData().mapDimensionsAll(r),f,h;if(u.getAxisTooltipData){var d=u.getAxisTooltipData(c,t,n);h=d.dataIndices,f=d.nestestValue}else{if(h=u.getData().indicesOfNearest(c[0],t,n.type==="category"?.5:null),!h.length)return;f=u.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=t-f,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,i=f,a.length=0),W(h,function(m){a.push({seriesIndex:u.seriesIndex,dataIndexInside:m,dataIndex:u.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:i}}function Xet(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function Ket(t,e,n,r){var i=n.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var u=e.coordSys.model,l=Q0(u),c=t.map[l];c||(c=t.map[l]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Yet(t,e,n){var r=n.axesInfo=[];W(e,function(i,a){var o=i.axisPointerModel.option,s=t[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Zet(t,e,n,r){if(mb(e)||!t.list.length){r({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function Qet(t,e,n){var r=n.getZr(),i="axisPointerLastHighlights",a=VW(r)[i]||{},o=VW(r)[i]={};W(t,function(l,c){var f=l.axisPointerModel.option;f.status==="show"&&l.triggerEmphasis&&W(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;o[d]=h})});var s=[],u=[];W(a,function(l,c){!o[c]&&u.push(l)}),W(o,function(l,c){!a[c]&&s.push(l)}),u.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Jet(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function UW(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function mb(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function Vie(t){Rie.registerAxisPointerClass("CartesianAxisPointer",Fet),t.registerComponentModel(Let),t.registerComponentView(Het),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!Me(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=cet(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},jet)}function ett(t){ws(Oie),ws(Vie)}var GW="\0_ec_interaction_mutex";function ttt(t,e,n){var r=Wie(t);r[e]=n}function ntt(t,e,n){var r=Wie(t),i=r[e];i===n&&(r[e]=null)}function Wie(t){return t[GW]||(t[GW]={})}_s({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},qr);var rtt={axisPointer:1,tooltip:1,brush:1};function itt(t,e,n){var r=e.getComponentByElement(t.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!rtt.hasOwnProperty(r.mainType)&&i&&i.model!==n}function Uie(t,e,n,r,i,a){t=t||0;var o=n[1]-n[0];if(i!=null&&(i=$d(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=$d(s,[0,o]),i=a=$d(s,[i,a]),r=0}e[0]=$d(e[0],n),e[1]=$d(e[1],n);var u=qA(e,r);e[r]+=t;var l=i||0,c=n.slice();u.sign<0?c[0]+=l:c[1]-=l,e[r]=$d(e[r],c);var f;return f=qA(e,r),i!=null&&(f.sign!==u.sign||f.span<i)&&(e[1-r]=e[r]+u.sign*i),f=qA(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function qA(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function $d(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var Uh=!0,J0=Math.min,Ev=Math.max,att=Math.pow,ott=1e4,stt=6,utt=6,HW="globalPan",ltt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},ctt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},jW={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},ftt=0,htt=function(t){Ge(e,t);function e(n){var r=t.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new Qn,r._uid="brushController_"+ftt++,W(xtt,function(i,a){this._handlers[a]=Ht(i,this)},r),r}return e.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},e.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||ttt(r,HW,this._uid),W(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=vt(ft(jW),n,!0)},e.prototype._doDisableBrush=function(){var n=this._zr;ntt(n,HW,this._uid),W(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};W(n,function(i){r[i.panelId]=ft(i)})}else this._panels=null;return this},e.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(n){n=$e(n,function(h){return vt(ft(jW),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Y0(i,n,l,u).add(c).update(c).remove(f).execute(),this;function u(h,d){return(h.id!=null?h.id:r+d)+"-"+h.brushType}function l(h,d){return u(h.__brushOption,d)}function c(h,d){var p=n[h];if(d!=null&&i[d]===s)a[h]=i[d];else{var v=a[h]=d!=null?(i[d].__brushOption=p,i[d]):Hie(o,Gie(o,p));uL(o,v)}}function f(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),kR(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Ss);function Gie(t,e){var n=sT[e.brushType].createCover(t,e);return n.__brushOption=e,qie(n,e),t.group.add(n),n}function Hie(t,e){var n=lL(e);return n.endCreating&&(n.endCreating(t,e),qie(e,e.__brushOption)),e}function jie(t,e){var n=e.__brushOption;lL(e).updateCoverShape(t,e,n.range,n)}function qie(t,e){var n=e.z;n==null&&(n=ott),t.traverse(function(r){r.z=n,r.z2=n})}function uL(t,e){lL(e).updateCommon(t,e),jie(t,e)}function lL(t){return sT[t.__brushOption.brushType]}function cL(t,e,n){var r=t._panels;if(!r)return Uh;var i,a=t._transform;return W(r,function(o){o.isTargetByCursor(e,n,a)&&(i=o)}),i}function Xie(t,e){var n=t._panels;if(!n)return Uh;var r=e.__brushOption.panelId;return r!=null?n[r]:Uh}function kR(t){var e=t._covers,n=e.length;return W(e,function(r){t.group.remove(r)},t),e.length=0,!!n}function Gh(t,e){var n=$e(t._covers,function(r){var i=r.__brushOption,a=ft(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function dtt(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],i=n[0]-r[0],a=n[1]-r[1],o=att(i*i+a*a,.5);return o>stt}function Kie(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Yie(t,e,n,r){var i=new Qn;return i.add(new Pn({name:"main",style:fL(n),silent:!0,draggable:!0,cursor:"move",drift:Ot(qW,t,e,i,["n","s","w","e"]),ondragend:Ot(Gh,e,{isEnd:!0})})),W(r,function(a){i.add(new Pn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Ot(qW,t,e,i,a),ondragend:Ot(Gh,e,{isEnd:!0})}))}),i}function Zie(t,e,n,r){var i=r.brushStyle.lineWidth||0,a=Ev(i,utt),o=n[0][0],s=n[1][0],u=o-i/2,l=s-i/2,c=n[0][1],f=n[1][1],h=c-a+i/2,d=f-a+i/2,p=c-o,v=f-s,m=p+i,g=v+i;_u(t,e,"main",o,s,p,v),r.transformable&&(_u(t,e,"w",u,l,a,g),_u(t,e,"e",h,l,a,g),_u(t,e,"n",u,l,m,a),_u(t,e,"s",u,d,m,a),_u(t,e,"nw",u,l,a,a),_u(t,e,"ne",h,l,a,a),_u(t,e,"sw",u,d,a,a),_u(t,e,"se",h,d,a,a))}function IR(t,e){var n=e.__brushOption,r=n.transformable,i=e.childAt(0);i.useStyle(fL(n)),i.attr({silent:!r,cursor:r?"move":"default"}),W([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?NR(t,a[0]):vtt(t,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?ctt[s]+"-resize":null})})}function _u(t,e,n,r,i,a,o){var s=e.childOfName(n);s&&s.setShape(mtt(hL(t,e,[[r,i],[r+a,i+o]])))}function fL(t){return dt({strokeNoScale:!0},t.brushStyle)}function Qie(t,e,n,r){var i=[J0(t,n),J0(e,r)],a=[Ev(t,n),Ev(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function ptt(t){return V_(t.group)}function NR(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Dne(n[e],ptt(t));return r[i]}function vtt(t,e){var n=[NR(t,e[0]),NR(t,e[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function qW(t,e,n,r,i,a){var o=n.__brushOption,s=t.toRectRange(o.range),u=Jie(e,i,a);W(r,function(l){var c=ltt[l];s[c[0]][c[1]]+=u[c[0]]}),o.range=t.fromRectRange(Qie(s[0][0],s[1][0],s[0][1],s[1][1])),uL(e,n),Gh(e,{isEnd:!1})}function gtt(t,e,n,r){var i=e.__brushOption.range,a=Jie(t,n,r);W(i,function(o){o[0]+=a[0],o[1]+=a[1]}),uL(t,e),Gh(t,{isEnd:!1})}function Jie(t,e,n){var r=t.group,i=r.transformCoordToLocal(e,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function hL(t,e,n){var r=Xie(t,e);return r&&r!==Uh?r.clipPath(n,t._transform):ft(n)}function mtt(t){var e=J0(t[0][0],t[1][0]),n=J0(t[0][1],t[1][1]),r=Ev(t[0][0],t[1][0]),i=Ev(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:i-n}}function ytt(t,e,n){if(!(!t._brushType||wtt(t,e.offsetX,e.offsetY))){var r=t._zr,i=t._covers,a=cL(t,e,n);if(!t._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Uh||s.panelId===a.panelId)&&sT[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function RR(t){var e=t.event;e.preventDefault&&e.preventDefault()}function $R(t,e,n){return t.childOfName("main").contain(e,n)}function eae(t,e,n,r){var i=t._creatingCover,a=t._creatingPanel,o=t._brushOption,s;if(t._track.push(n.slice()),dtt(t)||i){if(a&&!i){o.brushMode==="single"&&kR(t);var u=ft(o);u.brushType=XW(u.brushType,a),u.panelId=a===Uh?null:a.panelId,i=t._creatingCover=Gie(t,u),t._covers.push(i)}if(i){var l=sT[XW(t._brushType,a)],c=i.__brushOption;c.range=l.getCreatingRange(hL(t,i,t._track)),r&&(Hie(t,i),l.updateCommon(t,i)),jie(t,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&cL(t,e,n)&&kR(t)&&(s={isEnd:r,removeOnClick:!0});return s}function XW(t,e){return t==="auto"?e.defaultBrushType:t}var xtt={mousedown:function(t){if(this._dragging)KW(this,t);else if(!t.target||!t.target.draggable){RR(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=cL(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(ytt(this,t,r),this._dragging){RR(t);var i=eae(this,t,r,!1);i&&Gh(this,i)}},mouseup:function(t){KW(this,t)}};function KW(t,e){if(t._dragging){RR(e);var n=e.offsetX,r=e.offsetY,i=t.group.transformCoordToLocal(n,r),a=eae(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&Gh(t,a)}}function wtt(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var sT={lineX:YW(0),lineY:YW(1),rect:{createCover:function(t,e){function n(r){return r}return Yie({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Kie(t);return Qie(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){Zie(t,e,n,r)},updateCommon:IR,contain:$R},polygon:{createCover:function(t,e){var n=new Qn;return n.add(new ng({name:"main",style:fL(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new q1({name:"main",draggable:!0,drift:Ot(gtt,t,e),ondragend:Ot(Gh,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:hL(t,e,n)})},updateCommon:IR,contain:$R}};function YW(t){return{createCover:function(e,n){return Yie({toRectRange:function(r){var i=[r,[0,100]];return t&&i.reverse(),i},fromRectRange:function(r){return r[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Kie(e),r=J0(n[0][t],n[1][t]),i=Ev(n[0][t],n[1][t]);return[r,i]},updateCoverShape:function(e,n,r,i){var a,o=Xie(e,n);if(o!==Uh&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var u=[r,a];t&&u.reverse(),Zie(e,n,u,i)},updateCommon:IR,contain:$R}}const btt=htt;function Ctt(t){return t=dL(t),function(e){return C3(e,t)}}function Stt(t,e){return t=dL(t),function(n){var r=e??n,i=r?t.width:t.height,a=r?t.x:t.y;return[a,a+(i||0)]}}function Dtt(t,e,n){var r=dL(t);return function(i,a){return r.contain(a[0],a[1])&&!itt(i,e,n)}}function dL(t){return _t.create(t)}var ZW=["x","y","radius","angle","single"],_tt=["cartesian2d","polar","singleAxis"];function Ttt(t){var e=t.get("coordinateSystem");return At(_tt,e)>=0}function mp(t){return t+"Axis"}function Ett(t,e){var n=st(),r=[],i=st();t.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,t.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&u(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),l(c)}function u(c){var f=!1;return c.eachTargetAxis(function(h,d){var p=n.get(h);p&&p[d]&&(f=!0)}),f}function l(c){c.eachTargetAxis(function(f,h){(n.get(f)||n.set(f,[]))[h]=!0})}return r}var XA=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),Att=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return e.prototype.init=function(n,r,i){var a=QW(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},e.prototype.mergeOption=function(n){var r=QW(n);vt(this.option,n,!0),vt(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=st(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return W(ZW,function(i){var a=this.getReferringComponents(mp(i),vje);if(a.specified){r=!0;var o=new XA;W(a.models,function(s){o.add(s.componentIndex)}),n.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});u(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});u(s,"single")}function u(l,c){var f=l[0];if(f){var h=new XA;if(h.add(f.componentIndex),n.set(c,h),a=!1,c==="x"||c==="y"){var d=f.getReferringComponents("grid",$i).models[0];d&&W(l,function(p){f.componentIndex!==p.componentIndex&&d===p.getReferringComponents("grid",$i).models[0]&&h.add(p.componentIndex)})}}}a&&W(ZW,function(l){if(a){var c=i.findComponents({mainType:mp(l),filter:function(h){return h.get("type",!0)==="category"}});if(c[0]){var f=new XA;f.add(c[0].componentIndex),n.set(l,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");W([["start","startValue"],["end","endValue"]],function(a,o){var s=n[a[0]]!=null,u=n[a[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(mp(r),i))},this),n},e.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){W(i.indexList,function(o){n.call(r,a,o)})})},e.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(mp(n),r)},e.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},e.prototype.setCalculatedRange=function(n){var r=this.option;W(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},e.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},e.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var l=this.getAxisProxy(o,s.indexList[u]);if(l.hostedBy(this))return l;r||(r=l)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Qt);function QW(t){var e={};return W(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}const ktt=Att;var Itt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(ktt);const Ntt=Itt;var Rtt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Ba);const $tt=Rtt;var Mtt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}($tt);const Ott=Mtt;var Gd=W,JW=mte,Ftt=function(){function t(e,n,r,i){this._dimName=e,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(n){if(Ttt(n)){var r=mp(this._dimName),i=n.getReferringComponents(r,$i).models[0];i&&this._axisIndex===i.componentIndex&&e.push(n)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return ft(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],l;Gd(["start","end"],function(h,d){var p=e[h],v=e[h+"Value"];a[d]==="percent"?(p==null&&(p=o[d]),v=i.parse(Mu(p,o,n))):(l=!0,v=v==null?n[d]:i.parse(v),p=Mu(v,n,o)),u[d]=v==null||isNaN(v)?n[d]:v,s[d]=p==null||isNaN(p)?o[d]:p}),JW(u),JW(s);var c=this._minMaxSpan;l?f(u,s,n,o,!1):f(s,u,o,n,!0);function f(h,d,p,v,m){var g=m?"Span":"ValueSpan";Uie(0,h,p,"all",c["min"+g],c["max"+g]);for(var y=0;y<2;y++)d[y]=Mu(h[y],p,v,!0),m&&(d[y]=i.parse(d[y]))}return{valueWindow:u,percentWindow:s}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=Ptt(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,n){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Gd(i,function(u){var l=u.getData(),c=l.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var f=l.getStore(),h=$e(c,function(d){return l.getDimensionIndex(d)},l);l.filterSelf(function(d){for(var p,v,m,g=0;g<c.length;g++){var y=f.get(h[g],d),x=!isNaN(y),w=y<o[0],b=y>o[1];if(x&&!w&&!b)return!0;x&&(m=!0),w&&(p=!0),b&&(v=!0)}return m&&p&&v})}else Gd(c,function(d){if(a==="empty")u.setData(l=l.map(d,function(v){return s(v)?v:NaN}));else{var p={};p[d]=o,l.selectRange(p)}});Gd(c,function(d){l.setApproximateExtent(o,d)})}});function s(u){return u>=o[0]&&u<=o[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;Gd(["min","max"],function(i){var a=n.get(i+"Span"),o=n.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Mu(r[0]+o,r,[0,100],!0):a!=null&&(o=Mu(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=e3(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},t}();function Ptt(t,e,n){var r=[1/0,-1/0];Gd(n,function(o){eJe(r,o.getData(),e)});var i=t.getAxisModel(),a=die(i.axis.scale,i,r).calculate();return[a.min,a.max]}const Ltt=Ftt;var ztt={getTargetSeries:function(t){function e(i){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var u=t.getComponent(mp(o),s);i(o,s,u,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var n=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Ltt(i,a,s,t),n.push(o.__dzAxisProxy))});var r=st();return W(n,function(i){W(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,e)})}),t.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const Btt=ztt;function Vtt(t){t.registerAction("dataZoom",function(e,n){var r=Ett(n,e);W(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var eU=!1;function Wtt(t){eU||(eU=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,Btt),Vtt(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Utt(t){t.registerComponentModel(Ntt),t.registerComponentView(Ott),Wtt(t)}var ns=function(){function t(){}return t}(),tae={};function Ug(t,e){tae[t]=e}function nae(t){return tae[t]}var Gtt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;W(this.option.feature,function(r,i){var a=nae(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),vt(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Qt);const Htt=Gtt;function jtt(t,e,n){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=Ic(r,a,i);Lp(e.get("orient"),t,e.get("itemGap"),o.width,o.height),YXe(t,r,a,i)}function rae(t,e){var n=J1(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new Pn({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var qtt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){var o=this.group;if(o.removeAll(),!n.get("show"))return;var s=+n.get("itemSize"),u=n.get("orient")==="vertical",l=n.get("feature")||{},c=this._features||(this._features={}),f=[];W(l,function(p,v){f.push(v)}),new Y0(this._featureNames||[],f).add(h).update(h).remove(Ot(h,null)).execute(),this._featureNames=f;function h(p,v){var m=f[p],g=f[v],y=l[m],x=new sr(y,n,n.ecModel),w;if(a&&a.newTitle!=null&&a.featureName===m&&(y.title=a.newTitle),m&&!g){if(Xtt(m))w={onclick:x.option.onclick,featureName:m};else{var b=nae(m);if(!b)return;w=new b}c[m]=w}else if(w=c[g],!w)return;w.uid=Z1("toolbox-feature"),w.model=x,w.ecModel=r,w.api=i;var C=w instanceof ns;if(!m&&g){C&&w.dispose&&w.dispose(r,i);return}if(!x.get("show")||C&&w.unusable){C&&w.remove&&w.remove(r,i);return}d(x,w,m),x.setIconStatus=function(D,S){var _=this.option,T=this.iconPaths;_.iconStatus=_.iconStatus||{},_.iconStatus[D]=S,T[D]&&(S==="emphasis"?Sv:Dv)(T[D])},w instanceof ns&&w.render&&w.render(x,r,i,a)}function d(p,v,m){var g=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),x=v instanceof ns&&v.getIcons?v.getIcons():p.get("icon"),w=p.get("title")||{},b,C;ze(x)?(b={},b[m]=x):b=x,ze(w)?(C={},C[m]=w):C=w;var D=p.iconPaths={};W(b,function(S,_){var T=X1(S,{},{x:-s/2,y:-s/2,width:s,height:s});T.setStyle(g.getItemStyle());var E=T.ensureState("emphasis");E.style=y.getItemStyle();var A=new $r({style:{text:C[_],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});T.setTextContent(A),W_({el:T,componentModel:n,itemName:_,formatterParamsExtra:{title:C[_]}}),T.__title=C[_],T.on("mouseover",function(){var N=y.getItemStyle(),R=u?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";A.setStyle({fill:y.get("textFill")||N.fill||N.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||R}),A.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",_])!=="emphasis"&&i.leaveEmphasis(this),A.hide()}),(p.get(["iconStatus",_])==="emphasis"?Sv:Dv)(T),o.add(T),T.on("click",Ht(v.onclick,v,r,i,_)),D[_]=T})}jtt(o,n,i),o.add(rae(o.getBoundingRect(),n)),u||o.eachChild(function(p){var v=p.__title,m=p.ensureState("emphasis"),g=m.textConfig||(m.textConfig={}),y=p.getTextContent(),x=y&&y.ensureState("emphasis");if(x&&!ot(x)&&v){var w=x.style||(x.style={}),b=A_(v,$r.makeFont(w)),C=p.x+o.x,D=p.y+o.y+s,S=!1;D+b.height>i.getHeight()&&(g.position="top",S=!0);var _=S?-5-b.height:s+10;C+b.width/2>i.getWidth()?(g.position=["100%",_],w.align="right"):C-b.width/2<0&&(g.position=[0,_],w.align="left")}})},e.prototype.updateView=function(n,r,i,a){W(this._features,function(o){o instanceof ns&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(n,r){W(this._features,function(i){i instanceof ns&&i.remove&&i.remove(n,r)}),this.group.removeAll()},e.prototype.dispose=function(n,r){W(this._features,function(i){i instanceof ns&&i.dispose&&i.dispose(n,r)})},e.type="toolbox",e}(Ba);function Xtt(t){return t.indexOf("my")===0}const Ktt=qtt;var Ytt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),l=bt.browser;if(ot(MouseEvent)&&(l.newEdge||!l.ie&&!l.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=u;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=u.split(","),d=h[0].indexOf("base64")>-1,p=o?decodeURIComponent(h[1]):h[1];d&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,g=new Uint8Array(m);m--;)g[m]=p.charCodeAt(m);var y=new Blob([g]);window.navigator.msSaveOrOpenBlob(y,v)}else{var x=document.createElement("iframe");document.body.appendChild(x);var w=x.contentWindow,b=w.document;b.open("image/svg+xml","replace"),b.write(p),b.close(),w.focus(),b.execCommand("SaveAs",!0,v),document.body.removeChild(x)}}else{var C=i.get("lang"),D='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',S=window.open();S.document.write(D),S.document.title=a}},e.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(ns);const Ztt=Ytt;var tU="__ec_magicType_stack__",Qtt=[["line","bar"],["stack"]],Jtt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return W(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(n,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(nU[i]){var s={series:[]},u=function(f){var h=f.subType,d=f.id,p=nU[i](h,d,f,a);p&&(dt(p,f.option),s.series.push(p));var v=f.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var m=v.getAxesByScale("ordinal")[0];if(m){var g=m.dim,y=g+"Axis",x=f.getReferringComponents(y,$i).models[0],w=x.componentIndex;s[y]=s[y]||[];for(var b=0;b<=w;b++)s[y][w]=s[y][w]||{};s[y][w].boundaryGap=i==="bar"}}};W(Qtt,function(f){At(f,i)>=0&&W(f,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var l,c=i;i==="stack"&&(l=vt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:l,featureName:"magicType"})}},e}(ns),nU={line:function(t,e,n,r){if(t==="bar")return vt({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if(t==="line")return vt({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var i=n.get("stack")===tU;if(t==="line"||t==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),vt({id:e,stack:i?"":tU},r.get(["option","stack"])||{},!0)}};_s({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});const ent=Jtt;var uT=new Array(60).join("-"),Av="	";function tnt(t){var e={},n=[],r=[];return t.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function nnt(t){var e=[];return W(t,function(n,r){var i=n.categoryAxis,a=n.valueAxis,o=a.dim,s=[" "].concat($e(n.series,function(d){return d.name})),u=[i.model.getCategories()];W(n.series,function(d){var p=d.getRawData();u.push(d.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var l=[s.join(Av)],c=0;c<u[0].length;c++){for(var f=[],h=0;h<u.length;h++)f.push(u[h][c]);l.push(f.join(Av))}e.push(l.join(`
`))}),e.join(`

`+uT+`

`)}function rnt(t){return $e(t,function(e){var n=e.getRawData(),r=[e.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=n.getName(o),u=0;u<a-1;u++)i[u]=arguments[u];r.push((s?s+Av:"")+i.join(Av))}),r.join(`
`)}).join(`

`+uT+`

`)}function int(t){var e=tnt(t);return{value:$n([nnt(e.seriesGroupByCategoryAxis),rnt(e.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+uT+`

`),meta:e.meta}}function CS(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ant(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Av)>=0)return!0}var MR=new RegExp("["+Av+"]+","g");function ont(t){for(var e=t.split(/\n+/g),n=CS(e.shift()).split(MR),r=[],i=$e(n,function(u){return{name:u,data:[]}}),a=0;a<e.length;a++){var o=CS(e[a]).split(MR);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function snt(t){for(var e=t.split(/\n+/g),n=CS(e.shift()),r=[],i=0;i<e.length;i++){var a=CS(e[i]);if(a){var o=a.split(MR),s="",u=void 0,l=!1;isNaN(o[0])?(l=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},u=r[i].value):u=r[i]=[];for(var c=0;c<o.length;c++)u.push(+o[c]);u.length===1&&(l?r[i].value=u[0]:r[i]=u[0])}}return{name:n,data:r}}function unt(t,e){var n=t.split(new RegExp(`
*`+uT+`
*`,"g")),r={series:[]};return W(n,function(i,a){if(ant(i)){var o=ont(i),s=e[a],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=snt(i);r.series.push(o)}}),r}var lnt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var l=document.createElement("div"),c=document.createElement("textarea");l.style.cssText="overflow:auto";var f=a.get("optionToContent"),h=a.get("contentToOption"),d=int(n);if(ot(f)){var p=f(r.getOption());ze(p)?l.innerHTML=p:bv(p)&&l.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=d.value,l.appendChild(c)}var m=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),w=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var b=this;function C(){i.removeChild(o),b._dom=null}$N(x,"click",C),$N(w,"click",function(){if(h==null&&f!=null||h!=null&&f==null){C();return}var D;try{ot(h)?D=h(l,r.getOption()):D=unt(c.value,m)}catch(S){throw C(),new Error("Data view format error "+S)}D&&r.dispatchAction({type:"changeDataView",newOption:D}),C()}),x.innerHTML=u[1],w.innerHTML=u[2],w.style.cssText=x.style.cssText=y,!a.get("readOnly")&&g.appendChild(w),g.appendChild(x),o.appendChild(s),o.appendChild(l),o.appendChild(g),l.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(ns);function cnt(t,e){return $e(t,function(n,r){var i=e&&e[r];if(Ke(i)&&!Me(i)){var a=Ke(n)&&!Me(n);a||(n={value:n});var o=i.name!=null&&n.name==null;return n=dt(n,i),o&&delete n.name,n}else return n})}_s({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];W(t.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)n.push(De({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:cnt(r.data,a)})}}),e.mergeOption(dt({series:n},t.newOption))});const fnt=lnt;var iae=W,aae=Gn();function hnt(t,e){var n=pL(t);iae(e,function(r,i){for(var a=n.length-1;a>=0;a--){var o=n[a];if(o[i])break}if(a<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var u=s.getPercentRange();n[0][i]={dataZoomId:i,start:u[0],end:u[1]}}}}),n.push(e)}function dnt(t){var e=pL(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return iae(n,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function pnt(t){aae(t).snapshots=null}function vnt(t){return pL(t).length}function pL(t){var e=aae(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var gnt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){pnt(n),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(ns);_s({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});const mnt=gnt;var ynt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],xnt=function(){function t(e,n,r){var i=this;this._targetInfoList=[];var a=rU(n,e);W(wnt,function(o,s){(!r||!r.include||At(r.include,s)>=0)&&o(a,i._targetInfoList)})}return t.prototype.setOutputRanges=function(e,n){return this.matchOutputRanges(e,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=KA[r.brushType](0,a,i);r.__rangeOffset={offset:sU[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,n,r){W(e,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&W(a.coordSyses,function(o){var s=KA[i.brushType](1,o,i.range,!0);r(i,s.values,o,n)})},this)},t.prototype.setInputRanges=function(e,n){W(e,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=KA[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?sU[r.brushType](a.values,o.offset,bnt(a.xyMinMax,o.xyMinMax)):a.values}},this)},t.prototype.makePanelOpts=function(e,n){return $e(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:Ctt(i),isTargetByCursor:Dtt(i,e,r.coordSysModel),getLinearBrushOtherExtent:Stt(i)}})},t.prototype.controlSeries=function(e,n,r){var i=this.findTargetInfo(e,r);return i===!0||i&&At(i.coordSyses,n.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,n){for(var r=this._targetInfoList,i=rU(n,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<iU.length;u++)if(iU[u](i,o))return o}return!0},t}();function OR(t){return t[0]>t[1]&&t.reverse(),t}function rU(t,e){return Mm(t,e,{includeMainTypes:ynt})}var wnt={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,i=t.gridModels,a=st(),o={},s={};!n&&!r&&!i||(W(n,function(u){var l=u.axis.grid.model;a.set(l.id,l),o[l.id]=!0}),W(r,function(u){var l=u.axis.grid.model;a.set(l.id,l),s[l.id]=!0}),W(i,function(u){a.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),a.each(function(u){var l=u.coordinateSystem,c=[];W(l.getCartesians(),function(f,h){(At(n,f.getAxis("x").model)>=0||At(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:c[0],coordSyses:c,getPanelRect:aU.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(t,e){W(t.geoModels,function(n){var r=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:aU.geo})})}},iU=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],aU={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(V_(t)),e}},KA={lineX:Ot(oU,0),lineY:Ot(oU,1),rect:function(t,e,n,r){var i=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),a=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),o=[OR([i[0],a[0]]),OR([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(t,e,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=$e(n,function(o){var s=t?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function oU(t,e,n,r){var i=n.getAxis(["x","y"][t]),a=OR($e([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var sU={lineX:Ot(uU,0),lineY:Ot(uU,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return $e(t,function(r,i){return[r[0]-n[0]*e[i][0],r[1]-n[1]*e[i][1]]})}};function uU(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function bnt(t,e){var n=lU(t),r=lU(e),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function lU(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const oae=xnt;var FR=W,Cnt=fje("toolbox-dataZoom_"),Snt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new btt(i.getZr()),this._brushController.on("brush",Ht(this._onBrush,this)).mount()),Tnt(n,r,this,a,i),_nt(n,r)},e.prototype.onclick=function(n,r,i){Dnt[i].call(this)},e.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new oae(vL(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(l,c,f){if(f.type==="cartesian2d"){var h=l.brushType;h==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[h],f,c)}}),hnt(a,i),this._dispatchZoomAction(i);function s(l,c,f){var h=c.getAxis(l),d=h.model,p=u(l,d,a),v=p.findRepresentativeAxisProxy(d).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(f=Uie(0,f.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function u(l,c,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var p=d.getAxisModel(l,c.componentIndex);p&&(h=d)}),h}},e.prototype._dispatchZoomAction=function(n){var r=[];FR(n,function(i,a){r.push(ft(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(ns),Dnt={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(dnt(this.ecModel))}};function vL(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function _nt(t,e){t.setIconStatus("back",vnt(e)>1?"emphasis":"normal")}function Tnt(t,e,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new oae(vL(t),e,{include:["grid"]}),s=o.makePanelOpts(i,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}aKe("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(!e||e.get(n)==null)return;var r=e.getModel(n),i=[],a=vL(r),o=Mm(t,a);FR(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),FR(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,l,c){var f=u.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Cnt+l+f};h[c]=f,i.push(h)}return i});const Ent=Snt;function Ant(t){t.registerComponentModel(Htt),t.registerComponentView(Ktt),Ug("saveAsImage",Ztt),Ug("magicType",ent),Ug("dataView",fnt),Ug("dataZoom",Ent),Ug("restore",mnt),ws(Utt)}var knt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Qt);const Int=knt;function sae(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function uae(t){if(bt.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var lae=uae(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nnt=uae(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function cae(t,e){if(!t)return e;e=I3(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function Rnt(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var $nt=cae(Nnt,"transition"),gL=cae(lae,"transform"),Mnt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(bt.transform3dSupported?"will-change:transform;":"");function Ont(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function Fnt(t,e,n){if(!ze(n)||n==="inside")return"";var r=t.get("backgroundColor"),i=t.get("borderWidth");e=Vh(e);var a=Ont(n),o=Math.max(Math.round(i)*1.5,6),s="",u=gL+":",l;At(["left","right"],a)>-1?(s+="top:50%",u+="translateY(-50%) rotate("+(l=a==="left"?-225:-45)+"deg)"):(s+="left:50%",u+="translateX(-50%) rotate("+(l=a==="top"?225:45)+"deg)");var c=l*Math.PI/180,f=o+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+a+":-"+d+"px";var p=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+u+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function Pnt(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,i="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,i+=bt.transformSupported?","+gL+r:",left"+r+",top"+r),$nt+":"+i}function cU(t,e,n){var r=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!bt.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=bt.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+gL+":"+o+";":[["top",0],["left",0],[lae,o]]}function Lnt(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(n*3/2)+"px");var i=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,o=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),W(["decoration","align"],function(u){var l=t.get(u);l&&e.push("text-"+u+":"+l)}),e.join(";")}function znt(t,e,n){var r=[],i=t.get("transitionDuration"),a=t.get("backgroundColor"),o=t.get("shadowBlur"),s=t.get("shadowColor"),u=t.get("shadowOffsetX"),l=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=hre(t,"html"),h=u+"px "+l+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(Pnt(i,n)),a&&r.push("background-color:"+a),W(["width","color","radius"],function(d){var p="border-"+d,v=I3(p),m=t.get(v);m!=null&&r.push(p+":"+m+(d==="color"?"":"px"))}),r.push(Lnt(c)),f!=null&&r.push("padding:"+J1(f).join("px ")+"px"),r.join(";")+";"}function fU(t,e,n,r,i){var a=e&&e.painter;if(n){var o=a&&a.getViewportRoot();o&&w7e(t,o,document.body,r,i)}else{t[0]=r,t[1]=i;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Bnt=function(){function t(e,n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,bt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=n.getZr(),o=this._appendToBody=r&&r.appendToBody;fU(this._styleCoord,a,o,n.getWidth()/2,n.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(u){if(u=u||window.event,!s._enterable){var l=a.handler,c=a.painter.getViewportRoot();io(c,u,!0),l.dispatch("mousemove",u)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(e){var n=this._container,r=Rnt(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=Mnt+znt(e,!this._firstShow,this._longHide)+cU(a[0],a[1],!0)+("border-color:"+Vh(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(ze(a)&&r.get("trigger")==="item"&&!sae(r)&&(s=Fnt(r,i,a)),ze(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Me(e)||(e=[e]);for(var u=0;u<e.length;u++)bv(e[u])&&e[u].parentNode!==o&&o.appendChild(e[u]);if(s&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=s,o.appendChild(l)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},t.prototype.moveTo=function(e,n){var r=this._styleCoord;if(fU(r,this._zr,this._appendToBody,e,n),r[0]!=null&&r[1]!=null){var i=this.el.style,a=cU(r[0],r[1]);W(a,function(o){i[o[0]]=o[1]})}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",bt.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Ht(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}();const Vnt=Bnt;var Wnt=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),dU(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,i,a){var o=this;Ke(e)&&Zi(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new $r({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:hre(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),W(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(l){o.el.style[l]=r.get(l)}),W(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(l){o.el.style[l]=s.get(l)||0}),this._zr.add(this.el);var u=this;this.el.on("mouseover",function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0}),this.el.on("mouseout",function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=hU(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var i=this._styleCoord;dU(i,this._zr,e,n),e=i[0],n=i[1];var a=r.style,o=Tl(a.borderWidth||0),s=hU(a);r.x=e+o+s.left,r.y=n+o+s.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Ht(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Tl(t){return Math.max(0,t)}function hU(t){var e=Tl(t.shadowBlur||0),n=Tl(t.shadowOffsetX||0),r=Tl(t.shadowOffsetY||0);return{left:Tl(e-n),right:Tl(e+n),top:Tl(e-r),bottom:Tl(e+r)}}function dU(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}const Unt=Wnt;var Gnt=new Pn({shape:{x:-1,y:-1,width:2,height:2}}),Hnt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(bt.node||!r.getDom())){var i=n.getComponent("tooltip"),a=this._renderMode=mje(i.get("renderMode"));this._tooltipContent=a==="richText"?new Unt(r):new Vnt(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(n,r,i){if(!(bt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(n),a.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?pre(this,"_updatePosition",50,"fixRate"):fR(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");zie("itemTooltip",this._api,Ht(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,a=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(n,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,i,a){if(!(a.from===this.uid||bt.node||!i.getDom())){var o=pU(a,i);this._ticket="";var s=a.dataByCoordSys,u=Knt(a,r,i);if(u){var l=u.el.getBoundingRect().clone();l.applyTransform(u.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:u.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=Gnt;c.x=a.x,c.y=a.y,c.update(),qt(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,a))return;var f=Bie(a,r),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(n,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(pU(a,i))},e.prototype._manuallyAxisShowTip=function(n,r,i,a){var o=a.seriesIndex,s=a.dataIndex,u=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||u==null)){var l=r.getSeriesByIndex(o);if(l){var c=l.getData(),f=Gg([c.getItemModel(s),l,(l.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(n,r){var i=n.target,a=this._tooltipModel;if(a){this._lastX=n.offsetX,this._lastY=n.offsetY;var o=n.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,n);else if(i){this._lastDataByCoordSys=null;var s,u;dm(i,function(l){if(qt(l).dataIndex!=null)return s=l,!0;if(qt(l).tooltipConfig!=null)return u=l,!0},!0),s?this._showSeriesItemTooltip(n,s,r):u?this._showComponentItemTooltip(n,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=Ht(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Gg([r.tooltipOption],a),u=this._renderMode,l=[],c=q0("section",{blocks:[],noHeader:!0}),f=[],h=new EA;W(n,function(y){W(y.dataByAxis,function(x){var w=i.getComponent(x.axisDim+"Axis",x.axisIndex),b=x.value;if(!(!w||b==null)){var C=Pie(b,w.axis,i,x.seriesDataIndices,x.valueLabelOpt),D=q0("section",{header:C,noHeader:!os(C),sortBlocks:!0,blocks:[]});c.blocks.push(D),W(x.seriesDataIndices,function(S){var _=i.getSeriesByIndex(S.seriesIndex),T=S.dataIndexInside,E=_.getDataParams(T);if(!(E.dataIndex<0)){E.axisDim=x.axisDim,E.axisIndex=x.axisIndex,E.axisType=x.axisType,E.axisId=x.axisId,E.axisValue=iL(w.axis,{value:b}),E.axisValueLabel=C,E.marker=h.makeTooltipMarker("item",Vh(E.color),u);var A=CV(_.formatTooltip(T,!0,null)),N=A.frag;if(N){var R=Gg([_],a).get("valueFormatter");D.blocks.push(R?De({valueFormatter:R},N):N)}A.text&&f.push(A.text),l.push(E)}})}})}),c.blocks.reverse(),f.reverse();var d=r.position,p=s.get("order"),v=EV(c,h,u,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var m=u==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,l)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,l):this._showTooltipContent(s,g,l,Math.random()+"",o[0],o[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(n,r,i){var a=this._ecModel,o=qt(r),s=o.seriesIndex,u=a.getSeriesByIndex(s),l=o.dataModel||u,c=o.dataIndex,f=o.dataType,h=l.getData(f),d=this._renderMode,p=n.positionDefault,v=Gg([h.getItemModel(c),l,u&&(u.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=l.getDataParams(c,f),y=new EA;g.marker=y.makeTooltipMarker("item",Vh(g.color),d);var x=CV(l.formatTooltip(c,!1,f)),w=v.get("order"),b=v.get("valueFormatter"),C=x.frag,D=C?EV(b?De({valueFormatter:b},C):C,y,d,w,a.get("useUTC"),v.get("textStyle")):x.text,S="item_"+l.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,D,g,S,n.offsetX,n.offsetY,n.position,n.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,i){var a=qt(r),o=a.tooltipConfig,s=o.option||{};if(ze(s)){var u=s;s={content:u,formatter:u}}var l=[s],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&l.push(c),l.push({formatter:s.content});var f=n.positionDefault,h=Gg(l,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new EA;this._showOrMove(h,function(){var m=ft(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,n.offsetX,n.offsetY,n.position,r,v)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,i,a,o,s,u,l,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var h=n.get("formatter");u=u||n.get("position");var d=r,p=this._getNearestPoint([o,s],i,n.get("trigger"),n.get("borderColor")),v=p.color;if(h)if(ze(h)){var m=n.ecModel.get("useUTC"),g=Me(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,y&&(d=Q1(g.axisValue,d,m)),d=N3(d,i,!0)}else if(ot(h)){var x=Ht(function(w,b){w===this._ticket&&(f.setContent(b,c,n,v,u),this._updatePosition(n,u,o,s,f,i,l))},this);this._ticket=a,d=h(i,a,x)}else d=h;f.setContent(d,c,n,v,u),f.show(n,v),this._updatePosition(n,u,o,s,f,i,l)}},e.prototype._getNearestPoint=function(n,r,i,a){if(i==="axis"||Me(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Me(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,i,a,o,s,u){var l=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var f=o.getSize(),h=n.get("align"),d=n.get("verticalAlign"),p=u&&u.getBoundingRect().clone();if(u&&p.applyTransform(u.transform),ot(r)&&(r=r([i,a],s,o.el,p,{viewSize:[l,c],contentSize:f.slice()})),Me(r))i=bn(r[0],l),a=bn(r[1],c);else if(Ke(r)){var v=r;v.width=f[0],v.height=f[1];var m=Ic(v,{width:l,height:c});i=m.x,a=m.y,h=null,d=null}else if(ze(r)&&u){var g=Xnt(r,p,f,n.get("borderWidth"));i=g[0],a=g[1]}else{var g=jnt(i,a,o,l,c,h?null:20,d?null:20);i=g[0],a=g[1]}if(h&&(i-=vU(h)?f[0]/2:h==="right"?f[0]:0),d&&(a-=vU(d)?f[1]/2:d==="bottom"?f[1]:0),sae(n)){var g=qnt(i,a,o,l,c);i=g[0],a=g[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===n.length;return o&&W(i,function(s,u){var l=s.dataByAxis||[],c=n[u]||{},f=c.dataByAxis||[];o=o&&l.length===f.length,o&&W(l,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,o&&W(v,function(g,y){var x=m[y];o=o&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),a&&W(h.seriesDataIndices,function(g){var y=g.seriesIndex,x=r[y],w=a[y];x&&w&&w.data!==x.data&&(o=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!o},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){bt.node||!r.getDom()||(fR(this,"_updatePosition"),this._tooltipContent.dispose(),AR("itemTooltip",r))},e.type="tooltip",e}(Ba);function Gg(t,e,n){var r=e.ecModel,i;n?(i=new sr(n,r,r),i=new sr(e.option,i,r)):i=e;for(var a=t.length-1;a>=0;a--){var o=t[a];o&&(o instanceof sr&&(o=o.get("tooltip",!0)),ze(o)&&(o={formatter:o}),o&&(i=new sr(o,i,r)))}return i}function pU(t,e){return t.dispatchAction||Ht(e.dispatchAction,e)}function jnt(t,e,n,r,i,a,o){var s=n.getSize(),u=s[0],l=s[1];return a!=null&&(t+u+a+2>r?t-=u+a:t+=a),o!=null&&(e+l+o>i?e-=l+o:e+=o),[t,e]}function qnt(t,e,n,r,i){var a=n.getSize(),o=a[0],s=a[1];return t=Math.min(t+o,r)-o,e=Math.min(e+s,i)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function Xnt(t,e,n,r){var i=n[0],a=n[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,u=0,l=e.width,c=e.height;switch(t){case"inside":s=e.x+l/2-i/2,u=e.y+c/2-a/2;break;case"top":s=e.x+l/2-i/2,u=e.y-a-o;break;case"bottom":s=e.x+l/2-i/2,u=e.y+c+o;break;case"left":s=e.x-i-o,u=e.y+c/2-a/2;break;case"right":s=e.x+l+o,u=e.y+c/2-a/2}return[s,u]}function vU(t){return t==="center"||t==="middle"}function Knt(t,e,n){var r=i3(t).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=j1(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=n.getViewOfComponentModel(o),u;if(s.group.traverse(function(l){var c=qt(l).tooltipConfig;if(c&&c.name===t.name)return u=l,!0}),u)return{componentMainType:i,componentIndex:o.componentIndex,el:u}}}}const Ynt=Hnt;function Znt(t){ws(Vie),t.registerComponentModel(Int),t.registerComponentView(Ynt),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},qr),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},qr)}function mL(t,e){var n=t.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var i=Tv(t,e,n[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<n.length;o++)a.push(Tv(t,e,n[o]));return a.join(" ")}}function fae(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Me(e))return e+"";for(var r=[],i=0;i<n.length;i++){var a=t.getDimensionIndex(n[i]);a>=0&&r.push(e[a])}return r.join(" ")}var Qnt=function(t){Ge(e,t);function e(n,r,i,a){var o=t.call(this)||this;return o.updateData(n,r,i,a),o}return e.prototype._createSymbol=function(n,r,i,a,o){this.removeAll();var s=Nc(n,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=Jnt,this._symbolType=n,this.add(s)},e.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Sv(this.childAt(0))},e.prototype.downplay=function(){Dv(this.childAt(0))},e.prototype.setZ=function(n,r){var i=this.childAt(0);i.zlevel=n,i.z=r},e.prototype.setDraggable=function(n,r){var i=this.childAt(0);i.draggable=n,i.cursor=!r&&n?"move":i.cursor},e.prototype.updateData=function(n,r,i,a){this.silent=!1;var o=n.getItemVisual(r,"symbol")||"circle",s=n.hostModel,u=e.getSymbolSize(n,r),l=o!==this._symbolType,c=a&&a.disableAnimation;if(l){var f=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,n,r,u,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:u[0]/2,scaleY:u[1]/2};c?h.attr(d):bi(h,d,s,r),y3(h)}if(this._updateCommon(n,r,u,i,a),l){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,ha(h,d,s,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(n,r,i,a,o){var s=this.childAt(0),u=n.hostModel,l,c,f,h,d,p,v,m,g;if(a&&(l=a.emphasisItemStyle,c=a.blurItemStyle,f=a.selectItemStyle,h=a.focus,d=a.blurScope,v=a.labelStatesModels,m=a.hoverScale,g=a.cursorStyle,p=a.emphasisDisabled),!a||n.hasItemOption){var y=a&&a.itemModel?a.itemModel:n.getItemModel(r),x=y.getModel("emphasis");l=x.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=x.get("focus"),d=x.get("blurScope"),p=x.get("disabled"),v=Y1(y),m=x.getShallow("scale"),g=y.getShallow("cursor")}var w=n.getItemVisual(r,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var b=Cre(n.getItemVisual(r,"symbolOffset"),i);b&&(s.x=b[0],s.y=b[1]),g&&s.attr("cursor",g);var C=n.getItemVisual(r,"style"),D=C.fill;if(s instanceof xu){var S=s.style;s.useStyle(De({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},C))}else s.__isEmptyBrush?s.useStyle(De({},C)):s.useStyle(C),s.style.decal=null,s.setColor(D,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var _=n.getItemVisual(r,"liftZ"),T=this._z2;_!=null?T==null&&(this._z2=s.z2,s.z2+=_):T!=null&&(s.z2=T,this._z2=null);var E=o&&o.useNameLabel;K1(s,v,{labelFetcher:u,labelDataIndex:r,defaultText:A,inheritColor:D,defaultOpacity:C.opacity});function A(M){return E?n.getName(M):mL(n,M)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var N=s.ensureState("emphasis");N.style=l,s.ensureState("select").style=f,s.ensureState("blur").style=c;var R=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;N.scaleX=this._sizeX*R,N.scaleY=this._sizeY*R,this.setSymbolScale(1),V0(this,h,d,p)},e.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},e.prototype.fadeOut=function(n,r,i){var a=this.childAt(0),o=qt(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var u=a.getTextContent();u&&uS(u,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();uS(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:n,removeOpt:s})},e.getSymbolSize=function(n,r){return iZe(n.getItemVisual(r,"symbolSize"))},e}(Qn);function Jnt(t,e){this.parent.drift(t,e)}const yL=Qnt;function YA(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&t.getItemVisual(n,"symbol")!=="none"}function gU(t){return t!=null&&!Ke(t)&&(t={isIgnore:t}),t||{}}function mU(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Y1(e),cursorStyle:e.get("cursor")}}var ert=function(){function t(e){this.group=new Qn,this._SymbolCtor=e||yL}return t.prototype.updateData=function(e,n){this._progressiveEls=null,n=gU(n);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=n.disableAnimation,u=mU(e),l={disableAnimation:s},c=n.getSymbolPoint||function(f){return e.getItemLayout(f)};a||r.removeAll(),e.diff(a).add(function(f){var h=c(f);if(YA(e,h,f,n)){var d=new o(e,f,u,l);d.setPosition(h),e.setItemGraphicEl(f,d),r.add(d)}}).update(function(f,h){var d=a.getItemGraphicEl(h),p=c(f);if(!YA(e,p,f,n)){r.remove(d);return}var v=e.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)r.remove(d),d=new o(e,f,u,l),d.setPosition(p);else{d.updateData(e,f,u,l);var g={x:p[0],y:p[1]};s?d.attr(g):bi(d,g,i)}r.add(d),e.setItemGraphicEl(f,d)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=e},t.prototype.updateLayout=function(){var e=this,n=this._data;n&&n.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=mU(e),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n,r){this._progressiveEls=[],r=gU(r);function i(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=n.getItemLayout(a);if(YA(n,o,a,r)){var s=new this._SymbolCtor(n,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),n.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},t.prototype.eachRendered=function(e){U_(this._progressiveEls||this.group,e)},t.prototype.remove=function(e){var n=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){n.remove(i)},r.hostModel)}):n.removeAll()},t}();const hae=ert;function xL(t,e){return t.type===e}var trt=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},nrt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),Me(r)&&W(r,function(a,o){ze(a)&&(a={type:a}),r[o]=vt(a,trt(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(u){var l=u.name;i.push(l);var c;if(u.legendVisualProvider){var f=u.legendVisualProvider,h=f.getAllNames();n.isSeriesFiltered(u)||(i=i.concat(h)),h.length?r=r.concat(h):c=!0}else c=!0;c&&r3(u)&&r.push(u.name)}),this._availableNames=i;var a=this.get("data")||r,o=st(),s=$e(a,function(u){return(ze(u)||Kt(u))&&(u={name:u}),o.get(u.name)?null:(o.set(u.name,!0),new sr(u,this,this.ecModel))},this);this._data=$n(s,function(u){return!!u})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;W(a,function(o){r[o.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;W(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;W(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&At(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Qt);const PR=nrt;var Md=Ot,LR=W,Aw=Qn,rrt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new Aw),this.group.add(this._selectorGroup=new Aw),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var o=n.get("align"),s=n.get("orient");(!o||o==="auto")&&(o=n.get("left")==="right"&&s==="vertical"?"right":"left");var u=n.get("selector",!0),l=n.get("selectorPosition",!0);u&&(!l||l==="auto")&&(l=s==="horizontal"?"end":"start"),this.renderInner(o,n,r,i,u,s,l);var c=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=n.get("padding"),d=Ic(c,f,h),p=this.layoutInner(n,o,d,a,u,l),v=Ic(dt({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=rae(p,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,a,o,s,u){var l=this.getContentGroup(),c=st(),f=r.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),LR(r.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new Aw;m.newline=!0,l.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var y=g.getData(),x=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),b=y.getVisual("style"),C=this._createItem(g,v,p,d,r,n,x,b,w,f,a);C.on("click",Md(yU,v,null,a,h)).on("mouseover",Md(zR,g.name,null,a,h)).on("mouseout",Md(BR,g.name,null,a,h)),c.set(v,!0)}else i.eachRawSeries(function(D){if(!c.get(v)&&D.legendVisualProvider){var S=D.legendVisualProvider;if(!S.containName(v))return;var _=S.indexOfName(v),T=S.getItemVisual(_,"style"),E=S.getItemVisual(_,"legendIcon"),A=fa(T.fill);A&&A[3]===0&&(A[3]=.2,T=De(De({},T),{fill:Xc(A,"rgba")}));var N=this._createItem(D,v,p,d,r,n,{},T,E,f,a);N.on("click",Md(yU,null,v,a,h)).on("mouseover",Md(zR,null,v,a,h)).on("mouseout",Md(BR,null,v,a,h)),c.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,u)},e.prototype._createSelector=function(n,r,i,a,o){var s=this.getSelectorGroup();LR(n,function(l){var c=l.type,f=new $r({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=r.getModel("selectorLabel"),d=r.getModel(["emphasis","selectorLabel"]);K1(f,{normal:h,emphasis:d},{defaultText:l.title}),aS(f)})},e.prototype._createItem=function(n,r,i,a,o,s,u,l,c,f,h){var d=n.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),m=o.isSelected(r),g=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),x=a.get("icon");c=x||c||"roundRect";var w=irt(c,a,u,l,d,m,h),b=new Aw,C=a.getModel("textStyle");if(ot(n.getLegendIcon)&&(!x||x==="inherit"))b.add(n.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var D=x==="inherit"&&n.getData().getVisual("symbol")?g==="inherit"?n.getData().getVisual("symbolRotate"):g:0;b.add(art({itemWidth:p,itemHeight:v,icon:c,iconRotate:D,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var S=s==="left"?p+5:-5,_=s,T=o.get("formatter"),E=r;ze(T)&&T?E=T.replace("{name}",r??""):ot(T)&&(E=T(r));var A=m?C.getTextColor():a.get("inactiveColor");b.add(new $r({style:Bh(C,{text:E,x:S,y:v/2,fill:A,align:_,verticalAlign:"middle"},{inheritColor:A})}));var N=new Pn({shape:b.getBoundingRect(),invisible:!0}),R=a.getModel("tooltip");return R.get("show")&&W_({el:N,componentModel:o,itemName:r,itemTooltipOption:R.option}),b.add(N),b.eachChild(function(M){M.silent=!0}),N.silent=!f,this.getContentGroup().add(b),aS(b),b.__legendDataIndex=i,b},e.prototype.layoutInner=function(n,r,i,a,o,s){var u=this.getContentGroup(),l=this.getSelectorGroup();Lp(n.get("orient"),u,n.get("itemGap"),i.width,i.height);var c=u.getBoundingRect(),f=[-c.x,-c.y];if(l.markRedraw(),u.markRedraw(),o){Lp("horizontal",l,n.get("selectorItemGap",!0));var h=l.getBoundingRect(),d=[-h.x,-h.y],p=n.get("selectorButtonGap",!0),v=n.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",y=v===0?"y":"x";s==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,l.x=d[0],l.y=d[1],u.x=f[0],u.y=f[1];var x={x:0,y:0};return x[m]=c[m]+p+h[m],x[g]=Math.max(c[g],h[g]),x[y]=Math.min(0,h[y]+d[1-v]),x}else return u.x=f[0],u.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Ba);function irt(t,e,n,r,i,a,o){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),LR(m,function(y,x){m[x]==="inherit"&&(m[x]=g[x])})}var u=e.getModel("itemStyle"),l=u.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=u.getShallow("decal");l.decal=!f||f==="inherit"?r.decal:gR(f,o),l.fill==="inherit"&&(l.fill=r[i]),l.stroke==="inherit"&&(l.stroke=r[c]),l.opacity==="inherit"&&(l.opacity=(i==="fill"?r:n).opacity),s(l,r);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,n),l.fill==="auto"&&(l.fill=r.fill),l.stroke==="auto"&&(l.stroke=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),v=l[c];l.lineWidth=p==="auto"?r.lineWidth>0&&v?2:0:l.lineWidth,l.fill=e.get("inactiveColor"),l.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:l,lineStyle:d}}function art(t){var e=t.icon||"roundRect",n=Nc(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function yU(t,e,n,r){BR(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t??e}),zR(t,e,n,r)}function dae(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function zR(t,e,n,r){dae(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function BR(t,e,n,r){dae(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}const pae=rrt;function ort(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function Hg(t,e,n){var r={},i=t==="toggleSelected",a;return n.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?o[t]():(o[t](e.name),a=o.isSelected(e.name));var s=o.getData();W(s,function(u){var l=u.get("name");if(!(l===`
`||l==="")){var c=o.isSelected(l);r.hasOwnProperty(l)?r[l]=r[l]&&c:r[l]=c}})}),t==="allSelect"||t==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function srt(t){t.registerAction("legendToggleSelect","legendselectchanged",Ot(Hg,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Ot(Hg,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Ot(Hg,"inverseSelect")),t.registerAction("legendSelect","legendselected",Ot(Hg,"select")),t.registerAction("legendUnSelect","legendunselected",Ot(Hg,"unSelect"))}function vae(t){t.registerComponentModel(PR),t.registerComponentView(pae),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,ort),t.registerSubTypeDefaulter("legend",function(){return"plain"}),srt(t)}var urt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var a=Y_(n);t.prototype.init.call(this,n,r,i),xU(this,n,a)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),xU(this,this.option,n)},e.type="legend.scroll",e.defaultOption=Ine(PR.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(PR);function xU(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,_v(e,n,{type:"box",ignoreSize:!!i})}const lrt=urt;var wU=Qn,ZA=["width","height"],QA=["x","y"],crt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new wU),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new wU)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,a,o,s,u){var l=this;t.prototype.renderInner.call(this,n,r,i,a,o,s,u);var c=this._controllerGroup,f=r.get("pageIconSize",!0),h=Me(f)?f:[f,f];p("pagePrev",0);var d=r.getModel("pageTextStyle");c.add(new $r({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",y=X1(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:Ht(l._pageGo,l,g,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},e.prototype.layoutInner=function(n,r,i,a,o,s){var u=this.getSelectorGroup(),l=n.getOrient().index,c=ZA[l],f=QA[l],h=ZA[1-l],d=QA[1-l];o&&Lp("horizontal",u,n.get("selectorItemGap",!0));var p=n.get("selectorButtonGap",!0),v=u.getBoundingRect(),m=[-v.x,-v.y],g=ft(i);o&&(g[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(n,a,g,l,c,h,d,f);if(o){if(s==="end")m[l]+=y[c]+p;else{var x=v[c]+p;m[l]-=x,y[f]-=x}y[c]+=v[c]+p,m[1-l]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+m[1-l]),u.x=m[0],u.y=m[1],u.markRedraw()}return y},e.prototype._layoutContentAndController=function(n,r,i,a,o,s,u,l){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Lp(n.get("orient"),c,n.get("itemGap"),a?i.width:null,a?null:i.height),Lp("horizontal",h,n.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[o]>i[o],m=[-d.x,-d.y];r||(m[a]=c[l]);var g=[0,0],y=[-p.x,-p.y],x=yt(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(v){var w=n.get("pageButtonPosition",!0);w==="end"?y[a]+=i[o]-p[o]:g[a]+=p[o]+x}y[1-a]+=d[s]/2-p[s]/2,c.setPosition(m),f.setPosition(g),h.setPosition(y);var b={x:0,y:0};if(b[o]=v?i[o]:d[o],b[s]=Math.max(d[s],p[s]),b[u]=Math.min(0,p[u]+y[1-a]),f.__rectSize=i[o],v){var C={x:0,y:0};C[o]=Math.max(i[o]-p[o]-x,0),C[s]=b[s],f.setClipPath(new Pn({shape:C})),f.__rectSize=C[o]}else h.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(n);return D.pageIndex!=null&&bi(c,{x:D.contentPosition[0],y:D.contentPosition[1]},v?n:null),this._updatePageInfoView(n,D),b},e.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;W(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=r[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=n.get("pageFormatter"),s=r.pageIndex,u=s!=null?s+1:0,l=r.pageCount;a&&o&&a.setStyle("text",ze(o)?o.replace("{current}",u==null?"":u+"").replace("{total}",l==null?"":l+""):o({current:u,total:l}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=n.getOrient().index,s=ZA[o],u=QA[o],l=this._findTargetItemIndex(r),c=i.children(),f=c[l],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[o]=-v.s;for(var m=l+1,g=v,y=v,x=null;m<=h;++m)x=w(c[m]),(!x&&y.e>g.s+a||x&&!b(x,g.s))&&(y.i>g.i?g=y:g=x,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=x;for(var m=l-1,g=v,y=v,x=null;m>=-1;--m)x=w(c[m]),(!x||!b(y,x.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=x;return p;function w(C){if(C){var D=C.getBoundingRect(),S=D[u]+C[u];return{s:S,e:S+D[s],i:C.__legendDataIndex}}}function b(C,D){return C.e>=D&&C.s<=D+a}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var u=o.__legendDataIndex;a==null&&u!=null&&(a=s),u===n&&(r=s)}),r??a},e.type="legend.scroll",e}(pae);const frt=crt;function hrt(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function drt(t){ws(vae),t.registerComponentModel(lrt),t.registerComponentView(frt),hrt(t)}function prt(t){ws(vae),ws(drt)}var vrt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n){return ex(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(n){var r=new Qn,i=Nc("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(i),i.setStyle(n.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,u=n.itemHeight*.8,l=Nc(s,(n.itemWidth-u)/2,(n.itemHeight-u)/2,u,u,n.itemStyle.fill);r.add(l),l.setStyle(n.itemStyle);var c=n.iconRotate==="inherit"?o:n.iconRotate||0;return l.rotation=c*Math.PI/180,l.setOrigin([n.itemWidth/2,n.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Ro);const grt=vrt;function gae(t,e,n){var r=t.getBaseAxis(),i=t.getOtherAxis(r),a=mrt(i,n),o=r.dim,s=i.dim,u=e.mapDimension(s),l=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,f=$e(t.dimensions,function(p){return e.mapDimension(p)}),h=!1,d=e.getCalculationInfo("stackResultDimension");return Wh(e,f[0])&&(h=!0,f[0]=d),Wh(e,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:u,baseDim:l,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function mrt(t,e){var n=0,r=t.scale.getExtent();return e==="start"?n=r[0]:e==="end"?n=r[1]:Kt(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function mae(t,e,n,r){var i=NaN;t.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function yrt(t,e){var n=[];return e.diff(t).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,i){n.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function xrt(t,e,n,r,i,a,o,s){for(var u=yrt(t,e),l=[],c=[],f=[],h=[],d=[],p=[],v=[],m=gae(i,e,o),g=t.getLayout("points")||[],y=e.getLayout("points")||[],x=0;x<u.length;x++){var w=u[x],b=!0,C=void 0,D=void 0;switch(w.cmd){case"=":C=w.idx*2,D=w.idx1*2;var S=g[C],_=g[C+1],T=y[D],E=y[D+1];(isNaN(S)||isNaN(_))&&(S=T,_=E),l.push(S,_),c.push(T,E),f.push(n[C],n[C+1]),h.push(r[D],r[D+1]),v.push(e.getRawIndex(w.idx1));break;case"+":var A=w.idx,N=m.dataDimsForPoint,R=i.dataToPoint([e.get(N[0],A),e.get(N[1],A)]);D=A*2,l.push(R[0],R[1]),c.push(y[D],y[D+1]);var M=mae(m,i,e,A);f.push(M[0],M[1]),h.push(r[D],r[D+1]),v.push(e.getRawIndex(A));break;case"-":b=!1}b&&(d.push(w),p.push(p.length))}p.sort(function(q,Y){return v[q]-v[Y]});for(var $=l.length,L=zu($),O=zu($),F=zu($),V=zu($),X=[],x=0;x<p.length;x++){var P=p[x],U=x*2,j=P*2;L[U]=l[j],L[U+1]=l[j+1],O[U]=c[j],O[U+1]=c[j+1],F[U]=f[j],F[U+1]=f[j+1],V[U]=h[j],V[U+1]=h[j+1],X[x]=d[P]}return{current:L,next:O,stackedOnCurrent:F,stackedOnNext:V,status:X}}var wl=Math.min,bl=Math.max;function hh(t,e){return isNaN(t)||isNaN(e)}function VR(t,e,n,r,i,a,o,s,u){for(var l,c,f,h,d,p,v=n,m=0;m<r;m++){var g=e[v*2],y=e[v*2+1];if(v>=i||v<0)break;if(hh(g,y)){if(u){v+=a;continue}break}if(v===n)t[a>0?"moveTo":"lineTo"](g,y),f=g,h=y;else{var x=g-l,w=y-c;if(x*x+w*w<.5){v+=a;continue}if(o>0){for(var b=v+a,C=e[b*2],D=e[b*2+1];C===g&&D===y&&m<r;)m++,b+=a,v+=a,C=e[b*2],D=e[b*2+1],g=e[v*2],y=e[v*2+1],x=g-l,w=y-c;var S=m+1;if(u)for(;hh(C,D)&&S<r;)S++,b+=a,C=e[b*2],D=e[b*2+1];var _=.5,T=0,E=0,A=void 0,N=void 0;if(S>=r||hh(C,D))d=g,p=y;else{T=C-l,E=D-c;var R=g-l,M=C-g,$=y-c,L=D-y,O=void 0,F=void 0;if(s==="x"){O=Math.abs(R),F=Math.abs(M);var V=T>0?1:-1;d=g-V*O*o,p=y,A=g+V*F*o,N=y}else if(s==="y"){O=Math.abs($),F=Math.abs(L);var X=E>0?1:-1;d=g,p=y-X*O*o,A=g,N=y+X*F*o}else O=Math.sqrt(R*R+$*$),F=Math.sqrt(M*M+L*L),_=F/(F+O),d=g-T*o*(1-_),p=y-E*o*(1-_),A=g+T*o*_,N=y+E*o*_,A=wl(A,bl(C,g)),N=wl(N,bl(D,y)),A=bl(A,wl(C,g)),N=bl(N,wl(D,y)),T=A-g,E=N-y,d=g-T*O/F,p=y-E*O/F,d=wl(d,bl(l,g)),p=wl(p,bl(c,y)),d=bl(d,wl(l,g)),p=bl(p,wl(c,y)),T=g-d,E=y-p,A=g+T*F/O,N=y+E*F/O}t.bezierCurveTo(f,h,d,p,g,y),f=A,h=N}else t.lineTo(g,y)}l=g,c=y,v+=a}return m}var yae=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),wrt=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new yae},e.prototype.buildPath=function(n,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&hh(i[o*2-2],i[o*2-1]);o--);for(;a<o&&hh(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=VR(n,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=hu.CMD,s,u,l=r==="x",c=[],f=0;f<a.length;){var h=a[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,x=void 0;switch(h){case o.M:s=a[f++],u=a[f++];break;case o.L:if(d=a[f++],p=a[f++],x=l?(n-s)/(d-s):(n-u)/(p-u),x<=1&&x>=0){var w=l?(p-u)*x+u:(d-s)*x+s;return l?[n,w]:[w,n]}s=d,u=p;break;case o.C:d=a[f++],p=a[f++],v=a[f++],m=a[f++],g=a[f++],y=a[f++];var b=l?ZC(s,d,v,g,n,c):ZC(u,p,m,y,n,c);if(b>0)for(var C=0;C<b;C++){var D=c[C];if(D<=1&&D>=0){var w=l?mr(u,p,m,y,D):mr(s,d,v,g,D);return l?[n,w]:[w,n]}}s=g,u=y;break}}},e}(Tt),brt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(yae),Crt=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new brt},e.prototype.buildPath=function(n,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,u=r.smoothMonotone;if(r.connectNulls){for(;s>0&&hh(i[s*2-2],i[s*2-1]);s--);for(;o<s&&hh(i[o*2],i[o*2+1]);o++);}for(;o<s;){var l=VR(n,i,o,s,s,1,r.smooth,u,r.connectNulls);VR(n,a,o+l-1,l,s,-1,r.stackedOnSmooth,u,r.connectNulls),o+=l+1,n.closePath()}},e}(Tt);function xae(t,e,n,r,i){var a=t.getArea(),o=a.x,s=a.y,u=a.width,l=a.height,c=n.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,u+=c,l+=c,o=Math.floor(o),u=Math.round(u);var f=new Pn({shape:{x:o,y:s,width:u,height:l}});if(e){var h=t.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=u),f.shape.width=0):(p||(f.shape.y+=l),f.shape.height=0);var v=ot(i)?function(m){i(m,f)}:null;ha(f,{shape:{width:u,height:l,x:o,y:s}},n,null,r,v)}return f}function wae(t,e,n){var r=t.getArea(),i=Yn(r.r0,1),a=Yn(r.r,1),o=new du({shape:{cx:Yn(t.cx,1),cy:Yn(t.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=t.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,ha(o,{shape:{endAngle:r.endAngle,r:a}},n)}return o}function Srt(t,e,n,r,i){if(t){if(t.type==="polar")return wae(t,e,n);if(t.type==="cartesian2d")return xae(t,e,n,r,i)}else return null;return null}function bU(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function CU(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;){var o=t[a++],s=t[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[e,n],[r,i]]}function SU(t,e){var n=CU(t),r=n[0],i=n[1],a=CU(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function DU(t){return Kt(t)?t:t?.5:0}function Drt(t,e,n){if(!n.valueDim)return[];for(var r=e.count(),i=zu(r*2),a=0;a<r;a++){var o=mae(n,t,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Cl(t,e,n,r){var i=e.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,u=[],l=[],c=[],f=[];if(r){for(s=0;s<t.length;s+=2)!isNaN(t[s])&&!isNaN(t[s+1])&&f.push(t[s],t[s+1]);t=f}for(s=0;s<t.length-2;s+=2)switch(c[0]=t[s+2],c[1]=t[s+3],l[0]=t[s],l[1]=t[s+1],o.push(l[0],l[1]),n){case"end":u[a]=c[a],u[1-a]=l[1-a],o.push(u[0],u[1]);break;case"middle":var h=(l[a]+c[a])/2,d=[];u[a]=d[a]=h,u[1-a]=l[1-a],d[1-a]=c[1-a],o.push(u[0],u[1]),o.push(d[0],d[1]);break;default:u[a]=l[a],u[1-a]=c[1-a],o.push(u[0],u[1])}return o.push(t[s++],t[s++]),o}function _rt(t,e){var n=[],r=t.length,i,a;function o(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=YP(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<r;s++){var u=t[s],l=u.coord;if(l<0)i=u;else if(l>e){a?n.push(o(a,u,e)):i&&n.push(o(i,u,0),o(i,u,e));break}else i&&(n.push(o(i,u,0)),i=null),n.push(u),a=u}return n}function Trt(t,e,n){var r=t.getVisual("visualMeta");if(!(!r||!r.length||!t.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=t.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var u=e.getAxis(i),l=$e(a.stops,function(x){return{coord:u.toGlobalCoord(u.dataToCoord(x.value)),color:x.color}}),c=l.length,f=a.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),f.reverse());var h=_rt(l,i==="x"?n.getWidth():n.getHeight()),d=h.length;if(!d&&c)return l[0].coord<0?f[1]?f[1]:l[c-1].color:f[0]?f[0]:l[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";W(h,function(x){x.offset=(x.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new g3(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=m,y}}}function Ert(t,e,n){var r=t.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=n.getAxesByScale("ordinal")[0];if(a&&!(i&&Art(a,e))){var o=e.mapDimension(a.dim),s={};return W(a.getViewLabels(),function(u){var l=a.scale.getRawOrdinalNumber(u.tickValue);s[l]=1}),function(u){return!s.hasOwnProperty(e.get(o,u))}}}}function Art(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(yL.getSymbolSize(e,o)[t.isHorizontal()?1:0]*1.5>r)return!1;return!0}function krt(t,e){return isNaN(t)||isNaN(e)}function Irt(t){for(var e=t.length/2;e>0&&krt(t[e*2-2],t[e*2-1]);e--);return e-1}function _U(t,e){return[t[e*2],t[e*2+1]]}function Nrt(t,e,n){for(var r=t.length/2,i=n==="x"?0:1,a,o,s=0,u=-1,l=0;l<r;l++)if(o=t[l*2+i],!(isNaN(o)||isNaN(t[l*2+1-i]))){if(l===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){u=l;break}s=l,a=o}return{range:[s,u],t:(e-a)/(o-a)}}function bae(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<No.length;e++)if(t.get([No[e],"endLabel","show"]))return!0;return!1}function JA(t,e,n,r){if(xL(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},u=bae(r)?function(d,p){t._endLabelOnDuring(d,p,o,s,a,i,e)}:null,l=e.getBaseAxis().isHorizontal(),c=xae(e,n,r,function(){var d=t._endLabel;d&&n&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},u);if(!r.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);l?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return u&&u(1,c),c}else return wae(e,n,r)}function Rrt(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),i=n.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||o}}}var $rt=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=new Qn,r=new hae;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n},e.prototype.render=function(n,r,i){var a=this,o=n.coordinateSystem,s=this.group,u=n.getData(),l=n.getModel("lineStyle"),c=n.getModel("areaStyle"),f=u.getLayout("points")||[],h=o.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,y=!r.ssr&&n.isAnimationEnabled(),x=!c.isEmpty(),w=c.get("origin"),b=gae(o,u,w),C=x&&Drt(o,u,b),D=n.get("showSymbol"),S=n.get("connectNulls"),_=D&&!h&&Ert(n,u,o),T=this._data;T&&T.eachItemGraphicEl(function(Y,ne){Y.__temp&&(s.remove(Y),T.setItemGraphicEl(ne,null))}),D||p.remove(),s.add(g);var E=h?!1:n.get("step"),A;o&&o.getArea&&n.get("clip",!0)&&(A=o.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var N=Trt(u,o,i)||u.getVisual("style")[u.getVisual("drawType")];if(!(v&&d.type===o.type&&E===this._step))D&&p.updateData(u,{isIgnore:_,clipShape:A,disableAnimation:!0,getSymbolPoint:function(Y){return[f[Y*2],f[Y*2+1]]}}),y&&this._initSymbolLabelAnimation(u,o,A),E&&(f=Cl(f,o,E,S),C&&(C=Cl(C,o,E,S))),v=this._newPolyline(f),x?m=this._newPolygon(f,C):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(n,o,Vh(N)),g.setClipPath(JA(this,o,!0,n));else{x&&!m?m=this._newPolygon(f,C):m&&!x&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(n,o,Vh(N));var R=g.getClipPath();if(R){var M=JA(this,o,!1,n);ha(R,{shape:M.shape},n)}else g.setClipPath(JA(this,o,!0,n));D&&p.updateData(u,{isIgnore:_,clipShape:A,disableAnimation:!0,getSymbolPoint:function(Y){return[f[Y*2],f[Y*2+1]]}}),(!bU(this._stackedOnPoints,C)||!bU(this._points,f))&&(y?this._doUpdateAnimation(u,C,o,i,E,w,S):(E&&(f=Cl(f,o,E,S),C&&(C=Cl(C,o,E,S))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:C})))}var $=n.getModel("emphasis"),L=$.get("focus"),O=$.get("blurScope"),F=$.get("disabled");if(v.useStyle(dt(l.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),oS(v,n,"lineStyle"),v.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var V=v.getState("emphasis").style;V.lineWidth=+v.style.lineWidth+1}qt(v).seriesIndex=n.seriesIndex,V0(v,L,O,F);var X=DU(n.get("smooth")),P=n.get("smoothMonotone");if(v.setShape({smooth:X,smoothMonotone:P,connectNulls:S}),m){var U=u.getCalculationInfo("stackedOnSeries"),j=0;m.useStyle(dt(c.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),U&&(j=DU(U.get("smooth"))),m.setShape({smooth:X,stackedOnSmooth:j,smoothMonotone:P,connectNulls:S}),oS(m,n,"areaStyle"),qt(m).seriesIndex=n.seriesIndex,V0(m,L,O,F)}var q=function(Y){a._changePolyState(Y)};u.eachItemGraphicEl(function(Y){Y&&(Y.onHoverStateChange=q)}),this._polyline.onHoverStateChange=q,this._data=u,this._coordSys=o,this._stackedOnPoints=C,this._points=f,this._step=E,this._valueOrigin=w,n.get("triggerLineEvent")&&(this.packEventData(n,v),m&&this.packEventData(n,m))},e.prototype.packEventData=function(n,r){qt(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},e.prototype.highlight=function(n,r,i,a){var o=n.getData(),s=zh(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var u=o.getLayout("points"),l=o.getItemGraphicEl(s);if(!l){var c=u[s*2],f=u[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=n.get("zlevel")||0,d=n.get("z")||0;l=new yL(o,s),l.x=c,l.y=f,l.setZ(h,d);var p=l.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),l.__temp=!0,o.setItemGraphicEl(s,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else da.prototype.highlight.call(this,n,r,i,a)},e.prototype.downplay=function(n,r,i,a){var o=n.getData(),s=zh(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var u=o.getItemGraphicEl(s);u&&(u.__temp?(o.setItemGraphicEl(s,null),this.group.remove(u)):u.downplay())}else da.prototype.downplay.call(this,n,r,i,a)},e.prototype._changePolyState=function(n){var r=this._polygon;M6(this._polyline,n),r&&M6(r,n)},e.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new wrt({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(n,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Crt({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(n,r,i){var a,o,s=r.getBaseAxis(),u=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var l=n.hostModel,c=l.get("animationDuration");ot(c)&&(c=c(null));var f=l.get("animationDelay")||0,h=ot(f)?f(null):f;n.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,y=void 0,x=void 0;if(i)if(o){var w=i,b=r.pointToCoord(m);a?(g=w.startAngle,y=w.endAngle,x=-b[1]/180*Math.PI):(g=w.r0,y=w.r,x=b[0])}else{var C=i;a?(g=C.x,y=C.x+C.width,x=d.x):(g=C.y+C.height,y=C.y,x=d.y)}var D=y===g?0:(x-g)/(y-g);u&&(D=1-D);var S=ot(f)?f(p):c*D+h,_=v.getSymbolPath(),T=_.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:S}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:S}),_.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(n,r,i){var a=n.getModel("endLabel");if(bae(n)){var o=n.getData(),s=this._polyline,u=o.getLayout("points");if(!u){s.removeTextContent(),this._endLabel=null;return}var l=this._endLabel;l||(l=this._endLabel=new $r({z2:200}),l.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Irt(u);c>=0&&(K1(s,Y1(n,"endLabel"),{inheritColor:i,labelFetcher:n,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?fae(o,d):mL(o,f)},enableTextSetter:!0},Rrt(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(n,r,i,a,o,s,u){var l=this._endLabel,c=this._polyline;if(l){n<1&&a.originalX==null&&(a.originalX=l.x,a.originalY=l.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,m=u.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,x=r.shape,w=y?g?x.x:x.y+x.height:g?x.x+x.width:x.y,b=(g?v:0)*(y?-1:1),C=(g?0:-v)*(y?-1:1),D=g?"x":"y",S=Nrt(f,w,D),_=S.range,T=_[1]-_[0],E=void 0;if(T>=1){if(T>1&&!d){var A=_U(f,_[0]);l.attr({x:A[0]+b,y:A[1]+C}),o&&(E=h.getRawValue(_[0]))}else{var A=c.getPointOn(w,D);A&&l.attr({x:A[0]+b,y:A[1]+C});var N=h.getRawValue(_[0]),R=h.getRawValue(_[1]);o&&(E=yje(i,p,N,R,S.t))}a.lastFrameIndex=_[0]}else{var M=n===1||a.lastFrameIndex>0?_[0]:0,A=_U(f,M);o&&(E=h.getRawValue(M)),l.attr({x:A[0]+b,y:A[1]+C})}if(o){var $=H_(l);typeof $.setLabelText=="function"&&$.setLabelText(E)}}},e.prototype._doUpdateAnimation=function(n,r,i,a,o,s,u){var l=this._polyline,c=this._polygon,f=n.hostModel,h=xrt(this._data,n,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(o&&(d=Cl(h.current,i,o,u),p=Cl(h.stackedOnCurrent,i,o,u),v=Cl(h.next,i,o,u),m=Cl(h.stackedOnNext,i,o,u)),SU(d,v)>3e3||c&&SU(p,m)>3e3){l.stopAnimation(),l.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}l.shape.__points=h.current,l.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),l.stopAnimation(),bi(l,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),bi(c,{shape:{stackedOnPoints:m}},f),l.shape.points!==c.shape.points&&(c.shape.points=l.shape.points));for(var y=[],x=h.status,w=0;w<x.length;w++){var b=x[w].cmd;if(b==="="){var C=n.getItemGraphicEl(x[w].idx1);C&&y.push({el:C,ptIdx:w})}}l.animators&&l.animators.length&&l.animators[0].during(function(){c&&c.dirtyShape();for(var D=l.shape.__points,S=0;S<y.length;S++){var _=y[S].el,T=y[S].ptIdx*2;_.x=D[T],_.y=D[T+1],_.markRedraw()}})},e.prototype.remove=function(n){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(da);const Mrt=$rt;function wL(t,e){return{seriesType:t,plan:B3(),reset:function(n){var r=n.getData(),i=n.coordinateSystem,a=n.pipelineContext,o=e||a.large;if(i){var s=$e(i.dimensions,function(d){return r.mapDimension(d)}).slice(0,2),u=s.length,l=r.getCalculationInfo("stackResultDimension");Wh(r,s[0])&&(s[0]=l),Wh(r,s[1])&&(s[1]=l);var c=r.getStore(),f=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return u&&{progress:function(d,p){for(var v=d.end-d.start,m=o&&zu(v*u),g=[],y=[],x=d.start,w=0;x<d.end;x++){var b=void 0;if(u===1){var C=c.get(f,x);b=i.dataToPoint(C,null,y)}else g[0]=c.get(f,x),g[1]=c.get(h,x),b=i.dataToPoint(g,null,y);o?(m[w++]=b[0],m[w++]=b[1]):p.setItemLayout(x,b.slice())}o&&p.setLayout("points",m)}}}}}}var Ort={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return n===0?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Frt=function(t){return Math.round(t.length/2)};function Cae(t){return{seriesType:t,reset:function(e,n,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var u=o.getBaseAxis(),l=o.getOtherAxis(u),c=u.getExtent(),f=r.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){a==="lttb"&&e.setData(i.lttbDownSample(i.mapDimension(l.dim),1/d));var p=void 0;ze(a)?p=Ort[a]:ot(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(l.dim),1/d,p,Frt))}}}}}function Prt(t){t.registerChartView(Mrt),t.registerSeriesModel(grt),t.registerLayout(wL("line",!0)),t.registerVisual({seriesType:"line",reset:function(e){var n=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Cae("line"))}var Sae=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return ex(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(n),s=a.dataToPoint(o);if(i)W(a.getAxes(),function(h,d){if(h.type==="category"&&r!=null){var p=h.getTicksCoords(),v=o[d],m=r[d]==="x1"||r[d]==="y1";if(m&&(v+=1),p.length<2)return;if(p.length===2){s[d]=h.toGlobalCoord(h.getExtent()[m?1:0]);return}for(var g=void 0,y=void 0,x=1,w=0;w<p.length;w++){var b=p[w].coord,C=w===p.length-1?p[w-1].tickValue+x:p[w].tickValue;if(C===v){y=b;break}else if(C<v)g=b;else if(g!=null&&C>v){y=(b+g)/2;break}w===1&&(x=C-p[0].tickValue)}y==null&&(g?g&&(y=p[p.length-1].coord):y=p[0].coord),s[d]=h.toGlobalCoord(y)}});else{var u=this.getData(),l=u.getLayout("offset"),c=u.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;s[f]+=l+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Ro);Ro.registerClass(Sae);const TU=Sae;var Lrt=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(){return ex(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},e.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Ine(TU.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(TU);const zrt=Lrt;var Brt=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Vrt=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Brt},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),u=(s-o)*.5,l=o+u,c=r.startAngle,f=r.endAngle,h=r.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),y=Math.sin(f);p?(n.moveTo(v*o+i,m*o+a),n.arc(v*l+i,m*l+a,u,-Math.PI+c,c,!h)):n.moveTo(v*s+i,m*s+a),n.arc(i,a,s,c,f,!h),n.arc(g*l+i,y*l+a,u,f-Math.PI*2,f-Math.PI,!h),o!==0&&n.arc(i,a,o,f,c,h)},e}(Tt);const EU=Vrt;function Wrt(t,e){e=e||{};var n=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return tS(r,i,a);var s=t(o),u=i.distance!=null?i.distance:5,l=this.shape,c=l.cx,f=l.cy,h=l.r,d=l.r0,p=(h+d)/2,v=l.startAngle,m=l.endAngle,g=(v+m)/2,y=n?Math.abs(h-d)/2:0,x=Math.cos,w=Math.sin,b=c+h*x(v),C=f+h*w(v),D="left",S="top";switch(s){case"startArc":b=c+(d-u)*x(g),C=f+(d-u)*w(g),D="center",S="top";break;case"insideStartArc":b=c+(d+u)*x(g),C=f+(d+u)*w(g),D="center",S="bottom";break;case"startAngle":b=c+p*x(v)+kw(v,u+y,!1),C=f+p*w(v)+Iw(v,u+y,!1),D="right",S="middle";break;case"insideStartAngle":b=c+p*x(v)+kw(v,-u+y,!1),C=f+p*w(v)+Iw(v,-u+y,!1),D="left",S="middle";break;case"middle":b=c+p*x(g),C=f+p*w(g),D="center",S="middle";break;case"endArc":b=c+(h+u)*x(g),C=f+(h+u)*w(g),D="center",S="bottom";break;case"insideEndArc":b=c+(h-u)*x(g),C=f+(h-u)*w(g),D="center",S="top";break;case"endAngle":b=c+p*x(m)+kw(m,u+y,!0),C=f+p*w(m)+Iw(m,u+y,!0),D="left",S="middle";break;case"insideEndAngle":b=c+p*x(m)+kw(m,-u+y,!0),C=f+p*w(m)+Iw(m,-u+y,!0),D="right",S="middle";break;default:return tS(r,i,a)}return r=r||{},r.x=b,r.y=C,r.align=D,r.verticalAlign=S,r}}function Urt(t,e,n,r){if(Kt(r)){t.setTextConfig({rotation:r});return}else if(Me(e)){t.setTextConfig({rotation:0});return}var i=t.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,u,l=n(e);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":u=s;break;case"startAngle":case"insideStartAngle":u=a;break;case"endAngle":case"insideEndAngle":u=o;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-u;l==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function kw(t,e,n){return e*Math.sin(t)*(n?-1:1)}function Iw(t,e,n){return e*Math.cos(t)*(n?1:-1)}function pm(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;Me(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:$e(r,function(a){return Ac(a,i)})}}var ek=Math.max,tk=Math.min;function Grt(t,e){var n=t.getArea&&t.getArea();if(xL(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var Hrt=function(t){Ge(e,t);function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return e.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var o=n.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},e.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},e.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},e.prototype.eachRendered=function(n){U_(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n,r,i,a){var o=this.group,s=n.getData(),u=this._data,l=n.coordinateSystem,c=l.getBaseAxis(),f;l.type==="cartesian2d"?f=c.isHorizontal():l.type==="polar"&&(f=c.dim==="angle");var h=n.isAnimationEnabled()?n:null,d=jrt(n,l);d&&this._enableRealtimeSort(d,s,i);var p=n.get("clip",!0)||d,v=Grt(l,s);o.removeClipPath();var m=n.get("roundCap",!0),g=n.get("showBackground",!0),y=n.getModel("backgroundStyle"),x=y.get("borderRadius")||0,w=[],b=this._backgroundEls,C=a&&a.isInitSort,D=a&&a.type==="changeAxisOrder";function S(E){var A=Nw[l.type](s,E),N=Jrt(l,f,A);return N.useStyle(y.getItemStyle()),l.type==="cartesian2d"?N.setShape("r",x):N.setShape("cornerRadius",x),w[E]=N,N}s.diff(u).add(function(E){var A=s.getItemModel(E),N=Nw[l.type](s,E,A);if(g&&S(E),!(!s.hasValue(E)||!RU[l.type](N))){var R=!1;p&&(R=AU[l.type](v,N));var M=kU[l.type](n,s,E,N,f,h,c.model,!1,m);d&&(M.forceLabelAnimation=!0),$U(M,s,E,A,N,n,f,l.type==="polar"),C?M.attr({shape:N}):d?IU(d,h,M,N,E,f,!1,!1):ha(M,{shape:N},n,E),s.setItemGraphicEl(E,M),o.add(M),M.ignore=R}}).update(function(E,A){var N=s.getItemModel(E),R=Nw[l.type](s,E,N);if(g){var M=void 0;b.length===0?M=S(A):(M=b[A],M.useStyle(y.getItemStyle()),l.type==="cartesian2d"?M.setShape("r",x):M.setShape("cornerRadius",x),w[E]=M);var $=Nw[l.type](s,E),L=_ae(f,$,l);bi(M,{shape:L},h,E)}var O=u.getItemGraphicEl(A);if(!s.hasValue(E)||!RU[l.type](R)){o.remove(O);return}var F=!1;if(p&&(F=AU[l.type](v,R),F&&o.remove(O)),O?y3(O):O=kU[l.type](n,s,E,R,f,h,c.model,!!O,m),d&&(O.forceLabelAnimation=!0),D){var V=O.getTextContent();if(V){var X=H_(V);X.prevValue!=null&&(X.prevValue=X.value)}}else $U(O,s,E,N,R,n,f,l.type==="polar");C?O.attr({shape:R}):d?IU(d,h,O,R,E,f,!0,D):bi(O,{shape:R},n,E,null),s.setItemGraphicEl(E,O),O.ignore=F,o.add(O)}).remove(function(E){var A=u.getItemGraphicEl(E);A&&lS(A,n,E)}).execute();var _=this._backgroundGroup||(this._backgroundGroup=new Qn);_.removeAll();for(var T=0;T<w.length;++T)_.add(w[T]);o.add(_),this._backgroundEls=w,this._data=s},e.prototype._renderLarge=function(n,r,i){this._clear(),OU(n,this.group),this._updateLargeClip(n)},e.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),OU(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&Srt(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var o=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var s=function(u){var l=r.getItemGraphicEl(u),c=l&&l.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(o,s){var u=i(s);u=u??NaN,a.push({dataIndex:s,mappedValue:u,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:$e(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,o=n.mapDimension(i.dim),s=Number.MAX_VALUE,u=0,l=a.getOrdinalMeta().categories.length;u<l;++u){var c=n.rawIndexOf(o,a.getRawOrdinalNumber(u)),f=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},e.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(n.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var o=this._dataSort(n,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,o=this._dataSort(n,a,function(s){return n.get(n.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){lS(a,n,qt(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(da),AU={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,a=t.y+t.height,o=ek(e.x,t.x),s=tk(e.x+e.width,i),u=ek(e.y,t.y),l=tk(e.y+e.height,a),c=s<o,f=l<u;return e.x=c&&o>i?s:o,e.y=f&&u>a?l:u,e.width=c?0:s-o,e.height=f?0:l-u,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var i=tk(e.r,t.r),a=ek(e.r0,t.r0);e.r=i,e.r0=a;var o=i-a<0;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},kU={cartesian2d:function(t,e,n,r,i,a,o,s,u){var l=new Pn({shape:De({},r),z2:1});if(l.__dataIndex=n,l.name="item",a){var c=l.shape,f=i?"height":"width";c[f]=0}return l},polar:function(t,e,n,r,i,a,o,s,u){var l=!i&&u?EU:du,c=new l({shape:r,z2:1});c.name="item";var f=Dae(i);if(c.calculateTextPosition=Wrt(f,{isRoundCap:l===EU}),a){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?r.r0:r.startAngle,p[d]=r[d],(s?bi:ha)(c,{shape:p},a)}return c}};function jrt(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function IU(t,e,n,r,i,a,o,s){var u,l;a?(l={x:r.x,width:r.width},u={y:r.y,height:r.height}):(l={y:r.y,height:r.height},u={x:r.x,width:r.width}),s||(o?bi:ha)(n,{shape:u},e,i,null);var c=e?t.baseAxis.model:null;(o?bi:ha)(n,{shape:l},c,i)}function NU(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var qrt=["x","y","width","height"],Xrt=["cx","cy","r","startAngle","endAngle"],RU={cartesian2d:function(t){return!NU(t,qrt)},polar:function(t){return!NU(t,Xrt)}},Nw={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=n?Yrt(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Krt(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function Dae(t){return function(e){var n=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(t)}function $U(t,e,n,r,i,a,o,s){var u=e.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var c=t.shape,f=pm(r.getModel("itemStyle"),c,!0);De(c,f),t.setShape(c)}}else{var l=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",l)}t.useStyle(u);var h=r.getShallow("cursor");h&&t.attr("cursor",h);var d=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Y1(r);K1(t,p,{labelFetcher:a,labelDataIndex:n,defaultText:mL(a.getData(),n),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:d});var v=t.getTextContent();if(s&&v){var m=r.get(["label","position"]);t.textConfig.inside=m==="middle"?!0:null,Urt(t,m==="outside"?d:m,Dae(o),r.get(["label","rotate"]))}TXe(v,p,a.getRawValue(n),function(y){return fae(e,y)});var g=r.getModel(["emphasis"]);V0(t,g.get("focus"),g.get("blurScope"),g.get("disabled")),oS(t,r),Krt(i)&&(t.style.fill="none",t.style.stroke="none",W(t.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Yrt(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var Zrt=function(){function t(){}return t}(),MU=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Zrt},e.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],u=[],l=this.barWidth,c=0;c<i.length;c+=3)u[a]=l,u[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],n.rect(s[0],s[1],u[0],u[1])},e}(Tt);function OU(t,e,n,r){var i=t.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),u=t.getModel("backgroundStyle"),l=i.getLayout("largeBackgroundPoints");if(l){var c=new MU({shape:{points:l},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(u.getItemStyle()),e.add(c),n&&n.push(c)}var f=new MU({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,e.add(f),f.useStyle(i.getVisual("style")),qt(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",FU),f.on("mousemove",FU)),n&&n.push(f)}var FU=tT(function(t){var e=this,n=Qrt(e,t.offsetX,t.offsetY);qt(e).dataIndex=n>=0?n:null},30,!1);function Qrt(t,e,n){for(var r=t.baseDimIdx,i=1-r,a=t.shape.points,o=t.largeDataIndices,s=[],u=[],l=t.barWidth,c=0,f=a.length/3;c<f;c++){var h=c*3;if(u[r]=l,u[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],u[i]<0&&(s[i]+=u[i],u[i]=-u[i]),e>=s[0]&&e<=s[0]+u[0]&&n>=s[1]&&n<=s[1]+u[1])return o[c]}return-1}function _ae(t,e,n){if(xL(n,"cartesian2d")){var r=e,i=n.getArea();return{x:t?r.x:i.x,y:t?i.y:r.y,width:t?r.width:i.width,height:t?i.height:r.height}}else{var i=n.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:a.r0,r:t?i.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:Math.PI*2}}}function Jrt(t,e,n){var r=t.type==="polar"?du:Pn;return new r({shape:_ae(e,n,t),silent:!0,z2:0})}const eit=Hrt;function tit(t){t.registerChartView(eit),t.registerSeriesModel(zrt),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Ot(NQe,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,RQe("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Cae("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,n){var r=e.componentType||"series";n.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var Rw=Math.PI*2,PU=Math.PI/180;function Tae(t,e){return Ic(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Eae(t,e){var n=Tae(t,e),r=t.get("center"),i=t.get("radius");Me(i)||(i=[0,i]);var a=bn(n.width,e.getWidth()),o=bn(n.height,e.getHeight()),s=Math.min(a,o),u=bn(i[0],s/2),l=bn(i[1],s/2),c,f,h=t.coordinateSystem;if(h){var d=h.dataToPoint(r);c=d[0]||0,f=d[1]||0}else Me(r)||(r=[r,r]),c=bn(r[0],a)+n.x,f=bn(r[1],o)+n.y;return{cx:c,cy:f,r0:u,r:l}}function nit(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),a=i.mapDimension("value"),o=Tae(r,n),s=Eae(r,n),u=s.cx,l=s.cy,c=s.r,f=s.r0,h=-r.get("startAngle")*PU,d=r.get("minAngle")*PU,p=0;i.each(a,function(T){!isNaN(T)&&p++});var v=i.getSum(a),m=Math.PI/(v||p)*2,g=r.get("clockwise"),y=r.get("roseType"),x=r.get("stillShowZeroSum"),w=i.getDataExtent(a);w[0]=0;var b=Rw,C=0,D=h,S=g?1:-1;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(T,E){var A;if(isNaN(T)){i.setItemLayout(E,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:u,cy:l,r0:f,r:y?NaN:c});return}y!=="area"?A=v===0&&x?m:T*m:A=Rw/p,A<d?(A=d,b-=d):C+=T;var N=D+S*A;i.setItemLayout(E,{angle:A,startAngle:D,endAngle:N,clockwise:g,cx:u,cy:l,r0:f,r:y?Mu(T,w,[f,c]):c}),D=N}),b<Rw&&p)if(b<=.001){var _=Rw/p;i.each(a,function(T,E){if(!isNaN(T)){var A=i.getItemLayout(E);A.angle=_,A.startAngle=h+S*E*_,A.endAngle=h+S*(E+1)*_}})}else m=b/C,D=h,i.each(a,function(T,E){if(!isNaN(T)){var A=i.getItemLayout(E),N=A.angle===d?d:T*m;A.startAngle=D,A.endAngle=D+S*N,D+=S*N}})})}function rit(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var iit=Math.PI/180;function LU(t,e,n,r,i,a,o,s,u,l){if(t.length<2)return;function c(v){for(var m=v.rB,g=m*m,y=0;y<v.list.length;y++){var x=v.list[y],w=Math.abs(x.label.y-n),b=r+x.len,C=b*b,D=Math.sqrt((1-Math.abs(w*w/g))*C),S=e+(D+x.len2)*i,_=S-x.label.x,T=x.targetTextWidth-_*i;Aae(x,T,!0),x.label.x=S}}function f(v){for(var m={list:[],maxY:0},g={list:[],maxY:0},y=0;y<v.length;y++)if(v[y].labelAlignTo==="none"){var x=v[y],w=x.label.y>n?g:m,b=Math.abs(x.label.y-n);if(b>=w.maxY){var C=x.label.x-e-x.len2*i,D=r+x.len,S=Math.abs(C)<D?Math.sqrt(b*b/(1-C*C/D/D)):D;w.rB=S,w.maxY=b}w.list.push(x)}c(m),c(g)}for(var h=t.length,d=0;d<h;d++)if(t[d].position==="outer"&&t[d].labelAlignTo==="labelLine"){var p=t[d].label.x-l;t[d].linePoints[1][0]+=p,t[d].label.x=l}zJe(t,u,u+o)&&f(t)}function ait(t,e,n,r,i,a,o,s){for(var u=[],l=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<t.length;h++){var d=t[h].label;nk(t[h])||(d.x<e?(c=Math.min(c,d.x),u.push(t[h])):(f=Math.max(f,d.x),l.push(t[h])))}for(var h=0;h<t.length;h++){var p=t[h];if(!nk(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var d=p.label,v=p.linePoints,m=void 0;p.labelAlignTo==="edge"?d.x<e?m=v[2][0]-p.labelDistance-o-p.edgeDistance:m=o+i-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?d.x<e?m=c-o-p.bleedMargin:m=o+i-f-p.bleedMargin:d.x<e?m=d.x-o-p.bleedMargin:m=o+i-d.x-p.bleedMargin,p.targetTextWidth=m,Aae(p,m)}}LU(l,e,n,r,1,i,a,o,s,f),LU(u,e,n,r,-1,i,a,o,s,c);for(var h=0;h<t.length;h++){var p=t[h];if(!nk(p)&&p.linePoints){var d=p.label,v=p.linePoints,g=p.labelAlignTo==="edge",y=d.style.padding,x=y?y[1]+y[3]:0,w=d.style.backgroundColor?0:x,b=p.rect.width+w,C=v[1][0]-v[2][0];g?d.x<e?v[2][0]=o+p.edgeDistance+b+p.labelDistance:v[2][0]=o+i-p.edgeDistance-b-p.labelDistance:(d.x<e?v[2][0]=d.x+p.labelDistance:v[2][0]=d.x-p.labelDistance,v[1][0]=v[2][0]+C),v[1][1]=v[2][1]=d.y}}}function Aae(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,a=t.rect,o=i.backgroundColor,s=i.padding,u=s?s[1]+s[3]:0,l=i.overflow,c=a.width+(o?0:u);if(e<c||n){var f=a.height;if(l&&l.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-u);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var d=e-u,p=e<c?d:n?d>t.unconstrainedWidth?null:d:null;r.setStyle("width",p)}var v=r.getBoundingRect();a.width=v.width;var m=(r.style.margin||0)+2.1;a.height=v.height+m,a.y-=(a.height-f)/2}}}function nk(t){return t.position==="center"}function oit(t){var e=t.getData(),n=[],r,i,a=!1,o=(t.get("minShowLabelAngle")||0)*iit,s=e.getLayout("viewRect"),u=e.getLayout("r"),l=s.width,c=s.x,f=s.y,h=s.height;function d(C){C.ignore=!0}function p(C){if(!C.ignore)return!0;for(var D in C.states)if(C.states[D].ignore===!1)return!0;return!1}e.each(function(C){var D=e.getItemGraphicEl(C),S=D.shape,_=D.getTextContent(),T=D.getTextGuideLine(),E=e.getItemModel(C),A=E.getModel("label"),N=A.get("position")||E.get(["emphasis","label","position"]),R=A.get("distanceToLabelLine"),M=A.get("alignTo"),$=bn(A.get("edgeDistance"),l),L=A.get("bleedMargin"),O=E.getModel("labelLine"),F=O.get("length");F=bn(F,l);var V=O.get("length2");if(V=bn(V,l),Math.abs(S.endAngle-S.startAngle)<o){W(_.states,d),_.ignore=!0,T&&(W(T.states,d),T.ignore=!0);return}if(p(_)){var X=(S.startAngle+S.endAngle)/2,P=Math.cos(X),U=Math.sin(X),j,q,Y,ne;r=S.cx,i=S.cy;var ue=N==="inside"||N==="inner";if(N==="center")j=S.cx,q=S.cy,ne="center";else{var te=(ue?(S.r+S.r0)/2*P:S.r*P)+r,oe=(ue?(S.r+S.r0)/2*U:S.r*U)+i;if(j=te+P*3,q=oe+U*3,!ue){var ce=te+P*(F+u-S.r),pe=oe+U*(F+u-S.r),me=ce+(P<0?-1:1)*V,_e=pe;M==="edge"?j=P<0?c+$:c+l-$:j=me+(P<0?-R:R),q=_e,Y=[[te,oe],[ce,pe],[me,_e]]}ne=ue?"center":M==="edge"?P>0?"right":"left":P>0?"left":"right"}var Ne=Math.PI,ke=0,Ve=A.get("rotate");if(Kt(Ve))ke=Ve*(Ne/180);else if(N==="center")ke=0;else if(Ve==="radial"||Ve===!0){var je=P<0?-X+Ne:-X;ke=je}else if(Ve==="tangential"&&N!=="outside"&&N!=="outer"){var ct=Math.atan2(P,U);ct<0&&(ct=Ne*2+ct);var rt=U>0;rt&&(ct=Ne+ct),ke=ct-Ne}if(a=!!ke,_.x=j,_.y=q,_.rotation=ke,_.setStyle({verticalAlign:"middle"}),ue){_.setStyle({align:ne});var G=_.states.select;G&&(G.x+=_.x,G.y+=_.y)}else{var xt=_.getBoundingRect().clone();xt.applyTransform(_.getComputedTransform());var it=(_.style.margin||0)+2.1;xt.y-=it/2,xt.height+=it,n.push({label:_,labelLine:T,position:N,len:F,len2:V,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new Je(P,U),linePoints:Y,textAlign:ne,labelDistance:R,labelAlignTo:M,edgeDistance:$,bleedMargin:L,rect:xt,unconstrainedWidth:xt.width,labelStyleWidth:_.style.width})}D.setTextConfig({inside:ue})}}),!a&&t.get("avoidLabelOverlap")&&ait(n,r,i,u,l,h,c,f);for(var v=0;v<n.length;v++){var m=n[v],g=m.label,y=m.labelLine,x=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:m.textAlign}),x&&(W(g.states,d),g.ignore=!0);var w=g.states.select;w&&(w.x+=g.x,w.y+=g.y)}if(y){var b=m.linePoints;x||!b?(W(y.states,d),y.ignore=!0):(RJe(b,m.minTurnAngle),$Je(b,m.surfaceNormal,m.maxSurfaceAngle),y.setShape({points:b}),g.__hostTarget.textGuideLineConfig={anchor:new Je(b[0][0],b[0][1])})}}}var sit=function(t){Ge(e,t);function e(n,r,i){var a=t.call(this)||this;a.z2=2;var o=new $r;return a.setTextContent(o),a.updateData(n,r,i,!0),a}return e.prototype.updateData=function(n,r,i,a){var o=this,s=n.hostModel,u=n.getItemModel(r),l=u.getModel("emphasis"),c=n.getItemLayout(r),f=De(pm(u.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var h=s.getShallow("animationType");s.ecModel.ssr?(ha(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):h==="scale"?(o.shape.r=c.r0,ha(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),ha(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,bi(o,{shape:{endAngle:c.endAngle}},s,r))}else y3(o),bi(o,{shape:f},s,r);o.useStyle(n.getItemVisual(r,"style")),oS(o,u);var d=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(d)*p,m=Math.sin(d)*p,g=u.getShallow("cursor");g&&o.attr("cursor",g),this._updateLabel(s,n,r),o.ensureState("emphasis").shape=De({r:c.r+(l.get("scale")&&l.get("scaleSize")||0)},pm(l.getModel("itemStyle"),c)),De(o.ensureState("select"),{x:v,y:m,shape:pm(u.getModel(["select","itemStyle"]),c)}),De(o.ensureState("blur"),{shape:pm(u.getModel(["blur","itemStyle"]),c)});var y=o.getTextGuideLine(),x=o.getTextContent();y&&De(y.ensureState("select"),{x:v,y:m}),De(x.ensureState("select"),{x:v,y:m}),V0(this,l.get("focus"),l.get("blurScope"),l.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),u=r.getItemVisual(i,"style"),l=u&&u.fill,c=u&&u.opacity;K1(a,Y1(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:l,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=n.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new ng,this.setTextGuideLine(d)),OJe(this,FJe(o),{stroke:l,opacity:$p(s.get(["lineStyle","opacity"]),c,1)})}},e}(du),uit=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,a){var o=n.getData(),s=this._data,u=this.group,l;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(l=c.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),o.count()===0&&n.get("showEmptyCircle")){var h=new du({shape:Eae(n,i)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,u.add(h)}o.diff(s).add(function(d){var p=new sit(o,d,l);o.setItemGraphicEl(d,p),u.add(p)}).update(function(d,p){var v=s.getItemGraphicEl(p);v.updateData(o,d,l),v.off("click"),u.add(v),o.setItemGraphicEl(d,v)}).remove(function(d){var p=s.getItemGraphicEl(d);lS(p,n,d)}).execute(),oit(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,u=Math.sqrt(o*o+s*s);return u<=a.r&&u>=a.r0}},e.type="pie",e}(da);const lit=uit;function cit(t,e,n){e=Me(e)&&{coordDimensions:e}||De({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=eL(r,e).dimensions,a=new J3(i,t);return a.initData(r,n),a}var fit=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}();const hit=fit;var dit=Gn(),pit=function(t){Ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new hit(Ht(this.getData,this),Ht(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return cit(this,{coordDimensions:["value"],encodeDefaulter:Ot(rKe,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=dit(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(u){o.push(u)}),a=i.seats=xte(o,r.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,n);return s.percent=a[n]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(n){XN(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Ro);const vit=pit;function git(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(Kt(o)&&!isNaN(o)&&o<0)})}}}function mit(t){t.registerChartView(lit),t.registerSeriesModel(vit),GYe("pie",t.registerAction),t.registerLayout(Ot(nit,"pie")),t.registerProcessor(rit("pie")),t.registerProcessor(git("pie"))}var yit=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return ex(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Ro);const xit=yit;var kae=4,wit=function(){function t(){}return t}(),bit=function(t){Ge(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new wit},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(n,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,u=n.getContext?n.getContext():n,l=u&&a[0]<kae,c=this.softClipShape,f;if(l){this._ctx=u;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-a[0]/2,s.y=d-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(n,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var u=r[s++],l=r[s++];isNaN(u)||isNaN(l)||o&&!o.contain(u,l)||a.fillRect(u-i[0]/2,l-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),u=Math.max(o[1],4),l=a.length/2-1;l>=0;l--){var c=l*2,f=a[c]-s/2,h=a[c+1]-u/2;if(n>=f&&r>=h&&n<=f+s&&r<=h+u)return l}return-1},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],u=1/0,l=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];u=Math.min(d,u),c=Math.max(d,c),l=Math.min(p,l),f=Math.max(p,f)}n=this._rect=new _t(u-o/2,l-s/2,c-u+o,f-l+s)}return n},e}(Tt),Cit=function(){function t(){this.group=new Qn}return t.prototype.updateData=function(e,n){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,n)},t.prototype.updateLayout=function(e){var n=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,n,r){var i=this._newAdded[0],a=n.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,u=new Float32Array(s+a.length);u.set(o),u.set(a,s),i.endIndex=e.end,i.setShape({points:u})}else{this._newAdded=[];var l=this._create();l.startIndex=e.start,l.endIndex=e.end,l.incremental=!0,l.setShape({points:a}),this._setCommon(l,n,r)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new bit({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Nc(n.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<kae;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=n.getVisual("style"),u=s&&s.fill;u&&e.setColor(u);var l=qt(e);l.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){l.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(l.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}();const Sit=Cit;var Dit=function(t){Ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},e.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=wL("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},e.prototype._getClipShape=function(n){var r=n.coordinateSystem,i=r&&r.getArea&&r.getArea();return n.get("clip",!0)?i:null},e.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Sit:new hae,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(da);const _it=Dit;function Tit(t){ws(Oie),t.registerSeriesModel(xit),t.registerChartView(_it),t.registerLayout(wL("scatter"))}var Ns=hu.CMD;function yp(t,e){return Math.abs(t-e)<1e-5}function WR(t){var e=t.data,n=t.len(),r=[],i,a=0,o=0,s=0,u=0;function l(N,R){i&&i.length>2&&r.push(i),i=[N,R]}function c(N,R,M,$){yp(N,M)&&yp(R,$)||i.push(N,R,M,$,M,$)}function f(N,R,M,$,L,O){var F=Math.abs(R-N),V=Math.tan(F/4)*4/3,X=R<N?-1:1,P=Math.cos(N),U=Math.sin(N),j=Math.cos(R),q=Math.sin(R),Y=P*L+M,ne=U*O+$,ue=j*L+M,te=q*O+$,oe=L*V*X,ce=O*V*X;i.push(Y-oe*U,ne+ce*P,ue+oe*q,te-ce*j,ue,te)}for(var h,d,p,v,m=0;m<n;){var g=e[m++],y=m===1;switch(y&&(a=e[m],o=e[m+1],s=a,u=o,(g===Ns.L||g===Ns.C||g===Ns.Q)&&(i=[s,u])),g){case Ns.M:a=s=e[m++],o=u=e[m++],l(s,u);break;case Ns.L:h=e[m++],d=e[m++],c(a,o,h,d),a=h,o=d;break;case Ns.C:i.push(e[m++],e[m++],e[m++],e[m++],a=e[m++],o=e[m++]);break;case Ns.Q:h=e[m++],d=e[m++],p=e[m++],v=e[m++],i.push(a+2/3*(h-a),o+2/3*(d-o),p+2/3*(h-p),v+2/3*(d-v),p,v),a=p,o=v;break;case Ns.A:var x=e[m++],w=e[m++],b=e[m++],C=e[m++],D=e[m++],S=e[m++]+D;m+=1;var _=!e[m++];h=Math.cos(D)*b+x,d=Math.sin(D)*C+w,y?(s=h,u=d,l(s,u)):c(a,o,h,d),a=Math.cos(S)*b+x,o=Math.sin(S)*C+w;for(var T=(_?-1:1)*Math.PI/2,E=D;_?E>S:E<S;E+=T){var A=_?Math.max(E+T,S):Math.min(E+T,S);f(E,A,x,w,b,C)}break;case Ns.R:s=a=e[m++],u=o=e[m++],h=s+e[m++],d=u+e[m++],l(h,u),c(h,u,h,d),c(h,d,s,d),c(s,d,s,u),c(s,u,h,u);break;case Ns.Z:i&&c(a,o,s,u),a=s,o=u;break}}return i&&i.length>2&&r.push(i),r}function UR(t,e,n,r,i,a,o,s,u,l){if(yp(t,n)&&yp(e,r)&&yp(i,o)&&yp(a,s)){u.push(o,s);return}var c=2/l,f=c*c,h=o-t,d=s-e,p=Math.sqrt(h*h+d*d);h/=p,d/=p;var v=n-t,m=r-e,g=i-o,y=a-s,x=v*v+m*m,w=g*g+y*y;if(x<f&&w<f){u.push(o,s);return}var b=h*v+d*m,C=-h*g-d*y,D=x-b*b,S=w-C*C;if(D<f&&b>=0&&S<f&&C>=0){u.push(o,s);return}var _=[],T=[];Ec(t,n,i,o,.5,_),Ec(e,r,a,s,.5,T),UR(_[0],T[0],_[1],T[1],_[2],T[2],_[3],T[3],u,l),UR(_[4],T[4],_[5],T[5],_[6],T[6],_[7],T[7],u,l)}function Eit(t,e){var n=WR(t),r=[];e=e||1;for(var i=0;i<n.length;i++){var a=n[i],o=[],s=a[0],u=a[1];o.push(s,u);for(var l=2;l<a.length;){var c=a[l++],f=a[l++],h=a[l++],d=a[l++],p=a[l++],v=a[l++];UR(s,u,c,f,h,d,p,v,o,e),s=p,u=v}r.push(o)}return r}function Iae(t,e,n){var r=t[e],i=t[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*n)),s=Math.floor(n/o);s===0&&(s=1,o=n);for(var u=[],l=0;l<o;l++)u.push(s);var c=o*s,f=n-c;if(f>0)for(var l=0;l<f;l++)u[l%o]+=1;return u}function zU(t,e,n){for(var r=t.r0,i=t.r,a=t.startAngle,o=t.endAngle,s=Math.abs(o-a),u=s*i,l=i-r,c=u>Math.abs(l),f=Iae([u,l],c?0:1,e),h=(c?s:l)/f.length,d=0;d<f.length;d++)for(var p=(c?l:s)/f[d],v=0;v<f[d];v++){var m={};c?(m.startAngle=a+h*d,m.endAngle=a+h*(d+1),m.r0=r+p*v,m.r=r+p*(v+1)):(m.startAngle=a+p*v,m.endAngle=a+p*(v+1),m.r0=r+h*d,m.r=r+h*(d+1)),m.clockwise=t.clockwise,m.cx=t.cx,m.cy=t.cy,n.push(m)}}function Ait(t,e,n){for(var r=t.width,i=t.height,a=r>i,o=Iae([r,i],a?0:1,e),s=a?"width":"height",u=a?"height":"width",l=a?"x":"y",c=a?"y":"x",f=t[s]/o.length,h=0;h<o.length;h++)for(var d=t[u]/o[h],p=0;p<o[h];p++){var v={};v[l]=h*f,v[c]=p*d,v[s]=f,v[u]=d,v.x+=t.x,v.y+=t.y,n.push(v)}}function BU(t,e,n,r){return t*r-n*e}function kit(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,h=BU(c,f,u,l);if(Math.abs(h)<1e-6)return null;var d=t-i,p=e-a,v=BU(d,p,c,f)/h;return v<0||v>1?null:new Je(v*u+t,v*l+e)}function Iit(t,e,n){var r=new Je;Je.sub(r,n,e),r.normalize();var i=new Je;Je.sub(i,t,e);var a=i.dot(r);return a}function Od(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function Nit(t,e,n){for(var r=t.length,i=[],a=0;a<r;a++){var o=t[a],s=t[(a+1)%r],u=kit(o[0],o[1],s[0],s[1],e.x,e.y,n.x,n.y);u&&i.push({projPt:Iit(u,e,n),pt:u,idx:a})}if(i.length<2)return[{points:t},{points:t}];i.sort(function(m,g){return m.projPt-g.projPt});var l=i[0],c=i[i.length-1];if(c.idx<l.idx){var f=l;l=c,c=f}for(var h=[l.pt.x,l.pt.y],d=[c.pt.x,c.pt.y],p=[h],v=[d],a=l.idx+1;a<=c.idx;a++)Od(p,t[a].slice());Od(p,d),Od(p,h);for(var a=c.idx+1;a<=l.idx+r;a++)Od(v,t[a%r].slice());return Od(v,h),Od(v,d),[{points:p},{points:v}]}function VU(t){var e=t.points,n=[],r=[];Mte(e,n,r);var i=new _t(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=i.width,o=i.height,s=i.x,u=i.y,l=new Je,c=new Je;return a>o?(l.x=c.x=s+a/2,l.y=u,c.y=u+o):(l.y=c.y=u+o/2,l.x=s,c.x=s+a),Nit(e,l,c)}function SS(t,e,n,r){if(n===1)r.push(e);else{var i=Math.floor(n/2),a=t(e);SS(t,a[0],i,r),SS(t,a[1],n-i,r)}return r}function Rit(t,e){for(var n=[],r=0;r<e;r++)n.push(f3(t));return n}function $it(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function Mit(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}function Oit(t,e){var n=[],r=t.shape,i;switch(t.type){case"rect":Ait(r,e,n),i=Pn;break;case"sector":zU(r,e,n),i=du;break;case"circle":zU({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,n),i=du;break;default:var a=t.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=$e(Eit(t.getUpdatedPathProxy(),o),function(g){return Mit(g)}),u=s.length;if(u===0)SS(VU,{points:s[0]},e,n);else if(u===e)for(var l=0;l<u;l++)n.push({points:s[l]});else{var c=0,f=$e(s,function(g){var y=[],x=[];Mte(g,y,x);var w=(x[1]-y[1])*(x[0]-y[0]);return c+=w,{poly:g,area:w}});f.sort(function(g,y){return y.area-g.area});for(var h=e,l=0;l<u;l++){var d=f[l];if(h<=0)break;var p=l===u-1?h:Math.ceil(d.area/c*e);p<0||(SS(VU,{points:d.poly},p,n),h-=p)}}i=q1;break}if(!i)return Rit(t,e);for(var v=[],l=0;l<n.length;l++){var m=new i;m.setShape(n[l]),$it(t,m),v.push(m)}return v}function Fit(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var i=[],a=[],o=n<r?t:e,s=Math.min(n,r),u=Math.abs(r-n)/6,l=(s-2)/6,c=Math.ceil(u/l)+1,f=[o[0],o[1]],h=u,d=2;d<s;){var p=o[d-2],v=o[d-1],m=o[d++],g=o[d++],y=o[d++],x=o[d++],w=o[d++],b=o[d++];if(h<=0){f.push(m,g,y,x,w,b);continue}for(var C=Math.min(h,c-1)+1,D=1;D<=C;D++){var S=D/C;Ec(p,m,y,w,S,i),Ec(v,g,x,b,S,a),p=i[3],v=a[3],f.push(i[1],a[1],i[2],a[2],p,v),m=i[5],g=a[5],y=i[6],x=a[6]}h-=C-1}return o===t?[f,e]:[t,f]}function WU(t,e){for(var n=t.length,r=t[n-2],i=t[n-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function Pit(t,e){for(var n,r,i,a=[],o=[],s=0;s<Math.max(t.length,e.length);s++){var u=t[s],l=e[s],c=void 0,f=void 0;u?l?(n=Fit(u,l),c=n[0],f=n[1],r=c,i=f):(f=WU(i||u,u),c=u):(c=WU(r||l,l),f=l),a.push(c),o.push(f)}return[a,o]}function UU(t){for(var e=0,n=0,r=0,i=t.length,a=0,o=i-2;a<i;o=a,a+=2){var s=t[o],u=t[o+1],l=t[a],c=t[a+1],f=s*c-l*u;e+=f,n+=(s+l)*f,r+=(u+c)*f}return e===0?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function Lit(t,e,n,r){for(var i=(t.length-2)/6,a=1/0,o=0,s=t.length,u=s-2,l=0;l<i;l++){for(var c=l*6,f=0,h=0;h<s;h+=2){var d=h===0?c:(c+h-2)%u+2,p=t[d]-n[0],v=t[d+1]-n[1],m=e[h]-r[0],g=e[h+1]-r[1],y=m-p,x=g-v;f+=y*y+x*x}f<a&&(a=f,o=l)}return o}function zit(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function Bit(t,e,n,r){for(var i=[],a,o=0;o<t.length;o++){var s=t[o],u=e[o],l=UU(s),c=UU(u);a==null&&(a=l[2]<0!=c[2]<0);var f=[],h=[],d=0,p=1/0,v=[],m=s.length;a&&(s=zit(s));for(var g=Lit(s,u,l,c)*6,y=m-2,x=0;x<y;x+=2){var w=(g+x)%y+2;f[x+2]=s[w]-l[0],f[x+3]=s[w+1]-l[1]}if(f[0]=s[g]-l[0],f[1]=s[g+1]-l[1],n>0)for(var b=r/n,C=-r/2;C<=r/2;C+=b){for(var D=Math.sin(C),S=Math.cos(C),_=0,x=0;x<s.length;x+=2){var T=f[x],E=f[x+1],A=u[x]-c[0],N=u[x+1]-c[1],R=A*S-N*D,M=A*D+N*S;v[x]=R,v[x+1]=M;var $=R-T,L=M-E;_+=$*$+L*L}if(_<p){p=_,d=C;for(var O=0;O<v.length;O++)h[O]=v[O]}}else for(var F=0;F<m;F+=2)h[F]=u[F]-c[0],h[F+1]=u[F+1]-c[1];i.push({from:f,to:h,fromCp:l,toCp:c,rotation:-d})}return i}function DS(t){return t.__isCombineMorphing}var Nae="__mOriginal_";function _S(t,e,n){var r=Nae+e,i=t[r]||t[e];t[r]||(t[r]=t[e]);var a=n.replace,o=n.after,s=n.before;t[e]=function(){var u=arguments,l;return s&&s.apply(this,u),a?l=a.apply(this,u):l=i.apply(this,u),o&&o.apply(this,u),l}}function Um(t,e){var n=Nae+e;t[n]&&(t[e]=t[n],t[n]=null)}function GU(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function Rae(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=Pit(WR(n),WR(r)),a=i[0],o=i[1],s=t.getComputedTransform(),u=e.getComputedTransform();function l(){this.transform=null}s&&GU(a,s),u&&GU(o,u),_S(e,"updateTransform",{replace:l}),e.transform=null;var c=Bit(a,o,10,Math.PI),f=[];_S(e,"buildPath",{replace:function(h){for(var d=e.__morphT,p=1-d,v=[],m=0;m<c.length;m++){var g=c[m],y=g.from,x=g.to,w=g.rotation*d,b=g.fromCp,C=g.toCp,D=Math.sin(w),S=Math.cos(w);Rm(v,b,C,d);for(var _=0;_<y.length;_+=2){var T=y[_],E=y[_+1],A=x[_],N=x[_+1],R=T*p+A*d,M=E*p+N*d;f[_]=R*S-M*D+v[0],f[_+1]=R*D+M*S+v[1]}var $=f[0],L=f[1];h.moveTo($,L);for(var _=2;_<y.length;){var A=f[_++],N=f[_++],O=f[_++],F=f[_++],V=f[_++],X=f[_++];$===A&&L===N&&O===V&&F===X?h.lineTo(V,X):h.bezierCurveTo(A,N,O,F,V,X),$=V,L=X}}}})}function bL(t,e,n){if(!t||!e)return e;var r=n.done,i=n.during;Rae(t,e),e.__morphT=0;function a(){Um(e,"buildPath"),Um(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},dt({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},n)),e}function Vit(t,e,n,r,i,a){var o=16;t=i===n?0:Math.round(32767*(t-n)/(i-n)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,u,l=(1<<o)/2;l>0;l/=2){var c=0,f=0;(t&l)>0&&(c=1),(e&l)>0&&(f=1),s+=l*l*(3*c^f),f===0&&(c===1&&(t=l-1-t,e=l-1-e),u=t,t=e,e=u)}return s}function TS(t){var e=1/0,n=1/0,r=-1/0,i=-1/0,a=$e(t,function(s){var u=s.getBoundingRect(),l=s.getComputedTransform(),c=u.x+u.width/2+(l?l[4]:0),f=u.y+u.height/2+(l?l[5]:0);return e=Math.min(c,e),n=Math.min(f,n),r=Math.max(c,r),i=Math.max(f,i),[c,f]}),o=$e(a,function(s,u){return{cp:s,z:Vit(s[0],s[1],e,n,r,i),path:t[u]}});return o.sort(function(s,u){return s.z-u.z}).map(function(s){return s.path})}function $ae(t){return Oit(t.path,t.count)}function GR(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Wit(t,e,n){var r=[];function i(b){for(var C=0;C<b.length;C++){var D=b[C];DS(D)?i(D.childrenRef()):D instanceof Tt&&r.push(D)}}i(t);var a=r.length;if(!a)return GR();var o=n.dividePath||$ae,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),GR();r=TS(r),s=TS(s);for(var u=n.done,l=n.during,c=n.individualDelay,f=new E_,h=0;h<a;h++){var d=r[h],p=s[h];p.parent=e,p.copyTransform(f),c||Rae(d,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(b){for(var C=0;C<s.length;C++)s[C].addSelfToZr(b)}_S(e,"addSelfToZr",{after:function(b){v(b)}}),_S(e,"removeSelfFromZr",{after:function(b){for(var C=0;C<s.length;C++)s[C].removeSelfFromZr(b)}});function m(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,Um(e,"addSelfToZr"),Um(e,"removeSelfFromZr")}var g=s.length;if(c)for(var y=g,x=function(){y--,y===0&&(m(),u&&u())},h=0;h<g;h++){var w=c?dt({delay:(n.delay||0)+c(h,g,r[h],s[h]),done:x},n):n;bL(r[h],s[h],w)}else e.__morphT=0,e.animateTo({__morphT:1},dt({during:function(b){for(var C=0;C<g;C++){var D=s[C];D.__morphT=e.__morphT,D.dirtyShape()}l&&l(b)},done:function(){m();for(var b=0;b<t.length;b++)Um(t[b],"updateTransform");u&&u()}},n));return e.__zr&&v(e.__zr),{fromIndividuals:r,toIndividuals:s,count:g}}function Uit(t,e,n){var r=e.length,i=[],a=n.dividePath||$ae;function o(d){for(var p=0;p<d.length;p++){var v=d[p];DS(v)?o(v.childrenRef()):v instanceof Tt&&i.push(v)}}if(DS(t)){o(t.childrenRef());var s=i.length;if(s<r)for(var u=0,l=s;l<r;l++)i.push(f3(i[u++%s]));i.length=r}else{i=a({path:t,count:r});for(var c=t.getComputedTransform(),l=0;l<i.length;l++)i[l].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),GR()}i=TS(i),e=TS(e);for(var f=n.individualDelay,l=0;l<r;l++){var h=f?dt({delay:(n.delay||0)+f(l,r,i[l],e[l])},n):n;bL(i[l],e[l],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function HU(t){return Me(t[0])}function jU(t,e){for(var n=[],r=t.length,i=0;i<r;i++)n.push({one:t[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)n[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!n[i].many.length){var u=n[s].many;if(u.length<=1)if(s)s=0;else return n;var a=u.length,l=Math.ceil(a/2);n[i].many=u.slice(l,a),n[s].many=u.slice(0,l),s++}return n}var Git={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),r=0;r<t.count;r++){var i=f3(t.path);i.setStyle("opacity",n),e.push(i)}return e},split:null};function rk(t,e,n,r,i,a){if(!t.length||!e.length)return;var o=z_("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},o),l,c;HU(t)&&(l=t,c=e),HU(e)&&(l=e,c=t);function f(g,y,x,w,b){var C=g.many,D=g.one;if(C.length===1&&!b){var S=y?C[0]:D,_=y?D:C[0];if(DS(S))f({many:[S],one:_},!0,x,w,!0);else{var T=s?dt({delay:s(x,w)},u):u;bL(S,_,T),a(S,_,S,_,T)}}else for(var E=dt({dividePath:Git[n],individualDelay:s&&function(L,O,F,V){return s(L+x,w)}},u),A=y?Wit(C,D,E):Uit(D,C,E),N=A.fromIndividuals,R=A.toIndividuals,M=N.length,$=0;$<M;$++){var T=s?dt({delay:s($,M)},u):u;a(N[$],R[$],y?C[$]:g.one,y?g.one:C[$],T)}}for(var h=l?l===t:t.length>e.length,d=l?jU(c,l):jU(h?e:t,[h?t:e]),p=0,v=0;v<d.length;v++)p+=d[v].many.length;for(var m=0,v=0;v<d.length;v++)f(d[v],h,m,p),m+=d[v].many.length}function If(t){if(!t)return[];if(Me(t)){for(var e=[],n=0;n<t.length;n++)e.push(If(t[n]));return e}var r=[];return t.traverse(function(i){i instanceof Tt&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var Mae=1e4,Hit=Gn();function jit(t){for(var e=t.dimensions,n=0;n<e.length;n++){var r=t.getDimensionInfo(e[n]);if(r&&r.otherDims.itemGroupId===0)return e[n]}}function qU(t){var e=[];return W(t,function(n){var r=n.data;if(!(r.count()>Mae))for(var i=r.getIndices(),a=jit(r),o=0;o<i.length;o++)e.push({dataGroupId:n.dataGroupId,data:r,dim:n.dim||a,divide:n.divide,dataIndex:o})}),e}function ik(t,e,n){t.traverse(function(r){r instanceof Tt&&ha(r,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})})}function ak(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function Fd(t){t.stopAnimation(),t.isGroup&&t.traverse(function(e){e.stopAnimation()})}function qit(t,e,n){var r=z_("update",n,e);r&&t.traverse(function(i){if(i instanceof tg){var a=pXe(i);a&&i.animateFrom({style:a},r)}})}function Xit(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++){var i=t[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Oae(t,e,n){var r=qU(t),i=qU(e);function a(g,y,x,w,b){(x||g)&&y.animateFrom({style:x&&x!==g?De(De({},x.style),g.style):g.style},b)}function o(g){for(var y=0;y<g.length;y++)if(g[y].dim)return g[y].dim}var s=o(r),u=o(i),l=!1;function c(g,y){return function(x){var w=x.data,b=x.dataIndex;if(y)return w.getId(b);var C=x.dataGroupId,D=g?s||u:u||s,S=D&&w.getDimensionInfo(D),_=S&&S.ordinalMeta;if(S){var T=w.get(S.name,b);return _&&_.categories[T]||T+""}var E=w.getRawDataItem(b);return E&&E.groupId?E.groupId+"":C||w.getId(b)}}var f=Xit(r,i),h={};if(!f)for(var d=0;d<i.length;d++){var p=i[d],v=p.data.getItemGraphicEl(p.dataIndex);v&&(h[v.id]=!0)}function m(g,y){var x=r[y],w=i[g],b=w.data.hostModel,C=x.data.getItemGraphicEl(x.dataIndex),D=w.data.getItemGraphicEl(w.dataIndex);if(C===D){D&&qit(D,w.dataIndex,b);return}C&&h[C.id]||D&&(Fd(D),C?(Fd(C),ak(C),l=!0,rk(If(C),If(D),w.divide,b,g,a)):ik(D,b,g))}new Y0(r,i,c(!0,f),c(!1,f),null,"multiple").update(m).updateManyToOne(function(g,y){var x=i[g],w=x.data,b=w.hostModel,C=w.getItemGraphicEl(x.dataIndex),D=$n($e(y,function(S){return r[S].data.getItemGraphicEl(r[S].dataIndex)}),function(S){return S&&S!==C&&!h[S.id]});C&&(Fd(C),D.length?(W(D,function(S){Fd(S),ak(S)}),l=!0,rk(If(D),If(C),x.divide,b,g,a)):ik(C,b,x.dataIndex))}).updateOneToMany(function(g,y){var x=r[y],w=x.data.getItemGraphicEl(x.dataIndex);if(!(w&&h[w.id])){var b=$n($e(g,function(D){return i[D].data.getItemGraphicEl(i[D].dataIndex)}),function(D){return D&&D!==w}),C=i[g[0]].data.hostModel;b.length&&(W(b,function(D){return Fd(D)}),w?(Fd(w),ak(w),l=!0,rk(If(w),If(b),x.divide,C,g[0],a)):W(b,function(D){return ik(D,C,g[0])}))}}).updateManyToMany(function(g,y){new Y0(y,g,function(x){return r[x].data.getId(r[x].dataIndex)},function(x){return i[x].data.getId(i[x].dataIndex)}).update(function(x,w){m(g[x],y[w])}).execute()}).execute(),l&&W(e,function(g){var y=g.data,x=y.hostModel,w=x&&n.getViewOfSeriesModel(x),b=z_("update",x,0);w&&x.isAnimationEnabled()&&b&&b.duration>0&&w.group.traverse(function(C){C instanceof Tt&&!C.animators.length&&C.animateFrom({style:{opacity:0}},b)})})}function XU(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function KU(t){return Me(t)?t.sort().join(","):t}function Rl(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function Kit(t,e){var n=st(),r=st(),i=st();return W(t.oldSeries,function(a,o){var s=t.oldDataGroupIds[o],u=t.oldData[o],l=XU(a),c=KU(l);r.set(c,{dataGroupId:s,data:u}),Me(l)&&W(l,function(f){i.set(f,{key:c,dataGroupId:s,data:u})})}),W(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),u=XU(a),l=KU(u),c=r.get(l);if(c)n.set(l,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Rl(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Rl(s),data:s}]});else if(Me(u)){var f=[];W(u,function(p){var v=r.get(p);v.data&&f.push({dataGroupId:v.dataGroupId,divide:Rl(v.data),data:v.data})}),f.length&&n.set(l,{oldSeries:f,newSeries:[{dataGroupId:o,data:s,divide:Rl(s)}]})}else{var h=i.get(u);if(h){var d=n.get(h.key);d||(d={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:Rl(h.data)}],newSeries:[]},n.set(h.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:Rl(s)})}}}}),n}function YU(t,e){for(var n=0;n<t.length;n++){var r=e.seriesIndex!=null&&e.seriesIndex===t[n].seriesIndex||e.seriesId!=null&&e.seriesId===t[n].id;if(r)return n}}function Yit(t,e,n,r){var i=[],a=[];W(cr(t.from),function(o){var s=YU(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Rl(e.oldData[s]),dim:o.dimension})}),W(cr(t.to),function(o){var s=YU(n.updatedSeries,o);if(s>=0){var u=n.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:u,divide:Rl(u),dim:o.dimension})}}),i.length>0&&a.length>0&&Oae(i,a,r)}function Zit(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){W(cr(r.seriesTransition),function(i){W(cr(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][vb]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(e,n,r){var i=Hit(n);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)W(cr(a),function(d){Yit(d,i,r,n)});else{var o=Kit(i,r);W(o.keys(),function(d){var p=o.get(d);Oae(p.oldSeries,p.newSeries,n)})}W(r.updatedSeries,function(d){d[vb]&&(d[vb]=!1)})}for(var s=e.getSeries(),u=i.oldSeries=[],l=i.oldDataGroupIds=[],c=i.oldData=[],f=0;f<s.length;f++){var h=s[f].getData();h.count()<Mae&&(u.push(s[f]),l.push(s[f].get("dataGroupId")),c.push(h))}})}var ok=Math.sin,sk=Math.cos,Fae=Math.PI,bf=Math.PI*2,Qit=180/Fae,Jit=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,i,a,o){this._add("C",e,n,r,i,a,o)},t.prototype.quadraticCurveTo=function(e,n,r,i){this._add("Q",e,n,r,i)},t.prototype.arc=function(e,n,r,i,a,o){this.ellipse(e,n,r,r,0,i,a,o)},t.prototype.ellipse=function(e,n,r,i,a,o,s,u){var l=s-o,c=!u,f=Math.abs(l),h=jl(f-bf)||(c?l>=bf:-l>=bf),d=l>0?l%bf:l%bf+bf,p=!1;h?p=!0:jl(f)?p=!1:p=d>=Fae==!!c;var v=e+r*sk(o),m=n+i*ok(o);this._start&&this._add("M",v,m);var g=Math.round(a*Qit);if(h){var y=1/this._p,x=(c?1:-1)*(bf-y);this._add("A",r,i,g,1,+c,e+r*sk(o+x),n+i*ok(o+x)),y>.01&&this._add("A",r,i,g,0,+c,v,m)}else{var w=e+r*sk(s),b=n+i*ok(s);this._add("A",r,i,g,+p,+c,w,b)}},t.prototype.rect=function(e,n,r,i){this._add("M",e,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,i,a,o,s,u,l){for(var c=[],f=this._p,h=1;h<arguments.length;h++){var d=arguments[h];if(isNaN(d)){this._invalid=!0;return}c.push(Math.round(d*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}();const Pae=Jit;var Gm="none",eat=Math.round;function tat(t){var e=t.fill;return e!=null&&e!==Gm}function nat(t){var e=t.stroke;return e!=null&&e!==Gm}var HR=["lineCap","miterLimit","lineJoin"],rat=$e(HR,function(t){return"stroke-"+t.toLowerCase()});function iat(t,e,n,r){var i=e.opacity==null?1:e.opacity;if(n instanceof xu){t("opacity",i);return}if(tat(e)){var a=O0(e.fill);t("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;(r||o<1)&&t("fill-opacity",o)}else t("fill",Gm);if(nat(e)){var s=O0(e.stroke);t("stroke",s.color);var u=e.strokeNoScale?n.getLineScale():1,l=u?(e.lineWidth||0)/u:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,f=e.strokeFirst;if((r||l!==1)&&t("stroke-width",l),(r||f)&&t("paint-order",f?"stroke":"fill"),(r||c<1)&&t("stroke-opacity",c),e.lineDash){var h=W3(n),d=h[0],p=h[1];d&&(p=eat(p||0),t("stroke-dasharray",d.join(",")),(p||r)&&t("stroke-dashoffset",p))}else r&&t("stroke-dasharray",Gm);for(var v=0;v<HR.length;v++){var m=HR[v];if(r||e[m]!==nS[m]){var g=e[m]||nS[m];g&&t(rat[v],g)}}}else r&&t("stroke",Gm)}var Lae="http://www.w3.org/2000/svg",zae="http://www.w3.org/1999/xlink",aat="http://www.w3.org/2000/xmlns/",oat="http://www.w3.org/XML/1998/namespace";function Bae(t){return document.createElementNS(Lae,t)}function Cr(t,e,n,r,i){return{tag:t,attrs:n||{},children:r,text:i,key:e}}function sat(t,e){var n=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),n.push(a))}return"<"+t+" "+n.join(" ")+">"}function uat(t){return"</"+t+">"}function CL(t,e){e=e||{};var n=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,u=i.text;return sat(o,s)+(o!=="style"?Yi(u):u||"")+(a?""+n+$e(a,function(l){return r(l)}).join(n)+n:"")+uat(o)}return r(t)}function lat(t,e,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,a=r+"}",o=$e(Mt(t),function(u){return u+i+$e(Mt(t[u]),function(l){return l+":"+t[u][l]+";"}).join(r)+a}).join(r),s=$e(Mt(e),function(u){return"@keyframes "+u+i+$e(Mt(e[u]),function(l){return l+i+$e(Mt(e[u][l]),function(c){var f=e[u][l][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function jR(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function ZU(t,e,n,r){return Cr("svg","root",{width:t,height:e,xmlns:Lae,"xmlns:xlink":zae,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var QU={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Nf="transform-origin";function cat(t,e,n){var r=De({},t.shape);De(r,e),t.buildPath(n,r);var i=new Pae;return i.reset(ote(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function fat(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[Nf]=n+"px "+r+"px")}var hat={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Vae(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function dat(t,e,n){var r=t.shape.paths,i={},a,o;if(W(r,function(u){var l=jR(n.zrId);l.animation=!0,lT(u,{},l,!0);var c=l.cssAnims,f=l.cssNodes,h=Mt(c),d=h.length;if(d){o=h[d-1];var p=c[o];for(var v in p){var m=p[v];i[v]=i[v]||{d:""},i[v].d+=m.d||""}for(var g in f){var y=f[g].animation;y.indexOf(o)>=0&&(a=y)}}}),!!a){e.d=!1;var s=Vae(i,n);return a.replace(o,s)}}function JU(t){return ze(t)?QU[t]?"cubic-bezier("+QU[t]+")":KP(t)?t:"":""}function lT(t,e,n,r){var i=t.animators,a=i.length,o=[];if(t instanceof v3){var s=dat(t,e,n);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var u={},l=0;l<a;l++){var c=i[l],f=[c.getMaxTime()/1e3+"s"],h=JU(c.getClip().easing),d=c.getDelay();h?f.push(h):f.push("linear"),d&&f.push(d/1e3+"s"),c.getLoop()&&f.push("infinite");var p=f.join(" ");u[p]=u[p]||[p,[]],u[p][1].push(c)}function v(y){var x=y[1],w=x.length,b={},C={},D={},S="animation-timing-function";function _(ue,te,oe){for(var ce=ue.getTracks(),pe=ue.getMaxTime(),me=0;me<ce.length;me++){var _e=ce[me];if(_e.needsAnimate()){var Ne=_e.keyframes,ke=_e.propName;if(oe&&(ke=oe(ke)),ke)for(var Ve=0;Ve<Ne.length;Ve++){var je=Ne[Ve],ct=Math.round(je.time/pe*100)+"%",rt=JU(je.easing),xt=je.rawValue;(ze(xt)||Kt(xt))&&(te[ct]=te[ct]||{},te[ct][ke]=je.rawValue,rt&&(te[ct][S]=rt))}}}}for(var T=0;T<w;T++){var E=x[T],A=E.targetName;A?A==="shape"&&_(E,C):!r&&_(E,b)}for(var N in b){var R={};fte(R,t),De(R,b[N]);var M=ste(R),$=b[N][S];D[N]=M?{transform:M}:{},fat(D[N],R),$&&(D[N][S]=$)}var L,O=!0;for(var N in C){D[N]=D[N]||{};var F=!L,$=C[N][S];F&&(L=new hu);var V=L.len();L.reset(),D[N].d=cat(t,C[N],L);var X=L.len();if(!F&&V!==X){O=!1;break}$&&(D[N][S]=$)}if(!O)for(var N in D)delete D[N].d;if(!r)for(var T=0;T<w;T++){var E=x[T],A=E.targetName;A==="style"&&_(E,D,function(ce){return hat[ce]})}for(var P=Mt(D),U=!0,j,T=1;T<P.length;T++){var q=P[T-1],Y=P[T];if(D[q][Nf]!==D[Y][Nf]){U=!1;break}j=D[q][Nf]}if(U&&j){for(var N in D)D[N][Nf]&&delete D[N][Nf];e[Nf]=j}if($n(P,function(ue){return Mt(D[ue]).length>0}).length){var ne=Vae(D,n);return ne+" "+y[0]+" both"}}for(var m in u){var s=v(u[m]);s&&o.push(s)}if(o.length){var g=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+g]={animation:o.join(",")},e.class=g}}var ey=Math.round;function Wae(t){return t&&ze(t.src)}function Uae(t){return t&&ot(t.toDataURL)}function SL(t,e,n,r){iat(function(i,a){var o=i==="fill"||i==="stroke";o&&ate(a)?Hae(e,t,i,r):o&&ZP(a)?jae(n,t,i,r):t[i]=a},e,n,!1),wat(n,t,r)}function eG(t){return jl(t[0]-1)&&jl(t[1])&&jl(t[2])&&jl(t[3]-1)}function pat(t){return jl(t[4])&&jl(t[5])}function DL(t,e,n){if(e&&!(pat(e)&&eG(e))){var r=n?10:1e4;t.transform=eG(e)?"translate("+ey(e[4]*r)/r+" "+ey(e[5]*r)/r+")":fHe(e)}}function tG(t,e,n){for(var r=t.points,i=[],a=0;a<r.length;a++)i.push(ey(r[a][0]*n)/n),i.push(ey(r[a][1]*n)/n);e.points=i.join(" ")}function nG(t){return!t.smooth}function vat(t){var e=$e(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=n[o[0]];s!=null&&(r[o[1]]=ey(s*i)/i)}}}var gat={circle:[vat(["cx","cy","r"])],polyline:[tG,nG],polygon:[tG,nG]};function mat(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function Gae(t,e){var n=t.style,r=t.shape,i=gat[t.type],a={},o=e.animation,s="path",u=t.style.strokePercent,l=e.compress&&ote(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&mat(t))&&!(u<1)){s=t.type;var c=Math.pow(10,l);i[0](r,a,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var h=t.path;f&&(h.beginPath(),t.buildPath(h,t.shape),t.pathUpdated());var d=h.getVersion(),p=t,v=p.__svgPathBuilder;(p.__svgPathVersion!==d||!v||u!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new Pae),v.reset(l),h.rebuildPath(v,u),v.generateStr(),p.__svgPathVersion=d,p.__svgPathStrokePercent=u),a.d=v.getStr()}return DL(a,t.transform),SL(a,n,t,e),e.animation&&lT(t,a,e),Cr(s,t.id+"",a)}function yat(t,e){var n=t.style,r=n.image;if(r&&!ze(r)&&(Wae(r)?r=r.src:Uae(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,a=n.y||0,o=n.width,s=n.height,u={href:r,width:o,height:s};return i&&(u.x=i),a&&(u.y=a),DL(u,t.transform),SL(u,n,t,e),e.animation&&lT(t,u,e),Cr("image",t.id+"",u)}}function xat(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||Tc,a=n.x||0,o=dHe(n.y||0,k_(i),n.textBaseline),s=hHe[n.textAlign]||n.textAlign,u={"dominant-baseline":"central","text-anchor":s};if(Ute(n)){var l="",c=n.fontStyle,f=Wte(n.fontSize);if(!parseFloat(f))return;var h=n.fontFamily||Eee,d=n.fontWeight;l+="font-size:"+f+";font-family:"+h+";",c&&c!=="normal"&&(l+="font-style:"+c+";"),d&&d!=="normal"&&(l+="font-weight:"+d+";"),u.style=l}else u.style="font: "+i;return r.match(/\s/)&&(u["xml:space"]="preserve"),a&&(u.x=a),o&&(u.y=o),DL(u,t.transform),SL(u,n,t,e),e.animation&&lT(t,u,e),Cr("text",t.id+"",u,void 0,r)}}function rG(t,e){if(t instanceof Tt)return Gae(t,e);if(t instanceof xu)return yat(t,e);if(t instanceof rS)return xat(t,e)}function wat(t,e,n){var r=t.style;if(pHe(r)){var i=vHe(t),a=n.shadowCache,o=a[i];if(!o){var s=t.getGlobalScale(),u=s[0],l=s[1];if(!u||!l)return;var c=r.shadowOffsetX||0,f=r.shadowOffsetY||0,h=r.shadowBlur,d=O0(r.shadowColor),p=d.opacity,v=d.color,m=h/2/u,g=h/2/l,y=m+" "+g;o=n.zrId+"-s"+n.shadowIdx++,n.defs[o]=Cr("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Cr("feDropShadow","",{dx:c/u,dy:f/l,stdDeviation:y,"flood-color":v,"flood-opacity":p})]),a[i]=o}e.filter=T_(o)}}function Hae(t,e,n,r){var i=t[n],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(rte(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(ite(i))a="radialGradient",o.cx=yt(i.x,.5),o.cy=yt(i.y,.5),o.r=yt(i.r,.5);else return;for(var s=i.colorStops,u=[],l=0,c=s.length;l<c;++l){var f=LN(s[l].offset)*100+"%",h=s[l].color,d=O0(h),p=d.color,v=d.opacity,m={offset:f};m["stop-color"]=p,v<1&&(m["stop-opacity"]=v),u.push(Cr("stop",l+"",m))}var g=Cr(a,"",o,u),y=CL(g),x=r.gradientCache,w=x[y];w||(w=r.zrId+"-g"+r.gradientIdx++,x[y]=w,o.id=w,r.defs[w]=Cr(a,w,o,u)),e[n]=T_(w)}function jae(t,e,n,r){var i=t.style[n],a=t.getBoundingRect(),o={},s=i.repeat,u=s==="no-repeat",l=s==="repeat-x",c=s==="repeat-y",f;if(nte(i)){var h=i.imageWidth,d=i.imageHeight,p=void 0,v=i.image;if(ze(v)?p=v:Wae(v)?p=v.src:Uae(v)&&(p=v.toDataURL()),typeof Image>"u"){var m="Image width/height must been given explictly in svg-ssr renderer.";za(h,m),za(d,m)}else if(h==null||d==null){var g=function(T,E){if(T){var A=T.elm,N=h||E.width,R=d||E.height;T.tag==="pattern"&&(l?(R=1,N/=a.width):c&&(N=1,R/=a.height)),T.attrs.width=N,T.attrs.height=R,A&&(A.setAttribute("width",N),A.setAttribute("height",R))}},y=o3(p,null,t,function(T){u||g(C,T),g(f,T)});y&&y.width&&y.height&&(h=h||y.width,d=d||y.height)}f=Cr("image","img",{href:p,width:h,height:d}),o.width=h,o.height=d}else i.svgElement&&(f=ft(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(f){var x,w;u?x=w=1:l?(w=1,x=o.width/a.width):c?(x=1,w=o.height/a.height):o.patternUnits="userSpaceOnUse",x!=null&&!isNaN(x)&&(o.width=x),w!=null&&!isNaN(w)&&(o.height=w);var b=ste(i);b&&(o.patternTransform=b);var C=Cr("pattern","",o,[f]),D=CL(C),S=r.patternCache,_=S[D];_||(_=r.zrId+"-p"+r.patternIdx++,S[D]=_,o.id=_,C=r.defs[_]=Cr("pattern",_,o,[f])),e[n]=T_(_)}}function bat(t,e,n){var r=n.clipPathCache,i=n.defs,a=r[t.id];if(!a){a=n.zrId+"-c"+n.clipPathIdx++;var o={id:a};r[t.id]=a,i[a]=Cr("clipPath",a,o,[Gae(t,n)])}e["clip-path"]=T_(a)}function iG(t){return document.createTextNode(t)}function Ff(t,e,n){t.insertBefore(e,n)}function aG(t,e){t.removeChild(e)}function oG(t,e){t.appendChild(e)}function qae(t){return t.parentNode}function Xae(t){return t.nextSibling}function uk(t,e){t.textContent=e}var sG=58,Cat=120,Sat=Cr("","");function qR(t){return t===void 0}function Os(t){return t!==void 0}function Dat(t,e,n){for(var r={},i=e;i<=n;++i){var a=t[i].key;a!==void 0&&(r[a]=i)}return r}function vm(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function ty(t){var e,n=t.children,r=t.tag;if(Os(r)){var i=t.elm=Bae(r);if(_L(Sat,t),Me(n))for(e=0;e<n.length;++e){var a=n[e];a!=null&&oG(i,ty(a))}else Os(t.text)&&!Ke(t.text)&&oG(i,iG(t.text))}else t.elm=iG(t.text);return t.elm}function Kae(t,e,n,r,i){for(;r<=i;++r){var a=n[r];a!=null&&Ff(t,ty(a),e)}}function ES(t,e,n,r){for(;n<=r;++n){var i=e[n];if(i!=null)if(Os(i.tag)){var a=qae(i.elm);aG(a,i.elm)}else aG(t,i.elm)}}function _L(t,e){var n,r=e.elm,i=t&&t.attrs||{},a=e.attrs||{};if(i!==a){for(n in a){var o=a[n],s=i[n];s!==o&&(o===!0?r.setAttribute(n,""):o===!1?r.removeAttribute(n):n.charCodeAt(0)!==Cat?r.setAttribute(n,o):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(aat,n,o):n.charCodeAt(3)===sG?r.setAttributeNS(oat,n,o):n.charCodeAt(5)===sG?r.setAttributeNS(zae,n,o):r.setAttribute(n,o))}for(n in i)n in a||r.removeAttribute(n)}}function _at(t,e,n){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],u=n.length-1,l=n[0],c=n[u],f,h,d,p;r<=a&&i<=u;)o==null?o=e[++r]:s==null?s=e[--a]:l==null?l=n[++i]:c==null?c=n[--u]:vm(o,l)?(Hd(o,l),o=e[++r],l=n[++i]):vm(s,c)?(Hd(s,c),s=e[--a],c=n[--u]):vm(o,c)?(Hd(o,c),Ff(t,o.elm,Xae(s.elm)),o=e[++r],c=n[--u]):vm(s,l)?(Hd(s,l),Ff(t,s.elm,o.elm),s=e[--a],l=n[++i]):(qR(f)&&(f=Dat(e,r,a)),h=f[l.key],qR(h)?Ff(t,ty(l),o.elm):(d=e[h],d.tag!==l.tag?Ff(t,ty(l),o.elm):(Hd(d,l),e[h]=void 0,Ff(t,d.elm,o.elm))),l=n[++i]);(r<=a||i<=u)&&(r>a?(p=n[u+1]==null?null:n[u+1].elm,Kae(t,p,n,i,u)):ES(t,e,r,a))}function Hd(t,e){var n=e.elm=t.elm,r=t.children,i=e.children;t!==e&&(_L(t,e),qR(e.text)?Os(r)&&Os(i)?r!==i&&_at(n,r,i):Os(i)?(Os(t.text)&&uk(n,""),Kae(n,null,i,0,i.length-1)):Os(r)?ES(n,r,0,r.length-1):Os(t.text)&&uk(n,""):t.text!==e.text&&(Os(r)&&ES(n,r,0,r.length-1),uk(n,e.text)))}function Tat(t,e){if(vm(t,e))Hd(t,e);else{var n=t.elm,r=qae(n);ty(e),r!==null&&(Ff(r,e.elm,Xae(n)),ES(r,[t],0,0))}return e}var Eat=0,Aat=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=uG(),this.configLayer=uG(),this.storage=n,this._opts=r=De({},r),this.root=e,this._id="zr"+Eat++,this._oldVNode=ZU(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=Bae("svg");_L(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",Tat(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return rG(e,jR(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=jR(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress;var o=[],s=this._bgVNode=kat(r,i,this._backgroundColor,a);s&&o.push(s);var u=e.compress?null:this._mainVNode=Cr("g","main",{},[]);this._paintList(n,a,u?u.children:o),u&&o.push(u);var l=$e(Mt(a.defs),function(h){return a.defs[h]});if(l.length&&o.push(Cr("defs","defs",{},l)),e.animation){var c=lat(a.cssNodes,a.cssAnims,{newline:!0});if(c){var f=Cr("style","stl",{},[],c);o.push(f)}}return ZU(r,i,o,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},CL(this.renderToVNode({animation:yt(e.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:yt(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var i=e.length,a=[],o=0,s,u,l=0,c=0;c<i;c++){var f=e[c];if(!f.invisible){var h=f.__clipPaths,d=h&&h.length||0,p=u&&u.length||0,v=void 0;for(v=Math.max(d-1,p-1);v>=0&&!(h&&u&&h[v]===u[v]);v--);for(var m=p-1;m>v;m--)o--,s=a[o-1];for(var g=v+1;g<d;g++){var y={};bat(h[g],y,n);var x=Cr("g","clip-g-"+l++,y,[]);(s?s.children:r).push(x),a[o++]=x,s=x}u=h;var w=rG(f,n);w&&(s?s.children:r).push(w)}}},t.prototype.resize=function(e,n){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),i&&a&&(a.style.display="none",e=gp(i,0,r),n=gp(i,1,r),a.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,a){var o=a.style;o.width=e+"px",o.height=n+"px"}if(ZP(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",n));var u=this._bgVNode&&this._bgVNode.elm;u&&(u.setAttribute("width",e),u.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=mHe(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function uG(t){return function(){}}function kat(t,e,n,r){var i;if(n&&n!=="none")if(i=Cr("rect","bg",{width:t,height:e,x:"0",y:"0",id:"0"}),ate(n))Hae({fill:n},i.attrs,"fill",r);else if(ZP(n))jae({style:{fill:n},dirty:qr,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",r);else{var a=O0(n),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}const Iat=Aat;function Nat(t){t.registerPainter("svg",Iat)}function lG(t,e,n){var r=tl.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=a*n,r}var Rat=function(t){en(e,t);function e(n,r,i){var a=t.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||eS,typeof n=="string"?o=lG(n,r,i):Ke(n)&&(o=n,n=o.id),a.id=n,a.dom=o;var s=o.style;return s&&(GP(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=lG("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,u=!1,l=new _t(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var x=new _t(0,0,0,0);x.copy(y),o.push(x)}else{for(var w=!1,b=1/0,C=0,D=0;D<o.length;++D){var S=o[D];if(S.intersect(y)){var _=new _t(0,0,0,0);_.copy(S),_.union(y),o[D]=_,w=!0;break}else if(u){l.copy(y),l.union(S);var T=y.width*y.height,E=S.width*S.height,A=l.width*l.height,N=A-T-E;N<b&&(b=N,C=D)}}if(u&&(o[C].union(y),w=!0),!w){var x=new _t(0,0,0,0);x.copy(y),o.push(x)}u||(u=o.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=n[f];if(h){var d=h.shouldBePainted(i,a,!0,!0),p=h.__isRendered&&(h.__dirty&Ta||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Ta||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=r[f],d=h.shouldBePainted(i,a,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<o.length;){if(o[f].isZero()){o.splice(f,1);continue}for(var g=f+1;g<o.length;)o[f].intersect(o[g])?(m=!0,o[f].union(o[g]),o.splice(g,1)):g++;f++}}while(m);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=n+"px",o.height=r+"px"),a.width=n*i,a.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(n,r,i){var a=this.dom,o=this.ctx,s=a.width,u=a.height;r=r||this.clearColor;var l=this.motionBlur&&!n,c=this.lastFrameAlpha,f=this.dpr,h=this;l&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/f,u/f));var d=this.domBack;function p(v,m,g,y){if(o.clearRect(v,m,g,y),r&&r!=="transparent"){var x=void 0;if(B1(r)){var w=r.global||r.__width===g&&r.__height===y;x=w&&r.__canvasGradient||pR(o,r,{x:0,y:0,width:g,height:y}),r.__canvasGradient=x,r.__width=g,r.__height=y}else Nee(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,x=vR(o,r,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}}));o.save(),o.fillStyle=x||r,o.fillRect(v,m,g,y),o.restore()}l&&(o.save(),o.globalAlpha=c,o.drawImage(d,v,m,g,y),o.restore())}!i||l?p(0,0,s,u):i.length&&W(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},e}(Ss);const lk=Rat;var cG=1e5,Cf=314159,$w=.01,$at=.001;function Mat(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function Oat(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var Fat=function(){function t(e,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=De({},r||{}),this.dpr=r.devicePixelRatio||eS,this._singleCanvas=a,this.root=e;var o=e.style;o&&(GP(e),e.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var u=this._layers;if(a){var c=e,f=c.width,h=c.height;r.width!=null&&(f=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new lk(c,this,this.dpr);d.__builtin__=!0,d.initContext(),u[Cf]=d,d.zlevel=Cf,s.push(Cf),this._domRoot=e}else{this._width=gp(e,0,r),this._height=gp(e,1,r);var l=this._domRoot=Oat(this._width,this._height);e.appendChild(l)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var u=a===0?this._backgroundColor:null;s.refresh(u)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<n;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(cG)),a||(a=r.ctx,a.save()),Kf(a,s,i,o===n-1))}a&&a.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(cG)},t.prototype.paintOne=function(e,n){U3(e,n)},t.prototype._paintList=function(e,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,n,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(l){l.afterBrush&&l.afterBrush()});else{var u=this;MN(function(){u._paintList(e,n,r,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(Cf).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var u=this._zlevelList[s],l=this._layers[u];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||r)&&a.push(l)}for(var c=!0,f=!1,h=function(v){var m=a[v],g=m.ctx,y=o&&m.createRepaintRects(e,n,d._width,d._height),x=r?m.__startIndex:m.__drawIndex,w=!r&&m.incremental&&Date.now,b=w&&Date.now(),C=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,C,y);else if(x===m.__startIndex){var D=e[x];(!D.incremental||!D.notClear||r)&&m.clear(!1,C,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=m.__startIndex);var S,_=function(N){var R={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(S=x;S<m.__endIndex;S++){var M=e[S];if(M.__inHover&&(f=!0),i._doPaintEl(M,m,o,N,R,S===m.__endIndex-1),w){var $=Date.now()-b;if($>15)break}}R.prevElClipPaths&&g.restore()};if(y)if(y.length===0)S=m.__endIndex;else for(var T=d.dpr,E=0;E<y.length;++E){var A=y[E];g.save(),g.beginPath(),g.rect(A.x*T,A.y*T,A.width*T,A.height*T),g.clip(),_(A),g.restore()}else g.save(),_(),g.restore();m.__drawIndex=S,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<a.length;p++)h(p);return bt.wxa&&W(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,i,a,o){var s=n.ctx;if(r){var u=e.getPaintRect();(!i||u&&u.intersect(i))&&(Kf(s,e,a,o),e.setPrevPaintRect(u))}else Kf(s,e,a,o)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Cf);var r=this._layers[e];return r||(r=new lk("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?vt(r,this._layerConfig[e],!0):this._layerConfig[e-$w]&&vt(r,this._layerConfig[e-$w],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,u=-1;if(!r[e]&&Mat(n)){if(a>0&&e>i[0]){for(u=0;u<a-1&&!(i[u]<e&&i[u+1]>e);u++);s=r[i[u]]}if(i.splice(u+1,0,e),r[e]=n,!n.virtual)if(s){var l=s.dom;l.nextSibling?o.insertBefore(n.dom,l.nextSibling):o.appendChild(n.dom)}else o.firstChild?o.insertBefore(n.dom,o.firstChild):o.appendChild(n.dom);n.__painter=this}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(n,this._layers[a],a)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(n,o,a)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(n,o,a)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function n(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,u;for(u=0;u<e.length;u++){var i=e[u],l=i.zlevel,c=void 0;s!==l&&(s=l,o=0),i.incremental?(c=this.getLayer(l+$at,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(l+(o>0?$w:0),this._needsManuallyCompositing),c.__builtin__||S_("ZLevel "+l+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==u&&(c.__dirty=!0),c.__startIndex=u,c.incremental?c.__drawIndex=-1:c.__drawIndex=u,n(u),a=c),i.__dirty&Ta&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=u))}n(u),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,W(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?vt(r[e],n,!0):r[e]=n;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+$w){var o=this._layers[a];vt(o,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,i=n[e];i&&(i.dom.parentNode.removeChild(i.dom),delete n[e],r.splice(At(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),n!=null&&(i.height=n),e=gp(a,0,i),n=gp(a,1,i),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(Cf).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Cf].dom;var n=new lk("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,a=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),u=0,l=s.length;u<l;u++){var c=s[u];Kf(r,c,o,u===l-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();const Pat=Fat;function Lat(t){t.registerPainter("canvas",Pat)}ws([Znt,ett,prt,Ant,Lat,Nat,Prt,Zit,tit,mit,Tit]);function zat({options:t={}}){const{ref:e,width:n,height:r}=JH(),[i,a]=B.useState(null),o=()=>{if(!e.current)return;let s=VJe.init(e.current,"light",{renderer:"canvas",devicePixelRatio:2,locale:"EN"});a(s)};return B.useEffect(()=>(o(),()=>i==null?void 0:i.dispose()),[]),B.useEffect(()=>{i==null||i.resize({width:n,height:r})},[n,r]),B.useEffect(()=>{i&&i.setOption(t,!0,!0)},[i,t]),H.jsx("div",{style:{width:"100%",height:"100%"},ref:e})}const Yae=B.memo(zat,i2);function Bat({data:t,type:e="bar"}){const n=Object.keys(t),r={tooltip:{trigger:"axis",axisPointer:{type:"line",label:{show:!0}}},grid:{left:"1%",right:"1%",bottom:"2%",containLabel:!0,top:"5%"},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0},axisLabel:{overflow:"truncate",width:100},splitLine:{lineStyle:{color:"#888",type:"dashed",opacity:.3}}}],yAxis:[{type:"value",splitLine:{lineStyle:{color:"#888",type:"dashed",opacity:.3}}}],series:[{name:"Count",type:e,barWidth:"60%",data:n.map(i=>t[i]),color:"#2D72D2"}]};return H.jsx(Yae,{options:r})}function Vat({data:t}){console.log(t);const e={tooltip:{trigger:"item"},series:[{name:"Count",type:"pie",radius:"50%",data:Object.keys(t).map(n=>({value:t[n],name:n})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{textBorderColor:"transparent",color:"#888"}}]};return H.jsx(Yae,{options:e})}const Wat=[{label:"Bar",value:"bar"},{label:"Line",value:"line"},{label:"Pie",value:"pie"}];function Uat({data:t}){const[e,n]=B.useState("bar"),r=e==="pie"?Vat:Bat;return H.jsxs("div",{className:GC.chart,children:[H.jsx(uM,{small:!0,className:GC.switcher,options:Wat,value:e,onValueChange:i=>n(i),intent:jr.PRIMARY}),H.jsx(r,{data:t,type:e})]})}const Gat=["Zeros","Negatives","Missing values","Invalid values"];function Hat({column:t}){const[e,n]=B.useState(!1),[r,i]=B.useState(null),a=FH();if(B.useEffect(()=>{n(!0);const o=a.getState();let s={data:o.data.transformed,column:t,type:o.data.details[t].type,extended:!0};setTimeout(()=>{O9e(s).then(u=>{i(u),console.log(u)}).catch(u=>console.log(u)).finally(()=>n(!1))})},[]),!!t)return e||!r?H.jsx(Tee,{visible:!0}):H.jsxs(H.Fragment,{children:[H.jsx("h3",{children:t}),H.jsx(Uat,{data:r.frequency}),H.jsx("h4",{style:{marginTop:30},children:"Statistics"}),H.jsx(sM,{bordered:!0,compact:!0,style:{marginTop:10},children:Object.keys(r).map(o=>{if(o==="frequency")return H.jsx(H.Fragment,{});const s=Gat.includes(o)&&r[o];return H.jsxs(Mv,{className:hv(GC.row,s&&GC.danger),interactive:!0,children:[H.jsx("div",{children:o}),H.jsx("div",{children:r[o].toLocaleString()})]},o)})})]})}const ck={quality:z6e,transforms:V6e,profile:Hat};function jat(){const t=Ga(),[e,n]=B.useState(!1),{open:r,type:i,column:a}=mi(l=>l.data.drawer),o=mi(l=>l.appState.darkMode),s=ck[i]||(ck[i]=()=>H.jsx(H.Fragment,{})),u=()=>{t(Yu({path:"drawer.open",value:!1})),n(!1)};return H.jsx(yde,{className:hv(o&&jp),size:"50vw",isOpen:r,onClose:u,hasBackdrop:!1,onOpened:()=>n(!0),lazy:!1,children:H.jsx("div",{className:Dle,style:{padding:10},children:e?H.jsx(s,{column:a}):H.jsx(Tee,{visible:!0})})})}function qat(){const t=mi(r=>r.toasts),e=Ga(),n=r=>{e(y5e({id:r}))};return H.jsx(_de,{children:Object.keys(t).map(r=>{const i=t[r];return H.jsx(wH,{onDismiss:()=>n(i.id),message:i.message,timeout:5e3},i.id)})})}function Xat(){const t=mi(e=>e.appState.darkMode);return H.jsxs("div",{className:hv("app",t&&jp),children:[H.jsx(bve,{}),H.jsx(EJ,{}),H.jsx(qat,{}),H.jsxs("div",{className:"data-view",children:[H.jsx(L6e,{}),H.jsx(jat,{})]})]})}fk.createRoot(document.getElementById("root")).render(H.jsx(Cpe,{store:EP,children:H.jsx(Xat,{})}));export{Et as I,ip as _,ap as a,Y4 as b,Qce as p};
