function Rse(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Al(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var r7={exports:{}},aS={},i7={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=Symbol.for("react.element"),$se=Symbol.for("react.portal"),Mse=Symbol.for("react.fragment"),Ose=Symbol.for("react.strict_mode"),Pse=Symbol.for("react.profiler"),Fse=Symbol.for("react.provider"),Lse=Symbol.for("react.context"),zse=Symbol.for("react.forward_ref"),Bse=Symbol.for("react.suspense"),Vse=Symbol.for("react.memo"),Wse=Symbol.for("react.lazy"),p4=Symbol.iterator;function Use(t){return t===null||typeof t!="object"?null:(t=p4&&t[p4]||t["@@iterator"],typeof t=="function"?t:null)}var a7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o7=Object.assign,s7={};function Qv(t,e,n){this.props=t,this.context=e,this.refs=s7,this.updater=n||a7}Qv.prototype.isReactComponent={};Qv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l7(){}l7.prototype=Qv.prototype;function D$(t,e,n){this.props=t,this.context=e,this.refs=s7,this.updater=n||a7}var _$=D$.prototype=new l7;_$.constructor=D$;o7(_$,Qv.prototype);_$.isPureReactComponent=!0;var v4=Array.isArray,u7=Object.prototype.hasOwnProperty,T$={current:null},c7={key:!0,ref:!0,__self:!0,__source:!0};function f7(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)u7.call(e,r)&&!c7.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Ny,type:t,key:a,ref:o,props:i,_owner:T$.current}}function Gse(t,e){return{$$typeof:Ny,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E$(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ny}function Hse(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var g4=/\/+/g;function zT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hse(""+t.key):e.toString(36)}function hb(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ny:case $se:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zT(o,0):r,v4(i)?(n="",t!=null&&(n=t.replace(g4,"$&/")+"/"),hb(i,e,n,"",function(u){return u})):i!=null&&(E$(i)&&(i=Gse(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(g4,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",v4(t))for(var s=0;s<t.length;s++){a=t[s];var l=r+zT(a,s);o+=hb(a,e,n,l,i)}else if(l=Use(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=r+zT(a,s++),o+=hb(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zx(t,e,n){if(t==null)return t;var r=[],i=0;return hb(t,r,"","",function(a){return e.call(n,a,i++)}),r}function jse(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yi={current:null},db={transition:null},qse={ReactCurrentDispatcher:Yi,ReactCurrentBatchConfig:db,ReactCurrentOwner:T$};It.Children={map:zx,forEach:function(t,e,n){zx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zx(t,function(){e++}),e},toArray:function(t){return zx(t,function(e){return e})||[]},only:function(t){if(!E$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};It.Component=Qv;It.Fragment=Mse;It.Profiler=Pse;It.PureComponent=D$;It.StrictMode=Ose;It.Suspense=Bse;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qse;It.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=o7({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=T$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)u7.call(e,l)&&!c7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Ny,type:t.type,key:i,ref:a,props:r,_owner:o}};It.createContext=function(t){return t={$$typeof:Lse,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fse,_context:t},t.Consumer=t};It.createElement=f7;It.createFactory=function(t){var e=f7.bind(null,t);return e.type=t,e};It.createRef=function(){return{current:null}};It.forwardRef=function(t){return{$$typeof:zse,render:t}};It.isValidElement=E$;It.lazy=function(t){return{$$typeof:Wse,_payload:{_status:-1,_result:t},_init:jse}};It.memo=function(t,e){return{$$typeof:Vse,type:t,compare:e===void 0?null:e}};It.startTransition=function(t){var e=db.transition;db.transition={};try{t()}finally{db.transition=e}};It.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};It.useCallback=function(t,e){return Yi.current.useCallback(t,e)};It.useContext=function(t){return Yi.current.useContext(t)};It.useDebugValue=function(){};It.useDeferredValue=function(t){return Yi.current.useDeferredValue(t)};It.useEffect=function(t,e){return Yi.current.useEffect(t,e)};It.useId=function(){return Yi.current.useId()};It.useImperativeHandle=function(t,e,n){return Yi.current.useImperativeHandle(t,e,n)};It.useInsertionEffect=function(t,e){return Yi.current.useInsertionEffect(t,e)};It.useLayoutEffect=function(t,e){return Yi.current.useLayoutEffect(t,e)};It.useMemo=function(t,e){return Yi.current.useMemo(t,e)};It.useReducer=function(t,e,n){return Yi.current.useReducer(t,e,n)};It.useRef=function(t){return Yi.current.useRef(t)};It.useState=function(t){return Yi.current.useState(t)};It.useSyncExternalStore=function(t,e,n){return Yi.current.useSyncExternalStore(t,e,n)};It.useTransition=function(){return Yi.current.useTransition()};It.version="18.2.0";i7.exports=It;var L=i7.exports;const An=Al(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kse=L,Xse=Symbol.for("react.element"),Yse=Symbol.for("react.fragment"),Zse=Object.prototype.hasOwnProperty,Qse=Kse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jse={key:!0,ref:!0,__self:!0,__source:!0};function h7(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Zse.call(e,r)&&!Jse.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Xse,type:t,key:a,ref:o,props:i,_owner:Qse.current}}aS.Fragment=Yse;aS.jsx=h7;aS.jsxs=h7;r7.exports=aS;var I=r7.exports,BN={},d7={exports:{}},Qa={},p7={exports:{}},v7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,z){var U=P.length;P.push(z);e:for(;0<U;){var H=U-1>>>1,F=P[H];if(0<i(F,z))P[H]=z,P[U]=F,U=H;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],U=P.pop();if(U!==z){P[0]=U;e:for(var H=0,F=P.length,W=F>>>1;H<W;){var j=2*(H+1)-1,K=P[j],Y=j+1,Z=P[Y];if(0>i(K,U))Y<F&&0>i(Z,K)?(P[H]=Z,P[Y]=U,H=Y):(P[H]=K,P[j]=U,H=j);else if(Y<F&&0>i(Z,U))P[H]=Z,P[Y]=U,H=Y;else break e}}return z}function i(P,z){var U=P.sortIndex-z.sortIndex;return U!==0?U:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=P)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function w(P){if(v=!1,x(P),!p)if(n(l)!==null)p=!0,M(b);else{var z=n(u);z!==null&&B(w,z.startTime-P)}}function b(P,z){p=!1,v&&(v=!1,g(D),D=-1),d=!0;var U=h;try{for(x(z),f=n(l);f!==null&&(!(f.expirationTime>z)||P&&!E());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var F=H(f.expirationTime<=z);z=t.unstable_now(),typeof F=="function"?f.callback=F:f===n(l)&&r(l),x(z)}else r(l);f=n(l)}if(f!==null)var W=!0;else{var j=n(u);j!==null&&B(w,j.startTime-z),W=!1}return W}finally{f=null,h=U,d=!1}}var C=!1,S=null,D=-1,_=5,T=-1;function E(){return!(t.unstable_now()-T<_)}function A(){if(S!==null){var P=t.unstable_now();T=P;var z=!0;try{z=S(!0,P)}finally{z?R():(C=!1,S=null)}}else C=!1}var R;if(typeof y=="function")R=function(){y(A)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,O=$.port2;$.port1.onmessage=A,R=function(){O.postMessage(null)}}else R=function(){m(A,0)};function M(P){S=P,C||(C=!0,R())}function B(P,z){D=m(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,M(b))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var U=h;h=z;try{return P()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=h;h=P;try{return z()}finally{h=U}},t.unstable_scheduleCallback=function(P,z,U){var H=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,P){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=U+F,P={id:c++,callback:z,priorityLevel:P,startTime:U,expirationTime:F,sortIndex:-1},U>H?(P.sortIndex=U,e(u,P),n(l)===null&&P===n(u)&&(v?(g(D),D=-1):v=!0,B(w,U-H))):(P.sortIndex=F,e(l,P),p||d||(p=!0,M(b))),P},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(P){var z=h;return function(){var U=h;h=z;try{return P.apply(this,arguments)}finally{h=U}}}})(v7);p7.exports=v7;var ele=p7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g7=L,ja=ele;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m7=new Set,v0={};function ud(t,e){av(t,e),av(t+"Capture",e)}function av(t,e){for(v0[t]=e,t=0;t<e.length;t++)m7.add(e[t])}var lu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VN=Object.prototype.hasOwnProperty,tle=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m4={},y4={};function nle(t){return VN.call(y4,t)?!0:VN.call(m4,t)?!1:tle.test(t)?y4[t]=!0:(m4[t]=!0,!1)}function rle(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ile(t,e,n,r){if(e===null||typeof e>"u"||rle(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zi(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ni[t]=new Zi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ni[e]=new Zi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ni[t]=new Zi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ni[t]=new Zi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ni[t]=new Zi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ni[t]=new Zi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ni[t]=new Zi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ni[t]=new Zi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ni[t]=new Zi(t,5,!1,t.toLowerCase(),null,!1,!1)});var A$=/[\-:]([a-z])/g;function N$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(A$,N$);ni[e]=new Zi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(A$,N$);ni[e]=new Zi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(A$,N$);ni[e]=new Zi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ni[t]=new Zi(t,1,!1,t.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ni[t]=new Zi(t,1,!1,t.toLowerCase(),null,!0,!0)});function k$(t,e,n,r){var i=ni.hasOwnProperty(e)?ni[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ile(e,n,i,r)&&(n=null),r||i===null?nle(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bu=g7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bx=Symbol.for("react.element"),fp=Symbol.for("react.portal"),hp=Symbol.for("react.fragment"),I$=Symbol.for("react.strict_mode"),WN=Symbol.for("react.profiler"),y7=Symbol.for("react.provider"),x7=Symbol.for("react.context"),R$=Symbol.for("react.forward_ref"),UN=Symbol.for("react.suspense"),GN=Symbol.for("react.suspense_list"),$$=Symbol.for("react.memo"),ju=Symbol.for("react.lazy"),w7=Symbol.for("react.offscreen"),x4=Symbol.iterator;function Rg(t){return t===null||typeof t!="object"?null:(t=x4&&t[x4]||t["@@iterator"],typeof t=="function"?t:null)}var Fn=Object.assign,BT;function gm(t){if(BT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);BT=e&&e[1]||""}return`
`+BT+t}var VT=!1;function WT(t,e){if(!t||VT)return"";VT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{VT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gm(t):""}function ale(t){switch(t.tag){case 5:return gm(t.type);case 16:return gm("Lazy");case 13:return gm("Suspense");case 19:return gm("SuspenseList");case 0:case 2:case 15:return t=WT(t.type,!1),t;case 11:return t=WT(t.type.render,!1),t;case 1:return t=WT(t.type,!0),t;default:return""}}function HN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hp:return"Fragment";case fp:return"Portal";case WN:return"Profiler";case I$:return"StrictMode";case UN:return"Suspense";case GN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x7:return(t.displayName||"Context")+".Consumer";case y7:return(t._context.displayName||"Context")+".Provider";case R$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $$:return e=t.displayName||null,e!==null?e:HN(t.type)||"Memo";case ju:e=t._payload,t=t._init;try{return HN(t(e))}catch{}}return null}function ole(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HN(e);case 8:return e===I$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $c(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sle(t){var e=b7(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vx(t){t._valueTracker||(t._valueTracker=sle(t))}function C7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=b7(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jN(t,e){var n=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$c(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S7(t,e){e=e.checked,e!=null&&k$(t,"checked",e,!1)}function qN(t,e){S7(t,e);var n=$c(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?KN(t,e.type,n):e.hasOwnProperty("defaultValue")&&KN(t,e.type,$c(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function KN(t,e,n){(e!=="number"||Zb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mm=Array.isArray;function Lp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$c(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function XN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(mm(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$c(n)}}function D7(t,e){var n=$c(e.value),r=$c(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _7(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_7(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wx,T7=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wx=Wx||document.createElement("div"),Wx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function g0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lle=["Webkit","ms","Moz","O"];Object.keys(zm).forEach(function(t){lle.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zm[e]=zm[t]})});function E7(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zm.hasOwnProperty(t)&&zm[t]?(""+e).trim():e+"px"}function A7(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=E7(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ule=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZN(t,e){if(e){if(ule[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function QN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JN=null;function M$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ek=null,zp=null,Bp=null;function D4(t){if(t=Ry(t)){if(typeof ek!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=cS(e),ek(t.stateNode,t.type,e))}}function N7(t){zp?Bp?Bp.push(t):Bp=[t]:zp=t}function k7(){if(zp){var t=zp,e=Bp;if(Bp=zp=null,D4(t),e)for(t=0;t<e.length;t++)D4(e[t])}}function I7(t,e){return t(e)}function R7(){}var UT=!1;function $7(t,e,n){if(UT)return t(e,n);UT=!0;try{return I7(t,e,n)}finally{UT=!1,(zp!==null||Bp!==null)&&(R7(),k7())}}function m0(t,e){var n=t.stateNode;if(n===null)return null;var r=cS(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var tk=!1;if(lu)try{var $g={};Object.defineProperty($g,"passive",{get:function(){tk=!0}}),window.addEventListener("test",$g,$g),window.removeEventListener("test",$g,$g)}catch{tk=!1}function cle(t,e,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Bm=!1,Qb=null,Jb=!1,nk=null,fle={onError:function(t){Bm=!0,Qb=t}};function hle(t,e,n,r,i,a,o,s,l){Bm=!1,Qb=null,cle.apply(fle,arguments)}function dle(t,e,n,r,i,a,o,s,l){if(hle.apply(this,arguments),Bm){if(Bm){var u=Qb;Bm=!1,Qb=null}else throw Error(Ee(198));Jb||(Jb=!0,nk=u)}}function cd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M7(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _4(t){if(cd(t)!==t)throw Error(Ee(188))}function ple(t){var e=t.alternate;if(!e){if(e=cd(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return _4(i),t;if(a===r)return _4(i),e;a=a.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function O7(t){return t=ple(t),t!==null?P7(t):null}function P7(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P7(t);if(e!==null)return e;t=t.sibling}return null}var F7=ja.unstable_scheduleCallback,T4=ja.unstable_cancelCallback,vle=ja.unstable_shouldYield,gle=ja.unstable_requestPaint,nr=ja.unstable_now,mle=ja.unstable_getCurrentPriorityLevel,O$=ja.unstable_ImmediatePriority,L7=ja.unstable_UserBlockingPriority,eC=ja.unstable_NormalPriority,yle=ja.unstable_LowPriority,z7=ja.unstable_IdlePriority,oS=null,ll=null;function xle(t){if(ll&&typeof ll.onCommitFiberRoot=="function")try{ll.onCommitFiberRoot(oS,t,void 0,(t.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:Cle,wle=Math.log,ble=Math.LN2;function Cle(t){return t>>>=0,t===0?32:31-(wle(t)/ble|0)|0}var Ux=64,Gx=4194304;function ym(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tC(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=ym(s):(a&=o,a!==0&&(r=ym(a)))}else o=n&~i,o!==0?r=ym(o):a!==0&&(r=ym(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xs(e),i=1<<n,r|=t[n],e&=~i;return r}function Sle(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dle(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-xs(a),s=1<<o,l=i[o];l===-1?(!(s&n)||s&r)&&(i[o]=Sle(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function rk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function B7(){var t=Ux;return Ux<<=1,!(Ux&4194240)&&(Ux=64),t}function GT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ky(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xs(e),t[e]=n}function _le(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xs(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function P$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Yt=0;function V7(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W7,F$,U7,G7,H7,ik=!1,Hx=[],vc=null,gc=null,mc=null,y0=new Map,x0=new Map,Zu=[],Tle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E4(t,e){switch(t){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":y0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":x0.delete(e.pointerId)}}function Mg(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ry(e),e!==null&&F$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ele(t,e,n,r,i){switch(e){case"focusin":return vc=Mg(vc,t,e,n,r,i),!0;case"dragenter":return gc=Mg(gc,t,e,n,r,i),!0;case"mouseover":return mc=Mg(mc,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return y0.set(a,Mg(y0.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,x0.set(a,Mg(x0.get(a)||null,t,e,n,r,i)),!0}return!1}function j7(t){var e=rh(t.target);if(e!==null){var n=cd(e);if(n!==null){if(e=n.tag,e===13){if(e=M7(n),e!==null){t.blockedOn=e,H7(t.priority,function(){U7(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ak(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JN=r,n.target.dispatchEvent(r),JN=null}else return e=Ry(n),e!==null&&F$(e),t.blockedOn=n,!1;e.shift()}return!0}function A4(t,e,n){pb(t)&&n.delete(e)}function Ale(){ik=!1,vc!==null&&pb(vc)&&(vc=null),gc!==null&&pb(gc)&&(gc=null),mc!==null&&pb(mc)&&(mc=null),y0.forEach(A4),x0.forEach(A4)}function Og(t,e){t.blockedOn===e&&(t.blockedOn=null,ik||(ik=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,Ale)))}function w0(t){function e(i){return Og(i,t)}if(0<Hx.length){Og(Hx[0],t);for(var n=1;n<Hx.length;n++){var r=Hx[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vc!==null&&Og(vc,t),gc!==null&&Og(gc,t),mc!==null&&Og(mc,t),y0.forEach(e),x0.forEach(e),n=0;n<Zu.length;n++)r=Zu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zu.length&&(n=Zu[0],n.blockedOn===null);)j7(n),n.blockedOn===null&&Zu.shift()}var Vp=bu.ReactCurrentBatchConfig,nC=!0;function Nle(t,e,n,r){var i=Yt,a=Vp.transition;Vp.transition=null;try{Yt=1,L$(t,e,n,r)}finally{Yt=i,Vp.transition=a}}function kle(t,e,n,r){var i=Yt,a=Vp.transition;Vp.transition=null;try{Yt=4,L$(t,e,n,r)}finally{Yt=i,Vp.transition=a}}function L$(t,e,n,r){if(nC){var i=ak(t,e,n,r);if(i===null)eE(t,e,r,rC,n),E4(t,r);else if(Ele(i,t,e,n,r))r.stopPropagation();else if(E4(t,r),e&4&&-1<Tle.indexOf(t)){for(;i!==null;){var a=Ry(i);if(a!==null&&W7(a),a=ak(t,e,n,r),a===null&&eE(t,e,r,rC,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else eE(t,e,r,null,n)}}var rC=null;function ak(t,e,n,r){if(rC=null,t=M$(r),t=rh(t),t!==null)if(e=cd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M7(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rC=t,null}function q7(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mle()){case O$:return 1;case L7:return 4;case eC:case yle:return 16;case z7:return 536870912;default:return 16}default:return 16}}var tc=null,z$=null,vb=null;function K7(){if(vb)return vb;var t,e=z$,n=e.length,r,i="value"in tc?tc.value:tc.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return vb=i.slice(t,1<r?1-r:void 0)}function gb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jx(){return!0}function N4(){return!1}function Ja(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?jx:N4,this.isPropagationStopped=N4,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jx)},persist:function(){},isPersistent:jx}),e}var Jv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B$=Ja(Jv),Iy=Fn({},Jv,{view:0,detail:0}),Ile=Ja(Iy),HT,jT,Pg,sS=Fn({},Iy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pg&&(Pg&&t.type==="mousemove"?(HT=t.screenX-Pg.screenX,jT=t.screenY-Pg.screenY):jT=HT=0,Pg=t),HT)},movementY:function(t){return"movementY"in t?t.movementY:jT}}),k4=Ja(sS),Rle=Fn({},sS,{dataTransfer:0}),$le=Ja(Rle),Mle=Fn({},Iy,{relatedTarget:0}),qT=Ja(Mle),Ole=Fn({},Jv,{animationName:0,elapsedTime:0,pseudoElement:0}),Ple=Ja(Ole),Fle=Fn({},Jv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lle=Ja(Fle),zle=Fn({},Jv,{data:0}),I4=Ja(zle),Ble={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ule(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wle[t])?!!e[t]:!1}function V$(){return Ule}var Gle=Fn({},Iy,{key:function(t){if(t.key){var e=Ble[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V$,charCode:function(t){return t.type==="keypress"?gb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hle=Ja(Gle),jle=Fn({},sS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R4=Ja(jle),qle=Fn({},Iy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V$}),Kle=Ja(qle),Xle=Fn({},Jv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yle=Ja(Xle),Zle=Fn({},sS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qle=Ja(Zle),Jle=[9,13,27,32],W$=lu&&"CompositionEvent"in window,Vm=null;lu&&"documentMode"in document&&(Vm=document.documentMode);var eue=lu&&"TextEvent"in window&&!Vm,X7=lu&&(!W$||Vm&&8<Vm&&11>=Vm),$4=String.fromCharCode(32),M4=!1;function Y7(t,e){switch(t){case"keyup":return Jle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z7(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dp=!1;function tue(t,e){switch(t){case"compositionend":return Z7(e);case"keypress":return e.which!==32?null:(M4=!0,$4);case"textInput":return t=e.data,t===$4&&M4?null:t;default:return null}}function nue(t,e){if(dp)return t==="compositionend"||!W$&&Y7(t,e)?(t=K7(),vb=z$=tc=null,dp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X7&&e.locale!=="ko"?null:e.data;default:return null}}var rue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rue[t.type]:e==="textarea"}function Q7(t,e,n,r){N7(r),e=iC(e,"onChange"),0<e.length&&(n=new B$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wm=null,b0=null;function iue(t){uG(t,0)}function lS(t){var e=gp(t);if(C7(e))return t}function aue(t,e){if(t==="change")return e}var J7=!1;if(lu){var KT;if(lu){var XT="oninput"in document;if(!XT){var P4=document.createElement("div");P4.setAttribute("oninput","return;"),XT=typeof P4.oninput=="function"}KT=XT}else KT=!1;J7=KT&&(!document.documentMode||9<document.documentMode)}function F4(){Wm&&(Wm.detachEvent("onpropertychange",eG),b0=Wm=null)}function eG(t){if(t.propertyName==="value"&&lS(b0)){var e=[];Q7(e,b0,t,M$(t)),$7(iue,e)}}function oue(t,e,n){t==="focusin"?(F4(),Wm=e,b0=n,Wm.attachEvent("onpropertychange",eG)):t==="focusout"&&F4()}function sue(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lS(b0)}function lue(t,e){if(t==="click")return lS(e)}function uue(t,e){if(t==="input"||t==="change")return lS(e)}function cue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var As=typeof Object.is=="function"?Object.is:cue;function C0(t,e){if(As(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!VN.call(e,i)||!As(t[i],e[i]))return!1}return!0}function L4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z4(t,e){var n=L4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L4(n)}}function tG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nG(){for(var t=window,e=Zb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zb(t.document)}return e}function U$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fue(t){var e=nG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tG(n.ownerDocument.documentElement,n)){if(r!==null&&U$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=z4(n,a);var o=z4(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hue=lu&&"documentMode"in document&&11>=document.documentMode,pp=null,ok=null,Um=null,sk=!1;function B4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sk||pp==null||pp!==Zb(r)||(r=pp,"selectionStart"in r&&U$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Um&&C0(Um,r)||(Um=r,r=iC(ok,"onSelect"),0<r.length&&(e=new B$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pp)))}function qx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vp={animationend:qx("Animation","AnimationEnd"),animationiteration:qx("Animation","AnimationIteration"),animationstart:qx("Animation","AnimationStart"),transitionend:qx("Transition","TransitionEnd")},YT={},rG={};lu&&(rG=document.createElement("div").style,"AnimationEvent"in window||(delete vp.animationend.animation,delete vp.animationiteration.animation,delete vp.animationstart.animation),"TransitionEvent"in window||delete vp.transitionend.transition);function uS(t){if(YT[t])return YT[t];if(!vp[t])return t;var e=vp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rG)return YT[t]=e[n];return t}var iG=uS("animationend"),aG=uS("animationiteration"),oG=uS("animationstart"),sG=uS("transitionend"),lG=new Map,V4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qc(t,e){lG.set(t,e),ud(e,[t])}for(var ZT=0;ZT<V4.length;ZT++){var QT=V4[ZT],due=QT.toLowerCase(),pue=QT[0].toUpperCase()+QT.slice(1);Qc(due,"on"+pue)}Qc(iG,"onAnimationEnd");Qc(aG,"onAnimationIteration");Qc(oG,"onAnimationStart");Qc("dblclick","onDoubleClick");Qc("focusin","onFocus");Qc("focusout","onBlur");Qc(sG,"onTransitionEnd");av("onMouseEnter",["mouseout","mouseover"]);av("onMouseLeave",["mouseout","mouseover"]);av("onPointerEnter",["pointerout","pointerover"]);av("onPointerLeave",["pointerout","pointerover"]);ud("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ud("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ud("onBeforeInput",["compositionend","keypress","textInput","paste"]);ud("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ud("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ud("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vue=new Set("cancel close invalid load scroll toggle".split(" ").concat(xm));function W4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dle(r,e,void 0,t),t.currentTarget=null}function uG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;W4(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;W4(i,s,u),a=l}}}if(Jb)throw t=nk,Jb=!1,nk=null,t}function xn(t,e){var n=e[hk];n===void 0&&(n=e[hk]=new Set);var r=t+"__bubble";n.has(r)||(cG(e,t,2,!1),n.add(r))}function JT(t,e,n){var r=0;e&&(r|=4),cG(n,t,r,e)}var Kx="_reactListening"+Math.random().toString(36).slice(2);function S0(t){if(!t[Kx]){t[Kx]=!0,m7.forEach(function(n){n!=="selectionchange"&&(vue.has(n)||JT(n,!1,t),JT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kx]||(e[Kx]=!0,JT("selectionchange",!1,e))}}function cG(t,e,n,r){switch(q7(e)){case 1:var i=Nle;break;case 4:i=kle;break;default:i=L$}n=i.bind(null,e,n,t),i=void 0,!tk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function eE(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=rh(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}$7(function(){var u=a,c=M$(n),f=[];e:{var h=lG.get(t);if(h!==void 0){var d=B$,p=t;switch(t){case"keypress":if(gb(n)===0)break e;case"keydown":case"keyup":d=Hle;break;case"focusin":p="focus",d=qT;break;case"focusout":p="blur",d=qT;break;case"beforeblur":case"afterblur":d=qT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=k4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=$le;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Kle;break;case iG:case aG:case oG:d=Ple;break;case sG:d=Yle;break;case"scroll":d=Ile;break;case"wheel":d=Qle;break;case"copy":case"cut":case"paste":d=Lle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=R4}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=m0(y,g),w!=null&&v.push(D0(y,w,x)))),m)break;y=y.return}0<v.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==JN&&(p=n.relatedTarget||n.fromElement)&&(rh(p)||p[uu]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?rh(p):null,p!==null&&(m=cd(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(v=k4,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=R4,w="onPointerLeave",g="onPointerEnter",y="pointer"),m=d==null?h:gp(d),x=p==null?h:gp(p),h=new v(w,y+"leave",d,n,c),h.target=m,h.relatedTarget=x,w=null,rh(c)===u&&(v=new v(g,y+"enter",p,n,c),v.target=x,v.relatedTarget=m,w=v),m=w,d&&p)t:{for(v=d,g=p,y=0,x=v;x;x=Id(x))y++;for(x=0,w=g;w;w=Id(w))x++;for(;0<y-x;)v=Id(v),y--;for(;0<x-y;)g=Id(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Id(v),g=Id(g)}v=null}else v=null;d!==null&&U4(f,h,d,v,!1),p!==null&&m!==null&&U4(f,m,p,v,!0)}}e:{if(h=u?gp(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var b=aue;else if(O4(h))if(J7)b=uue;else{b=sue;var C=oue}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=lue);if(b&&(b=b(t,u))){Q7(f,b,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&KN(h,"number",h.value)}switch(C=u?gp(u):window,t){case"focusin":(O4(C)||C.contentEditable==="true")&&(pp=C,ok=u,Um=null);break;case"focusout":Um=ok=pp=null;break;case"mousedown":sk=!0;break;case"contextmenu":case"mouseup":case"dragend":sk=!1,B4(f,n,c);break;case"selectionchange":if(hue)break;case"keydown":case"keyup":B4(f,n,c)}var S;if(W$)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else dp?Y7(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(X7&&n.locale!=="ko"&&(dp||D!=="onCompositionStart"?D==="onCompositionEnd"&&dp&&(S=K7()):(tc=c,z$="value"in tc?tc.value:tc.textContent,dp=!0)),C=iC(u,D),0<C.length&&(D=new I4(D,t,null,n,c),f.push({event:D,listeners:C}),S?D.data=S:(S=Z7(n),S!==null&&(D.data=S)))),(S=eue?tue(t,n):nue(t,n))&&(u=iC(u,"onBeforeInput"),0<u.length&&(c=new I4("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}uG(f,e)})}function D0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function iC(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=m0(t,n),a!=null&&r.unshift(D0(t,a,i)),a=m0(t,e),a!=null&&r.push(D0(t,a,i))),t=t.return}return r}function Id(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U4(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=m0(n,a),l!=null&&o.unshift(D0(n,l,s))):i||(l=m0(n,a),l!=null&&o.push(D0(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gue=/\r\n?/g,mue=/\u0000|\uFFFD/g;function G4(t){return(typeof t=="string"?t:""+t).replace(gue,`
`).replace(mue,"")}function Xx(t,e,n){if(e=G4(e),G4(t)!==e&&n)throw Error(Ee(425))}function aC(){}var lk=null,uk=null;function ck(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fk=typeof setTimeout=="function"?setTimeout:void 0,yue=typeof clearTimeout=="function"?clearTimeout:void 0,H4=typeof Promise=="function"?Promise:void 0,xue=typeof queueMicrotask=="function"?queueMicrotask:typeof H4<"u"?function(t){return H4.resolve(null).then(t).catch(wue)}:fk;function wue(t){setTimeout(function(){throw t})}function tE(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),w0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);w0(e)}function yc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function j4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eg=Math.random().toString(36).slice(2),tl="__reactFiber$"+eg,_0="__reactProps$"+eg,uu="__reactContainer$"+eg,hk="__reactEvents$"+eg,bue="__reactListeners$"+eg,Cue="__reactHandles$"+eg;function rh(t){var e=t[tl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[uu]||n[tl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=j4(t);t!==null;){if(n=t[tl])return n;t=j4(t)}return e}t=n,n=t.parentNode}return null}function Ry(t){return t=t[tl]||t[uu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function cS(t){return t[_0]||null}var dk=[],mp=-1;function Jc(t){return{current:t}}function bn(t){0>mp||(t.current=dk[mp],dk[mp]=null,mp--)}function hn(t,e){mp++,dk[mp]=t.current,t.current=e}var Mc={},Di=Jc(Mc),va=Jc(!1),$h=Mc;function ov(t,e){var n=t.type.contextTypes;if(!n)return Mc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ga(t){return t=t.childContextTypes,t!=null}function oC(){bn(va),bn(Di)}function q4(t,e,n){if(Di.current!==Mc)throw Error(Ee(168));hn(Di,e),hn(va,n)}function fG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ee(108,ole(t)||"Unknown",i));return Fn({},n,r)}function sC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mc,$h=Di.current,hn(Di,t),hn(va,va.current),!0}function K4(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=fG(t,e,$h),r.__reactInternalMemoizedMergedChildContext=t,bn(va),bn(Di),hn(Di,t)):bn(va),hn(va,n)}var Kl=null,fS=!1,nE=!1;function hG(t){Kl===null?Kl=[t]:Kl.push(t)}function Sue(t){fS=!0,hG(t)}function ef(){if(!nE&&Kl!==null){nE=!0;var t=0,e=Yt;try{var n=Kl;for(Yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kl=null,fS=!1}catch(i){throw Kl!==null&&(Kl=Kl.slice(t+1)),F7(O$,ef),i}finally{Yt=e,nE=!1}}return null}var yp=[],xp=0,lC=null,uC=0,xo=[],wo=0,Mh=null,Jl=1,eu="";function Uf(t,e){yp[xp++]=uC,yp[xp++]=lC,lC=t,uC=e}function dG(t,e,n){xo[wo++]=Jl,xo[wo++]=eu,xo[wo++]=Mh,Mh=t;var r=Jl;t=eu;var i=32-xs(r)-1;r&=~(1<<i),n+=1;var a=32-xs(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jl=1<<32-xs(e)+i|n<<i|r,eu=a+t}else Jl=1<<a|n<<i|r,eu=t}function G$(t){t.return!==null&&(Uf(t,1),dG(t,1,0))}function H$(t){for(;t===lC;)lC=yp[--xp],yp[xp]=null,uC=yp[--xp],yp[xp]=null;for(;t===Mh;)Mh=xo[--wo],xo[wo]=null,eu=xo[--wo],xo[wo]=null,Jl=xo[--wo],xo[wo]=null}var Ba=null,La=null,Tn=!1,us=null;function pG(t,e){var n=Do(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ba=t,La=yc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ba=t,La=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mh!==null?{id:Jl,overflow:eu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Do(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ba=t,La=null,!0):!1;default:return!1}}function pk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vk(t){if(Tn){var e=La;if(e){var n=e;if(!X4(t,e)){if(pk(t))throw Error(Ee(418));e=yc(n.nextSibling);var r=Ba;e&&X4(t,e)?pG(r,n):(t.flags=t.flags&-4097|2,Tn=!1,Ba=t)}}else{if(pk(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,Tn=!1,Ba=t}}}function Y4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ba=t}function Yx(t){if(t!==Ba)return!1;if(!Tn)return Y4(t),Tn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ck(t.type,t.memoizedProps)),e&&(e=La)){if(pk(t))throw vG(),Error(Ee(418));for(;e;)pG(t,e),e=yc(e.nextSibling)}if(Y4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){La=yc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}La=null}}else La=Ba?yc(t.stateNode.nextSibling):null;return!0}function vG(){for(var t=La;t;)t=yc(t.nextSibling)}function sv(){La=Ba=null,Tn=!1}function j$(t){us===null?us=[t]:us.push(t)}var Due=bu.ReactCurrentBatchConfig;function ss(t,e){if(t&&t.defaultProps){e=Fn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var cC=Jc(null),fC=null,wp=null,q$=null;function K$(){q$=wp=fC=null}function X$(t){var e=cC.current;bn(cC),t._currentValue=e}function gk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wp(t,e){fC=t,q$=wp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ha=!0),t.firstContext=null)}function $o(t){var e=t._currentValue;if(q$!==t)if(t={context:t,memoizedValue:e,next:null},wp===null){if(fC===null)throw Error(Ee(308));wp=t,fC.dependencies={lanes:0,firstContext:t}}else wp=wp.next=t;return e}var ih=null;function Y$(t){ih===null?ih=[t]:ih.push(t)}function gG(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Y$(e)):(n.next=i.next,i.next=n),e.interleaved=n,cu(t,r)}function cu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qu=!1;function Z$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function au(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,cu(t,n)}return i=r.interleaved,i===null?(e.next=e,Y$(r)):(e.next=i.next,i.next=e),r.interleaved=e,cu(t,n)}function mb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P$(t,n)}}function Z4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hC(t,e,n,r){var i=t.updateQueue;qu=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,d=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Fn({},f,h);break e;case 2:qu=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ph|=o,t.lanes=o,t.memoizedState=f}}function Q4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ee(191,i));i.call(r)}}}var yG=new g7.Component().refs;function mk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hS={isMounted:function(t){return(t=t._reactInternals)?cd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ui(),i=bc(t),a=au(r,i);a.payload=e,n!=null&&(a.callback=n),e=xc(t,a,i),e!==null&&(ws(e,t,i,r),mb(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ui(),i=bc(t),a=au(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=xc(t,a,i),e!==null&&(ws(e,t,i,r),mb(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ui(),r=bc(t),i=au(n,r);i.tag=2,e!=null&&(i.callback=e),e=xc(t,i,r),e!==null&&(ws(e,t,r,n),mb(e,t,r))}};function J4(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!C0(n,r)||!C0(i,a):!0}function xG(t,e,n){var r=!1,i=Mc,a=e.contextType;return typeof a=="object"&&a!==null?a=$o(a):(i=ga(e)?$h:Di.current,r=e.contextTypes,a=(r=r!=null)?ov(t,i):Mc),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ez(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hS.enqueueReplaceState(e,e.state,null)}function yk(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yG,Z$(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=$o(a):(a=ga(e)?$h:Di.current,i.context=ov(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(mk(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hS.enqueueReplaceState(i,i.state,null),hC(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===yG&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function Zx(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tz(t){var e=t._init;return e(t._payload)}function wG(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Cc(g,y),g.index=0,g.sibling=null,g}function a(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,x,w){return y===null||y.tag!==6?(y=uE(x,g.mode,w),y.return=g,y):(y=i(y,x),y.return=g,y)}function l(g,y,x,w){var b=x.type;return b===hp?c(g,y,x.props.children,w,x.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ju&&tz(b)===y.type)?(w=i(y,x.props),w.ref=Fg(g,y,x),w.return=g,w):(w=Sb(x.type,x.key,x.props,null,g.mode,w),w.ref=Fg(g,y,x),w.return=g,w)}function u(g,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=cE(x,g.mode,w),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function c(g,y,x,w,b){return y===null||y.tag!==7?(y=yh(x,g.mode,w,b),y.return=g,y):(y=i(y,x),y.return=g,y)}function f(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=uE(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bx:return x=Sb(y.type,y.key,y.props,null,g.mode,x),x.ref=Fg(g,null,y),x.return=g,x;case fp:return y=cE(y,g.mode,x),y.return=g,y;case ju:var w=y._init;return f(g,w(y._payload),x)}if(mm(y)||Rg(y))return y=yh(y,g.mode,x,null),y.return=g,y;Zx(g,y)}return null}function h(g,y,x,w){var b=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:s(g,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bx:return x.key===b?l(g,y,x,w):null;case fp:return x.key===b?u(g,y,x,w):null;case ju:return b=x._init,h(g,y,b(x._payload),w)}if(mm(x)||Rg(x))return b!==null?null:c(g,y,x,w,null);Zx(g,x)}return null}function d(g,y,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,s(y,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bx:return g=g.get(w.key===null?x:w.key)||null,l(y,g,w,b);case fp:return g=g.get(w.key===null?x:w.key)||null,u(y,g,w,b);case ju:var C=w._init;return d(g,y,x,C(w._payload),b)}if(mm(w)||Rg(w))return g=g.get(x)||null,c(y,g,w,b,null);Zx(y,w)}return null}function p(g,y,x,w){for(var b=null,C=null,S=y,D=y=0,_=null;S!==null&&D<x.length;D++){S.index>D?(_=S,S=null):_=S.sibling;var T=h(g,S,x[D],w);if(T===null){S===null&&(S=_);break}t&&S&&T.alternate===null&&e(g,S),y=a(T,y,D),C===null?b=T:C.sibling=T,C=T,S=_}if(D===x.length)return n(g,S),Tn&&Uf(g,D),b;if(S===null){for(;D<x.length;D++)S=f(g,x[D],w),S!==null&&(y=a(S,y,D),C===null?b=S:C.sibling=S,C=S);return Tn&&Uf(g,D),b}for(S=r(g,S);D<x.length;D++)_=d(S,g,D,x[D],w),_!==null&&(t&&_.alternate!==null&&S.delete(_.key===null?D:_.key),y=a(_,y,D),C===null?b=_:C.sibling=_,C=_);return t&&S.forEach(function(E){return e(g,E)}),Tn&&Uf(g,D),b}function v(g,y,x,w){var b=Rg(x);if(typeof b!="function")throw Error(Ee(150));if(x=b.call(x),x==null)throw Error(Ee(151));for(var C=b=null,S=y,D=y=0,_=null,T=x.next();S!==null&&!T.done;D++,T=x.next()){S.index>D?(_=S,S=null):_=S.sibling;var E=h(g,S,T.value,w);if(E===null){S===null&&(S=_);break}t&&S&&E.alternate===null&&e(g,S),y=a(E,y,D),C===null?b=E:C.sibling=E,C=E,S=_}if(T.done)return n(g,S),Tn&&Uf(g,D),b;if(S===null){for(;!T.done;D++,T=x.next())T=f(g,T.value,w),T!==null&&(y=a(T,y,D),C===null?b=T:C.sibling=T,C=T);return Tn&&Uf(g,D),b}for(S=r(g,S);!T.done;D++,T=x.next())T=d(S,g,D,T.value,w),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?D:T.key),y=a(T,y,D),C===null?b=T:C.sibling=T,C=T);return t&&S.forEach(function(A){return e(g,A)}),Tn&&Uf(g,D),b}function m(g,y,x,w){if(typeof x=="object"&&x!==null&&x.type===hp&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Bx:e:{for(var b=x.key,C=y;C!==null;){if(C.key===b){if(b=x.type,b===hp){if(C.tag===7){n(g,C.sibling),y=i(C,x.props.children),y.return=g,g=y;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ju&&tz(b)===C.type){n(g,C.sibling),y=i(C,x.props),y.ref=Fg(g,C,x),y.return=g,g=y;break e}n(g,C);break}else e(g,C);C=C.sibling}x.type===hp?(y=yh(x.props.children,g.mode,w,x.key),y.return=g,g=y):(w=Sb(x.type,x.key,x.props,null,g.mode,w),w.ref=Fg(g,y,x),w.return=g,g=w)}return o(g);case fp:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=cE(x,g.mode,w),y.return=g,g=y}return o(g);case ju:return C=x._init,m(g,y,C(x._payload),w)}if(mm(x))return p(g,y,x,w);if(Rg(x))return v(g,y,x,w);Zx(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,x),y.return=g,g=y):(n(g,y),y=uE(x,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return m}var lv=wG(!0),bG=wG(!1),$y={},ul=Jc($y),T0=Jc($y),E0=Jc($y);function ah(t){if(t===$y)throw Error(Ee(174));return t}function Q$(t,e){switch(hn(E0,e),hn(T0,t),hn(ul,$y),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YN(e,t)}bn(ul),hn(ul,e)}function uv(){bn(ul),bn(T0),bn(E0)}function CG(t){ah(E0.current);var e=ah(ul.current),n=YN(e,t.type);e!==n&&(hn(T0,t),hn(ul,n))}function J$(t){T0.current===t&&(bn(ul),bn(T0))}var Mn=Jc(0);function dC(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rE=[];function eM(){for(var t=0;t<rE.length;t++)rE[t]._workInProgressVersionPrimary=null;rE.length=0}var yb=bu.ReactCurrentDispatcher,iE=bu.ReactCurrentBatchConfig,Oh=0,Pn=null,Dr=null,Or=null,pC=!1,Gm=!1,A0=0,_ue=0;function ci(){throw Error(Ee(321))}function tM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!As(t[n],e[n]))return!1;return!0}function nM(t,e,n,r,i,a){if(Oh=a,Pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yb.current=t===null||t.memoizedState===null?Nue:kue,t=n(r,i),Gm){a=0;do{if(Gm=!1,A0=0,25<=a)throw Error(Ee(301));a+=1,Or=Dr=null,e.updateQueue=null,yb.current=Iue,t=n(r,i)}while(Gm)}if(yb.current=vC,e=Dr!==null&&Dr.next!==null,Oh=0,Or=Dr=Pn=null,pC=!1,e)throw Error(Ee(300));return t}function rM(){var t=A0!==0;return A0=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Pn.memoizedState=Or=t:Or=Or.next=t,Or}function Mo(){if(Dr===null){var t=Pn.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var e=Or===null?Pn.memoizedState:Or.next;if(e!==null)Or=e,Dr=t;else{if(t===null)throw Error(Ee(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Or===null?Pn.memoizedState=Or=t:Or=Or.next=t}return Or}function N0(t,e){return typeof e=="function"?e(t):e}function aE(t){var e=Mo(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=Dr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((Oh&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,Pn.lanes|=c,Ph|=c}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,As(r,e.memoizedState)||(ha=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Pn.lanes|=a,Ph|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oE(t){var e=Mo(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);As(a,e.memoizedState)||(ha=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function SG(){}function DG(t,e){var n=Pn,r=Mo(),i=e(),a=!As(r.memoizedState,i);if(a&&(r.memoizedState=i,ha=!0),r=r.queue,iM(EG.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Or!==null&&Or.memoizedState.tag&1){if(n.flags|=2048,k0(9,TG.bind(null,n,r,i,e),void 0,null),zr===null)throw Error(Ee(349));Oh&30||_G(n,e,i)}return i}function _G(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TG(t,e,n,r){e.value=n,e.getSnapshot=r,AG(e)&&NG(t)}function EG(t,e,n){return n(function(){AG(e)&&NG(t)})}function AG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!As(t,n)}catch{return!0}}function NG(t){var e=cu(t,1);e!==null&&ws(e,t,1,-1)}function nz(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:N0,lastRenderedState:t},e.queue=t,t=t.dispatch=Aue.bind(null,Pn,t),[e.memoizedState,t]}function k0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pn.updateQueue,e===null?(e={lastEffect:null,stores:null},Pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kG(){return Mo().memoizedState}function xb(t,e,n,r){var i=js();Pn.flags|=t,i.memoizedState=k0(1|e,n,void 0,r===void 0?null:r)}function dS(t,e,n,r){var i=Mo();r=r===void 0?null:r;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,r!==null&&tM(r,o.deps)){i.memoizedState=k0(e,n,a,r);return}}Pn.flags|=t,i.memoizedState=k0(1|e,n,a,r)}function rz(t,e){return xb(8390656,8,t,e)}function iM(t,e){return dS(2048,8,t,e)}function IG(t,e){return dS(4,2,t,e)}function RG(t,e){return dS(4,4,t,e)}function $G(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MG(t,e,n){return n=n!=null?n.concat([t]):null,dS(4,4,$G.bind(null,e,t),n)}function aM(){}function OG(t,e){var n=Mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PG(t,e){var n=Mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FG(t,e,n){return Oh&21?(As(n,e)||(n=B7(),Pn.lanes|=n,Ph|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ha=!0),t.memoizedState=n)}function Tue(t,e){var n=Yt;Yt=n!==0&&4>n?n:4,t(!0);var r=iE.transition;iE.transition={};try{t(!1),e()}finally{Yt=n,iE.transition=r}}function LG(){return Mo().memoizedState}function Eue(t,e,n){var r=bc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zG(t))BG(e,n);else if(n=gG(t,e,n,r),n!==null){var i=Ui();ws(n,t,r,i),VG(n,e,r)}}function Aue(t,e,n){var r=bc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zG(t))BG(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,As(s,o)){var l=e.interleaved;l===null?(i.next=i,Y$(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gG(t,e,i,r),n!==null&&(i=Ui(),ws(n,t,r,i),VG(n,e,r))}}function zG(t){var e=t.alternate;return t===Pn||e!==null&&e===Pn}function BG(t,e){Gm=pC=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P$(t,n)}}var vC={readContext:$o,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},Nue={readContext:$o,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:$o,useEffect:rz,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xb(4194308,4,$G.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xb(4194308,4,t,e)},useInsertionEffect:function(t,e){return xb(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=js();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Eue.bind(null,Pn,t),[r.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:nz,useDebugValue:aM,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=nz(!1),e=t[0];return t=Tue.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pn,i=js();if(Tn){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),zr===null)throw Error(Ee(349));Oh&30||_G(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,rz(EG.bind(null,r,a,t),[t]),r.flags|=2048,k0(9,TG.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=js(),e=zr.identifierPrefix;if(Tn){var n=eu,r=Jl;n=(r&~(1<<32-xs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=A0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_ue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kue={readContext:$o,useCallback:OG,useContext:$o,useEffect:iM,useImperativeHandle:MG,useInsertionEffect:IG,useLayoutEffect:RG,useMemo:PG,useReducer:aE,useRef:kG,useState:function(){return aE(N0)},useDebugValue:aM,useDeferredValue:function(t){var e=Mo();return FG(e,Dr.memoizedState,t)},useTransition:function(){var t=aE(N0)[0],e=Mo().memoizedState;return[t,e]},useMutableSource:SG,useSyncExternalStore:DG,useId:LG,unstable_isNewReconciler:!1},Iue={readContext:$o,useCallback:OG,useContext:$o,useEffect:iM,useImperativeHandle:MG,useInsertionEffect:IG,useLayoutEffect:RG,useMemo:PG,useReducer:oE,useRef:kG,useState:function(){return oE(N0)},useDebugValue:aM,useDeferredValue:function(t){var e=Mo();return Dr===null?e.memoizedState=t:FG(e,Dr.memoizedState,t)},useTransition:function(){var t=oE(N0)[0],e=Mo().memoizedState;return[t,e]},useMutableSource:SG,useSyncExternalStore:DG,useId:LG,unstable_isNewReconciler:!1};function cv(t,e){try{var n="",r=e;do n+=ale(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function sE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Rue=typeof WeakMap=="function"?WeakMap:Map;function WG(t,e,n){n=au(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mC||(mC=!0,Nk=r),xk(t,e)},n}function UG(t,e,n){n=au(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xk(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){xk(t,e),typeof r!="function"&&(wc===null?wc=new Set([this]):wc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iz(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Rue;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jue.bind(null,t,e,n),e.then(t,t))}function az(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oz(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=au(-1,1),e.tag=2,xc(n,e,1))),n.lanes|=1),t)}var $ue=bu.ReactCurrentOwner,ha=!1;function Mi(t,e,n,r){e.child=t===null?bG(e,null,n,r):lv(e,t.child,n,r)}function sz(t,e,n,r,i){n=n.render;var a=e.ref;return Wp(e,i),r=nM(t,e,n,r,a,i),n=rM(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fu(t,e,i)):(Tn&&n&&G$(e),e.flags|=1,Mi(t,e,r,i),e.child)}function lz(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!dM(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,GG(t,e,a,r,i)):(t=Sb(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:C0,n(o,r)&&t.ref===e.ref)return fu(t,e,i)}return e.flags|=1,t=Cc(a,r),t.ref=e.ref,t.return=e,e.child=t}function GG(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(C0(a,r)&&t.ref===e.ref)if(ha=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ha=!0);else return e.lanes=t.lanes,fu(t,e,i)}return wk(t,e,n,r,i)}function HG(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(Cp,Oa),Oa|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,hn(Cp,Oa),Oa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,hn(Cp,Oa),Oa|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,hn(Cp,Oa),Oa|=r;return Mi(t,e,i,n),e.child}function jG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wk(t,e,n,r,i){var a=ga(n)?$h:Di.current;return a=ov(e,a),Wp(e,i),n=nM(t,e,n,r,a,i),r=rM(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fu(t,e,i)):(Tn&&r&&G$(e),e.flags|=1,Mi(t,e,n,i),e.child)}function uz(t,e,n,r,i){if(ga(n)){var a=!0;sC(e)}else a=!1;if(Wp(e,i),e.stateNode===null)wb(t,e),xG(e,n,r),yk(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$o(u):(u=ga(n)?$h:Di.current,u=ov(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&ez(e,o,r,u),qu=!1;var h=e.memoizedState;o.state=h,hC(e,r,o,i),l=e.memoizedState,s!==r||h!==l||va.current||qu?(typeof c=="function"&&(mk(e,n,c,r),l=e.memoizedState),(s=qu||J4(e,n,s,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mG(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:ss(e.type,s),o.props=u,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$o(l):(l=ga(n)?$h:Di.current,l=ov(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==l)&&ez(e,o,r,l),qu=!1,h=e.memoizedState,o.state=h,hC(e,r,o,i);var p=e.memoizedState;s!==f||h!==p||va.current||qu?(typeof d=="function"&&(mk(e,n,d,r),p=e.memoizedState),(u=qu||J4(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return bk(t,e,n,r,a,i)}function bk(t,e,n,r,i,a){jG(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&K4(e,n,!1),fu(t,e,a);r=e.stateNode,$ue.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lv(e,t.child,null,a),e.child=lv(e,null,s,a)):Mi(t,e,s,a),e.memoizedState=r.state,i&&K4(e,n,!0),e.child}function qG(t){var e=t.stateNode;e.pendingContext?q4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q4(t,e.context,!1),Q$(t,e.containerInfo)}function cz(t,e,n,r,i){return sv(),j$(i),e.flags|=256,Mi(t,e,n,r),e.child}var Ck={dehydrated:null,treeContext:null,retryLane:0};function Sk(t){return{baseLanes:t,cachePool:null,transitions:null}}function KG(t,e,n){var r=e.pendingProps,i=Mn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),hn(Mn,i&1),t===null)return vk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=gS(o,r,0,null),t=yh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Sk(n),e.memoizedState=Ck,t):oM(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Mue(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Cc(s,a):(a=yh(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Sk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Ck,r}return a=t.child,t=a.sibling,r=Cc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function oM(t,e){return e=gS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qx(t,e,n,r){return r!==null&&j$(r),lv(e,t.child,null,n),t=oM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mue(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=sE(Error(Ee(422))),Qx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=gS({mode:"visible",children:r.children},i,0,null),a=yh(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&lv(e,t.child,null,o),e.child.memoizedState=Sk(o),e.memoizedState=Ck,a);if(!(e.mode&1))return Qx(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Ee(419)),r=sE(a,r,void 0),Qx(t,e,o,r)}if(s=(o&t.childLanes)!==0,ha||s){if(r=zr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,cu(t,i),ws(r,t,i,-1))}return hM(),r=sE(Error(Ee(421))),Qx(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=que.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,La=yc(i.nextSibling),Ba=e,Tn=!0,us=null,t!==null&&(xo[wo++]=Jl,xo[wo++]=eu,xo[wo++]=Mh,Jl=t.id,eu=t.overflow,Mh=e),e=oM(e,r.children),e.flags|=4096,e)}function fz(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gk(t.return,e,n)}function lE(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function XG(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Mi(t,e,r.children,n),r=Mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fz(t,n,e);else if(t.tag===19)fz(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hn(Mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dC(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lE(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dC(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lE(e,!0,n,null,a);break;case"together":lE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ph|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Cc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Oue(t,e,n){switch(e.tag){case 3:qG(e),sv();break;case 5:CG(e);break;case 1:ga(e.type)&&sC(e);break;case 4:Q$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;hn(cC,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(Mn,Mn.current&1),e.flags|=128,null):n&e.child.childLanes?KG(t,e,n):(hn(Mn,Mn.current&1),t=fu(t,e,n),t!==null?t.sibling:null);hn(Mn,Mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XG(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hn(Mn,Mn.current),r)break;return null;case 22:case 23:return e.lanes=0,HG(t,e,n)}return fu(t,e,n)}var YG,Dk,ZG,QG;YG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dk=function(){};ZG=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ah(ul.current);var a=null;switch(n){case"input":i=jN(t,i),r=jN(t,r),a=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),a=[];break;case"textarea":i=XN(t,i),r=XN(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=aC)}ZN(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(v0.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(v0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xn("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};QG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lg(t,e){if(!Tn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pue(t,e,n){var r=e.pendingProps;switch(H$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(e),null;case 1:return ga(e.type)&&oC(),fi(e),null;case 3:return r=e.stateNode,uv(),bn(va),bn(Di),eM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&(Rk(us),us=null))),Dk(t,e),fi(e),null;case 5:J$(e);var i=ah(E0.current);if(n=e.type,t!==null&&e.stateNode!=null)ZG(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return fi(e),null}if(t=ah(ul.current),Yx(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[tl]=e,r[_0]=a,t=(e.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(i=0;i<xm.length;i++)xn(xm[i],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":w4(r,a),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},xn("invalid",r);break;case"textarea":C4(r,a),xn("invalid",r)}ZN(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&Xx(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Xx(r.textContent,s,t),i=["children",""+s]):v0.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&xn("scroll",r)}switch(n){case"input":Vx(r),b4(r,a,!0);break;case"textarea":Vx(r),S4(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=aC)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_7(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tl]=e,t[_0]=r,YG(t,e,!1,!1),e.stateNode=t;e:{switch(o=QN(n,r),n){case"dialog":xn("cancel",t),xn("close",t),i=r;break;case"iframe":case"object":case"embed":xn("load",t),i=r;break;case"video":case"audio":for(i=0;i<xm.length;i++)xn(xm[i],t);i=r;break;case"source":xn("error",t),i=r;break;case"img":case"image":case"link":xn("error",t),xn("load",t),i=r;break;case"details":xn("toggle",t),i=r;break;case"input":w4(t,r),i=jN(t,r),xn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),xn("invalid",t);break;case"textarea":C4(t,r),i=XN(t,r),xn("invalid",t);break;default:i=r}ZN(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?A7(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T7(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&g0(t,l):typeof l=="number"&&g0(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(v0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&xn("scroll",t):l!=null&&k$(t,a,l,o))}switch(n){case"input":Vx(t),b4(t,r,!1);break;case"textarea":Vx(t),S4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$c(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Lp(t,!!r.multiple,a,!1):r.defaultValue!=null&&Lp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=aC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fi(e),null;case 6:if(t&&e.stateNode!=null)QG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=ah(E0.current),ah(ul.current),Yx(e)){if(r=e.stateNode,n=e.memoizedProps,r[tl]=e,(a=r.nodeValue!==n)&&(t=Ba,t!==null))switch(t.tag){case 3:Xx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xx(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tl]=e,e.stateNode=r}return fi(e),null;case 13:if(bn(Mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tn&&La!==null&&e.mode&1&&!(e.flags&128))vG(),sv(),e.flags|=98560,a=!1;else if(a=Yx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ee(317));a[tl]=e}else sv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fi(e),a=!1}else us!==null&&(Rk(us),us=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Mn.current&1?kr===0&&(kr=3):hM())),e.updateQueue!==null&&(e.flags|=4),fi(e),null);case 4:return uv(),Dk(t,e),t===null&&S0(e.stateNode.containerInfo),fi(e),null;case 10:return X$(e.type._context),fi(e),null;case 17:return ga(e.type)&&oC(),fi(e),null;case 19:if(bn(Mn),a=e.memoizedState,a===null)return fi(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Lg(a,!1);else{if(kr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dC(t),o!==null){for(e.flags|=128,Lg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return hn(Mn,Mn.current&1|2),e.child}t=t.sibling}a.tail!==null&&nr()>fv&&(e.flags|=128,r=!0,Lg(a,!1),e.lanes=4194304)}else{if(!r)if(t=dC(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Tn)return fi(e),null}else 2*nr()-a.renderingStartTime>fv&&n!==1073741824&&(e.flags|=128,r=!0,Lg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=nr(),e.sibling=null,n=Mn.current,hn(Mn,r?n&1|2:n&1),e):(fi(e),null);case 22:case 23:return fM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oa&1073741824&&(fi(e),e.subtreeFlags&6&&(e.flags|=8192)):fi(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Fue(t,e){switch(H$(e),e.tag){case 1:return ga(e.type)&&oC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uv(),bn(va),bn(Di),eM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return J$(e),null;case 13:if(bn(Mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));sv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bn(Mn),null;case 4:return uv(),null;case 10:return X$(e.type._context),null;case 22:case 23:return fM(),null;case 24:return null;default:return null}}var Jx=!1,wi=!1,Lue=typeof WeakSet=="function"?WeakSet:Set,ze=null;function bp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function _k(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var hz=!1;function zue(t,e){if(lk=nC,t=nG(),U$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++u===i&&(s=o),h===a&&++c===r&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(uk={focusedElem:t,selectionRange:n},nC=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,m=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:ss(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(w){Vn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return p=hz,hz=!1,p}function Hm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&_k(e,n,a)}i=i.next}while(i!==r)}}function pS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JG(t){var e=t.alternate;e!==null&&(t.alternate=null,JG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tl],delete e[_0],delete e[hk],delete e[bue],delete e[Cue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eH(t){return t.tag===5||t.tag===3||t.tag===4}function dz(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ek(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=aC));else if(r!==4&&(t=t.child,t!==null))for(Ek(t,e,n),t=t.sibling;t!==null;)Ek(t,e,n),t=t.sibling}function Ak(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ak(t,e,n),t=t.sibling;t!==null;)Ak(t,e,n),t=t.sibling}var Kr=null,ls=!1;function Iu(t,e,n){for(n=n.child;n!==null;)tH(t,e,n),n=n.sibling}function tH(t,e,n){if(ll&&typeof ll.onCommitFiberUnmount=="function")try{ll.onCommitFiberUnmount(oS,n)}catch{}switch(n.tag){case 5:wi||bp(n,e);case 6:var r=Kr,i=ls;Kr=null,Iu(t,e,n),Kr=r,ls=i,Kr!==null&&(ls?(t=Kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(ls?(t=Kr,n=n.stateNode,t.nodeType===8?tE(t.parentNode,n):t.nodeType===1&&tE(t,n),w0(t)):tE(Kr,n.stateNode));break;case 4:r=Kr,i=ls,Kr=n.stateNode.containerInfo,ls=!0,Iu(t,e,n),Kr=r,ls=i;break;case 0:case 11:case 14:case 15:if(!wi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&_k(n,e,o),i=i.next}while(i!==r)}Iu(t,e,n);break;case 1:if(!wi&&(bp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Vn(n,e,s)}Iu(t,e,n);break;case 21:Iu(t,e,n);break;case 22:n.mode&1?(wi=(r=wi)||n.memoizedState!==null,Iu(t,e,n),wi=r):Iu(t,e,n);break;default:Iu(t,e,n)}}function pz(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lue),e.forEach(function(r){var i=Kue.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,ls=!1;break e;case 3:Kr=s.stateNode.containerInfo,ls=!0;break e;case 4:Kr=s.stateNode.containerInfo,ls=!0;break e}s=s.return}if(Kr===null)throw Error(Ee(160));tH(a,o,i),Kr=null,ls=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Vn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nH(e,t),e=e.sibling}function nH(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zo(e,t),Bs(t),r&4){try{Hm(3,t,t.return),pS(3,t)}catch(v){Vn(t,t.return,v)}try{Hm(5,t,t.return)}catch(v){Vn(t,t.return,v)}}break;case 1:Zo(e,t),Bs(t),r&512&&n!==null&&bp(n,n.return);break;case 5:if(Zo(e,t),Bs(t),r&512&&n!==null&&bp(n,n.return),t.flags&32){var i=t.stateNode;try{g0(i,"")}catch(v){Vn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&S7(i,a),QN(s,o);var u=QN(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?A7(i,f):c==="dangerouslySetInnerHTML"?T7(i,f):c==="children"?g0(i,f):k$(i,c,f,u)}switch(s){case"input":qN(i,a);break;case"textarea":D7(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?Lp(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?Lp(i,!!a.multiple,a.defaultValue,!0):Lp(i,!!a.multiple,a.multiple?[]:"",!1))}i[_0]=a}catch(v){Vn(t,t.return,v)}}break;case 6:if(Zo(e,t),Bs(t),r&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){Vn(t,t.return,v)}}break;case 3:if(Zo(e,t),Bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{w0(e.containerInfo)}catch(v){Vn(t,t.return,v)}break;case 4:Zo(e,t),Bs(t);break;case 13:Zo(e,t),Bs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(uM=nr())),r&4&&pz(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(wi=(u=wi)||c,Zo(e,t),wi=u):Zo(e,t),Bs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ze=t,c=t.child;c!==null;){for(f=ze=c;ze!==null;){switch(h=ze,d=h.child,h.tag){case 0:case 11:case 14:case 15:Hm(4,h,h.return);break;case 1:bp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Vn(r,n,v)}}break;case 5:bp(h,h.return);break;case 22:if(h.memoizedState!==null){gz(f);continue}}d!==null?(d.return=h,ze=d):gz(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=E7("display",o))}catch(v){Vn(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Vn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zo(e,t),Bs(t),r&4&&pz(t);break;case 21:break;default:Zo(e,t),Bs(t)}}function Bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eH(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(g0(i,""),r.flags&=-33);var a=dz(t);Ak(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=dz(t);Ek(t,s,o);break;default:throw Error(Ee(161))}}catch(l){Vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bue(t,e,n){ze=t,rH(t)}function rH(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var i=ze,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jx;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||wi;s=Jx;var u=wi;if(Jx=o,(wi=l)&&!u)for(ze=i;ze!==null;)o=ze,l=o.child,o.tag===22&&o.memoizedState!==null?mz(i):l!==null?(l.return=o,ze=l):mz(i);for(;a!==null;)ze=a,rH(a),a=a.sibling;ze=i,Jx=s,wi=u}vz(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ze=a):vz(t)}}function vz(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wi||pS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ss(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Q4(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Q4(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&w0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}wi||e.flags&512&&Tk(e)}catch(h){Vn(e,e.return,h)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function gz(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function mz(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pS(4,e)}catch(l){Vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vn(e,i,l)}}var a=e.return;try{Tk(e)}catch(l){Vn(e,a,l)}break;case 5:var o=e.return;try{Tk(e)}catch(l){Vn(e,o,l)}}}catch(l){Vn(e,e.return,l)}if(e===t){ze=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ze=s;break}ze=e.return}}var Vue=Math.ceil,gC=bu.ReactCurrentDispatcher,sM=bu.ReactCurrentOwner,ko=bu.ReactCurrentBatchConfig,Lt=0,zr=null,dr=null,ei=0,Oa=0,Cp=Jc(0),kr=0,I0=null,Ph=0,vS=0,lM=0,jm=null,aa=null,uM=0,fv=1/0,Gl=null,mC=!1,Nk=null,wc=null,ew=!1,nc=null,yC=0,qm=0,kk=null,bb=-1,Cb=0;function Ui(){return Lt&6?nr():bb!==-1?bb:bb=nr()}function bc(t){return t.mode&1?Lt&2&&ei!==0?ei&-ei:Due.transition!==null?(Cb===0&&(Cb=B7()),Cb):(t=Yt,t!==0||(t=window.event,t=t===void 0?16:q7(t.type)),t):1}function ws(t,e,n,r){if(50<qm)throw qm=0,kk=null,Error(Ee(185));ky(t,n,r),(!(Lt&2)||t!==zr)&&(t===zr&&(!(Lt&2)&&(vS|=n),kr===4&&Qu(t,ei)),ma(t,r),n===1&&Lt===0&&!(e.mode&1)&&(fv=nr()+500,fS&&ef()))}function ma(t,e){var n=t.callbackNode;Dle(t,e);var r=tC(t,t===zr?ei:0);if(r===0)n!==null&&T4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&T4(n),e===1)t.tag===0?Sue(yz.bind(null,t)):hG(yz.bind(null,t)),xue(function(){!(Lt&6)&&ef()}),n=null;else{switch(V7(r)){case 1:n=O$;break;case 4:n=L7;break;case 16:n=eC;break;case 536870912:n=z7;break;default:n=eC}n=fH(n,iH.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iH(t,e){if(bb=-1,Cb=0,Lt&6)throw Error(Ee(327));var n=t.callbackNode;if(Up()&&t.callbackNode!==n)return null;var r=tC(t,t===zr?ei:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xC(t,r);else{e=r;var i=Lt;Lt|=2;var a=oH();(zr!==t||ei!==e)&&(Gl=null,fv=nr()+500,mh(t,e));do try{Gue();break}catch(s){aH(t,s)}while(1);K$(),gC.current=a,Lt=i,dr!==null?e=0:(zr=null,ei=0,e=kr)}if(e!==0){if(e===2&&(i=rk(t),i!==0&&(r=i,e=Ik(t,i))),e===1)throw n=I0,mh(t,0),Qu(t,r),ma(t,nr()),n;if(e===6)Qu(t,r);else{if(i=t.current.alternate,!(r&30)&&!Wue(i)&&(e=xC(t,r),e===2&&(a=rk(t),a!==0&&(r=a,e=Ik(t,a))),e===1))throw n=I0,mh(t,0),Qu(t,r),ma(t,nr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Gf(t,aa,Gl);break;case 3:if(Qu(t,r),(r&130023424)===r&&(e=uM+500-nr(),10<e)){if(tC(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ui(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fk(Gf.bind(null,t,aa,Gl),e);break}Gf(t,aa,Gl);break;case 4:if(Qu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xs(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vue(r/1960))-r,10<r){t.timeoutHandle=fk(Gf.bind(null,t,aa,Gl),r);break}Gf(t,aa,Gl);break;case 5:Gf(t,aa,Gl);break;default:throw Error(Ee(329))}}}return ma(t,nr()),t.callbackNode===n?iH.bind(null,t):null}function Ik(t,e){var n=jm;return t.current.memoizedState.isDehydrated&&(mh(t,e).flags|=256),t=xC(t,e),t!==2&&(e=aa,aa=n,e!==null&&Rk(e)),t}function Rk(t){aa===null?aa=t:aa.push.apply(aa,t)}function Wue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!As(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qu(t,e){for(e&=~lM,e&=~vS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xs(e),r=1<<n;t[n]=-1,e&=~r}}function yz(t){if(Lt&6)throw Error(Ee(327));Up();var e=tC(t,0);if(!(e&1))return ma(t,nr()),null;var n=xC(t,e);if(t.tag!==0&&n===2){var r=rk(t);r!==0&&(e=r,n=Ik(t,r))}if(n===1)throw n=I0,mh(t,0),Qu(t,e),ma(t,nr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gf(t,aa,Gl),ma(t,nr()),null}function cM(t,e){var n=Lt;Lt|=1;try{return t(e)}finally{Lt=n,Lt===0&&(fv=nr()+500,fS&&ef())}}function Fh(t){nc!==null&&nc.tag===0&&!(Lt&6)&&Up();var e=Lt;Lt|=1;var n=ko.transition,r=Yt;try{if(ko.transition=null,Yt=1,t)return t()}finally{Yt=r,ko.transition=n,Lt=e,!(Lt&6)&&ef()}}function fM(){Oa=Cp.current,bn(Cp)}function mh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yue(n)),dr!==null)for(n=dr.return;n!==null;){var r=n;switch(H$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oC();break;case 3:uv(),bn(va),bn(Di),eM();break;case 5:J$(r);break;case 4:uv();break;case 13:bn(Mn);break;case 19:bn(Mn);break;case 10:X$(r.type._context);break;case 22:case 23:fM()}n=n.return}if(zr=t,dr=t=Cc(t.current,null),ei=Oa=e,kr=0,I0=null,lM=vS=Ph=0,aa=jm=null,ih!==null){for(e=0;e<ih.length;e++)if(n=ih[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ih=null}return t}function aH(t,e){do{var n=dr;try{if(K$(),yb.current=vC,pC){for(var r=Pn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pC=!1}if(Oh=0,Or=Dr=Pn=null,Gm=!1,A0=0,sM.current=null,n===null||n.return===null){kr=1,I0=e,dr=null;break}e:{var a=t,o=n.return,s=n,l=e;if(e=ei,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=az(o);if(d!==null){d.flags&=-257,oz(d,o,s,a,e),d.mode&1&&iz(a,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){iz(a,u,e),hM();break e}l=Error(Ee(426))}}else if(Tn&&s.mode&1){var m=az(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),oz(m,o,s,a,e),j$(cv(l,s));break e}}a=l=cv(l,s),kr!==4&&(kr=2),jm===null?jm=[a]:jm.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=WG(a,l,e);Z4(a,g);break e;case 1:s=l;var y=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(wc===null||!wc.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=UG(a,s,e);Z4(a,w);break e}}a=a.return}while(a!==null)}lH(n)}catch(b){e=b,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(1)}function oH(){var t=gC.current;return gC.current=vC,t===null?vC:t}function hM(){(kr===0||kr===3||kr===2)&&(kr=4),zr===null||!(Ph&268435455)&&!(vS&268435455)||Qu(zr,ei)}function xC(t,e){var n=Lt;Lt|=2;var r=oH();(zr!==t||ei!==e)&&(Gl=null,mh(t,e));do try{Uue();break}catch(i){aH(t,i)}while(1);if(K$(),Lt=n,gC.current=r,dr!==null)throw Error(Ee(261));return zr=null,ei=0,kr}function Uue(){for(;dr!==null;)sH(dr)}function Gue(){for(;dr!==null&&!vle();)sH(dr)}function sH(t){var e=cH(t.alternate,t,Oa);t.memoizedProps=t.pendingProps,e===null?lH(t):dr=e,sM.current=null}function lH(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Fue(n,e),n!==null){n.flags&=32767,dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kr=6,dr=null;return}}else if(n=Pue(n,e,Oa),n!==null){dr=n;return}if(e=e.sibling,e!==null){dr=e;return}dr=e=t}while(e!==null);kr===0&&(kr=5)}function Gf(t,e,n){var r=Yt,i=ko.transition;try{ko.transition=null,Yt=1,Hue(t,e,n,r)}finally{ko.transition=i,Yt=r}return null}function Hue(t,e,n,r){do Up();while(nc!==null);if(Lt&6)throw Error(Ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(_le(t,a),t===zr&&(dr=zr=null,ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ew||(ew=!0,fH(eC,function(){return Up(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ko.transition,ko.transition=null;var o=Yt;Yt=1;var s=Lt;Lt|=4,sM.current=null,zue(t,n),nH(n,t),fue(uk),nC=!!lk,uk=lk=null,t.current=n,Bue(n),gle(),Lt=s,Yt=o,ko.transition=a}else t.current=n;if(ew&&(ew=!1,nc=t,yC=i),a=t.pendingLanes,a===0&&(wc=null),xle(n.stateNode),ma(t,nr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mC)throw mC=!1,t=Nk,Nk=null,t;return yC&1&&t.tag!==0&&Up(),a=t.pendingLanes,a&1?t===kk?qm++:(qm=0,kk=t):qm=0,ef(),null}function Up(){if(nc!==null){var t=V7(yC),e=ko.transition,n=Yt;try{if(ko.transition=null,Yt=16>t?16:t,nc===null)var r=!1;else{if(t=nc,nc=null,yC=0,Lt&6)throw Error(Ee(331));var i=Lt;for(Lt|=4,ze=t.current;ze!==null;){var a=ze,o=a.child;if(ze.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ze=u;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:Hm(8,c,a)}var f=c.child;if(f!==null)f.return=c,ze=f;else for(;ze!==null;){c=ze;var h=c.sibling,d=c.return;if(JG(c),c===u){ze=null;break}if(h!==null){h.return=d,ze=h;break}ze=d}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}ze=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ze=o;else e:for(;ze!==null;){if(a=ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Hm(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,ze=g;break e}ze=a.return}}var y=t.current;for(ze=y;ze!==null;){o=ze;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ze=x;else e:for(o=y;ze!==null;){if(s=ze,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:pS(9,s)}}catch(b){Vn(s,s.return,b)}if(s===o){ze=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,ze=w;break e}ze=s.return}}if(Lt=i,ef(),ll&&typeof ll.onPostCommitFiberRoot=="function")try{ll.onPostCommitFiberRoot(oS,t)}catch{}r=!0}return r}finally{Yt=n,ko.transition=e}}return!1}function xz(t,e,n){e=cv(n,e),e=WG(t,e,1),t=xc(t,e,1),e=Ui(),t!==null&&(ky(t,1,e),ma(t,e))}function Vn(t,e,n){if(t.tag===3)xz(t,t,n);else for(;e!==null;){if(e.tag===3){xz(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wc===null||!wc.has(r))){t=cv(n,t),t=UG(e,t,1),e=xc(e,t,1),t=Ui(),e!==null&&(ky(e,1,t),ma(e,t));break}}e=e.return}}function jue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ui(),t.pingedLanes|=t.suspendedLanes&n,zr===t&&(ei&n)===n&&(kr===4||kr===3&&(ei&130023424)===ei&&500>nr()-uM?mh(t,0):lM|=n),ma(t,e)}function uH(t,e){e===0&&(t.mode&1?(e=Gx,Gx<<=1,!(Gx&130023424)&&(Gx=4194304)):e=1);var n=Ui();t=cu(t,e),t!==null&&(ky(t,e,n),ma(t,n))}function que(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uH(t,n)}function Kue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),uH(t,n)}var cH;cH=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||va.current)ha=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ha=!1,Oue(t,e,n);ha=!!(t.flags&131072)}else ha=!1,Tn&&e.flags&1048576&&dG(e,uC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wb(t,e),t=e.pendingProps;var i=ov(e,Di.current);Wp(e,n),i=nM(null,e,r,t,i,n);var a=rM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ga(r)?(a=!0,sC(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z$(e),i.updater=hS,e.stateNode=i,i._reactInternals=e,yk(e,r,t,n),e=bk(null,e,r,!0,a,n)):(e.tag=0,Tn&&a&&G$(e),Mi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wb(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Yue(r),t=ss(r,t),i){case 0:e=wk(null,e,r,t,n);break e;case 1:e=uz(null,e,r,t,n);break e;case 11:e=sz(null,e,r,t,n);break e;case 14:e=lz(null,e,r,ss(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ss(r,i),wk(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ss(r,i),uz(t,e,r,i,n);case 3:e:{if(qG(e),t===null)throw Error(Ee(387));r=e.pendingProps,a=e.memoizedState,i=a.element,mG(t,e),hC(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=cv(Error(Ee(423)),e),e=cz(t,e,r,n,i);break e}else if(r!==i){i=cv(Error(Ee(424)),e),e=cz(t,e,r,n,i);break e}else for(La=yc(e.stateNode.containerInfo.firstChild),Ba=e,Tn=!0,us=null,n=bG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sv(),r===i){e=fu(t,e,n);break e}Mi(t,e,r,n)}e=e.child}return e;case 5:return CG(e),t===null&&vk(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,ck(r,i)?o=null:a!==null&&ck(r,a)&&(e.flags|=32),jG(t,e),Mi(t,e,o,n),e.child;case 6:return t===null&&vk(e),null;case 13:return KG(t,e,n);case 4:return Q$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lv(e,null,r,n):Mi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ss(r,i),sz(t,e,r,i,n);case 7:return Mi(t,e,e.pendingProps,n),e.child;case 8:return Mi(t,e,e.pendingProps.children,n),e.child;case 12:return Mi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,hn(cC,r._currentValue),r._currentValue=o,a!==null)if(As(a.value,o)){if(a.children===i.children&&!va.current){e=fu(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=au(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),gk(a.return,n,e),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ee(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),gk(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Mi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wp(e,n),i=$o(i),r=r(i),e.flags|=1,Mi(t,e,r,n),e.child;case 14:return r=e.type,i=ss(r,e.pendingProps),i=ss(r.type,i),lz(t,e,r,i,n);case 15:return GG(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ss(r,i),wb(t,e),e.tag=1,ga(r)?(t=!0,sC(e)):t=!1,Wp(e,n),xG(e,r,i),yk(e,r,i,n),bk(null,e,r,!0,t,n);case 19:return XG(t,e,n);case 22:return HG(t,e,n)}throw Error(Ee(156,e.tag))};function fH(t,e){return F7(t,e)}function Xue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(t,e,n,r){return new Xue(t,e,n,r)}function dM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yue(t){if(typeof t=="function")return dM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R$)return 11;if(t===$$)return 14}return 2}function Cc(t,e){var n=t.alternate;return n===null?(n=Do(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sb(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")dM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hp:return yh(n.children,i,a,e);case I$:o=8,i|=8;break;case WN:return t=Do(12,n,e,i|2),t.elementType=WN,t.lanes=a,t;case UN:return t=Do(13,n,e,i),t.elementType=UN,t.lanes=a,t;case GN:return t=Do(19,n,e,i),t.elementType=GN,t.lanes=a,t;case w7:return gS(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y7:o=10;break e;case x7:o=9;break e;case R$:o=11;break e;case $$:o=14;break e;case ju:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=Do(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function yh(t,e,n,r){return t=Do(7,t,r,e),t.lanes=n,t}function gS(t,e,n,r){return t=Do(22,t,r,e),t.elementType=w7,t.lanes=n,t.stateNode={isHidden:!1},t}function uE(t,e,n){return t=Do(6,t,null,e),t.lanes=n,t}function cE(t,e,n){return e=Do(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zue(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=GT(0),this.expirationTimes=GT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=GT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pM(t,e,n,r,i,a,o,s,l){return t=new Zue(t,e,n,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Do(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z$(a),t}function Que(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hH(t){if(!t)return Mc;t=t._reactInternals;e:{if(cd(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ga(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(ga(n))return fG(t,n,e)}return e}function dH(t,e,n,r,i,a,o,s,l){return t=pM(n,r,!0,t,i,a,o,s,l),t.context=hH(null),n=t.current,r=Ui(),i=bc(n),a=au(r,i),a.callback=e??null,xc(n,a,i),t.current.lanes=i,ky(t,i,r),ma(t,r),t}function mS(t,e,n,r){var i=e.current,a=Ui(),o=bc(i);return n=hH(n),e.context===null?e.context=n:e.pendingContext=n,e=au(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xc(i,e,o),t!==null&&(ws(t,i,o,a),mb(t,i,o)),o}function wC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wz(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vM(t,e){wz(t,e),(t=t.alternate)&&wz(t,e)}function Jue(){return null}var pH=typeof reportError=="function"?reportError:function(t){console.error(t)};function gM(t){this._internalRoot=t}yS.prototype.render=gM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));mS(t,e,null,null)};yS.prototype.unmount=gM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fh(function(){mS(null,t,null,null)}),e[uu]=null}};function yS(t){this._internalRoot=t}yS.prototype.unstable_scheduleHydration=function(t){if(t){var e=G7();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zu.length&&e!==0&&e<Zu[n].priority;n++);Zu.splice(n,0,t),n===0&&j7(t)}};function mM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bz(){}function ece(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=wC(o);a.call(u)}}var o=dH(e,r,t,0,null,!1,!1,"",bz);return t._reactRootContainer=o,t[uu]=o.current,S0(t.nodeType===8?t.parentNode:t),Fh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=wC(l);s.call(u)}}var l=pM(t,0,!1,null,null,!1,!1,"",bz);return t._reactRootContainer=l,t[uu]=l.current,S0(t.nodeType===8?t.parentNode:t),Fh(function(){mS(e,l,n,r)}),l}function wS(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=wC(o);s.call(l)}}mS(e,o,t,i)}else o=ece(n,e,t,i,r);return wC(o)}W7=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ym(e.pendingLanes);n!==0&&(P$(e,n|1),ma(e,nr()),!(Lt&6)&&(fv=nr()+500,ef()))}break;case 13:Fh(function(){var r=cu(t,1);if(r!==null){var i=Ui();ws(r,t,1,i)}}),vM(t,1)}};F$=function(t){if(t.tag===13){var e=cu(t,134217728);if(e!==null){var n=Ui();ws(e,t,134217728,n)}vM(t,134217728)}};U7=function(t){if(t.tag===13){var e=bc(t),n=cu(t,e);if(n!==null){var r=Ui();ws(n,t,e,r)}vM(t,e)}};G7=function(){return Yt};H7=function(t,e){var n=Yt;try{return Yt=t,e()}finally{Yt=n}};ek=function(t,e,n){switch(e){case"input":if(qN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=cS(r);if(!i)throw Error(Ee(90));C7(r),qN(r,i)}}}break;case"textarea":D7(t,n);break;case"select":e=n.value,e!=null&&Lp(t,!!n.multiple,e,!1)}};I7=cM;R7=Fh;var tce={usingClientEntryPoint:!1,Events:[Ry,gp,cS,N7,k7,cM]},zg={findFiberByHostInstance:rh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nce={bundleType:zg.bundleType,version:zg.version,rendererPackageName:zg.rendererPackageName,rendererConfig:zg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O7(t),t===null?null:t.stateNode},findFiberByHostInstance:zg.findFiberByHostInstance||Jue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tw.isDisabled&&tw.supportsFiber)try{oS=tw.inject(nce),ll=tw}catch{}}Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tce;Qa.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mM(e))throw Error(Ee(200));return Que(t,e,null,n)};Qa.createRoot=function(t,e){if(!mM(t))throw Error(Ee(299));var n=!1,r="",i=pH;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pM(t,1,!1,null,null,n,!1,r,i),t[uu]=e.current,S0(t.nodeType===8?t.parentNode:t),new gM(e)};Qa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=O7(e),t=t===null?null:t.stateNode,t};Qa.flushSync=function(t){return Fh(t)};Qa.hydrate=function(t,e,n){if(!xS(e))throw Error(Ee(200));return wS(null,t,e,!0,n)};Qa.hydrateRoot=function(t,e,n){if(!mM(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=pH;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dH(e,null,t,1,n??null,i,!1,a,o),t[uu]=e.current,S0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yS(e)};Qa.render=function(t,e,n){if(!xS(e))throw Error(Ee(200));return wS(null,t,e,!1,n)};Qa.unmountComponentAtNode=function(t){if(!xS(t))throw Error(Ee(40));return t._reactRootContainer?(Fh(function(){wS(null,null,t,!1,function(){t._reactRootContainer=null,t[uu]=null})}),!0):!1};Qa.unstable_batchedUpdates=cM;Qa.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xS(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return wS(t,e,n,!1,r)};Qa.version="18.2.0-next-9e3b772b8-20220608";function vH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vH)}catch(t){console.error(t)}}vH(),d7.exports=Qa;var hu=d7.exports;const nw=Al(hu);var Cz=hu;BN.createRoot=Cz.createRoot,BN.hydrateRoot=Cz.hydrateRoot;var $k={CENTER:"center",LEFT:"left",RIGHT:"right"},gH={ZERO:0,ONE:1,TWO:2,THREE:3,FOUR:4},At={NONE:"none",PRIMARY:"primary",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},tn={BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT:"left",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT:"right",RIGHT_BOTTOM:"right-bottom",RIGHT_TOP:"right-top",TOP:"top",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};function rce(t){return t===tn.TOP||t===tn.TOP_LEFT||t===tn.TOP_RIGHT||t===tn.BOTTOM||t===tn.BOTTOM_LEFT||t===tn.BOTTOM_RIGHT}function Sz(t){return t===tn.TOP||t===tn.TOP_LEFT||t===tn.TOP_RIGHT?tn.TOP:t===tn.BOTTOM||t===tn.BOTTOM_LEFT||t===tn.BOTTOM_RIGHT?tn.BOTTOM:t===tn.LEFT||t===tn.LEFT_TOP||t===tn.LEFT_BOTTOM?tn.LEFT:tn.RIGHT}var Oe="bp5";typeof BLUEPRINT_NAMESPACE<"u"?Oe=BLUEPRINT_NAMESPACE:typeof REACT_APP_BLUEPRINT_NAMESPACE<"u"&&(Oe=REACT_APP_BLUEPRINT_NAMESPACE);var R0="".concat(Oe,"-active"),ice="".concat(Oe,"-align-left"),ace="".concat(Oe,"-align-right"),yM="".concat(Oe,"-compact"),hv="".concat(Oe,"-dark"),fd="".concat(Oe,"-disabled"),Ns="".concat(Oe,"-fill"),oce="".concat(Oe,"-fixed"),xM="".concat(Oe,"-inline"),mH="".concat(Oe,"-interactive"),ks="".concat(Oe,"-large"),sce="".concat(Oe,"-loading"),My="".concat(Oe,"-minimal"),lce="".concat(Oe,"-outlined"),uce="".concat(Oe,"-read-only"),yH="".concat(Oe,"-round"),wM="".concat(Oe,"-selected"),dv="".concat(Oe,"-small"),xH="".concat(Oe,"-vertical");Fy(tn.TOP);Fy(tn.BOTTOM);Fy(tn.LEFT);Fy(tn.RIGHT);ji(At.PRIMARY);ji(At.SUCCESS);ji(At.WARNING);ji(At.DANGER);var cce="".concat(Oe,"-text-muted"),fce="".concat(Oe,"-text-overflow-ellipsis"),hce="".concat(Oe,"-blockquote"),dce="".concat(Oe,"-code"),pce="".concat(Oe,"-code-block"),tg="".concat(Oe,"-heading"),wH="".concat(Oe,"-list"),Oy="".concat(Oe,"-button"),vce="".concat(Oy,"-group"),gce="".concat(Oy,"-spinner"),mce="".concat(Oy,"-text"),yce="".concat(Oe,"-card"),bH="".concat(Oe,"-control-card"),xce="".concat(bH,"-label"),wce="".concat(Oe,"-radio-control-card"),CH="".concat(Oe,"-card-list"),bce="".concat(CH,"-bordered"),bS="".concat(Oe,"-context-menu"),Cce="".concat(bS,"-virtual-target"),Sce="".concat(bS,"-popover"),Dce="".concat(bS,"-backdrop"),_ce="".concat(Oe,"-control-group"),Nl="".concat(Oe,"-dialog"),Tce="".concat(Nl,"-container"),Ece="".concat(Nl,"-header"),Ace="".concat(Nl,"-body"),Nce="".concat(Nl,"-body-scroll-container"),SH="".concat(Nl,"-close-button"),kce="".concat(Nl,"-footer"),Ice="".concat(Nl,"-footer-fixed"),Rce="".concat(Nl,"-footer-main-section"),$ce="".concat(Nl,"-footer-actions"),Mce="".concat(Oe,"-divider"),bM="".concat(Oe,"-drawer"),Oce="".concat(bM,"-body"),Pce="".concat(bM,"-header"),Fce="".concat(Oe,"-html-select"),CS="".concat(Oe,"-input"),Lce="".concat(CS,"-group"),zce="".concat(CS,"-left-container"),Bce="".concat(CS,"-action"),DH="".concat(Oe,"-control"),_H="".concat(DH,"-indicator"),Dz="".concat(_H,"-child"),Vce="".concat(Oe,"-checkbox"),Wce="".concat(Oe,"-radio"),Uce="".concat(Oe,"-radio-group"),TH="".concat(Oe,"-switch"),_z="".concat(TH,"-inner-text"),CM="".concat(Oe,"-label"),Gce="".concat(Oe,"-form-group"),Hce="".concat(Oe,"-form-content"),jce="".concat(Oe,"-form-helper-text"),qce="".concat(Oe,"-form-group-sub-label"),SS="".concat(Oe,"-menu"),Py="".concat(SS,"-item"),Kce="".concat(Py,"-is-selectable"),Xce="".concat(Py,"-selected-icon"),Yce="".concat(Py,"-icon"),Zce="".concat(Py,"-label"),Mk="".concat(Oe,"-submenu"),Qce="".concat(Mk,"-icon"),Jce="".concat(SS,"-divider"),efe="".concat(SS,"-header"),tfe="".concat(Oe,"-navbar"),nfe="".concat(tfe,"-group"),bC="".concat(Oe,"-non-ideal-state"),rfe="".concat(bC,"-visual"),ife="".concat(bC,"-text"),afe="".concat(Oe,"-numeric-input"),xl="".concat(Oe,"-overlay"),ofe="".concat(xl,"-backdrop"),sfe="".concat(xl,"-container"),Tz="".concat(xl,"-content"),lfe="".concat(xl,"-inline"),fE="".concat(xl,"-open"),ufe="".concat(xl,"-scroll-container"),Ez="".concat(xl,"-start-focus-trap"),Az="".concat(xl,"-end-focus-trap"),Qr="".concat(Oe,"-popover"),hE="".concat(Qr,"-arrow"),cfe="".concat(Qr,"-backdrop"),dE="".concat(Qr,"-capturing-dismiss"),ffe="".concat(Qr,"-content"),hfe="".concat(Qr,"-placement"),Da="".concat(Qr,"-dismiss"),dfe="".concat(Da,"-override"),pfe="".concat(Qr,"-match-target-width"),vfe="".concat(Qr,"-open"),gfe="".concat(Qr,"-popper-escaped"),mfe="".concat(Qr,"-reference-hidden"),yfe="".concat(Qr,"-target"),xfe="".concat(Qr,"-transition-container"),wfe="".concat(Oe,"-progress-bar"),bfe="".concat(Oe,"-progress-meter"),Cfe="".concat(Oe,"-no-stripes"),Sfe="".concat(Oe,"-no-animation"),Dfe="".concat(Oe,"-portal"),_fe="".concat(Oe,"-skeleton"),DS="".concat(Oe,"-spinner"),Tfe="".concat(DS,"-animation"),Efe="".concat(DS,"-head"),Afe="".concat(Oe,"-no-spin"),Nfe="".concat(DS,"-track"),kfe="".concat(Oe,"-segmented-control"),EH="".concat(Oe,"-tag"),Ife="".concat(EH,"-remove"),_S="".concat(Oe,"-toast"),pE="".concat(_S,"-container"),Rfe="".concat(_S,"-message"),$fe="".concat(Oe,"-tooltip"),TS="".concat(Oe,"-icon"),Mfe="".concat(TS,"-standard"),Ofe="".concat(TS,"-large"),Pfe="".concat(TS,"-muted");function ES(t){switch(t){case $k.LEFT:return ice;case $k.RIGHT:return ace;default:return}}function Ffe(t){if(t!==void 0)return"".concat(Oe,"-elevation-").concat(t)}function Lfe(t){if(t!=null)return t.indexOf("".concat(Oe,"-icon-"))===0?t:"".concat(Oe,"-icon-").concat(t)}function ji(t){if(!(t==null||t===At.NONE))return"".concat(Oe,"-intent-").concat(t.toLowerCase())}function Fy(t){if(t!==void 0)return"".concat(Oe,"-position-").concat(t)}var Ok=function(t,e){return Ok=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ok(t,e)};function Ln(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ok(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var de=function(){return de=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},de.apply(this,arguments)};function yn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sp(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})}function Dp(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function xh(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function zfe(t,e){return t===e||t.contains(e)}function Nz(t,e){var n;if(t==null)return document.activeElement;var r=(n=t.getRootNode(e))!==null&&n!==void 0?n:document;return r.activeElement}function Bfe(t){return function(e){return t.some(function(n){return e.key===n})&&e.target.dispatchEvent(new MouseEvent("click",de(de({},e),{view:void 0})))}}function _p(t){return typeof t=="function"}var Jt="[Blueprint]",Vfe=Jt+" clamp: max cannot be less than min",Wfe=Jt+" <InputGroup> leftElement and leftIcon prop are mutually exclusive, with leftElement taking priority.",Ufe=Jt+" <NumericInput> requires min to be no greater than max if both are defined.",Gfe=Jt+" <NumericInput> requires minorStepSize to be no greater than stepSize.",Hfe=Jt+" <NumericInput> requires stepSize to be no greater than majorStepSize.",jfe=Jt+" <NumericInput> requires minorStepSize to be strictly greater than zero.",qfe=Jt+" <NumericInput> requires majorStepSize to be strictly greater than zero.",Kfe=Jt+" <NumericInput> requires stepSize to be strictly greater than zero.",Xfe=Jt+" <NumericInput> controlled value prop does not adhere to stepSize, min, and/or max constraints.",Yfe="".concat(Jt," <Popover> requires renderTarget prop or a child element."),Zfe="".concat(Jt,' <Popover hasBackdrop={true}> requires interactionKind="click".'),Qfe="".concat(Jt," <Popover> supports only one child which is rendered as its target; additional children are ignored."),Jfe=Jt+" <Popover> with children ignores renderTarget prop; use either prop or children.",ehe=Jt+" Disabling <Popover> with empty/whitespace content...",the=Jt+" <Popover usePortal={false}> ignores hasBackdrop",nhe=Jt+" <Popover> supports either placement or position prop, not both.",rhe=Jt+" <Popover> onInteraction is ignored when uncontrolled.",ihe=Jt+" <Popover> targetProps value is ignored when renderTarget API is used.",ahe=Jt+" <Portal> context blueprintPortalClassName must be string",ohe=Jt+" setting blueprintPortalClassName via legacy React context API is deprecated, use <PortalProvider> instead.",she=Jt+" <RadioGroup> children and options prop are mutually exclusive, with options taking priority.",lhe=Jt+" <Spinner> Classes.SMALL/LARGE are ignored if size prop is set.",uhe=Jt+" OverlayToaster.create() is not supported inside React lifecycle methods in React 16. See usage example on the docs site. https://blueprintjs.com/docs/#core/components/toast.example",che=Jt+" OverlayToaster.createAsync() received a null component ref. This can happen if called inside React lifecycle methods in React 16. See usage example on the docs site. https://blueprintjs.com/docs/#core/components/toast.example",fhe=Jt+" <OverlayToaster> maxToasts is set to an invalid number, must be greater than 0",kz=Jt+" OverlayToaster.create() ignores inline prop as it always creates a new element.",AH=Jt+" <Dialog> iconName is ignored if title is omitted.",NH=Jt+" <Dialog> isCloseButtonShown prop is ignored if title is omitted.",hhe=Jt+" <Drawer> all angle positions are casted into pure position (TOP, BOTTOM, LEFT or RIGHT)";function $0(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function SM(t,e,n){if(t==null)return t;if(n<e)throw new Error(Vfe);return Math.min(Math.max(t,e),n)}function Iz(t){if(!isFinite(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}var Rz=new Map;function kH(t){var e,n=(e=Rz.get(t))!==null&&e!==void 0?e:0;return Rz.set(t,n+1),"".concat(t,"-").concat(n)}function CC(t,e){return e===void 0&&(e=!1),t==null||t===""||t===!1||!e&&Array.isArray(t)&&(t.length===0||t.every(function(n){return CC(n,!0)}))}function IH(t,e){if(e===void 0&&(e="span"),!(t==null||typeof t=="boolean"))return typeof t=="string"?t.trim().length>0?L.createElement(e,{},t):void 0:typeof t=="number"||typeof t.type=="symbol"||Array.isArray(t)?L.createElement(e,{},t):dhe(t)?t:void 0}function dhe(t){return typeof t=="object"&&typeof t.type<"u"&&typeof t.props<"u"}function Pk(t,e){return t!=null&&t.type!=null&&t.type.displayName!=null&&t.type.displayName===e.displayName}function M0(t){return t.key==="Enter"||t.key===" "}function phe(t){return t!=null&&t instanceof Element&&t.closest(".".concat(hv))!=null}function vhe(t){return t!=null&&typeof t!="function"}function ghe(t){return typeof t=="function"}function SC(t,e){vhe(t)?t.current=e:ghe(t)&&t(e)}function Ly(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){t.forEach(function(r){SC(r,n)})}}function Fk(t,e,n){return function(r){t[e]=r,SC(n,r)}}var lr=function(t){Ln(e,t);function e(n){var r=t.call(this,n)||this;return r.timeoutIds=[],r.requestIds=[],r.clearTimeouts=function(){if(r.timeoutIds.length>0){for(var i=0,a=r.timeoutIds;i<a.length;i++){var o=a[i];window.clearTimeout(o)}r.timeoutIds=[]}},r.cancelAnimationFrames=function(){if(r.requestIds.length>0){for(var i=0,a=r.requestIds;i<a.length;i++){var o=a[i];window.cancelAnimationFrame(o)}r.requestIds=[]}},$0("production")||r.validateProps(r.props),r}return e.prototype.componentDidUpdate=function(n,r,i){$0("production")||this.validateProps(this.props)},e.prototype.componentWillUnmount=function(){this.clearTimeouts(),this.cancelAnimationFrames()},e.prototype.requestAnimationFrame=function(n){var r=window.requestAnimationFrame(n);return this.requestIds.push(r),function(){return window.cancelAnimationFrame(r)}},e.prototype.setTimeout=function(n,r){var i=window.setTimeout(n,r);return this.timeoutIds.push(i),function(){return window.clearTimeout(i)}},e.prototype.validateProps=function(n){},e}(L.PureComponent),gt="Blueprint5",$z=["active","alignText","asyncControl","containerRef","current","elementRef","ellipsizeText","fill","icon","iconSize","inputClassName","inputRef","intent","inline","large","loading","leftElement","leftIcon","minimal","onRemove","outlined","panel","panelClassName","popoverProps","rightElement","rightIcon","round","size","small","tagName","text","textClassName"];function Oc(t,e,n){return e===void 0&&(e=$z),n===void 0&&(n=!1),n&&(e=e.concat($z)),e.reduce(function(r,i){return i.indexOf("-")!==-1||r.hasOwnProperty(i)&&delete r[i],r},de({},t))}var RH={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,r(s)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)e.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(RH);var mhe=RH.exports;const Ze=Al(mhe);function yhe(t){return t.toLowerCase()}var xhe=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],whe=/[^A-Z0-9]+/gi;function $H(t,e){e===void 0&&(e={});for(var n=e.splitRegexp,r=n===void 0?xhe:n,i=e.stripRegexp,a=i===void 0?whe:i,o=e.transform,s=o===void 0?yhe:o,l=e.delimiter,u=l===void 0?" ":l,c=Mz(Mz(t,r,"$1\0$2"),a,"\0"),f=0,h=c.length;c.charAt(f)==="\0";)f++;for(;c.charAt(h-1)==="\0";)h--;return c.slice(f,h).split("\0").map(s).join(u)}function Mz(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function bhe(t,e){var n=t.charAt(0),r=t.substr(1).toLowerCase();return e>0&&n>="0"&&n<="9"?"_"+n+r:""+n.toUpperCase()+r}function Che(t,e){return e===void 0&&(e={}),$H(t,de({delimiter:"",transform:bhe},e))}function She(t,e){return e===void 0&&(e={}),$H(t,de({delimiter:"."},e))}function Dhe(t,e){return e===void 0&&(e={}),She(t,de({delimiter:"_"},e))}var Qe;(function(t){t[t.STANDARD=16]="STANDARD",t[t.LARGE=20]="LARGE"})(Qe||(Qe={}));const _he="modulepreload",The=function(t){return"/"+t},Oz={},Pz=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=The(a),a in Oz)return;Oz[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":_he,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var k,N;(function(t){t.AddClip="add-clip",t.AddColumnLeft="add-column-left",t.AddColumnRight="add-column-right",t.AddLocation="add-location",t.AddRowBottom="add-row-bottom",t.AddRowTop="add-row-top",t.AddToArtifact="add-to-artifact",t.AddToFolder="add-to-folder",t.Add="add",t.AimpointsTarget="aimpoints-target",t.Airplane="airplane",t.AlignCenter="align-center",t.AlignJustify="align-justify",t.AlignLeft="align-left",t.AlignRight="align-right",t.AlignmentBottom="alignment-bottom",t.AlignmentHorizontalCenter="alignment-horizontal-center",t.AlignmentLeft="alignment-left",t.AlignmentRight="alignment-right",t.AlignmentTop="alignment-top",t.AlignmentVerticalCenter="alignment-vertical-center",t.Ammunition="ammunition",t.Anchor="anchor",t.Annotation="annotation",t.Antenna="antenna",t.AppHeader="app-header",t.Application="application",t.Applications="applications",t.Archive="archive",t.AreaOfInterest="area-of-interest",t.ArrayBoolean="array-boolean",t.ArrayDate="array-date",t.ArrayFloatingPoint="array-floating-point",t.ArrayNumeric="array-numeric",t.ArrayString="array-string",t.ArrayTimestamp="array-timestamp",t.Array="array",t.ArrowBottomLeft="arrow-bottom-left",t.ArrowBottomRight="arrow-bottom-right",t.ArrowDown="arrow-down",t.ArrowLeft="arrow-left",t.ArrowRight="arrow-right",t.ArrowTopLeft="arrow-top-left",t.ArrowTopRight="arrow-top-right",t.ArrowUp="arrow-up",t.ArrowsHorizontal="arrows-horizontal",t.ArrowsVertical="arrows-vertical",t.Asterisk="asterisk",t.At="at",t.AutomaticUpdates="automatic-updates",t.Axle="axle",t.Backlink="backlink",t.Badge="badge",t.BanCircle="ban-circle",t.BankAccount="bank-account",t.Barcode="barcode",t.Blank="blank",t.BlockedPerson="blocked-person",t.Bold="bold",t.Book="book",t.Bookmark="bookmark",t.Box="box",t.Briefcase="briefcase",t.BringData="bring-data",t.BringForward="bring-forward",t.Bug="bug",t.Buggy="buggy",t.Build="build",t.Calculator="calculator",t.Calendar="calendar",t.Camera="camera",t.CaretDown="caret-down",t.CaretLeft="caret-left",t.CaretRight="caret-right",t.CaretUp="caret-up",t.CargoShip="cargo-ship",t.CellTower="cell-tower",t.Changes="changes",t.Chart="chart",t.Chat="chat",t.ChevronBackward="chevron-backward",t.ChevronDown="chevron-down",t.ChevronForward="chevron-forward",t.ChevronLeft="chevron-left",t.ChevronRight="chevron-right",t.ChevronUp="chevron-up",t.CircleArrowDown="circle-arrow-down",t.CircleArrowLeft="circle-arrow-left",t.CircleArrowRight="circle-arrow-right",t.CircleArrowUp="circle-arrow-up",t.Circle="circle",t.Citation="citation",t.Clean="clean",t.Clip="clip",t.Clipboard="clipboard",t.CloudDownload="cloud-download",t.CloudTick="cloud-tick",t.CloudUpload="cloud-upload",t.Cloud="cloud",t.CodeBlock="code-block",t.Code="code",t.Cog="cog",t.CollapseAll="collapse-all",t.ColorFill="color-fill",t.ColumnLayout="column-layout",t.Comment="comment",t.Comparison="comparison",t.Compass="compass",t.Compressed="compressed",t.Confirm="confirm",t.Console="console",t.Contrast="contrast",t.Control="control",t.CreditCard="credit-card",t.Crop="crop",t.CrossCircle="cross-circle",t.Cross="cross",t.Crown="crown",t.CubeAdd="cube-add",t.CubeRemove="cube-remove",t.Cube="cube",t.CurvedRangeChart="curved-range-chart",t.Cut="cut",t.Cycle="cycle",t.Dashboard="dashboard",t.DataConnection="data-connection",t.DataLineage="data-lineage",t.Database="database",t.Delete="delete",t.Delta="delta",t.DeriveColumn="derive-column",t.Desktop="desktop",t.Detection="detection",t.Diagnosis="diagnosis",t.DiagramTree="diagram-tree",t.DirectionLeft="direction-left",t.DirectionRight="direction-right",t.Disable="disable",t.Divide="divide",t.DocumentOpen="document-open",t.DocumentShare="document-share",t.Document="document",t.Dollar="dollar",t.Dot="dot",t.DoubleCaretHorizontal="double-caret-horizontal",t.DoubleCaretVertical="double-caret-vertical",t.DoubleChevronDown="double-chevron-down",t.DoubleChevronLeft="double-chevron-left",t.DoubleChevronRight="double-chevron-right",t.DoubleChevronUp="double-chevron-up",t.DoughnutChart="doughnut-chart",t.Download="download",t.DragHandleHorizontal="drag-handle-horizontal",t.DragHandleVertical="drag-handle-vertical",t.Draw="draw",t.DrawerLeftFilled="drawer-left-filled",t.DrawerLeft="drawer-left",t.DrawerRightFilled="drawer-right-filled",t.DrawerRight="drawer-right",t.DriveTime="drive-time",t.Duplicate="duplicate",t.Edit="edit",t.Eject="eject",t.Emoji="emoji",t.Endnote="endnote",t.Endorsed="endorsed",t.Envelope="envelope",t.Equals="equals",t.Eraser="eraser",t.Error="error",t.Euro="euro",t.Exchange="exchange",t.ExcludeRow="exclude-row",t.ExpandAll="expand-all",t.Explain="explain",t.Export="export",t.EyeOff="eye-off",t.EyeOn="eye-on",t.EyeOpen="eye-open",t.FastBackward="fast-backward",t.FastForward="fast-forward",t.FeedSubscribed="feed-subscribed",t.Feed="feed",t.Film="film",t.FilterKeep="filter-keep",t.FilterList="filter-list",t.FilterOpen="filter-open",t.FilterRemove="filter-remove",t.Filter="filter",t.Flag="flag",t.Flame="flame",t.Flash="flash",t.FloatingPoint="floating-point",t.FloppyDisk="floppy-disk",t.FlowBranch="flow-branch",t.FlowEnd="flow-end",t.FlowLinear="flow-linear",t.FlowReviewBranch="flow-review-branch",t.FlowReview="flow-review",t.Flows="flows",t.FolderClose="folder-close",t.FolderNew="folder-new",t.FolderOpen="folder-open",t.FolderSharedOpen="folder-shared-open",t.FolderShared="folder-shared",t.Follower="follower",t.Following="following",t.Font="font",t.Fork="fork",t.Form="form",t.Fuel="fuel",t.FullCircle="full-circle",t.FullStackedChart="full-stacked-chart",t.Fullscreen="fullscreen",t.Function="function",t.GanttChart="gantt-chart",t.Generate="generate",t.Geofence="geofence",t.Geolocation="geolocation",t.Geosearch="geosearch",t.Geotime="geotime",t.GitBranch="git-branch",t.GitCommit="git-commit",t.GitMerge="git-merge",t.GitNewBranch="git-new-branch",t.GitPull="git-pull",t.GitPush="git-push",t.GitRepo="git-repo",t.Glass="glass",t.GlobeNetwork="globe-network",t.Globe="globe",t.GraphRemove="graph-remove",t.Graph="graph",t.GreaterThanOrEqualTo="greater-than-or-equal-to",t.GreaterThan="greater-than",t.GridView="grid-view",t.Grid="grid",t.GroupItem="group-item",t.GroupObjects="group-objects",t.GroupedBarChart="grouped-bar-chart",t.HandDown="hand-down",t.HandLeft="hand-left",t.HandRight="hand-right",t.HandUp="hand-up",t.Hand="hand",t.Hat="hat",t.HeaderOne="header-one",t.HeaderThree="header-three",t.HeaderTwo="header-two",t.Header="header",t.Headset="headset",t.HeartBroken="heart-broken",t.Heart="heart",t.HeatGrid="heat-grid",t.Heatmap="heatmap",t.Helicopter="helicopter",t.Help="help",t.HelperManagement="helper-management",t.HighPriority="high-priority",t.HighVoltagePole="high-voltage-pole",t.Highlight="highlight",t.History="history",t.Home="home",t.HorizontalBarChartAsc="horizontal-bar-chart-asc",t.HorizontalBarChartDesc="horizontal-bar-chart-desc",t.HorizontalBarChart="horizontal-bar-chart",t.HorizontalDistribution="horizontal-distribution",t.HorizontalInbetween="horizontal-inbetween",t.Hurricane="hurricane",t.IdNumber="id-number",t.ImageRotateLeft="image-rotate-left",t.ImageRotateRight="image-rotate-right",t.Import="import",t.InboxFiltered="inbox-filtered",t.InboxGeo="inbox-geo",t.InboxSearch="inbox-search",t.InboxUpdate="inbox-update",t.Inbox="inbox",t.InfoSign="info-sign",t.Inheritance="inheritance",t.InheritedGroup="inherited-group",t.InnerJoin="inner-join",t.Input="input",t.Insert="insert",t.Intelligence="intelligence",t.Intersection="intersection",t.IpAddress="ip-address",t.IssueClosed="issue-closed",t.IssueNew="issue-new",t.Issue="issue",t.Italic="italic",t.JoinTable="join-table",t.KeyBackspace="key-backspace",t.KeyCommand="key-command",t.KeyControl="key-control",t.KeyDelete="key-delete",t.KeyEnter="key-enter",t.KeyEscape="key-escape",t.KeyOption="key-option",t.KeyShift="key-shift",t.KeyTab="key-tab",t.Key="key",t.KnownVehicle="known-vehicle",t.LabTest="lab-test",t.Label="label",t.LayerOutline="layer-outline",t.Layer="layer",t.Layers="layers",t.LayoutAuto="layout-auto",t.LayoutBalloon="layout-balloon",t.LayoutCircle="layout-circle",t.LayoutGrid="layout-grid",t.LayoutGroupBy="layout-group-by",t.LayoutHierarchy="layout-hierarchy",t.LayoutLinear="layout-linear",t.LayoutSkewGrid="layout-skew-grid",t.LayoutSortedClusters="layout-sorted-clusters",t.Layout="layout",t.Learning="learning",t.LeftJoin="left-join",t.LengthenText="lengthen-text",t.LessThanOrEqualTo="less-than-or-equal-to",t.LessThan="less-than",t.Lifesaver="lifesaver",t.Lightbulb="lightbulb",t.Lightning="lightning",t.Link="link",t.ListColumns="list-columns",t.ListDetailView="list-detail-view",t.List="list",t.Locate="locate",t.Lock="lock",t.Locomotive="locomotive",t.LogIn="log-in",t.LogOut="log-out",t.LowVoltagePole="low-voltage-pole",t.Manual="manual",t.ManuallyEnteredData="manually-entered-data",t.ManyToMany="many-to-many",t.ManyToOne="many-to-one",t.MapCreate="map-create",t.MapMarker="map-marker",t.Map="map",t.Maximize="maximize",t.Media="media",t.MenuClosed="menu-closed",t.MenuOpen="menu-open",t.Menu="menu",t.MergeColumns="merge-columns",t.MergeLinks="merge-links",t.Microphone="microphone",t.Minimize="minimize",t.Minus="minus",t.MobilePhone="mobile-phone",t.MobileVideo="mobile-video",t.ModalFilled="modal-filled",t.Modal="modal",t.Model="model",t.Moon="moon",t.More="more",t.Mountain="mountain",t.Move="move",t.Mugshot="mugshot",t.MultiSelect="multi-select",t.Music="music",t.Nest="nest",t.NewDrawing="new-drawing",t.NewGridItem="new-grid-item",t.NewLayer="new-layer",t.NewLayers="new-layers",t.NewLink="new-link",t.NewObject="new-object",t.NewPerson="new-person",t.NewPrescription="new-prescription",t.NewShield="new-shield",t.NewTextBox="new-text-box",t.Ninja="ninja",t.NotEqualTo="not-equal-to",t.NotificationsSnooze="notifications-snooze",t.NotificationsUpdated="notifications-updated",t.Notifications="notifications",t.NumberedList="numbered-list",t.Numerical="numerical",t.Office="office",t.Offline="offline",t.OilField="oil-field",t.OneColumn="one-column",t.OneToMany="one-to-many",t.OneToOne="one-to-one",t.OpenApplication="open-application",t.Outdated="outdated",t.PageLayout="page-layout",t.PanelStats="panel-stats",t.PanelTable="panel-table",t.Paperclip="paperclip",t.Paragraph="paragraph",t.PasteVariable="paste-variable",t.PathSearch="path-search",t.Path="path",t.Pause="pause",t.People="people",t.Percentage="percentage",t.Person="person",t.PhoneCall="phone-call",t.PhoneForward="phone-forward",t.Phone="phone",t.PieChart="pie-chart",t.Pin="pin",t.PivotTable="pivot-table",t.Pivot="pivot",t.Play="play",t.Playbook="playbook",t.Plus="plus",t.PolygonFilter="polygon-filter",t.Power="power",t.PredictiveAnalysis="predictive-analysis",t.Prescription="prescription",t.Presentation="presentation",t.Print="print",t.Projects="projects",t.Properties="properties",t.Property="property",t.PublishFunction="publish-function",t.Pulse="pulse",t.Rain="rain",t.Random="random",t.Record="record",t.RectHeight="rect-height",t.RectWidth="rect-width",t.Rectangle="rectangle",t.Redo="redo",t.Refresh="refresh",t.Regex="regex",t.RegressionChart="regression-chart",t.RemoveColumnLeft="remove-column-left",t.RemoveColumnRight="remove-column-right",t.RemoveColumn="remove-column",t.RemoveRowBottom="remove-row-bottom",t.RemoveRowTop="remove-row-top",t.Remove="remove",t.Repeat="repeat",t.Reset="reset",t.Resolve="resolve",t.Rig="rig",t.RightJoin="right-join",t.Ring="ring",t.RocketSlant="rocket-slant",t.Rocket="rocket",t.RotateDocument="rotate-document",t.RotatePage="rotate-page",t.Route="route",t.Satellite="satellite",t.Saved="saved",t.ScatterPlot="scatter-plot",t.SearchAround="search-around",t.SearchTemplate="search-template",t.SearchText="search-text",t.Search="search",t.SegmentedControl="segmented-control",t.Select="select",t.Selection="selection",t.SendBackward="send-backward",t.SendMessage="send-message",t.SendToGraph="send-to-graph",t.SendToMap="send-to-map",t.SendTo="send-to",t.Sensor="sensor",t.SeriesAdd="series-add",t.SeriesConfiguration="series-configuration",t.SeriesDerived="series-derived",t.SeriesFiltered="series-filtered",t.SeriesSearch="series-search",t.Settings="settings",t.Shapes="shapes",t.Share="share",t.SharedFilter="shared-filter",t.Shield="shield",t.Ship="ship",t.Shop="shop",t.ShoppingCart="shopping-cart",t.ShortenText="shorten-text",t.SignalSearch="signal-search",t.SimCard="sim-card",t.Slash="slash",t.SmallCross="small-cross",t.SmallInfoSign="small-info-sign",t.SmallMinus="small-minus",t.SmallPlus="small-plus",t.SmallSquare="small-square",t.SmallTick="small-tick",t.Snowflake="snowflake",t.SoccerBall="soccer-ball",t.SocialMedia="social-media",t.SortAlphabeticalDesc="sort-alphabetical-desc",t.SortAlphabetical="sort-alphabetical",t.SortAsc="sort-asc",t.SortDesc="sort-desc",t.SortNumericalDesc="sort-numerical-desc",t.SortNumerical="sort-numerical",t.Sort="sort",t.SpellCheck="spell-check",t.SplitColumns="split-columns",t.SportsStadium="sports-stadium",t.Square="square",t.StackedChart="stacked-chart",t.StadiumGeometry="stadium-geometry",t.StarEmpty="star-empty",t.Star="star",t.StepBackward="step-backward",t.StepChart="step-chart",t.StepForward="step-forward",t.Stop="stop",t.Stopwatch="stopwatch",t.Strikethrough="strikethrough",t.Style="style",t.Subscript="subscript",t.Superscript="superscript",t.SwapHorizontal="swap-horizontal",t.SwapVertical="swap-vertical",t.Switch="switch",t.SymbolCircle="symbol-circle",t.SymbolCross="symbol-cross",t.SymbolDiamond="symbol-diamond",t.SymbolRectangle="symbol-rectangle",t.SymbolSquare="symbol-square",t.SymbolTriangleDown="symbol-triangle-down",t.SymbolTriangleUp="symbol-triangle-up",t.Syringe="syringe",t.Tag="tag",t.TakeAction="take-action",t.Tank="tank",t.Target="target",t.Taxi="taxi",t.Team="team",t.Temperature="temperature",t.TextHighlight="text-highlight",t.ThDerived="th-derived",t.ThDisconnect="th-disconnect",t.ThFiltered="th-filtered",t.ThList="th-list",t.Th="th",t.ThirdParty="third-party",t.ThumbsDown="thumbs-down",t.ThumbsUp="thumbs-up",t.TickCircle="tick-circle",t.Tick="tick",t.Time="time",t.TimelineAreaChart="timeline-area-chart",t.TimelineBarChart="timeline-bar-chart",t.TimelineEvents="timeline-events",t.TimelineLineChart="timeline-line-chart",t.Tint="tint",t.Torch="torch",t.Tractor="tractor",t.Train="train",t.Translate="translate",t.Trash="trash",t.Tree="tree",t.TrendingDown="trending-down",t.TrendingUp="trending-up",t.Trophy="trophy",t.Truck="truck",t.TwoColumns="two-columns",t.Unarchive="unarchive",t.Underline="underline",t.Undo="undo",t.UngroupObjects="ungroup-objects",t.UnknownVehicle="unknown-vehicle",t.Unlink="unlink",t.Unlock="unlock",t.Unpin="unpin",t.Unresolve="unresolve",t.Updated="updated",t.Upload="upload",t.User="user",t.Variable="variable",t.VerticalBarChartAsc="vertical-bar-chart-asc",t.VerticalBarChartDesc="vertical-bar-chart-desc",t.VerticalDistribution="vertical-distribution",t.VerticalInbetween="vertical-inbetween",t.Video="video",t.Virus="virus",t.VolumeDown="volume-down",t.VolumeOff="volume-off",t.VolumeUp="volume-up",t.Walk="walk",t.WarningSign="warning-sign",t.WaterfallChart="waterfall-chart",t.Waves="waves",t.WidgetButton="widget-button",t.WidgetFooter="widget-footer",t.WidgetHeader="widget-header",t.Widget="widget",t.Wind="wind",t.Wrench="wrench",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t.ZoomToFit="zoom-to-fit"})(N||(N={}));k={},k[N.AddClip]="61697",k[N.AddColumnLeft]="61698",k[N.AddColumnRight]="61699",k[N.AddLocation]="61700",k[N.AddRowBottom]="61701",k[N.AddRowTop]="61702",k[N.AddToArtifact]="61703",k[N.AddToFolder]="61704",k[N.Add]="61705",k[N.AimpointsTarget]="62261",k[N.Airplane]="61706",k[N.AlignCenter]="61707",k[N.AlignJustify]="61708",k[N.AlignLeft]="61709",k[N.AlignRight]="61710",k[N.AlignmentBottom]="61711",k[N.AlignmentHorizontalCenter]="61712",k[N.AlignmentLeft]="61713",k[N.AlignmentRight]="61714",k[N.AlignmentTop]="61715",k[N.AlignmentVerticalCenter]="61716",k[N.Ammunition]="62274",k[N.Anchor]="62256",k[N.Annotation]="61717",k[N.Antenna]="61718",k[N.AppHeader]="61719",k[N.Application]="61720",k[N.Applications]="61721",k[N.Archive]="61722",k[N.AreaOfInterest]="61723",k[N.ArrayBoolean]="61724",k[N.ArrayDate]="61725",k[N.ArrayFloatingPoint]="62253",k[N.ArrayNumeric]="61726",k[N.ArrayString]="61727",k[N.ArrayTimestamp]="61728",k[N.Array]="61729",k[N.ArrowBottomLeft]="61730",k[N.ArrowBottomRight]="61731",k[N.ArrowDown]="61732",k[N.ArrowLeft]="61733",k[N.ArrowRight]="61734",k[N.ArrowTopLeft]="61735",k[N.ArrowTopRight]="61736",k[N.ArrowUp]="61737",k[N.ArrowsHorizontal]="61738",k[N.ArrowsVertical]="61739",k[N.Asterisk]="61740",k[N.At]="62257",k[N.AutomaticUpdates]="61741",k[N.Axle]="62264",k[N.Backlink]="61742",k[N.Badge]="61743",k[N.BanCircle]="61744",k[N.BankAccount]="61745",k[N.Barcode]="61746",k[N.Blank]="61747",k[N.BlockedPerson]="61748",k[N.Bold]="61749",k[N.Book]="61750",k[N.Bookmark]="61751",k[N.Box]="61752",k[N.Briefcase]="61753",k[N.BringData]="61754",k[N.BringForward]="62292",k[N.Bug]="62254",k[N.Buggy]="61755",k[N.Build]="61756",k[N.Calculator]="61757",k[N.Calendar]="61758",k[N.Camera]="61759",k[N.CaretDown]="61760",k[N.CaretLeft]="61761",k[N.CaretRight]="61762",k[N.CaretUp]="61763",k[N.CargoShip]="61764",k[N.CellTower]="61765",k[N.Changes]="61766",k[N.Chart]="61767",k[N.Chat]="61768",k[N.ChevronBackward]="61769",k[N.ChevronDown]="61770",k[N.ChevronForward]="61771",k[N.ChevronLeft]="61772",k[N.ChevronRight]="61773",k[N.ChevronUp]="61774",k[N.CircleArrowDown]="61775",k[N.CircleArrowLeft]="61776",k[N.CircleArrowRight]="61777",k[N.CircleArrowUp]="61778",k[N.Circle]="61779",k[N.Citation]="61780",k[N.Clean]="61781",k[N.Clip]="61782",k[N.Clipboard]="61783",k[N.CloudDownload]="61784",k[N.CloudTick]="62286",k[N.CloudUpload]="61785",k[N.Cloud]="61786",k[N.CodeBlock]="61787",k[N.Code]="61788",k[N.Cog]="61789",k[N.CollapseAll]="61790",k[N.ColorFill]="62248",k[N.ColumnLayout]="61791",k[N.Comment]="61792",k[N.Comparison]="61793",k[N.Compass]="61794",k[N.Compressed]="61795",k[N.Confirm]="61796",k[N.Console]="61797",k[N.Contrast]="61798",k[N.Control]="61799",k[N.CreditCard]="61800",k[N.Crop]="62291",k[N.CrossCircle]="62262",k[N.Cross]="61801",k[N.Crown]="61802",k[N.CubeAdd]="61803",k[N.CubeRemove]="61804",k[N.Cube]="61805",k[N.CurvedRangeChart]="61806",k[N.Cut]="61807",k[N.Cycle]="61808",k[N.Dashboard]="61809",k[N.DataConnection]="61810",k[N.DataLineage]="61811",k[N.Database]="61812",k[N.Delete]="61813",k[N.Delta]="61814",k[N.DeriveColumn]="61815",k[N.Desktop]="61816",k[N.Detection]="62273",k[N.Diagnosis]="61817",k[N.DiagramTree]="61818",k[N.DirectionLeft]="61819",k[N.DirectionRight]="61820",k[N.Disable]="61821",k[N.Divide]="62247",k[N.DocumentOpen]="61822",k[N.DocumentShare]="61823",k[N.Document]="61824",k[N.Dollar]="61825",k[N.Dot]="61826",k[N.DoubleCaretHorizontal]="61827",k[N.DoubleCaretVertical]="61828",k[N.DoubleChevronDown]="61829",k[N.DoubleChevronLeft]="61830",k[N.DoubleChevronRight]="61831",k[N.DoubleChevronUp]="61832",k[N.DoughnutChart]="61833",k[N.Download]="61834",k[N.DragHandleHorizontal]="61835",k[N.DragHandleVertical]="61836",k[N.Draw]="61837",k[N.DrawerLeftFilled]="61838",k[N.DrawerLeft]="61839",k[N.DrawerRightFilled]="61840",k[N.DrawerRight]="61841",k[N.DriveTime]="61842",k[N.Duplicate]="61843",k[N.Edit]="61844",k[N.Eject]="61845",k[N.Emoji]="61846",k[N.Endnote]="62294",k[N.Endorsed]="61847",k[N.Envelope]="61848",k[N.Equals]="61849",k[N.Eraser]="61850",k[N.Error]="61851",k[N.Euro]="61852",k[N.Exchange]="61853",k[N.ExcludeRow]="61854",k[N.ExpandAll]="61855",k[N.Explain]="62285",k[N.Export]="61856",k[N.EyeOff]="61857",k[N.EyeOn]="61858",k[N.EyeOpen]="61859",k[N.FastBackward]="61860",k[N.FastForward]="61861",k[N.FeedSubscribed]="61862",k[N.Feed]="61863",k[N.Film]="61864",k[N.FilterKeep]="61865",k[N.FilterList]="61866",k[N.FilterOpen]="61867",k[N.FilterRemove]="61868",k[N.Filter]="61869",k[N.Flag]="61870",k[N.Flame]="61871",k[N.Flash]="61872",k[N.FloatingPoint]="62252",k[N.FloppyDisk]="61873",k[N.FlowBranch]="61874",k[N.FlowEnd]="61875",k[N.FlowLinear]="61876",k[N.FlowReviewBranch]="61877",k[N.FlowReview]="61878",k[N.Flows]="61879",k[N.FolderClose]="61880",k[N.FolderNew]="61881",k[N.FolderOpen]="61882",k[N.FolderSharedOpen]="61883",k[N.FolderShared]="61884",k[N.Follower]="61885",k[N.Following]="61886",k[N.Font]="61887",k[N.Fork]="61888",k[N.Form]="61889",k[N.Fuel]="62243",k[N.FullCircle]="61890",k[N.FullStackedChart]="61891",k[N.Fullscreen]="61892",k[N.Function]="61893",k[N.GanttChart]="61894",k[N.Generate]="62284",k[N.Geofence]="61895",k[N.Geolocation]="61896",k[N.Geosearch]="61897",k[N.Geotime]="62276",k[N.GitBranch]="61898",k[N.GitCommit]="61899",k[N.GitMerge]="61900",k[N.GitNewBranch]="61901",k[N.GitPull]="61902",k[N.GitPush]="61903",k[N.GitRepo]="61904",k[N.Glass]="61905",k[N.GlobeNetwork]="61906",k[N.Globe]="61907",k[N.GraphRemove]="61908",k[N.Graph]="61909",k[N.GreaterThanOrEqualTo]="61910",k[N.GreaterThan]="61911",k[N.GridView]="61912",k[N.Grid]="61913",k[N.GroupItem]="62282",k[N.GroupObjects]="61914",k[N.GroupedBarChart]="61915",k[N.HandDown]="61916",k[N.HandLeft]="61917",k[N.HandRight]="61918",k[N.HandUp]="61919",k[N.Hand]="61920",k[N.Hat]="61921",k[N.HeaderOne]="61922",k[N.HeaderThree]="61923",k[N.HeaderTwo]="61924",k[N.Header]="61925",k[N.Headset]="61926",k[N.HeartBroken]="61927",k[N.Heart]="61928",k[N.HeatGrid]="61929",k[N.Heatmap]="61930",k[N.Helicopter]="61931",k[N.Help]="61932",k[N.HelperManagement]="61933",k[N.HighPriority]="61934",k[N.HighVoltagePole]="62259",k[N.Highlight]="61935",k[N.History]="61936",k[N.Home]="61937",k[N.HorizontalBarChartAsc]="61938",k[N.HorizontalBarChartDesc]="61939",k[N.HorizontalBarChart]="61940",k[N.HorizontalDistribution]="61941",k[N.HorizontalInbetween]="62249",k[N.Hurricane]="61942",k[N.IdNumber]="61943",k[N.ImageRotateLeft]="61944",k[N.ImageRotateRight]="61945",k[N.Import]="61946",k[N.InboxFiltered]="61947",k[N.InboxGeo]="61948",k[N.InboxSearch]="61949",k[N.InboxUpdate]="61950",k[N.Inbox]="61951",k[N.InfoSign]="61952",k[N.Inheritance]="61953",k[N.InheritedGroup]="61954",k[N.InnerJoin]="61955",k[N.Input]="62283",k[N.Insert]="61956",k[N.Intelligence]="62263",k[N.Intersection]="61957",k[N.IpAddress]="61958",k[N.IssueClosed]="61959",k[N.IssueNew]="61960",k[N.Issue]="61961",k[N.Italic]="61962",k[N.JoinTable]="61963",k[N.KeyBackspace]="61964",k[N.KeyCommand]="61965",k[N.KeyControl]="61966",k[N.KeyDelete]="61967",k[N.KeyEnter]="61968",k[N.KeyEscape]="61969",k[N.KeyOption]="61970",k[N.KeyShift]="61971",k[N.KeyTab]="61972",k[N.Key]="61973",k[N.KnownVehicle]="61974",k[N.LabTest]="61975",k[N.Label]="61976",k[N.LayerOutline]="61977",k[N.Layer]="61978",k[N.Layers]="61979",k[N.LayoutAuto]="61980",k[N.LayoutBalloon]="61981",k[N.LayoutCircle]="61982",k[N.LayoutGrid]="61983",k[N.LayoutGroupBy]="61984",k[N.LayoutHierarchy]="61985",k[N.LayoutLinear]="61986",k[N.LayoutSkewGrid]="61987",k[N.LayoutSortedClusters]="61988",k[N.Layout]="61989",k[N.Learning]="61990",k[N.LeftJoin]="61991",k[N.LengthenText]="62270",k[N.LessThanOrEqualTo]="61992",k[N.LessThan]="61993",k[N.Lifesaver]="61994",k[N.Lightbulb]="61995",k[N.Lightning]="61996",k[N.Link]="61997",k[N.ListColumns]="61998",k[N.ListDetailView]="61999",k[N.List]="62000",k[N.Locate]="62001",k[N.Lock]="62002",k[N.Locomotive]="62267",k[N.LogIn]="62003",k[N.LogOut]="62004",k[N.LowVoltagePole]="62258",k[N.Manual]="62005",k[N.ManuallyEnteredData]="62006",k[N.ManyToMany]="62007",k[N.ManyToOne]="62008",k[N.MapCreate]="62009",k[N.MapMarker]="62010",k[N.Map]="62011",k[N.Maximize]="62012",k[N.Media]="62013",k[N.MenuClosed]="62014",k[N.MenuOpen]="62015",k[N.Menu]="62016",k[N.MergeColumns]="62017",k[N.MergeLinks]="62018",k[N.Microphone]="62275",k[N.Minimize]="62019",k[N.Minus]="62020",k[N.MobilePhone]="62021",k[N.MobileVideo]="62022",k[N.ModalFilled]="62023",k[N.Modal]="62024",k[N.Model]="62269",k[N.Moon]="62025",k[N.More]="62026",k[N.Mountain]="62027",k[N.Move]="62028",k[N.Mugshot]="62029",k[N.MultiSelect]="62030",k[N.Music]="62031",k[N.Nest]="62032",k[N.NewDrawing]="62033",k[N.NewGridItem]="62034",k[N.NewLayer]="62035",k[N.NewLayers]="62036",k[N.NewLink]="62037",k[N.NewObject]="62038",k[N.NewPerson]="62039",k[N.NewPrescription]="62040",k[N.NewShield]="62281",k[N.NewTextBox]="62041",k[N.Ninja]="62042",k[N.NotEqualTo]="62043",k[N.NotificationsSnooze]="62044",k[N.NotificationsUpdated]="62045",k[N.Notifications]="62046",k[N.NumberedList]="62047",k[N.Numerical]="62048",k[N.Office]="62049",k[N.Offline]="62050",k[N.OilField]="62051",k[N.OneColumn]="62052",k[N.OneToMany]="62053",k[N.OneToOne]="62054",k[N.OpenApplication]="62251",k[N.Outdated]="62055",k[N.PageLayout]="62056",k[N.PanelStats]="62057",k[N.PanelTable]="62058",k[N.Paperclip]="62059",k[N.Paragraph]="62060",k[N.PasteVariable]="62278",k[N.PathSearch]="62061",k[N.Path]="62062",k[N.Pause]="62063",k[N.People]="62064",k[N.Percentage]="62065",k[N.Person]="62066",k[N.PhoneCall]="62279",k[N.PhoneForward]="62280",k[N.Phone]="62067",k[N.PieChart]="62068",k[N.Pin]="62069",k[N.PivotTable]="62070",k[N.Pivot]="62071",k[N.Play]="62072",k[N.Playbook]="62244",k[N.Plus]="62073",k[N.PolygonFilter]="62074",k[N.Power]="62075",k[N.PredictiveAnalysis]="62076",k[N.Prescription]="62077",k[N.Presentation]="62078",k[N.Print]="62079",k[N.Projects]="62080",k[N.Properties]="62081",k[N.Property]="62082",k[N.PublishFunction]="62083",k[N.Pulse]="62084",k[N.Rain]="62085",k[N.Random]="62086",k[N.Record]="62087",k[N.RectHeight]="62245",k[N.RectWidth]="62246",k[N.Rectangle]="62241",k[N.Redo]="62088",k[N.Refresh]="62089",k[N.Regex]="62255",k[N.RegressionChart]="62090",k[N.RemoveColumnLeft]="62091",k[N.RemoveColumnRight]="62092",k[N.RemoveColumn]="62093",k[N.RemoveRowBottom]="62094",k[N.RemoveRowTop]="62095",k[N.Remove]="62096",k[N.Repeat]="62097",k[N.Reset]="62098",k[N.Resolve]="62099",k[N.Rig]="62100",k[N.RightJoin]="62101",k[N.Ring]="62102",k[N.RocketSlant]="62103",k[N.Rocket]="62104",k[N.RotateDocument]="62105",k[N.RotatePage]="62106",k[N.Route]="62107",k[N.Satellite]="62108",k[N.Saved]="62109",k[N.ScatterPlot]="62110",k[N.SearchAround]="62111",k[N.SearchTemplate]="62112",k[N.SearchText]="62113",k[N.Search]="62114",k[N.SegmentedControl]="62115",k[N.Select]="62116",k[N.Selection]="62117",k[N.SendBackward]="62293",k[N.SendMessage]="62118",k[N.SendToGraph]="62119",k[N.SendToMap]="62120",k[N.SendTo]="62121",k[N.Sensor]="62268",k[N.SeriesAdd]="62122",k[N.SeriesConfiguration]="62123",k[N.SeriesDerived]="62124",k[N.SeriesFiltered]="62125",k[N.SeriesSearch]="62126",k[N.Settings]="62127",k[N.Shapes]="62128",k[N.Share]="62129",k[N.SharedFilter]="62130",k[N.Shield]="62131",k[N.Ship]="62132",k[N.Shop]="62133",k[N.ShoppingCart]="62134",k[N.ShortenText]="62271",k[N.SignalSearch]="62135",k[N.SimCard]="62136",k[N.Slash]="62137",k[N.SmallCross]="62138",k[N.SmallInfoSign]="62260",k[N.SmallMinus]="62139",k[N.SmallPlus]="62140",k[N.SmallSquare]="62141",k[N.SmallTick]="62142",k[N.Snowflake]="62143",k[N.SoccerBall]="62288",k[N.SocialMedia]="62144",k[N.SortAlphabeticalDesc]="62145",k[N.SortAlphabetical]="62146",k[N.SortAsc]="62147",k[N.SortDesc]="62148",k[N.SortNumericalDesc]="62149",k[N.SortNumerical]="62150",k[N.Sort]="62151",k[N.SpellCheck]="62272",k[N.SplitColumns]="62152",k[N.SportsStadium]="62289",k[N.Square]="62153",k[N.StackedChart]="62154",k[N.StadiumGeometry]="62155",k[N.StarEmpty]="62156",k[N.Star]="62157",k[N.StepBackward]="62158",k[N.StepChart]="62159",k[N.StepForward]="62160",k[N.Stop]="62161",k[N.Stopwatch]="62162",k[N.Strikethrough]="62163",k[N.Style]="62164",k[N.Subscript]="62265",k[N.Superscript]="62266",k[N.SwapHorizontal]="62165",k[N.SwapVertical]="62166",k[N.Switch]="62167",k[N.SymbolCircle]="62168",k[N.SymbolCross]="62169",k[N.SymbolDiamond]="62170",k[N.SymbolRectangle]="62242",k[N.SymbolSquare]="62171",k[N.SymbolTriangleDown]="62172",k[N.SymbolTriangleUp]="62173",k[N.Syringe]="62174",k[N.Tag]="62175",k[N.TakeAction]="62176",k[N.Tank]="62177",k[N.Target]="62178",k[N.Taxi]="62179",k[N.Team]="62290",k[N.Temperature]="62180",k[N.TextHighlight]="62181",k[N.ThDerived]="62182",k[N.ThDisconnect]="62183",k[N.ThFiltered]="62184",k[N.ThList]="62185",k[N.Th]="62186",k[N.ThirdParty]="62187",k[N.ThumbsDown]="62188",k[N.ThumbsUp]="62189",k[N.TickCircle]="62190",k[N.Tick]="62191",k[N.Time]="62192",k[N.TimelineAreaChart]="62193",k[N.TimelineBarChart]="62194",k[N.TimelineEvents]="62195",k[N.TimelineLineChart]="62196",k[N.Tint]="62197",k[N.Torch]="62198",k[N.Tractor]="62199",k[N.Train]="62200",k[N.Translate]="62201",k[N.Trash]="62202",k[N.Tree]="62203",k[N.TrendingDown]="62204",k[N.TrendingUp]="62205",k[N.Trophy]="62287",k[N.Truck]="62206",k[N.TwoColumns]="62207",k[N.Unarchive]="62208",k[N.Underline]="62209",k[N.Undo]="62210",k[N.UngroupObjects]="62211",k[N.UnknownVehicle]="62212",k[N.Unlink]="62277",k[N.Unlock]="62213",k[N.Unpin]="62214",k[N.Unresolve]="62215",k[N.Updated]="62216",k[N.Upload]="62217",k[N.User]="62218",k[N.Variable]="62219",k[N.VerticalBarChartAsc]="62220",k[N.VerticalBarChartDesc]="62221",k[N.VerticalDistribution]="62222",k[N.VerticalInbetween]="62250",k[N.Video]="62223",k[N.Virus]="62224",k[N.VolumeDown]="62225",k[N.VolumeOff]="62226",k[N.VolumeUp]="62227",k[N.Walk]="62228",k[N.WarningSign]="62229",k[N.WaterfallChart]="62230",k[N.Waves]="62231",k[N.WidgetButton]="62232",k[N.WidgetFooter]="62233",k[N.WidgetHeader]="62234",k[N.Widget]="62235",k[N.Wind]="62236",k[N.Wrench]="62237",k[N.ZoomIn]="62238",k[N.ZoomOut]="62239",k[N.ZoomToFit]="62240";var MH={},OH={};for(var vE=0,Fz=Object.values(N);vE<Fz.length;vE++){var rw=Fz[vE];MH[Che(rw)]=rw,OH[Dhe(rw).toUpperCase()]=rw}var PH=de(de({},MH),OH),Ehe=new Set(Object.values(PH));function Ahe(t){return typeof NODE_ENV<"u"&&NODE_ENV===t}function Nhe(t,e){return Sp(this,void 0,void 0,function(){var n,r,i;return Dp(this,function(a){switch(a.label){case 0:return n=Ahe("development")&&typeof performance<"u",n&&(r=performance.now(),console.info("Started '".concat(t,"'..."))),[4,e()];case 1:return a.sent(),n&&(i=Math.round(performance.now()-r),console.info("Finished '".concat(t,"' in ").concat(i,"ms"))),[2]}})})}function khe(t){return Sp(this,void 0,void 0,function(){var e,n;return Dp(this,function(r){switch(r.label){case 0:return e=t.loader,n=e===void 0?np.defaultLoader:e,typeof n!="function"?[3,1]:[2,n];case 1:return n!=="all"?[3,3]:[4,Pz(()=>import("./allPathsLoader-98743f6e.js"),[])];case 2:return[2,r.sent().allPathsLoader];case 3:return[4,Pz(()=>import("./splitPathsBySizeLoader-0f3a5d3e.js"),[])];case 4:return[2,r.sent().splitPathsBySizeLoader]}})})}var wm=function(){function t(){this.defaultLoader="split-by-size",this.loadedIconPaths16=new Map,this.loadedIconPaths20=new Map}return t.setLoaderOptions=function(e){e.loader!==void 0&&(np.defaultLoader=e.loader)},t.load=function(e,n,r){return Sp(this,void 0,void 0,function(){var i=this;return Dp(this,function(a){switch(a.label){case 0:return Array.isArray(e)||(e=[e]),[4,Promise.all(e.map(function(o){return i.loadImpl(o,n,r)}))];case 1:return a.sent(),[2]}})})},t.loadAll=function(e){return Sp(this,void 0,void 0,function(){var n,r=this;return Dp(this,function(i){return n=Object.values(PH),Nhe("[Blueprint] loading all icons",function(){return Sp(r,void 0,void 0,function(){return Dp(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.load(n,Qe.STANDARD,e),this.load(n,Qe.LARGE,e)])];case 1:return a.sent(),[2]}})})}),[2]})})},t.getPaths=function(e,n){if(this.isValidIconName(e)){var r=n<Qe.LARGE?np.loadedIconPaths16:np.loadedIconPaths20;return r.get(e)}},t.loadImpl=function(e,n,r){return r===void 0&&(r={}),Sp(this,void 0,void 0,function(){var i,a,o,s,l;return Dp(this,function(u){switch(u.label){case 0:return this.isValidIconName(e)?(i=n<Qe.LARGE?np.loadedIconPaths16:np.loadedIconPaths20,i.has(e)?[2]:[4,khe(r)]):(console.error("[Blueprint] Unknown icon '".concat(e,"'")),[2]);case 1:a=u.sent(),u.label=2;case 2:return u.trys.push([2,4,,5]),o=n<Qe.LARGE?Qe.STANDARD:Qe.LARGE,[4,a(e,o)];case 3:return s=u.sent(),i.set(e,s),[3,5];case 4:return l=u.sent(),console.error("[Blueprint] Unable to load ".concat(n,"px icon '").concat(e,"'"),l),[3,5];case 5:return[2]}})})},t.isValidIconName=function(e){return Ehe.has(e)},t}(),np=new wm,Ihe="bp5",Lz="".concat(Ihe,"-icon"),zz=new Map;function Rhe(t){var e,n=(e=zz.get(t))!==null&&e!==void 0?e:0;return zz.set(t,n+1),"".concat(t,"-").concat(n)}var kl=L.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.color,a=t.htmlTitle,o=t.iconName,s=t.size,l=s===void 0?Qe.STANDARD:s,u=t.svgProps,c=t.tagName,f=c===void 0?"span":c,h=t.title,d=yn(t,["children","className","color","htmlTitle","iconName","size","svgProps","tagName","title"]),p=l>=Qe.LARGE,v=p?Qe.LARGE:Qe.STANDARD,m="0 0 ".concat(v," ").concat(v),g=Rhe("iconTitle"),y=de({fill:i,height:l,role:"img",viewBox:m,width:l},u);return f===null?L.createElement("svg",de({"aria-labelledby":h?g:void 0,"data-icon":o,ref:e},y,d,{className:Ze(r,u==null?void 0:u.className)}),h&&L.createElement("title",{id:g},h),n):L.createElement(f,de(de({"aria-hidden":h?void 0:!0},d),{className:Ze(Lz,"".concat(Lz,"-").concat(o),r),ref:e,title:a}),L.createElement("svg",de({"data-icon":o},y,{className:u==null?void 0:u.className}),h&&L.createElement("title",null,h),n))});kl.displayName="Blueprint5.SVGIconContainer";var DM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"caret-down",ref:e},t),L.createElement("path",{d:n?"M320 260C320 271 311 280 300 280H100C89 280 80 271 80 260C80 255.2 82 250.8 84.8 247.4L84.6 247.2L184.6 127.2L184.8 127.4C188.6 123 193.8 120 200 120S211.4 123 215.2 127.4L215.4 127.2L315.4 247.2L315.2 247.4C318 250.8 320 255.2 320 260z":"M240 190C240 195.6 235.6 200 230 200H90C84.4 200 80 195.6 80 190C80 187.4 81 185.2 82.6 183.4C82.6 183.4 82.6 183.4 82.6 183.4L152.6 103.4L152.6 103.4C154.4 101.4 157 100 160 100S165.6 101.4 167.4 103.4L167.4 103.4L237.4 183.4L237.4 183.4C239 185.2 240 187.4 240 190z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});DM.defaultProps={size:Qe.STANDARD};DM.displayName="Blueprint5.Icon.CaretDown";var _M=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"caret-right",ref:e},t),L.createElement("path",{d:n?"M280 200C280 206.2 277 211.4 272.6 215.2L272.8 215.4L152.8 315.4L152.6 315.2C149.2 318 144.8 320 140 320C129 320 120 311 120 300V100C120 89 129 80 140 80C144.8 80 149.2 82 152.6 84.8L152.8 84.6L272.8 184.6L272.6 184.8C277 188.6 280 193.8 280 200z":"M220 160C220 163 218.6 165.6 216.6 167.4L216.6 167.4L136.6 237.4L136.6 237.4C134.8 239 132.6 240 130 240C124.4 240 120 235.6 120 230V90C120 84.4 124.4 80 130 80C132.6 80 134.8 81 136.6 82.6C136.6 82.6 136.6 82.6 136.6 82.6L216.6 152.6L216.6 152.6C218.6 154.4 220 157 220 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});_M.defaultProps={size:Qe.STANDARD};_M.displayName="Blueprint5.Icon.CaretRight";var TM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"chevron-down",ref:e},t),L.createElement("path",{d:n?"M320 280C314.4000000000001 280 309.4000000000001 277.8 305.8 274.2L200 168.2L94.2 274.2C90.6 277.8 85.6 280 80 280C69 280 60 271 60 260C60 254.4 62.2 249.4 65.8 245.8L185.8 125.8C189.4 122.2 194.4 120 200 120S210.6 122.2 214.2 125.8L334.2000000000001 245.8C337.8 249.4 340 254.4 340 260C340 271 331 280 320 280z":"M240 220C234.4 220 229.4 217.8 225.8 214.2L160 148.2L94.2 214.2C90.6 217.8 85.6 220 80 220C69 220 60 211 60 200C60 194.4 62.2 189.4 65.8 185.8L145.8 105.8C149.4 102.2 154.4 100 160 100S170.6 102.2 174.2 105.8L254.2 185.8C257.8 189.4 260 194.4 260 200C260 211 251 220 240 220z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});TM.defaultProps={size:Qe.STANDARD};TM.displayName="Blueprint5.Icon.ChevronDown";var EM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"chevron-up",ref:e},t),L.createElement("path",{d:n?"M334.2000000000001 154.2L214.2 274.2000000000001C210.6 277.8 205.6 280 200 280S189.4 277.8 185.8 274.2L65.8 154.2C62.2 150.6 60 145.6 60 140C60 129 69 120 80 120C85.6 120 90.6 122.2 94.2 125.8L200 231.8L305.8 126C309.4000000000001 122.2 314.4000000000001 120 320 120C331 120 340 129 340 140C340 145.6 337.8 150.6 334.2000000000001 154.2z":"M254.2 134.2L174.2 214.2C170.6 217.8 165.6 220 160 220S149.4 217.8 145.8 214.2L65.8 134.2C62.2 130.6 60 125.6 60 120C60 109 69 100 80 100C85.6 100 90.6 102.2 94.2 105.8L160 171.8L225.8 106C229.4 102.2 234.4 100 240 100C251 100 260 109 260 120C260 125.6 257.8 130.6 254.2 134.2z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});EM.defaultProps={size:Qe.STANDARD};EM.displayName="Blueprint5.Icon.ChevronUp";var AM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"cross",ref:e},t),L.createElement("path",{d:n?"M228.2 200L314 285.8C317.8 289.4 320 294.4 320 300C320 311 311 320 300 320C294.4000000000001 320 289.4000000000001 317.8 285.8 314.2L200 228.2L114.2 314.2C110.6 317.8 105.6 320 100 320C89 320 80 311 80 300C80 294.4 82.2 289.4 85.8 285.8L171.8 200L86 114.2000000000001C82.2 110.6 80 105.6 80 100C80 89 89 80 100 80C105.6 80 110.6 82.2 114.2 85.8L200 171.8L285.8 86C289.4000000000001 82.2 294.4000000000001 80 300 80C311 80 320 89 320 100C320 105.6 317.8 110.6 314.2000000000001 114.2000000000001L228.2 200z":"M188.2 160L254 225.8C257.8 229.4 260 234.4 260 240C260 251 251 260 240 260C234.4 260 229.4 257.8 225.8 254.2L160 188.2L94.2 254.2C90.6 257.8 85.6 260 80 260C69 260 60 251 60 240C60 234.4 62.2 229.4 65.8 225.8L131.8 160L66 94.2C62.2 90.6 60 85.6 60 80C60 69 69 60 80 60C85.6 60 90.6 62.2 94.2 65.8L160 131.8L225.8 66C229.4 62.2 234.4 60 240 60C251 60 260 69 260 80C260 85.6 257.8 90.6 254.2 94.2L188.2 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});AM.defaultProps={size:Qe.STANDARD};AM.displayName="Blueprint5.Icon.Cross";var NM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"double-caret-vertical",ref:e},t),L.createElement("path",{d:n?"M100 220H300C311 220 320 229 320 240C320 244.8 318 249.2 315.2 252.6L315.4 252.8L215.4 372.8L215.2 372.6C211.4 377 206.2 380 200 380S188.6 377 184.8 372.6L184.6 372.8L84.6 252.8L84.8 252.6C82 249.2 80 244.8 80 240C80 229 89 220 100 220zM300 180H100C89 180 80 171 80 160C80 155.2 82 150.8 84.8 147.4L84.6 147.2L184.6 27.2L184.8 27.4C188.6 23 193.8 20 200 20S211.4 23 215.2 27.4L215.4 27.2L315.4 147.2L315.2 147.4C318 150.8 320 155.2 320 160C320 171 311 180 300 180z":"M100 180H220C231 180 240 189 240 200C240 205.6 237.8 210.6 234.2 214.2L174.2 274.2C170.6 277.8 165.6 280 160 280S149.4 277.8 145.8 274.2L85.8 214.2C82.2 210.6 80 205.6 80 200C80 189 89 180 100 180zM220 140H100C89 140 80 131 80 120C80 114.4 82.2 109.4 85.8 105.8L145.8 45.8C149.4 42.2 154.4 40 160 40S170.6 42.2 174.2 45.8L234.2 105.8C237.8 109.4 240 114.4 240 120C240 131 231 140 220 140z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});NM.defaultProps={size:Qe.STANDARD};NM.displayName="Blueprint5.Icon.DoubleCaretVertical";var zy=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"small-cross",ref:e},t),L.createElement("path",{d:n?"M228.2 200L294 265.8C297.8 269.4 300 274.4 300 280C300 291 291 300 280 300C274.4000000000001 300 269.4000000000001 297.8 265.8 294.2L200 228.2L134.2 294.2C130.6 297.8 125.6 300 120 300C109 300 100 291 100 280C100 274.4 102.2 269.4 105.8 265.8L171.8 200L106 134.2000000000001C102.2 130.6 100 125.6 100 120C100 109 109 100 120 100C125.6 100 130.6 102.2 134.2 105.8L200 171.8L265.8 106C269.4000000000001 102.2 274.4000000000001 100 280 100C291 100 300 109 300 120C300 125.6 297.8 130.6 294.2000000000001 134.2000000000001L228.2 200z":"M188.2 160L234 205.8C237.8 209.4 240 214.4 240 220C240 231 231 240 220 240C214.4 240 209.4 237.8 205.8 234.2L160 188.2L114.2 234.2C110.6 237.8 105.6 240 100 240C89 240 80 231 80 220C80 214.4 82.2 209.4 85.8 205.8L131.8 160L86 114.2C82.2 110.6 80 105.6 80 100C80 89 89 80 100 80C105.6 80 110.6 82.2 114.2 85.8L160 131.8L205.8 86C209.4 82.2 214.4 80 220 80C231 80 240 89 240 100C240 105.6 237.8 110.6 234.2 114.2L188.2 160z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});zy.defaultProps={size:Qe.STANDARD};zy.displayName="Blueprint5.Icon.SmallCross";var kM=L.forwardRef(function(t,e){var n=t.size>=Qe.LARGE,r=n?Qe.LARGE:Qe.STANDARD,i="".concat(-1*r/.05/2),a={transformOrigin:"center"};return L.createElement(kl,de({iconName:"small-tick",ref:e},t),L.createElement("path",{d:n?"M300 300C294.4000000000001 300 289.4000000000001 297.8 285.8 294.2L160 168.2L114.2 214.2C110.6 217.8 105.6 220 100 220C89 220 80 211 80 200C80 194.4 82.2 189.4 85.8 185.8L145.8 125.8C149.4 122.2 154.4 120 160 120S170.6 122.2 174.2 125.8L314.2000000000001 265.8C317.8 269.4 320 274.4 320 280C320 291 311 300 300 300z":"M240 220C234.4 220 229.4 217.8 225.8 214.2L140 128.2L94.2 174.2C90.6 177.8 85.6 180 80 180C69 180 60 171 60 160C60 154.4 62.2 149.4 65.8 145.8L125.8 85.8C129.4 82.2 134.4 80 140 80S150.6 82.2 154.2 85.8L254.2 185.8C257.8 189.4 260 194.4 260 200C260 211 251 220 240 220z",fillRule:"evenodd",transform:"scale(0.05, -0.05) translate(".concat(i,", ").concat(i,")"),style:a}))});kM.defaultProps={size:Qe.STANDARD};kM.displayName="Blueprint5.Icon.SmallTick";var ri=L.forwardRef(function(t,e){var n,r,i=t.autoLoad,a=t.className,o=t.color,s=t.icon,l=t.intent,u=t.tagName,c=t.svgProps,f=t.title,h=t.htmlTitle,d=yn(t,["autoLoad","className","color","icon","intent","tagName","svgProps","title","htmlTitle"]),p=(r=(n=t.iconSize)!==null&&n!==void 0?n:t.size)!==null&&r!==void 0?r:Qe.STANDARD,v=L.useState(function(){return typeof s=="string"?wm.getPaths(s,p):void 0}),m=v[0],g=v[1];if(L.useEffect(function(){var w=!1;if(typeof s=="string"){var b=wm.getPaths(s,p);b!==void 0?g(b):i?wm.load(s,p).then(function(){w||g(wm.getPaths(s,p))}).catch(function(C){console.error("[Blueprint] Icon '".concat(s,"' (").concat(p,"px) could not be loaded."),C)}):console.error("[Blueprint] Icon '".concat(s,"' (").concat(p,"px) is not loaded yet and autoLoad={false}, did you call Icons.load('").concat(s,"', ").concat(p,")?"))}return function(){w=!0}},[i,s,p]),s==null||typeof s=="boolean")return null;if(typeof s!="string")return s;if(m==null){var y=p===Qe.STANDARD?Mfe:p===Qe.LARGE?Ofe:void 0;return L.createElement(u,de(de({"aria-hidden":f?void 0:!0},Oc(d)),{className:Ze(TS,y,Lfe(s),ji(l),a),"data-icon":s,ref:e,title:h}))}else{var x=m.map(function(w,b){return L.createElement("path",{d:w,key:b,fillRule:"evenodd"})});return L.createElement(kl,de({children:x,className:Ze(ji(l),a),color:o,htmlTitle:h,iconName:s,ref:e,size:p,svgProps:c,tagName:u,title:f},Oc(d)))}});ri.defaultProps={autoLoad:!0,tagName:"span"};ri.displayName="".concat(gt,".Icon");var oh;(function(t){t[t.SMALL=20]="SMALL",t[t.STANDARD=50]="STANDARD",t[t.LARGE=100]="LARGE"})(oh||(oh={}));var Wu=45,Bz="M 50,50 m 0,-".concat(Wu," a ").concat(Wu,",").concat(Wu," 0 1 1 0,").concat(Wu*2," a ").concat(Wu,",").concat(Wu," 0 1 1 0,-").concat(Wu*2),Bg=280,$he=10,Mhe=4,Ohe=16,AS=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidUpdate=function(n){n.value!==this.props.value&&this.forceUpdate()},e.prototype.render=function(){var n,r=this.props,i=r.className,a=r.intent,o=r.value,s=r.tagName,l=s===void 0?"div":s,u=yn(r,["className","intent","value","tagName"]),c=this.getSize(),f=Ze(DS,ji(a),(n={},n[Afe]=o!=null,n),i),h=Math.min(Ohe,Mhe*oh.LARGE/c),d=Bg-Bg*(o==null?.25:SM(o,0,1));return L.createElement(l,de({"aria-label":"loading","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":o===void 0?void 0:o*100,className:f,role:"progressbar"},u),L.createElement(l,{className:Tfe},L.createElement("svg",{width:c,height:c,strokeWidth:h.toFixed(2),viewBox:this.getViewBox(h)},L.createElement("path",{className:Nfe,d:Bz}),L.createElement("path",{className:Efe,d:Bz,pathLength:Bg,strokeDasharray:"".concat(Bg," ").concat(Bg),strokeDashoffset:d}))))},e.prototype.validateProps=function(n){var r=n.className,i=r===void 0?"":r,a=n.size;a!=null&&(i.indexOf(dv)>=0||i.indexOf(ks)>=0)&&console.warn(lhe)},e.prototype.getSize=function(){var n=this.props,r=n.className,i=r===void 0?"":r,a=n.size;return a==null?i.indexOf(dv)>=0?oh.SMALL:i.indexOf(ks)>=0?oh.LARGE:oh.STANDARD:Math.max($he,a)},e.prototype.getViewBox=function(n){var r=Wu+n/2,i=(50-r).toFixed(2),a=(r*2).toFixed(2);return"".concat(i," ").concat(i," ").concat(a," ").concat(a)},e.displayName="".concat(gt,".Spinner"),e}(lr),By=L.forwardRef(function(t,e){var n,r=t.children,i=t.tagName,a=i===void 0?"div":i,o=t.title,s=t.className,l=t.ellipsize,u=yn(t,["children","tagName","title","className","ellipsize"]),c=L.useRef(),f=L.useMemo(function(){return Ly(c,e)},[e]),h=L.useState(""),d=h[0],p=h[1],v=L.useState(),m=v[0],g=v[1];return L.useLayoutEffect(function(){var y;((y=c.current)===null||y===void 0?void 0:y.textContent)!=null&&(g(l&&c.current.scrollWidth>c.current.clientWidth),p(c.current.textContent))},[c,r,l]),L.createElement(a,de(de({},u),{className:Ze((n={},n[fce]=l,n),s),ref:f,title:o??(m?d:void 0)}),r)});By.defaultProps={ellipsize:!1};By.displayName="".concat(gt,".Text");var Wt=L.forwardRef(function(t,e){var n=LH(t,e);return L.createElement("button",de({type:"button"},Oc(t),n),zH(t))});Wt.displayName="".concat(gt,".Button");var FH=L.forwardRef(function(t,e){var n=t.href,r=t.tabIndex,i=r===void 0?0:r,a=LH(t,e);return L.createElement("a",de({role:"button"},Oc(t),a,{"aria-disabled":a.disabled,href:a.disabled?void 0:n,tabIndex:a.disabled?-1:i}),zH(t))});FH.displayName="".concat(gt,".AnchorButton");function LH(t,e){var n,r=t.active,i=r===void 0?!1:r,a=t.alignText,o=t.fill,s=t.large,l=t.loading,u=l===void 0?!1:l,c=t.minimal,f=t.onBlur,h=t.onKeyDown,d=t.onKeyUp,p=t.outlined,v=t.small,m=t.tabIndex,g=t.disabled||u,y=L.useState(),x=y[0],w=y[1],b=L.useState(!1),C=b[0],S=b[1],D=L.useRef(null),_=L.useCallback(function(R){C&&S(!1),f==null||f(R)},[C,f]),T=L.useCallback(function(R){M0(R)&&(R.preventDefault(),R.key!==x&&S(!0)),w(R.key),h==null||h(R)},[x,h]),E=L.useCallback(function(R){var $;M0(R)&&(S(!1),($=D.current)===null||$===void 0||$.click()),w(void 0),d==null||d(R)},[d]),A=Ze(Oy,(n={},n[R0]=!g&&(i||C),n[fd]=g,n[Ns]=o,n[ks]=s,n[sce]=u,n[My]=c,n[lce]=p,n[dv]=v,n),ES(a),ji(t.intent),t.className);return{className:A,disabled:g,onBlur:_,onClick:g?void 0:t.onClick,onFocus:g?void 0:t.onFocus,onKeyDown:T,onKeyUp:E,ref:Ly(D,e),tabIndex:g?-1:m}}function zH(t){var e=t.children,n=t.ellipsizeText,r=t.icon,i=t.loading,a=t.rightIcon,o=t.text,s=t.textClassName,l=!CC(o)||!CC(e);return L.createElement(L.Fragment,null,i&&L.createElement(AS,{key:"loading",className:gce,size:oh.SMALL}),L.createElement(ri,{key:"leftIcon",icon:r}),l&&L.createElement(By,{key:"text",className:Ze(mce,s),ellipsize:n,tagName:"span"},o,e),L.createElement(ri,{key:"rightIcon",icon:a}))}function Uo(t,e){return L.forwardRef(function(n,r){var i=n.className,a=n.children,o=yn(n,["className","children"]);return L.createElement(t,de(de({},o),{className:Ze(e,i),ref:r}),a)})}Uo("h1",tg);Uo("h2",tg);Uo("h3",tg);var BH=Uo("h4",tg);Uo("h5",tg);var VH=Uo("h6",tg);Uo("blockquote",hce);Uo("code",dce);Uo("pre",pce);Uo("label",CM);Uo("ol",wH);Uo("ul",wH);function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}function IM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lk(t,e){return Lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Lk(t,e)}function NS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Lk(t,e)}var WH={exports:{}},Phe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Fhe=Phe,Lhe=Fhe;function UH(){}function GH(){}GH.resetWarningCache=UH;var zhe=function(){function t(r,i,a,o,s,l){if(l!==Lhe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:GH,resetWarningCache:UH};return n.PropTypes=n,n};WH.exports=zhe();var Vy=WH.exports;function Bhe(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Vhe(t,e){t.classList?t.classList.add(e):Bhe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Vz(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Whe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Vz(t.className,e):t.setAttribute("class",Vz(t.className&&t.className.baseVal||"",e))}const Wz={disabled:!1},DC=An.createContext(null);var HH=function(e){return e.scrollTop},bm="unmounted",Hf="exited",jf="entering",rp="entered",zk="exiting",Cu=function(t){NS(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var o=i,s=o&&!o.isMounting?r.enter:r.appear,l;return a.appearStatus=null,r.in?s?(l=Hf,a.appearStatus=jf):l=rp:r.unmountOnExit||r.mountOnEnter?l=bm:l=Hf,a.state={status:l},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var o=i.in;return o&&a.status===bm?{status:Hf}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==jf&&o!==rp&&(a=jf):(o===jf||o===rp)&&(a=zk)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,o,s;return a=o=s=i,i!=null&&typeof i!="number"&&(a=i.exit,o=i.enter,s=i.appear!==void 0?i.appear:o),{exit:a,enter:o,appear:s}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===jf){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:nw.findDOMNode(this);o&&HH(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Hf&&this.setState({status:bm})},n.performEnter=function(i){var a=this,o=this.props.enter,s=this.context?this.context.isMounting:i,l=this.props.nodeRef?[s]:[nw.findDOMNode(this),s],u=l[0],c=l[1],f=this.getTimeouts(),h=s?f.appear:f.enter;if(!i&&!o||Wz.disabled){this.safeSetState({status:rp},function(){a.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:jf},function(){a.props.onEntering(u,c),a.onTransitionEnd(h,function(){a.safeSetState({status:rp},function(){a.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,a=this.props.exit,o=this.getTimeouts(),s=this.props.nodeRef?void 0:nw.findDOMNode(this);if(!a||Wz.disabled){this.safeSetState({status:Hf},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:zk},function(){i.props.onExiting(s),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Hf},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,o=!0;return this.nextCallback=function(s){o&&(o=!1,a.nextCallback=null,i(s))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:nw.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!o||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===bm)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=IM(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return An.createElement(DC.Provider,{value:null},typeof o=="function"?o(i,s):An.cloneElement(An.Children.only(o),s))},e}(An.Component);Cu.contextType=DC;Cu.propTypes={};function Rd(){}Cu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Rd,onEntering:Rd,onEntered:Rd,onExit:Rd,onExiting:Rd,onExited:Rd};Cu.UNMOUNTED=bm;Cu.EXITED=Hf;Cu.ENTERING=jf;Cu.ENTERED=rp;Cu.EXITING=zk;const Uhe=Cu;var Ghe=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return Vhe(e,r)})},gE=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return Whe(e,r)})},RM=function(t){NS(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(s,l){var u=r.resolveArguments(s,l),c=u[0],f=u[1];r.removeClasses(c,"exit"),r.addClass(c,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(s,l)},r.onEntering=function(s,l){var u=r.resolveArguments(s,l),c=u[0],f=u[1],h=f?"appear":"enter";r.addClass(c,h,"active"),r.props.onEntering&&r.props.onEntering(s,l)},r.onEntered=function(s,l){var u=r.resolveArguments(s,l),c=u[0],f=u[1],h=f?"appear":"enter";r.removeClasses(c,h),r.addClass(c,h,"done"),r.props.onEntered&&r.props.onEntered(s,l)},r.onExit=function(s){var l=r.resolveArguments(s),u=l[0];r.removeClasses(u,"appear"),r.removeClasses(u,"enter"),r.addClass(u,"exit","base"),r.props.onExit&&r.props.onExit(s)},r.onExiting=function(s){var l=r.resolveArguments(s),u=l[0];r.addClass(u,"exit","active"),r.props.onExiting&&r.props.onExiting(s)},r.onExited=function(s){var l=r.resolveArguments(s),u=l[0];r.removeClasses(u,"exit"),r.addClass(u,"exit","done"),r.props.onExited&&r.props.onExited(s)},r.resolveArguments=function(s,l){return r.props.nodeRef?[r.props.nodeRef.current,s]:[s,l]},r.getClassNames=function(s){var l=r.props.classNames,u=typeof l=="string",c=u&&l?l+"-":"",f=u?""+c+s:l[s],h=u?f+"-active":l[s+"Active"],d=u?f+"-done":l[s+"Done"];return{baseClassName:f,activeClassName:h,doneClassName:d}},r}var n=e.prototype;return n.addClass=function(i,a,o){var s=this.getClassNames(a)[o+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;a==="appear"&&o==="done"&&u&&(s+=" "+u),o==="active"&&i&&HH(i),s&&(this.appliedClasses[a][o]=s,Ghe(i,s))},n.removeClasses=function(i,a){var o=this.appliedClasses[a],s=o.base,l=o.active,u=o.done;this.appliedClasses[a]={},s&&gE(i,s),l&&gE(i,l),u&&gE(i,u)},n.render=function(){var i=this.props;i.classNames;var a=IM(i,["classNames"]);return An.createElement(Uhe,Lh({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(An.Component);RM.defaultProps={classNames:""};RM.propTypes={};const mE=RM;function Bk(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $M(t,e){var n=function(a){return e&&L.isValidElement(a)?e(a):a},r=Object.create(null);return t&&L.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Hhe(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),i=[];for(var a in t)a in e?i.length&&(r[a]=i,i=[]):i.push(a);var o,s={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];s[r[l][o]]=n(u)}s[l]=n(l)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s}function sh(t,e,n){return n[e]!=null?n[e]:t.props[e]}function jhe(t,e){return $M(t.children,function(n){return L.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:sh(n,"appear",t),enter:sh(n,"enter",t),exit:sh(n,"exit",t)})})}function qhe(t,e,n){var r=$M(t.children),i=Hhe(e,r);return Object.keys(i).forEach(function(a){var o=i[a];if(L.isValidElement(o)){var s=a in e,l=a in r,u=e[a],c=L.isValidElement(u)&&!u.props.in;l&&(!s||c)?i[a]=L.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:sh(o,"exit",t),enter:sh(o,"enter",t)}):!l&&s&&!c?i[a]=L.cloneElement(o,{in:!1}):l&&s&&L.isValidElement(u)&&(i[a]=L.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:sh(o,"exit",t),enter:sh(o,"enter",t)}))}}),i}var Khe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Xhe={component:"div",childFactory:function(e){return e}},MM=function(t){NS(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var o=a.handleExited.bind(Bk(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,a){var o=a.children,s=a.handleExited,l=a.firstRender;return{children:l?jhe(i,s):qhe(i,o,s),firstRender:!1}},n.handleExited=function(i,a){var o=$M(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(s){var l=Lh({},s.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,a=i.component,o=i.childFactory,s=IM(i,["component","childFactory"]),l=this.state.contextValue,u=Khe(this.state.children).map(o);return delete s.appear,delete s.enter,delete s.exit,a===null?An.createElement(DC.Provider,{value:l},u):An.createElement(DC.Provider,{value:l},An.createElement(a,s,u))},e}(An.Component);MM.propTypes={};MM.defaultProps=Xhe;const Yhe=MM;var Zhe=L.createContext({}),Qhe={blueprintPortalClassName:function(t,e){if(t[e]!=null&&typeof t[e]!="string")return new Error(ahe)}};function kS(t,e){var n,r=t.className,i=t.stopPropagationEvents,a=t.container,o=t.onChildrenMount,s=t.children;e===void 0&&(e={});var l=L.useContext(Zhe),u=(n=a??l.portalContainer)!==null&&n!==void 0?n:typeof document<"u"?document.body:void 0,c=L.useState(),f=c[0],h=c[1],d=L.useCallback(function(){var p=document.createElement("div");p.classList.add(Dfe),iw(p.classList,r),iw(p.classList,l.portalClassName),Uz(p,i);var v=e.blueprintPortalClassName;return v!=null&&v!==""&&(console.error(ohe),iw(p.classList,v)),p},[r,l.portalClassName,e.blueprintPortalClassName,i]);return L.useEffect(function(){if(u!=null){var p=d();return u.appendChild(p),h(p),function(){Gz(p,i),p.remove(),h(void 0)}}},[u,d,i]),L.useEffect(function(){f!=null&&(o==null||o())},[f,o]),L.useEffect(function(){if(f!=null)return iw(f.classList,r),function(){return Jhe(f.classList,r)}},[r,f]),L.useEffect(function(){if(f!=null)return Uz(f,i),function(){return Gz(f,i)}},[f,i]),typeof document>"u"||f==null?null:hu.createPortal(s,f)}kS.displayName="".concat(gt,".Portal");kS.contextTypes=Qhe;function Jhe(t,e){e!=null&&e!==""&&t.remove.apply(t,e.split(" "))}function iw(t,e){e!=null&&e!==""&&t.add.apply(t,e.split(" "))}function Uz(t,e){e==null||e.forEach(function(n){return t.addEventListener(n,jH)})}function Gz(t,e){e==null||e.forEach(function(n){return t.removeEventListener(n,jH)})}function jH(t){t.stopPropagation()}var IS=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isAutoFocusing=!1,n.state={hasEverOpened:n.props.isOpen},n.containerElement=L.createRef(),n.startFocusTrapElement=L.createRef(),n.endFocusTrapElement=L.createRef(),n.maybeRenderChild=function(r){if(_p(r)&&(r=r()),r==null)return null;var i=n.props.enforceFocus||n.props.autoFocus?0:void 0,a=typeof r=="object"?L.cloneElement(r,{className:Ze(r.props.className,Tz),tabIndex:i}):L.createElement("span",{className:Tz,tabIndex:i},r),o=n.props,s=o.onOpening,l=o.onOpened,u=o.onClosing,c=o.transitionDuration,f=o.transitionName;return L.createElement(mE,{classNames:f,onEntering:s,onEntered:l,onExiting:u,onExited:n.handleTransitionExited,timeout:c,addEndListener:n.handleTransitionAddEnd},a)},n.handleStartFocusTrapElementFocus=function(r){var i,a;!n.props.enforceFocus||n.isAutoFocusing||r.relatedTarget!=null&&(!((i=n.containerElement.current)===null||i===void 0)&&i.contains(r.relatedTarget))&&r.relatedTarget!==n.endFocusTrapElement.current&&((a=n.endFocusTrapElement.current)===null||a===void 0||a.focus({preventScroll:!0}))},n.handleStartFocusTrapElementKeyDown=function(r){var i;if(n.props.enforceFocus&&r.shiftKey&&r.key==="Tab"){var a=n.getKeyboardFocusableElements().pop();a!=null?a.focus():(i=n.endFocusTrapElement.current)===null||i===void 0||i.focus({preventScroll:!0})}},n.handleEndFocusTrapElementFocus=function(r){var i,a,o;if(r.relatedTarget!=null&&(!((i=n.containerElement.current)===null||i===void 0)&&i.contains(r.relatedTarget))&&r.relatedTarget!==n.startFocusTrapElement.current){var s=n.getKeyboardFocusableElements().shift();!n.isAutoFocusing&&s!=null&&s!==r.relatedTarget?s.focus():(a=n.startFocusTrapElement.current)===null||a===void 0||a.focus({preventScroll:!0})}else{var l=n.getKeyboardFocusableElements().pop();l!=null?l.focus():(o=n.startFocusTrapElement.current)===null||o===void 0||o.focus({preventScroll:!0})}},n.handleTransitionExited=function(r){var i,a;n.props.shouldReturnFocusOnClose&&n.lastActiveElementBeforeOpened instanceof HTMLElement&&n.lastActiveElementBeforeOpened.focus(),(a=(i=n.props).onClosed)===null||a===void 0||a.call(i,r)},n.handleBackdropMouseDown=function(r){var i,a=n.props,o=a.backdropProps,s=a.canOutsideClickClose,l=a.enforceFocus,u=a.onClose;s&&(u==null||u(r)),l&&n.bringFocusInsideOverlay(),(i=o==null?void 0:o.onMouseDown)===null||i===void 0||i.call(o,r)},n.handleDocumentClick=function(r){var i=n.props,a=i.canOutsideClickClose,o=i.isOpen,s=i.onClose,l=r.composed?r.composedPath()[0]:r.target,u=e.openStack.indexOf(n),c=e.openStack.slice(u).some(function(f){var h,d=f.containerElement;return((h=d.current)===null||h===void 0?void 0:h.contains(l))&&!d.current.isSameNode(l)});o&&!c&&a&&(s==null||s(r))},n.handleDocumentFocus=function(r){var i=r.composed?r.composedPath()[0]:r.target;n.props.enforceFocus&&n.containerElement.current!=null&&i instanceof Node&&!n.containerElement.current.contains(i)&&(r.preventDefault(),r.stopImmediatePropagation(),n.bringFocusInsideOverlay())},n.handleKeyDown=function(r){var i=n.props,a=i.canEscapeKeyClose,o=i.onClose;r.key==="Escape"&&a&&(o==null||o(r),r.stopPropagation(),r.preventDefault())},n.handleTransitionAddEnd=function(){},n}return e.getDerivedStateFromProps=function(n){var r=n.isOpen;return r?{hasEverOpened:r}:null},e.prototype.render=function(){var n,r;if(this.props.lazy&&!this.state.hasEverOpened)return null;var i=this.props,a=i.autoFocus,o=i.children,s=i.className,l=i.enforceFocus,u=i.usePortal,c=i.isOpen,f=c?(r=L.Children.map(o,this.maybeRenderChild))!==null&&r!==void 0?r:[]:[],h=this.maybeRenderBackdrop();h!==null&&f.unshift(h),c&&(a||l)&&f.length>0&&(f.unshift(this.renderDummyElement("__start",{className:Ez,onFocus:this.handleStartFocusTrapElementFocus,onKeyDown:this.handleStartFocusTrapElementKeyDown,ref:this.startFocusTrapElement})),l&&f.push(this.renderDummyElement("__end",{className:Az,onFocus:this.handleEndFocusTrapElementFocus,ref:this.endFocusTrapElement})));var d=Ze(xl,(n={},n[fE]=c,n[lfe]=!u,n),s),p=L.createElement("div",{"aria-live":"polite",className:d,onKeyDown:this.handleKeyDown,ref:this.containerElement},L.createElement(Yhe,{appear:!0,component:null},f));return u?L.createElement(kS,{className:this.props.portalClassName,container:this.props.portalContainer,stopPropagationEvents:this.props.portalStopPropagationEvents},p):p},e.prototype.componentDidMount=function(){this.props.isOpen&&this.overlayWillOpen()},e.prototype.componentDidUpdate=function(n){n.isOpen&&!this.props.isOpen?this.overlayWillClose():!n.isOpen&&this.props.isOpen&&this.overlayWillOpen()},e.prototype.componentWillUnmount=function(){this.overlayWillClose()},e.prototype.bringFocusInsideOverlay=function(){var n=this;return this.requestAnimationFrame(function(){var r,i=Nz(n.containerElement.current);if(!(n.containerElement.current==null||i==null||!n.props.isOpen)){var a=n.containerElement.current,o=!a.contains(i);o&&((r=n.startFocusTrapElement.current)===null||r===void 0||r.focus({preventScroll:!0}),n.isAutoFocusing=!1)}})},e.prototype.maybeRenderBackdrop=function(){var n=this.props,r=n.backdropClassName,i=n.backdropProps,a=n.hasBackdrop,o=n.isOpen,s=n.transitionDuration,l=n.transitionName;return a&&o?L.createElement(mE,{classNames:l,key:"__backdrop",timeout:s,addEndListener:this.handleTransitionAddEnd},L.createElement("div",de({},i,{className:Ze(ofe,r,i==null?void 0:i.className),onMouseDown:this.handleBackdropMouseDown}))):null},e.prototype.renderDummyElement=function(n,r){var i=this.props,a=i.transitionDuration,o=i.transitionName;return L.createElement(mE,{classNames:o,key:n,addEndListener:this.handleTransitionAddEnd,timeout:a,unmountOnExit:!0},L.createElement("div",de({tabIndex:0},r)))},e.prototype.getKeyboardFocusableElements=function(){var n=this.containerElement.current!==null?Array.from(this.containerElement.current.querySelectorAll(['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","))):[];return n.filter(function(r){return!r.classList.contains(Ez)&&!r.classList.contains(Az)})},e.prototype.overlayWillClose=function(){document.removeEventListener("focus",this.handleDocumentFocus,!0),document.removeEventListener("mousedown",this.handleDocumentClick);var n=e.openStack,r=n.indexOf(this);if(r!==-1){if(n.splice(r,1),n.length>0){var i=e.getLastOpened();i.props.autoFocus&&i.props.enforceFocus&&(i.bringFocusInsideOverlay(),document.addEventListener("focus",i.handleDocumentFocus,!0))}n.filter(function(a){return a.props.usePortal&&a.props.hasBackdrop}).length===0&&document.body.classList.remove(fE)}},e.prototype.overlayWillOpen=function(){var n=e.getLastOpened,r=e.openStack;r.length>0&&document.removeEventListener("focus",n().handleDocumentFocus,!0),r.push(this),this.props.autoFocus&&(this.isAutoFocusing=!0,this.bringFocusInsideOverlay()),this.props.enforceFocus&&document.addEventListener("focus",this.handleDocumentFocus,!0),this.props.canOutsideClickClose&&!this.props.hasBackdrop&&document.addEventListener("mousedown",this.handleDocumentClick),this.props.hasBackdrop&&this.props.usePortal&&document.body.classList.add(fE),this.lastActiveElementBeforeOpened=Nz(this.containerElement.current)},e.displayName="".concat(gt,".Overlay"),e.defaultProps={autoFocus:!0,backdropProps:{},canEscapeKeyClose:!0,canOutsideClickClose:!0,enforceFocus:!0,hasBackdrop:!0,isOpen:!1,lazy:!0,shouldReturnFocusOnClose:!0,transitionDuration:300,transitionName:xl,usePortal:!0},e.openStack=[],e.getLastOpened=function(){return e.openStack[e.openStack.length-1]},e}(lr),ede=function(t){Ln(e,t);function e(n){var r=t.call(this,n)||this,i=kH("bp-dialog");return r.titleId="title-".concat(i),r}return e.prototype.render=function(){return L.createElement(IS,de({},this.props,{className:ufe,hasBackdrop:!0}),L.createElement("div",{className:Tce,ref:this.props.containerRef},L.createElement("div",{className:Ze(Nl,this.props.className),role:"dialog","aria-labelledby":this.props["aria-labelledby"]||(this.props.title?this.titleId:void 0),"aria-describedby":this.props["aria-describedby"],style:this.props.style},this.maybeRenderHeader(),this.props.children)))},e.prototype.validateProps=function(n){n.title==null&&(n.icon!=null&&console.warn(AH),n.isCloseButtonShown!=null&&console.warn(NH))},e.prototype.maybeRenderCloseButton=function(){if(this.props.isCloseButtonShown!==!1)return L.createElement(Wt,{"aria-label":"Close",className:SH,icon:L.createElement(zy,{size:Qe.STANDARD}),minimal:!0,onClick:this.props.onClose})},e.prototype.maybeRenderHeader=function(){var n=this.props,r=n.icon,i=n.title;if(i!=null)return L.createElement("div",{className:Ece},L.createElement(ri,{icon:r,size:Qe.STANDARD,"aria-hidden":!0,tabIndex:-1}),L.createElement(VH,{id:this.titleId},i),this.maybeRenderCloseButton())},e.defaultProps={canOutsideClickClose:!0,isOpen:!1},e.displayName="".concat(gt,".Dialog"),e}(lr),Su=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r=this.props,i=r.className,a=r.children,o=r.large,s=r.small,l=r.ulRef,u=yn(r,["className","children","large","small","ulRef"]),c=Ze(i,SS,(n={},n[ks]=o,n[dv]=s,n));return L.createElement("ul",de({role:"menu"},u,{className:c,ref:l}),a)},e.displayName="".concat(gt,".Menu"),e}(lr),qH=L.createContext(),KH=L.createContext();function tde(t){var e=t.children,n=L.useState(null),r=n[0],i=n[1],a=L.useRef(!1);L.useEffect(function(){return function(){a.current=!0}},[]);var o=L.useCallback(function(s){a.current||i(s)},[]);return L.createElement(qH.Provider,{value:r},L.createElement(KH.Provider,{value:o},e))}var XH=function(e){return Array.isArray(e)?e[0]:e},YH=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(void 0,r)}},Vk=function(e,n){if(typeof e=="function")return YH(e,n);e!=null&&(e.current=n)},Hz=function(e){return e.reduce(function(n,r){var i=r[0],a=r[1];return n[i]=a,n},{})},jz=typeof window<"u"&&window.document&&window.document.createElement?L.useLayoutEffect:L.useEffect,ya="top",Oo="bottom",Po="right",xa="left",OM="auto",Wy=[ya,Oo,Po,xa],pv="start",O0="end",nde="clippingParents",ZH="viewport",Vg="popper",rde="reference",qz=Wy.reduce(function(t,e){return t.concat([e+"-"+pv,e+"-"+O0])},[]),QH=[].concat(Wy,[OM]).reduce(function(t,e){return t.concat([e,e+"-"+pv,e+"-"+O0])},[]),ide="beforeRead",ade="read",ode="afterRead",sde="beforeMain",lde="main",ude="afterMain",cde="beforeWrite",fde="write",hde="afterWrite",dde=[ide,ade,ode,sde,lde,ude,cde,fde,hde];function wl(t){return t?(t.nodeName||"").toLowerCase():null}function qa(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function zh(t){var e=qa(t).Element;return t instanceof e||t instanceof Element}function Io(t){var e=qa(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function PM(t){if(typeof ShadowRoot>"u")return!1;var e=qa(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function pde(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},a=e.elements[n];!Io(a)||!wl(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function vde(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=o.reduce(function(l,u){return l[u]="",l},{});!Io(i)||!wl(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const gde={name:"applyStyles",enabled:!0,phase:"write",fn:pde,effect:vde,requires:["computeStyles"]};function cl(t){return t.split("-")[0]}var wh=Math.max,_C=Math.min,vv=Math.round;function Wk(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function JH(){return!/^((?!chrome|android).)*safari/i.test(Wk())}function gv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,a=1;e&&Io(t)&&(i=t.offsetWidth>0&&vv(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&vv(r.height)/t.offsetHeight||1);var o=zh(t)?qa(t):window,s=o.visualViewport,l=!JH()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/a,f=r.width/i,h=r.height/a;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u,x:u,y:c}}function FM(t){var e=gv(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ej(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&PM(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function du(t){return qa(t).getComputedStyle(t)}function mde(t){return["table","td","th"].indexOf(wl(t))>=0}function tf(t){return((zh(t)?t.ownerDocument:t.document)||window.document).documentElement}function RS(t){return wl(t)==="html"?t:t.assignedSlot||t.parentNode||(PM(t)?t.host:null)||tf(t)}function Kz(t){return!Io(t)||du(t).position==="fixed"?null:t.offsetParent}function yde(t){var e=/firefox/i.test(Wk()),n=/Trident/i.test(Wk());if(n&&Io(t)){var r=du(t);if(r.position==="fixed")return null}var i=RS(t);for(PM(i)&&(i=i.host);Io(i)&&["html","body"].indexOf(wl(i))<0;){var a=du(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Uy(t){for(var e=qa(t),n=Kz(t);n&&mde(n)&&du(n).position==="static";)n=Kz(n);return n&&(wl(n)==="html"||wl(n)==="body"&&du(n).position==="static")?e:n||yde(t)||e}function LM(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Km(t,e,n){return wh(t,_C(e,n))}function xde(t,e,n){var r=Km(t,e,n);return r>n?n:r}function tj(){return{top:0,right:0,bottom:0,left:0}}function nj(t){return Object.assign({},tj(),t)}function rj(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var wde=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,nj(typeof e!="number"?e:rj(e,Wy))};function bde(t){var e,n=t.state,r=t.name,i=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=cl(n.placement),l=LM(s),u=[xa,Po].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var f=wde(i.padding,n),h=FM(a),d=l==="y"?ya:xa,p=l==="y"?Oo:Po,v=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=Uy(a),y=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,x=v/2-m/2,w=f[d],b=y-h[c]-f[p],C=y/2-h[c]/2+x,S=Km(w,C,b),D=l;n.modifiersData[r]=(e={},e[D]=S,e.centerOffset=S-C,e)}}function Cde(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||ej(e.elements.popper,i)&&(e.elements.arrow=i))}const Sde={name:"arrow",enabled:!0,phase:"main",fn:bde,effect:Cde,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mv(t){return t.split("-")[1]}var Dde={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _de(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:vv(n*i)/i||0,y:vv(r*i)/i||0}}function Xz(t){var e,n=t.popper,r=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,v=p===void 0?0:p,m=typeof c=="function"?c({x:d,y:v}):{x:d,y:v};d=m.x,v=m.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),x=xa,w=ya,b=window;if(u){var C=Uy(n),S="clientHeight",D="clientWidth";if(C===qa(n)&&(C=tf(n),du(C).position!=="static"&&s==="absolute"&&(S="scrollHeight",D="scrollWidth")),C=C,i===ya||(i===xa||i===Po)&&a===O0){w=Oo;var _=f&&C===b&&b.visualViewport?b.visualViewport.height:C[S];v-=_-r.height,v*=l?1:-1}if(i===xa||(i===ya||i===Oo)&&a===O0){x=Po;var T=f&&C===b&&b.visualViewport?b.visualViewport.width:C[D];d-=T-r.width,d*=l?1:-1}}var E=Object.assign({position:s},u&&Dde),A=c===!0?_de({x:d,y:v},qa(n)):{x:d,y:v};if(d=A.x,v=A.y,l){var R;return Object.assign({},E,(R={},R[w]=y?"0":"",R[x]=g?"0":"",R.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",R))}return Object.assign({},E,(e={},e[w]=y?v+"px":"",e[x]=g?d+"px":"",e.transform="",e))}function Tde(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:cl(e.placement),variation:mv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Xz(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Xz(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ede={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tde,data:{}};var aw={passive:!0};function Ade(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,l=qa(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",n.update,aw)}),s&&l.addEventListener("resize",n.update,aw),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",n.update,aw)}),s&&l.removeEventListener("resize",n.update,aw)}}const Nde={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ade,data:{}};var kde={left:"right",right:"left",bottom:"top",top:"bottom"};function Db(t){return t.replace(/left|right|bottom|top/g,function(e){return kde[e]})}var Ide={start:"end",end:"start"};function Yz(t){return t.replace(/start|end/g,function(e){return Ide[e]})}function zM(t){var e=qa(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function BM(t){return gv(tf(t)).left+zM(t).scrollLeft}function Rde(t,e){var n=qa(t),r=tf(t),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var u=JH();(u||!u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+BM(t),y:l}}function $de(t){var e,n=tf(t),r=zM(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=wh(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=wh(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+BM(t),l=-r.scrollTop;return du(i||n).direction==="rtl"&&(s+=wh(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function VM(t){var e=du(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ij(t){return["html","body","#document"].indexOf(wl(t))>=0?t.ownerDocument.body:Io(t)&&VM(t)?t:ij(RS(t))}function Xm(t,e){var n;e===void 0&&(e=[]);var r=ij(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),a=qa(r),o=i?[a].concat(a.visualViewport||[],VM(r)?r:[]):r,s=e.concat(o);return i?s:s.concat(Xm(RS(o)))}function Uk(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Mde(t,e){var n=gv(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Zz(t,e,n){return e===ZH?Uk(Rde(t,n)):zh(e)?Mde(e,n):Uk($de(tf(t)))}function Ode(t){var e=Xm(RS(t)),n=["absolute","fixed"].indexOf(du(t).position)>=0,r=n&&Io(t)?Uy(t):t;return zh(r)?e.filter(function(i){return zh(i)&&ej(i,r)&&wl(i)!=="body"}):[]}function Pde(t,e,n,r){var i=e==="clippingParents"?Ode(t):[].concat(e),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(l,u){var c=Zz(t,u,r);return l.top=wh(c.top,l.top),l.right=_C(c.right,l.right),l.bottom=_C(c.bottom,l.bottom),l.left=wh(c.left,l.left),l},Zz(t,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function aj(t){var e=t.reference,n=t.element,r=t.placement,i=r?cl(r):null,a=r?mv(r):null,o=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case ya:l={x:o,y:e.y-n.height};break;case Oo:l={x:o,y:e.y+e.height};break;case Po:l={x:e.x+e.width,y:s};break;case xa:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var u=i?LM(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case pv:l[u]=l[u]-(e[c]/2-n[c]/2);break;case O0:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function P0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,a=n.strategy,o=a===void 0?t.strategy:a,s=n.boundary,l=s===void 0?nde:s,u=n.rootBoundary,c=u===void 0?ZH:u,f=n.elementContext,h=f===void 0?Vg:f,d=n.altBoundary,p=d===void 0?!1:d,v=n.padding,m=v===void 0?0:v,g=nj(typeof m!="number"?m:rj(m,Wy)),y=h===Vg?rde:Vg,x=t.rects.popper,w=t.elements[p?y:h],b=Pde(zh(w)?w:w.contextElement||tf(t.elements.popper),l,c,o),C=gv(t.elements.reference),S=aj({reference:C,element:x,strategy:"absolute",placement:i}),D=Uk(Object.assign({},x,S)),_=h===Vg?D:C,T={top:b.top-_.top+g.top,bottom:_.bottom-b.bottom+g.bottom,left:b.left-_.left+g.left,right:_.right-b.right+g.right},E=t.modifiersData.offset;if(h===Vg&&E){var A=E[i];Object.keys(T).forEach(function(R){var $=[Po,Oo].indexOf(R)>=0?1:-1,O=[ya,Oo].indexOf(R)>=0?"y":"x";T[R]+=A[O]*$})}return T}function Fde(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?QH:l,c=mv(r),f=c?s?qz:qz.filter(function(p){return mv(p)===c}):Wy,h=f.filter(function(p){return u.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,v){return p[v]=P0(t,{placement:v,boundary:i,rootBoundary:a,padding:o})[cl(v)],p},{});return Object.keys(d).sort(function(p,v){return d[p]-d[v]})}function Lde(t){if(cl(t)===OM)return[];var e=Db(t);return[Yz(t),e,Yz(e)]}function zde(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,v=n.allowedAutoPlacements,m=e.options.placement,g=cl(m),y=g===m,x=l||(y||!p?[Db(m)]:Lde(m)),w=[m].concat(x).reduce(function(j,K){return j.concat(cl(K)===OM?Fde(e,{placement:K,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:v}):K)},[]),b=e.rects.reference,C=e.rects.popper,S=new Map,D=!0,_=w[0],T=0;T<w.length;T++){var E=w[T],A=cl(E),R=mv(E)===pv,$=[ya,Oo].indexOf(A)>=0,O=$?"width":"height",M=P0(e,{placement:E,boundary:c,rootBoundary:f,altBoundary:h,padding:u}),B=$?R?Po:xa:R?Oo:ya;b[O]>C[O]&&(B=Db(B));var P=Db(B),z=[];if(a&&z.push(M[A]<=0),s&&z.push(M[B]<=0,M[P]<=0),z.every(function(j){return j})){_=E,D=!1;break}S.set(E,z)}if(D)for(var U=p?3:1,H=function(K){var Y=w.find(function(Z){var se=S.get(Z);if(se)return se.slice(0,K).every(function(ee){return ee})});if(Y)return _=Y,"break"},F=U;F>0;F--){var W=H(F);if(W==="break")break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}const Bde={name:"flip",enabled:!0,phase:"main",fn:zde,requiresIfExists:["offset"],data:{_skip:!1}};function Qz(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Jz(t){return[ya,Po,Oo,xa].some(function(e){return t[e]>=0})}function Vde(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=P0(e,{elementContext:"reference"}),s=P0(e,{altBoundary:!0}),l=Qz(o,r),u=Qz(s,i,a),c=Jz(l),f=Jz(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const Wde={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vde};function Ude(t,e,n){var r=cl(t),i=[xa,ya].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[xa,Po].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function Gde(t){var e=t.state,n=t.options,r=t.name,i=n.offset,a=i===void 0?[0,0]:i,o=QH.reduce(function(c,f){return c[f]=Ude(f,e.rects,a),c},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const Hde={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Gde};function jde(t){var e=t.state,n=t.name;e.modifiersData[n]=aj({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const qde={name:"popperOffsets",enabled:!0,phase:"read",fn:jde,data:{}};function Kde(t){return t==="x"?"y":"x"}function Xde(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,v=p===void 0?0:p,m=P0(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),g=cl(e.placement),y=mv(e.placement),x=!y,w=LM(g),b=Kde(w),C=e.modifiersData.popperOffsets,S=e.rects.reference,D=e.rects.popper,_=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,T=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(C){if(a){var R,$=w==="y"?ya:xa,O=w==="y"?Oo:Po,M=w==="y"?"height":"width",B=C[w],P=B+m[$],z=B-m[O],U=d?-D[M]/2:0,H=y===pv?S[M]:D[M],F=y===pv?-D[M]:-S[M],W=e.elements.arrow,j=d&&W?FM(W):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tj(),Y=K[$],Z=K[O],se=Km(0,S[M],j[M]),ee=x?S[M]/2-U-se-Y-T.mainAxis:H-se-Y-T.mainAxis,oe=x?-S[M]/2+U+se+Z+T.mainAxis:F+se+Z+T.mainAxis,ce=e.elements.arrow&&Uy(e.elements.arrow),ve=ce?w==="y"?ce.clientTop||0:ce.clientLeft||0:0,ye=(R=E==null?void 0:E[w])!=null?R:0,_e=B+ee-ye-ve,Ie=B+oe-ye,Ne=Km(d?_C(P,_e):P,B,d?wh(z,Ie):z);C[w]=Ne,A[w]=Ne-B}if(s){var We,qe=w==="x"?ya:xa,ft=w==="x"?Oo:Po,at=C[b],bt=b==="y"?"height":"width",ot=at+m[qe],q=at-m[ft],Q=[ya,xa].indexOf(g)!==-1,re=(We=E==null?void 0:E[b])!=null?We:0,pe=Q?ot:at-S[bt]-D[bt]-re+T.altAxis,me=Q?at+S[bt]+D[bt]-re-T.altAxis:q,xe=d&&Q?xde(pe,at,me):Km(d?pe:ot,at,d?me:q);C[b]=xe,A[b]=xe-at}e.modifiersData[r]=A}}const Yde={name:"preventOverflow",enabled:!0,phase:"main",fn:Xde,requiresIfExists:["offset"]};function Zde(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Qde(t){return t===qa(t)||!Io(t)?zM(t):Zde(t)}function Jde(t){var e=t.getBoundingClientRect(),n=vv(e.width)/t.offsetWidth||1,r=vv(e.height)/t.offsetHeight||1;return n!==1||r!==1}function epe(t,e,n){n===void 0&&(n=!1);var r=Io(e),i=Io(e)&&Jde(e),a=tf(e),o=gv(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((wl(e)!=="body"||VM(a))&&(s=Qde(e)),Io(e)?(l=gv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=BM(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function tpe(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||i(a)}),r}function npe(t){var e=tpe(t);return dde.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function rpe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ipe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var e5={placement:"bottom",modifiers:[],strategy:"absolute"};function t5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ape(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,a=i===void 0?e5:i;return function(s,l,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},e5,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:c,setOptions:function(g){var y=typeof g=="function"?g(c.options):g;v(),c.options=Object.assign({},a,c.options,y),c.scrollParents={reference:zh(s)?Xm(s):s.contextElement?Xm(s.contextElement):[],popper:Xm(l)};var x=npe(ipe([].concat(r,c.options.modifiers)));return c.orderedModifiers=x.filter(function(w){return w.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var g=c.elements,y=g.reference,x=g.popper;if(t5(y,x)){c.rects={reference:epe(y,Uy(x),c.options.strategy==="fixed"),popper:FM(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(T){return c.modifiersData[T.name]=Object.assign({},T.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var b=c.orderedModifiers[w],C=b.fn,S=b.options,D=S===void 0?{}:S,_=b.name;typeof C=="function"&&(c=C({state:c,options:D,name:_,instance:d})||c)}}}},update:rpe(function(){return new Promise(function(m){d.forceUpdate(),m(c)})}),destroy:function(){v(),h=!0}};if(!t5(s,l))return d;d.setOptions(u).then(function(m){!h&&u.onFirstUpdate&&u.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var g=m.name,y=m.options,x=y===void 0?{}:y,w=m.effect;if(typeof w=="function"){var b=w({state:c,name:g,instance:d,options:x}),C=function(){};f.push(b||C)}})}function v(){f.forEach(function(m){return m()}),f=[]}return d}}var ope=[Nde,qde,Ede,gde,Hde,Bde,Yde,Sde,Wde],spe=ape({defaultModifiers:ope}),lpe=typeof Element<"u",upe=typeof Map=="function",cpe=typeof Set=="function",fpe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function _b(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!_b(t[r],e[r]))return!1;return!0}var a;if(upe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!_b(r.value[1],e.get(r.value[0])))return!1;return!0}if(cpe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(fpe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(lpe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!_b(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var hpe=function(e,n){try{return _b(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Gy=Al(hpe);var dpe=[],ppe=function(e,n,r){r===void 0&&(r={});var i=L.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||dpe},o=L.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=o[0],l=o[1],u=L.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(d){var p=d.state,v=Object.keys(p.elements);hu.flushSync(function(){l({styles:Hz(v.map(function(m){return[m,p.styles[m]||{}]})),attributes:Hz(v.map(function(m){return[m,p.attributes[m]]}))})})},requires:["computeStyles"]}},[]),c=L.useMemo(function(){var h={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[u,{name:"applyStyles",enabled:!1}])};return Gy(i.current,h)?i.current||h:(i.current=h,h)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,u]),f=L.useRef();return jz(function(){f.current&&f.current.setOptions(c)},[c]),jz(function(){if(!(e==null||n==null)){var h=r.createPopper||spe,d=h(e,n,c);return f.current=d,function(){d.destroy(),f.current=null}}},[e,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},vpe=function(){},gpe=function(){return Promise.resolve(null)},mpe=[];function ype(t){var e=t.placement,n=e===void 0?"bottom":e,r=t.strategy,i=r===void 0?"absolute":r,a=t.modifiers,o=a===void 0?mpe:a,s=t.referenceElement,l=t.onFirstUpdate,u=t.innerRef,c=t.children,f=L.useContext(qH),h=L.useState(null),d=h[0],p=h[1],v=L.useState(null),m=v[0],g=v[1];L.useEffect(function(){Vk(u,d)},[u,d]);var y=L.useMemo(function(){return{placement:n,strategy:i,onFirstUpdate:l,modifiers:[].concat(o,[{name:"arrow",enabled:m!=null,options:{element:m}}])}},[n,i,l,o,m]),x=ppe(s||f,d,y),w=x.state,b=x.styles,C=x.forceUpdate,S=x.update,D=L.useMemo(function(){return{ref:p,style:b.popper,placement:w?w.placement:n,hasPopperEscaped:w&&w.modifiersData.hide?w.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:w&&w.modifiersData.hide?w.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:b.arrow,ref:g},forceUpdate:C||vpe,update:S||gpe}},[p,g,n,w,b,S,C]);return XH(c)(D)}var xpe=function(){},wpe=xpe;const bpe=Al(wpe);function Cpe(t){var e=t.children,n=t.innerRef,r=L.useContext(KH),i=L.useCallback(function(a){Vk(n,a),YH(r,a)},[n,r]);return L.useEffect(function(){return function(){return Vk(n,null)}},[]),L.useEffect(function(){bpe(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),XH(e)({ref:i})}var n5=function(t){Ln(e,t);function e(){var n,r=t.apply(this,arguments)||this;return r.targetRef=(n=r.props.targetRef)!==null&&n!==void 0?n:L.createRef(),r.prevElement=void 0,r}return e.prototype.render=function(){var n=L.Children.only(this.props.children);return this.props.targetRef!==void 0?n:L.cloneElement(n,{ref:this.targetRef})},e.prototype.componentDidMount=function(){var n=this;this.observer=globalThis.ResizeObserver!=null?new ResizeObserver(function(r){var i,a;return(a=(i=n.props).onResize)===null||a===void 0?void 0:a.call(i,r)}):void 0,this.observeElement()},e.prototype.componentDidUpdate=function(n){this.observeElement(this.props.observeParents!==n.observeParents)},e.prototype.componentWillUnmount=function(){var n;(n=this.observer)===null||n===void 0||n.disconnect(),this.prevElement=void 0},e.prototype.observeElement=function(n){if(n===void 0&&(n=!1),this.observer!==void 0){if(!(this.targetRef.current instanceof Element)){this.observer.disconnect();return}if(!(this.targetRef.current===this.prevElement&&!n)&&(this.observer.disconnect(),this.prevElement=this.targetRef.current,this.observer.observe(this.targetRef.current),this.props.observeParents))for(var r=this.targetRef.current.parentElement;r!=null;)this.observer.observe(r),r=r.parentElement}},e.displayName="".concat(gt,".ResizeSensor"),e}(lr);function $S(t){return t.split("-")[0]}function r5(t){return["left","right"].indexOf(t)!==-1}function ow(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";default:return"left"}}function i5(t){var e=t.split("-")[1];switch(e){case"start":return"left";case"end":return"right";default:return"center"}}function Spe(t,e){var n=$S(t);if(e===void 0)return r5(n)?"".concat(ow(n)," ").concat(i5(n)):"".concat(i5(n)," ").concat(ow(n));var r=15;return r5(n)?"".concat(ow(n)," ").concat(parseInt(e.top,10)+r,"px"):"".concat(parseInt(e.left,10)+r,"px ").concat(ow(n))}var Dpe="M8.11 6.302c1.015-.936 1.887-2.922 1.887-4.297v26c0-1.378-.868-3.357-1.888-4.297L.925 17.09c-1.237-1.14-1.233-3.034 0-4.17L8.11 6.302z",_pe="M8.787 7.036c1.22-1.125 2.21-3.376 2.21-5.03V0v30-2.005c0-1.654-.983-3.9-2.21-5.03l-7.183-6.616c-.81-.746-.802-1.96 0-2.7l7.183-6.614z",Tpe=4,TC=30,Epe=22;function Ape(t){if(t==null)return 0;switch($S(t)){case"top":return-90;case"left":return 180;case"bottom":return 90;default:return 0}}function Npe(t){var e=TC/2-Tpe;switch($S(t)){case"top":return{bottom:-e};case"left":return{right:-e};case"bottom":return{top:-e};default:return{left:-e}}}var oj=function(t){var e=t.arrowProps,n=e.ref,r=e.style,i=t.placement;return L.createElement("div",{"aria-hidden":!0,className:hE,"data-popper-arrow":!0,ref:n,style:de(de({},r),Npe(i))},L.createElement("svg",{viewBox:"0 0 ".concat(TC," ").concat(TC),style:{transform:"rotate(".concat(Ape(i),"deg)")}},L.createElement("path",{className:hE+"-border",d:Dpe}),L.createElement("path",{className:hE+"-fill",d:_pe})))};oj.displayName="".concat(gt,".PopoverArrow");var kpe=function(){return null},WM=L.createContext([{},kpe]),Ipe=function(t,e){switch(e.type){case"FORCE_DISABLED_STATE":return{forceDisabled:!0};case"RESET_DISABLED_STATE":return{};default:return t}},sj=function(t){var e=t.children,n=t.forceDisable,r=L.useReducer(Ipe,{}),i=r[0],a=r[1];return L.useEffect(function(){a(n?{type:"FORCE_DISABLED_STATE"}:{type:"RESET_DISABLED_STATE"})},[n]),L.createElement(WM.Provider,{value:[i,a]},typeof e=="function"?e(i):e)},ou=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.popoverRef=L.createRef(),n.renderPopover=function(r){var i,a,o=n.props,s=o.children,l=o.compact,u=o.disabled,c=o.intent,f=o.popoverClassName,h=yn(o,["children","compact","disabled","intent","popoverClassName"]),d=Ze($fe,ji(c),f,(i={},i[yM]=l,i));return L.createElement(oi,de({modifiers:{arrow:{enabled:!n.props.minimal},offset:{options:{offset:[0,Epe/2]}}}},h,{autoFocus:!1,canEscapeKeyClose:!1,disabled:(a=r.forceDisabled)!==null&&a!==void 0?a:u,enforceFocus:!1,lazy:!0,popoverClassName:d,portalContainer:n.props.portalContainer,ref:n.popoverRef}),s)},n}return e.prototype.render=function(){var n=this;return L.createElement(WM.Consumer,null,function(r){var i=r[0];return L.createElement(sj,de({},i),n.renderPopover)})},e.prototype.reposition=function(){var n;(n=this.popoverRef.current)===null||n===void 0||n.reposition()},e.displayName="".concat(gt,".Tooltip"),e.defaultProps={compact:!1,hoverCloseDelay:0,hoverOpenDelay:100,interactionKind:"hover-target",minimal:!1,transitionDuration:100},e}(lr),Rpe={enabled:!0,name:"matchReferenceWidth",phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;e.styles.popper.width="".concat(e.rects.reference.width,"px")},effect:function(t){var e=t.state,n=e.elements.reference.getBoundingClientRect().width;e.elements.popper.style.width="".concat(n,"px")}},io=de(de({},tn),{AUTO:"auto",AUTO_END:"auto-end",AUTO_START:"auto-start"});function $pe(t){switch(t){case io.TOP_LEFT:return"top-start";case io.TOP:return"top";case io.TOP_RIGHT:return"top-end";case io.RIGHT_TOP:return"right-start";case io.RIGHT:return"right";case io.RIGHT_BOTTOM:return"right-end";case io.BOTTOM_RIGHT:return"bottom-end";case io.BOTTOM:return"bottom";case io.BOTTOM_LEFT:return"bottom-start";case io.LEFT_BOTTOM:return"left-end";case io.LEFT:return"left";case io.LEFT_TOP:return"left-start";case"auto":case"auto-start":case"auto-end":return t;default:return Mpe(t)}}function Mpe(t){throw new Error("Unexpected position: "+t)}var Ll={CLICK:"click",CLICK_TARGET_ONLY:"click-target",HOVER:"hover",HOVER_TARGET_ONLY:"hover-target"},oi=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasDarkParent:!1,isClosingViaEscapeKeypress:!1,isOpen:n.getIsOpen(n.props)},n.popoverElement=null,n.popoverRef=Fk(n,"popoverElement",n.props.popoverRef),n.targetRef=L.createRef(),n.isMouseInTargetOrPopover=!1,n.lostFocusOnSamePage=!0,n.isControlled=function(){return n.props.isOpen!==void 0},n.isArrowEnabled=function(){var r,i;return!n.props.minimal&&((i=(r=n.props.modifiers)===null||r===void 0?void 0:r.arrow)===null||i===void 0?void 0:i.enabled)!==!1},n.isHoverInteractionKind=function(){return n.props.interactionKind===Ll.HOVER||n.props.interactionKind===Ll.HOVER_TARGET_ONLY},n.reposition=function(){var r;return(r=n.popperScheduleUpdate)===null||r===void 0?void 0:r.call(n)},n.renderTarget=function(r){var i,a,o,s,l=r.ref,u=n.props,c=u.children,f=u.className,h=u.fill,d=u.openOnTargetFocus,p=u.renderTarget,v=n.state.isOpen,m=n.isControlled(),g=n.isHoverInteractionKind(),y=n.props.targetTagName;h&&(y="div");var x=Ly(l,n.targetRef),w=g?{onBlur:n.handleTargetBlur,onContextMenu:n.handleTargetContextMenu,onFocus:n.handleTargetFocus,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave}:{onClick:n.handleTargetClick,onKeyDown:n.handleKeyDown},b=d&&g?0:void 0,C=de({className:Ze(f,yfe,(i={},i[vfe]=v,i[R0]=v&&!m&&!g,i)),ref:x},w),S={"aria-expanded":v,"aria-haspopup":(o=n.props.popupKind)!==null&&o!==void 0?o:n.props.interactionKind===Ll.HOVER_TARGET_ONLY?void 0:!0},D=(a={},a[R0]=v&&!m&&!g,a[Ns]=h,a),_;if(p!==void 0)_=p(de(de(de({},C),S),{className:Ze(C.className,D),isOpen:v,tabIndex:b}));else{var T=IH(L.Children.toArray(c)[0]);if(T===void 0)return null;var E=L.cloneElement(T,de(de({},S),{className:Ze(T.props.className,D),disabled:v&&Pk(T,ou)?!0:T.props.disabled,tabIndex:(s=T.props.tabIndex)!==null&&s!==void 0?s:b})),A=L.createElement(y,de(de({},C),n.props.targetProps),E);_=A}return L.createElement(n5,{targetRef:n.targetRef,onResize:n.reposition},_)},n.renderPopover=function(r){var i,a=n.props,o=a.autoFocus,s=a.enforceFocus,l=a.backdropProps,u=a.canEscapeKeyClose,c=a.hasBackdrop,f=a.interactionKind,h=a.usePortal,d=n.state,p=d.isClosingViaEscapeKeypress,v=d.isOpen,m=Spe(r.placement,n.isArrowEnabled()?r.arrowProps.style:void 0);n.popperScheduleUpdate=r.update;var g={onClick:n.handlePopoverClick,onKeyDown:function(C){return M0(C)&&n.handlePopoverClick(C)}};(f===Ll.HOVER||!h&&f===Ll.HOVER_TARGET_ONLY)&&(g.onMouseEnter=n.handleMouseEnter,g.onMouseLeave=n.handleMouseLeave);var y=$S(r.placement),x=Ze(Qr,(i={},i[hv]=n.props.inheritDarkTheme&&n.state.hasDarkParent,i[My]=n.props.minimal,i[dE]=n.props.captureDismiss,i[pfe]=n.props.matchTargetWidth,i[mfe]=r.isReferenceHidden===!0,i[gfe]=r.hasPopperEscaped===!0,i),"".concat(hfe,"-").concat(y),n.props.popoverClassName),w=n.isHoverInteractionKind()?!1:void 0,b=n.isHoverInteractionKind()?!1:p?!0:n.props.shouldReturnFocusOnClose;return L.createElement(IS,{autoFocus:o??w,backdropClassName:cfe,backdropProps:l,canEscapeKeyClose:u,canOutsideClickClose:f===Ll.CLICK,enforceFocus:s,hasBackdrop:c,isOpen:v,lazy:n.props.lazy,onClose:n.handleOverlayClose,onClosed:n.props.onClosed,onClosing:n.props.onClosing,onOpened:n.props.onOpened,onOpening:n.props.onOpening,transitionDuration:n.props.transitionDuration,transitionName:Qr,usePortal:h,portalClassName:n.props.portalClassName,portalContainer:n.props.portalContainer,portalStopPropagationEvents:n.props.portalStopPropagationEvents,shouldReturnFocusOnClose:b},L.createElement("div",{className:xfe,ref:r.ref,style:r.style},L.createElement(n5,{onResize:n.reposition},L.createElement("div",de({className:x,style:{transformOrigin:m},ref:n.popoverRef},g),n.isArrowEnabled()&&L.createElement(oj,{arrowProps:r.arrowProps,placement:r.placement}),L.createElement("div",{className:ffe},n.props.content)))))},n.handleTargetFocus=function(r){if(n.props.openOnTargetFocus&&n.isHoverInteractionKind()){if(r.relatedTarget==null&&!n.lostFocusOnSamePage)return;n.handleMouseEnter(r)}},n.handleTargetBlur=function(r){n.props.openOnTargetFocus&&n.isHoverInteractionKind()&&(r.relatedTarget!=null?r.relatedTarget!==n.popoverElement&&!n.isElementInPopover(r.relatedTarget)&&n.handleMouseLeave(r):n.handleMouseLeave(r)),n.lostFocusOnSamePage=r.relatedTarget!=null},n.handleTargetContextMenu=function(r){r.defaultPrevented&&n.setOpenState(!1,r)},n.handleMouseEnter=function(r){n.isMouseInTargetOrPopover=!0,!n.props.usePortal&&n.isElementInPopover(r.target)&&n.props.interactionKind===Ll.HOVER_TARGET_ONLY&&!n.props.openOnTargetFocus?n.handleMouseLeave(r):n.props.disabled||n.setOpenState(!0,r,n.props.hoverOpenDelay)},n.handleMouseLeave=function(r){n.isMouseInTargetOrPopover=!1,n.setTimeout(function(){n.isMouseInTargetOrPopover||n.setOpenState(!1,r,n.props.hoverCloseDelay)})},n.handlePopoverClick=function(r){var i,a,o,s=r.target,l=s.closest(".".concat(Qr)),u=s.closest(".".concat(Qr)),c=(l??u)===n.getPopoverElement(),f=(a=(i=l==null?void 0:l.classList.contains(dE))!==null&&i!==void 0?i:u==null?void 0:u.classList.contains(dE))!==null&&a!==void 0?a:!1,h=s.closest(".".concat(Da,", .").concat(dfe)),d=(o=h==null?void 0:h.classList.contains(Da))!==null&&o!==void 0?o:!1,p=s.closest(":disabled, .".concat(fd))!=null;d&&!p&&(!f||c)&&n.setOpenState(!1,r)},n.handleOverlayClose=function(r){var i;if(!(n.targetRef.current==null||r===void 0)){var a=(i=r.nativeEvent)!==null&&i!==void 0?i:r,o=a.composed?a.composedPath()[0]:a.target;(!zfe(n.targetRef.current,o)||r.nativeEvent instanceof KeyboardEvent)&&n.setOpenState(!1,r)}},n.handleKeyDown=function(r){var i=M0(r);i&&n.handleTargetClick(r)},n.handleTargetClick=function(r){var i=n.state.isOpen&&n.isSimulatedButtonClick(r);i||!n.props.disabled&&!n.isElementInPopover(r.target)&&(n.props.isOpen==null?n.setState(function(a){return{isOpen:!a.isOpen}}):n.setOpenState(!n.props.isOpen,r))},n.isSimulatedButtonClick=function(r){return!r.isTrusted&&r.target.matches(".".concat(Oy))},n}return e.prototype.getPopoverElement=function(){var n;return(n=this.popoverElement)===null||n===void 0?void 0:n.querySelector(".".concat(Qr))},e.prototype.getIsOpen=function(n){var r;return n.disabled?!1:(r=n.isOpen)!==null&&r!==void 0?r:n.defaultIsOpen},e.prototype.render=function(){var n=this.props,r=n.disabled,i=n.content,a=n.placement,o=n.position,s=o===void 0?"auto":o,l=n.positioningStrategy,u=this.state.isOpen,c=i==null||typeof i=="string"&&i.trim()==="";return c?(!r&&u!==!1&&!$0("production")&&console.warn(ehe),this.renderTarget({ref:Ppe})):L.createElement(tde,null,L.createElement(Cpe,null,this.renderTarget),L.createElement(ype,{innerRef:this.popoverRef,placement:a??$pe(s),strategy:l,modifiers:this.getPopperModifiers()},this.renderPopover))},e.prototype.componentDidMount=function(){this.updateDarkParent()},e.prototype.componentDidUpdate=function(n,r){t.prototype.componentDidUpdate.call(this,n,r),this.updateDarkParent();var i=this.getIsOpen(this.props);this.props.isOpen!=null&&i!==this.state.isOpen?(this.setOpenState(i),this.setState({isOpen:i})):this.props.disabled&&this.state.isOpen&&this.props.isOpen==null&&this.setOpenState(!1)},e.prototype.validateProps=function(n){n.isOpen==null&&n.onInteraction!=null&&console.warn(rhe),n.hasBackdrop&&!n.usePortal&&console.warn(the),n.hasBackdrop&&n.interactionKind!==Ll.CLICK&&console.warn(Zfe),n.placement!==void 0&&n.position!==void 0&&console.warn(nhe);var r=L.Children.count(n.children),i=n.renderTarget!==void 0,a=n.targetProps!==void 0;r===0&&!i&&console.warn(Yfe),r>1&&console.warn(Qfe),r>0&&i&&console.warn(Jfe),i&&a&&console.warn(ihe)},e.prototype.getPopperModifiers=function(){var n,r,i,a,o=this.props,s=o.matchTargetWidth,l=o.modifiers,u=o.modifiersCustom,c=[de({enabled:this.isArrowEnabled(),name:"arrow"},l==null?void 0:l.arrow),de(de({name:"computeStyles"},l==null?void 0:l.computeStyles),{options:de({adaptive:!0,gpuAcceleration:!1},(n=l==null?void 0:l.computeStyles)===null||n===void 0?void 0:n.options)}),de(de({enabled:this.isArrowEnabled(),name:"offset"},l==null?void 0:l.offset),{options:de({offset:[0,TC/2]},(r=l==null?void 0:l.offset)===null||r===void 0?void 0:r.options)}),de(de({name:"flip"},l==null?void 0:l.flip),{options:de({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(i=l==null?void 0:l.flip)===null||i===void 0?void 0:i.options)}),de(de({name:"preventOverflow"},l==null?void 0:l.preventOverflow),{options:de({boundary:this.props.boundary,rootBoundary:this.props.rootBoundary},(a=l==null?void 0:l.preventOverflow)===null||a===void 0?void 0:a.options)})];return s&&c.push(Rpe),u!==void 0&&c.push.apply(c,u),c},e.prototype.setOpenState=function(n,r,i){var a=this,o,s,l,u,c;(o=this.cancelOpenTimeout)===null||o===void 0||o.call(this),i!==void 0&&i>0?(r==null||r.persist(),this.cancelOpenTimeout=this.setTimeout(function(){a.setOpenState(n,r)},i)):(this.props.isOpen==null?this.setState({isOpen:n}):(l=(s=this.props).onInteraction)===null||l===void 0||l.call(s,n,r),n||((c=(u=this.props).onClose)===null||c===void 0||c.call(u,r),this.setState({isClosingViaEscapeKeypress:Ope(r==null?void 0:r.nativeEvent)})))},e.prototype.updateDarkParent=function(){var n;if(this.props.usePortal&&this.state.isOpen){var r=((n=this.targetRef.current)===null||n===void 0?void 0:n.closest(".".concat(hv)))!=null;this.setState({hasDarkParent:r})}},e.prototype.isElementInPopover=function(n){var r,i;return(i=(r=this.getPopoverElement())===null||r===void 0?void 0:r.contains(n))!==null&&i!==void 0?i:!1},e.displayName="".concat(gt,".Popover"),e.defaultProps={boundary:"clippingParents",captureDismiss:!1,defaultIsOpen:!1,disabled:!1,fill:!1,hasBackdrop:!1,hoverCloseDelay:300,hoverOpenDelay:150,inheritDarkTheme:!0,interactionKind:Ll.CLICK,matchTargetWidth:!1,minimal:!1,openOnTargetFocus:!0,positioningStrategy:"absolute",renderTarget:void 0,shouldReturnFocusOnClose:!1,targetTagName:"span",transitionDuration:300,usePortal:!0},e}(lr);function Ope(t){return t instanceof KeyboardEvent&&t.key==="Escape"}function Ppe(){}var Ge=L.forwardRef(function(t,e){var n,r,i=t.active,a=t.className,o=t.children,s=t.disabled,l=t.icon,u=t.intent,c=t.labelClassName,f=t.labelElement,h=t.multiline,d=t.popoverProps,p=t.roleStructure,v=p===void 0?"menuitem":p,m=t.selected,g=t.shouldDismissPopover,y=t.submenuProps,x=t.text,w=t.textClassName,b=t.tagName,C=b===void 0?"a":b,S=t.htmlTitle,D=yn(t,["active","className","children","disabled","icon","intent","labelClassName","labelElement","multiline","popoverProps","roleStructure","selected","shouldDismissPopover","submenuProps","text","textClassName","tagName","htmlTitle"]),_=v==="listoption"?["option",void 0,!!m]:v==="menuitem"?["none","menuitem",void 0]:v==="none"?["none",void 0,void 0]:[void 0,void 0,void 0],T=_[0],E=_[1],A=_[2],R=v==="listoption",$=R&&m,O=l!=null,M=o!=null,B=ji(u),P=Ze(Py,B,(n={},n[R0]=i,n[fd]=s,n[Da]=g&&!s&&!M,n[Kce]=R,n[wM]=$,n),a),z=t.label==null&&f==null?null:L.createElement("span",{className:Ze(Zce,c)},t.label,f),U=L.createElement(C,de(de(de({onKeyDown:Bfe(["Enter"," "]),role:M?"none":E,tabIndex:M?-1:0},Oc(D)),s?Lpe:{}),{className:P}),$?L.createElement(kM,{className:Xce}):void 0,O?L.createElement("span",{className:Yce},L.createElement(ri,{icon:l,"aria-hidden":!0,tabIndex:-1})):void 0,L.createElement(By,{className:Ze(Ns,w),ellipsize:!h,title:S},x),z,M?L.createElement(_M,{className:Qce,title:"Open sub menu"}):void 0),H=Ze((r={},r[Mk]=M,r));return L.createElement("li",{className:H,ref:e,role:T,"aria-selected":A},o==null?U:L.createElement(oi,de({autoFocus:!1,captureDismiss:!1,disabled:s,enforceFocus:!1,hoverCloseDelay:0,interactionKind:"hover",modifiers:Fpe,targetProps:{role:E,tabIndex:0},placement:"right-start",usePortal:!1},d,{content:L.createElement(Su,de({},y),o),minimal:!0,popoverClassName:Ze(Mk,d==null?void 0:d.popoverClassName)}),U))});Ge.defaultProps={active:!1,disabled:!1,multiline:!1,popoverProps:{},selected:void 0,shouldDismissPopover:!0,text:""};Ge.displayName="".concat(gt,".MenuItem");var Fpe={flip:{options:{rootBoundary:"viewport",padding:20},enabled:!0},offset:{options:{offset:[-5,0]},enabled:!0},preventOverflow:{options:{rootBoundary:"viewport",padding:20},enabled:!0}},Lpe={"aria-disabled":!0,href:void 0,onClick:void 0,onMouseDown:void 0,onMouseEnter:void 0,onMouseLeave:void 0,tabIndex:-1},MS=L.forwardRef(function(t,e){var n,r=t.alignText,i=t.className,a=t.fill,o=t.minimal,s=t.large,l=t.vertical,u=yn(t,["alignText","className","fill","minimal","large","vertical"]),c=Ze(vce,(n={},n[Ns]=a,n[ks]=s,n[My]=o,n[xH]=l,n),ES(r),i);return L.createElement("div",de({},u,{ref:e,className:c}),t.children)});MS.displayName="".concat(gt,".ButtonGroup");var Il=L.forwardRef(function(t,e){var n,r=t.className,i=t.elevation,a=t.interactive,o=t.selected,s=t.compact,l=yn(t,["className","elevation","interactive","selected","compact"]),u=Ze(r,yce,Ffe(i),(n={},n[mH]=a,n[yM]=s,n[wM]=o,n));return L.createElement("div",de({className:u,ref:e},l))});Il.defaultProps={elevation:gH.ZERO,interactive:!1};Il.displayName="".concat(gt,".Card");var OS=L.forwardRef(function(t,e){var n,r=t.bordered,i=t.className,a=t.children,o=t.compact,s=yn(t,["bordered","className","children","compact"]),l=Ze(i,CH,(n={},n[bce]=r,n[yM]=o,n));return L.createElement(Il,de({role:"list",elevation:gH.ZERO,className:l},s,{ref:e}),a)});OS.defaultProps={bordered:!0,compact:!1};OS.displayName="".concat(gt,".CardList");var lj=L.memo(function(e){var n,r=e.content,i=e.popoverClassName,a=e.onClose,o=e.isDarkTheme,s=o===void 0?!1:o,l=e.rootBoundary,u=l===void 0?"viewport":l,c=e.targetOffset,f=e.transitionDuration,h=f===void 0?100:f,d=yn(e,["content","popoverClassName","onClose","isDarkTheme","rootBoundary","targetOffset","transitionDuration"]),p=L.useCallback(function(g){return g.preventDefault()},[]),v=L.useCallback(function(g){var y=g.ref;return L.createElement(kS,null,L.createElement("div",{className:Cce,style:c,ref:y}))},[c]),m=L.useCallback(function(g){g||a==null||a()},[a]);return L.createElement(oi,de({placement:"right-start",rootBoundary:u,transitionDuration:h},d,{content:L.createElement("div",{onContextMenu:p},r),enforceFocus:!1,key:zpe(c),hasBackdrop:!0,backdropProps:{className:Dce},minimal:!0,onInteraction:m,popoverClassName:Ze(Sce,i,(n={},n[hv]=s,n)),positioningStrategy:"fixed",renderTarget:v}))});lj.displayName="".concat(gt,".ContextMenuPopover");function zpe(t){return t===void 0?"default":"".concat(t.left,"x").concat(t.top)}var uj=L.forwardRef(function(t,e){var n=t.className,r=t.children,i=t.content,a=t.disabled,o=a===void 0?!1:a,s=t.onClose,l=t.onContextMenu,u=t.popoverProps,c=t.tagName,f=c===void 0?"div":c,h=yn(t,["className","children","content","disabled","onClose","onContextMenu","popoverProps","tagName"]),d=L.useContext(WM),p=d[1],v=L.useState(void 0),m=v[0],g=v[1],y=L.useState(),x=y[0],w=y[1],b=L.useState(!1),C=b[0],S=b[1],D=L.useRef(null);L.useEffect(function(){S(!1),p({type:"RESET_DISABLED_STATE"})},[o,p]);var _=L.useCallback(function(){S(!1),w(void 0),p({type:"RESET_DISABLED_STATE"}),s==null||s()},[s,p]),T=L.useMemo(function(){return phe(D.current)},[D,C]),E=L.useMemo(function(){return{isOpen:C,mouseEvent:x,targetOffset:m}},[C,x,m]),A=L.useCallback(function(P){return o?void 0:_p(i)?i(P):i},[o,i]),R=L.useMemo(function(){return A(E)},[E,A]),$=R===void 0?void 0:L.createElement(lj,de({},u,{content:R,isDarkTheme:T,isOpen:C,targetOffset:m,onClose:_})),O=L.useCallback(function(P){if(!P.defaultPrevented){var z=!o&&(_p(r)||_p(i)||i!==void 0);if(z){S(!0),P.persist(),w(P);var U={left:P.clientX,top:P.clientY};g(U),p({type:"FORCE_DISABLED_STATE"});var H=A({isOpen:!0,mouseEvent:P,targetOffset:U});H===void 0||P.preventDefault()}l==null||l(P)}},[o,r,i,l,p,A]),M=Ze(n,bS),B=_p(r)?r({className:M,contentProps:E,onContextMenu:O,popover:$,ref:D}):L.createElement(L.Fragment,null,$,L.createElement(f,de({className:M,onContextMenu:O,ref:Ly(D,e)},h),r));return L.createElement(sj,{forceDisable:C},B)});uj.displayName="".concat(gt,".ContextMenu");var Bpe=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n;return L.createElement("div",{className:Ze(Ace,this.props.className,(n={},n[Nce]=this.props.useOverflowScrollContainer,n))},this.props.children)},e.defaultProps={useOverflowScrollContainer:!0},e}(lr),Vpe=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n;return L.createElement("div",{className:Ze(kce,this.props.className,(n={},n[Ice]=!this.props.minimal,n))},this.renderMainSection(),this.maybeRenderActionsSection())},e.prototype.renderMainSection=function(){return L.createElement("div",{className:Rce},this.props.children)},e.prototype.maybeRenderActionsSection=function(){var n=this.props.actions;if(n!=null)return L.createElement("div",{className:$ce},n)},e.defaultProps={minimal:!1},e}(lr),ho=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.className,i=n.tagName,a=i===void 0?"div":i,o=yn(n,["className","tagName"]),s=Ze(Mce,r);return L.createElement(a,de(de({},o),{className:s}))},e.displayName="".concat(gt,".Divider"),e}(lr),a5;(function(t){t.SMALL="360px",t.STANDARD="50%",t.LARGE="90%"})(a5||(a5={}));var Wpe=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r,i,a,o=this.props,s=o.hasBackdrop,l=o.size,u=o.style,c=o.position,f=this.props,h=f.className,d=f.children,p=yn(f,["className","children"]),v=Sz(c),m=Ze(bM,(n={},n[(a=Fy(v))!==null&&a!==void 0?a:""]=!0,n),h),g=l==null?u:de(de({},u),(r={},r[rce(v)?"height":"width"]=l,r));return L.createElement(IS,de({},p,{className:Ze((i={},i[sfe]=s,i))}),L.createElement("div",{className:m,style:g},this.maybeRenderHeader(),d))},e.prototype.validateProps=function(n){n.title==null&&(n.icon!=null&&console.warn(AH),n.isCloseButtonShown!=null&&console.warn(NH)),n.position!=null&&n.position!==Sz(n.position)&&console.warn(hhe)},e.prototype.maybeRenderCloseButton=function(){return this.props.isCloseButtonShown!==!1?L.createElement(Wt,{"aria-label":"Close",className:SH,icon:L.createElement(zy,{size:Qe.LARGE}),minimal:!0,onClick:this.props.onClose}):null},e.prototype.maybeRenderHeader=function(){var n=this.props,r=n.icon,i=n.title;return i==null?null:L.createElement("div",{className:Pce},L.createElement(ri,{icon:r,size:Qe.LARGE}),L.createElement(BH,null,i),this.maybeRenderCloseButton())},e.displayName="".concat(gt,".Drawer"),e.defaultProps={canOutsideClickClose:!0,isOpen:!1,position:"right",style:{}},e}(lr),ng=L.forwardRef(function(t,e){var n,r=t.children,i=t.className,a=t.fill,o=t.vertical,s=yn(t,["children","className","fill","vertical"]),l=Ze(_ce,(n={},n[Ns]=a,n[xH]=o,n),i);return L.createElement("div",de({role:"group"},s,{ref:e,className:l}),r)});ng.displayName="".concat(gt,".ControlGroup");var PS=L.forwardRef(function(t,e){var n,r=t.alignIndicator,i=t.children,a=t.className,o=t.indicatorChildren,s=t.inline,l=t.inputRef,u=t.label,c=t.labelElement,f=t.large,h=t.style,d=t.type,p=t.typeClassName,v=t.tagName,m=v===void 0?"label":v,g=yn(t,["alignIndicator","children","className","indicatorChildren","inline","inputRef","label","labelElement","large","style","type","typeClassName","tagName"]),y=Ze(DH,p,(n={},n[fd]=g.disabled,n[xM]=s,n[ks]=f,n),ES(r),a);return L.createElement(m,{className:y,style:h,ref:e},L.createElement("input",de({},g,{ref:l,type:d})),L.createElement("span",{className:_H},o),u,c,i)});PS.displayName="".concat(gt,".Control");var F0=L.forwardRef(function(t,e){var n=t.innerLabelChecked,r=t.innerLabel,i=yn(t,["innerLabelChecked","innerLabel"]),a=r||n?[L.createElement("div",{key:"checked",className:Dz},L.createElement("div",{className:_z},n||r)),L.createElement("div",{key:"unchecked",className:Dz},L.createElement("div",{className:_z},r))]:null;return L.createElement(PS,de({},i,{indicatorChildren:a,ref:e,type:"checkbox",typeClassName:TH}))});F0.displayName="".concat(gt,".Switch");var yv=L.forwardRef(function(t,e){return L.createElement(PS,de({},t,{ref:e,type:"radio",typeClassName:Wce}))});yv.displayName="".concat(gt,".Radio");var cj=L.forwardRef(function(t,e){var n=t.defaultIndeterminate,r=t.indeterminate,i=t.onChange,a=yn(t,["defaultIndeterminate","indeterminate","onChange"]),o=L.useState(r||n||!1),s=o[0],l=o[1],u=L.useRef(null),c=t.inputRef===void 0?u:Ly(t.inputRef,u),f=L.useCallback(function(h){r===void 0&&l(h.target.indeterminate),i==null||i(h)},[r,i]);return L.useEffect(function(){r!==void 0&&l(r)},[r]),L.useEffect(function(){u.current!=null&&(u.current.indeterminate=s)},[u,s]),L.createElement(PS,de({},a,{inputRef:c,onChange:f,ref:e,type:"checkbox",typeClassName:Vce}))});cj.displayName="".concat(gt,".Checkbox");var Va=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.children,i=n.contentClassName,a=n.helperText,o=n.label,s=n.labelFor,l=n.labelInfo,u=n.style,c=n.subLabel;return L.createElement("div",{className:this.getClassName(),style:u},o&&L.createElement("label",{className:CM,htmlFor:s},o," ",L.createElement("span",{className:cce},l)),c&&L.createElement("div",{className:qce},c),L.createElement("div",{className:Ze(Hce,i)},r,a&&L.createElement("div",{className:jce},a)))},e.prototype.getClassName=function(){var n,r=this.props,i=r.className,a=r.disabled,o=r.fill,s=r.inline,l=r.intent;return Ze(Gce,ji(l),(n={},n[fd]=a,n[Ns]=o,n[xM]=s,n),i)},e.displayName="".concat(gt,".FormGroup"),e}(lr),Upe=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasPendingUpdate:!1,isComposing:!1,nextValue:n.props.value,value:n.props.value},n.cancelPendingCompositionEnd=null,n.handleCompositionStart=function(r){var i,a,o;(i=n.cancelPendingCompositionEnd)===null||i===void 0||i.call(n),n.setState({isComposing:!0}),(o=(a=n.props).onCompositionStart)===null||o===void 0||o.call(a,r)},n.handleCompositionEnd=function(r){var i,a;n.cancelPendingCompositionEnd=n.setTimeout(function(){return n.setState({isComposing:!1})},e.COMPOSITION_END_DELAY),(a=(i=n.props).onCompositionEnd)===null||a===void 0||a.call(i,r)},n.handleChange=function(r){var i,a,o=r.target.value;n.setState({nextValue:o}),(a=(i=n.props).onChange)===null||a===void 0||a.call(i,r)},n}return e.getDerivedStateFromProps=function(n,r){if(r.isComposing||n.value===void 0)return null;var i=r.nextValue!==r.value;return i?n.value===r.nextValue?r.hasPendingUpdate?{value:n.value,hasPendingUpdate:!1}:{value:r.nextValue}:n.value===r.value?{hasPendingUpdate:!0}:{value:n.value,nextValue:n.value,hasPendingUpdate:!1}:{value:n.value,nextValue:n.value,hasPendingUpdate:!1}},e.prototype.render=function(){var n=this.state,r=n.isComposing,i=n.hasPendingUpdate,a=n.value,o=n.nextValue,s=this.props,l=s.inputRef,u=yn(s,["inputRef"]);return L.createElement("input",de({},u,{ref:l,value:r||i?o:a,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd,onChange:this.handleChange}))},e.displayName="".concat(gt,".AsyncControllableInput"),e.COMPOSITION_END_DELAY=10,e}(lr),Gpe=["onValueChange"],_i=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={},n.leftElement=null,n.rightElement=null,n.refHandlers={leftElement:function(r){return n.leftElement=r},rightElement:function(r){return n.rightElement=r}},n.handleInputChange=function(r){var i,a,o,s,l=r.target.value;(a=(i=n.props).onChange)===null||a===void 0||a.call(i,r),(s=(o=n.props).onValueChange)===null||s===void 0||s.call(o,l,r.target)},n}return e.prototype.render=function(){var n,r=this.props,i=r.asyncControl,a=i===void 0?!1:i,o=r.className,s=r.disabled,l=r.fill,u=r.inputClassName,c=r.inputRef,f=r.intent,h=r.large,d=r.readOnly,p=r.round,v=r.small,m=r.tagName,g=m===void 0?"div":m,y=Ze(Lce,ji(f),(n={},n[fd]=s,n[uce]=d,n[Ns]=l,n[ks]=h,n[dv]=v,n[yH]=p,n),o),x=de(de({},this.props.style),{paddingLeft:this.state.leftElementWidth,paddingRight:this.state.rightElementWidth}),w=de(de({type:"text"},Oc(this.props,Gpe,!0)),{"aria-disabled":s,className:Ze(CS,u),onChange:this.handleInputChange,style:x}),b=a?L.createElement(Upe,de({},w,{inputRef:c})):L.createElement("input",de({},w,{ref:c}));return L.createElement(g,{className:y},this.maybeRenderLeftElement(),b,this.maybeRenderRightElement())},e.prototype.componentDidMount=function(){this.updateInputWidth()},e.prototype.componentDidUpdate=function(n){var r=this.props,i=r.leftElement,a=r.rightElement;(n.leftElement!==i||n.rightElement!==a)&&this.updateInputWidth()},e.prototype.validateProps=function(n){n.leftElement!=null&&n.leftIcon!=null&&console.warn(Wfe)},e.prototype.maybeRenderLeftElement=function(){var n=this.props,r=n.leftElement,i=n.leftIcon;if(r!=null)return L.createElement("span",{className:zce,ref:this.refHandlers.leftElement},r);if(i!=null)return L.createElement(ri,{icon:i,"aria-hidden":!0,tabIndex:-1})},e.prototype.maybeRenderRightElement=function(){var n=this.props.rightElement;if(n!=null)return L.createElement("span",{className:Bce,ref:this.refHandlers.rightElement},n)},e.prototype.updateInputWidth=function(){var n=this.state,r=n.leftElementWidth,i=n.rightElementWidth;if(this.leftElement!=null){var a=this.leftElement.clientWidth;(r===void 0||Math.abs(a-r)>2)&&this.setState({leftElementWidth:a})}else this.setState({leftElementWidth:void 0});if(this.rightElement!=null){var a=this.rightElement.clientWidth;(i===void 0||Math.abs(a-i)>2)&&this.setState({rightElementWidth:a})}else this.setState({rightElementWidth:void 0})},e.displayName="".concat(gt,".InputGroup"),e}(lr);function fj(t){var e=1.9,n=e.toLocaleString(t),r=1 .toLocaleString(t),i=9 .toLocaleString(t),a="".concat(r,"(.+)").concat(i),o=new RegExp(a).exec(n);return o&&o[1]||"."}function yE(t,e){return e===void 0&&(e="en-US"),Ym(t.toLocaleString(e,{roundingPriority:"morePrecision"}),e)}function Hpe(t,e,n){var r=e??-1/0,i=n??1/0;return SM(t,r,i)}function jpe(t){return t===void 0&&(t=""),t.toString()}function qpe(t,e){var n=[0,1,2,3,4,5,6,7,8,9].map(function(i){return i.toLocaleString(e)}),r=n.indexOf(t);return r!==-1?r:t}function Ul(t,e){var n=""+t;if(parseFloat(n).toString()===t.toString())return t.toString();if(e!==void 0){var r=fj(e),i=Ym(n,e);return i.split("").map(function(a){return qpe(a,e)}).join("").replace(r,".")}return t.toString()}function Kpe(t,e){var n=Ul(t,e);return t!=null&&n-parseFloat(n)+1>=0}function Xpe(t,e){if(t.key==null||t.ctrlKey||t.altKey||t.metaKey)return!0;var n=t.key.length===1;return n?hj(t.key,e):!0}function hj(t,e){if(e!==void 0){var n=fj(e).replace(".","\\."),r=[0,1,2,3,4,5,6,7,8,9].map(function(o){return o.toLocaleString(e)}).join(""),i=new RegExp("^[Ee"+r+"\\+\\-"+n+"]$");return i.test(t)}else{var a=/^[Ee0-9\+\-\.]$/;return a.test(t)}}function Ype(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function Zpe(t){return t.replace(/[\uFF10-\uFF19]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}function Ym(t,e){var n=Zpe(t).split(""),r=n.filter(function(i){return hj(i,e)});return r.join("")}var Tp;(function(t){t[t.DOWN=-1]="DOWN",t[t.UP=1]="UP"})(Tp||(Tp={}));var Qpe=["allowNumericCharactersOnly","buttonPosition","clampValueOnBlur","className","defaultValue","majorStepSize","minorStepSize","onButtonClick","onValueChange","selectAllOnFocus","selectAllOnIncrement","stepSize"],Jpe=function(t){Ln(e,t);function e(){var n,r=t.apply(this,arguments)||this;return r.numericInputId=kH("numericInput"),r.state={currentImeInputInvalid:!1,shouldSelectAfterUpdate:!1,stepMaxPrecision:e.getStepMaxPrecision(r.props),value:jpe((n=r.props.value)!==null&&n!==void 0?n:r.props.defaultValue)},r.didPasteEventJustOccur=!1,r.delta=0,r.inputElement=null,r.inputRef=Fk(r,"inputElement",r.props.inputRef),r.incrementButtonHandlers=r.getButtonEventHandlers(Tp.UP),r.decrementButtonHandlers=r.getButtonEventHandlers(Tp.DOWN),r.getCurrentValueAsNumber=function(){return Number(Ul(r.state.value,r.props.locale))},r.handleButtonClick=function(i,a){var o,s,l=r.updateDelta(a,i),u=r.incrementValue(l);(s=(o=r.props).onButtonClick)===null||s===void 0||s.call(o,Number(Ul(u,r.props.locale)),u)},r.stopContinuousChange=function(){r.delta=0,r.clearTimeouts(),clearInterval(r.intervalId),document.removeEventListener("mouseup",r.stopContinuousChange)},r.handleContinuousChange=function(){var i,a,o,s;if(r.props.min!==void 0||r.props.max!==void 0){var l=(i=r.props.min)!==null&&i!==void 0?i:-1/0,u=(a=r.props.max)!==null&&a!==void 0?a:1/0,c=r.getCurrentValueAsNumber();if(c<=l||c>=u){r.stopContinuousChange();return}}var f=r.incrementValue(r.delta);(s=(o=r.props).onButtonClick)===null||s===void 0||s.call(o,Number(Ul(f,r.props.locale)),f)},r.handleInputFocus=function(i){var a,o;r.setState({shouldSelectAfterUpdate:r.props.selectAllOnFocus}),(o=(a=r.props).onFocus)===null||o===void 0||o.call(a,i)},r.handleInputBlur=function(i){var a,o;if(r.setState({shouldSelectAfterUpdate:!1}),r.props.clampValueOnBlur){var s=i.target.value;r.handleNextValue(r.roundAndClampValue(s))}(o=(a=r.props).onBlur)===null||o===void 0||o.call(a,i)},r.handleInputKeyDown=function(i){var a,o;if(!(r.props.disabled||r.props.readOnly)){var s;if(i.key==="ArrowUp"?s=Tp.UP:i.key==="ArrowDown"&&(s=Tp.DOWN),s!==void 0){i.preventDefault();var l=r.updateDelta(s,i);r.incrementValue(l)}(o=(a=r.props).onKeyDown)===null||o===void 0||o.call(a,i)}},r.handleCompositionEnd=function(i){r.props.allowNumericCharactersOnly&&(r.handleNextValue(Ym(i.data,r.props.locale)),r.setState({currentImeInputInvalid:!1}))},r.handleCompositionUpdate=function(i){if(r.props.allowNumericCharactersOnly){var a=i.data,o=Ym(a,r.props.locale);o.length===0&&a.length>0?r.setState({currentImeInputInvalid:!0}):r.setState({currentImeInputInvalid:!1})}},r.handleInputKeyPress=function(i){var a,o;r.props.allowNumericCharactersOnly&&!Xpe(i,r.props.locale)&&i.preventDefault(),(o=(a=r.props).onKeyPress)===null||o===void 0||o.call(a,i)},r.handleInputPaste=function(i){var a,o;r.didPasteEventJustOccur=!0,(o=(a=r.props).onPaste)===null||o===void 0||o.call(a,i)},r.handleInputChange=function(i){var a=i;r.props.allowNumericCharactersOnly&&r.didPasteEventJustOccur&&(r.didPasteEventJustOccur=!1,a=Ym(i,r.props.locale)),r.handleNextValue(a),r.setState({shouldSelectAfterUpdate:!1})},r}return e.getDerivedStateFromProps=function(n,r){var i,a,o={prevMaxProp:n.max,prevMinProp:n.min},s=n.min!==r.prevMinProp,l=n.max!==r.prevMaxProp,u=s||l,c=(a=(i=n.value)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:r.value,f=e.getStepMaxPrecision(n),h=c!==e.VALUE_EMPTY?e.roundAndClampValue(c,f,n.min,n.max,0,n.locale):e.VALUE_EMPTY;return u&&h!==r.value?de(de({},o),{stepMaxPrecision:f,value:h}):de(de({},o),{stepMaxPrecision:f,value:c})},e.getStepMaxPrecision=function(n){return n.minorStepSize!=null?Iz(n.minorStepSize):Iz(n.stepSize)},e.roundAndClampValue=function(n,r,i,a,o,s){if(o===void 0&&(o=0),!Kpe(n,s))return e.VALUE_EMPTY;var l=Ul(n,s),u=Ype(Number(l)+o,r),c=Hpe(u,i,a);return yE(c,s)},e.prototype.render=function(){var n,r=this.props,i=r.buttonPosition,a=r.className,o=r.fill,s=r.large,l=r.small,u=Ze(afe,(n={},n[ks]=s,n[dv]=l,n),a),c=this.renderButtons();return L.createElement(ng,{className:u,fill:o},i===tn.LEFT&&c,this.renderInput(),i===tn.RIGHT&&c)},e.prototype.componentDidUpdate=function(n,r){var i,a,o;t.prototype.componentDidUpdate.call(this,n,r),n.inputRef!==this.props.inputRef&&(SC(n.inputRef,null),this.inputRef=Fk(this,"inputElement",this.props.inputRef),SC(this.props.inputRef,this.inputElement)),this.state.shouldSelectAfterUpdate&&((i=this.inputElement)===null||i===void 0||i.setSelectionRange(0,this.state.value.length));var s=this.props.min!==n.min,l=this.props.max!==n.max,u=s||l,c=this.props.locale!==n.locale,f=this.state.value!==r.value;if(u&&f||c&&r.value!==e.VALUE_EMPTY){var h=c?r.value:this.state.value,d=Ul(h,n.locale),p=yE(+d,this.props.locale);(o=(a=this.props).onValueChange)===null||o===void 0||o.call(a,+d,p,this.inputElement)}},e.prototype.validateProps=function(n){var r=n.majorStepSize,i=n.max,a=n.min,o=n.minorStepSize,s=n.stepSize,l=n.value;if(a!=null&&i!=null&&a>i&&console.error(Ufe),s<=0&&console.error(Kfe),o&&o<=0&&console.error(jfe),r&&r<=0&&console.error(qfe),o&&o>s&&console.error(Gfe),r&&r<s&&console.error(Hfe),l!=null){var u=e.getStepMaxPrecision(n),c=e.roundAndClampValue(l.toString(),u,a,i,0,this.props.locale),f=c!==l.toString(),h=yE(Number(Ul(l,this.props.locale)),this.props.locale),d=c!==h;f&&d&&console.warn(Xfe)}},e.prototype.renderButtons=function(){var n=this.props,r=n.intent,i=n.max,a=n.min,o=n.locale,s=Ul(this.state.value,o),l=this.props.disabled||this.props.readOnly,u=i!==void 0&&s!==""&&+s>=i,c=a!==void 0&&s!==""&&+s<=a;return L.createElement(MS,{className:oce,key:"button-group",vertical:!0},L.createElement(Wt,de({"aria-label":"increment","aria-controls":this.numericInputId,disabled:l||u,icon:L.createElement(EM,null),intent:r},this.incrementButtonHandlers)),L.createElement(Wt,de({"aria-label":"decrement","aria-controls":this.numericInputId,disabled:l||c,icon:L.createElement(TM,null),intent:r},this.decrementButtonHandlers)))},e.prototype.renderInput=function(){var n=Oc(this.props,Qpe,!0),r=this.getCurrentValueAsNumber();return L.createElement(_i,de({asyncControl:this.props.asyncControl,autoComplete:"off",id:this.numericInputId,role:this.props.allowNumericCharactersOnly?"spinbutton":void 0},n,{"aria-valuemax":this.props.max,"aria-valuemin":this.props.min,"aria-valuenow":r,intent:this.state.currentImeInputInvalid?At.DANGER:this.props.intent,inputClassName:this.props.inputClassName,inputRef:this.inputRef,large:this.props.large,leftElement:this.props.leftElement,leftIcon:this.props.leftIcon,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onCompositionEnd:this.handleCompositionEnd,onCompositionUpdate:this.handleCompositionUpdate,onKeyDown:this.handleInputKeyDown,onKeyPress:this.handleInputKeyPress,onPaste:this.handleInputPaste,onValueChange:this.handleInputChange,rightElement:this.props.rightElement,small:this.props.small,value:this.state.value}))},e.prototype.getButtonEventHandlers=function(n){var r=this;return{onKeyDown:function(i){!r.props.disabled&&M0(i)&&r.handleButtonClick(i,n)},onMouseDown:function(i){r.props.disabled||(r.handleButtonClick(i,n),r.startContinuousChange())}}},e.prototype.startContinuousChange=function(){var n=this;document.addEventListener("mouseup",this.stopContinuousChange),this.setTimeout(function(){n.intervalId=window.setInterval(n.handleContinuousChange,e.CONTINUOUS_CHANGE_INTERVAL)},e.CONTINUOUS_CHANGE_DELAY)},e.prototype.handleNextValue=function(n){var r,i;this.props.value==null&&this.setState({value:n}),(i=(r=this.props).onValueChange)===null||i===void 0||i.call(r,Number(Ul(n,this.props.locale)),n,this.inputElement)},e.prototype.incrementValue=function(n){var r=this.state.value===e.VALUE_EMPTY?e.VALUE_ZERO:this.state.value,i=this.roundAndClampValue(r,n);return i!==this.state.value&&(this.handleNextValue(i),this.setState({shouldSelectAfterUpdate:this.props.selectAllOnIncrement})),i},e.prototype.getIncrementDelta=function(n,r,i){var a=this.props,o=a.majorStepSize,s=a.minorStepSize,l=a.stepSize;return r&&o!=null?n*o:i&&s!=null?n*s:n*l},e.prototype.roundAndClampValue=function(n,r){return r===void 0&&(r=0),e.roundAndClampValue(n,this.state.stepMaxPrecision,this.props.min,this.props.max,r,this.props.locale)},e.prototype.updateDelta=function(n,r){return this.delta=this.getIncrementDelta(n,r.shiftKey,r.altKey),this.delta},e.displayName="".concat(gt,".NumericInput"),e.VALUE_EMPTY="",e.VALUE_ZERO="0",e.defaultProps={allowNumericCharactersOnly:!0,buttonPosition:tn.RIGHT,clampValueOnBlur:!1,defaultValue:e.VALUE_EMPTY,large:!1,majorStepSize:10,minorStepSize:.1,selectAllOnFocus:!1,selectAllOnIncrement:!1,small:!1,stepSize:1},e.CONTINUOUS_CHANGE_DELAY=300,e.CONTINUOUS_CHANGE_INTERVAL=100,e}(lr);function eve(t){var e=L.useState(function(){var a;return(a=t.defaultChecked)!==null&&a!==void 0?a:!1}),n=e[0],r=e[1];L.useEffect(function(){t.checked!==void 0&&r(t.checked)},[t.checked]);var i=L.useCallback(function(a){var o;r(function(s){return!s}),(o=t.onChange)===null||o===void 0||o.call(t,a)},[t.onChange]);return{checked:n,onChange:i}}var UM=L.forwardRef(function(t,e){var n,r=t.alignIndicator;t.checked;var i=t.children,a=t.className,o=t.controlKind;t.defaultChecked;var s=t.disabled,l=t.inputProps,u=t.inputRef,c=t.label;t.onChange;var f=t.showAsSelectedWhenChecked,h=t.value,d=yn(t,["alignIndicator","checked","children","className","controlKind","defaultChecked","disabled","inputProps","inputRef","label","onChange","showAsSelectedWhenChecked","value"]),p=eve(t),v=p.checked,m=p.onChange,g=L.createElement("div",{className:xce},i??c),y=de({alignIndicator:r,checked:v,disabled:s,inline:!0,inputRef:u,labelElement:g,onChange:m,value:h},l),x=Ze(bH,a,(n={},n[wM]=f&&v,n));return L.createElement(Il,de({interactive:!s,className:x,ref:e},d),o==="switch"?L.createElement(F0,de({},y)):o==="checkbox"?L.createElement(cj,de({},y)):o==="radio"?L.createElement(yv,de({},y)):g)});UM.defaultProps={alignIndicator:"right",showAsSelectedWhenChecked:!0};UM.displayName="".concat(gt,".ControlCard");var dj=L.forwardRef(function(t,e){var n=Ze(t.className,wce);return L.createElement(UM,de({},t,{className:n,controlKind:"radio",ref:e}))});dj.displayName="".concat(gt,".RadioCard");var tve=0;function nve(){return"".concat(pj.displayName,"-").concat(tve++)}var pj=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.autoGroupName=nve(),n}return e.prototype.render=function(){var n=this.props.label;return L.createElement("div",{className:Ze(Uce,this.props.className)},n==null?null:L.createElement("label",{className:CM},n),Array.isArray(this.props.options)?this.renderOptions():this.renderChildren())},e.prototype.validateProps=function(){this.props.children!=null&&this.props.options!=null&&console.warn(she)},e.prototype.renderChildren=function(){var n=this;return L.Children.map(this.props.children,function(r){return Pk(r,yv)||Pk(r,dj)?L.cloneElement(r,n.getRadioProps(r.props)):r})},e.prototype.renderOptions=function(){var n=this,r;return(r=this.props.options)===null||r===void 0?void 0:r.map(function(i){return L.createElement(yv,de({},n.getRadioProps(i),{key:i.value,labelElement:i.label||i.value}))})},e.prototype.getRadioProps=function(n){var r=this.props.name,i=n.className,a=n.disabled,o=n.value;return{checked:o===this.props.selectedValue,className:i,disabled:a||this.props.disabled,inline:this.props.inline,name:r??this.autoGroupName,onChange:this.props.onChange,value:o}},e.displayName="".concat(gt,".RadioGroup"),e}(lr),vj=L.forwardRef(function(t,e){var n,r=t.className,i=t.children,a=t.disabled,o=t.fill,s=t.iconName,l=s===void 0?"double-caret-vertical":s,u=t.iconProps,c=t.large,f=t.minimal,h=t.options,d=h===void 0?[]:h,p=t.value,v=yn(t,["className","children","disabled","fill","iconName","iconProps","large","minimal","options","value"]),m=Ze(Fce,(n={},n[fd]=a,n[Ns]=o,n[ks]=c,n[My]=f,n),r),g="Open dropdown",y=l==="double-caret-vertical"?L.createElement(NM,de({title:g},u)):L.createElement(DM,de({title:g},u)),x=d.map(function(w){var b=typeof w=="object"?w:{value:w};return L.createElement("option",de({},b,{key:b.value,children:b.label||b.value}))});return L.createElement("div",{className:m},L.createElement("select",de({disabled:a,ref:e,value:p},v,{multiple:!1}),x,i),y)});vj.displayName="".concat(gt,".HTMLSelect");var cs=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.className,i=n.title,a=n.titleId;return i==null?L.createElement("li",{className:Ze(Jce,r),role:"separator"}):L.createElement("li",{className:Ze(efe,r),role:"separator"},L.createElement(VH,{id:a},i))},e.displayName="".concat(gt,".MenuDivider"),e}(L.Component),o5=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.align,i=n.children,a=n.className,o=yn(n,["align","children","className"]),s=Ze(nfe,ES(r),a);return L.createElement("div",de({className:s},o),i)},e.displayName="".concat(gt,".NavbarGroup"),e.defaultProps={align:$k.LEFT},e}(lr),Gk;(function(t){t[t.STANDARD=48]="STANDARD",t[t.SMALL=32]="SMALL",t[t.EXTRA_SMALL=20]="EXTRA_SMALL"})(Gk||(Gk={}));var gj=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.action,i=n.children,a=n.className,o=n.layout;return L.createElement("div",{className:Ze(bC,"".concat(bC,"-").concat(o),a)},this.maybeRenderVisual(),this.maybeRenderText(),r,i)},e.prototype.maybeRenderVisual=function(){var n,r=this.props,i=r.icon,a=r.iconMuted,o=r.iconSize;if(i!=null)return L.createElement("div",{className:rfe,style:{fontSize:"".concat(o,"px"),lineHeight:"".concat(o,"px")}},L.createElement(ri,{className:Ze((n={},n[Pfe]=a,n)),icon:i,size:o,"aria-hidden":!0,tabIndex:-1}))},e.prototype.maybeRenderText=function(){var n=this.props,r=n.description,i=n.title;if(!(i==null&&r==null))return L.createElement("div",{className:ife},i&&L.createElement(BH,null,i),r&&IH(r,"div"))},e.displayName="".concat(gt,".NonIdealState"),e.defaultProps={iconMuted:!0,iconSize:Gk.STANDARD,layout:"vertical"},e}(lr),rve=function(t){Ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n,r=this.props,i=r.animate,a=i===void 0?!0:i,o=r.className,s=r.intent,l=r.stripes,u=l===void 0?!0:l,c=r.value,f=Ze(wfe,ji(s),(n={},n[Sfe]=!a,n[Cfe]=!u,n),o),h=c==null?void 0:100*SM(c,0,1),d=h==null?void 0:h+"%";return L.createElement("div",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":h==null?void 0:Math.round(h),className:f,role:"progressbar"},L.createElement("div",{className:bfe,style:{width:d}}))},e.displayName="".concat(gt,".ProgressBar"),e}(lr),hd=L.forwardRef(function(t,e){var n,r=t.className,i=t.defaultValue,a=t.fill,o=t.inline,s=t.intent,l=t.large,u=t.onValueChange,c=t.options,f=t.small,h=t.value,d=yn(t,["className","defaultValue","fill","inline","intent","large","onValueChange","options","small","value"]),p=L.useState(i),v=p[0],m=p[1],g=h??v,y=L.useCallback(function(w,b){m(w),u==null||u(w,b)},[u]),x=Ze(kfe,r,(n={},n[Ns]=a,n[xM]=o,n));return L.createElement("div",de({className:x,ref:e},Oc(d)),c.map(function(w){return L.createElement(mj,de({},w,{intent:s,isSelected:g===w.value,key:w.value,large:l,onClick:y,small:f}))}))});hd.defaultProps={defaultValue:void 0,intent:At.NONE};hd.displayName="".concat(gt,".SegmentedControl");function mj(t){var e=t.isSelected,n=t.label,r=t.onClick,i=t.value,a=yn(t,["isSelected","label","onClick","value"]),o=L.useCallback(function(s){return r==null?void 0:r(i,s.currentTarget)},[r,i]);return L.createElement(Wt,de({onClick:o,minimal:!e,text:n},a))}mj.displayName="".concat(gt,".SegmentedControlOption");var L0=L.forwardRef(function(t,e){var n,r=t.active,i=t.children,a=t.className,o=t.fill,s=t.icon,l=t.intent,u=t.interactive,c=t.large,f=t.minimal,h=t.multiline,d=t.onRemove,p=t.rightIcon,v=t.round,m=t.tabIndex,g=m===void 0?0:m,y=t.htmlTitle,x=yn(t,["active","children","className","fill","icon","intent","interactive","large","minimal","multiline","onRemove","rightIcon","round","tabIndex","htmlTitle"]),w=_p(d),b=Ze(EH,ji(l),(n={},n[R0]=r,n[Ns]=o,n[mH]=u,n[ks]=c,n[My]=f,n[yH]=v,n),a),C=c||b.indexOf(ks)>=0,S=function(_){var T;(T=t.onRemove)===null||T===void 0||T.call(t,_,t)},D=w?L.createElement("button",{"aria-label":"Remove tag",type:"button",className:Ife,onClick:S,tabIndex:g},L.createElement(zy,{size:C?Qe.LARGE:Qe.STANDARD})):null;return L.createElement("span",de({},x,{className:b,tabIndex:u?g:void 0,ref:e}),L.createElement(ri,{icon:s}),!CC(i)&&L.createElement(By,{className:Ns,ellipsize:!h,tagName:"span",title:y},i),L.createElement(ri,{icon:p}),D)});L0.displayName="".concat(gt,".Tag");var yj=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handleActionClick=function(r){var i,a;(a=(i=n.props.action)===null||i===void 0?void 0:i.onClick)===null||a===void 0||a.call(i,r),n.triggerDismiss(!1)},n.handleCloseClick=function(){return n.triggerDismiss(!1)},n.startTimeout=function(){n.clearTimeouts(),n.props.timeout>0&&n.setTimeout(function(){return n.triggerDismiss(!0)},n.props.timeout)},n}return e.prototype.render=function(){var n=this.props,r=n.className,i=n.icon,a=n.intent,o=n.message,s=n.isCloseButtonShown;return L.createElement("div",{className:Ze(_S,ji(a),r),onBlur:this.startTimeout,onFocus:this.clearTimeouts,onMouseEnter:this.clearTimeouts,onMouseLeave:this.startTimeout,tabIndex:0},L.createElement(ri,{icon:i}),L.createElement("span",{className:Rfe,role:"alert"},o),L.createElement(MS,{minimal:!0},this.maybeRenderActionButton(),s&&L.createElement(Wt,{"aria-label":"Close",icon:L.createElement(AM,null),onClick:this.handleCloseClick})))},e.prototype.componentDidMount=function(){this.startTimeout()},e.prototype.componentDidUpdate=function(n){n.timeout!==this.props.timeout&&(this.props.timeout>0?this.startTimeout():this.clearTimeouts())},e.prototype.componentWillUnmount=function(){this.clearTimeouts()},e.prototype.maybeRenderActionButton=function(){var n=this.props.action;if(n!=null)return L.createElement(FH,de({},n,{intent:void 0,onClick:this.handleActionClick}))},e.prototype.triggerDismiss=function(n){var r,i;this.clearTimeouts(),(i=(r=this.props).onDismiss)===null||i===void 0||i.call(r,n)},e.defaultProps={className:"",isCloseButtonShown:!0,message:"",timeout:5e3},e.displayName="".concat(gt,".Toast"),e}(lr),ive=function(t){Ln(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={toasts:[]},n.toastId=0,n.renderToast=function(r){return L.createElement(yj,de({},r,{onDismiss:n.getDismissHandler(r)}))},n.getDismissHandler=function(r){return function(i){n.dismiss(r.key,i)}},n.handleClose=function(r){r.key==="Escape"&&n.clear()},n}return e.create=function(n,r){r===void 0&&(r=document.body),n!=null&&n.usePortal!=null&&!$0("production")&&console.warn(kz);var i=document.createElement("div");r.appendChild(i);var a=hu.render(L.createElement(e,de({},n,{usePortal:!1})),i);if(a==null)throw new Error(uhe);return a},e.createAsync=function(n,r){var i,a;n!=null&&n.usePortal!=null&&!$0("production")&&console.warn(kz);var o=(i=r==null?void 0:r.container)!==null&&i!==void 0?i:document.body,s=(a=r==null?void 0:r.domRenderer)!==null&&a!==void 0?a:hu.render,l=document.createElement("div");return o.appendChild(l),new Promise(function(u,c){try{s(L.createElement(e,de({},n,{ref:f,usePortal:!1})),l)}catch(h){c(h)}function f(h){if(h==null){c(new Error(che));return}u(h)}})},e.prototype.show=function(n,r){this.props.maxToasts&&this.dismissIfAtLimit();var i=this.createToastOptions(n,r);return r===void 0||this.isNewToastKey(r)?this.setState(function(a){return{toasts:xh([i],a.toasts,!0)}}):this.setState(function(a){return{toasts:a.toasts.map(function(o){return o.key===r?i:o})}}),i.key},e.prototype.dismiss=function(n,r){r===void 0&&(r=!1),this.setState(function(i){var a=i.toasts;return{toasts:a.filter(function(o){var s,l=o.key===n;return l&&((s=o.onDismiss)===null||s===void 0||s.call(o,r)),!l})}})},e.prototype.clear=function(){this.state.toasts.forEach(function(n){var r;return(r=n.onDismiss)===null||r===void 0?void 0:r.call(n,!1)}),this.setState({toasts:[]})},e.prototype.getToasts=function(){return this.state.toasts},e.prototype.render=function(){var n=Ze(pE,this.getPositionClasses(),this.props.className);return L.createElement(IS,{autoFocus:this.props.autoFocus,canEscapeKeyClose:this.props.canEscapeKeyClear,canOutsideClickClose:!1,className:n,enforceFocus:!1,hasBackdrop:!1,isOpen:this.state.toasts.length>0||this.props.children!=null,onClose:this.handleClose,shouldReturnFocusOnClose:!1,transitionDuration:350,transitionName:_S,usePortal:this.props.usePortal},this.state.toasts.map(this.renderToast,this),this.props.children)},e.prototype.validateProps=function(n){var r=n.maxToasts;if(r!==void 0&&r<1)throw new Error(fhe)},e.prototype.isNewToastKey=function(n){return this.state.toasts.every(function(r){return r.key!==n})},e.prototype.dismissIfAtLimit=function(){this.state.toasts.length===this.props.maxToasts&&this.dismiss(this.state.toasts[this.state.toasts.length-1].key)},e.prototype.createToastOptions=function(n,r){return r===void 0&&(r="toast-".concat(this.toastId++)),de(de({},n),{key:r})},e.prototype.getPositionClasses=function(){var n=this.props.position.split("-");return xh(xh([],n.map(function(r){return"".concat(pE,"-").concat(r.toLowerCase())}),!0),["".concat(pE,"-").concat(this.props.usePortal?"in-portal":"inline")],!1)},e.displayName="".concat(gt,".OverlayToaster"),e.defaultProps={autoFocus:!1,canEscapeKeyClear:!0,position:tn.TOP,usePortal:!0},e}(lr),xj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s5=An.createContext&&An.createContext(xj),Sc=globalThis&&globalThis.__assign||function(){return Sc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sc.apply(this,arguments)},ave=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wj(t){return t&&t.map(function(e,n){return An.createElement(e.tag,Sc({key:n},e.attr),wj(e.child))})}function kn(t){return function(e){return An.createElement(ove,Sc({attr:Sc({},t.attr)},e),wj(t.child))}}function ove(t){var e=function(n){var r=t.attr,i=t.size,a=t.title,o=ave(t,["attr","size","title"]),s=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),An.createElement("svg",Sc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Sc(Sc({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&An.createElement("title",null,a),t.children)};return s5!==void 0?An.createElement(s5.Consumer,null,function(n){return e(n)}):e(xj)}function bj(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M5 12l14 0"}},{tag:"path",attr:{d:"M13 18l6 -6"}},{tag:"path",attr:{d:"M13 6l6 6"}}]})(t)}function sve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 12l8 -4.5"}},{tag:"path",attr:{d:"M12 12v9"}},{tag:"path",attr:{d:"M12 12l-8 -4.5"}},{tag:"path",attr:{d:"M12 12l8 4.5"}},{tag:"path",attr:{d:"M12 3v9"}},{tag:"path",attr:{d:"M12 12l-8 4.5"}}]})(t)}function lve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M3 3v18h18"}},{tag:"path",attr:{d:"M20 18v3"}},{tag:"path",attr:{d:"M16 16v5"}},{tag:"path",attr:{d:"M12 13v8"}},{tag:"path",attr:{d:"M8 16v5"}},{tag:"path",attr:{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5"}}]})(t)}function uve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3"}},{tag:"path",attr:{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241"}},{tag:"path",attr:{d:"M20 12v-6"}},{tag:"path",attr:{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005"}},{tag:"path",attr:{d:"M16 19h6"}},{tag:"path",attr:{d:"M19 16l3 3l-3 3"}}]})(t)}function cve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 8h3a1 1 0 0 1 1 1v3"}},{tag:"path",attr:{d:"M16 16h-7a1 1 0 0 1 -1 -1v-7"}},{tag:"path",attr:{d:"M12 20v.01"}},{tag:"path",attr:{d:"M16 20v.01"}},{tag:"path",attr:{d:"M8 20v.01"}},{tag:"path",attr:{d:"M4 20v.01"}},{tag:"path",attr:{d:"M4 16v.01"}},{tag:"path",attr:{d:"M4 12v.01"}},{tag:"path",attr:{d:"M4 8v.01"}},{tag:"path",attr:{d:"M8 4v.01"}},{tag:"path",attr:{d:"M12 4v.01"}},{tag:"path",attr:{d:"M16 4v.01"}},{tag:"path",attr:{d:"M20 4v.01"}},{tag:"path",attr:{d:"M20 8v.01"}},{tag:"path",attr:{d:"M20 12v.01"}},{tag:"path",attr:{d:"M20 16v.01"}},{tag:"path",attr:{d:"M3 3l18 18"}}]})(t)}function fve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M19 11v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}},{tag:"path",attr:{d:"M13 13l9 3l-4 2l-2 4l-3 -9"}},{tag:"path",attr:{d:"M3 3l0 .01"}},{tag:"path",attr:{d:"M7 3l0 .01"}},{tag:"path",attr:{d:"M11 3l0 .01"}},{tag:"path",attr:{d:"M15 3l0 .01"}},{tag:"path",attr:{d:"M3 7l0 .01"}},{tag:"path",attr:{d:"M3 11l0 .01"}},{tag:"path",attr:{d:"M3 15l0 .01"}}]})(t)}function hve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"}},{tag:"path",attr:{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3"}}]})(t)}function Wg(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M14 3v4a1 1 0 0 0 1 1h4"}},{tag:"path",attr:{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}}]})(t)}function Tb(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}},{tag:"path",attr:{d:"M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}}]})(t)}function Cj(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 10v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-3"}}]})(t)}function dve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}},{tag:"path",attr:{d:"M4 16v2a2 2 0 0 0 2 2h2"}},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v2"}},{tag:"path",attr:{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}},{tag:"path",attr:{d:"M12 16v-7"}},{tag:"path",attr:{d:"M9 9h6"}}]})(t)}function pve(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M3 6a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}},{tag:"path",attr:{d:"M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"}},{tag:"path",attr:{d:"M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"}},{tag:"path",attr:{d:"M15 18a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}}]})(t)}var Sj={exports:{}},Dj={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv=L;function vve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gve=typeof Object.is=="function"?Object.is:vve,mve=xv.useState,yve=xv.useEffect,xve=xv.useLayoutEffect,wve=xv.useDebugValue;function bve(t,e){var n=e(),r=mve({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return xve(function(){i.value=n,i.getSnapshot=e,xE(i)&&a({inst:i})},[t,n,e]),yve(function(){return xE(i)&&a({inst:i}),t(function(){xE(i)&&a({inst:i})})},[t]),wve(n),n}function xE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gve(t,n)}catch{return!0}}function Cve(t,e){return e()}var Sve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cve:bve;Dj.useSyncExternalStore=xv.useSyncExternalStore!==void 0?xv.useSyncExternalStore:Sve;Sj.exports=Dj;var Dve=Sj.exports,_j={exports:{}},Tj={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=L,_ve=Dve;function Tve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Eve=typeof Object.is=="function"?Object.is:Tve,Ave=_ve.useSyncExternalStore,Nve=FS.useRef,kve=FS.useEffect,Ive=FS.useMemo,Rve=FS.useDebugValue;Tj.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=Nve(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Ive(function(){function l(d){if(!u){if(u=!0,c=d,d=r(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,Eve(c,d))return p;var v=r(d);return i!==void 0&&i(p,v)?p:(c=d,f=v)}var u=!1,c,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var s=Ave(t,a[0],a[1]);return kve(function(){o.hasValue=!0,o.value=s},[s]),Rve(s),s};_j.exports=Tj;var $ve=_j.exports;function Mve(t){t()}let Ej=Mve;const Ove=t=>Ej=t,Pve=()=>Ej,l5=Symbol.for(`react-redux-context-${L.version}`),u5=globalThis;function Fve(){let t=u5[l5];return t||(t=L.createContext(null),u5[l5]=t),t}const Pc=new Proxy({},new Proxy({},{get(t,e){const n=Fve();return(r,...i)=>Reflect[e](n,...i)}}));function GM(t=Pc){return function(){return L.useContext(t)}}const Aj=GM(),Lve=()=>{throw new Error("uSES not initialized!")};let Nj=Lve;const zve=t=>{Nj=t},Bve=(t,e)=>t===e;function Vve(t=Pc){const e=t===Pc?Aj:GM(t);return function(r,i={}){const{equalityFn:a=Bve,stabilityCheck:o=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:c,stabilityCheck:f,noopCheck:h}=e();L.useRef(!0);const d=L.useCallback({[r.name](v){return r(v)}}[r.name],[r,f,o]),p=Nj(u.addNestedSub,l.getState,c||l.getState,d,a);return L.useDebugValue(p),p}}const mn=Vve();var kj={exports:{}},en={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=typeof Symbol=="function"&&Symbol.for,HM=Wr?Symbol.for("react.element"):60103,jM=Wr?Symbol.for("react.portal"):60106,LS=Wr?Symbol.for("react.fragment"):60107,zS=Wr?Symbol.for("react.strict_mode"):60108,BS=Wr?Symbol.for("react.profiler"):60114,VS=Wr?Symbol.for("react.provider"):60109,WS=Wr?Symbol.for("react.context"):60110,qM=Wr?Symbol.for("react.async_mode"):60111,US=Wr?Symbol.for("react.concurrent_mode"):60111,GS=Wr?Symbol.for("react.forward_ref"):60112,HS=Wr?Symbol.for("react.suspense"):60113,Wve=Wr?Symbol.for("react.suspense_list"):60120,jS=Wr?Symbol.for("react.memo"):60115,qS=Wr?Symbol.for("react.lazy"):60116,Uve=Wr?Symbol.for("react.block"):60121,Gve=Wr?Symbol.for("react.fundamental"):60117,Hve=Wr?Symbol.for("react.responder"):60118,jve=Wr?Symbol.for("react.scope"):60119;function eo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case HM:switch(t=t.type,t){case qM:case US:case LS:case BS:case zS:case HS:return t;default:switch(t=t&&t.$$typeof,t){case WS:case GS:case qS:case jS:case VS:return t;default:return e}}case jM:return e}}}function Ij(t){return eo(t)===US}en.AsyncMode=qM;en.ConcurrentMode=US;en.ContextConsumer=WS;en.ContextProvider=VS;en.Element=HM;en.ForwardRef=GS;en.Fragment=LS;en.Lazy=qS;en.Memo=jS;en.Portal=jM;en.Profiler=BS;en.StrictMode=zS;en.Suspense=HS;en.isAsyncMode=function(t){return Ij(t)||eo(t)===qM};en.isConcurrentMode=Ij;en.isContextConsumer=function(t){return eo(t)===WS};en.isContextProvider=function(t){return eo(t)===VS};en.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===HM};en.isForwardRef=function(t){return eo(t)===GS};en.isFragment=function(t){return eo(t)===LS};en.isLazy=function(t){return eo(t)===qS};en.isMemo=function(t){return eo(t)===jS};en.isPortal=function(t){return eo(t)===jM};en.isProfiler=function(t){return eo(t)===BS};en.isStrictMode=function(t){return eo(t)===zS};en.isSuspense=function(t){return eo(t)===HS};en.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===LS||t===US||t===BS||t===zS||t===HS||t===Wve||typeof t=="object"&&t!==null&&(t.$$typeof===qS||t.$$typeof===jS||t.$$typeof===VS||t.$$typeof===WS||t.$$typeof===GS||t.$$typeof===Gve||t.$$typeof===Hve||t.$$typeof===jve||t.$$typeof===Uve)};en.typeOf=eo;kj.exports=en;var qve=kj.exports,Rj=qve,Kve={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xve={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$j={};$j[Rj.ForwardRef]=Kve;$j[Rj.Memo]=Xve;var on={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM=Symbol.for("react.element"),XM=Symbol.for("react.portal"),KS=Symbol.for("react.fragment"),XS=Symbol.for("react.strict_mode"),YS=Symbol.for("react.profiler"),ZS=Symbol.for("react.provider"),QS=Symbol.for("react.context"),Yve=Symbol.for("react.server_context"),JS=Symbol.for("react.forward_ref"),eD=Symbol.for("react.suspense"),tD=Symbol.for("react.suspense_list"),nD=Symbol.for("react.memo"),rD=Symbol.for("react.lazy"),Zve=Symbol.for("react.offscreen"),Mj;Mj=Symbol.for("react.module.reference");function Go(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case KM:switch(t=t.type,t){case KS:case YS:case XS:case eD:case tD:return t;default:switch(t=t&&t.$$typeof,t){case Yve:case QS:case JS:case rD:case nD:case ZS:return t;default:return e}}case XM:return e}}}on.ContextConsumer=QS;on.ContextProvider=ZS;on.Element=KM;on.ForwardRef=JS;on.Fragment=KS;on.Lazy=rD;on.Memo=nD;on.Portal=XM;on.Profiler=YS;on.StrictMode=XS;on.Suspense=eD;on.SuspenseList=tD;on.isAsyncMode=function(){return!1};on.isConcurrentMode=function(){return!1};on.isContextConsumer=function(t){return Go(t)===QS};on.isContextProvider=function(t){return Go(t)===ZS};on.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===KM};on.isForwardRef=function(t){return Go(t)===JS};on.isFragment=function(t){return Go(t)===KS};on.isLazy=function(t){return Go(t)===rD};on.isMemo=function(t){return Go(t)===nD};on.isPortal=function(t){return Go(t)===XM};on.isProfiler=function(t){return Go(t)===YS};on.isStrictMode=function(t){return Go(t)===XS};on.isSuspense=function(t){return Go(t)===eD};on.isSuspenseList=function(t){return Go(t)===tD};on.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===KS||t===YS||t===XS||t===eD||t===tD||t===Zve||typeof t=="object"&&t!==null&&(t.$$typeof===rD||t.$$typeof===nD||t.$$typeof===ZS||t.$$typeof===QS||t.$$typeof===JS||t.$$typeof===Mj||t.getModuleId!==void 0)};on.typeOf=Go;function Qve(){const t=Pve();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,a=n={callback:r,next:null,prev:n};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const c5={notify(){},get:()=>[]};function Jve(t,e){let n,r=c5;function i(f){return l(),r.subscribe(f)}function a(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function s(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=Qve())}function u(){n&&(n(),n=void 0,r.clear(),r=c5)}const c={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>r};return c}const ege=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tge=ege?L.useLayoutEffect:L.useEffect;function nge({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:a="once"}){const o=L.useMemo(()=>{const u=Jve(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:a}},[t,r,i,a]),s=L.useMemo(()=>t.getState(),[t]);tge(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const l=e||Pc;return An.createElement(l.Provider,{value:o},n)}function Oj(t=Pc){const e=t===Pc?Aj:GM(t);return function(){const{store:r}=e();return r}}const Pj=Oj();function rge(t=Pc){const e=t===Pc?Pj:Oj(t);return function(){return e().dispatch}}const zn=rge();zve($ve.useSyncExternalStoreWithSelector);Ove(hu.unstable_batchedUpdates);function vs(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fc(t){return!!t&&!!t[Dn]}function pu(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===hge}(t)||Array.isArray(t)||!!t[m5]||!!(!((e=t.constructor)===null||e===void 0)&&e[m5])||YM(t)||ZM(t))}function Bh(t,e,n){n===void 0&&(n=!1),rg(t)===0?(n?Object.keys:Hp)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function rg(t){var e=t[Dn];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:YM(t)?2:ZM(t)?3:0}function Gp(t,e){return rg(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ige(t,e){return rg(t)===2?t.get(e):t[e]}function Fj(t,e,n){var r=rg(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Lj(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function YM(t){return cge&&t instanceof Map}function ZM(t){return fge&&t instanceof Set}function qf(t){return t.o||t.t}function QM(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Bj(t);delete e[Dn];for(var n=Hp(e),r=0;r<n.length;r++){var i=n[r],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function JM(t,e){return e===void 0&&(e=!1),eO(t)||Fc(t)||!pu(t)||(rg(t)>1&&(t.set=t.add=t.clear=t.delete=age),Object.freeze(t),e&&Bh(t,function(n,r){return JM(r,!0)},!0)),t}function age(){vs(2)}function eO(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function fl(t){var e=Kk[t];return e||vs(18,t),e}function oge(t,e){Kk[t]||(Kk[t]=e)}function Hk(){return z0}function wE(t,e){e&&(fl("Patches"),t.u=[],t.s=[],t.v=e)}function EC(t){jk(t),t.p.forEach(sge),t.p=null}function jk(t){t===z0&&(z0=t.l)}function f5(t){return z0={p:[],l:z0,h:t,m:!0,_:0}}function sge(t){var e=t[Dn];e.i===0||e.i===1?e.j():e.g=!0}function bE(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||fl("ES5").S(e,t,r),r?(n[Dn].P&&(EC(e),vs(4)),pu(t)&&(t=AC(e,t),e.l||NC(e,t)),e.u&&fl("Patches").M(n[Dn].t,t,e.u,e.s)):t=AC(e,n,[]),EC(e),e.u&&e.v(e.u,e.s),t!==zj?t:void 0}function AC(t,e,n){if(eO(e))return e;var r=e[Dn];if(!r)return Bh(e,function(s,l){return h5(t,r,e,s,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return NC(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=QM(r.k):r.o,a=i,o=!1;r.i===3&&(a=new Set(i),i.clear(),o=!0),Bh(a,function(s,l){return h5(t,r,i,s,l,n,o)}),NC(t,i,!1),n&&t.u&&fl("Patches").N(r,n,t.u,t.s)}return r.o}function h5(t,e,n,r,i,a,o){if(Fc(i)){var s=AC(t,i,a&&e&&e.i!==3&&!Gp(e.R,r)?a.concat(r):void 0);if(Fj(n,r,s),!Fc(s))return;t.m=!1}else o&&n.add(i);if(pu(i)&&!eO(i)){if(!t.h.D&&t._<1)return;AC(t,i),e&&e.A.l||NC(t,i)}}function NC(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&JM(e,n)}function CE(t,e){var n=t[Dn];return(n?qf(n):t)[e]}function d5(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ju(t){t.P||(t.P=!0,t.l&&Ju(t.l))}function SE(t){t.o||(t.o=QM(t.t))}function qk(t,e,n){var r=YM(e)?fl("MapSet").F(e,n):ZM(e)?fl("MapSet").T(e,n):t.O?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:Hk(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},l=s,u=B0;o&&(l=[s],u=Cm);var c=Proxy.revocable(l,u),f=c.revoke,h=c.proxy;return s.k=h,s.j=f,h}(e,n):fl("ES5").J(e,n);return(n?n.A:Hk()).p.push(r),r}function lge(t){return Fc(t)||vs(22,t),function e(n){if(!pu(n))return n;var r,i=n[Dn],a=rg(n);if(i){if(!i.P&&(i.i<4||!fl("ES5").K(i)))return i.t;i.I=!0,r=p5(n,a),i.I=!1}else r=p5(n,a);return Bh(r,function(o,s){i&&ige(i.t,o)===s||Fj(r,o,e(s))}),a===3?new Set(r):r}(t)}function p5(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return QM(t)}function uge(){function t(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var l=this[Dn];return B0.get(l,a)},set:function(l){var u=this[Dn];B0.set(u,a,l)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][Dn];if(!s.P)switch(s.i){case 5:r(s)&&Ju(s);break;case 4:n(s)&&Ju(s)}}}function n(a){for(var o=a.t,s=a.k,l=Hp(s),u=l.length-1;u>=0;u--){var c=l[u];if(c!==Dn){var f=o[c];if(f===void 0&&!Gp(o,c))return!0;var h=s[c],d=h&&h[Dn];if(d?d.t!==f:!Lj(h,f))return!0}}var p=!!o[Dn];return l.length!==Hp(o).length+(p?0:1)}function r(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};oge("ES5",{J:function(a,o){var s=Array.isArray(a),l=function(c,f){if(c){for(var h=Array(f.length),d=0;d<f.length;d++)Object.defineProperty(h,""+d,t(d,!0));return h}var p=Bj(f);delete p[Dn];for(var v=Hp(p),m=0;m<v.length;m++){var g=v[m];p[g]=t(g,c||!!p[g].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(s,a),u={i:s?5:4,A:o?o.A:Hk(),P:!1,I:!1,R:{},l:o,t:a,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Dn,{value:u,writable:!0}),l},S:function(a,o,s){s?Fc(o)&&o[Dn].A===a&&e(a.p):(a.u&&function l(u){if(u&&typeof u=="object"){var c=u[Dn];if(c){var f=c.t,h=c.k,d=c.R,p=c.i;if(p===4)Bh(h,function(x){x!==Dn&&(f[x]!==void 0||Gp(f,x)?d[x]||l(h[x]):(d[x]=!0,Ju(c)))}),Bh(f,function(x){h[x]!==void 0||Gp(h,x)||(d[x]=!1,Ju(c))});else if(p===5){if(r(c)&&(Ju(c),d.length=!0),h.length<f.length)for(var v=h.length;v<f.length;v++)d[v]=!1;else for(var m=f.length;m<h.length;m++)d[m]=!0;for(var g=Math.min(h.length,f.length),y=0;y<g;y++)h.hasOwnProperty(y)||(d[y]=!0),d[y]===void 0&&l(h[y])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?n(a):r(a)}})}var v5,z0,tO=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",cge=typeof Map<"u",fge=typeof Set<"u",g5=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zj=tO?Symbol.for("immer-nothing"):((v5={})["immer-nothing"]=!0,v5),m5=tO?Symbol.for("immer-draftable"):"__$immer_draftable",Dn=tO?Symbol.for("immer-state"):"__$immer_state",hge=""+Object.prototype.constructor,Hp=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Bj=Object.getOwnPropertyDescriptors||function(t){var e={};return Hp(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Kk={},B0={get:function(t,e){if(e===Dn)return t;var n=qf(t);if(!Gp(n,e))return function(i,a,o){var s,l=d5(a,o);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!pu(r)?r:r===CE(t.t,e)?(SE(t),t.o[e]=qk(t.A.h,r,t)):r},has:function(t,e){return e in qf(t)},ownKeys:function(t){return Reflect.ownKeys(qf(t))},set:function(t,e,n){var r=d5(qf(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=CE(qf(t),e),a=i==null?void 0:i[Dn];if(a&&a.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(Lj(n,i)&&(n!==void 0||Gp(t.t,e)))return!0;SE(t),Ju(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return CE(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,SE(t),Ju(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=qf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){vs(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){vs(12)}},Cm={};Bh(B0,function(t,e){Cm[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Cm.deleteProperty=function(t,e){return Cm.set.call(this,t,e,void 0)},Cm.set=function(t,e,n){return B0.set.call(this,t[0],e,n,t[0])};var dge=function(){function t(n){var r=this;this.O=g5,this.D=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var l=r;return function(v){var m=this;v===void 0&&(v=s);for(var g=arguments.length,y=Array(g>1?g-1:0),x=1;x<g;x++)y[x-1]=arguments[x];return l.produce(v,function(w){var b;return(b=a).call.apply(b,[m,w].concat(y))})}}var u;if(typeof a!="function"&&vs(6),o!==void 0&&typeof o!="function"&&vs(7),pu(i)){var c=f5(r),f=qk(r,i,void 0),h=!0;try{u=a(f),h=!1}finally{h?EC(c):jk(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(v){return wE(c,o),bE(v,c)},function(v){throw EC(c),v}):(wE(c,o),bE(u,c))}if(!i||typeof i!="object"){if((u=a(i))===void 0&&(u=i),u===zj&&(u=void 0),r.D&&JM(u,!0),o){var d=[],p=[];fl("Patches").M(i,u,d,p),o(d,p)}return u}vs(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(d){return i.apply(void 0,[d].concat(f))})};var o,s,l=r.produce(i,a,function(u,c){o=u,s=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,s]}):[l,o,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){pu(n)||vs(8),Fc(n)&&(n=lge(n));var r=f5(this),i=qk(this,n,void 0);return i[Dn].C=!0,jk(r),i},e.finishDraft=function(n,r){var i=n&&n[Dn],a=i.A;return wE(a,r),bE(void 0,a)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!g5&&vs(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}i>-1&&(r=r.slice(i+1));var o=fl("Patches").$;return Fc(n)?o(n,r):this.produce(n,function(s){return o(s,r)})},t}(),Ka=new dge,Vj=Ka.produce;Ka.produceWithPatches.bind(Ka);Ka.setAutoFreeze.bind(Ka);Ka.setUseProxies.bind(Ka);Ka.applyPatches.bind(Ka);Ka.createDraft.bind(Ka);Ka.finishDraft.bind(Ka);function V0(t){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V0(t)}function pge(t,e){if(V0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(V0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vge(t){var e=pge(t,"string");return V0(e)==="symbol"?e:String(e)}function gge(t,e,n){return e=vge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(n),!0).forEach(function(r){gge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var w5=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),DE=function(){return Math.random().toString(36).substring(7).split("").join(".")},kC={INIT:"@@redux/INIT"+DE(),REPLACE:"@@redux/REPLACE"+DE(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+DE()}};function mge(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Wj(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gi(1));return n(Wj)(t,e)}if(typeof t!="function")throw new Error(gi(2));var i=t,a=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(gi(3));return a}function f(v){if(typeof v!="function")throw new Error(gi(4));if(l)throw new Error(gi(5));var m=!0;return u(),s.push(v),function(){if(m){if(l)throw new Error(gi(6));m=!1,u();var y=s.indexOf(v);s.splice(y,1),o=null}}}function h(v){if(!mge(v))throw new Error(gi(7));if(typeof v.type>"u")throw new Error(gi(8));if(l)throw new Error(gi(9));try{l=!0,a=i(a,v)}finally{l=!1}for(var m=o=s,g=0;g<m.length;g++){var y=m[g];y()}return v}function d(v){if(typeof v!="function")throw new Error(gi(10));i=v,h({type:kC.REPLACE})}function p(){var v,m=f;return v={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(gi(11));function x(){y.next&&y.next(c())}x();var w=m(x);return{unsubscribe:w}}},v[w5]=function(){return this},v}return h({type:kC.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:d},r[w5]=p,r}function yge(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:kC.INIT});if(typeof r>"u")throw new Error(gi(12));if(typeof n(void 0,{type:kC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gi(13))})}function xge(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var a=Object.keys(n),o;try{yge(n)}catch(s){o=s}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,f={},h=0;h<a.length;h++){var d=a[h],p=n[d],v=l[d],m=p(v,u);if(typeof m>"u")throw u&&u.type,new Error(gi(14));f[d]=m,c=c||m!==v}return c=c||a.length!==Object.keys(l).length,c?f:l}}function IC(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function wge(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(gi(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return a=IC.apply(void 0,s)(i.dispatch),x5(x5({},i),{},{dispatch:a})}}}function Uj(t){var e=function(r){var i=r.dispatch,a=r.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,t):o(s)}}};return e}var Gj=Uj();Gj.withExtraArgument=Uj;const b5=Gj;var Hj=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bge=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wv=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Cge=Object.defineProperty,Sge=Object.defineProperties,Dge=Object.getOwnPropertyDescriptors,C5=Object.getOwnPropertySymbols,_ge=Object.prototype.hasOwnProperty,Tge=Object.prototype.propertyIsEnumerable,S5=function(t,e,n){return e in t?Cge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Dc=function(t,e){for(var n in e||(e={}))_ge.call(e,n)&&S5(t,n,e[n]);if(C5)for(var r=0,i=C5(e);r<i.length;r++){var n=i[r];Tge.call(e,n)&&S5(t,n,e[n])}return t},_E=function(t,e){return Sge(t,Dge(e))},Ege=function(t,e,n){return new Promise(function(r,i){var a=function(l){try{s(n.next(l))}catch(u){i(u)}},o=function(l){try{s(n.throw(l))}catch(u){i(u)}},s=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(a,o)};s((n=n.apply(t,e)).next())})},Age=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IC:IC.apply(null,arguments)};function Nge(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var kge=function(t){Hj(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,wv([void 0],n[0].concat(this)))):new(e.bind.apply(e,wv([void 0],n.concat(this))))},e}(Array),Ige=function(t){Hj(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,wv([void 0],n[0].concat(this)))):new(e.bind.apply(e,wv([void 0],n.concat(this))))},e}(Array);function Xk(t){return pu(t)?Vj(t,function(){}):t}function Rge(t){return typeof t=="boolean"}function $ge(){return function(e){return Mge(e)}}function Mge(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new kge;return n&&(Rge(n)?r.push(b5):r.push(b5.withExtraArgument(n.extraArgument))),r}var Oge=!0;function Pge(t){var e=$ge(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,a=n.middleware,o=a===void 0?e():a,s=n.devTools,l=s===void 0?!0:s,u=n.preloadedState,c=u===void 0?void 0:u,f=n.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(Nge(i))d=xge(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var v=wge.apply(void 0,p),m=IC;l&&(m=Age(Dc({trace:!Oge},typeof l=="object"&&l)));var g=new Ige(v),y=g;Array.isArray(h)?y=wv([v],h):typeof h=="function"&&(y=h(g));var x=m.apply(void 0,y);return Wj(d,c,x)}function _c(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var a=e.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return Dc(Dc({type:t,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function jj(t){var e={},n=[],r,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(s in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return r=a,i}};return t(i),[e,n,r]}function Fge(t){return typeof t=="function"}function Lge(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?jj(e):[e,n,r],a=i[0],o=i[1],s=i[2],l;if(Fge(t))l=function(){return Xk(t())};else{var u=Xk(t);l=function(){return u}}function c(f,h){f===void 0&&(f=l());var d=wv([a[h.type]],o.filter(function(p){var v=p.matcher;return v(h)}).map(function(p){var v=p.reducer;return v}));return d.filter(function(p){return!!p}).length===0&&(d=[s]),d.reduce(function(p,v){if(v)if(Fc(p)){var m=p,g=v(m,h);return g===void 0?p:g}else{if(pu(p))return Vj(p,function(y){return v(y,h)});var g=v(p,h);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return p},f)}return c.getInitialState=l,c}function zge(t,e){return t+"/"+e}function nO(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Xk(t.initialState),r=t.reducers||{},i=Object.keys(r),a={},o={},s={};i.forEach(function(c){var f=r[c],h=zge(e,c),d,p;"reducer"in f?(d=f.reducer,p=f.prepare):d=f,a[c]=d,o[h]=d,s[c]=p?_c(h,p):_c(h)});function l(){var c=typeof t.extraReducers=="function"?jj(t.extraReducers):[t.extraReducers],f=c[0],h=f===void 0?{}:f,d=c[1],p=d===void 0?[]:d,v=c[2],m=v===void 0?void 0:v,g=Dc(Dc({},h),o);return Lge(n,function(y){for(var x in g)y.addCase(x,g[x]);for(var w=0,b=p;w<b.length;w++){var C=b[w];y.addMatcher(C.matcher,C.reducer)}m&&y.addDefaultCase(m)})}var u;return{name:e,reducer:function(c,f){return u||(u=l()),u(c,f)},actions:s,caseReducers:a,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var Bge="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vge=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Bge[Math.random()*64|0];return e},Wge=["name","message","stack","code"],TE=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),D5=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Uge=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=Wge;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=_c(e+"/fulfilled",function(u,c,f,h){return{payload:u,meta:_E(Dc({},h||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),a=_c(e+"/pending",function(u,c,f){return{payload:void 0,meta:_E(Dc({},f||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=_c(e+"/rejected",function(u,c,f,h,d){return{payload:h,error:(r&&r.serializeError||Uge)(u||"Rejected"),meta:_E(Dc({},d||{}),{arg:f,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,f,h){var d=r!=null&&r.idGenerator?r.idGenerator(u):Vge(),p=new s,v;function m(y){v=y,p.abort()}var g=function(){return Ege(this,null,function(){var y,x,w,b,C,S,D;return bge(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),b=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,u,{getState:f,extra:h}),Hge(b)?[4,b]:[3,2];case 1:b=_.sent(),_.label=2;case 2:if(b===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(T,E){return p.signal.addEventListener("abort",function(){return E({name:"AbortError",message:v||"Aborted"})})}),c(a(d,u,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:d,arg:u},{getState:f,extra:h}))),[4,Promise.race([C,Promise.resolve(n(u,{dispatch:c,getState:f,extra:h,requestId:d,signal:p.signal,abort:m,rejectWithValue:function(T,E){return new TE(T,E)},fulfillWithValue:function(T,E){return new D5(T,E)}})).then(function(T){if(T instanceof TE)throw T;return T instanceof D5?i(T.payload,d,u,T.meta):i(T,d,u)})])];case 3:return w=_.sent(),[3,5];case 4:return S=_.sent(),w=S instanceof TE?o(null,d,u,S.payload,S.meta):o(S,d,u),[3,5];case 5:return D=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,D||c(w),[2,w]}})})}();return Object.assign(g,{abort:m,requestId:d,arg:u,unwrap:function(){return g.then(Gge)}})}}return Object.assign(l,{pending:a,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function Gge(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Hge(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var rO="listenerMiddleware";_c(rO+"/add");_c(rO+"/removeAll");_c(rO+"/remove");var _5;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);uge();function qj(t,e,n){e.split&&(e=e.split("."));for(var r=0,i=e.length,a=t,o,s;r<i&&(s=e[r++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)a=a[s]=r===i?n:typeof(o=a[s])==typeof e?o:e[r]*0!==0||~(""+e[r]).indexOf(".")?{}:[]}const jge={darkMode:!0,loader:!1,prefixInput:{open:!1,column:""},findAndReplace:{open:!1,column:""},placeholder:{visible:!1,x:0,y:0},searchQuery:"",searchOptions:{caseSensitive:!0,wholeWord:!1,regex:!1},selectedColumn:"",transforms:{order:[],params:{}},execution:{},drawer:{open:!1,type:"quality",column:""},activeTransform:"",selectedRows:{}},Kj=nO({name:"Appstate",initialState:jge,reducers:{updateAppstateProperty:(t,e)=>{let{path:n,value:r}=e.payload;qj(t,n,r)},addTransform:(t,e)=>{const{id:n,data:r}=e.payload;t.transforms.order.push(n),t.transforms.params[n]=r},toggleRowSelection:(t,e)=>{const{index:n}=e.payload;t.selectedRows[n]?delete t.selectedRows[n]:t.selectedRows[n]=!0}}}),{updateAppstateProperty:dn,addTransform:Xj,toggleRowSelection:qge}=Kj.actions,Kge=Kj.reducer,Xge=()=>I.jsxs(Su,{className:"compact",children:[I.jsx(cs,{title:"Export to"}),I.jsx(Ge,{text:"RapidBI",icon:I.jsx(lve,{size:16})}),I.jsx(Ge,{text:"XYZ",icon:I.jsx(uve,{size:16})}),I.jsx(cs,{title:"Download as file"}),I.jsx(Ge,{text:"CSV",icon:I.jsx(Wg,{size:16})}),I.jsx(Ge,{text:"TSV",icon:I.jsx(Wg,{size:16})}),I.jsx(Ge,{text:"XLSX",icon:I.jsx(Wg,{size:16})}),I.jsx(Ge,{text:"PDF",icon:I.jsx(Wg,{size:16})}),I.jsx(Ge,{text:"JSON",icon:I.jsx(Wg,{size:16})})]});function Yge(){return I.jsx(oi,{content:I.jsx(Xge,{}),minimal:!0,position:"bottom-left",matchTargetWidth:!0,children:I.jsx(Wt,{minimal:!0,icon:I.jsx(hve,{size:18}),text:"Export Dataset"})})}function Zge(t){return I.jsxs("svg",{...t,width:t.size*1.3,height:t.size,preserveAspectRatio:"none",viewBox:"0 0 152.1 152",children:[I.jsxs("linearGradient",{id:"a",x2:"152.1",y1:"77.32",y2:"77.32",gradientTransform:"matrix(1 0 0 -1 0 153.32)",gradientUnits:"userSpaceOnUse",children:[I.jsx("stop",{offset:"0",stopColor:"#fff",stopOpacity:".1"}),I.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),I.jsx("path",{fill:"url(#a)",d:"M139.8 0h-27.7c-6.7 0-12.2 5.5-12.2 12.2V48H59.8C53.3 48 48 53.3 48 59.9V100H11.9C5.3 100 0 105.3 0 111.9v28c0 6.6 5.3 11.9 11.9 12.1h128c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"}),I.jsxs("linearGradient",{id:"b",x2:"152.1",y1:"77.32",y2:"77.32",gradientTransform:"matrix(1 0 0 -1 0 153.32)",gradientUnits:"userSpaceOnUse",children:[I.jsx("stop",{offset:"0",stopColor:"#fff",stopOpacity:".1"}),I.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),I.jsx("path",{fill:"url(#b)",d:"M139.8 0h-27.7c-6.7 0-12.2 5.5-12.2 12.2V48H59.8C53.3 48 48 53.3 48 59.9V100H11.9C5.3 100 0 105.3 0 111.9v28c0 6.6 5.3 11.9 11.9 12.1h128c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"}),I.jsx("defs",{children:I.jsx("path",{id:"c",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"d",children:I.jsx("use",{overflow:"visible",href:"#c"})}),I.jsxs("g",{fill:"#215db0",clipPath:"url(#d)",children:[I.jsx("path",{fill:"#4c90f0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V152h39.7c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"}),I.jsx("path",{d:"M48 60v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h88V48H60c-6.6 0-12 5.4-12 12z"})]}),I.jsx("defs",{children:I.jsx("path",{id:"e",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"g",children:I.jsx("use",{overflow:"visible",href:"#e"})}),I.jsxs("linearGradient",{id:"f",x1:"74.25",x2:"148.36",y1:"79.07",y2:"4.96",gradientTransform:"matrix(1 0 0 -1 0 153.32)",gradientUnits:"userSpaceOnUse",children:[I.jsx("stop",{offset:"0",stopColor:"#0c39bf",stopOpacity:".2"}),I.jsx("stop",{offset:"1",stopColor:"#0c39bf",stopOpacity:".02"})]}),I.jsx("path",{fill:"url(#f)",d:"M100 48v104h39.7c6.7 0 12.2-5.5 12.2-12.2V100L100 48z",clipPath:"url(#g)"}),I.jsx("defs",{children:I.jsx("path",{id:"h",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"i",children:I.jsx("use",{overflow:"visible",href:"#h"})}),I.jsx("path",{fill:"#a7ff83",d:"M60 49h40v-1H60c-6.6 0-12 5.4-12 12v1c0-6.6 5.4-12 12-12z",clipPath:"url(#i)",enableBackground:"new",opacity:".2"}),I.jsx("defs",{children:I.jsx("path",{id:"j",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"k",children:I.jsx("use",{overflow:"visible",href:"#j"})}),I.jsx("path",{fill:"#a7ff83",d:"M12 101h36v-1H12c-6.6 0-12 5.4-12 12v1c0-6.6 5.4-12 12-12z",clipPath:"url(#k)",enableBackground:"new",opacity:".2"}),I.jsxs("g",{fill:"#215db0",children:[I.jsx("defs",{children:I.jsx("path",{id:"l",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"m",children:I.jsx("use",{overflow:"visible",href:"#l"})}),I.jsx("path",{fill:"#a7ff83",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2v1c0-6.7 5.5-12.2 12.2-12.2h27.5c6.7 0 12.2 5.5 12.2 12.2v-1C152 5.5 146.5 0 139.8 0z",clipPath:"url(#m)",enableBackground:"new",opacity:".2"})]}),I.jsxs("g",{fill:"#215db0",children:[I.jsx("defs",{children:I.jsx("path",{id:"n",fill:"#215db0",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})}),I.jsx("clipPath",{id:"o",children:I.jsx("use",{overflow:"visible",href:"#n"})}),I.jsx("path",{fill:"#0c39bf",d:"M139.8 151H12c-6.6 0-12-5.4-12-12v1c0 6.6 5.4 12 12 12h127.7c6.7 0 12.2-5.5 12.2-12.2v-1c.1 6.7-5.4 12.2-12.1 12.2z",clipPath:"url(#o)",enableBackground:"new",opacity:".2"})]}),I.jsxs("linearGradient",{id:"p",x1:"50.969",x2:"149.295",y1:"102.289",y2:"3.963",gradientTransform:"matrix(1 0 0 -1 0 153.32)",gradientUnits:"userSpaceOnUse",children:[I.jsx("stop",{offset:"0",stopColor:"#fff",stopOpacity:".1"}),I.jsx("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),I.jsx("path",{fill:"url(#p)",d:"M139.8 0h-27.5c-6.7 0-12.2 5.5-12.2 12.2V48h-40c-6.6 0-12 5.4-12 12v40H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h127.8c6.7 0 12.2-5.5 12.2-12.2V12.2C152 5.5 146.5 0 139.8 0z"})]})}const Qge="_navbar_16ri7_1",Jge="_left_16ri7_10",eme="_search_16ri7_14",tme="_ml_16ri7_18",nme="_shift_16ri7_21",ec={navbar:Qge,left:Jge,search:eme,ml:tme,shift:nme};function Yj(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 2H13V1h-1v1H4V1H3v1H1.5l-.5.5v12l.5.5h13l.5-.5v-12l-.5-.5zM14 14H2V5h12v9zm0-10H2V3h12v1zM4 8H3v1h1V8zm-1 2h1v1H3v-1zm1 2H3v1h1v-1zm2-4h1v1H6V8zm1 2H6v1h1v-1zm-1 2h1v1H6v-1zm1-6H6v1h1V6zm2 2h1v1H9V8zm1 2H9v1h1v-1zm-1 2h1v1H9v-1zm1-6H9v1h1V6zm2 2h1v1h-1V8zm1 2h-1v1h1v-1zm-1-4h1v1h-1V6z"}}]})(t)}function rme(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.85352 11.7021H7.85449L7.03809 9.54297H3.77246L3.00439 11.7021H2L4.9541 4H5.88867L8.85352 11.7021ZM6.74268 8.73193L5.53418 5.4502C5.49479 5.34277 5.4554 5.1709 5.41602 4.93457H5.39453C5.35872 5.15299 5.31755 5.32487 5.271 5.4502L4.07324 8.73193H6.74268Z"}},{tag:"path",attr:{d:"M13.756 11.7021H12.8752V10.8428H12.8537C12.4706 11.5016 11.9066 11.8311 11.1618 11.8311C10.6139 11.8311 10.1843 11.686 9.87273 11.396C9.56479 11.106 9.41082 10.721 9.41082 10.2412C9.41082 9.21354 10.016 8.61556 11.2262 8.44727L12.8752 8.21631C12.8752 7.28174 12.4974 6.81445 11.7419 6.81445C11.0794 6.81445 10.4815 7.04004 9.94793 7.49121V6.58887C10.4886 6.24512 11.1117 6.07324 11.8171 6.07324C13.1097 6.07324 13.756 6.75716 13.756 8.125V11.7021ZM12.8752 8.91992L11.5485 9.10254C11.1403 9.15983 10.8324 9.26188 10.6247 9.40869C10.417 9.55192 10.3132 9.80794 10.3132 10.1768C10.3132 10.4453 10.4081 10.6655 10.5978 10.8374C10.7912 11.0057 11.0472 11.0898 11.3659 11.0898C11.8027 11.0898 12.1626 10.9377 12.4455 10.6333C12.7319 10.3254 12.8752 9.93685 12.8752 9.46777V8.91992Z"}}]})(t)}function ime(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M10.012 2h.976v3.113l2.56-1.557.486.885L11.47 6l2.564 1.559-.485.885-2.561-1.557V10h-.976V6.887l-2.56 1.557-.486-.885L9.53 6 6.966 4.441l.485-.885 2.561 1.557V2zM2 10h4v4H2v-4z"}}]})(t)}function Zj(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11 1v4h4v1h-4v4h4v1h-4v4h-1v-4H6v4H5v-4H1v-1h4V6H1V5h4V1h1v4h4V1h1zM6 6v4h4V6H6z"}}]})(t)}function ame(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.36 7L1 13h1.34l.51-1.47h2.26L5.64 13H7L4.65 7H3.36zm-.15 3.53l.78-2.14.78 2.14H3.21zM11.82 4h-1.6L7 13h1.56l.75-2.29h3.36l.77 2.29H15l-3.18-9zM9.67 9.5l1.18-3.59c.059-.185.1-.376.12-.57.027.192.064.382.11.57l1.25 3.59H9.67z"}}]})(t)}function ome(t){return kn({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11H1V13H15V11H16V14H15H1H0V11Z"}},{tag:"path",attr:{d:"M6.84048 11H5.95963V10.1406H5.93814C5.555 10.7995 4.99104 11.1289 4.24625 11.1289C3.69839 11.1289 3.26871 10.9839 2.95718 10.6938C2.64924 10.4038 2.49527 10.0189 2.49527 9.53906C2.49527 8.51139 3.10041 7.91341 4.3107 7.74512L5.95963 7.51416C5.95963 6.57959 5.58186 6.1123 4.82632 6.1123C4.16389 6.1123 3.56591 6.33789 3.03238 6.78906V5.88672C3.57307 5.54297 4.19612 5.37109 4.90152 5.37109C6.19416 5.37109 6.84048 6.05501 6.84048 7.42285V11ZM5.95963 8.21777L4.63297 8.40039C4.22476 8.45768 3.91682 8.55973 3.70914 8.70654C3.50145 8.84977 3.39761 9.10579 3.39761 9.47461C3.39761 9.74316 3.4925 9.96338 3.68228 10.1353C3.87564 10.3035 4.13166 10.3877 4.45035 10.3877C4.8872 10.3877 5.24706 10.2355 5.52994 9.93115C5.8164 9.62321 5.95963 9.2347 5.95963 8.76562V8.21777Z"}},{tag:"path",attr:{d:"M9.3475 10.2051H9.32601V11H8.44515V2.85742H9.32601V6.4668H9.3475C9.78076 5.73633 10.4146 5.37109 11.2489 5.37109C11.9543 5.37109 12.5057 5.61816 12.9032 6.1123C13.3042 6.60286 13.5047 7.26172 13.5047 8.08887C13.5047 9.00911 13.2809 9.74674 12.8333 10.3018C12.3857 10.8532 11.7734 11.1289 10.9964 11.1289C10.2695 11.1289 9.71989 10.821 9.3475 10.2051ZM9.32601 7.98682V8.75488C9.32601 9.20964 9.47282 9.59635 9.76644 9.91504C10.0636 10.2301 10.4396 10.3877 10.8944 10.3877C11.4279 10.3877 11.8451 10.1836 12.1458 9.77539C12.4502 9.36719 12.6024 8.79964 12.6024 8.07275C12.6024 7.46045 12.4609 6.98063 12.1781 6.6333C11.8952 6.28597 11.512 6.1123 11.0286 6.1123C10.5166 6.1123 10.1048 6.29134 9.7933 6.64941C9.48177 7.00391 9.32601 7.44971 9.32601 7.98682Z"}}]})(t)}const EE=({active:t=!1,...e})=>I.jsx(Wt,{...e,intent:t?At.PRIMARY:At.NONE,minimal:!t});function sme(){const t=mn(r=>r.appState.searchOptions),e=zn(),n=r=>{e(dn({path:`searchOptions.${r}`,value:!t[r]}))};return I.jsxs(MS,{children:[I.jsx(ou,{content:"Case sensitive",placement:"left",children:I.jsx(EE,{icon:I.jsx(rme,{size:16}),active:t.caseSensitive,onClick:()=>n("caseSensitive"),disabled:t.regex})}),I.jsx(ou,{content:"Match whole word",placement:"bottom",children:I.jsx(EE,{icon:I.jsx(ome,{size:16}),active:t.wholeWord,onClick:()=>n("wholeWord"),disabled:t.regex})}),I.jsx(ou,{content:"Use regular expression",placement:"right",children:I.jsx(EE,{icon:I.jsx(ime,{size:16}),active:t.regex,onClick:()=>n("regex")})})]})}const lme={original:null,transformed:null,order:[],sizes:{},details:{},snapshots:{}},Qj=nO({name:"Data",initialState:lme,reducers:{updateProperty:(t,e)=>{let{path:n,value:r}=e.payload;qj(t,n,r)},addData:(t,e)=>{const n=e.payload.data,r=Object.keys(n[0]);t.original=n,t.transformed=n,t.order=r;let i={DataPrepIndex:40};r.forEach(a=>{i[a]=150}),t.sizes=i},updateCellValue:(t,e)=>{const{rowIndex:n,column:r,value:i}=e.payload;t.transformed[n][r]=i}}}),{updateProperty:bv,addData:ume,updateCellValue:cme}=Qj.actions,fme=Qj.reducer;let Cv=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function hme(){return function(t,e){const n=e(),r=n.data.transformed,i=n.data.order;t(dn({path:"loader",value:!0})),setTimeout(async()=>{let a=[];i.forEach((s,l)=>{let u={},c=[];l?a.length&&(a.forEach(f=>{let h=r[f][s];u[h]?c.push(f):u[h]=1}),a=c):(r.forEach((f,h)=>{let d=f[s];u[d]?c.push(h):u[d]=1}),a=c)}),a.length&&t(bv({path:"transformed",value:r.filter((s,l)=>!a.includes(l))}));const o=Cv();t(Xj({id:o,data:{type:"remove_duplicates",column:""}})),t(dn({path:`execution.${o}`,value:{rowsAffected:a.length}})),t(dn({path:"loader",value:!1}))})}}function T5(t){const e=t.type==="partial";return function(n,r){const i=r(),a=i.data.transformed,o=i.data.order;n(dn({path:"loader",value:!0})),setTimeout(async()=>{let s=[];a.forEach((l,u)=>{let c=!e;for(let f=0;f<o.length;f++){const h=o[f];if(l[h]!==""&&!e||e&&l[h]===""){c=e;break}}c&&s.push(u)}),s.length&&n(bv({path:"transformed",value:a.filter((l,u)=>!s.includes(u))})),n(dn({path:"loader",value:!1}))})}}const dme=()=>{const t=zn(),e=()=>t(hme()),n=()=>t(T5({type:"full"})),r=()=>t(T5({type:"partial"})),i=[{label:"Duplicate Rows",icon:"duplicate",action:e,tooltip:"Rows where all the columns have same values as other rows"},{label:"Blank Rows",icon:"circle",action:n,tooltip:I.jsxs("div",{children:["Rows where ",I.jsx("b",{children:"ALL"})," the columns have missing values"]})},{label:"Missing values",icon:"warning-sign",action:r,tooltip:I.jsxs("div",{children:["Rows where ",I.jsx("b",{children:"ANY"})," column(s) have missing values"]})}];return I.jsx(Su,{className:"compact",children:i.map(a=>{const{label:o,action:s,tooltip:l,icon:u}=a;return I.jsx(Ge,{text:I.jsx(ou,{content:l,placement:"right",className:"fill",children:I.jsx("div",{className:"fill",children:o})}),icon:u,onClick:s},o)})})};function pme(){return I.jsx(oi,{content:I.jsx(dme,{}),minimal:!0,position:"bottom-left",matchTargetWidth:!0,className:ec.ml,children:I.jsx(Wt,{text:"Remove Rows",icon:"remove",outlined:!0,intent:At.DANGER,rightIcon:"chevron-down"})})}function vme(){const[t,e]=L.useState(""),n=zn(),r=o=>e(o.target.value),i=o=>{o.key==="Enter"&&n(dn({path:"searchQuery",value:t}))},a=()=>n(dn({path:"drawer",value:{open:!0,type:"quality"}}));return I.jsx("div",{className:ec.left,children:I.jsxs(I.Fragment,{children:[I.jsx(_i,{value:t,className:ec.search,inputClassName:ec.input,leftIcon:"search",placeholder:"Search Data ( Type something and hit enter )",onChange:r,onKeyDown:i,rightElement:I.jsx(sme,{})}),I.jsx(Wt,{text:"EDA",icon:"series-derived",outlined:!0,className:ec.ml}),I.jsx(Wt,{text:"Data Quality",icon:"doughnut-chart",outlined:!0,onClick:a,className:ec.ml}),I.jsx(pme,{})]})})}function gme(t){return kn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.27 2.047a1 1 0 0 1 1.46 0l6.345 6.77c.6.638.146 1.683-.73 1.683H11.5v3a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-3H1.654C.78 10.5.326 9.455.924 8.816L7.27 2.047zM14.346 9.5 8 2.731 1.654 9.5H4.5a1 1 0 0 1 1 1v3h5v-3a1 1 0 0 1 1-1h2.846z"}}]})(t)}const E5=({button:t})=>t?I.jsxs("div",{className:"fcc",children:[I.jsx(gme,{className:ec.shift,size:16}),t]}):I.jsx(I.Fragment,{}),mme=()=>{const t=zn(),e=mn(r=>r.appState.darkMode),n=()=>t(dn({path:"darkMode",value:!e}));return I.jsxs(Su,{children:[I.jsx(Ge,{text:e?"Light Theme":"Dark Theme",icon:e?"flash":"moon",onClick:n,label:I.jsx(E5,{button:"D"})}),I.jsx(Ge,{text:"Help",icon:"help",label:I.jsx(E5,{button:"H"})}),I.jsxs(Ge,{text:"Language",icon:"translate",children:[I.jsx(Ge,{text:"English",label:"en",active:!0}),I.jsx(Ge,{text:"French",label:"fr"}),I.jsx(Ge,{text:"German",label:"de"})]})]})};function yme(){return I.jsx(oi,{content:I.jsx(mme,{}),minimal:!0,position:"bottom",hoverCloseDelay:0,children:I.jsx(Wt,{icon:"cog",minimal:!0})})}const A5=t=>I.jsx(Wt,{...t,minimal:!0});function xme(){const t=zn(),e=n=>{t(dn({path:"drawer",value:{open:!0,type:n}}))};return I.jsxs("nav",{className:ec.navbar,children:[I.jsxs(o5,{align:"left",children:[I.jsx(Zge,{size:30,className:"pointer",onClick:()=>window.location.reload()}),I.jsx(vme,{})]}),I.jsxs(o5,{align:"right",children:[I.jsx(A5,{icon:I.jsx(pve,{size:18}),text:"Load Transform"}),I.jsx(Yge,{}),I.jsx(A5,{icon:"history",text:"Applied Transforms",onClick:()=>e("transforms")}),I.jsx(yme,{})]})]})}var N5=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wme(t,e){return!!(t===e||N5(t)&&N5(e))}function bme(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!wme(t[n],e[n]))return!1;return!0}function AE(t,e){e===void 0&&(e=bme);var n,r=[],i,a=!1;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return a&&n===this&&e(s,r)||(i=t.apply(this,s),a=!0,n=this,r=s),i}return o}var Cme=typeof performance=="object"&&typeof performance.now=="function",k5=Cme?function(){return performance.now()}:function(){return Date.now()};function I5(t){cancelAnimationFrame(t.id)}function Sme(t,e){var n=k5();function r(){k5()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var NE=-1;function Dme(t){if(t===void 0&&(t=!1),NE===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),NE=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return NE}var $d=null;function R5(t){if(t===void 0&&(t=!1),$d===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?$d="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?$d="negative":$d="positive-ascending"),document.body.removeChild(e),$d}return $d}var _me=150,Tme=function(e){var n=e.columnIndex;e.data;var r=e.rowIndex;return r+":"+n};function Eme(t){var e,n=t.getColumnOffset,r=t.getColumnStartIndexForOffset,i=t.getColumnStopIndexForStartIndex,a=t.getColumnWidth,o=t.getEstimatedTotalHeight,s=t.getEstimatedTotalWidth,l=t.getOffsetForColumnAndAlignment,u=t.getOffsetForRowAndAlignment,c=t.getRowHeight,f=t.getRowOffset,h=t.getRowStartIndexForOffset,d=t.getRowStopIndexForStartIndex,p=t.initInstanceProps,v=t.shouldResetStyleCacheOnItemSizeChange,m=t.validateProps;return e=function(g){NS(y,g);function y(w){var b;return b=g.call(this,w)||this,b._instanceProps=p(b.props,Bk(b)),b._resetIsScrollingTimeoutId=null,b._outerRef=void 0,b.state={instance:Bk(b),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof b.props.initialScrollLeft=="number"?b.props.initialScrollLeft:0,scrollTop:typeof b.props.initialScrollTop=="number"?b.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},b._callOnItemsRendered=void 0,b._callOnItemsRendered=AE(function(C,S,D,_,T,E,A,R){return b.props.onItemsRendered({overscanColumnStartIndex:C,overscanColumnStopIndex:S,overscanRowStartIndex:D,overscanRowStopIndex:_,visibleColumnStartIndex:T,visibleColumnStopIndex:E,visibleRowStartIndex:A,visibleRowStopIndex:R})}),b._callOnScroll=void 0,b._callOnScroll=AE(function(C,S,D,_,T){return b.props.onScroll({horizontalScrollDirection:D,scrollLeft:C,scrollTop:S,verticalScrollDirection:_,scrollUpdateWasRequested:T})}),b._getItemStyle=void 0,b._getItemStyle=function(C,S){var D=b.props,_=D.columnWidth,T=D.direction,E=D.rowHeight,A=b._getItemStyleCache(v&&_,v&&T,v&&E),R=C+":"+S,$;if(A.hasOwnProperty(R))$=A[R];else{var O=n(b.props,S,b._instanceProps),M=T==="rtl";A[R]=$={position:"absolute",left:M?void 0:O,right:M?O:void 0,top:f(b.props,C,b._instanceProps),height:c(b.props,C,b._instanceProps),width:a(b.props,S,b._instanceProps)}}return $},b._getItemStyleCache=void 0,b._getItemStyleCache=AE(function(C,S,D){return{}}),b._onScroll=function(C){var S=C.currentTarget,D=S.clientHeight,_=S.clientWidth,T=S.scrollLeft,E=S.scrollTop,A=S.scrollHeight,R=S.scrollWidth;b.setState(function($){if($.scrollLeft===T&&$.scrollTop===E)return null;var O=b.props.direction,M=T;if(O==="rtl")switch(R5()){case"negative":M=-T;break;case"positive-descending":M=R-_-T;break}M=Math.max(0,Math.min(M,R-_));var B=Math.max(0,Math.min(E,A-D));return{isScrolling:!0,horizontalScrollDirection:$.scrollLeft<T?"forward":"backward",scrollLeft:M,scrollTop:B,verticalScrollDirection:$.scrollTop<E?"forward":"backward",scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(C){var S=b.props.outerRef;b._outerRef=C,typeof S=="function"?S(C):S!=null&&typeof S=="object"&&S.hasOwnProperty("current")&&(S.current=C)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&I5(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=Sme(b._resetIsScrolling,_me)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1)})},b}y.getDerivedStateFromProps=function(b,C){return Ame(b,C),m(b),null};var x=y.prototype;return x.scrollTo=function(b){var C=b.scrollLeft,S=b.scrollTop;C!==void 0&&(C=Math.max(0,C)),S!==void 0&&(S=Math.max(0,S)),this.setState(function(D){return C===void 0&&(C=D.scrollLeft),S===void 0&&(S=D.scrollTop),D.scrollLeft===C&&D.scrollTop===S?null:{horizontalScrollDirection:D.scrollLeft<C?"forward":"backward",scrollLeft:C,scrollTop:S,scrollUpdateWasRequested:!0,verticalScrollDirection:D.scrollTop<S?"forward":"backward"}},this._resetIsScrollingDebounced)},x.scrollToItem=function(b){var C=b.align,S=C===void 0?"auto":C,D=b.columnIndex,_=b.rowIndex,T=this.props,E=T.columnCount,A=T.height,R=T.rowCount,$=T.width,O=this.state,M=O.scrollLeft,B=O.scrollTop,P=Dme();D!==void 0&&(D=Math.max(0,Math.min(D,E-1))),_!==void 0&&(_=Math.max(0,Math.min(_,R-1)));var z=o(this.props,this._instanceProps),U=s(this.props,this._instanceProps),H=U>$?P:0,F=z>A?P:0;this.scrollTo({scrollLeft:D!==void 0?l(this.props,D,S,M,this._instanceProps,F):M,scrollTop:_!==void 0?u(this.props,_,S,B,this._instanceProps,H):B})},x.componentDidMount=function(){var b=this.props,C=b.initialScrollLeft,S=b.initialScrollTop;if(this._outerRef!=null){var D=this._outerRef;typeof C=="number"&&(D.scrollLeft=C),typeof S=="number"&&(D.scrollTop=S)}this._callPropsCallbacks()},x.componentDidUpdate=function(){var b=this.props.direction,C=this.state,S=C.scrollLeft,D=C.scrollTop,_=C.scrollUpdateWasRequested;if(_&&this._outerRef!=null){var T=this._outerRef;if(b==="rtl")switch(R5()){case"negative":T.scrollLeft=-S;break;case"positive-ascending":T.scrollLeft=S;break;default:var E=T.clientWidth,A=T.scrollWidth;T.scrollLeft=A-E-S;break}else T.scrollLeft=Math.max(0,S);T.scrollTop=Math.max(0,D)}this._callPropsCallbacks()},x.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&I5(this._resetIsScrollingTimeoutId)},x.render=function(){var b=this.props,C=b.children,S=b.className,D=b.columnCount,_=b.direction,T=b.height,E=b.innerRef,A=b.innerElementType,R=b.innerTagName,$=b.itemData,O=b.itemKey,M=O===void 0?Tme:O,B=b.outerElementType,P=b.outerTagName,z=b.rowCount,U=b.style,H=b.useIsScrolling,F=b.width,W=this.state.isScrolling,j=this._getHorizontalRangeToRender(),K=j[0],Y=j[1],Z=this._getVerticalRangeToRender(),se=Z[0],ee=Z[1],oe=[];if(D>0&&z)for(var ce=se;ce<=ee;ce++)for(var ve=K;ve<=Y;ve++)oe.push(L.createElement(C,{columnIndex:ve,data:$,isScrolling:H?W:void 0,key:M({columnIndex:ve,data:$,rowIndex:ce}),rowIndex:ce,style:this._getItemStyle(ce,ve)}));var ye=o(this.props,this._instanceProps),_e=s(this.props,this._instanceProps);return L.createElement(B||P||"div",{className:S,onScroll:this._onScroll,ref:this._outerRefSetter,style:Lh({position:"relative",height:T,width:F,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:_},U)},L.createElement(A||R||"div",{children:oe,ref:E,style:{height:ye,pointerEvents:W?"none":void 0,width:_e}}))},x._callPropsCallbacks=function(){var b=this.props,C=b.columnCount,S=b.onItemsRendered,D=b.onScroll,_=b.rowCount;if(typeof S=="function"&&C>0&&_>0){var T=this._getHorizontalRangeToRender(),E=T[0],A=T[1],R=T[2],$=T[3],O=this._getVerticalRangeToRender(),M=O[0],B=O[1],P=O[2],z=O[3];this._callOnItemsRendered(E,A,M,B,R,$,P,z)}if(typeof D=="function"){var U=this.state,H=U.horizontalScrollDirection,F=U.scrollLeft,W=U.scrollTop,j=U.scrollUpdateWasRequested,K=U.verticalScrollDirection;this._callOnScroll(F,W,H,K,j)}},x._getHorizontalRangeToRender=function(){var b=this.props,C=b.columnCount,S=b.overscanColumnCount,D=b.overscanColumnsCount,_=b.overscanCount,T=b.rowCount,E=this.state,A=E.horizontalScrollDirection,R=E.isScrolling,$=E.scrollLeft,O=S||D||_||1;if(C===0||T===0)return[0,0,0,0];var M=r(this.props,$,this._instanceProps),B=i(this.props,M,$,this._instanceProps),P=!R||A==="backward"?Math.max(1,O):1,z=!R||A==="forward"?Math.max(1,O):1;return[Math.max(0,M-P),Math.max(0,Math.min(C-1,B+z)),M,B]},x._getVerticalRangeToRender=function(){var b=this.props,C=b.columnCount,S=b.overscanCount,D=b.overscanRowCount,_=b.overscanRowsCount,T=b.rowCount,E=this.state,A=E.isScrolling,R=E.verticalScrollDirection,$=E.scrollTop,O=D||_||S||1;if(C===0||T===0)return[0,0,0,0];var M=h(this.props,$,this._instanceProps),B=d(this.props,M,$,this._instanceProps),P=!A||R==="backward"?Math.max(1,O):1,z=!A||R==="forward"?Math.max(1,O):1;return[Math.max(0,M-P),Math.max(0,Math.min(T-1,B+z)),M,B]},y}(L.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var Ame=function(e,n){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,n.instance},$5=50,Jj=function(e,n){var r=e.rowCount,i=n.rowMetadataMap,a=n.estimatedRowHeight,o=n.lastMeasuredRowIndex,s=0;if(o>=r&&(o=r-1),o>=0){var l=i[o];s=l.offset+l.size}var u=r-o-1,c=u*a;return s+c},eq=function(e,n){var r=e.columnCount,i=n.columnMetadataMap,a=n.estimatedColumnWidth,o=n.lastMeasuredColumnIndex,s=0;if(o>=r&&(o=r-1),o>=0){var l=i[o];s=l.offset+l.size}var u=r-o-1,c=u*a;return s+c},Xl=function(e,n,r,i){var a,o,s;if(e==="column"?(a=i.columnMetadataMap,o=n.columnWidth,s=i.lastMeasuredColumnIndex):(a=i.rowMetadataMap,o=n.rowHeight,s=i.lastMeasuredRowIndex),r>s){var l=0;if(s>=0){var u=a[s];l=u.offset+u.size}for(var c=s+1;c<=r;c++){var f=o(c);a[c]={offset:l,size:f},l+=f}e==="column"?i.lastMeasuredColumnIndex=r:i.lastMeasuredRowIndex=r}return a[r]},M5=function(e,n,r,i){var a,o;e==="column"?(a=r.columnMetadataMap,o=r.lastMeasuredColumnIndex):(a=r.rowMetadataMap,o=r.lastMeasuredRowIndex);var s=o>0?a[o].offset:0;return s>=i?tq(e,n,r,o,0,i):Nme(e,n,r,Math.max(0,o),i)},tq=function(e,n,r,i,a,o){for(;a<=i;){var s=a+Math.floor((i-a)/2),l=Xl(e,n,s,r).offset;if(l===o)return s;l<o?a=s+1:l>o&&(i=s-1)}return a>0?a-1:0},Nme=function(e,n,r,i,a){for(var o=e==="column"?n.columnCount:n.rowCount,s=1;i<o&&Xl(e,n,i,r).offset<a;)i+=s,s*=2;return tq(e,n,r,Math.min(i,o-1),Math.floor(i/2),a)},O5=function(e,n,r,i,a,o,s){var l=e==="column"?n.width:n.height,u=Xl(e,n,r,o),c=e==="column"?eq(n,o):Jj(n,o),f=Math.max(0,Math.min(c-l,u.offset)),h=Math.max(0,u.offset-l+s+u.size);switch(i==="smart"&&(a>=h-l&&a<=f+l?i="auto":i="center"),i){case"start":return f;case"end":return h;case"center":return Math.round(h+(f-h)/2);case"auto":default:return a>=h&&a<=f?a:h>f||a<h?h:f}},kme=Eme({getColumnOffset:function(e,n,r){return Xl("column",e,n,r).offset},getColumnStartIndexForOffset:function(e,n,r){return M5("column",e,r,n)},getColumnStopIndexForStartIndex:function(e,n,r,i){for(var a=e.columnCount,o=e.width,s=Xl("column",e,n,i),l=r+o,u=s.offset+s.size,c=n;c<a-1&&u<l;)c++,u+=Xl("column",e,c,i).size;return c},getColumnWidth:function(e,n,r){return r.columnMetadataMap[n].size},getEstimatedTotalHeight:Jj,getEstimatedTotalWidth:eq,getOffsetForColumnAndAlignment:function(e,n,r,i,a,o){return O5("column",e,n,r,i,a,o)},getOffsetForRowAndAlignment:function(e,n,r,i,a,o){return O5("row",e,n,r,i,a,o)},getRowOffset:function(e,n,r){return Xl("row",e,n,r).offset},getRowHeight:function(e,n,r){return r.rowMetadataMap[n].size},getRowStartIndexForOffset:function(e,n,r){return M5("row",e,r,n)},getRowStopIndexForStartIndex:function(e,n,r,i){for(var a=e.rowCount,o=e.height,s=Xl("row",e,n,i),l=r+o,u=s.offset+s.size,c=n;c<a-1&&u<l;)c++,u+=Xl("row",e,c,i).size;return c},initInstanceProps:function(e,n){var r=e,i=r.estimatedColumnWidth,a=r.estimatedRowHeight,o={columnMetadataMap:{},estimatedColumnWidth:i||$5,estimatedRowHeight:a||$5,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return n.resetAfterColumnIndex=function(s,l){l===void 0&&(l=!0),n.resetAfterIndices({columnIndex:s,shouldForceUpdate:l})},n.resetAfterRowIndex=function(s,l){l===void 0&&(l=!0),n.resetAfterIndices({rowIndex:s,shouldForceUpdate:l})},n.resetAfterIndices=function(s){var l=s.columnIndex,u=s.rowIndex,c=s.shouldForceUpdate,f=c===void 0?!0:c;typeof l=="number"&&(o.lastMeasuredColumnIndex=Math.min(o.lastMeasuredColumnIndex,l-1)),typeof u=="number"&&(o.lastMeasuredRowIndex=Math.min(o.lastMeasuredRowIndex,u-1)),n._getItemStyleCache(-1),f&&n.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}});const Ime=typeof document<"u"?L.useLayoutEffect:L.useEffect,Rme={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function $me(){const t=L.useRef(0),e=L.useRef(null),[n,r]=L.useState(Rme),i=L.useMemo(()=>typeof window<"u"?new ResizeObserver(a=>{const o=a[0];o&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{e.current&&r(o.contentRect)}))}):null,[]);return Ime(()=>(e.current&&(i.observe(e.current),r(e.current.getBoundingClientRect())),()=>{i.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[e.current]),[e,n]}function nq(){const[t,{width:e,height:n}]=$me();return{ref:t,width:e,height:n}}function Mme(t,e,n){let r=[];return t.forEach(i=>{let a={...i};a[e]=n.prefix+i[e]+n.suffix,r.push(a)}),{result:r,rowsAffected:r.length}}const rq=t=>I.jsx(L0,{...t,minimal:!0,className:"border",round:!0}),iO=({rowsAffected:t})=>I.jsx(rq,{intent:t?At.WARNING:At.NONE,children:t}),iD=({column:t})=>I.jsx(rq,{children:t}),iq=(t,e)=>I.jsxs("div",{children:["Removed ",I.jsx(iO,{rowsAffected:t})," rows"," ",e&&I.jsxs(I.Fragment,{children:["where ",I.jsx(iD,{column:e})," had duplicate values"]})]}),aq=(t,e)=>I.jsxs("div",{children:["Removed ",I.jsx(iO,{rowsAffected:t})," rows where ",I.jsx(iD,{column:e})," had missing values"]}),aO=(t,e,n)=>{const{find:r="",replace:i=""}=n;return I.jsxs("div",{children:["Replaced ",I.jsx(iO,{rowsAffected:t})," instances of ",I.jsx("em",{children:r})," with"," ",I.jsx("em",{children:i})," in ",I.jsx(iD,{column:e})]})},Ome=(t,e)=>I.jsxs("div",{children:["Remove ",I.jsx(iD,{column:e})," column from the dataset"]}),kE={remove_duplicates:iq,remove_blanks:aq,find_and_replace:aO,delete_column:Ome};function Pme(t,e){let n={},r=[],i=0;return t.forEach(a=>{if(a[e]in n){i++;return}n[a[e]]=1,r.push(a)}),{result:r,rowsAffected:i,message:iq(i,e)}}function Fme(t,e,n){let r=[];t.forEach(a=>{let o={...a};delete o[e],r.push(o)});let i=n.columns.filter(a=>a!==e);return{result:r,rowsAffected:r.length,columns:i}}function Lme(t,e){let n=[],r=0;return t.forEach(i=>{if(i[e]===""){r++;return}n.push(i)}),{result:n,rowsAffected:r,message:aq(r,e)}}function zme(t,e,n){let r=[];const i=e+"_"+Cv(5);t.forEach(o=>{let s={...o};s[i]=o[e],r.push(s)});let a=[...n.columns];return a.splice(a.indexOf(e)+1,0,i),{result:r,rowsAffected:r.length,columns:a}}function Bme(t,e,n){let r=[],{find:i="",replace:a=""}=n,o=0;return t.forEach(s=>{let l={...s};s[e]===i&&(l[e]=a,o++),r.push(l)}),{result:r,rowsAffected:o,message:aO(o,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vme=1e-7,Wme=1e-4;class oq{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class oO{refCount(e){return na("refCount")}incRef(e){return na("incRef")}timerAvailable(){return!0}time(e){return na("time")}read(e){return na("read")}readSync(e){return na("readSync")}readToGPU(e,n){return na("readToGPU")}numDataIds(){return na("numDataIds")}disposeData(e,n){return na("disposeData")}write(e,n,r){return na("write")}move(e,n,r,i,a){return na("move")}createTensorFromGPUData(e,n,r){return na("createTensorFromGPUData")}memory(){return na("memory")}floatPrecision(){return na("floatPrecision")}epsilon(){return this.floatPrecision()===32?Vme:Wme}dispose(){return na("dispose")}}function na(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ume(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,ip(t,e,n)}function Vh(t,e,n){return Math.max(t,Math.min(e,n))}function sO(t){return t%2===0?t:t+1}function ip(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Gme(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function V(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function lO(t,e,n=""){V(Bt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function sq(t){V(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function he(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Bt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Sv(t){return t%1===0}function Yk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function jp(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function P5(t,e=i=>0,n,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){a();return}r!=null?r(s,l):setTimeout(s,l)};s()})}function lq(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function _t(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),V(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),V(t.every(r=>Sv(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function nf(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:_t(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function ii(t,e){return Hn(t,e)}function Hn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Hme(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function jme(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function uq(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function RC(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function qme(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Hy(t){return typeof t=="string"||t instanceof String}function Kme(t){return typeof t=="boolean"}function Zk(t){return typeof t=="number"}function ig(t){return Array.isArray(t)?ig(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Zk(t)?"float32":Hy(t)?"string":Kme(t)?"bool":"float32"}function Qk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Jk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function je(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function cq(t,e,n,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=n[t+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<a;l++)i[l]=cq(t+l*s,o,n,r)}return i}function bs(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return cq(0,t,e,n)}function Xme(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function uO(t,e){const n=ai(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ai(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function fq(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return bs(t,new Float32Array(n));if(e==="int32")return bs(t,new Int32Array(n));if(e==="bool")return bs(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Du(t){t.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function hl(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function ag(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function cO(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5="tfjsflags";class Yme{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Zme,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ue().getBool("IS_TEST")||ue().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];ue().getBool("IS_TEST")||ue().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(cO(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);F5 in e&&e[F5].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=Jme(i,a)})}}function Zme(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Qme(e,r[0],r[1]),r.join("="))),e}function Qme(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Jme(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ue(){return hq}let hq=null;function e0e(t){hq=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let IE;function dq(){if(IE==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");IE=t}return IE}function t0e(){const t=dq();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function fO(t,e){const n=t0e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const aD="Abs",jy="Acos",qy="Acosh",og="Add",hO="AddN",dO="All",pO="Any",oD="ArgMax",sD="ArgMin",Ky="Asin",Xy="Asinh",Yy="Atan",Zy="Atanh",Qy="Atan2",lD="AvgPool",vO="AvgPoolGrad",uD="AvgPool3D",gO="AvgPool3DGrad",cD="BatchMatMul",fD="BatchToSpaceND",mO="Bincount",yO="BitwiseAnd",n0e="BroadcastTo",pq="BroadcastArgs",Jy="Cast",e1="Ceil",t1="ClipByValue",xO="Complex",hD="ComplexAbs",dD="Concat",pD="Conv2D",wO="Conv2DBackpropFilter",vD="Conv2DBackpropInput",gD="Conv3D",bO="Conv3DBackpropFilterV2",CO="Conv3DBackpropInputV2",n1="Cos",r1="Cosh",SO="Cumprod",mD="Cumsum",DO="CropAndResize",_O="DenseBincount",TO="DepthToSpace",yD="DepthwiseConv2dNative",EO="DepthwiseConv2dNativeBackpropFilter",AO="DepthwiseConv2dNativeBackpropInput",vq="Diag",xD="Dilation2D",eI="Dilation2DBackpropInput",tI="Dilation2DBackpropFilter",r0e="Draw",i1="RealDiv",NO="Einsum",a1="Elu",kO="EluGrad",o1="Erf",wD="Equal",s1="Exp",bD="ExpandDims",l1="Expm1",IO="FFT",RO="Fill",$O="FlipLeftRight",u1="Floor",c1="FloorDiv",CD="FusedBatchNorm",SD="GatherV2",gq="GatherNd",DD="Greater",f1="GreaterEqual",h1="Identity",MO="IFFT",OO="Imag",d1="IsFinite",p1="IsInf",v1="IsNan",_D="LeakyRelu",TD="Less",ED="LessEqual",mq="LinSpace",g1="Log",m1="Log1p",AD="LogicalAnd",ND="LogicalNot",kD="LogicalOr",i0e="LogSoftmax",ID="LRN",PO="LRNGrad",RD="Max",y1="Maximum",$D="MaxPool",FO="MaxPoolGrad",MD="MaxPool3D",LO="MaxPool3DGrad",yq="MaxPoolWithArgmax",OD="Mean",PD="Min",x1="Minimum",FD="MirrorPad",w1="Mod",xq="Multinomial",b1="Multiply",LD="Neg",zD="NotEqual",zO="NonMaxSuppressionV3",BO="NonMaxSuppressionV4",VO="NonMaxSuppressionV5",BD="OnesLike",VD="OneHot",WD="Pack",UD="PadV2",C1="Pow",GD="Prelu",HD="Prod",wq="RaggedGather",bq="RaggedRange",Cq="RaggedTensorToTensor",WO="Range",UO="Real",S1="Reciprocal",D1="Relu",jD="Reshape",qD="ResizeNearestNeighbor",GO="ResizeNearestNeighborGrad",KD="ResizeBilinear",HO="ResizeBilinearGrad",_1="Relu6",XD="Reverse",T1="Round",E1="Rsqrt",Sq="ScatterNd",Dq="TensorScatterUpdate",_q="SearchSorted",YD="Select",A1="Selu",ZD="Slice",N1="Sin",k1="Sinh",I1="Sign",R1="Sigmoid",$1="Softplus",M1="Sqrt",QD="Sum",JD="SpaceToBatchND",e_="SplitV",t_="Softmax",Tq="SparseFillEmptyRows",Eq="SparseReshape",Aq="SparseSegmentMean",Nq="SparseSegmentSum",kq="SparseToDense",O1="SquaredDifference",jO="Square",qO="StaticRegexReplace",KO="StridedSlice",Iq="StringNGrams",Rq="StringSplit",$q="StringToHashBucketFast",P1="Sub",F1="Tan",L1="Tanh",z1="Tile",XO="TopK",YO="Transform",qp="Transpose",ZO="Unique",n_="Unpack",r_="UnsortedSegmentSum",i_="ZerosLike",B1="Step",a0e="FromPixels",QO="RotateWithOffset",$C="_FusedMatMul",MC="FusedConv2D",Mq="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pa(...t){ue().getBool("IS_TEST")||ue().getBool("PROD")||console.warn(...t)}function o0e(...t){ue().getBool("IS_TEST")||ue().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OC=fO("kernelRegistry",()=>new Map),nI=fO("gradRegistry",()=>new Map);function L5(t,e){const n=Pq(t,e);return OC.get(n)}function z5(t){return nI.get(t)}function B5(t){const e=OC.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===t&&n.push(o)}return n}function Oq(t){const{kernelName:e,backendName:n}=t,r=Pq(e,n);OC.has(r)&&Pa(`The kernel '${e}' for backend '${n}' is already registered`),OC.set(r,t)}function s0e(t){const{kernelName:e}=t;nI.has(e)&&ue().getBool("DEBUG")&&Pa(`Overriding the gradient for '${e}'`),nI.set(e,t)}function Pq(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fq(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Lq=vn,_o=null;try{_o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function vn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}vn.prototype.__isLong__;Object.defineProperty(vn.prototype,"__isLong__",{value:!0});function Ia(t){return(t&&t.__isLong__)===!0}vn.isLong=Ia;var V5={},W5={};function dd(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=W5[t],r)?r:(n=gn(t,(t|0)<0?-1:0,!0),i&&(W5[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=V5[t],r)?r:(n=gn(t,t<0?-1:0,!1),i&&(V5[t]=n),n))}vn.fromInt=dd;function To(t,e){if(isNaN(t))return e?lh:Eo;if(e){if(t<0)return lh;if(t>=zq)return Wq}else{if(t<=-G5)return da;if(t+1>=G5)return Vq}return t<0?To(-t,e).neg():gn(t%Dv|0,t/Dv|0,e)}vn.fromNumber=To;function gn(t,e,n){return new vn(t,e,n)}vn.fromBits=gn;var PC=Math.pow;function JO(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Eo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return JO(t.substring(1),e,n).neg();for(var i=To(PC(n,8)),a=Eo,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=To(PC(n,s));a=a.mul(u).add(To(l))}else a=a.mul(i),a=a.add(To(l))}return a.unsigned=e,a}vn.fromString=JO;function Os(t,e){return typeof t=="number"?To(t,e):typeof t=="string"?JO(t,e):gn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}vn.fromValue=Os;var U5=65536,l0e=1<<24,Dv=U5*U5,zq=Dv*Dv,G5=zq/2,H5=dd(l0e),Eo=dd(0);vn.ZERO=Eo;var lh=dd(0,!0);vn.UZERO=lh;var Ep=dd(1);vn.ONE=Ep;var Bq=dd(1,!0);vn.UONE=Bq;var rI=dd(-1);vn.NEG_ONE=rI;var Vq=gn(-1,2147483647,!1);vn.MAX_VALUE=Vq;var Wq=gn(-1,-1,!0);vn.MAX_UNSIGNED_VALUE=Wq;var da=gn(0,-2147483648,!1);vn.MIN_VALUE=da;var Re=vn.prototype;Re.toInt=function(){return this.unsigned?this.low>>>0:this.low};Re.toNumber=function(){return this.unsigned?(this.high>>>0)*Dv+(this.low>>>0):this.high*Dv+(this.low>>>0)};Re.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(da)){var n=To(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var a=To(PC(e,6),this.unsigned),o=this,s="";;){var l=o.div(a),u=o.sub(l.mul(a)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};Re.getHighBits=function(){return this.high};Re.getHighBitsUnsigned=function(){return this.high>>>0};Re.getLowBits=function(){return this.low};Re.getLowBitsUnsigned=function(){return this.low>>>0};Re.getNumBitsAbs=function(){if(this.isNegative())return this.eq(da)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Re.isZero=function(){return this.high===0&&this.low===0};Re.eqz=Re.isZero;Re.isNegative=function(){return!this.unsigned&&this.high<0};Re.isPositive=function(){return this.unsigned||this.high>=0};Re.isOdd=function(){return(this.low&1)===1};Re.isEven=function(){return(this.low&1)===0};Re.equals=function(e){return Ia(e)||(e=Os(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Re.eq=Re.equals;Re.notEquals=function(e){return!this.eq(e)};Re.neq=Re.notEquals;Re.ne=Re.notEquals;Re.lessThan=function(e){return this.comp(e)<0};Re.lt=Re.lessThan;Re.lessThanOrEqual=function(e){return this.comp(e)<=0};Re.lte=Re.lessThanOrEqual;Re.le=Re.lessThanOrEqual;Re.greaterThan=function(e){return this.comp(e)>0};Re.gt=Re.greaterThan;Re.greaterThanOrEqual=function(e){return this.comp(e)>=0};Re.gte=Re.greaterThanOrEqual;Re.ge=Re.greaterThanOrEqual;Re.compare=function(e){if(Ia(e)||(e=Os(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Re.comp=Re.compare;Re.negate=function(){return!this.unsigned&&this.eq(da)?da:this.not().add(Ep)};Re.neg=Re.negate;Re.add=function(e){Ia(e)||(e=Os(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,f=0,h=0,d=0;return d+=a+u,h+=d>>>16,d&=65535,h+=i+l,f+=h>>>16,h&=65535,f+=r+s,c+=f>>>16,f&=65535,c+=n+o,c&=65535,gn(h<<16|d,c<<16|f,this.unsigned)};Re.subtract=function(e){return Ia(e)||(e=Os(e)),this.add(e.neg())};Re.sub=Re.subtract;Re.multiply=function(e){if(this.isZero())return Eo;if(Ia(e)||(e=Os(e)),_o){var n=_o.mul(this.low,this.high,e.low,e.high);return gn(n,_o.get_high(),this.unsigned)}if(e.isZero())return Eo;if(this.eq(da))return e.isOdd()?da:Eo;if(e.eq(da))return this.isOdd()?da:Eo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(H5)&&e.lt(H5))return To(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,o=this.low&65535,s=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,h=0,d=0,p=0;return p+=o*c,d+=p>>>16,p&=65535,d+=a*c,h+=d>>>16,d&=65535,d+=o*u,h+=d>>>16,d&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=a*u,f+=h>>>16,h&=65535,h+=o*l,f+=h>>>16,h&=65535,f+=r*c+i*u+a*l+o*s,f&=65535,gn(d<<16|p,f<<16|h,this.unsigned)};Re.mul=Re.multiply;Re.divide=function(e){if(Ia(e)||(e=Os(e)),e.isZero())throw Error("division by zero");if(_o){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?_o.div_u:_o.div_s)(this.low,this.high,e.low,e.high);return gn(n,_o.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?lh:Eo;var r,i,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return lh;if(e.gt(this.shru(1)))return Bq;a=lh}else{if(this.eq(da)){if(e.eq(Ep)||e.eq(rI))return da;if(e.eq(da))return Ep;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Eo)?e.isNegative()?Ep:rI:(i=this.sub(e.mul(r)),a=r.add(i.div(e)),a)}else if(e.eq(da))return this.unsigned?lh:Eo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=Eo}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),l=s<=48?1:PC(2,s-48),u=To(r),c=u.mul(e);c.isNegative()||c.gt(i);)r-=l,u=To(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Ep),a=a.add(u),i=i.sub(c)}return a};Re.div=Re.divide;Re.modulo=function(e){if(Ia(e)||(e=Os(e)),_o){var n=(this.unsigned?_o.rem_u:_o.rem_s)(this.low,this.high,e.low,e.high);return gn(n,_o.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Re.mod=Re.modulo;Re.rem=Re.modulo;Re.not=function(){return gn(~this.low,~this.high,this.unsigned)};Re.and=function(e){return Ia(e)||(e=Os(e)),gn(this.low&e.low,this.high&e.high,this.unsigned)};Re.or=function(e){return Ia(e)||(e=Os(e)),gn(this.low|e.low,this.high|e.high,this.unsigned)};Re.xor=function(e){return Ia(e)||(e=Os(e)),gn(this.low^e.low,this.high^e.high,this.unsigned)};Re.shiftLeft=function(e){return Ia(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):gn(0,this.low<<e-32,this.unsigned)};Re.shl=Re.shiftLeft;Re.shiftRight=function(e){return Ia(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):gn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Re.shr=Re.shiftRight;Re.shiftRightUnsigned=function(e){if(Ia(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return gn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?gn(n,0,this.unsigned):gn(n>>>e-32,0,this.unsigned)};Re.shru=Re.shiftRightUnsigned;Re.shr_u=Re.shiftRightUnsigned;Re.toSigned=function(){return this.unsigned?gn(this.low,this.high,!1):this};Re.toUnsigned=function(){return this.unsigned?this:gn(this.low,this.high,!0)};Re.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Re.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Re.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};vn.fromBytes=function(e,n,r){return r?vn.fromBytesLE(e,n):vn.fromBytesBE(e,n)};vn.fromBytesLE=function(e,n){return new vn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};vn.fromBytesBE=function(e,n){return new vn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Uq=Al(Lq),u0e=Rse({__proto__:null,default:Uq},[Lq]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qf=Uq||u0e;function a_(t){return Qf.fromString(t,!0,16)}const Gq=a_("c3a5c85c97cb3127"),Kf=a_("b492b66fbe98f273"),bi=a_("9ae16a3b2f90404f");function iI(t){return t.xor(t.shru(47))}function Hq(t,e,n){const r=t.slice(e,e+n);return Qf.fromBytes(Array.from(r),!0,!0)}function sn(t,e){return Hq(t,e,8)}function j5(t,e){return Hq(t,e,4)}function Er(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Tc(t,e,n=a_("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function c0e(t,e,n,r,i,a){i=i.add(t),a=Er(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),a=a.add(Er(i,44)),[i.add(r),a.add(o)]}function sw(t,e,n,r){return c0e(sn(t,e),sn(t,e+8),sn(t,e+16),sn(t,e+24),n,r)}function f0e(t,e=t.length){if(e>=8){const n=bi.add(e*2),r=sn(t,0).add(bi),i=sn(t,e-8),a=Er(i,37).mul(n).add(r),o=Er(r,25).add(i).mul(n);return Tc(a,o,n)}if(e>=4){const n=bi.add(e*2),r=j5(t,0);return Tc(r.shl(3).add(e),j5(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],a=n+(r<<8),o=e+(i<<2);return iI(bi.mul(a).xor(Gq.mul(o))).mul(bi)}return bi}function h0e(t,e=t.length){const n=bi.add(e*2),r=sn(t,0).mul(Kf),i=sn(t,8),a=sn(t,e-8).mul(n),o=sn(t,e-16).mul(bi);return Tc(Er(r.add(i),43).add(Er(a,30)).add(o),r.add(Er(i.add(bi),18)).add(a),n)}function d0e(t,e=t.length){const n=bi.add(e*2),r=sn(t,0).mul(bi),i=sn(t,8),a=sn(t,e-8).mul(n),o=sn(t,e-16).mul(bi),s=Er(r.add(i),43).add(Er(a,30)).add(o),l=Tc(s,r.add(Er(i.add(bi),18)).add(a),n),u=sn(t,16).mul(n),c=sn(t,24),f=s.add(sn(t,e-32)).mul(n),h=l.add(sn(t,e-24)).mul(n);return Tc(Er(u.add(c),43).add(Er(f,30)).add(h),u.add(Er(c.add(r),18)).add(f),n)}function p0e(t,e=t.length){const n=Qf.fromNumber(81,!0);if(e<=32)return e<=16?f0e(t,e):h0e(t,e);if(e<=64)return d0e(t,e);let r=n,i=n.mul(Kf).add(113),a=iI(i.mul(bi).add(113)).mul(bi),o=[Qf.UZERO,Qf.UZERO],s=[Qf.UZERO,Qf.UZERO];r=r.mul(bi).add(sn(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Er(r.add(i).add(o[0]).add(sn(t,l+8)),37).mul(Kf),i=Er(i.add(o[1]).add(sn(t,l+48)),42).mul(Kf),r=r.xor(s[1]),i=i.add(o[0]).add(sn(t,l+40)),a=Er(a.add(s[0]),33).mul(Kf),o=sw(t,l,o[1].mul(Kf),r.add(s[0])),s=sw(t,l+32,a.add(s[1]),i.add(sn(t,l+16))),[a,r]=[r,a],l+=64;while(l!==u);const f=Kf.add(a.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Er(r.add(i).add(o[0]).add(sn(t,l+8)),37).mul(f),i=Er(i.add(o[1]).add(sn(t,l+48)),42).mul(f),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(sn(t,l+40))),a=Er(a.add(s[0]),33).mul(f),o=sw(t,l,o[1].mul(f),r.add(s[0])),s=sw(t,l+32,a.add(s[1]),i.add(sn(t,l+16))),[a,r]=[r,a],Tc(Tc(o[0],s[0],f).add(iI(i).mul(Gq)).add(a),Tc(o[1],s[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rf(t,e){return e==="string"?Ec(t):pd([t],e)}function v0e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function pd(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Wh(t)),ue().getBool("DEBUG")&&Hme(t,e),v0e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Li(){return ue().platform.now()}function Ec(t,e="utf-8"){return e=e||"utf-8",ue().platform.encode(t,e)}function Lc(t,e="utf-8"){return e=e||"utf-8",ue().platform.decode(t,e)}function Fo(t){return ue().platform.isTypedArray!=null?ue().platform.isTypedArray(t):Fq(t)}function Wh(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||cO(t)||t==null||Fo(t)&&n)e.push(t);else if(Array.isArray(t)||Fo(t))for(let r=0;r<t.length;++r)Wh(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Wh(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g0e=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new y0e)}profileKernel(e,n,r){let i;const a=()=>{i=r()};let o;const s=Li();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const u of i)u.dataSync();o=Promise.resolve({kernelMs:Li()-s})}if(ue().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const c=i[u];c.data().then(f=>{m0e(f,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],a,l[2])})})}};function m0e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class y0e{logKernelProfile(e,n,r,i,a,o){const s=typeof i=="number"?jp(`${i}ms`,9):i.error,l=jp(e,25),u=n.rank,c=n.size,f=jp(n.shape.toString(),14);let h="";for(const d in a){const p=a[d];if(p!=null){const v=p.shape||n.shape,m=v.length;h+=`${d}: ${m}D ${m>0?v:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${f}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const h=c[f];let d=!1;for(let p=0;p<e.length;p++)if(r[h.id]){u.outputs.forEach(v=>r[v.id]=!0),d=!0,i[u.id]=!0;break}if(d)break}}const a={};a[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(a[u.outputs[f].id]){for(const h in c)a[c[h].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(i[u.id]&&o[u.id]){const c={};for(const h in u.inputs){const d=u.inputs[h];r[d.id]&&(c[h]=d)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,s.push(f)}}return s}function w0e(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const l in a.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=a.inputs[l];if(!Bt(u.shape,c.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5=20,Ug=3,RE=7;function b0e(t,e,n,r){const i=je(e),a=C0e(t,e,n,i),o=e.length,s=Eb(t,e,n,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function C0e(t,e,n,r){const i=he(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,l=n==="complex64"?Dm(t):t;if(s>1)for(let u=0;u<i/a;u++){const c=u*a;for(let f=0;f<a;f++)o[f]=Math.max(o[f],Sm(l[c+f],0,n).length)}return o}function Sm(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(RE))} + ${parseFloat(t[1].toFixed(RE))}j`:Hy(t)?r=`'${t}'`:n==="bool"?r=jq(t):r=parseFloat(t.toFixed(RE)).toString(),jp(r,e)}function jq(t){return t===0?"false":"true"}function Eb(t,e,n,r,i,a=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const v=Dm(t);return[Sm(v[0],0,n)]}return n==="bool"?[jq(t[0])]:[t[0].toString()]}if(l===1){if(s>q5){const m=Ug*o;let g=Array.from(t.slice(0,m)),y=Array.from(t.slice((s-Ug)*o,s*o));return n==="complex64"&&(g=Dm(g),y=Dm(y)),["["+g.map((x,w)=>Sm(x,i[w],n)).join(", ")+", ..., "+y.map((x,w)=>Sm(x,i[s-Ug+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Dm(t):Array.from(t)).map((m,g)=>Sm(m,i[g],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*o,h=[];if(s>q5){for(let v=0;v<Ug;v++){const m=v*f,g=m+f;h.push(...Eb(t.slice(m,g),u,n,c,i,!1))}h.push("...");for(let v=s-Ug;v<s;v++){const m=v*f,g=m+f;h.push(...Eb(t.slice(m,g),u,n,c,i,v===s-1))}}else for(let v=0;v<s;v++){const m=v*f,g=m+f;h.push(...Eb(t.slice(m,g),u,n,c,i,v===s-1))}const d=l===2?",":"";h[0]="["+(s>0?h[0]+d:"");for(let v=1;v<h.length-1;v++)h[v]=" "+h[v]+d;let p=`,
`;for(let v=2;v<l;v++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":p),h}function Dm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Br{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=he(e),r!=null){const i=r.length;V(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Hn(n,this.size),this.strides=je(e)}set(e,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return fs().makeTensor(this.values,this.shape,this.dtype)}}let fs=null,ap=null;function S0e(t){fs=t}function D0e(t){ap=t}class rr{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=he(e),this.strides=je(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return ap.buffer(this.shape,this.dtype,e)}bufferSync(){return ap.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return bs(this.shape,e,this.dtype==="complex64")}arraySync(){return bs(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=fs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Lc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),fs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=fs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Lc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await fs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(fs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ap.print(this,e)}clone(){return this.throwIfDisposed(),ap.clone(this)}toString(e=!1){const n=this.dataSync();return b0e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ap.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),fs().makeVariable(this,e,n,r)}}Object.defineProperty(rr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function fe(){return fO("Tensor",()=>rr)}fe();class FC extends rr{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Bt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);fs().disposeTensor(this),this.dataId=e.dataId,fs().incRef(this,null)}dispose(){fs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(FC,Symbol.hasInstance,{value:t=>t instanceof rr&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var K5;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(K5||(K5={}));var aI;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(aI||(aI={}));var oI;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(oI||(oI={}));var sI;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(sI||(sI={}));var lI;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(lI||(lI={}));const _0e={float32:sI,int32:aI,bool:oI,complex64:lI};function _a(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return _0e[t][e]}function eP(t){return _a(t,"int32")}function qq(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Kq(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kn(t,e){if(t.dtype===e.dtype)return[t,e];const n=_a(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Xq(t){const e=[];return Yq(t,e,new Set),e}function Yq(t,e,n){if(t==null)return;if(t instanceof rr){e.push(t);return}if(!T0e(t))return;const r=t;for(const i in r){const a=r[i];n.has(a)||(n.add(a),Yq(a,e,n))}}function T0e(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $E(t){return t.kernelName!=null}class X5{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class _v{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new X5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Pa(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new g0e(this.backendInstance),!0}setupRegisteredKernels(){B5(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){B5(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof oO)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Pa(`Initialization of backend ${e} failed`),Pa(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Pa(`Initialization of backend ${e} failed`),Pa(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return _v.nextTensorId++}nextVariableId(){return _v.nextVariableId++}clone(e){const n=ne.runKernel(h1,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return ne.runKernel(Jy,l,u)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(L5(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=$E(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if($E(e)){const{kernelName:p,inputs:v,attrs:m}=e;this.backendName==null&&this.backend;const g=L5(p,this.backendName);V(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),s=()=>{const y=this.backend.numDataIds();l=g.kernelFunc({inputs:v,attrs:m,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,x);const w=x.map(b=>b.rank!=null?b:this.makeTensorFromTensorInfo(b));if(i){const b=this.getTensorsForGradient(p,v,w);r=this.saveTensorsForBackwardMode(b)}return w}}else{const{forwardFunc:p}=e,v=m=>{i&&(r=m.map(g=>this.keep(this.clone(g))))};s=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,v));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,m,g),g}}const{inputs:c,attrs:f}=e,h=$E(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(d=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),n=d.outputs)}),i&&this.addTapeNode(u,c,n,h,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=z5(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=a.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&Hy(e[0])&&(a=e.map(l=>Ec(l)));const o=i.write(a,n,r),s=new rr(n,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const l=this.state.tensorInfo.get(o),u=qme(a);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,i){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:a}=e,o=new rr(i,a,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new FC(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*RC(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof FC||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*RC(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=z5(e);l!=null&&(i=l.gradFunc),i!=null&&(s.gradient=u=>(u=u.map((c,f)=>{if(c==null){const h=r[f],d=ai(h.size,h.dtype);return this.makeTensor(d,h.shape,h.dtype)}return c}),i(u.length>1?u:u[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Xq(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,n,r,i=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(a instanceof rr,()=>"The result y returned by f() must be a tensor.");const o=x0e(this.state.activeTape,n,a);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??E0e(a.shape),w0e(s,o,u=>this.tidy(u),A0e);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return V(Qk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(s=>s instanceof rr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((s,l)=>{i[l]=s});const a=(s,l)=>(r=e(...n,l),V(r.value instanceof rr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(Qk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];V(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(c.every(h=>h instanceof rr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((h,d)=>{f[d]=()=>h}),f};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Li(),r=await this.backend.time(e);return r.wallMs=Li()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new X5;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}_v.nextTensorId=0;_v.nextVariableId=0;function E0e(t){const e=uO(he(t),"float32");return ne.makeTensor(e,t,"float32")}function Zq(){const t=dq();if(t._tfengine==null){const e=new Yme(t);t._tfengine=new _v(e)}return e0e(t._tfengine.ENV),S0e(()=>t._tfengine),t._tfengine}const ne=Zq();function A0e(t,e){const n={a:t,b:e};return ne.runKernel(og,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(){return typeof navigator<"u"&&navigator!=null}function Qq(t){if(t||N0e()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Jq(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qi=ue();qi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});qi.registerFlag("IS_BROWSER",()=>Jq());qi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");qi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));qi.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));qi.registerFlag("PROD",()=>!1);qi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>qi.getBool("DEBUG"));qi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);qi.registerFlag("IS_TEST",()=>!1);qi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>qi.getBool("DEBUG"));qi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);qi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);qi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o_(t,e){let n=t;if(Fo(t))return e==="string"?[]:[t.length];if(qq(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Kq(t))return[t.buffer.size/(e==null?4:RC(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Fo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ue().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&eK(t,r,[]),r}function eK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Fo(t)){V(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),V(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)eK(t[i],r,n.concat(i))}function Y5(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function X(t,e,n,r="numeric"){if(t instanceof rr)return Y5(r,t.dtype,e,n),t;let i=ig(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Y5(r,i,e,n),t==null||!Fo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=o_(t,i);!Fo(t)&&!Array.isArray(t)&&(t=[t]);const s=i!=="string"?pd(t,i):Wh(t,[],!0);return ne.makeTensor(s,a,i)}function tK(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,o)=>X(a,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0e="__op";function ae(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+k0e;const i=(...a)=>{ne.startScope(n);try{const o=r(...a);return cO(o)&&console.error("Cannot return a Promise inside of tidy."),ne.endScope(o),o}catch(o){throw ne.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t,e){const n=X(t,"real","complex"),r=X(e,"imag","complex");lO(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return ne.runKernel(xO,i)}const Uh=ae({complex_:I0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_(t,e,n,r){if(r==null)r=ig(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Kq(t)||qq(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ne.backend.createTensorFromGPUData(t,e||n,r)}if(!Fo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Du(e);const i=he(e),a=he(n);V(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==he(e.slice(o)):!0;V(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Fo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?pd(t,r):Wh(t,[],!0),ne.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(t,e,n){const r=o_(t,n);return s_(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class af{static join(e){return new af(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Fo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=e+s-u.start,h=s,p=Math.min(n,u.end)-u.start,v=new Uint8Array(u.buffer,f,p-f);if(o.set(v,h),s+=v.length,n<u.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=R0e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function R0e(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=e(t[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LC=4;async function Q5(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const s=i[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const h=await l.bytes(),d=h.reduce((m,g)=>m+g.length,0)+LC*h.length,p=new Uint8Array(d);let v=0;for(let m=0;m<h.length;m++){const g=h[m],y=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(y,v),v+=LC,p.set(g,v),v+=g.length}f(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const a=await Promise.all(r);return{data:M0e(a),specs:n}}function $0e(t,e){const n=new af(t),r={};let i,a=0;for(const o of e){const s=o.name,l=o.dtype,u=o.shape,c=he(u);let f;if("quantization"in o){const h=o.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error(`Weight ${o.name} with quantization ${h.dtype} doesn't have corresponding metadata min and scale.`)}else if(h.dtype==="float16"){if(l!=="float32")throw new Error(`Weight ${o.name} is quantized with ${h.dtype} which only supports weights of type float32 not ${l}.`)}else throw new Error(`Weight ${o.name} has unknown quantization dtype ${h.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const d=Z5[h.dtype],p=n.slice(a,a+c*d),v=h.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(l==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){f=new Float32Array(v.length);for(let m=0;m<v.length;m++){const g=v[m];f[m]=g*h.scale+h.min}}else if(h.dtype==="float16")i===void 0&&(i=H0e()),f=i(v);else throw new Error(`Unsupported quantization type ${h.dtype} for weight type float32.`);else if(l==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error(`Unsupported quantization type ${h.dtype} for weight type int32.`);f=new Int32Array(v.length);for(let m=0;m<v.length;m++){const g=v[m];f[m]=Math.round(g*h.scale+h.min)}}else throw new Error(`Unsupported dtype in weight '${s}': ${l}`);a+=c*d}else if(l==="string"){const h=he(o.shape);f=[];for(let d=0;d<h;d++){const p=new Uint32Array(n.slice(a,a+LC))[0];a+=LC;const v=new Uint8Array(n.slice(a,a+p));f.push(v),a+=p}}else{const h=Z5[l],d=n.slice(a,a+c*h);if(l==="float32")f=new Float32Array(d);else if(l==="int32")f=new Int32Array(d);else if(l==="bool")f=new Uint8Array(d);else if(l==="complex64"){f=new Float32Array(d);const p=new Float32Array(f.length/2),v=new Float32Array(f.length/2);for(let y=0;y<p.length;y++)p[y]=f[y*2],v[y]=f[y*2+1];const m=Zm(p,u,"float32"),g=Zm(v,u,"float32");r[s]=Uh(m,g),m.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${s}': ${l}`);a+=c*h}l!=="complex64"&&(r[s]=Zm(f,u,l))}return r}function M0e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const tP=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function J5(t){return tP?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function O0e(t){if(tP)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function P0e(t){if(tP){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function F0e(t){return af.join(t)}function L0e(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function z0e(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function B0e(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),z0e(t,n,r)}function nP(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:J5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:J5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new af(t.weightData).byteLength}}function V0e(t){const e=[];for(const n of t)e.push(...n.weights);return e}function W0e(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function U0e(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function G0e(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function H0e(){const t=W0e(),e=U0e(),n=G0e();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];a[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Sr.instance==null&&(Sr.instance=new Sr),Sr.instance}static registerSaveRouter(e){Sr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Sr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Sr.getHandlers(e,"save")}static getLoadHandlers(e,n){return Sr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Sr.getInstance().loadRouters:Sr.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const j0e=t=>Sr.getSaveHandlers(t),q0e=(t,e)=>Sr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uI="tensorflowjs",cI=1,uh="models_store",rc="model_info_store";function nK(){if(!ue().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function fI(t){const e=t.result;e.createObjectStore(uh,{keyPath:"modelPath"}),e.createObjectStore(rc,{keyPath:"modelPath"})}class Gh{constructor(e){if(this.indexedDB=nK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const a=this.indexedDB.open(uI,cI);a.onupgradeneeded=()=>fI(a),a.onsuccess=()=>{const o=a.result;if(n==null){const s=o.transaction(uh,"readonly"),u=s.objectStore(uh).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),i(u.error)),s.oncomplete=()=>o.close()}else{n.weightData=af.join(n.weightData);const s=nP(n),l=o.transaction(rc,"readwrite");let u=l.objectStore(rc),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(h){return i(h)}let f;c.onsuccess=()=>{f=o.transaction(uh,"readwrite");const h=f.objectStore(uh);let d;try{d=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(p){return i(p)}d.onsuccess=()=>r({modelArtifactsInfo:s}),d.onerror=p=>{u=l.objectStore(rc);const v=u.delete(this.modelPath);v.onsuccess=()=>(o.close(),i(d.error)),v.onerror=m=>(o.close(),i(d.error))}},c.onerror=h=>(o.close(),i(c.error)),l.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}Gh.URL_SCHEME="indexeddb://";const rK=t=>ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Gh.URL_SCHEME)?K0e(t.slice(Gh.URL_SCHEME.length)):null;Sr.registerSaveRouter(rK);Sr.registerLoadRouter(rK);function K0e(t){return new Gh(t)}function X0e(t){return t.startsWith(Gh.URL_SCHEME)?t.slice(Gh.URL_SCHEME.length):t}class Y0e{constructor(){this.indexedDB=nK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(uI,cI);r.onupgradeneeded=()=>fI(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(rc,"readonly"),s=a.objectStore(rc).getAll();s.onsuccess=()=>{const l={};for(const u of s.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},s.onerror=l=>(i.close(),n(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=X0e(e),new Promise((n,r)=>{const i=this.indexedDB.open(uI,cI);i.onupgradeneeded=()=>fI(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(rc,"readwrite"),s=o.objectStore(rc),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),f=()=>{u=a.transaction(uh,"readwrite");const d=u.objectStore(uh).delete(e);d.onsuccess=()=>n(l.result.modelArtifactsInfo),d.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=h=>(f(),a.close(),r(l.error))}},l.onerror=c=>(a.close(),r(l.error)),o.oncomplete=()=>{u==null?a.close():u.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zl="/",op="tensorflowjs_models",iK="info",Z0e="model_topology",Q0e="weight_specs",J0e="weight_data",eye="model_metadata";function aK(t){return{info:[op,t,iK].join(Zl),topology:[op,t,Z0e].join(Zl),weightSpecs:[op,t,Q0e].join(Zl),weightData:[op,t,J0e].join(Zl),modelMetadata:[op,t,eye].join(Zl)}}function oK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function tye(t){const e=t.split(Zl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Zl)}function nye(t){return t.startsWith(Hh.URL_SCHEME)?t.slice(Hh.URL_SCHEME.length):t}class Hh{constructor(e){if(!ue().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=aK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=nP(e),a=af.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,O0e(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw oK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=P0e(o),n}}Hh.URL_SCHEME="localstorage://";const sK=t=>ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hh.URL_SCHEME)?rye(t.slice(Hh.URL_SCHEME.length)):null;Sr.registerSaveRouter(sK);Sr.registerLoadRouter(sK);function rye(t){return new Hh(t)}class iye{constructor(){V(ue().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=op+Zl,r=Zl+iK;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(n)&&a.endsWith(r)){const o=tye(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=nye(e);const n=aK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return oK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eB="://";class Ks{constructor(){this.managers={}}static getInstance(){return Ks.instance==null&&(Ks.instance=new Ks),Ks.instance}static registerManager(e,n){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(eB)&&(e=e.slice(0,e.indexOf(eB))),V(e.length>0,()=>"scheme must not be an empty string.");const r=Ks.getInstance();V(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ks.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ks.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aye{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ue().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Fq(e)}}if(ue().get("IS_BROWSER")){ue().setPlatform("browser",new aye);try{Ks.registerManager(Hh.URL_SCHEME,new iye)}catch{}try{Ks.registerManager(Gh.URL_SCHEME,new Y0e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oye={importFetch:()=>require("node-fetch")};let ME;class sye{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ue().global.fetch!=null?ue().global.fetch(e,n):(ME==null&&(ME=oye.importFetch()),ME(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ue().get("IS_NODE")&&!ue().get("IS_BROWSER")&&ue().setPlatform("node",new sye);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dt(t,e="float32",n){return e=e||"float32",Du(t),new Br(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(t,e){const n=X(t,"x","cast");if(!jme(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return ne.runKernel(Jy,r,i)}const Fe=ae({cast_:lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const n={x:X(t,"x","clone","string_or_numeric")};return ne.runKernel(h1,n)}const bh=ae({clone_:uye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Zq();const fye={buffer:Dt,cast:Fe,clone:bh,print:cye};D0e(fye);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qs(){return ne}function hI(){return ne.memory()}function le(t,e){return ne.tidy(t,e)}function xt(t){Xq(t).forEach(n=>n.dispose())}function dl(t){return ne.keep(t)}function lK(t,e,n=1){return ne.registerBackend(t,e,n)}function hye(){return ne.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t,e){let n=X(t,"a","add"),r=X(e,"b","add");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(og,i)}const Te=ae({add_:dye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t,e){let n=X(t,"a","floorDiv"),r=X(e,"b","floorDiv");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(c1,i)}const uK=ae({floorDiv_:pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t,e){let n=X(t,"a","div"),r=X(e,"b","div");if([n,r]=Kn(n,r),n.dtype==="int32"&&r.dtype==="int32")return uK(n,r);const i={a:n,b:r},a={};return ne.runKernel(i1,i,a)}const Je=ae({div_:vye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t,e){let n=X(t,"a","mul"),r=X(e,"b","mul");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(b1,i)}const te=ae({mul_:gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t){const e=X(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ne.runKernel(hD,n)}else{const n={x:e};return ne.runKernel(aD,n)}}const mi=ae({abs_:mye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t){const n={x:X(t,"x","acos")};return ne.runKernel(jy,n)}const xye=ae({acos_:yye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(t){const n={x:X(t,"x","acosh")};return ne.runKernel(qy,n)}const bye=ae({acosh_:wye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t,e=null,n=!1){const i={x:X(t,"x","all","bool")},a={axis:e,keepDims:n};return ne.runKernel(dO,i,a)}const cK=ae({all_:Cye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e=null,n=!1){const i={x:X(t,"x","any","bool")},a={axis:e,keepDims:n};return ne.runKernel(pO,i,a)}const dI=ae({any_:Sye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t,e=0){const r={x:X(t,"x","argMax")},i={axis:e};return ne.runKernel(oD,r,i)}const W0=ae({argMax_:Dye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t,e=0){const r={x:X(t,"x","argMin")},i={axis:e};return ne.runKernel(sD,r,i)}const Tye=ae({argMin_:_ye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t){const n={x:X(t,"x","asin")};return ne.runKernel(Ky,n)}const Aye=ae({asin_:Eye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t){const n={x:X(t,"x","asinh")};return ne.runKernel(Xy,n)}const kye=ae({asinh_:Nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(t){const n={x:X(t,"x","atan")};return ne.runKernel(Yy,n)}const Rye=ae({atan_:Iye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(t,e){let n=X(t,"a","atan2"),r=X(e,"b","atan2");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(Qy,i)}const Mye=ae({atan2_:$ye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t){const n={x:X(t,"x","atanh")};return ne.runKernel(Zy,n)}const Pye=ae({atanh_:Oye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t,e,n,r,i="NHWC",a){const o=t[3],s=[...e,o],l=Tu(i);return Ur(t,s,n,a,r,null,null,l)}function Ho(t,e,n,r,i,a,o="channelsLast"){const[s,l]=U0(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ur(t,u,n,r,i,a,!1,o)}function _u(t,e,n,r,i,a,o="NDHWC"){const[s,l,u]=pI(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")f="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return of(t,c,n,r,i,!1,f,a)}function Ur(t,e,n,r,i,a,o=!1,s="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,f]=t;else if(s==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,d,,p]=e,[v,m]=U0(n),[g,y]=U0(r),x=Kp(h,g),w=Kp(d,y),{padInfo:b,outHeight:C,outWidth:S}=zye(i,u,c,v,m,x,w,a,s),D=o?p*f:p;let _;return s==="channelsFirst"?_=[l,D,C,S]:s==="channelsLast"&&(_=[l,C,S,D]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:f,outHeight:C,outWidth:S,outChannels:D,padInfo:b,strideHeight:v,strideWidth:m,filterHeight:h,filterWidth:d,effectiveFilterHeight:x,effectiveFilterWidth:w,dilationHeight:g,dilationWidth:y,inShape:t,outShape:_,filterShape:e}}function of(t,e,n,r,i,a=!1,o="channelsLast",s){let[l,u,c,f,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f,h]=t;else if(o==="channelsFirst")[l,h,u,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,v,,m]=e,[g,y,x]=pI(n),[w,b,C]=pI(r),S=Kp(d,w),D=Kp(p,b),_=Kp(v,C),{padInfo:T,outDepth:E,outHeight:A,outWidth:R}=Bye(i,u,c,f,g,y,x,S,D,_,s),$=a?m*h:m;let O;return o==="channelsFirst"?O=[l,$,E,A,R]:o==="channelsLast"&&(O=[l,E,A,R,$]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:f,inChannels:h,outDepth:E,outHeight:A,outWidth:R,outChannels:$,padInfo:T,strideDepth:g,strideHeight:y,strideWidth:x,filterDepth:d,filterHeight:p,filterWidth:v,effectiveFilterDepth:S,effectiveFilterHeight:D,effectiveFilterWidth:_,dilationDepth:w,dilationHeight:b,dilationWidth:C,inShape:t,outShape:O,filterShape:e}}function Fye(t,e,n,r,i){r==null&&(r=rP(t,e,n));const a=t[0],o=t[1],s=G0((a-e+2*r)/n+1,i),l=G0((o-e+2*r)/n+1,i);return[s,l]}function Lye(t,e,n,r,i,a){i==null&&(i=rP(t,e[0],r[0]));const o=[0,0,0,n];for(let s=0;s<3;s++)t[s]+2*i>=e[s]&&(o[s]=G0((t[s]-e[s]+2*i)/r[s]+1,a));return o}function rP(t,e,n,r=1){const i=Kp(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function U0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function pI(t){return typeof t=="number"?[t,t,t]:t}function Kp(t,e){return e<=1?t:t+(t-1)*(e-1)}function zye(t,e,n,r,i,a,o,s,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const d=Fye([e,n],a,r,t,s);c=d[0],f=d[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/i);const h=Math.max(0,(c-1)*r+a-e),d=Math.max(0,(f-1)*i+o-n),p=Math.floor(h/2),v=h-p,m=Math.floor(d/2),g=d-m;u={top:p,bottom:v,left:m,right:g,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),f=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],d=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],v=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:d,left:p,right:v,type:h===0&&d===0&&p===0&&v===0?"VALID":"EXPLICIT"},c=G0((e-a+h+d)/r+1,s),f=G0((n-o+p+v)/i+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function Bye(t,e,n,r,i,a,o,s,l,u,c){let f,h,d,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=Lye([e,n,r,1],[s,l,u],1,[i,a,o],t,c);h=m[0],d=m[1],p=m[2]}else if(t==="same"){h=Math.ceil(e/i),d=Math.ceil(n/a),p=Math.ceil(r/o);const v=(h-1)*i+s-e,m=(d-1)*a+l-n,g=(p-1)*o+u-r,y=Math.floor(v/2),x=v-y,w=Math.floor(m/2),b=m-w,C=Math.floor(g/2),S=g-C;f={top:w,bottom:b,left:C,right:S,front:y,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}function G0(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function jh(t){const[e,n,r]=U0(t);return e===1&&n===1&&r===1}function si(t,e){return jh(t)||jh(e)}function qh(t){return U0(t).every(e=>e>0)}function Tu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Qi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")V(Sv(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{V(Sv(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye(t,e){const r={x:X(t,"x","reshape","string_or_numeric")},i={shape:e};return ne.runKernel(jD,r,i)}const ie=ae({reshape_:Vye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t,e,n,r,i){const a=X(t,"x","avgPool","float32"),o=1;V(si(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=a,l=!1;a.rank===3&&(l=!0,s=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),Qi("avgPool",r,i);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let f=ne.runKernel(lD,u,c);return f=Fe(f,a.dtype),l?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const iP=ae({avgPool_:Wye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t,e,n,r,i,a="NDHWC"){const o=X(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),V(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),V(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Qi("avgPool3d",r,i);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let f=ne.runKernel(uD,u,c);return f=Fe(f,s.dtype),l?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Gye=ae({avgPool3d_:Uye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t,e=0){V(t.length>=1,()=>"Pass at least one tensor to concat");const n=tK(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return bh(n[0]);const r=n,i={axis:e};return ne.runKernel(dD,r,i)}const Gi=ae({concat_:Hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t,e,n=!1,r=!1){let i=X(t,"a","matMul"),a=X(e,"b","matMul");[i,a]=Kn(i,a);const o={a:i,b:a},s={transposeA:n,transposeB:r};return ne.runKernel(cD,o,s)}const zt=ae({matMul_:jye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t){const n={x:X(t,"x","sigmoid","float32")};return ne.runKernel(R1,n)}const sg=ae({sigmoid_:qye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t,e,n){const r=X(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:n};return ne.runKernel(ZD,i,a)}const ln=ae({slice_:Kye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t){const n={x:X(t,"x","tanh","float32")};return ne.runKernel(L1,n)}const aP=ae({tanh_:Xye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t,e,n){const r=X(t,"x","batchToSpaceND"),i=e.reduce((s,l)=>s*l);V(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),V(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),V(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:n};return ne.runKernel(fD,a,o)}const oP=ae({batchToSpaceND_:Yye});function Zye(t){let e;return t.rank===0||t.rank===1?e=ie(t,[1,1,1,t.size]):t.rank===2?e=ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t,e,n,r,i,a){a==null&&(a=.001);const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;r!=null&&(c=X(r,"offset","batchNorm")),V(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:Zye(o),scale:u,offset:c,mean:s,variance:l},d={varianceEpsilon:a},p=ne.runKernel(CD,h,d);return ie(p,o.shape)}const l_=ae({batchNorm_:Qye});function Jye(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),V(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),V(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),l_(o,s,l,c,u,a)}const e1e=ae({batchNorm2d_:Jye});function t1e(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),V(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),V(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),l_(o,s,l,c,u,a)}const n1e=ae({batchNorm3d_:t1e});function r1e(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),V(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),V(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),l_(o,s,l,c,u,a)}const i1e=ae({batchNorm4d_:r1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t,e,n){const r=X(t,"x","bincount"),i=X(e,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:n};return ne.runKernel(mO,a,o)}const o1e=ae({bincount_:a1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(t,e){let n=X(t,"broadcastTo","x");const r=n.shape;if(Du(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=ie(n,u)}const i=n.shape,a=Array.from(e);for(let u=e.length-1;u>=0;u--)if(i[u]===e[u])a[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return bh(n);const s={x:n},l={reps:a};return ne.runKernel(z1,s,l)}const Qm=ae({broadcastTo_:s1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l1e(t){const n={x:X(t,"x","ceil","float32")};return ne.runKernel(e1,n)}const u1e=ae({ceil_:l1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_(t,e,n){Du(t),n=n||ig(e);const r={shape:t,value:e,dtype:n};return ne.runKernel(RO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t,e,n){const r=X(t,"x","clipByValue");if(V(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return u_(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:n};return ne.runKernel(t1,i,a)}const Xa=ae({clipByValue_:c1e});function f1e(t){return Gi(t,0)}const h1e=ae({concat1d_:f1e});function d1e(t,e){return Gi(t,e)}const p1e=ae({concat2d_:d1e});function v1e(t,e){return Gi(t,e)}const g1e=ae({concat3d_:v1e});function m1e(t,e){return Gi(t,e)}const y1e=ae({concat4d_:m1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t,e,n,r,i="NHWC",a=[1,1],o){const s=X(t,"x","conv2d","float32"),l=X(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Qi("conv2d",r,o);const f=i==="NHWC"?u.shape[3]:u.shape[1];V(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),V(si(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),V(qh(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),V(qh(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:u,filter:l},d={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=ne.runKernel(pD,h,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Kh=ae({conv2d_:x1e});function w1e(t,e,n,r,i="NWC",a=1,o){const s=X(t,"x","conv1d"),l=X(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=ie(s,[1,s.shape[0],s.shape[1]])),V(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Qi("conv1d",r,o),V(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(si(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),V(qh(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),V(qh(n),()=>"Error in conv1D: Stride should be larger than 0."),V(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=ie(u,[u.shape[0],1,u.shape[1],u.shape[2]]),m=Kh(h,f,[1,n],r,"NHWC",[1,a],o);return c?ie(m,[m.shape[2],m.shape[3]]):ie(m,[m.shape[0],m.shape[2],m.shape[3]])}const fK=ae({conv1d_:w1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1e(t,e,n,r,i,a="NHWC",o){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),V(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?l.shape[3]:l.shape[1];V(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),V(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Qi("conv2dDerInput",i,o);const h={dy:l,filter:n},d={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},p=ne.runKernel(vD,h,d);return u?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const sP=ae({conv2DBackpropInput_:b1e});function C1e(t,e,n,r,i,a){const o=X(t,"x","conv2dTranspose"),s=X(e,"filter","conv2dTranspose");return sP(n,o,s,r,i,"NHWC",a)}const hK=ae({conv2dTranspose_:C1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1e(t,e,n,r,i="NDHWC",a=[1,1,1]){const o=X(t,"x","conv3d"),s=X(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),V(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),V(si(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),V(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),V(qh(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),V(qh(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:s},f={strides:n,pad:r,dataFormat:i,dilations:a},h=ne.runKernel(gD,c,f);return u?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const D1e=ae({conv3d_:S1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1e(t,e,n,r,i){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,o=e,s=!1;e.rank===4&&(s=!0,o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const l=a[4],u=o.shape[4];V(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),V(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},f={pad:i,strides:r,inputShape:a},h=ne.runKernel(CO,c,f);return s?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const dK=ae({conv3DBackpropInput_:_1e});function T1e(t,e,n,r,i){const a=X(t,"x","conv3dTranspose"),o=X(e,"filter","conv3dTranspose");return dK(n,a,o,r,i)}const E1e=ae({conv3dTranspose_:T1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t){const n={x:X(t,"x","cos","float32")};return ne.runKernel(n1,n)}const lP=ae({cos_:A1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N1e(t){const n={x:X(t,"x","cosh","float32")};return ne.runKernel(r1,n)}const pK=ae({cosh_:N1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k1e(t,e=0,n=!1,r=!1){const a={x:X(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return ne.runKernel(SO,a,o)}const vI=ae({cumprod_:k1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1e(t,e=0,n=!1,r=!1){const a={x:X(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return ne.runKernel(mD,a,o)}const vK=ae({cumsum_:I1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R1e(t,e,n,r=!1){const i=X(t,"x","denseBincount"),a=X(e,"weights","denseBincount");V(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),V(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:n,binaryOutput:r};return ne.runKernel(_O,o,s)}const tB=ae({denseBincount_:R1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1e(t,e,n="NHWC"){const r=X(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];V(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),V(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),V(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return ne.runKernel(TO,s,l)}const M1e=ae({depthToSpace_:$1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(t,e,n,r,i="NHWC",a=[1,1],o){const s=X(t,"x","depthwiseConv2d","float32"),l=X(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=i==="NHWC"?u.shape[3]:u.shape[1];V(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Qi("depthwiseConv2d",r,o);const h={x:u,filter:l},d={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=ne.runKernel(yD,h,d);return c?ie(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const uP=ae({depthwiseConv2d_:O1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t,e,n,r,i=[1,1],a="NHWC"){const o=X(t,"x","dilation2d"),s=X(e,"filter","dilation2d");V(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),V(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),V(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=o,u=!1;o.rank===3&&(l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),V(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);const c={x:l,filter:s},f={strides:n,pad:r,dilations:i},h=ne.runKernel(xD,c,f);return u?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const F1e=ae({dilation2d_:P1e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tv(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function wr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function dt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let a=t[t.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=a;else if(a!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else r[n-i-1]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(t,e){let n=X(t,"a","equal","string_or_numeric"),r=X(e,"b","equal","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(wD,i)}const bl=ae({equal_:L1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(t,e,n){const r=X(e,"a","where"),i=X(n,"b","where"),a=X(t,"condition","where","bool"),o=dt(dt(a.shape,r.shape),i.shape),s=Qm(a,o),l=Qm(r,o),u=Qm(i,o),c={condition:s,t:l,e:u};return ne.runKernel(YD,c)}const Si=ae({where_:z1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(t){const n={x:X(t,"x","zerosLike")};return ne.runKernel(i_,n)}const $t=ae({zerosLike_:B1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(t,e){let n=X(t,"a","div"),r=X(e,"b","div");[n,r]=Kn(n,r);const i=Je(n,r),a=$t(i),o=bl(r,a);return Si(o,a,i)}const W1e=ae({divNoNan_:V1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(t,e){const n=X(t,"t1","dot"),r=X(e,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(V(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){const o=ie(n,[1,-1]),s=ie(r,[-1,1]),l=zt(o,s);return ie(l,[])}else if(n.rank===1&&r.rank===2){const o=ie(n,[1,-1]),s=ie(r,[r.shape[0],r.shape[1]]),l=zt(o,s);return ie(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=ie(r,[-1,1]),s=zt(n,o);return ie(s,[s.size])}else{const o=ie(r,[r.shape[0],r.shape[1]]);return zt(n,o)}}const G1e=ae({dot_:U1e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(t,...e){const n=e.map((i,a)=>X(i,`tensors${a}`,"einsum")),r={equation:t};return ne.runKernel(NO,n,r)}const Gg=ae({einsum_:H1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(t){const n={x:X(t,"x","elu","float32")};return ne.runKernel(a1,n)}const c_=ae({elu_:j1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(t){let e=X(t,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Fe(e,"float32"));const n={x:e};return ne.runKernel(o1,n)}const K1e=ae({erf_:q1e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cP(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function gK(t,e,n){const r=t.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function $r(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const i=e.map(a=>t[a]);return[n,i]}function or(t,e){const n=e.map(r=>1);return gK(t,n,e)}function Gr(t,e,n){V(cP(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function In(t,e){if(cP(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function sf(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Xn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t,e=null,n=!1){const i={x:X(t,"x","max")},a={reductionIndices:e,keepDims:n};return ne.runKernel(RD,i,a)}const Cs=ae({max_:X1e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e=null,n=!1){const i={x:X(t,"x","min")},a={axis:e,keepDims:n};return ne.runKernel(PD,i,a)}const zC=ae({min_:Y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(t,e){let n=X(t,"base","pow"),r=X(e,"exp","pow");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(C1,i)}const Ev=ae({pow_:Z1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(t,e){if((Fo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Fo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return s_(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(t){const n={x:X(t,"x","sqrt","float32")};return ne.runKernel(M1,n)}const Ti=ae({sqrt_:Q1e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(t){const e=X(t,"x","square"),n={};return ne.runKernel("Square",{x:e},n)}const pn=ae({square_:J1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(t,e=null,n=!1){let r=X(t,"x","sum");r.dtype==="bool"&&(r=Fe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ne.runKernel(QD,i,a)}const Ke=ae({sum_:exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t,e="euclidean",n=null,r=!1){t=X(t,"x","norm");const i=mK(t,e,n);let a=i.shape;if(r){const o=_t(n,t.shape);a=or(i.shape,o)}return ie(i,a)}function mK(t,e,n=null){if(t.rank===0)return mi(t);if(t.rank!==1&&n===null)return mK(ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ke(mi(t),n);if(e===1/0)return Cs(mi(t),n);if(e===-1/0)return zC(mi(t),n);if(e==="euclidean"||e===2)return Ti(Ke(Ev(mi(t),Vt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Cs(Ke(mi(t),n[0]),n[1]-1);if(e===1/0)return Cs(Ke(mi(t),n[1]),n[0]);if(e===-1/0)return zC(Ke(mi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ti(Ke(pn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const f_=ae({norm_:txe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t,e=null,n=!1){return f_(t,"euclidean",e,n)}const rxe=ae({euclideanNorm_:nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(t){const n={x:X(t,"x","exp")};return ne.runKernel(s1,n)}const vu=ae({exp_:ixe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(t,e=0){const n=X(t,"x","expandDims","string_or_numeric");V(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return ne.runKernel(bD,r,i)}const Bi=ae({expandDims_:axe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t){const n={x:X(t,"x","expm1")};return ne.runKernel(l1,n)}const sxe=ae({expm1_:oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lxe(t,e){const n=X(t,"x","tile","string_or_numeric");V(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return ne.runKernel(z1,r,i)}const gs=ae({tile_:lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e,n,r="float32"){e==null&&(e=t);const i=Dt([t,e],r),a=t<=e?t:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=ie(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return gs(Bi(o,0),[n[0],1,1]);if(n.length===2)return gs(Bi(Bi(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return gs(Bi(Bi(Bi(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const yK=ae({eye_:uxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t){const n={x:X(t,"x","floor","float32")};return ne.runKernel(u1,n)}const h_=ae({floor_:cxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(t,e,n=0,r=0){const i=X(t,"x","gather"),a=X(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:n,batchDims:r};return ne.runKernel(SD,o,s)}const fP=ae({gather_:fxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(t,e){let n=X(t,"a","greater","string_or_numeric"),r=X(e,"b","greater","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(DD,i)}const to=ae({greater_:hxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t,e){let n=X(t,"a","greaterEqual","string_or_numeric"),r=X(e,"b","greaterEqual","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(f1,i)}const vd=ae({greaterEqual_:dxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pxe(t){const n={input:X(t,"input","imag")};return ne.runKernel(OO,n)}const hP=ae({imag_:pxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t){const n={x:X(t,"x","isFinite")};return ne.runKernel(d1,n)}const gxe=ae({isFinite_:vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t){const n={x:X(t,"x","isInf")};return ne.runKernel(p1,n)}const yxe=ae({isInf_:mxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(t){const n={x:X(t,"x","isNaN")};return ne.runKernel(v1,n)}const wxe=ae({isNaN_:xxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e=.2){const r={x:X(t,"x","leakyRelu")},i={alpha:e};return ne.runKernel(_D,r,i)}const dP=ae({leakyRelu_:bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t,e){let n=X(t,"a","less","string_or_numeric"),r=X(e,"b","less","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(TD,i)}const BC=ae({less_:Cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t,e){let n=X(t,"a","lessEqual","string_or_numeric"),r=X(e,"b","lessEqual","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(ED,i)}const lg=ae({lessEqual_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(t,e=5,n=1,r=1,i=.5){const a=X(t,"x","localResponseNormalization");V(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),V(Sv(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:i},c=ne.runKernel(ID,l,u);return s?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const _xe=ae({localResponseNormalization_:Dxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(t){const n={x:X(t,"x","log","float32")};return ne.runKernel(g1,n)}const Cl=ae({log_:Txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t){const n={x:X(t,"x","log1p")};return ne.runKernel(m1,n)}const xK=ae({log1p_:Exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axe(t,e){V(Qk(t),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(u=>u instanceof FC),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in ne.registeredVariables)e.push(ne.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,i=e.length;e=e.filter(u=>u.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=ne.gradients(t,e,null,a);V(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Av(t){return ne.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(t){const n={x:X(t,"x","neg")};return ne.runKernel(LD,n)}const jn=ae({neg_:Nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t){const n={x:X(t,"x","softplus")};return ne.runKernel($1,n)}const W1=ae({softplus_:kxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t){const e=X(t,"x","logSigmoid");return Av(r=>({value:jn(W1(jn(r))),gradFunc:o=>te(o,sg(jn(r)))}))(e)}const Rxe=ae({logSigmoid_:Ixe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t,e){let n=X(t,"a","sub"),r=X(e,"b","sub");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(P1,i)}const it=ae({sub_:$xe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t,e=-1){const n=X(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Av((i,a)=>{const s=Cs(i,e,!0),l=it(i,s),u=it(Fe(l,"float32"),Cl(Ke(vu(l),e,!0)));return a([u]),{value:u,gradFunc:(f,h)=>{const[d]=h,p=!0,v=vu(d);return it(f,te(Ke(f,e,p),v))}}})(n)}const wK=ae({logSoftmax_:Mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(t,e=null,n=!1){const r=X(t,"x","logSumExp"),i=_t(e,r.shape),a=Cs(r,i,!0),o=it(r,a),s=vu(o),l=Ke(s,i),u=Cl(l),c=Te(ie(a,u.shape),u);if(n){const f=or(c.shape,i);return ie(c,f)}return c}const Pxe=ae({logSumExp_:Oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t,e){const n=X(t,"a","logicalAnd","bool"),r=X(e,"b","logicalAnd","bool");dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(AD,i)}const gu=ae({logicalAnd_:Fxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t){const n={x:X(t,"x","logicalNot","bool")};return ne.runKernel(ND,n)}const pP=ae({logicalNot_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(t,e){const n=X(t,"a","logicalOr","bool"),r=X(e,"b","logicalOr","bool");dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(kD,i)}const bK=ae({logicalOr_:zxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t,e){const n=X(t,"a","logicalXor","bool"),r=X(e,"b","logicalXor","bool");return dt(n.shape,r.shape),gu(bK(t,e),pP(gu(t,e)))}const Vxe=ae({logicalXor_:Bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t,e,n,r,i){const a=X(t,"x","maxPool"),o=1;let s=a,l=!1;a.rank===3&&(l=!0,s=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),V(si(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Qi("maxPool",r,i);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i},f=ne.runKernel($D,u,c);return l?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const vP=ae({maxPool_:Wxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uxe(t,e=[1,1,1],n,r,i,a="NDHWC"){const o=X(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),V(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Qi("maxPool3d",r,i);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},f=ne.runKernel(MD,u,c);return l?ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Gxe=ae({maxPool3d_:Uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxe(t,e){let n=X(t,"a","maximum"),r=X(e,"b","maximum");[n,r]=Kn(n,r),n.dtype==="bool"&&(n=Fe(n,"int32"),r=Fe(r,"int32")),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(y1,i)}const lf=ae({maximum_:Hxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t,e=null,n=!1){const i={x:X(t,"x","mean")},a={axis:e,keepDims:n};return ne.runKernel(OD,i,a)}const ir=ae({mean_:jxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nr(t,e="float32"){if(Du(t),e==="complex64"){const r=Nr(t,"float32"),i=Nr(t,"float32");return Uh(r,i)}const n=ai(he(t),e);return ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gd(t,e="float32"){if(Du(t),e==="complex64"){const r=gd(t,"float32"),i=Nr(t,"float32");return Uh(r,i)}const n=uO(he(t),e);return ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t,e){let n=X(t,"a","minimum"),r=X(e,"b","minimum");[n,r]=Kn(n,r),n.dtype==="bool"&&(n=Fe(n,"int32"),r=Fe(r,"int32")),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(x1,i)}const H0=ae({minimum_:qxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(t,e,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=X(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)V(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},o={x:r};return ne.runKernel(FD,o,a)}const Xxe=ae({mirrorPad_:Kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e){let n=X(t,"a","mod"),r=X(e,"b","mod");[n,r]=Kn(n,r);const i={a:n,b:r};return ne.runKernel(w1,i)}const Zxe=ae({mod_:Yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t,e=null,n=!1){t=X(t,"x","moments");const r=_t(e,t.shape),i=ir(t,r,n);let a=i.shape;n||(a=or(i.shape,r));const o=pn(it(Fe(t,"float32"),ie(i,a))),s=ir(o,r,n);return{mean:i,variance:s}}const gP=ae({moments_:Qxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(t,e){let n=X(t,"a","notEqual","string_or_numeric"),r=X(e,"b","notEqual","string_or_numeric");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(zD,i)}const VC=ae({notEqual_:Jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:X(t,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:n,offValue:r};return ne.runKernel(VD,o,s)}const CK=ae({oneHot_:ewe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){const n={x:X(t,"x","onesLike")};return ne.runKernel(BD,n)}const Lo=ae({onesLike_:twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nwe(t,e,n=0){const r=X(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},a={x:r};return ne.runKernel(UD,a,i)}const mP=ae({pad_:nwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t,e,n){const r=X(t,"x","spaceToBatchND");V(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),V(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),V(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:n};return ne.runKernel(JD,i,a)}const yP=ae({spaceToBatchND_:rwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t,e,n,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=X(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(si(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const c=Ho(l.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=owe([c.filterHeight,c.filterWidth],f):h=[[0,0],[0,0]];const d=f[0]===1&&f[1]===1,[p,v]=awe([c.inHeight,c.inWidth],f,h),m=d?r:"valid",g=d?l:yP(l,f,p),x=(n==="avg"?()=>iP(g,e,a,m,o):()=>vP(g,e,a,m,o))(),w=d?x:oP(x,f,v);return u?ie(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function awe(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),a=t.concat(r,i),o=e.map((c,f)=>(c-a[f]%c)%c),s=i.map((c,f)=>c+o[f]),l=e.map((c,f)=>[r[f],s[f]]),u=e.map((c,f)=>[0,o[f]]);return[l,u]}function owe(t,e){const r=t.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const swe=ae({pool_:iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(t,e){const n=X(t,"x","prelu"),r=X(e,"alpha","prelu"),i={x:n,alpha:r};return ne.runKernel(GD,i)}const xP=ae({prelu_:lwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(t,e=null,n=!1){let r=X(t,"x","prod");r.dtype==="bool"&&(r=Fe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ne.runKernel(HD,i,a)}const cwe=ae({prod_:uwe});var wP={exports:{}};wP.exports;(function(t){(function(e,n,r){function i(l){var u=this,c=s();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),f=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function s(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ro,t,!1)})(wP);var fwe=wP.exports,bP={exports:{}};bP.exports;(function(t){(function(e,n,r){function i(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ro,t,!1)})(bP);var hwe=bP.exports,CP={exports:{}};CP.exports;(function(t){(function(e,n,r){function i(s){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ro,t,!1)})(CP);var dwe=CP.exports,SP={exports:{}};SP.exports;(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var c=l.x,f=l.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,l.i=f+1&7,d};function u(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}u(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&a(c,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ro,t,!1)})(SP);var pwe=SP.exports,DP={exports:{}};DP.exports;(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var c=l.w,f=l.X,h=l.i,d,p;return l.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,l.i=h,p+(c^c>>>16)|0};function u(c,f){var h,d,p,v,m,g=[],y=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,y=Math.max(y,f.length)),p=0,v=-32;v<y;++v)f&&(d^=f.charCodeAt((v+32)%f.length)),v===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,v>=0&&(m=m+1640531527|0,h=g[v&127]^=d+m,p=h==0?p+1:0);for(p>=128&&(g[(f&&f.length||0)&127]=-1),p=127,v=4*128;v>0;--v)d=g[p+34&127],h=g[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,g[p]=d^h;c.w=m,c.X=g,c.i=p}u(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&a(c,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ro,t,!1)})(DP);var vwe=DP.exports,_P={exports:{}};_P.exports;(function(t){(function(e,n,r){function i(s){var l=this,u="";l.next=function(){var f=l.b,h=l.c,d=l.d,p=l.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^h,l.c=h=h-d|0,l.d=d<<16^h>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new i(s),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&a(c,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ro,t,!1)})(_P);var gwe=_P.exports,SK={exports:{}};const mwe={},ywe=Object.freeze(Object.defineProperty({__proto__:null,default:mwe},Symbol.toStringTag,{value:"Module"})),xwe=n7(ywe);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",l=r.pow(i,a),u=r.pow(2,o),c=u*2,f=i-1,h;function d(w,b,C){var S=[];b=b==!0?{entropy:!0}:b||{};var D=g(m(b.entropy?[w,x(n)]:w??y(),3),S),_=new p(S),T=function(){for(var E=_.g(a),A=l,R=0;E<u;)E=(E+R)*i,A*=i,R=_.g(1);for(;E>=c;)E/=2,A/=2,R>>>=1;return(E+R)/A};return T.int32=function(){return _.g(4)|0},T.quick=function(){return _.g(4)/4294967296},T.double=T,g(x(_.S),n),(b.pass||C||function(E,A,R,$){return $&&($.S&&v($,_),E.state=function(){return v(_,{})}),R?(r[s]=E,A):E})(T,D,"global"in b?b.global:this==r,b.state)}function p(w){var b,C=w.length,S=this,D=0,_=S.i=S.j=0,T=S.S=[];for(C||(w=[C++]);D<i;)T[D]=D++;for(D=0;D<i;D++)T[D]=T[_=f&_+w[D%C]+(b=T[D])],T[_]=b;(S.g=function(E){for(var A,R=0,$=S.i,O=S.j,M=S.S;E--;)A=M[$=f&$+1],R=R*i+M[f&(M[$]=M[O=f&O+A])+(M[O]=A)];return S.i=$,S.j=O,R})(i)}function v(w,b){return b.i=w.i,b.j=w.j,b.S=w.S.slice(),b}function m(w,b){var C=[],S=typeof w,D;if(b&&S=="object")for(D in w)try{C.push(m(w[D],b-1))}catch{}return C.length?C:S=="string"?w:w+"\0"}function g(w,b){for(var C=w+"",S,D=0;D<C.length;)b[f&D]=f&(S^=b[f&D]*19)+C.charCodeAt(D++);return x(b)}function y(){try{var w;return h&&(w=h.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),x(w)}catch{var b=e.navigator,C=b&&b.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(w){return String.fromCharCode.apply(0,w)}if(g(r.random(),n),t.exports){t.exports=d;try{h=xwe}catch{}}else r["seed"+s]=d})(typeof self<"u"?self:Ro,[],Math)})(SK);var wwe=SK.exports,bwe=fwe,Cwe=hwe,Swe=dwe,Dwe=pwe,_we=vwe,Twe=gwe,md=wwe;md.alea=bwe;md.xor128=Cwe;md.xorwow=Swe;md.xorshift7=Dwe;md.xor4096=_we;md.tychei=Twe;var TP=md;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DK{constructor(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=TP.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Ewe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=TP.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(t,e=0,n=1,r,i){if(Du(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new DK(e,n,r,!1,i),o=Dt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Nwe=ae({randomNormal_:Awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwe(t,e=0,n=1,r="float32",i){Du(t);const a=Dt(t,r),o=new Ewe(e,n,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const U1=ae({randomUniform_:kwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return ne.runKernel(WO,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t){const n={input:X(t,"input","real")};return ne.runKernel(UO,n)}const WC=ae({real_:Iwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t){const n={x:X(t,"x","reciprocal")};return ne.runKernel(S1,n)}const $we=ae({reciprocal_:Rwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwe(t){const n={x:X(t,"x","relu")};return ne.runKernel(D1,n)}const yd=ae({relu_:Mwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Owe(t){const n={x:X(t,"x","relu6")};return ne.runKernel(_1,n)}const _K=ae({relu6_:Owe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(t,e){const r={x:X(t,"x","reverse")},i={dims:e};return ne.runKernel(XD,r,i)}const Xh=ae({reverse_:Pwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t){const n={x:X(t,"x","round")};return ne.runKernel(T1,n)}const TK=ae({round_:Fwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(t){const n={x:X(t,"x","rsqrt","float32")};return ne.runKernel(E1,n)}const EK=ae({rsqrt_:Lwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(t){const n={x:X(t,"x","selu")};return ne.runKernel(A1,n)}const AK=ae({selu_:zwe});function Bwe(t,e,n,r,i,a=[1,1],o="NHWC"){const s=X(t,"x","separableConv2d"),l=X(e,"depthwiseFilter","separableConv2d"),u=X(n,"pointwiseFilter","separableConv2d");let c=s,f=!1;if(s.rank===3&&(f=!0,c=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),V(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],d=l.shape[3];V(u.shape[2]===h*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*d}, but got ${u.shape[2]}.`);const p=uP(c,l,r,i,o,a),m=Kh(p,u,1,"valid",o);return f?ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const NK=ae({separableConv2d_:Bwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(t){const n={x:X(t,"x","sign")};return ne.runKernel(I1,n)}const Wwe=ae({sign_:Vwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(t){const n={x:X(t,"x","sin","float32")};return ne.runKernel(N1,n)}const kK=ae({sin_:Uwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gwe(t){const n={x:X(t,"x","sinh")};return ne.runKernel(k1,n)}const IK=ae({sinh_:Gwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwe(t,e,n){const r=X(t,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ln(r,[e],[n])}const EP=ae({slice1d_:Hwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwe(t,e,n){const r=X(t,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const RK=ae({slice2d_:jwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwe(t,e,n){const r=X(t,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const AP=ae({slice3d_:qwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t,e,n){const r=X(t,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ln(r,e,n)}const UC=ae({slice4d_:Kwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwe(t,e=-1){const n=X(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return ne.runKernel(t_,r,i)}const NP=ae({softmax_:Xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(IO,e)}const $K=ae({fft_:Ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(MO,e)}const gI=ae({ifft_:Zwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=ie(t,[n,e]);r=gI(i)}else{const i=[n,2*(e-1)],a=ie(WC(t),[n,e]),o=ie(hP(t),[n,e]),s=Xh(ln(a,[0,1],[n,e-2]),1),l=te(Xh(ln(o,[0,1],[n,e-2]),1),Vt(-1)),u=Gi([a,s],1),c=Gi([o,l],1),f=ie(Uh(u,c),[i[0],i[1]]);r=gI(f)}if(r=WC(r),t.rank===3&&t.shape[0]!==0){const i=r,a=t.shape[0];r=ie(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const Jwe=ae({irfft_:Qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t,e,n=0){const i={x:X(t,"x","split")},a={numOrSizeSplits:e,axis:n};return ne.runKernel(e_,i,a)}const Wa=ae({split_:ebe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t,e){V(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(m=>0),v=t.shape.map(m=>m);v[t.shape.length-1]=e,i=ln(t,p,v),n=e}else if(e!=null&&e>n){const p=t.shape.map(v=>v);p[t.shape.length-1]=e-n,i=Gi([t,Nr(p)],t.shape.length-1),n=e}else i=t;const a=$t(i),o=ie(Uh(i,a),[r,n]),s=$K(o),l=Math.floor(n/2)+1,u=WC(s),c=hP(s),f=Wa(u,[l,n-l],u.shape.length-1),h=Wa(c,[l,n-l],c.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=l,ie(Uh(f[0],h[0]),d)}const nbe=ae({rfft_:tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t,e){let n=X(t,"a","squaredDifference"),r=X(e,"b","squaredDifference");[n,r]=Kn(n,r),dt(n.shape,r.shape);const i={a:n,b:r},a={};return ne.runKernel(O1,i,a)}const ibe=ae({squaredDifference_:rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t,e){const n=X(t,"x","squeeze","string_or_numeric");return ie(n,nf(n.shape,e).newShape)}const G1=ae({squeeze_:abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t,e=0){const n=tK(t,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return ne.runKernel(WD,r,i)}const zc=ae({stack_:obe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t,e=0){const r={x:X(t,"x","step")},i={alpha:e};return ne.runKernel(B1,r,i)}const H1=ae({step_:sbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t,e,n,r,i=0,a=0,o=0,s=0,l=0){const c={x:X(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return ne.runKernel(KO,c,f)}const ube=ae({stridedSlice_:lbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t){const n={x:X(t,"x","tan","float32")};return ne.runKernel(F1,n)}const fbe=ae({tan_:cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(t,e){sq(t);const n=o_(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return s_(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ab(t,e,n){if(sq(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=o_(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return s_(t,e,r,n)}function MK(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(a+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function hbe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}MK(n,e,t)}function xd(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length;let o=1;for(let f=i;f<a;++f)o*=n[f];const s=i<1?1:i,l=he(e.shape)/s,u=[...je(n.slice(0,i)),1],c=he(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t,e=1,n=!0){const r=X(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:n},[s,l]=ne.runKernel(XO,a,o);return{values:s,indices:l}}const pbe=ae({topk_:dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t,e=0,n=1,r,i){if(Du(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new DK(e,n,r,!0,i),o=Dt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const OK=ae({truncatedNormal_:vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t,e=0){const n=X(t,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[a,o]=ne.runKernel(ZO,r,i);return{values:a,indices:o}}const mbe=ae({unique_:gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t,e,n){const r=X(t,"x","unsortedSegmentSum"),i=X(e,"segmentIds","unsortedSegmentSum","int32");V(Sv(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:n};return ne.runKernel(r_,a,o)}const PK=ae({unsortedSegmentSum_:ybe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e=0){const n=X(t,"x","unstack","string_or_numeric");V(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return ne.runKernel(n_,r,i)}const Yh=ae({unstack_:xbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t,e=!0,n,r){return ne.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FK(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=Dt(t,"int32"),i=Dt([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const o=r.indexToLoc(n[a]),s=a*t.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t,e,n){const r=X(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),V(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{V(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?le(()=>{let o=WC(r),s=hP(r);return o=ne.runKernel(qp,{x:o},a),s=ne.runKernel(qp,{x:s},a),n&&(s=jn(s)),Uh(o,s)}):ne.runKernel(qp,i,a)}const Rt=ae({transpose_:bbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t,e){if(e==null)return t.shape.slice();if(Bt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t,e,n,r){const i=X(t,"x","dropout");if(V(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof rr?i.clone():i;const a=Cbe(i,n),o=1-e,s=Je(h_(Te(U1(a,0,1,"float32",r),o)),o);return te(i,s)}const Dbe=ae({dropout_:Sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t,e,n,r,i,a="NHWC",o){let s=t;t.rank===3&&(s=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?l.shape[3]:l.shape[1];V(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),V(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Qi("conv2dDerFilter",i,o);const f={x:s,dy:l},h={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:n};return ne.runKernel(wO,f,h)}const kP=ae({conv2DBackpropFilter_:_be});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IP(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return te(t,H1(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function RP(t,e){let n=e;const r=wr(t.shape,e.shape);return r.length>0&&(n=Ke(n,r)),ie(n,t.shape)}function $P(t,e,n,r){if(e==="linear")return t;if(e==="relu")return yd(t);if(e==="elu")return c_(t);if(e==="relu6")return _K(t);if(e==="prelu")return xP(t,n);if(e==="leakyrelu")return dP(t,r);if(e==="sigmoid")return sg(t);throw new Error(`Unknown fused activation ${e}.`)}const MP=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",MP(ne.state.gradientDepth,l)===!1){V(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Kh(t,e,n,r,i,a,o);return s!=null&&(C=Te(C,s)),$P(C,l,u,c)}const f=X(t,"x","conv2d","float32"),h=X(e,"filter","conv2d","float32");let d=f,p=!1;f.rank===3&&(p=!0,d=ie(f,[1,f.shape[0],f.shape[1],f.shape[2]])),V(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),V(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Qi("fused conv2d",r,o);const v=i==="NHWC"?d.shape[3]:d.shape[1];V(h.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${h.shape[2]}.`),V(si(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const m=Ur(d.shape,h.shape,n,a,r,o);let g;s!=null&&(g=X(s,"bias","fused conv2d"),[g]=Kn(g,f),i==="NHWC"?dt(m.outShape,g.shape):(V(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),V(g.shape.length===0||g.shape[0]===m.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let y;if(u!=null){const C=u.shape;if(V(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)V(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{dt(C,m.outShape)}catch{const D=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(D)}y=X(u,"prelu weights","fused conv2d")}const x=(C,S)=>{V(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[D,_,T,E]=S,A=IP(C,T,l);V(jh(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const R=sP(_.shape,A,D,n,r),$=kP(_,A,D.shape,n,r),O=[R,$];if(E!=null){const M=RP(E,A);O.push(M)}return O},w={x:d,filter:h,bias:g,preluActivationWeights:y},b={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Av((S,D,_)=>{let T=ne.runKernel(MC,w,b);return _([D,S,T]),p&&(T=ie(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(d,h):Av((S,D,_,T)=>{let E=ne.runKernel(MC,w,b);return T([D,S,E,_]),p&&(E=ie(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(d,h,g)}const Ebe=ae({fusedConv2d_:Tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t,e,n,r,i,a=[1,1],o){let s=t;t.rank===3&&(s=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:n};return ne.runKernel(EO,u,c)}const Nbe=ae({depthwiseConv2dNativeBackpropFilter_:Abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t,e,n,r,i,a=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:t},f=ne.runKernel(AO,u,c);return l?ie(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Ibe=ae({depthwiseConv2dNativeBackpropInput_:kbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(MP(ne.state.gradientDepth,a)===!1){let E=zt(t,e,n,r);return i!=null&&(E=Te(E,i)),$P(E,a,o,s)}let l=X(t,"a","fused matMul"),u=X(e,"b","fused matMul");[l,u]=Kn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),v=u.shape.slice(0,-2),m=he(p),g=he(v);V(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=dt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,d]),w=n?ie(l,[m,c,h]):ie(l,[m,h,c]),b=r?ie(u,[g,d,f]):ie(u,[g,f,d]);let C;i!=null&&(C=X(i,"bias","fused matMul"),[C]=Kn(C,l),dt(x,C.shape));let S;o!=null&&(S=X(o,"prelu weights","fused matMul"));const D=(E,A)=>{const[R,$,O,M]=A,B=IP(ie(E,O.shape),O,a);let P,z;if(!n&&!r?(P=zt(B,$,!1,!0),z=zt(R,B,!0,!1)):!n&&r?(P=zt(B,$,!1,!1),z=zt(B,R,!0,!1)):n&&!r?(P=zt($,B,!1,!0),z=zt(R,B,!1,!1)):(P=zt($,B,!0,!0),z=zt(B,R,!0,!0)),i!=null){const U=RP(M,B);return[P,z,U]}else return[P,z]},_={a:w,b,bias:C,preluActivationWeights:S},T={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?Av((A,R,$)=>{const O=ne.runKernel($C,_,T);return $([A,R,O]),{value:ie(O,x),gradFunc:D}})(w,b):Av((A,R,$,O)=>{const M=ne.runKernel($C,_,T);return O([A,R,M,$]),{value:ie(M,x),gradFunc:D}})(w,b,C)}const nB=ae({fusedMatMul_:Rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e,n,r,i="bilinear",a=0){const o=X(t,"image","cropAndResize"),s=X(e,"boxes","cropAndResize","float32"),l=X(n,"boxInd","cropAndResize","int32"),u=s.shape[0];V(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),V(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:s,boxInd:l},f={method:i,extrapolationValue:a,cropSize:r};return ne.runKernel(DO,c,f)}const Mbe=ae({cropAndResize_:$be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t){const e=X(t,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ne.runKernel($O,n,{})}const Pbe=ae({flipLeftRight_:Obe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t){const e=X(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];V(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,gs(e,i)}const Lbe=ae({grayscaleToRGB_:Fbe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const e=X(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];V(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),V(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,a=Fe(e,"float32"),o=pa([.2989,.587,.114]);let s;switch(e.rank){case 2:s=Gg("ij,j->i",a,o);break;case 3:s=Gg("ijk,k->ij",a,o);break;case 4:s=Gg("ijkl,l->ijk",a,o);break;case 5:s=Gg("ijklm,m->ijkl",a,o);break;case 6:s=Gg("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=Bi(s,-1),Fe(s,i)}const Bbe=ae({rgbToGrayscale_:zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e,n=0,r=.5){const i=X(t,"image","rotateWithOffset","float32");V(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:n,center:r};return ne.runKernel(QO,a,o)}const Wbe=ae({rotateWithOffset_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ug(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=t.shape[0];return n=Math.min(n,o),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),V(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),V(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(t,"boxes","nonMaxSuppression","float32"),o=X(e,"scores","nonMaxSuppression","float32"),s=ug(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return ne.runKernel(zO,{boxes:a,scores:o},l)}const Gbe=ae({nonMaxSuppression_:Ube});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e,n){const r=jbe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function jbe(t,e,n){return Kbe(t,e,n||qbe)}function qbe(t,e){return t>e?1:t<e?-1:0}function Kbe(t,e,n){let r=0,i=t.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=n(e,t[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(t,e,n,r,i){return LP(t,e,n,r,i,0)}function PP(t,e,n,r,i,a){return LP(t,e,n,r,i,0,!1,a,!0)}function FP(t,e,n,r,i,a){return LP(t,e,n,r,i,a,!0)}function LP(t,e,n,r,i,a,o=!1,s=!1,l=!1){const u=[];for(let m=0;m<e.length;m++)e[m]>i&&u.push({score:e[m],boxIndex:m,suppressBeginIndex:0});u.sort(rB);const c=a>0?-.5/a:0,f=[],h=[];for(;f.length<n&&u.length>0;){const m=u.pop(),{score:g,boxIndex:y,suppressBeginIndex:x}=m;if(g<i)break;let w=!1;for(let b=f.length-1;b>=x;--b){const C=Xbe(t,y,f[b]);if(C>=r){w=!0;break}if(m.score=m.score*Ybe(r,c,C),m.score<=i)break}m.suppressBeginIndex=f.length,w||(m.score===g?(f.push(y),h.push(m.score)):m.score>i&&Hbe(u,m,rB))}const d=f.length,p=n-d;s&&p>0&&(f.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const v={selectedIndices:f};return o&&(v.selectedScores=h),l&&(v.validOutputs=d),v}function Xbe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-a)*(l-o),p=(f-u)*(h-c);if(d<=0||p<=0)return 0;const v=Math.max(a,u),m=Math.max(o,c),g=Math.min(s,f),y=Math.min(l,h),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(d+p-x)}function Ybe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function rB(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Zbe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(t,"boxes","nonMaxSuppressionAsync"),o=X(e,"scores","nonMaxSuppressionAsync"),s=ug(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([a.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:f}=OP(u,c,n,r,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),pa(f,"int32")}const Qbe=Zbe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),l=ug(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},f=ne.runKernel(VO,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const eCe=ae({nonMaxSuppressionWithScore_:Jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tCe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),l=ug(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],f=u[1],{selectedIndices:h,selectedScores:d}=FP(c,f,n,r,i,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:pa(h,"int32"),selectedScores:pa(d)}}const nCe=tCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),l=ug(o,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,h={boxes:o,scores:s},d={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:a},p=ne.runKernel(BO,h,d);return{selectedIndices:p[0],validOutputs:p[1]}}const iCe=ae({nonMaxSuppressionPadded_:rCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aCe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),l=ug(o,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[h,d]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:v}=PP(h,d,u,c,f,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:pa(p,"int32"),validOutputs:Vt(v,"int32")}}const oCe=aCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t,e,n=!1,r=!1){const i=X(t,"images","resizeBilinear");V(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},u=ne.runKernel(KD,s,l);return o?ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const LK=ae({resizeBilinear_:sCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e,n=!1,r=!1){const i=X(t,"images","resizeNearestNeighbor");V(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},u=ne.runKernel(qD,s,l);return o?ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const zK=ae({resizeNearestNeighbor_:lCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e="binary",n=!1,r=.5){const i=X(t,"image","threshold"),a=.2989,o=.587,s=.114,l=i.shape[0]*i.shape[1];let u=te(pa([r]),255),c,f,h,d;if(V(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),V(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),V(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),V(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[c,f,h]=Wa(i,[1,1,1],-1);const m=te(c,a),g=te(f,o),y=te(h,s);d=Te(Te(m,g),y)}else d=t;if(e==="otsu"){const m=o1e(Fe(TK(d),"int32"),Zm([]),256);u=cCe(m,l)}const p=n?lg(d,u):to(d,u);return Fe(te(p,255),"int32")}function cCe(t,e){let n=pa([-1]),r=pa([0]),i=pa([0]),a,o,s,l,u,c;for(let f=0;f<t.size-1;f++){a=ln(t,0,f+1),o=ln(t,f+1),u=Je(Ke(a),e),c=Je(Ke(o),e);const h=Ke(te(a,j0(0,a.size)));s=Je(h,Ke(a));const d=u_(o.shape,a.size),p=Te(j0(0,o.size),d),v=te(o,p);l=Je(Ke(v),Ke(o));const m=it(s,l),g=it(s,l),y=te(u,c);i=te(te(y,m),g);const x=to(i,r);r=Si(x,i,r),n=Si(x,pa([f]),n)}return n}const fCe=ae({threshold_:uCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t,e,n="nearest",r="constant",i=0,a){const o=X(t,"image","transform","float32"),s=X(e,"transforms","transform","float32");V(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return ne.runKernel(YO,l,u)}const dCe=ae({transform_:hCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(t,e,n){const r=X(t,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);let s,l;typeof e=="number"?(V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),s=X(e<0?a:e,"numLower","bandPart")):(V(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),s=Si(BC(e,0),a,H0(e,a))),typeof n=="number"?(V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),V(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=X(n<0?o:n,"numUpper","bandPart")):(V(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Si(BC(n,0),o,H0(n,o)));const u=ie(j0(0,a,1,"int32"),[-1,1]),c=j0(0,o,1,"int32"),f=it(u,c),h=gu(lg(f,s),vd(f,jn(l))),d=Nr([a,o],r.dtype);return ie(zc(Yh(ie(r,[-1,a,o])).map(p=>Si(h,p,d))),i)}const vCe=ae({bandPart_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(t){let e;if(Array.isArray(t)){e=!1,V(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let a=1;a<t.length;++a)V(t[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${i})`)}else e=!0,t=Wa(t,t.shape[0],0).map(i=>G1(i,[0]));V(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(ne.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=te(Ke(te(n[o],a)),n[o]);a=it(a,s)}return Je(a,f_(a,"euclidean"))}));return e?zc(n,0):n}const mCe=ae({gramSchmidt_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t,e=!1){if(V(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return iB(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Yh(ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(l=>{const[u,c]=iB(l,e);i.push(u),a.push(c)});const o=ie(zc(i,0),t.shape),s=ie(zc(a,0),t.shape);return[o,s]}}function iB(t,e=!1){return ne.tidy(()=>{V(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=yK(n),a=bh(t);const o=Ab([[1]],[1,1]);let s=bh(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=a,f=s,h=i;[s,a,i]=ne.tidy(()=>{const d=ln(a,[u,u],[n-u,1]),p=f_(d),v=ln(a,[u,u],[1,1]),m=Si(to(v,0),Ab([[-1]]),Ab([[1]])),g=it(v,te(m,p)),y=Je(d,g);y.shape[0]===1?s=bh(o):s=Gi([o,ln(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const x=jn(Je(zt(m,g),p)),w=ln(a,[u,0],[n-u,r]),b=te(x,s),C=Rt(s);if(u===0)a=it(w,zt(b,zt(C,w)));else{const _=it(w,zt(b,zt(C,w)));a=Gi([ln(a,[0,0],[u,r]),_],0)}const S=Rt(b),D=ln(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=it(D,zt(zt(D,s),S));else{const _=it(D,zt(zt(D,s),S));i=Gi([ln(i,[0,0],[n,u]),_],1)}return[s,a,i]}),xt([c,f,h])}return!e&&n>r&&(i=ln(i,[0,0],[n,r]),a=ln(a,[0,0],[r,r])),[i,a]})}const xCe=ae({qr_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tu={flipLeftRight:Pbe,grayscaleToRGB:Lbe,resizeNearestNeighbor:zK,resizeBilinear:LK,rgbToGrayscale:Bbe,rotateWithOffset:Wbe,cropAndResize:Mbe,nonMaxSuppression:Gbe,nonMaxSuppressionAsync:Qbe,nonMaxSuppressionWithScore:eCe,nonMaxSuppressionWithScoreAsync:nCe,nonMaxSuppressionPadded:iCe,nonMaxSuppressionPaddedAsync:oCe,threshold:fCe,transform:dCe},wCe={bandPart:vCe,gramSchmidt:mCe,qr:xCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bCe=new Map,CCe=new Map;class cg{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Co{constructor(){this.classNameMap={}}static getMap(){return Co.instance==null&&(Co.instance=new Co),Co.instance}static register(e){Co.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function be(t,e,n){V(t.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),V(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return Co.register(t),bCe.set(i,t),CCe.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uf extends cg{minimize(e,n=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return xt(a),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Axe(e,n)}dispose(){this.iterations_!=null&&xt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Vt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(uf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BK extends uf{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:le(()=>$t(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:le(()=>$t(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;le(()=>{const c=Te(te(l,this.rho),te(pn(s),1-this.rho)),f=te(Je(Ti(Te(u,this.epsilon)),Ti(Te(l,this.epsilon))),s),h=Te(te(u,this.rho),te(pn(f),1-this.rho));l.assign(c),u.assign(h);const d=Te(te(f,-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(xt(this.accumulatedGrads.map(e=>e.variable)),xt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VK extends uf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:le(()=>u_(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;le(()=>{const l=Te(s,pn(o));s.assign(l);const u=Te(te(Je(o,Ti(Te(l,ne.backend.epsilon()))),-this.learningRate),a);a.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&xt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WK extends uf{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],le(()=>{this.accBeta1=Vt(n).variable(),this.accBeta2=Vt(r).variable()}),i==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=it(1,this.accBeta1),i=it(1,this.accBeta2);n.forEach((a,o)=>{const s=ne.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:le(()=>$t(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:le(()=>$t(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[a];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,h=Te(te(c,this.beta1),te(u,1-this.beta1)),d=Te(te(f,this.beta2),te(pn(u),1-this.beta2)),p=Je(h,r),v=Je(d,i);c.assign(h),f.assign(d);const m=Te(te(Je(p,Te(Ti(v),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(te(this.accBeta1,this.beta1)),this.accBeta2.assign(te(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&xt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&xt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),le(()=>{this.accBeta1.assign(Ev(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ev(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UK extends uf{static get className(){return"Adamax"}constructor(e,n,r,i=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],le(()=>{this.iteration=Vt(0).variable(),this.accBeta1=Vt(n).variable()}),i==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=it(1,this.accBeta1),i=Je(-this.learningRate,Te(te(this.iteration,this.decay),1));n.forEach((a,o)=>{const s=ne.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:$t(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:$t(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[a];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,h=Te(te(c,this.beta1),te(u,1-this.beta1)),d=te(f,this.beta2),p=mi(u),v=lf(d,p);c.assign(h),f.assign(v);const m=Te(te(Je(i,r),Je(h,Te(v,this.epsilon))),s);s.assign(m)}),this.iteration.assign(Te(this.iteration,1)),this.accBeta1.assign(te(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&xt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&xt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zP extends uf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=ne.registeredVariables[r];le(()=>{const s=Te(te(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=dl(Vt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GK extends zP{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Vt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:le(()=>$t(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&le(()=>{let l;const u=Te(te(this.m,o),s);this.useNesterov?l=Te(te(this.c,Te(s,te(u,this.m))),a):l=Te(te(this.c,u),a),o.assign(u),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&xt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HK extends uf{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:le(()=>$t(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:le(()=>$t(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:le(()=>$t(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;le(()=>{const c=Te(te(l,this.decay),te(pn(s),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,h=Te(te(f,this.decay),te(s,1-this.decay)),d=Je(te(s,this.learningRate),Ti(it(c,Te(pn(h),this.epsilon)))),p=Te(te(u,this.momentum),d);l.assign(c),f.assign(h),u.assign(p);const v=it(a,p);a.assign(v)}else{const f=Te(te(l,this.decay),te(pn(s),1-this.decay)),h=Te(te(u,this.momentum),Je(te(s,this.learningRate),Ti(Te(f,this.epsilon))));l.assign(f),u.assign(h);const d=it(a,h);a.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&xt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&xt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&xt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe=[BK,VK,WK,UK,GK,HK,zP];function DCe(){for(const t of SCe)be(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aB(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let i=0;const a=l=>(l.then(u=>{const c=n+ ++i/t.length*(r-n);return e(c),u}),l);function o(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),V(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _Ce(t,e){e==null&&(e={});const n=e.fetchFunc==null?ue().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),i=0,a=.5,s=(e.onProgress==null?await Promise.all(r):await aB(r,e.onProgress,i,a)).map(f=>f.arrayBuffer()),l=.5,u=1;return e.onProgress==null?await Promise.all(s):await aB(s,e.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TCe="application/octet-stream",ECe="application/json";class BP{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ue().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=L0e(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:ECe}),"model.json"),e.weightData!=null){const o=af.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:TCe}),"model.weights.bin")}const a=await this.fetch(this.path,n);if(a.ok)return{modelArtifactsInfo:nP(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return B0e(n,a=>this.loadWeights(a))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=ACe(n),a=this.weightPathPrefix||r,o=V0e(e),s=[],l=[];for(const c of e)for(const f of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(f)):s.push(a+f+i);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await _Ce(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,u]}}BP.URL_SCHEME_REGEX=/^https?:\/\//;function ACe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function oB(t){return t.match(BP.URL_SCHEME_REGEX)!=null}const jK=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>oB(r)):n=oB(t),n)return qK(t,e)}return null};Sr.registerSaveRouter(jK);Sr.registerLoadRouter(jK);function qK(t,e){return new BP(t,e)}function NCe(t,e){return qK(t,e)}function VP(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(he(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const s=t.shape,l=i.slice();l.pop();let u=1;for(let f=a;f<n;++f)u*=s[f],l.push(s[f]);const c=[...je(t.shape).map(f=>f/u),1].slice(0,a);return[l,o,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mI=-2,kCe=-1;function WP(t,e,n){const r=t.shape.length;V(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)V(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function ICe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function UP(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function KK(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function XK(t,e,n){return n<=t?n:n-(e-1)}function YK(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function RCe(t,e,n,r,i,a,o,s,l){const u=t.length;let c=new Array(u),f=new Array(u),h=new Array(u);if(e.length&&n>0){const d=e[0],p=n+1;c=ZK(o,d,p,r,t),f=QK(s,d,p,i,t),h=KK(a,d,p,t)}else for(let d=0;d<u;d++)c[d]=eX(o,r,a,t,d,l),f[d]=tX(s,i,a,t,d,l),h[d]=JK(a,d,l);return{begin:c,end:f,strides:h}}function ZK(t,e,n,r,i){const a=[...i],o=YK(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const l=XK(e,n,s);let u=r[l];t&1<<l&&(u=0),a[s]=u}return a}function QK(t,e,n,r,i){const a=[...i],o=YK(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const l=XK(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),a[s]=u}for(let s=0;s<a.length;s++){const l=i[s];a[s]<0&&(a[s]+=l),a[s]=Vh(0,a[s],i[s])}return a}function JK(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function eX(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=Vh(0,o,l-1),o}function tX(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),s>0?o=Vh(0,o,l):o=Vh(-1,o,l-1),o}function GP(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function HP(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function d_(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{V(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((o,s)=>o>=0?o:(V(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,a]}function jP(t,e,n,r,i,a,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<f.dims;x++)c&&1<<x&s&&f.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};$Ce(f,h);let d=!0,p=!0,v=!0;const m=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(h.shrinkAxisMask&1<<x),b=t[x];if(b===-1){m.push(w?1:-1);continue}const C=[h.beginMask&1<<x,h.endMask&1<<x],S=[h.strides[x]>0?0:-1,h.strides[x]>0?b:b-1];if(w&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&h.strides[x]===1;const D=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(w){const A=h.begin[x]<0?b+h.begin[x]:h.begin[x];if(h.begin[x]=A,h.end[x]=h.begin[x]+1,A<0||A>=b)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=sB(h.begin[x],0,h.strides[x],b,C,S),h.end[x]=sB(h.end[x],1,h.strides[x],b,C,S);const E=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===b;d=d&&E,p=p&&(x===0&&h.strides[x]===1||E)}else d=d&&h.strides[x]===1&&D,p=p&&(x===0&&h.strides[x]===1||D);let _,T=!1;if(h.beginValid&&h.endValid?(_=h.end[x]-h.begin[x],T=!0):w?(_=1,T=!0):D&&b>=0&&(h.strides[x]<0?_=-b:_=b,T=!0),T){let E;_===0||_<0!=h.strides[x]<0?E=0:E=Math.trunc(_/h.strides[x])+(_%h.strides[x]!==0?1:0),m.push(E)}else m.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const w=h.finalShapeGatherIndices[x];w>=0?g.push(m[w]):w===mI&&g.push(1)}return{finalShapeSparse:g.filter((x,w)=>h.finalShapeGatherIndices[w]!==mI),finalShape:g,isIdentity:d,sliceDim0:p,isSimpleSlice:v,begin:h.begin,end:h.end,strides:h.strides}}function $Ce(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(mI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(kCe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function sB(t,e,n,r,i,a){if(i[e])return n>0?a[e]:a[e+1&1];{const o=t<0?r+t:t;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const MCe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:WP,computeFlatOffset:HP,computeOutShape:UP,getNormalizedAxes:RCe,isSliceContinous:GP,maskToAxes:ICe,parseSliceParams:d_,sliceInfo:jP,startForAxis:eX,startIndicesWithElidedDims:ZK,stopForAxis:tX,stopIndicesWithElidedDims:QK,stridesForAxis:JK,stridesWithElidedDims:KK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OCe{static sgd(e){return new zP(e)}static momentum(e,n,r=!1){return new GK(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,a=!1){return new HK(e,n,r,i,a)}static adam(e=.001,n=.9,r=.999,i=null){return new WK(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new BK(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,a=0){return new UK(e,n,r,i,a)}static adagrad(e,n=.1){return new VK(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Md=OCe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function nX(){return new Promise(t=>PCe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qP(t,e){const n=t[0].length;t.forEach((i,a)=>{V(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),V(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,a)=>{for(let o=0;o<n;o++)V(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function pl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hs;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(hs||(hs={}));function rX(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${a} but shape[${i+t}] = ${s}`)}else r[o]=a}return r}function iX(t){const e={FIRST_DIM_SIZE:hs.FIRST_DIM_SIZE,VALUE_ROWIDS:hs.VALUE_ROWIDS,ROW_LENGTHS:hs.ROW_LENGTHS,ROW_SPLITS:hs.ROW_SPLITS,ROW_LIMITS:hs.ROW_LIMITS,ROW_STARTS:hs.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function aX(t){return t.length===0?0:t[0]===hs.FIRST_DIM_SIZE?t.length-1:t.length}function oX(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const a=t[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${a} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KP=30;function p_(t){return t<=KP?t:Jk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XP(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function q1(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function K1(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function YP(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function ZP(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v_=1.7580993408473768,g_=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP=.3275911,JP=.254829592,eF=-.284496736,tF=1.421413741,nF=-1.453152027,rF=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mu(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function sX(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function lX(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function uX(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function iF(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function cX(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function fX(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function hX(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OE="->",FCe=/->/g,lB=",",uB="...";function aF(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(FCe,"").length)/OE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${OE}").`);const[r,i]=t.split(OE);V(r.indexOf(uB)===-1,()=>`The ellipsis notation ("${uB}") is not supported yet.`);const a=r.split(lB),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const d=i[h];if(!a.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);s.indexOf(d)===-1&&s.push(d)}for(let h=0;h<r.length;++h){const d=r[h];s.indexOf(d)===-1&&d!==lB&&s.push(d)}const l=new Array(a.length);for(let h=0;h<o;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let d=0;d<a[h].length;++d)l[h].push(s.indexOf(a[h][d]))}const u=s.length,c=i.length,f=[];for(let h=c;h<u;++h)f.push(h);return{allDims:s,summedDims:f,idDims:l}}function oF(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function sF(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const a=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:V(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function lF(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<n.length;++o){const s=n[o],l=LCe(e,s);for(const u of l)a.indexOf(u)===-1&&(r[o].push(u),a.push(u))}return{path:n,steps:r}}function uF(t){return t.every((e,n)=>e===n)}function LCe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function cF(t,e,n=0){let r=[];if(typeof e=="number")V(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);V(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[a]=t.shape[n]-o}V(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function pX(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function vX(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gX(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function mX(t,e){return`size ${t} must be non-negative, not ${e}`}function yX(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function xX(t,e){const n=he(t),r=he(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function wX(t,e){const n=he(t),r=he(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yI(){return"segment ids must be >= 0"}function bX(){return"segment ids are not increasing"}function CX(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function SX(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t,e){let n=!1,r;for(t<=KP?(r=t,n=!0):r=Jk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Jk(t,r+1);return r}function _X(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function fF(t,e,n,r){const i=e.shape.length,a=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)s.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)s.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<i;f++)s.push(e.shape[f]);for(let f=n+1;f<a;f++)s.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const zCe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:fF,computeOutShape:_X,segOpComputeOptimalWindowSize:DX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yu(t){try{return t.map(e=>Lc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function TX(t){return t.map(e=>Ec(e))}const BCe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:JP,ERF_A2:eF,ERF_A3:tF,ERF_A4:nF,ERF_A5:rF,ERF_P:QP,PARALLELIZE_THRESHOLD:KP,get RowPartitionType(){return hs},SELU_SCALE:g_,SELU_SCALEALPHA:v_,applyActivation:$P,assertAndGetBroadcastShape:dt,assertAxesAreInnerMostDims:Gr,assertParamsConsistent:qP,assignToTypedArray:cX,axesAreInnerMostDims:cP,calculateShapes:xd,checkEinsumDimSizes:sF,checkPadOnDimRoundingMode:Qi,combineLocations:gK,combineRaggedTensorToTensorShapes:rX,complexWithEvenIndex:lX,complexWithOddIndex:uX,computeConv2DInfo:Ur,computeConv3DInfo:of,computeDefaultPad:rP,computeDilation2DInfo:V1,computeOptimalWindowSize:p_,computeOutAndReduceShapes:$r,computeOutShape:pl,computePool2DInfo:Ho,computePool3DInfo:_u,convertConv2DDataFormat:Tu,decodeEinsumEquation:aF,eitherStridesOrDilationsAreOne:si,expandShapeToKeepDim:or,exponent:hX,exponents:fX,fromStringArrayToUint8:TX,fromUint8ToStringArray:yu,getAxesPermutation:In,getBroadcastDims:Tv,getComplexWithIndex:iF,getEinsumComputePath:lF,getEinsumPermutation:oF,getFusedBiasGradient:RP,getFusedDyActivation:IP,getImageCenter:XP,getInnerMostAxes:Xn,getPermuted:q1,getRaggedRank:aX,getReductionAxes:wr,getReshaped:j1,getReshapedPermuted:K1,getRowPartitionTypesHelper:iX,getSliceBeginCoords:YP,getSliceSize:ZP,getSparseFillEmptyRowsIndicesDenseShapeMismatch:dX,getSparseFillEmptyRowsNegativeIndexErrorMessage:pX,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:vX,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:yX,getSparseReshapeInputOutputMismatchErrorMessage:wX,getSparseReshapeInputOutputMultipleErrorMessage:xX,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:gX,getSparseReshapeNegativeOutputDimErrorMessage:mX,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:SX,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:yI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:bX,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:CX,getUndoAxesPermutation:sf,isIdentityPermutation:uF,log:o0e,mergeRealAndImagArrays:mu,prepareAndValidate:VP,prepareSplitSize:cF,segment_util:zCe,shouldFuse:MP,slice_util:MCe,splitRealAndImagArrays:sX,stridesOrDilationsArePositive:qh,tupleValuesAreOne:jh,upcastType:_a,validateDefaultValueShape:oX,validateInput:hbe,validateUpdateShape:MK,warn:Pa},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */DCe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EX={kernelName:aD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,H1(Fe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VCe={kernelName:jy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=pn(Fe(n,"float32")),i=Ti(it(Vt(1),r));return jn(Je(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WCe={kernelName:qy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ti(it(pn(Fe(n,"float32")),1));return Je(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCe={kernelName:og,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{let s=t;const l=wr(n.shape,i);return l.length>0&&(s=Ke(s,l)),ie(s,n.shape)},b:()=>{let s=t;const l=wr(r.shape,i);return l.length>0&&(s=Ke(s,l)),ie(s,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GCe={kernelName:hO,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe={kernelName:oD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>$t(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jCe={kernelName:sD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>$t(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qCe={kernelName:Ky,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,Ti(it(Vt(1),pn(Fe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KCe={kernelName:Xy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ti(Te(Vt(1),pn(Fe(n,"float32"))));return Je(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XCe={kernelName:Qy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const s=Te(pn(n),pn(r));let l=te(t,Je(r,s));const u=wr(n.shape,i);return u.length>0&&(l=Ke(l,u)),ie(l,n.shape)},b:()=>{const s=Te(pn(n),pn(r));let l=jn(te(t,Je(n,s)));const u=wr(r.shape,i);return u.length>0&&(l=Ke(l,u)),ie(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YCe={kernelName:Yy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,Te(pn(Fe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe={kernelName:Zy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,it(Vt(1),pn(Fe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QCe(t,e,n,r,i,a){const o=X(t,"dy","avgPool3dGrad"),s=X(e,"input","avgPool3dGrad");let l=o,u=s,c=!1;s.rank===4&&(c=!0,l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),V(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Qi("avgPool3dGrad",i,a);const f={dy:l,input:u},h={filterSize:n,strides:r,pad:i,dimRoundingMode:a},d=ne.runKernel(gO,f,h);return c?ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const JCe=ae({avgPool3dGrad_:QCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e2e={kernelName:uD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>JCe(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t,e,n,r,i){const a=X(t,"dy","avgPoolGrad"),o=X(e,"input","avgPoolGrad");V(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,l=a,u=!1;o.rank===3&&(u=!0,s=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),V(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);const c={dy:l,input:s},f={filterSize:n,strides:r,pad:i},h=ne.runKernel(vO,c,f);return u?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const n2e=ae({avgPoolGrad_:t2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e={kernelName:lD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>n2e(t,r,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i2e={kernelName:cD,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:o}=n;return!a&&!o?{a:()=>zt(t,i,!1,!0),b:()=>zt(r,t,!0,!1)}:!a&&o?{a:()=>zt(t,i,!1,!1),b:()=>zt(t,r,!0,!1)}:a&&!o?{a:()=>zt(i,t,!1,!0),b:()=>zt(r,t,!1,!1)}:{a:()=>zt(i,t,!0,!0),b:()=>zt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e={kernelName:fD,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>yP(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o2e={kernelName:n0e,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let l=0;l<o.length;l++)o[l]>1&&s.push(l);return{x:()=>Ke(t,s,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e={kernelName:Jy,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e={kernelName:e1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u2e={kernelName:t1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>Si(gu(vd(r,i),lg(r,a)),t,$t(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2e={kernelName:hD,inputsToSave:["x"],gradFunc:EX.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f2e={kernelName:dD,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,a=_t(i,e[0].shape)[0],o=r.map(l=>l[a]);return Wa(t,o,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e={kernelName:pD,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:o,pad:s,dataFormat:l}=n;return V(jh(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>sP(r.shape,t,i,o,s,l),filter:()=>kP(r,t,i.shape,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e={kernelName:vD,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:o,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>Kh(t,i,a,o,s,1,l),filter:()=>kP(t,r,i.shape,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e,n,r,i){let a=t;t.rank===4&&(a=ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),V(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),V(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),V(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),V(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),V(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const s={x:a,dy:o},l={strides:r,pad:i,filterShape:n};return ne.runKernel(bO,s,l)}const v2e=ae({conv3DBackpropFilter_:p2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g2e={kernelName:gD,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;V(jh(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,s]=e;return{x:()=>dK(o.shape,t,s,i,a),filter:()=>v2e(o,t,s.shape,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2e={kernelName:n1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(jn(kK(Fe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e={kernelName:r1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(IK(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e={kernelName:mD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const s=In([i],r.rank);let l=vK(t,i,a,!o);return s!=null&&(l=Rt(l,s)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e={kernelName:yD,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=r??[1,1];V(jh(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[l,u]=e;return V(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),V(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),V(si(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),Qi("depthwiseConv2d",a,o),{x:()=>Ibe(l.shape,t,u,i,a,s,o),filter:()=>Nbe(l,t,u.shape,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e={kernelName:xD,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>ne.runKernel(eI,a,n),filter:()=>ne.runKernel(tI,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2e={kernelName:a1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ne.runKernel(kO,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2e={kernelName:o1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=te(vu(jn(pn(n))),2/Math.sqrt(Math.PI));return{x:()=>te(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D2e={kernelName:s1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2e={kernelName:bD,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2e={kernelName:l1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,vu(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e={kernelName:u1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2e={kernelName:c1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const s=Je(t,Fe(r,"float32")),l=wr(n.shape,i);return l.length>0?ie(Ke(s,l),n.shape):s},b:()=>{let s=te(t,Fe(n,"float32"));const l=wr(r.shape,i);l.length>0&&(s=ie(Ke(s,l),r.shape));const u=pn(r);return jn(Je(s,Fe(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e={kernelName:CD,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=e,l=s??Vt(1),u=wr(a.shape,i.shape),c=[];if(a.rank===1){for(let w=0;w<i.shape.length-1;++w)c.push(i.shape[w]);c.push(1)}const f=it(i,a),h=te(t,l),d=EK(Te(o,Vt(r))),p=te(te(te(d,d),d),Vt(-.5));return{x:()=>a.rank===1?ie(te(te(t,gs(ie(d,[1,1,1,a.shape[0]]),c)),l),i.shape):ie(te(te(t,d),l),i.shape),mean:()=>{let w=te(te(d,Vt(-1)),h);return a.rank===1&&(w=Ke(w,u)),ie(w,a.shape)},variance:()=>{let w=te(te(p,f),h);return a.rank===1&&(w=Ke(w,u)),ie(w,a.shape)},scale:()=>{const w=te(f,d);let b=te(t,w);return a.rank===1&&(b=Ke(b,u)),ie(b,a.shape)},offset:()=>{let w=t;return a.rank===1&&(w=Ke(w,u)),ie(w,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e={kernelName:SD,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a}=n,o=_t(a,r.shape)[0];return{x:()=>{const l=r.shape,u=i.size,c=l.slice(0,o),f=c.length,h=l.slice(a,l.length).slice(1),d=h.length,p=cB(0,f),v=cB(f+1,f+1+d),m=fB([c,[u],h]),g=ie(t,m),y=ie(i,[u]),x=fB([[f],p,v]),w=Rt(g,x);let b=PK(w,y,r.shape[o]);const C=sf(x);return b=Rt(b,C),b},indices:()=>i}}};function cB(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function fB(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I2e={kernelName:f1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>$t(n),b:()=>$t(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R2e={kernelName:h1,gradFunc:t=>({x:()=>Fe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $2e={kernelName:d1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e={kernelName:p1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O2e={kernelName:v1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e={kernelName:_D,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,a=to(r,0);return{x:()=>Si(a,t,te(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2e={kernelName:m1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,Te(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e={kernelName:g1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,Fe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e={kernelName:i0e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=vu(r);return it(t,te(Ke(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t,e,n,r=5,i=1,a=1,o=.5){const s={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:a,beta:o};return ne.runKernel(PO,s,l)}const V2e=ae({localResponseNormalizationBackprop_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e={kernelName:ID,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:o,alpha:s,beta:l}=n;return{x:()=>V2e(r,i,t,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(t,e,n,r){return e.rank<n.rank&&(e=ie(e,or(e.shape,r))),t.rank<n.rank&&(t=ie(t,or(t.shape,r))),{x:()=>te(t,Fe(bl(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hB={kernelName:RD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,a=e[0],o=e[1],s=_t(i,a.shape),l=AX(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U2e={kernelName:y1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>te(t,Fe(vd(n,r),"float32")),b:()=>te(t,Fe(BC(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e,n,r,i,a,o){const s=X(t,"dy","maxPool3dGrad"),l=X(e,"input","maxPool3dGrad"),u=X(n,"output","maxPool3dGrad");let c=s,f=l,h=u,d=!1;l.rank===4&&(d=!0,c=ie(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ie(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),V(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),V(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),V(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Qi("maxPool3dGrad",a,o);const p={dy:c,input:f,output:h},v={filterSize:r,strides:i,pad:a,dimRoundingMode:o},m=ne.runKernel(LO,p,v);return d?ie(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const H2e=ae({maxPool3dGrad_:G2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j2e={kernelName:MD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=n;return{x:()=>H2e(t,r,i,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e,n,r,i,a,o){const s=X(t,"dy","maxPoolGrad"),l=X(e,"input","maxPoolGrad"),u=X(n,"output","maxPoolGrad");V(l.rank===s.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`),V(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),V(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Qi("maxPoolGrad",a,o);const c={dy:s,input:l,output:u},f={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return ne.runKernel(FO,c,f)}const K2e=ae({maxPoolGrad_:q2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e={kernelName:$D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s}=n;return{x:()=>K2e(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y2e={kernelName:OD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,a=_t(i,r.shape),s=$r(r.shape,a)[1],l=he(s);return{x:()=>{const c=r.shape.slice();a.forEach(d=>{c[d]=1});const f=ie(t,c);return Je(te(f,gd(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e={kernelName:PD,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,o]=e,s=_t(i,a.shape),l=AX(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e={kernelName:x1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>te(t,Fe(lg(n,r),"float32")),b:()=>te(t,Fe(to(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2e={kernelName:FD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>ln(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eSe={kernelName:w1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const s=wr(n.shape,i);return s.length>0?ie(Ke(t,s),n.shape):t},b:()=>{const s=te(t,jn(h_(Je(n,r)))),l=wr(r.shape,i);return l.length>0?ie(Ke(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe={kernelName:b1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const s=te(t,Fe(r,"float32")),l=wr(n.shape,i);return l.length>0?ie(Ke(s,l),n.shape):s},b:()=>{const s=te(t,Fe(n,"float32")),l=wr(r.shape,i);return l.length>0?ie(Ke(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nSe={kernelName:LD,gradFunc:t=>({x:()=>jn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSe={kernelName:VD,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Nr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iSe={kernelName:BD,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSe={kernelName:WD,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Yh(t,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dB={kernelName:UD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>ln(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oSe={kernelName:C1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,o=r,s=dt(a.shape,o.shape);return{a:()=>{const c=Fe(o,"float32");let f=te(t,te(c,Ev(a,it(c,Vt(1)))));const h=wr(a.shape,s);return h.length>0&&(f=Ke(f,h)),ie(f,a.shape)},b:()=>{const c=to(a,0),f=Si(c,Cl(a),$t(a));let h=te(t,te(i,f));const d=wr(o.shape,s);return d.length>0&&(h=Ke(h,d)),ie(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sSe={kernelName:GD,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=to(n,0);return{x:()=>Si(i,t,te(t,r)),alpha:()=>{let a=Si(i,$t(t),te(t,n));const o=wr(r.shape,t.shape);return o.length>0&&(a=Ke(a,o)),ie(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t,e,n){const r=t.shape.slice();r[n]=1;const i=ie(e,r),a=vI(t,n,!0,!1),o=vI(t,n,!0,!0),s=te(a,o);return te(i,s)}function uSe(t,e,n){const r=t.shape.length,i=r-n.length,a=In(n,r);let o=t;a!=null&&(o=Rt(t,a));const s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((h,d)=>h*d,1);s.push(u);const c=o.reshape(s);let f=lSe(c,e,i);if(f=f.reshape(o.shape),a!=null){const h=sf(a);f=Rt(f,h)}return f}const cSe={kernelName:HD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let a=[];return i==null?a=r.shape.map((o,s)=>s):typeof i=="number"?a=[i]:a=i,{x:()=>uSe(r,t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fSe={kernelName:i1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{const s=Je(t,Fe(r,"float32")),l=wr(n.shape,i);return l.length>0?ie(Ke(s,l),n.shape):s},b:()=>{let s=te(t,Fe(n,"float32"));const l=wr(r.shape,i);l.length>0&&(s=ie(Ke(s,l),r.shape));const u=pn(r);return jn(Je(s,Fe(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hSe={kernelName:S1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,jn(pn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe={kernelName:_1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=te(lg(n,6),H1(n));return{x:()=>te(t,Fe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pSe={kernelName:D1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,Fe(H1(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe={kernelName:jD,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe={kernelName:KD,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ne.runKernel(HO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mSe={kernelName:qD,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ne.runKernel(GO,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ySe={kernelName:XD,gradFunc:(t,e,n)=>{const{dims:r}=n,i=_t(r,t.shape);return{x:()=>Xh(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe={kernelName:T1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wSe={kernelName:E1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jn(Je(t,te(Ev(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe={kernelName:YD,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Fe($t(n),"float32"),t:()=>te(t,Fe(n,t.dtype)),e:()=>te(t,Fe(pP(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSe={kernelName:A1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=to(n,Vt(0)),i=Vt(v_),a=Vt(g_),o=te(t,a),s=te(te(t,i),vu(Fe(n,"float32")));return Si(r,o,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SSe={kernelName:R1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,te(n,it(Vt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSe={kernelName:I1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se={kernelName:N1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(lP(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TSe={kernelName:k1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(pK(Fe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe={kernelName:ZD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,o=r.shape,[s,l]=d_(r,i,a),u=[];for(let c=0;c<t.rank;c++)u.push([s[c],o[c]-s[c]-l[c]]);return{x:()=>mP(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASe={kernelName:t_,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,o=te(t,r);return{logits:()=>it(o,te(Ke(o,[i],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe={kernelName:$1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,sg(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pB={kernelName:JD,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>oP(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vB={kernelName:e_,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Gi(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe={kernelName:M1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,te(Ti(Fe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISe={kernelName:jO,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,te(Fe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe={kernelName:O1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Vt(2);return{a:()=>te(t,te(i,it(n,r))),b:()=>te(t,te(i,it(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Se={kernelName:B1,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MSe={kernelName:P1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=dt(n.shape,r.shape);return{a:()=>{let s=t;const l=wr(n.shape,i);return l.length>0&&(s=Ke(s,l)),ie(s,n.shape)},b:()=>{let s=t;const l=wr(r.shape,i);return l.length>0&&(s=Ke(s,l)),ie(jn(s),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OSe={kernelName:QD,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n;_t(a,r.shape).forEach(u=>{i[u]=1});const s=ie(t,i),l=te(s,gd(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PSe={kernelName:F1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Je(t,pn(lP(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe={kernelName:L1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(it(Vt(1),pn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LSe={kernelName:z1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=$t(r);if(r.rank===1)for(let s=0;s<i[0];++s)o=Te(o,ln(t,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)o=Te(o,ln(t,[s*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)o=Te(o,ln(t,[s*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let c=0;c<i[3];++c)o=Te(o,ln(t,[s*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe={kernelName:qp,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=sf(i);return{x:()=>Rt(t,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe={kernelName:n_,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>zc(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VSe={kernelName:r_,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>WSe(t,n)}}};function WSe(t,e){const n=lf(e,$t(e)),r=fP(t,n);let i=vd(e,Vt(0,"int32"));const a=r.rank-i.rank;for(let s=0;s<a;++s)i=Bi(i,s+1);i=gu(i,gd(r.shape,"bool"));const o=$t(r);return Si(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USe={kernelName:i_,gradFunc:t=>({x:()=>$t(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSe=[EX,VCe,WCe,UCe,GCe,HCe,jCe,qCe,KCe,XCe,YCe,ZCe,e2e,r2e,i2e,a2e,o2e,s2e,l2e,u2e,c2e,f2e,d2e,h2e,g2e,m2e,y2e,x2e,w2e,b2e,fSe,C2e,S2e,D2e,_2e,T2e,A2e,E2e,N2e,k2e,I2e,R2e,$2e,M2e,O2e,P2e,F2e,L2e,z2e,W2e,hB,hB,U2e,j2e,X2e,Y2e,Z2e,Q2e,J2e,eSe,tSe,nSe,rSe,iSe,aSe,dB,dB,oSe,sSe,cSe,hSe,dSe,pSe,vSe,gSe,mSe,ySe,xSe,wSe,bSe,CSe,SSe,DSe,_Se,TSe,ESe,ASe,NSe,pB,pB,vB,vB,kSe,RSe,ISe,$Se,MSe,OSe,PSe,FSe,LSe,zSe,BSe,VSe,USe];for(const t of GSe)s0e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.abs=function(){return this.throwIfDisposed(),mi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acos=function(){return this.throwIfDisposed(),xye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acosh=function(){return this.throwIfDisposed(),bye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.add=function(t){return this.throwIfDisposed(),Te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.all=function(t,e){return this.throwIfDisposed(),cK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.any=function(t,e){return this.throwIfDisposed(),dI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMax=function(t){return this.throwIfDisposed(),W0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMin=function(t){return this.throwIfDisposed(),Tye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asScalar=function(){return this.throwIfDisposed(),V(this.size===1,()=>"The array must have only 1 element."),ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asType=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as1D=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),ie(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asin=function(){return this.throwIfDisposed(),Aye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asinh=function(){return this.throwIfDisposed(),kye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan=function(){return this.throwIfDisposed(),Rye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan2=function(t){return this.throwIfDisposed(),Mye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atanh=function(){return this.throwIfDisposed(),Pye(this)};fe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),iP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),oP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),l_(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Qm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cast=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ceil=function(){return this.throwIfDisposed(),u1e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Xa(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof rr&&(t=[t]),Gi([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),fK(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),hK(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Kh(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cos=function(){return this.throwIfDisposed(),lP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cosh=function(){return this.throwIfDisposed(),pK(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),vI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),vK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),M1e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),uP(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),F1e(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.divNoNan=function(t){return this.throwIfDisposed(),W1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.div=function(t){return this.throwIfDisposed(),Je(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dot=function(t){return this.throwIfDisposed(),G1e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.elu=function(){return this.throwIfDisposed(),c_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.equal=function(t){return this.throwIfDisposed(),bl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.erf=function(){return this.throwIfDisposed(),K1e(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),rxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.exp=function(){return this.throwIfDisposed(),vu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expandDims=function(t){return this.throwIfDisposed(),Bi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expm1=function(){return this.throwIfDisposed(),sxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.fft=function(){return this.throwIfDisposed(),$K(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.flatten=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floor=function(){return this.throwIfDisposed(),h_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floorDiv=function(t){return this.throwIfDisposed(),uK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),fP(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),vd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greater=function(t){return this.throwIfDisposed(),to(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ifft=function(){return this.throwIfDisposed(),gI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.irfft=function(){return this.throwIfDisposed(),Jwe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isFinite=function(){return this.throwIfDisposed(),gxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isInf=function(){return this.throwIfDisposed(),yxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isNaN=function(){return this.throwIfDisposed(),wxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),dP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.lessEqual=function(t){return this.throwIfDisposed(),lg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.less=function(t){return this.throwIfDisposed(),BC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),_xe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSigmoid=function(){return this.throwIfDisposed(),Rxe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),wK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Pxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log=function(){return this.throwIfDisposed(),Cl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log1p=function(){return this.throwIfDisposed(),xK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),gu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalNot=function(){return this.throwIfDisposed(),pP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalOr=function(t){return this.throwIfDisposed(),bK(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalXor=function(t){return this.throwIfDisposed(),Vxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),zt(this,t,e,n)};fe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),vP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.max=function(t,e){return this.throwIfDisposed(),Cs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.maximum=function(t){return this.throwIfDisposed(),lf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mean=function(t,e){return this.throwIfDisposed(),ir(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.min=function(t,e){return this.throwIfDisposed(),zC(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.minimum=function(t){return this.throwIfDisposed(),H0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Xxe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mod=function(t){return this.throwIfDisposed(),Zxe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mul=function(t){return this.throwIfDisposed(),te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.neg=function(){return this.throwIfDisposed(),jn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),f_(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.notEqual=function(t){return this.throwIfDisposed(),VC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),CK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.onesLike=function(){return this.throwIfDisposed(),Lo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pad=function(t,e){return this.throwIfDisposed(),mP(this,t,e)};fe().prototype.pool=function(t,e,n,r,i,a){return this.throwIfDisposed(),swe(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pow=function(t){return this.throwIfDisposed(),Ev(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prelu=function(t){return this.throwIfDisposed(),xP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prod=function(t,e){return this.throwIfDisposed(),cwe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reciprocal=function(){return this.throwIfDisposed(),$we(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu=function(){return this.throwIfDisposed(),yd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu6=function(){return this.throwIfDisposed(),_K(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshape=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),LK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),zK(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reverse=function(t){return this.throwIfDisposed(),Xh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rfft=function(){return this.throwIfDisposed(),nbe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.round=function(){return this.throwIfDisposed(),TK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rsqrt=function(){return this.throwIfDisposed(),EK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.selu=function(){return this.throwIfDisposed(),AK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),NK(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sigmoid=function(){return this.throwIfDisposed(),sg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sign=function(){return this.throwIfDisposed(),Wwe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sin=function(){return this.throwIfDisposed(),kK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sinh=function(){return this.throwIfDisposed(),IK(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.slice=function(t,e){return this.throwIfDisposed(),ln(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softmax=function(t){return this.throwIfDisposed(),NP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softplus=function(){return this.throwIfDisposed(),W1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),yP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.split=function(t,e){return this.throwIfDisposed(),Wa(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sqrt=function(){return this.throwIfDisposed(),Ti(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.square=function(){return this.throwIfDisposed(),pn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),ibe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squeeze=function(t){return this.throwIfDisposed(),G1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof rr?[this,t]:[this,...t];return zc(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.step=function(t){return this.throwIfDisposed(),H1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return this.throwIfDisposed(),ube(this,t,e,n,r,i,a,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sub=function(t){return this.throwIfDisposed(),it(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sum=function(t,e){return this.throwIfDisposed(),Ke(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tan=function(){return this.throwIfDisposed(),fbe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tanh=function(){return this.throwIfDisposed(),aP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tile=function(t){return this.throwIfDisposed(),gs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toBool=function(){return this.throwIfDisposed(),Fe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toFloat=function(){return this.throwIfDisposed(),Fe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toInt=function(){return this.throwIfDisposed(),Fe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.topk=function(t,e){return this.throwIfDisposed(),pbe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.transpose=function(t){return this.throwIfDisposed(),Rt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unique=function(t){return this.throwIfDisposed(),mbe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),PK(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unstack=function(t){return this.throwIfDisposed(),Yh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.where=function(t,e){return this.throwIfDisposed(),Si(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.zerosLike=function(){return this.throwIfDisposed(),$t(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ys extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ys.prototype)}}class Ao extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ao.prototype)}}class J extends Error{constructor(e){super(e),Object.setPrototypeOf(this,J.prototype)}}class vt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,vt.prototype)}}class hF extends Error{constructor(e){super(e),Object.setPrototypeOf(this,hF.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NX{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zh(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Zs(t,e){if(!t)throw new hF(e)}function gB(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Vi(t){return t.length===1?t[0]:t}function fn(t){return Array.isArray(t)?t:[t]}function Yl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Jf(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ao={};function dF(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function xI(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>xI(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:xI(r))}}}function X1(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const a=t;let o;if(a in n)o=n[a];else if(a in ao)o=ao[a];else if(o=e[a],o==null)throw new J(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const a=t;if(a.className==null||a.config==null)throw new J(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const o=a.className;let s,l;if(o in n?[s,l]=n[o]:o in ao?[s,l]=ao.className:o in e&&([s,l]=e[o]),s==null)throw new J(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const d of Object.keys(ao))u[d]=ao[d];for(const d of Object.keys(n))u[d]=n[d];const c=a.config;c.customObjects=u;const f=Object.assign({},ao);for(const d of Object.keys(n))ao[d]=n[d];xI(a.config);const h=l(s,a.config,n,i);return ao=Object.assign({},f),h}else{const u=Object.assign({},ao);for(const f of Object.keys(n))ao[f]=n[f];const c=new s(a.config);return ao=Object.assign({},u),c}}}function HSe(t,e){return t<e?-1:t>e?1:0}function lw(t,e){return-1*HSe(t,e)}function Ac(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function jSe(t){if(t==null)throw new J(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function wd(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new J(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function pF(t,e,n=0,r=1/0){return Zs(n>=0),Zs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Ir(t,e){Array.isArray(t)?(V(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Ir(n,`element ${r+1} of ${e}`))):V(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${kX(t)}.`)}function kX(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>kX(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function qSe(t,e,n){let r=n!=null?n():Li(),i;return(...o)=>{const s=n!=null?n():Li();return s-r<e||(r=s,i=t(...o)),i}}function IX(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let KSe=0;function RX(){return KSe++}const uw={};function m_(t=""){return t in uw||(uw[t]=0),uw[t]+=1,t+uw[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XSe=["channelsFirst","channelsLast"],YSe=["nearest","bilinear"],ZSe=["valid","same","causal"],QSe=["max","avg"],JSe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Od=new Map;function Yn(t){wd(XSe,"DataFormat",t)}function eDe(t){wd(YSe,"InterpolationFormat",t)}function no(t){wd(ZSe,"PaddingMode",t)}function $X(t){wd(QSe,"PoolMode",t)}const Jm=[],mB="/";function Ch(t,e){Jm.push(t);try{const n=e();return Jm.pop(),n}catch(n){throw Jm.pop(),n}}function tDe(){return Jm.length===0?"":Jm.join(mB)+mB}function MX(t){if(!PX(t))throw new Error("Not a valid tensor name: '"+t+"'");return tDe()+t}function OX(t){if(!PX(t))throw new Error("Not a valid tensor name: '"+t+"'");Od.has(t)||Od.set(t,0);const e=Od.get(t);if(Od.set(t,Od.get(t)+1),e>0){const n=`${t}_${e}`;return Od.set(n,1),n}else return t}const nDe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function PX(t){return!!t.match(nDe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rDe(t){return t===parseInt(t.toString(),10)}function Nc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Nv(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Bc(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Is(t,e){if(e<t)throw new J(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let PE;function pr(){return PE==null&&(PE=hye().epsilon()),PE}function Rs(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vl(t,e){return Fe(t,e)}function Y1(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ie(t,n)}function iDe(t,e){return le(()=>{if(t.shape.length!==2)throw new J(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Y1(t,1);return wI(n,[1,e,1])})}function aDe(t){const e=[Nc(t.shape)];return ie(t,e)}function oDe(t){if(t.rank<=1)throw new J(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Nc(t.shape,1)];return ie(t,e)}function Sh(t,e,n){return le(()=>{switch(t.rank){case 1:return EP(t,e,n);case 2:return RK(t,[e,0],[n,t.shape[1]]);case 3:return AP(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return UC(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ln(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ln(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new J(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function FE(t,e,n){return le(()=>{switch(t.rank){case 1:return EP(t,e,n);case 2:return RK(t,[0,e],[t.shape[0],n]);case 3:return AP(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return UC(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function cw(t,e,n,r){return le(()=>{switch(t.rank){case 1:return EP(t,e,n);case 2:switch(r){case 1:return Sh(t,e,n);case 2:return FE(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Sh(t,e,n);case 2:return AP(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return FE(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Sh(t,e,n);case 2:return UC(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return UC(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return FE(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function vF(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Gi(t,e)}function yB(t,e){switch(t.rank){case 1:return h1e([t,e]);case 2:return p1e([t,e],0);case 3:return g1e([t,e],0);case 4:return y1e([t,e],0);default:throw new J(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function wI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new J(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return gs(t,e)}function y_(t,e=0,n=1,r,i){return Nwe(t,e,n,r,i)}function gl(t,e,n,r){if(t.rank<2||e.rank<2)throw new vt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(i!==a)throw new vt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return nB({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?bI(t.rank,r,Rs()):null,activation:n});{const i=t.shape.slice(),a=i.pop();t=ie(t,[-1,a]);const o=e.shape.slice(),s=o.pop(),l=o.pop(),u=[...o,s],c=Array.from({length:e.rank},(p,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=ie(Rt(e,c),[l,-1]);const f=[...i,...u];return ie(nB({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?bI(t.rank,r,Rs()):null,activation:n}),f)}}function FX(t,e,n){return le(()=>(Array.isArray(e)?e=pa(e,"int32"):e=Fe(e,"int32"),fP(t,e,n)))}function Z1(t){return te(t,t)}function bI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new J(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1,1]):ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1]):ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1]):ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,r[0]]):ie(e,[1].concat(r))}else if(t<3)return e;throw new J(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ps(t,e,n){return le(()=>(n==null&&(n=Rs()),Yn(n),Te(t,bI(t.rank,e,n))))}function sDe(t,e=1){if(e!==1)throw new vt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return c_(t)}function lDe(t){return le(()=>Je(t,Te(mi(t),1)))}function LX(t,e,n,r){return le(()=>Dbe(t,e,n,r))}function uDe(t){return le(()=>{const e=Te(.5,te(.2,t));return Xa(e,0,1)})}function Q1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cDe=["fanIn","fanOut","fanAvg"],fDe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hDe(t){wd(cDe,"FanMode",t)}function dDe(t){wd(fDe,"Distribution",t)}class jo extends cg{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class zX extends jo{apply(e,n){return Nr(e,n)}}zX.className="Zeros";be(zX);class gF extends jo{apply(e,n){return gd(e,n)}}gF.className="Ones";be(gF);class BX extends jo{constructor(e){if(super(),typeof e!="object")throw new J(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new J(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return le(()=>te(Vt(this.value),gd(e,n)))}getConfig(){return{value:this.value}}}BX.className="Constant";be(BX);class VX extends jo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return U1(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}VX.className="RandomUniform";be(VX);class WX extends jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new vt(`randomNormal does not support dType ${n}.`);return y_(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}WX.className="RandomNormal";be(WX);class UX extends jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new vt(`truncatedNormal does not support dType ${n}.`);return OK(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}UX.className="TruncatedNormal";be(UX);class GX extends jo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return le(()=>{if(e.length!==2||e[0]!==e[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return te(this.gain,yK(e[0]))})}getConfig(){return{gain:this.gain}}}GX.className="Identity";be(GX);function pDe(t,e="channelsLast"){let n,r;if(Yn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=Nc(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=Nc(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=Nc(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Ta extends jo{constructor(e){if(super(),e.scale<0)throw new J(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,hDe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,dDe(this.distribution),this.seed=e.seed}apply(e,n){const r=pDe(e),i=r[0],a=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),this.distribution==="normal"){const s=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new vt(`${this.getClassName()} does not support dType ${n}.`);return OK(e,0,s,n,this.seed)}else{const s=Math.sqrt(3*o);return U1(e,-s,s,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ta.className="VarianceScaling";be(Ta);class mF extends Ta{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}mF.className="GlorotUniform";be(mF);class yF extends Ta{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}yF.className="GlorotNormal";be(yF);class xF extends Ta{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}xF.className="HeNormal";be(xF);class wF extends Ta{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}wF.className="HeUniform";be(wF);class bF extends Ta{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}bF.className="LeCunNormal";be(bF);class CF extends Ta{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ta.className}}CF.className="LeCunUniform";be(CF);class HX extends jo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return le(()=>{if(e.length<2)throw new vt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=he(e.slice(0,-1)),i=e[e.length-1],a=r*i;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],s=y_(o,0,1,n,this.seed),l=wCe.qr(s,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return u=te(u,f.sign()),r<i&&(u=u.transpose()),te(Vt(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}HX.className="Orthogonal";be(HX);const xB={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function wB(t,e={}){return X1(t,Co.getMap().classNameMap,e,"initializer")}function Nn(t){return dF(t)}function Cn(t){if(typeof t=="string"){const e=t in xB?xB[t]:t;if(e==="GlorotNormal")return new yF;if(e==="GlorotUniform")return new mF;if(e==="HeNormal")return new xF;if(e==="HeUniform")return new wF;if(e==="LeCunNormal")return new bF;if(e==="LeCunUniform")return new CF;{const n={};return n.className=e,n.config={},wB(n)}}else return t instanceof jo?t:wB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CI(t){return Array.isArray(t)&&Array.isArray(t[0])}function GC(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function rt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new J(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ft(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new J(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HC(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bB="Variable";class vDe{constructor(e,n="float32",r=bB,i=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=RX(),r=r??bB,this.originalName=MX(r),this.name=OX(this.originalName),this.trainable_=i,this.constraint=a,this.val=wbe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),gDe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function gDe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function SI(t){return t.map(e=>e.read())}function SF(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class il{constructor(e,n,r,i,a,o,s){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=a,this.outputTensorIndex=s,this.id=RX(),o!=null&&(this.originalName=MX(o),this.name=OX(this.originalName)),this.rank=n.length}}let mDe=0,x_=class{constructor(e,n){this.callArgs=n,this.id=mDe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},yDe=0,Tt=class extends cg{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=yDe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Yl(r)+"_"+m_(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ao(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new J(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Vi(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Vi(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ys(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ys(`Layer ${this.name} is not connected, no input to return.`);return Vi(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ys(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ys(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Vi(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=fn(e),this.inputSpec==null||this.inputSpec.length===0)return;const n=fn(this.inputSpec);if(e.length!==n.length)throw new J(`Layer ${this.name} expects ${n.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let r=0;r<e.length;r++){const i=e[r],a=n[r];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new J(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new J(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new J(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new J(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const s=i.shape;for(const l in a.axes){const u=Number(l),c=a.axes[l],f=u>=0?s[u]:s[s.length+u];if(c!=null&&[c,null].indexOf(f)===-1)throw new J(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${s}.`)}}if(a.shape!=null)for(let s=0;s<a.shape.length;++s){const l=a.shape[s],u=i.shape[s];if(l!=null&&u!=null&&l!==u)throw new J(`Input ${r} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=fn(e);let i=!0;for(const o of r)if(!(o instanceof il)){i=!1;break}let a=!0;for(const o of r)if(o instanceof il){a=!1;break}if(i===a)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ch(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const s of fn(e))o.push(s.shape);this.build(Vi(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let o=this.call(e,n);const s=fn(o),l=[];for(let u of s)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=Vi(l),this.activityRegularizer!=null)throw new vt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=xDe(e),s=this.computeOutputShape(o);let l;const u=wDe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),s!=null&&s.length>0&&Array.isArray(s[0])?l=s.map((c,f)=>new il(u,c,this,fn(e),n,this.name,f)):l=new il(u,s,this,fn(e),n,this.name),this.addInboundNode(e,l,null,null,o,s,n),this._refCount++,this.activityRegularizer!=null)throw new vt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ys(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ys(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ao(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return HC(this.weights)}build(e){this.built=!0}getWeights(e=!1){return SI(e?this.trainableWeights:this.weights)}setWeights(e){le(()=>{const n=this.weights;if(n.length!==e.length)throw new J(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=SI(n);for(let a=0;a<i.length;++a){const o=i[a],s=n[a],l=e[a];if(!Bt(o.shape,l.shape))throw new J(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([s,l])}SF(r)})}addWeight(e,n,r,i,a,o,s,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new J(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Cn("zeros"));const u=i.apply(n,r),c=new vDe(u,r,e,o,s);return u.dispose(),a!=null&&this.addLoss(()=>a.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=fn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(e,n,r,i,a,o,s=null){const l=fn(e);n=fn(n),r=fn(r),i=fn(i),a=GC(a),o=GC(o);const u=[],c=[],f=[];for(const h of l)u.push(h.sourceLayer),c.push(h.nodeIndex),f.push(h.tensorIndex);new x_({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:a,outputShapes:o},s);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function xDe(t){t=fn(t);const e=[];for(const n of t)e.push(n.shape);return Vi(e)}function wDe(t){return"float32"}function jX(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let a=0;a<r.inboundLayers.length;a++){const o=r.inputTensors[a],s=r.inboundLayers[a],l=r.nodeIndices[a],u=jX(o,s,l);for(const c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class J1 extends Tt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:m_("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new il(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new x_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new J(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}J1.className="InputLayer";be(J1);function bDe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new J1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CDe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Fe(e,t.dtype)}catch{throw new J(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class ic{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ic)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=CDe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new J(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof il){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof il){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&xt(this.id2Mask)}}const jC=new NX,qC=new NX;function SDe(t){jC!=null&&jC.setMaxEntries(t),qC!=null&&qC.setMaxEntries(t)}function _m(t,e,n,r){const i=n==null?!1:n.training,a=Array.isArray(t),o=a?t:[t],s=o.map(p=>p.name),l=[],u=e.names();for(const p of s)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+e.names().sort().join(",");let f=jC.get(c),h;if(f==null){const p=DDe(o,e);f=p.sorted,h=p.recipientCounts,jC.put(c,f),qC.put(c,h)}h={},i||Object.assign(h,qC.get(c));const d=new ic(e);for(let p=0;p<f.length;++p){if(r!=null){const _=hI().numTensors;_>r.maxNumTensors&&(r.maxNumTensors=_),_<r.minNumTensors&&(r.minNumTensors=_)}const v=f[p],m=v.sourceLayer;if(m instanceof J1)continue;const g=[],y=[],x=[];let w=!1;for(const _ of v.inputs){const T=d.getValue(_),E=d.getMask(_);g.push(T),y.push(E),E!=null&&(w=!0),i||(h[_.name]--,h[_.name]===0&&!e.hasKey(_)&&s.indexOf(_.name)===-1&&!T.isDisposed&&_.sourceLayer.stateful!==!0&&x.push(T))}w&&(n=n||{},n.mask=y[0]);const b=fn(m.apply(g,n));let C=null;m.supportsMasking&&(C=m.computeMask(g,y));const S=TDe(v),D=Array.isArray(S)?S:[S];for(let _=0;_<D.length;++_){d.hasKey(D[_])||d.add(D[_],b[_],Array.isArray(C)?C[0]:C);const T=s.indexOf(D[_].name);T!==-1&&(l[T]=b[_])}i||xt(x)}return d.disposeMasks(),a?l:l[0]}function DDe(t,e){V(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=CB(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:o,recipientMap:s}=CB(a,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in s)r[l]==null&&(r[l]=new Set),s[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:_De(r)}}function _De(t){const e={};for(const n in t)e[n]=t[n].size;return e}function CB(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const a=[],o=[];for(a.push(t);a.length>0;){const s=a[a.length-1];if(n.has(s.name)){a.pop();continue}const l=o[o.length-1]===a.length-1;if(s.inputs.length===0||l)a.pop(),r.push(s),n.add(s.name),l&&o.pop();else{o.push(a.length-1);for(const u of s.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(s.name),!n.has(u.name)&&a.push(u)}}return{sorted:r,recipientMap:i}}function TDe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe=ue();EDe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,SDe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DF(t,e){return le(()=>Ti(Ke(te(t,t),e,!0)))}class ex extends cg{getConfig(){return{}}}class qX extends ex{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=DF(e,this.axis),r=Xa(n,0,this.maxValue);return te(e,Je(r,Te(pr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}qX.className="MaxNorm";be(qX);class KX extends ex{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>Je(e,Te(pr(),DF(e,this.axis))))}getConfig(){return{axis:this.axis}}}KX.className="UnitNorm";be(KX);class XX extends ex{apply(e){return yd(e)}}XX.className="NonNeg";be(XX);class YX extends ex{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=DF(e,this.axis),r=Te(te(this.rate,Xa(n,this.minValue,this.maxValue)),te(1-this.rate,n));return te(e,Je(r,Te(pr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}YX.className="MinMaxNorm";be(YX);const SB={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function mr(t){return dF(t)}function DB(t,e={}){return X1(t,Co.getMap().classNameMap,e,"constraint")}function yr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in SB?SB[t]:t,config:{}};return DB(n)}else return t instanceof ex?t:DB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function xf(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if(typeof a!="number"){const o=a;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let a=0;a<i.length;++a)t[n[a]]=i[a][0];xt(r)}}function ZX(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var _B;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(_B||(_B={}));const ADe=125;class q0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class NDe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class kDe extends q0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const a=n[i];if(typeof a=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+a*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const s=le(()=>Te(this.totals[i],te(a,r)));this.totals[i]=s,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:le(()=>{const i=te(Je(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),dl(n[r])}))}}class IDe extends q0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const o=this.history[a];for(let s=0;s<o.length;++s)if(typeof o[s]!="number"){const l=o[s];e.push(l.data()),n.push(a),r.push(s)}}const i=await Promise.all(e);for(let a=0;a<i.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=i[a][0]}}class RDe extends q0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||nX,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=ADe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Zk(this.yieldEvery)&&(this.maybeWait=qSe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await xf(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await xf(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await xf(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await xf(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await xf(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):Zk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await xf(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await xf(e),await this.trainEnd(e))}}function QX(t,e){return t==null&&(t={}),t instanceof q0?[t]:Array.isArray(t)&&t[0]instanceof q0?t:fn(t).map(r=>new RDe(r,e))}class po{constructor(){}static registerCallbackConstructor(e,n){V(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),po.checkForDuplicate(n),po.constructors[e]==null&&(po.constructors[e]=[]),po.constructors[e].push(n)}static checkForDuplicate(e){for(const n in po.constructors)po.constructors[+n].forEach(i=>{if(i===e)throw new J("Duplicate callback constructor.")})}static clear(){po.constructors={}}static createCallbacks(e){const n=[];for(const r in po.constructors){const i=+r;e>=i&&n.push(...po.constructors[i])}return n.map(r=>new r)}}po.constructors={};function JX(t,e,n,r,i,a,o,s,l){const u=new IDe,c=[new kDe,...po.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const f=new NDe(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ml(t,e={},n=!1){return X1(t,Co.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KC(t,e){return le(()=>{t.dtype!=="float32"&&(t=Fe(t,"float32"));const n=Ke(Z1(t),e,!0),r=u_(n.shape,pr()),i=Ti(lf(n,r));return Je(t,i)})}function w_(t,e){return le(()=>ir(Z1(it(e,t)),-1))}function _F(t,e){return le(()=>ir(mi(it(e,t)),-1))}function TF(t,e){return le(()=>{const n=it(t,e),r=Xa(mi(t),pr(),Number.MAX_VALUE),i=mi(Je(n,r));return te(100,ir(i,-1))})}function $De(t,e){return le(()=>{const n=Xa(e,pr(),Number.MAX_VALUE),r=Cl(Te(1,n)),i=Xa(t,pr(),Number.MAX_VALUE),a=Cl(Te(1,i));return ir(Z1(it(r,a)),-1)})}function MDe(t,e){return le(()=>{const n=lf(0,it(1,te(t,e)));return ir(Z1(n),-1)})}function ODe(t,e){return le(()=>{const n=lf(0,it(1,te(t,e)));return ir(n,-1)})}function PDe(t,e){return le(()=>{const n=Ke(te(t,e),-1),r=Cs(te(it(1,t),e),-1);return lf(0,Te(1,it(r,n)))})}function FDe(t,e){return le(()=>{const n=Math.log(2),r=it(e,t),i=it(Te(r,W1(te(-2,r))),n);return ir(i,-1)})}function K0(t,e,n=!1){return le(()=>{if(n)e=NP(e);else{const r=Ke(e,e.shape.length-1,!0);e=Je(e,r)}return e=Xa(e,pr(),1-pr()),jn(Ke(te(Fe(t,"float32"),Cl(e)),e.shape.length-1))})}function XC(t,e,n=!1){return le(()=>{const r=Fe(h_(aDe(t)),"int32");e=Xa(e,pr(),1-pr());const i=e.shape,a=ie(CK(r,i[i.length-1]),i);return K0(a,e,n)})}function LDe(t,e){if(!Bt(t.shape,e.shape))throw new J(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return le(()=>{const n=yd(e),r=jn(mi(e));return Te(it(n,te(e,t)),xK(vu(r)))})}function b_(t,e){return le(()=>{let n;return n=Xa(e,pr(),1-pr()),n=Cl(Je(n,it(1,n))),ir(LDe(t,n),-1)})}function zDe(t,e){return le(()=>{const n=Xa(t,pr(),1),r=Xa(e,pr(),1);return Ke(te(t,Cl(Je(n,r))),-1)})}function BDe(t,e){return le(()=>{const n=Cl(Te(pr(),e));return ir(it(e,te(t,n)),-1)})}function eY(t,e){return le(()=>{const n=KC(t,-1),r=KC(e,-1),i=te(n,r);return jn(Ke(i,-1))})}const YC={meanSquaredError:w_,meanAbsoluteError:_F,meanAbsolutePercentageError:TF,meanSquaredLogarithmicError:$De,squaredHinge:MDe,hinge:ODe,categoricalHinge:PDe,logcosh:FDe,categoricalCrossentropy:K0,sparseCategoricalCrossentropy:XC,binaryCrossentropy:b_,kullbackLeiblerDivergence:zDe,poisson:BDe,cosineProximity:eY};function LE(t){if(typeof t=="string"){if(t in YC)return YC[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new J(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tY(t,e){return le(()=>{const n=te(.5,Lo(e)),r=vl(to(e,n),t.dtype);return ir(bl(t,r),-1)})}function nY(t,e){return le(()=>vl(bl(W0(t,-1),W0(e,-1)),"float32"))}function VDe(t,e){return le(()=>Fe(Ke(gu(bl(t,1),bl(e,1))),"float32"))}function WDe(t,e){return le(()=>Fe(Ke(gu(bl(t,0),bl(e,1))),"float32"))}function UDe(t,e){return le(()=>{const n=VDe(t,e),r=WDe(t,e),i=Te(n,r);return Fe(Si(to(i,0),Je(n,i),0),"float32")})}function GDe(t,e){return b_(t,e)}function HDe(t,e){return t.rank===e.rank&&(t=G1(t,[t.rank-1])),e=W0(e,-1),e.dtype!==t.dtype&&(e=Fe(e,t.dtype)),Fe(bl(t,e),"float32")}const jDe=w_,qDe=w_,KDe=_F,XDe=_F,YDe=TF,ZDe=TF,rY=K0,QDe=eY,iY=XC,ZC={binaryAccuracy:tY,categoricalAccuracy:nY,precision:UDe,categoricalCrossentropy:rY,sparseCategoricalCrossentropy:iY,mse:jDe,MSE:qDe,mae:KDe,MAE:XDe,mape:YDe,MAPE:ZDe,cosine:QDe};function JDe(t){if(typeof t=="string"&&t in ZC)return ZC[t];if(typeof t!="string"&&t!=null)return t;throw new J(`Unknown metric ${t}`)}function fw(t){if(Zs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(YC))if(YC[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(ZC))if(ZC[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e_e(t){const e={Adagrad:()=>Md.adagrad(.01),Adadelta:()=>Md.adadelta(1,.95,pr()),Adam:()=>Md.adam(.001,.9,.999,pr()),Adamax:()=>Md.adamax(.002,.9,.999,pr(),0),RMSProp:()=>Md.rmsprop(.001,.9,0,pr()),SGD:()=>Md.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new J(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const TB=1*1024*1024;function EB(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!DI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>TB&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${TB}.`)}}function DI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!DI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!DI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t_e(t,e,n,r=console.log){const i=r_e(t),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!i){a.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),QC(a,n,r),r("=".repeat(e));const s=t.layers;for(let c=0;c<s.length;++c)i?i_e(s[c],n,r):a_e(s[c],n,o,r),r((c===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=n_e(t),u=HC(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function n_e(t){let e;return t.collectedTrainableWeights!=null?e=HC(t.collectedTrainableWeights):e=HC(t.trainableWeights),e}function r_e(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let a=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function QC(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function i_e(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,o=t.getClassName(),s=[`${a} (${o})`,i,r,t.countParams().toString()];QC(s,e,n)}function a_e(t,e,n,r){let i,a;try{a=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let h=0;h<f.inboundLayers.length;++h){const d=f.inboundLayers[h].name,p=f.nodeIndices[h],v=f.tensorIndices[h];o.push(`${d}[${p}][${v}]`)}const s=t.name,l=t.getClassName(),u=o.length===0?"":o[0],c=[`${s} (${l})`,a,i,t.countParams().toString(),u];QC(c,e,r);for(let f=1;f<o.length;++f)QC(["","","","",o[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aY(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function JC(t,e){if(t===null)return null;if(typeof t=="string")return Jf(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];aY(e,i,a)?n.push(a):n.push(JC(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const a=Jf(r);n[a]=JC(i,a)}}return n}}function _I(t,e){if(t==null)return null;if(typeof t=="string")return Yl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];aY(e,i,a)?n.push(a):n.push(_I(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],a=Yl(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=_I(i,r)}return n}}/** @license See the LICENSE file. */const oY="4.10.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class is extends Tt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=m_(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Ac(this.inputs).length!==this.inputs.length)throw new J(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);Ac(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const x=y.sourceLayer,w=y.nodeIndex,b=y.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(b)}for(const y of this.inputs){const x=y.sourceLayer,w=y.nodeIndex,b=y.tensorIndex;Zs(w===0,"input layer has >1 nodes"),Zs(b===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(b)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const x=this.inputLayers[y];if(!(x instanceof J1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},a={},o={},s=[],l=(y,x,w,b,C,S)=>{(b==null||C==null||S==null)&&(b=y.sourceLayer,C=y.nodeIndex,S=y.tensorIndex);const D=b.inboundNodes[C];if(w.indexOf(D)!==-1)throw new Ao(`The tensor ${y.name} at layer "${b.name}" is part of a cycle.`);if(x.indexOf(D)!==-1)return;this.containerNodes.add(is.nodeKey(b,C)),b.id in o||(o[b.id]=Object.keys(o).length),w.indexOf(D)===-1&&w.push(D);const _=D.inboundLayers.length;for(let T=0;T<_;T++){const E=D.inputTensors[T],A=D.inboundLayers[T],R=D.nodeIndices[T],$=D.tensorIndices[T];l(E,x,w,A,R,$)}for(x.push(D);w.indexOf(D)>=0;)w.splice(w.indexOf(D),1);s.push(D)},u=[],c=[];for(const y of this.outputs)l(y,u,c);const f=s.slice().reverse();for(const y of f){r[y.id]=y,y.id in n||(n[y.id]=0);let x=n[y.id];const w=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];x=Math.max(x,w),i[y.outboundLayer.id]=x,a[y.outboundLayer.id]=y.outboundLayer,n[y.id]=x;for(let b=0;b<y.inboundLayers.length;b++){const C=y.inboundLayers[b],S=y.nodeIndices[b],D=C.inboundNodes[S],_=n[D.id]==null?0:n[D.id];n[D.id]=Math.max(x+1,_),r[D.id]=D}}const h={};for(const y in n){const x=n[y];x in h||(h[x]=[]),h[x].push(r[y])}const d={};for(const y in i){const x=i[y];x in d||(d[x]=[]),d[x].push(a[y])}let p=Object.keys(d).map(y=>parseInt(y,10)).sort(lw);this.layers=[];for(const y of p){const x=d[y];x.sort((w,b)=>{const C=o[w.id],S=o[b.id];return C<S?-1:C>S?1:0});for(const w of x)w instanceof is&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=d,p=Object.keys(h).map(y=>parseInt(y,10)).sort(lw);const v=this.inputs.slice(),m=[];for(const y of p)for(const x of h[y]){const w=x.outboundLayer;if(w!=null){for(const b of x.inputTensors)if(v.indexOf(b)===-1)throw new Ao(`Graph disconnected: cannot obtain value for tensor ${b} at layer "${w.name}". The following previous layers were accessed without issue: ${m}`);for(const b of x.outputTensors)v.push(b);m.push(w.name)}}this.nodesByDepth=h;const g=this.layers.map(y=>y.name);for(const y of g){const x=g.filter(w=>w===y).length;if(x!==1)throw new Ao(`The name "${y}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new x_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const a=Object.keys(e)[0].split("/"),o=!isNaN(parseInt(a[a.length-1],10));for(const l of this.layers)for(const[u,c]of l.weights.entries()){const f=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${u}`:c.originalName;if(r[f]!=null)throw new J(`Duplicate weight name: ${f}`);r[f]=c,i++}const s=[];for(const l in e){let u=l;if(r[l]==null){const c=l.split("/");u=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[u]!=null)s.push([r[u],e[l]]);else if(n)throw new J(`Provided weight data has no target variable: ${l}`);delete r[u]}if(n){const l=[];for(const u in r)l.push(u);if(l.length>0)throw new J(`${l.length} of ${i} weights are not set: ${l}`)}SF(s)}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${oY}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=_I(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return le(()=>{e=fn(e);const r=new ic;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return _m(this.outputs,r,n)})}computeMask(e,n){return le(()=>{e=fn(e);let r;return n==null?r=Zh(null,e.length):r=fn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=GC(e);if(n.length!==this.inputLayers.length)throw new J(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let s=0;s<n.length;s++){const l=this.inputLayers[s],u=n[s],c=l.name+"_0_0";r[c]=u}const i=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(lw);if(i.length>1)for(const s of i){const l=this.nodesByDepth[s];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(c.id)!==-1)continue;const f=[];for(let v=0;v<u.inboundLayers.length;v++){const m=u.inboundLayers[v],g=u.nodeIndices[v],y=u.tensorIndices[v],x=`${m.name}_${g}_${y}`,w=r[x];f.push(w)}const h=c.computeOutputShape(Vi(f)),d=GC(h),p=c.inboundNodes.indexOf(u);for(let v=0;v<d.length;v++){const m=`${c.name}_${p}_${v}`;r[m]=d[v]}}}const a=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const l=this.outputLayers[s],u=this.outputLayersNodeIndices[s],c=this.outputLayersTensorIndices[s],f=`${l.name}_${u}_${c}`;o.push(f)}for(let s=0;s<o.length;s++){const l=o[s];Zs(l in r),a.push(r[l])}return Vi(a)}runInternalGraph(e,n){n==null&&(n=Zh(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],f=n[l];r[u.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(lw);for(const l of i){const u=this.nodesByDepth[l];for(const c of u){const f=c.outboundLayer,h=c.inputTensors,d=c.outputTensors,p=new Array;for(const v of h)v.id in r&&p.push(r[v.id]);if(p.length===h.length){let v={},m,g,y,x;if(c.callArgs!=null&&(v=c.callArgs),p.length===1){const[w,b]=p[0];v.mask==null&&(v.mask=b),y=fn(f.call(w,v)),x=fn(f.computeMask(w,b)),m=[w],g=[b]}else m=p.map(w=>w[0]),g=p.map(w=>w[1]),v.mask==null&&(v.mask=g),y=fn(f.call(m,v)),x=fn(f.computeMask(m,g));if(f.activityRegularizer)throw new vt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<d.length;++w){const b=d[w],C=y[w],S=x[w];r[b.id]=[C,S]}}}}const a=[],o=[],s=[];for(const l of this.outputs){Zs(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];s.push(u.shape),a.push(u),o.push(c)}return[a,o,s]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof is?1:0;for(let a=0;a<i.inboundNodes.length;a++){const o=is.nodeKey(i,a);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new J("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new J(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new J(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return le(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=is.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const s=o.getClassName(),l=o.getConfig(),u=[];for(let f=0;f<o.inboundNodes.length;f++){const h=o.inboundNodes[f],d=is.nodeKey(o,f);let p={};if(this.containerNodes.has(d)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const v=[];for(let m=0;m<h.inboundLayers.length;m++){const g=h.inboundLayers[m],y=h.nodeIndices[m],x=h.tensorIndices[m],w=is.nodeKey(g,y);let b=n[w];b==null&&(b=0),v.push([g.name,b,x,p])}u.push(v)}}}const c={};c.name=o.name,c.className=s,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const s=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=is.nodeKey(s,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.inputLayersTensorIndices[o];i.push([s.name,c,f])}e.inputLayers=i;const a=[];for(let o=0;o<this.outputLayers.length;o++){const s=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=is.nodeKey(s,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.outputLayersTensorIndices[o];a.push([s.name,c,f])}return e.outputLayers=a,e}static fromConfig(e,n,r={},i=!1){const a={},o={};function s(m,g){m.name in o?o[m.name].push(g):o[m.name]=[g]}function l(m,g){const y=[];let x;for(const w of g){const b=w[0],C=w[1],S=w[2];if(x=w[3]==null?{}:w[3],!(b in a)){s(m,g);return}const D=a[b];if(D.inboundNodes.length<=C){s(m,g);return}const _=D.inboundNodes[C];y.push(_.outputTensors[S])}y.length>0&&m.apply(Vi(y),x)}function u(m){const g=m.name,y=ml(m,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),a[g]=y,m.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new J(`Corrupted configuration, expected array for nodeData: ${w}`);s(y,w)})}const c=n.name,f=n.layers;for(const m of f)u(m);for(;!jSe(o);)for(const m of f){const g=a[m.name];if(g.name in o){const y=o[g.name];delete o[g.name];for(const x of y)l(g,x)}}const h=[],d=[],p=n.inputLayers;for(const m of p){const g=m[0],y=m[1],x=m[2];Zs(g in a);const b=a[g].inboundNodes[y].outputTensors;h.push(b[x])}const v=n.outputLayers;for(const m of v){const g=m[0],y=m[1],x=m[2];Zs(g in a);const b=a[g].inboundNodes[y].outputTensors;d.push(b[x])}return new e({inputs:h,outputs:d,name:c})}get stateful(){if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){le(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o_e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(a=>{a in t?i.push(t[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function sY(t,e){return o_e(t,e,"classWeight")}async function lY(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=le(()=>{if(t.shape.length===1)return bh(t);if(t.shape.length===2){if(t.shape[1]>1)return W0(t,1);if(t.shape[1]===1)return ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());xt(i);const o=[];return a.forEach(s=>{if(n[s]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${s} exists in the data but not in classWeight`);o.push(n[s])}),pa(o,"float32")}else return null}function s_e(t,e){return te(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const l_e=32;function uY(t,e){let n,r;const i=e;n=i.xs,r=i.ys,V(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=AB("input",t.inputNames,n),o=AB("output",t.outputNames,r),s=a[0].shape[0];V(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),V(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<a.length;l++)V(a[l].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)V(o[l].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:a,ys:o}}function AB(t,e,n){if(n instanceof rr)return[n];if(Array.isArray(n))return V(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new J(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function u_e(t){if(t.length===3)throw new vt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function c_e(t,e,n){const r=n.batchesPerEpoch!=null;if(V(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),V(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),V(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),V(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),V(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let a,o;if(i)if(NB(n.validationData))V(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=u_e(n.validationData);a=m.xs,o=m.ys}const s=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(m=>"val_"+m)):u=l.slice();const c=QX(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:h,history:d}=JX(c,f,n.epochs,null,null,f_e(e,n),null,i,u);h.setModel(t),t.history=d,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;p<n.epochs;){const m={};await h.onEpochBegin(p);let g=0,y=0;for(r||(v=await e.iterator());!r||g<n.batchesPerEpoch;){const x=await v.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:w,ys:b}=uY(t,x.value),C={};C.batch=y,C.size=w[0].shape[0],await h.onBatchBegin(y,C);const S=[];if(n.classWeight!=null){const T=sY(n.classWeight,t.outputNames);for(let E=0;E<T.length;++E)S.push(await lY(b[E],null,T[E]))}const D=w.concat(b).concat(S),_=s(D);xt(D);for(let T=0;T<l.length;++T){const E=l[T],A=_[T];C[E]=A,dl(A)}await h.onBatchEnd(y,C),ZX(C),y++,g++}if(r?g>=n.batchesPerEpoch:x.done){if(i){let w;NB(n.validationData)?w=fn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=fn(t.evaluate(a,o,{batchSize:n.validationBatchSize==null?l_e:n.validationBatchSize,verbose:0}));for(let b=0;b<t.metricsNames.length;++b)m[`val_${t.metricsNames[b]}`]=w[b]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,m),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function f_e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function NB(t){return typeof t.iterator=="function"}function h_e(t){return typeof t.next=="function"}async function d_e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let a=[];if(n.verbose>0)throw new vt("Verbose mode is not implemented yet.");V(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=h_e(e)?e:await e.iterator();let s=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(a=le(()=>{if(u.value){const{xs:c,ys:f}=uY(t,u.value),h=c.concat(f),d=le(()=>i(h));if(xt(h),l===0)for(let v=0;v<d.length;++v)a.push(Vt(0));const p=h[0].shape[0];for(let v=0;v<d.length;++v){const m=d[v],g=a[v];a[v]=le(()=>Te(a[v],te(p,m))),l>0&&xt(g)}xt(d),s+=p,++l}return a}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<a.length;++u){const c=a[u];a[u]=Je(a[u],s),xt(c)}return Vi(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zE(t){V(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Hg(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Sh(r,e,n-e)):Sh(t,e,n-e)}function TI(t,e){return le(()=>t==null?null:Array.isArray(t)?t.map(n=>TI(n,e)):FX(t,e.dtype==="int32"?e:Fe(e,"int32")))}function BE(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function cY(t){const e=[];t instanceof rr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Y1(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Qo(t,e){if(t==null)return;const n=[];if(e instanceof rr)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const a=e[i];n.push(a.id)}const r=[];if(t instanceof rr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const a=t[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function p_e(t){return t instanceof rr}function EI(t){return Array.isArray(t)}function kB(t){return!p_e(t)&&!EI(t)}function IB(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(EI(t)&&t.length>0)o=!0;else if(kB(t)){for(const s in t)if(t.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new J(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let a;if(kB(t)){t=t,a=[];for(const o of e){if(t[o]==null)throw new J(`No data provided for "${o}". Need data for each key in: ${e}`);a.push(t[o])}}else if(EI(t)){if(t=t,t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new J(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=cY(a),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${s.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=s.shape[l],c=n[o][l];if(c!=null&&c>=0&&u!==c)throw new J(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return a}function v_e(t,e,n){const r=Ac(t.map(a=>a.shape[0]));r.sort();const i=Ac(e.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new J(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(i.length>1)throw new J(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!Bt(r,i))throw new J(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function g_e(t,e,n){const r=[w_,b_,K0];for(let i=0;i<t.length;++i){const a=t[i],o=e[i],s=n[i];if(o!=null){if(o===K0&&a.shape[a.shape.length-1]===1)throw new J(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=a.shape.slice(1),u=s.slice(1);for(let c=0;c<l.length;++c){const f=l[c],h=u[c];if(h!=null&&f!==h)throw new J(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function RB(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new J(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=s.shape[l],c=n[o][l];if(c!=null&&c!==u)throw new J(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}function m_e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const y_e="layers-model";class Xp extends is{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");t_e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=e_e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof uf))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new J(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(LE(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new J(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(s=>LE(s))}else{const o=LE(e.loss);this.outputs.forEach(s=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const s=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ch("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([s,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=m_e(e.metrics,this.outputNames),a=(o,s,l)=>{this.outputNames.length>1&&(s=this.outputNames[o]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([l,o])};Ch("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=i[o];(u=>{const c="";let f,h,d;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[o];m[m.length-1]===1||this.lossFunctions[o]===b_?["accuracy","acc"].indexOf(p)!==-1?h=tY:["crossentropy","ce"].indexOf(p)!==-1&&(h=GDe):this.lossFunctions[o]===XC?["accuracy","acc"].indexOf(p)!==-1?h=HDe:["crossentropy","ce"].indexOf(p)!==-1&&(h=iY):["accuracy","acc"].indexOf(p)!==-1?h=nY:["crossentropy","ce"].indexOf(p)!==-1&&(h=rY);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),d=h,f=c+g}else d=JDe(p),f=c+fw(p);let v;Ch(f,()=>{v=d}),a(o,f,v)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;zE(i);const a=!0,o=this.standardizeUserDataXY(e,n,a,i);try{const s=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,s,i,r.verbose,r.steps);return Vi(u)}finally{Qo(o[0],e),Qo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),d_e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let a;if(r!=null){if(a=null,n!=null)throw new J(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new J(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),o=new ic;if(e instanceof rr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new J(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new J(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const s=_m(a,o);return r?s:s[0]}retrieveSymbolicTensors(e){const n=Zh(null,e.length);let r=e.length;for(const i of this.layers){const a=Array.isArray(i.output)?i.output:[i.output],o=a.map(s=>s.name);for(let s=0;s<e.length;++s){const l=o.indexOf(e[s]);if(l!==-1&&(n[s]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((a,o)=>{a==null&&i.push(e[o])}),new J(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return le(()=>{const i=this.checkNumSamples(e);if(r)throw new vt("Verbose predictLoop() is not implemented yet.");const a=BE(i,n),o=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)le(()=>{const u=a[s][0],c=a[s][1],f=Hg(e,u,c),h=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)h.push({key:this.inputs[p],value:f[p]});else h.push({key:this.inputs[0],value:f});const d=new ic(h);return _m(this.outputs,d)}).forEach((u,c)=>o[c].push(u));return Vi(o.map(s=>Gi(s,0)))})}predict(e,n={}){const r=cY(e);RB(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return zE(i),this.predictLoop(r,i)}finally{Qo(r,e)}}predictOnBatch(e){RB(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Ao("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let o=0;o<this.feedOutputShapes.length;++o){const s=this.feedOutputShapes[o];this.feedLossFns[o]===XC?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=IB(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=IB(n,this.feedOutputNames,a,!1,"target"),v_e(e,n),g_e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new J(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,a=!0,o){const[s,l]=this.standardizeUserDataXY(e,n,a,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const c=sY(i,this.outputNames);u=[];for(let f=0;f<c.length;++f)u.push(await lY(l[f],null,c[f]))}return[s,l,u]}testLoop(e,n,r,i=0,a){return le(()=>{const o=this.checkNumSamples(n,r,a,"steps"),s=[];if(i>0)throw new vt("Verbose mode is not implemented yet.");if(a!=null)throw new vt("steps mode in testLoop() is not implemented yet");{const l=BE(o,r),u=pa(Is(0,o));for(let c=0;c<l.length;++c){const f=l[c][0],h=l[c][1],d=Sh(u,f,h-f),p=TI(n,d),v=e(p);if(c===0)for(let m=0;m<v.length;++m)s.push(Vt(0));for(let m=0;m<v.length;++m){const g=v[m];s[m]=Te(s[m],te(h-f,g))}}for(let c=0;c<s.length;++c)s[c]=Je(s[c],o)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let a=i;if(gB(e,i)>1){const o=gB(e.slice(0,r),i);a+=`_${o}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],s=()=>{const f=[];for(let v=0;v<this.inputs.length;++v)f.push({key:this.inputs[v],value:r[v]});const h=new ic(f),d=_m(this.outputs,h,{training:!0});let p;for(let v=0;v<this.lossFunctions.length;++v){const m=this.lossFunctions[v];let g=m(i[v],d[v]);a[v]!=null&&(g=s_e(g,a[v]));const y=ir(g);n.push(y),v===0?p=g:p=Te(p,g)}for(let v=0;v<this.metricsTensors.length;++v){let m;if(this.outputs.length>1&&v<this.outputs.length)m=n[v];else{const g=this.metricsTensors[v][0],y=this.metricsTensors[v][1];m=ir(g(i[y],d[y]))}dl(m),o.push(m)}return p=ir(p),this.calculateLosses().forEach(v=>{p=Te(p,v)}),p},l=this.collectedTrainableWeights.map(f=>f.read()),u=!0;return[this.optimizer_.minimize(s,u,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>le(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:i[u]});const s=new ic(o),l=_m(this.outputs,s);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],f=ir(c(a[u],l[u]));u===0?r=f:r=Te(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],f=this.metricsTensors[u][1],h=ir(c(a[f],l[f]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,a,o,s,l,u,c,f,h;try{const d=r.batchSize==null?32:r.batchSize;zE(d);const p=!1,v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,d);i=v[0],a=v[1],h=v[2];let m=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new vt("validationData including sample weights is not supported yet."):new J(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const _=!0,T=await this.standardizeUserData(l,u,null,null,_,d);c=T[0],f=T[1],g=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const _=Math.floor(i[0].shape[0]*(1-r.validationSplit)),T=i[0].shape[0];c=Hg(i,_,T),o=i,i=Hg(i,0,_),f=Hg(a,_,T),s=a,a=Hg(a,0,_),g=c.concat(f)}else r.validationSteps!=null&&(m=!0);const y=i.concat(a).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let b,C;m?(this.makeTestFunction(),b=this.testFunction,C=w.slice().concat(w.map(_=>"val_"+_))):(b=null,g=[],C=w.slice());const S=QX(r.callbacks,r.yieldEvery);return await this.fitLoop(x,y,w,d,r.epochs,r.verbose,S,b,g,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,Qo(i,e),Qo(a,n),Qo(o,e),Qo(s,n),Qo(c,l),Qo(f,u),h!=null&&xt(h)}}async fitLoop(e,n,r,i,a,o,s,l,u,c,f,h,d,p){i==null&&(i=32),a==null&&(a=1),c==null&&(c=!0),h==null&&(h=0);let v=!1;if(l!=null&&u!=null&&(v=!0),p!=null&&(v=!0,d==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,i,d,"steps_per_epoch");let g;m!=null&&(g=Is(0,m)),o==null&&(o=1);const{callbackList:y,history:x}=JX(s,o,a,h,m,d,i,v,f);y.setModel(this),this.history=x,await y.onTrainBegin(),this.stopTraining_=!1;for(let w=h;w<a;++w){await y.onEpochBegin(w);const b={};if(d!=null)throw new vt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new vt("batch shuffling is not implemneted yet");c&&Ume(g);const C=pa(g),S=BE(m,i);for(let D=0;D<S.length;++D){const _={};if(await y.onBatchBegin(D,_),le(()=>{const T=S[D][0],E=S[D][1],A=Sh(C,T,E-T);_.batch=D,_.size=E-T;const R=TI(n,A),$=e(R);for(let O=0;O<r.length;++O){const M=r[O],B=$[O];_[M]=B,dl(B)}if(D===S.length-1&&v){const O=this.testLoop(l,u,i);for(let M=0;M<r.length;++M){const B=r[M],P=O[M];dl(P),b["val_"+B]=P}}}),await y.onBatchEnd(D,_),ZX(_),this.stopTraining_)break}C.dispose()}if(await y.onEpochEnd(w,b),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return c_e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],a=r[1],s=this.makeTrainFunction()(i.concat(a)),l=[];for(const u of s){const c=await u.data();l.push(c[0])}return xt(s),Qo(r[0],e),Qo(r[1],n),Vi(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:a[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=hI().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-hI().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Yl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Yl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Yl(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Yl(fw(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Yl(fw(e)));{const e={};for(const n in this.metrics)e[n]=Yl(fw(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=JC(e.optimizer_config),r=ml(n);let i;if(typeof e.loss=="string")i=Jf(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>Jf(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=Jf(e.loss[o])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(o=>Jf(o));else if(e.metrics!=null){a={};for(const o in e.metrics)a[o]=Jf(e.metrics[o])}this.compile({loss:i,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=j0e(e);if(u.length===0)throw new J(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new J(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Q5(this.getNamedWeights(n)),i=!1,a=null,s={modelTopology:this.toJSON(a,i),format:y_e,generatedBy:`TensorFlow.js tfjs-layers v${oY}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){s.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:f}=await Q5(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=F0e([r.data,c])}return this.userDefinedMetadata!=null&&(EB(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=r.data,s.weightSpecs=r.specs,e.save(s)}setUserDefinedMetadata(e){EB(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Xp.className="Model";be(Xp);class fY extends Xp{}fY.className="Functional";be(fY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function x_e(t,e){if(e==null&&(e={}),typeof t=="string"){const n=q0e(t,e);if(n.length===0)n.push(NCe(t,e));else if(n.length>1)throw new J(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return w_e(t,void 0,e)}async function w_e(t,e,n){if(n==null&&(n={}),t.load==null)throw new J("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const a=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&a,s=ml(JC(i),e,o),l=r.trainingConfig;if(l!=null&&s.loadTrainingConfig(l),r.userDefinedMetadata!=null&&s.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new J("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:u,optimizerWeights:c}=b_e(r.weightData,r.weightSpecs);s.loadWeights(u,a),s.optimizer!=null&&c.length>0&&await s.optimizer.setWeights(c),xt(u),xt(c.map(f=>f.tensor))}return s}function b_e(t,e){const n=$0e(t,e),r={},i=[];return e.forEach(a=>{a.group==="optimizer"?i.push({name:a.name,tensor:n[a.name]}):r[a.name]=n[a.name]}),{modelWeights:r,optimizerWeights:i}}class X0 extends Xp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:m_("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new J(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof X0||e instanceof Xp;let r;if(n){if(r=e,r.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=bDe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new J(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=jX(this.outputs[0])}this.inboundNodes=[],new x_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Zh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ft(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Xp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ao("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ao("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ao("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ao("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let a,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");a=n}else V(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,o=n;const s=new e(o);if(!(s instanceof X0))throw new vt(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(const l of a){const c=ml(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),s.add(c)}return s}set stopTraining(e){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}X0.className="Sequential";be(X0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ji=class extends cg{getConfig(){return{}}};class hY extends Ji{apply(e,n=1){return sDe(e,n)}}hY.className="elu";be(hY);class dY extends Ji{apply(e){return AK(e)}}dY.className="selu";be(dY);class pY extends Ji{apply(e){return yd(e)}}pY.className="relu";be(pY);class vY extends Ji{apply(e){return le(()=>H0(6,yd(e)))}}vY.className="relu6";be(vY);class gY extends Ji{apply(e){return e}}gY.className="linear";be(gY);class mY extends Ji{apply(e){return sg(e)}}mY.className="sigmoid";be(mY);class yY extends Ji{apply(e){return uDe(e)}}yY.className="hardSigmoid";be(yY);class xY extends Ji{apply(e){return W1(e)}}xY.className="softplus";be(xY);class wY extends Ji{apply(e){return lDe(e)}}wY.className="softsign";be(wY);class bY extends Ji{apply(e){return aP(e)}}bY.className="tanh";be(bY);let EF=class extends Ji{apply(e,n=-1){return NP(e,n)}};EF.className="softmax";be(EF);class CY extends Ji{apply(e,n=-1){return wK(e,n)}}CY.className="logSoftmax";be(CY);class SY extends Ji{apply(e,n=1){return le(()=>te(sg(te(e,n)),e))}}SY.className="swish";be(SY);class DY extends Ji{apply(e){return le(()=>te(e,aP(W1(e))))}}DY.className="mish";be(DY);function Vc(t){return t.getClassName()}function VE(t,e={}){return X1(t,Co.getMap().classNameMap,e,"activation")}function Wc(t){if(t==null){const e={};return e.className="linear",e.config={},VE(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},VE(e)}else return t instanceof Ji?t:VE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C_e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class _Y extends cg{}class TY extends _Y{constructor(e){super(),C_e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return le(()=>{let n=Nr([1]);return this.hasL1&&(n=Te(n,Ke(te(this.l1,mi(e))))),this.hasL2&&(n=Te(n,Ke(te(this.l2,Z1(e))))),ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}TY.className="L1L2";be(TY);const $B={l1l2:"L1L2"};function rn(t){return dF(t)}function MB(t,e={}){return X1(t,Co.getMap().classNameMap,e,"regularizer")}function Sn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in $B?$B[t]:t,config:{}};return MB(n)}else return t instanceof _Y?t:MB(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class EY extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=rt(e);let r=yd(e);return this.maxValue!=null&&(r=Xa(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}EY.className="ReLU";be(EY);class AY extends Tt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=rt(e);return dP(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}AY.className="LeakyReLU";be(AY);class NY extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Cn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Sn(e.alphaRegularizer),this.alphaConstraint=yr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new J(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ft(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new vr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=rt(e),xP(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Nn(this.alphaInitializer),alphaRegularizer:rn(this.alphaRegularizer),alphaConstraint:mr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}NY.className="PReLU";be(NY);let kY=class extends Tt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new vt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=rt(e);return c_(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};kY.className="ELU";be(kY);class IY extends Tt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=rt(e);return te(r,Fe(to(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}IY.className="ThresholdedReLU";be(IY);class RY extends Tt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new EF().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){const r=rt(e);return this.softmax(r,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}RY.className="Softmax";be(RY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yp(t,e,n){if(typeof t=="number")return Zh(t,e);if(t.length!==e)throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!rDe(i))throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Ss(t,e,n,r,i=1){if(t==null)return t;const a=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-a+1,Math.floor((o+r-1)/r)}function Qs(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Bc([n-e,0]);else if(r==="same")t=t*e;else throw new J(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AF(t,e){return le(()=>(Yn(e),e==="channelsFirst"?Rt(t,[0,2,3,1]):t))}function $Y(t,e){return le(()=>(Yn(e),e==="channelsFirst"?Rt(t,[0,2,3,4,1]):t))}function S_e(t,e,n,r=1,i="valid",a,o=1){return le(()=>{if(a==null&&(a=Rs()),Yn(a),t.shape.length!==3)throw new J(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new J(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new J(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(a==="channelsFirst"&&(t=Rt(t,[0,2,1])),i==="causal")throw new vt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=fK(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(s=Ps(s,n)),s})}function OB(t,e,n,r=[1,1],i="valid",a,o,s=null){return le(()=>{if(a==null&&(a=Rs()),Yn(a),t.rank!==3&&t.rank!==4)throw new J(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new J(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=AF(t,a);if(i==="causal")throw new vt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Ebe({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),a==="channelsFirst"&&(l=Rt(l,[0,3,1,2])),l})}function D_e(t,e,n,r=[1,1,1],i="valid",a,o){return le(()=>{if(a==null&&(a=Rs()),Yn(a),t.rank!==4&&t.rank!==5)throw new J(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new J(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let s=$Y(t,a);if(i==="causal")throw new vt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=D1e(s,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(s=Ps(s,n)),a==="channelsFirst"&&(s=Rt(s,[0,4,1,2,3])),s})}class C_ extends Tt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",C_.verifyArgs(n),this.rank=e,Ir(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new vt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Yp(n.kernelSize,e,"kernelSize"),this.strides=Yp(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,no(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Yn(this.dataFormat),this.activation=Wc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Cn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=yr(n.biasConstraint),this.biasRegularizer=Sn(n.biasRegularizer),this.activityRegularizer=Sn(n.activityRegularizer),this.dilationRate=Yp(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new J(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new J(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new J(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Zs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!pF(e.kernelSize,"number",1,3))throw new J(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Vc(this.activation),useBias:this.useBias,biasInitializer:Nn(this.biasInitializer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),biasConstraint:mr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class fg extends C_{constructor(e,n){super(e,n),this.kernel=null,fg.verifyArgs(n),this.filters=n.filters,Ir(this.filters,"filters"),this.kernelInitializer=Cn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=yr(n.kernelConstraint),this.kernelRegularizer=Sn(n.kernelRegularizer)}build(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return le(()=>{e=rt(e);let r;const i=this.bias==null?null:this.bias.read(),a=IX(this.activation.getClassName());if(a!=null&&this.rank===2)r=OB(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=S_e(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=OB(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=D_e(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new vt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ft(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const o=Ss(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Nn(this.kernelInitializer),kernelRegularizer:rn(this.kernelRegularizer),kernelConstraint:mr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new J(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class tx extends fg{constructor(e){super(2,e),tx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!pF(e.kernelSize,"number",1,2))throw new J(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}tx.className="Conv2D";be(tx);class nx extends fg{constructor(e){super(3,e),nx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new J(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}nx.className="Conv3D";be(nx);class MY extends tx{constructor(e){if(super(e),this.inputSpec=[new vr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new vr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=rt(e);if(r.shape.length!==4)throw new J(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s;this.dataFormat==="channelsFirst"?(o=2,s=3):(o=1,s=2);const l=i[o],u=i[s],c=this.kernelSize[0],f=this.kernelSize[1],h=this.strides[0],d=this.strides[1],p=Qs(l,h,c,this.padding),v=Qs(u,d,f,this.padding),m=[a,p,v,this.filters];this.dataFormat!=="channelsLast"&&(r=Rt(r,[0,2,3,1]));let g=hK(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=Rt(g,[0,3,1,2])),this.bias!=null&&(g=Ps(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,a;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);const o=this.kernelSize[0],s=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=Qs(n[i],l,o,this.padding),n[a]=Qs(n[a],u,s,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}MY.className="Conv2DTranspose";be(MY);class OY extends nx{constructor(e){if(super(e),this.inputSpec=[new vr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ft(e),e.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new vr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=rt(e);if(r.shape.length!==5)throw new J(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s,l;this.dataFormat==="channelsFirst"?(l=2,o=3,s=4):(l=1,o=2,s=3);const u=i[l],c=i[o],f=i[s],h=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],v=this.strides[0],m=this.strides[1],g=this.strides[2],y=Qs(u,v,h,this.padding),x=Qs(c,m,d,this.padding),w=Qs(f,g,p,this.padding),b=[a,y,x,w,this.filters];this.dataFormat!=="channelsLast"&&(r=Rt(r,[0,2,3,4,1]));let C=E1e(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Rt(C,[0,4,1,2,3])),this.bias!==null&&(C=Ps(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=Ft(e);const n=e.slice();let r,i,a,o;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3,o=4):(r=4,i=1,a=2,o=3);const s=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],f=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[i]=Qs(n[i],c,s,this.padding),n[a]=Qs(n[a],f,l,this.padding),n[o]=Qs(n[o],h,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}OY.className="Conv3DTranspose";be(OY);class PY extends fg{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new J(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Cn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Sn(n.depthwiseRegularizer),this.depthwiseConstraint=yr(n.depthwiseConstraint),this.pointwiseInitializer=Cn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Sn(n.pointwiseRegularizer),this.pointwiseConstraint=yr(n.pointwiseConstraint)}build(e){if(e=Ft(e),e.length<this.rank+2)throw new J(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new vr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{e=rt(e);let r;if(this.rank===1)throw new vt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Rt(e,[0,2,3,1])),r=NK(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ps(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Rt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Nn(this.depthwiseInitializer),e.pointwiseInitializer=Nn(this.pointwiseInitializer),e.depthwiseRegularizer=rn(this.depthwiseRegularizer),e.pointwiseRegularizer=rn(this.pointwiseRegularizer),e.depthwiseConstraint=mr(this.depthwiseConstraint),e.pointwiseConstraint=mr(this.pointwiseConstraint),e}}PY.className="SeparableConv";class FY extends PY{constructor(e){super(2,e)}}FY.className="SeparableConv2D";be(FY);class S_ extends fg{constructor(e){super(1,e),S_.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!pF(e.kernelSize,"number",1,1))throw new J(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}S_.className="Conv1D";be(S_);class LY extends Tt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return le(()=>{if(e=rt(e),this.dataFormat==="channelsLast"){const r=cw(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return cw(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=cw(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return cw(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}LY.className="Cropping2D";be(LY);class zY extends Tt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,eDe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return le(()=>{let r=rt(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=Rt(r,[0,2,3,1]);const a=this.size[0]*i[2],o=this.size[1]*i[3],s=this.interpolation==="nearest"?tu.resizeNearestNeighbor(r,[a,o]):tu.resizeBilinear(r,[a,o]);return Rt(s,[0,3,1,2])}else{const a=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?tu.resizeNearestNeighbor(r,[a,o]):tu.resizeBilinear(r,[a,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}zY.className="UpSampling2D";be(zY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function __e(t,e,n=[1,1],r="valid",i,a){return le(()=>{i==null&&(i=Rs()),Yn(i);let o=AF(t,i);if(t.rank!==4)throw new J(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new J(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=uP(o,e,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(o=Rt(o,[0,3,1,2])),o})}class BY extends C_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Cn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=yr(e.depthwiseConstraint),this.depthwiseRegularizer=Sn(e.depthwiseRegularizer)}build(e){if(e=Ft(e),e.length<4)throw new J(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{e=rt(e);let r=__e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ps(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ft(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Ss(n,this.kernelSize[0],this.padding,this.strides[0]),o=Ss(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,a,o]:[e[0],a,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Nn(this.depthwiseInitializer),e.depthwiseRegularizer=rn(this.depthwiseRegularizer),e.depthwiseConstraint=mr(this.depthwiseRegularizer),e}}BY.className="DepthwiseConv2D";be(BY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VY(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function WY(t,e,n,r=!1,i,a,o=!1,s=!1){return le(()=>{const l=e.shape.length;if(l<3)throw new J(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Is(2,l));if(e=Rt(e,u),a!=null)throw new vt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Fe(Fe(i,"bool"),"float32"),i.rank===l-1&&(i=Bi(i,-1)),i=Rt(i,u)),r&&(e=Xh(e,0),i!=null&&(i=Xh(i,0)));const c=[];let f,h=n;const d=e.shape[0],p=Yh(e);let v;i!=null&&(v=Yh(i));for(let g=0;g<d;++g){const y=p[g],x=le(()=>t(y,h));if(i==null)f=x[0],h=x[1];else{const w=le(()=>{const b=v[g],C=it(Lo(b),b),S=Te(te(x[0],b),te(h[0],C)),D=h.map((_,T)=>Te(te(x[1][T],b),te(_,C)));return{output:S,newStates:D}});f=w.output,h=w.newStates}s&&c.push(f)}let m;return s&&(m=zc(c,1)),[f,m,h]})}class cf extends Tt{constructor(e){super(e);let n;if(e.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new IF({cells:e.cell}):n=e.cell,n.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new vr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Is(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){CI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const a=[];for(const o of n)a.push([e[0],o]);return[i].concat(a)}else return i}computeMask(e,n){return le(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new vt("Constants support is not implemented in RNN yet.");CI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new vr({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Bt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),a))throw new J(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(o=>new vr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new Ys("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Nr([r,i])):this.states_=[Nr([r,this.cell.stateSize])];else if(e==null)xt(this.states_),this.keptStates!=null&&(xt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Nr([r,i])):this.states_[0]=Nr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):xt(this.states_);for(let i=0;i<this.states_.length;++i){const a=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,s=[r,o];if(!Bt(a.shape,s))throw new J(`State ${i} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>dl(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=VY(e,r,i,this.numConstants);e=a.inputs,r=a.initialState,i=a.constants;let o=[],s=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new vr({shape:u.shape}));s=s.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof il){const u=[e].concat(o),c=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let a=n==null?null:n.initialState;e=rt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new J(`RNN Layer has ${o} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:i},u=WY((p,v)=>{const m=this.cell.call([p].concat(v),s);return[m[0],m.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],f=u[1],h=u[2];this.stateful&&this.resetStates(h,i);const d=this.returnSequences?f:c;return this.returnState?[d].concat(h):d})}getInitialState(e){return le(()=>{let n=Nr(e.shape);return n=Ke(n,[1,2]),n=Y1(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?wI(n,[1,r]):n):this.cell.stateSize>1?[wI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===cf.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,a=ml(i,r);return new e(Object.assign(n,{cell:a}))}}cf.className="RNN";be(cf);class D_ extends Tt{}class NF extends D_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ir(this.units,"units"),this.activation=Wc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=yr(e.kernelConstraint),this.recurrentConstraint=yr(e.recurrentConstraint),this.biasConstraint=yr(e.biasConstraint),this.dropout=Nv([1,Bc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nv([1,Bc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new J(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uc({ones:()=>Lo(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uc({ones:()=>Lo(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let a;const o=this.dropoutMask,s=this.recurrentDropoutMask;o!=null?a=gl(te(e,o),this.kernel.read()):a=gl(e,this.kernel.read()),this.bias!=null&&(a=Ps(a,this.bias.read())),s!=null&&(r=te(r,s));let l=Te(a,gl(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Vc(this.activation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:mr(this.kernelConstraint),recurrentConstraint:mr(this.recurrentConstraint),biasConstraint:mr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}NF.className="SimpleRNNCell";be(NF);class UY extends cf{constructor(e){e.cell=new NF(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return new e(n)}}UY.className="SimpleRNN";be(UY);class kF extends D_{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ir(this.units,"units"),this.activation=Wc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=yr(e.kernelConstraint),this.recurrentConstraint=yr(e.recurrentConstraint),this.biasConstraint=yr(e.biasConstraint),this.dropout=Nv([1,Bc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nv([1,Bc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ft(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new J(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uc({ones:()=>Lo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uc({ones:()=>Lo(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,l,u;0<this.dropout&&this.dropout<1&&(e=te(e,a[0]));let c=gl(e,this.kernel.read());this.useBias&&(c=Ps(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=te(i,o[0]));const f=this.recurrentKernel.read(),[h,d]=Wa(f,[2*this.units,this.units],f.rank-1),p=gl(i,h),[v,m,g]=Wa(c,3,c.rank-1),[y,x]=Wa(p,2,p.rank-1);s=this.recurrentActivation.apply(Te(v,y)),l=this.recurrentActivation.apply(Te(m,x));const w=gl(te(l,i),d);u=this.activation.apply(Te(g,w));const b=Te(te(s,i),te(Te(1,jn(s)),u));return[b,b]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Vc(this.activation),recurrentActivation:Vc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:mr(this.kernelConstraint),recurrentConstraint:mr(this.recurrentConstraint),biasConstraint:mr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}kF.className="GRUCell";be(kF);class GY extends cf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new kF(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}GY.className="GRU";be(GY);class __ extends D_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ir(this.units,"units"),this.activation=Wc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Sn(e.kernelRegularizer),this.recurrentRegularizer=Sn(e.recurrentRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.kernelConstraint=yr(e.kernelConstraint),this.recurrentConstraint=yr(e.recurrentConstraint),this.biasConstraint=yr(e.biasConstraint),this.dropout=Nv([1,Bc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Nv([1,Bc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ft(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,o=this.units;i=new(n=class extends jo{apply(l,u){const c=a.apply([o]),f=new gF().apply([o]),h=a.apply([o*2]);return yB(yB(c,f),h)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new J(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uc({ones:()=>Lo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uc({ones:()=>Lo(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let l,u,c,f;0<this.dropout&&this.dropout<1&&(e=te(e,o[0]));let h=gl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=te(i,s[0])),h=Te(h,gl(i,this.recurrentKernel.read())),this.useBias&&(h=Ps(h,this.bias.read()));const[d,p,v,m]=Wa(h,4,h.rank-1);l=this.recurrentActivation.apply(d),u=this.recurrentActivation.apply(p),c=Te(te(u,a),te(l,this.activation.apply(v))),f=this.recurrentActivation.apply(m);const g=te(f,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Vc(this.activation),recurrentActivation:Vc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),recurrentInitializer:Nn(this.recurrentInitializer),biasInitializer:Nn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:rn(this.kernelRegularizer),recurrentRegularizer:rn(this.recurrentRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:mr(this.kernelConstraint),recurrentConstraint:mr(this.recurrentConstraint),biasConstraint:mr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}__.className="LSTMCell";be(__);class HY extends cf{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new __(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}HY.className="LSTM";be(HY);class IF extends D_{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return le(()=>{e=e;let r=e.slice(1);const i=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1));i.reverse();const a=[];let o;for(let s=0;s<this.cells.length;++s){const l=this.cells[s];r=i[s],s===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),a.push(o.slice(1))}r=[];for(const s of a.slice().reverse())r.push(...s);return[o[0]].concat(r)})}build(e){CI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{Ch(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const a of n.cells)i.push(ml(a,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return SI(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,a=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],a[o]])}SF(n)}}IF.className="StackedRNNCells";be(IF);function Uc(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=t,o=()=>a!=null?a(e(),n):LX(e(),n),s=()=>Q1(o,e,r);return!i||i<=1?dl(s().clone()):Array(i).fill(void 0).map(s).map(u=>dl(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var T_e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class jY extends cf{constructor(e){if(e.unroll)throw new vt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new vt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new vr({ndim:5})]}call(e,n){return le(()=>{if(this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new J("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return le(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)],o=Nr(a);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new Ys("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)];if(r[0]==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Nr(a)):this.states_=[Nr(a)];else if(e==null)xt(this.states_),this.keptStates!=null&&(xt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Nr(a)):this.states_[0]=Nr(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):xt(this.states_);for(let s=0;s<this.states_.length;++s){const l=e[s],u=a;if(!Bt(l.shape,u))throw new J(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[s]=l}}this.states_=this.states_.map(s=>dl(s.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:a,strides:o,dilationRate:s}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],f=Ss(u,i[0],a,o[0],s[0]),h=Ss(c,i[1],a,o[1],s[1]);return[...e.slice(0,2),...l?[r,f,h]:[f,h,r]]}}jY.className="ConvRNN2D";class RF extends __{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:a,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Ir(this.filters,"filters"),this.kernelSize=Yp(r,2,"kernelSize"),this.kernelSize.forEach(l=>Ir(l,"kernelSize")),this.strides=Yp(i||1,2,"strides"),this.strides.forEach(l=>Ir(l,"strides")),this.padding=a||"valid",no(this.padding),this.dataFormat=o||"channelsLast",Yn(this.dataFormat),this.dilationRate=Yp(s||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ir(l,"dilationRate"))}build(e){var n;e=Ft(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],a=4,o=this.kernelSize.concat([i,this.filters*a]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends jo{apply(h,d){const p=u.apply([c]),v=gd([c]),m=u.apply([c*2]);return vF([p,v,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return le(()=>{if(e.length!==3)throw new J(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],a=e[1],o=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uc({ones:()=>Lo(i),rate:this.dropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(U,H,F)=>!H||!H[F]?U:te(H[F],U);let c=u(i,l,0),f=u(i,l,1),h=u(i,l,2),d=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uc({ones:()=>Lo(a),rate:this.recurrentDropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let v=u(a,p,0),m=u(a,p,1),g=u(a,p,2),y=u(a,p,3);const x=3,[w,b,C,S]=Wa(this.kernel.read(),s,x),[D,_,T,E]=this.useBias?Wa(this.bias.read(),s):[null,null,null,null];c=this.inputConv(c,w,D,this.padding),f=this.inputConv(f,b,_,this.padding),h=this.inputConv(h,C,T,this.padding),d=this.inputConv(d,S,E,this.padding);const[A,R,$,O]=Wa(this.recurrentKernel.read(),s,x);v=this.recurrentConv(v,A),m=this.recurrentConv(m,R),g=this.recurrentConv(g,$),y=this.recurrentConv(y,O);const M=this.recurrentActivation.apply(Te(c,v)),B=this.recurrentActivation.apply(Te(f,m)),P=Te(te(B,o),te(M,this.activation.apply(Te(h,g)))),z=te(this.recurrentActivation.apply(Te(d,y)),this.activation.apply(P));return[z,z,P]})}getConfig(){const e=super.getConfig(),n=T_e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const a=Kh(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ps(a,r,this.dataFormat):a}recurrentConv(e,n){return Kh(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}RF.className="ConvLSTM2DCell";be(RF);class qY extends jY{constructor(e){const n=new RF(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}qY.className="ConvLSTM2D";be(qY);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $F extends Tt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,a=this.getNoiseShape(r);return Q1(()=>LX(r,this.rate,a,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}$F.className="Dropout";be($F);class KY extends $F{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}KY.className="SpatialDropout1D";be(KY);class XY extends Tt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Ir(this.units,"units"),this.activation=Wc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Cn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Cn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=yr(e.kernelConstraint),this.biasConstraint=yr(e.biasConstraint),this.kernelRegularizer=Sn(e.kernelRegularizer),this.biasRegularizer=Sn(e.biasRegularizer),this.activityRegularizer=Sn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ft(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ft(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e),i=IX(this.activation.getClassName());let a;return i!=null?a=gl(r,this.kernel.read(),i,this.bias?this.bias.read():null):(a=gl(r,this.kernel.read()),this.bias!=null&&(a=Ps(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:Vc(this.activation),useBias:this.useBias,kernelInitializer:Nn(this.kernelInitializer),biasInitializer:Nn(this.biasInitializer),kernelRegularizer:rn(this.kernelRegularizer),biasRegularizer:rn(this.biasRegularizer),activityRegularizer:rn(this.activityRegularizer),kernelConstraint:mr(this.kernelConstraint),biasConstraint:mr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}XY.className="Dense";be(XY);class YY extends Tt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ft(e);for(const n of e.slice(1))if(n==null)throw new J(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Nc(e,1)]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=rt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let a=2;a<r.rank;++a)i.push(a);i.push(1),r=Rt(r,i)}return oDe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}YY.className="Flatten";be(YY);class ZY extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Wc(e.activation)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Vc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}ZY.className="Activation";be(ZY);class QY extends Tt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return le(()=>(e=rt(e),iDe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}QY.className="RepeatVector";be(QY);class JY extends Tt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let a=1,o=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(o===null)o=l;else throw new J("Can only specifiy one unknown dimension.");else a*=u}const s=Nc(e);if(o!==null){if(a===0||s%a!==0)throw new J(r);i[o]=s/a}else if(s!==a)throw new J(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e),i=r.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ie(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}JY.className="Reshape";be(JY);class eZ extends Tt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Is(1,e.dims.length+1);if(!Bt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new vr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ft(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return Rt(rt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}eZ.className="Permute";be(eZ);class tZ extends Tt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=rt(e),i=-1;return dI(VC(r,this.maskValue),i)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e),i=-1,a=!0,o=dI(VC(r,this.maskValue),i,a);return te(r,Fe(o,r.dtype))})}}tZ.className="Masking";be(tZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nZ extends Tt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(fn(e.inputLength))}this.inputDim=e.inputDim,Ir(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ir(this.outputDim,"outputDim"),this.embeddingsInitializer=Cn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Sn(e.embeddingsRegularizer),this.activityRegularizer=Sn(e.activityRegularizer),this.embeddingsConstraint=yr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return le(()=>this.maskZero?(e=rt(e),VC(e,$t(e))):null)}computeOutputShape(e){if(e=Ft(e),this.inputLength==null)return[...e,this.outputDim];const n=fn(this.inputLength);if(n.length!==e.length-1)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const a=n[i],o=e[i+1];if(a!=null&&o!=null&&a!==o)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=rt(e);r.dtype!=="int32"&&(r=vl(r,"int32"));const i=FX(this.embeddings.read(),ie(r,[r.size]));return ie(i,Ft(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Nn(this.embeddingsInitializer),embeddingsRegularizer:rn(this.embeddingsRegularizer),activityRegularizer:rn(this.activityRegularizer),embeddingsConstraint:mr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}nZ.className="Embedding";be(nZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bd extends Tt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new vt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const a=e[e.length-n.length+i],o=n[i];if(a==null||o==null||a<0||o<0)r.push(null);else if(a===1)r.push(o);else if(o===1)r.push(a);else{if(a!==o)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ft(e)]),e=e,e.length<2)throw new J(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=Ac(n),n.length>1)throw new J(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const o=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(a=>a.length);e.indexOf(null)===-1&&Ac(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return le(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(a=>a.rank);if(i.indexOf(null)===-1){const a=Bc(i);for(let o of e){const s=o.rank;for(let l=0;l<a-s;++l)o=Y1(o,1);r.push(o)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,f=c[0],h=c.slice(1).concat([f]);let d=ie(l,[f].concat(Nc(c.slice(1))));d=Rt(d,[1,0]),d=ie(d,h),r.push(d),a=!0}else if(u>1){const c=Is(1,u).concat([0]);r.push(Rt(l,c)),a=!0}else r.push(l)}let o=this.mergeFunction(r);const s=o.rank;if(a){if(s==null){const l=o.shape,u=l.length,c=l[u-1],f=[c].concat(l.slice(0,l.length-1));o=ie(Rt(ie(o,[-1,c]),[1,0]),f)}else if(s>1){const l=[s-1].concat(Is(0,s-1));o=Rt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=Ac(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return le(()=>{if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an Array");if(!Array.isArray(e))throw new J("`inputs` should be an Array");if(n.length!==e.length)throw new J(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Bi(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=gu(r,n[i]);return r})}}class rZ extends bd{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Te(n,e[r]);return n})}}rZ.className="Add";be(rZ);class iZ extends bd{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=te(n,e[r]);return n})}}iZ.className="Multiply";be(iZ);class aZ extends bd{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Te(n,e[r]);return te(1/e.length,n)})}}aZ.className="Average";be(aZ);class oZ extends bd{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=lf(n,e[r]);return n})}}oZ.className="Maximum";be(oZ);class sZ extends bd{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=H0(n,e[r]);return n})}}sZ.className="Minimum";be(sZ);class lZ extends bd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const a=e[i].slice();a.splice(this.axis,1);let o=!1;for(const s of r)if(Bt(s,a)){o=!0;break}o||r.push(a)}if(r.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return le(()=>vF(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[i]==null||a[i]==null){r[i]=null;break}r[i]+=a[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new J("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new J(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return le(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Fe(Lo(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Bi(n[o],-1)):i.push(n[o]);const a=Gi(i,this.axis);return cK(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}lZ.className="Concatenate";be(lZ);function jg(t,e){for(;t<0;)t+=e;return t}function E_e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new vt("batchDot is not implemented for tensors of 4D or higher rank yet");if(V(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),V(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new vt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const a=n;return le(()=>{let o;if(r>i){o=r-i;const l=[];for(let u=0;u<o;++u)l.push(1);e=ie(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=ie(t,t.shape.concat(l))}else o=0;let s;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?s=Ke(te(t,e),a[0]):s=Ke(te(Rt(t,[1,0]),e),a[1]);else{const l=a[0]!==t.shape.length-1,u=a[1]===e.shape.length-1;s=zt(t,e,l,u)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let c=l;c<l+o;++c)u.push(c);s=G1(s,u)}return s.shape.length===1&&(s=Bi(s,1)),s})}class uZ extends bd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){V(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new vt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new J(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new J(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((a,o)=>jg(a,e[o].shape.length)):i=[jg(this.axes,n.shape.length),jg(this.axes,r.shape.length)],this.normalize&&(n=KC(n,i[0]),r=KC(r,i[1])),E_e(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[jg(this.axes,e.length),jg(this.axes,n.length)],r}computeOutputShape(e){V(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new vt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}uZ.className="Dot";be(uZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e);return Q1(()=>Te(y_(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}cZ.className="GaussianNoise";be(cZ);class fZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=rt(e);return this.rate>0&&this.rate<1?Q1(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return te(r,y_(r.shape,1,a))},()=>r,n.training||!1):r})}}fZ.className="GaussianDropout";be(fZ);class hZ extends Tt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||rt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Q1(()=>{const a=rt(e),o=1.6732632423543772,s=1.0507009873554805,l=-o*s;let u=vd(U1(r),this.rate);u=vl(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,f=-c*l*this.rate,h=Te(te(a,u),te(Te(u,-1),l));return Te(te(h,c),f)},()=>rt(e),n.training||!1)}return e})}}hZ.className="AlphaDropout";be(hZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y0(t,e,n,r,i,a=.001){let o;if(t.rank===2)o=e1e(t,e,n,r,i,a);else if(t.rank===3)o=n1e(t,e,n,r,i,a);else if(t.rank===4)o=i1e(t,e,n,r,i,a);else throw new vt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function A_e(t,e,n,r,i=.001){return le(()=>{const a=gP(t,r),o=a.mean,s=a.variance;return[Y0(t,o,s,n,e,i),o,s]})}function N_e(t,e,n,r,i=.001){return le(()=>{const a=gP(t,r),o=a.mean,s=a.variance,l=[];for(const p of Is(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=ie(o,l),c=ie(s,l),f=e==null?null:ie(e,l),h=n==null?null:ie(n,l);return[Y0(t,u,c,h,f,i),o,s]})}function k_e(t,e,n,r,i=.001){return Bt(r.slice().sort(),Is(0,t.rank-1))?A_e(t,e,n,r,i):N_e(t,e,n,r,i)}class dZ extends Tt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cn(e.betaInitializer||"zeros"),this.gammaInitializer=Cn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Cn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Cn(e.movingVarianceInitializer||"ones"),this.betaConstraint=yr(e.betaConstraint),this.gammaConstraint=yr(e.gammaConstraint),this.betaRegularizer=Sn(e.betaRegularizer),this.gammaRegularizer=Sn(e.gammaRegularizer)}build(e){e=Ft(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new J(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new vr({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training,i=rt(e),a=i.shape,o=a.length,s=Is(0,o),l=this.axis>=0?this.axis:this.axis+o;s.splice(l,1);const u=Zh(1,o);u[l]=a[l];const c=s.slice();c.sort();const f=!Bt(c,Is(0,o).slice(0,o-1)),h=()=>{if(f){const y=ie(this.movingMean.read(),u),x=ie(this.movingVariance.read(),u),w=this.center?ie(this.beta.read(),u):null,b=this.scale?ie(this.gamma.read(),u):null;return Y0(i,y,x,w,b,this.epsilon)}else return Y0(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[d,p,v]=k_e(i,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(y,x,w)=>{le(()=>{const b=1-w,C=y.read(),S=te(it(C,x),b);y.write(it(C,S))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,v,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nn(this.betaInitializer),gammaInitializer:Nn(this.gammaInitializer),movingMeanInitializer:Nn(this.movingMeanInitializer),movingVarianceInitializer:Nn(this.movingVarianceInitializer),betaRegularizer:rn(this.betaRegularizer),gammaRegularizer:rn(this.gammaRegularizer),betaConstraint:mr(this.betaConstraint),gammaConstraint:mr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}dZ.className="BatchNormalization";be(dZ);class pZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cn(e.betaInitializer||"zeros"),this.gammaInitializer=Cn(e.gammaInitializer||"ones"),this.betaRegularizer=Sn(e.betaRegularizer),this.gammaRegularizer=Sn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ft(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Ac(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=rt(e),i=r.shape,a=i.length;return le(()=>{let{mean:s,variance:l}=gP(r,this.axis,!0);const u=Zh(1,a);for(const v of this.axis)u[v]=i[v];const c=v=>v!=null&&v.shape.length!==a?ie(v,u):v;let f=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const d=[],p=[];for(let v=0;v<a;++v)this.axis.indexOf(v)!==-1?(d.push(i[v]),p.push(1)):(d.push(1),p.push(i[v]));return s=gs(s,d),l=gs(l,d),f!=null&&(f=gs(f,p)),h!=null&&(h=gs(h,p)),Y0(r,s,l,h,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nn(this.betaInitializer),gammaInitializer:Nn(this.gammaInitializer),betaRegularizer:rn(this.betaRegularizer),gammaRegularizer:rn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}pZ.className="LayerNormalization";be(pZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I_e(t,e,n){return le(()=>{if(t.rank!==4)throw new J(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Rs()),n!=="channelsLast"&&n!=="channelsFirst")throw new J(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],mP(t,r)})}class vZ extends Tt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Rs():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new J(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new J(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new J(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new vr({ndim:4})]}computeOutputShape(e){e=Ft(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return le(()=>I_e(rt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}vZ.className="ZeroPadding2D";be(vZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function T_(t,e,n,r,i,a){return le(()=>{Yn(i),$X(a),no(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Rs()),a==null&&(a="max"),t=AF(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=vP(t,e,n,s):o=iP(t,e,n,s),i==="channelsFirst"&&(o=Rt(o,[0,3,1,2])),o})}function gZ(t,e,n,r,i,a){return le(()=>{Yn(i),$X(a),no(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Rs()),a==null&&(a="max"),t=$Y(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=Gxe(t,e,n,s):o=Gye(t,e,n,s),i==="channelsFirst"&&(o=Rt(o,[0,4,1,2,3])),o})}class mZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new J(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Ir(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new J(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Ir(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,no(this.padding),this.inputSpec=[new vr({ndim:3})]}computeOutputShape(e){e=Ft(e);const n=Ss(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return le(()=>{this.invokeCallHook(e,n),e=Y1(rt(e),2);const r=this.poolingFunction(rt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return G1(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class yZ extends mZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),T_(e,n,r,i,a,"max")}}yZ.className="MaxPooling1D";be(yZ);class xZ extends mZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),T_(e,n,r,i,a,"avg")}}xZ.className="AveragePooling1D";be(xZ);class wZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new J(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Ir(this.poolSize,"poolSize"),Ir(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),no(this.padding),this.inputSpec=[new vr({ndim:4})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ss(n,this.poolSize[0],this.padding,this.strides[0]),r=Ss(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(rt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class bZ extends wZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),T_(e,n,r,i,a,"max")}}bZ.className="MaxPooling2D";be(bZ);class CZ extends wZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),T_(e,n,r,i,a,"avg")}}CZ.className="AveragePooling2D";be(CZ);class SZ extends Tt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new J(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ir(this.poolSize,"poolSize"),Ir(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),no(this.padding),this.inputSpec=[new vr({ndim:5})]}computeOutputShape(e){e=Ft(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ss(n,this.poolSize[0],this.padding,this.strides[0]),r=Ss(r,this.poolSize[1],this.padding,this.strides[1]),i=Ss(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(rt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class DZ extends SZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),gZ(e,n,r,i,a,"max")}}DZ.className="MaxPooling3D";be(DZ);class _Z extends SZ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return Yn(a),no(i),gZ(e,n,r,i,a,"avg")}}_Z.className="AveragePooling3D";be(_Z);class TZ extends Tt{constructor(e){super(e),this.inputSpec=[new vr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new vt}}class EZ extends TZ{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=rt(e);return ir(r,1)})}}EZ.className="GlobalAveragePooling1D";be(EZ);class AZ extends TZ{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=rt(e);return Cs(r,1)})}}AZ.className="GlobalMaxPooling1D";be(AZ);class NZ extends Tt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),this.inputSpec=[new vr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new vt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class kZ extends NZ{call(e,n){return le(()=>{const r=rt(e);return this.dataFormat==="channelsLast"?ir(r,[1,2]):ir(r,[2,3])})}}kZ.className="GlobalAveragePooling2D";be(kZ);class IZ extends NZ{call(e,n){return le(()=>{const r=rt(e);return this.dataFormat==="channelsLast"?Cs(r,[1,2]):Cs(r,[2,3])})}}IZ.className="GlobalMaxPooling2D";be(IZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let RZ=class extends Tt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,a=ml(i,r);delete n.layer;const o={layer:a};return Object.assign(o,n),new e(o)}};class $Z extends RZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ft(e),e.length<3)throw new J(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ft(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return le(()=>(e=rt(e),WY((o,s)=>[rt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}$Z.className="TimeDistributed";be($Z);function R_e(t){wd(JSe,"BidirectionalMergeMode",t)}const $_e="concat";class MZ extends RZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ml(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=ml(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?$_e:e.mergeMode,R_e(this.mergeMode),e.weights)throw new vt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):Vi(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=VY(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],s=[];if(r!=null){const u=r.length;if(u%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(f=>new vr({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push(...c)}if(i!=null)throw new vt("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof il;for(const u of o)if(u instanceof il!==l)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),c=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n.initialState;let i,a;if(r==null)i=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),this.returnSequences&&(a=Xh(a,1));let s;return this.mergeMode==="concat"?s=vF([i,a]):this.mergeMode==="sum"?s=Te(i,a):this.mergeMode==="ave"?s=te(.5,Te(i,a)):this.mergeMode==="mul"?s=te(i,a):this.mergeMode==null&&(s=[i,a]),this.returnState?this.mergeMode==null?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ch(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ch(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ml(n.layer);if(delete n.layer,n.numConstants!=null)throw new vt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}MZ.className="Bidirectional";be(MZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OZ extends Tt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>(e=rt(e),e.dtype!=="float32"&&(e=vl(e,"float32")),Te(te(e,this.scale),this.offset)))}}OZ.className="Rescaling";be(OZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:M_e,cropAndResize:O_e}=tu;class PZ extends Tt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,a,o,s,l){return le(()=>{let u,c=!1;const f=n/o,h=r/s,d=(i+n)/o,p=(a+r)/s,v=[f,h,d,p],m=[];e.rank===3?(c=!0,u=zc([e])):u=e;for(let b=0;b<u.shape[0];b++)m.push(v);const g=Zm(m,[m.length,4]),y=j0(0,m.length,1,"int32"),w=O_e(u,g,y,[i,a],"nearest");return vl(c?rt(Yh(w)):w,l)})}upsize(e,n,r,i){return le(()=>{const a=M_e(e,[n,r]);return vl(a,i)})}call(e,n){return le(()=>{const r=rt(e),i=r.dtype,a=r.shape,o=a[a.length-3],s=a[a.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return s!==this.width&&(u=Math.floor((s-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,o,s,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}PZ.className="CenterCrop";be(PZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P_e(t,e,n,r){let i=rt(t);if(i.dtype!=="int32"&&(i=vl(i,"int32")),e==="int")return i;const a=i.shape;if(i.rank===0&&(i=Bi(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Bi(i,-1)),i.rank>2)throw new J(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),s=i;let l;if(typeof r<"u"&&e==="count"?l=tB(s,r,n,o):l=tB(s,[],n,o),e!=="tfIdf")return l;if(r)return te(l,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FZ extends Tt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ft(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return le(()=>{e=rt(e),e.dtype!=="int32"&&(e=vl(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=rt(n.countWeights)}const i=Cs(e),a=zC(e),o=to(this.numTokens,i).bufferSync().get(0),s=vd(a,0).bufferSync().get(0);if(!(o&&s))throw new J(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return P_e(e,this.outputMode,this.numTokens,r)})}}FZ.className="CategoryEncoding";be(FZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const F_e=["bilinear","nearest"],PB=new Set(F_e);class LZ extends Tt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(PB.has(e.interpolation))this.interpolation=e.interpolation;else throw new J(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return tu.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return tu.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...PB]} are supported`)})}}LZ.className="Resizing";be(LZ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zZ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}zZ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class BZ extends Tt{constructor(e){super(e),this.randomGenerator=new zZ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}BZ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const L_e=["bilinear","nearest"],FB=new Set(L_e);class VZ extends BZ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new J(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new J(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(FB.has(r))this.interpolation=r;else throw new J(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ft(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return le(()=>{const r=rt(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=U1([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return tu.resizeBilinear(e,o);case"nearest":return tu.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...FB]} are supported`)}})}}VZ.className="RandomWidth";be(VZ);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_e=ue();z_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var LB;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(LB||(LB={}));var zB;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(zB||(zB={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var BB;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(BB||(BB={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ve(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B_e=FK;class E_ extends oO{nextDataId(){return E_.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new oq(this,qs())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ue().get("IS_NODE")&&Pa(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Hy(r[0])){const a=r.map(o=>Ec(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,a){this.data.set(e,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return mu(i,a)}return Xme(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Lc(i));return Dt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Dt(e.shape,e.dtype,n)}makeOutput(e,n,r){return qs().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Li();return e(),{kernelMs:Li()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ve([e],"where");const n=this.readSync(e.dataId);return B_e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}E_.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const V_e=t=>{const{x:e}=t.inputs,n=t.backend;Ve(e,"abs");let r=new Float32Array(he(e.shape));const i=n.data.get(e.dataId).values;return r=WZ(i),n.makeOutput(r,e.shape,e.dtype)},W_e={kernelName:aD,backendName:"cpu",kernelFunc:V_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zn(t){return(e,n,r,i,a)=>{const o=dt(e,n),s=o.length,l=je(o),u=he(o),c=ii(a,u),f=e.length,h=n.length,d=je(e),p=je(n),v=Tv(e,o),m=Tv(n,o);if(v.length+m.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<c.length;++g){const y=ag(g,s,l),x=y.slice(-f);v.forEach(S=>x[S]=0);const w=hl(x,f,d),b=y.slice(-h);m.forEach(S=>b[S]=0);const C=hl(b,h,p);c[g]=t(r[w],i[C])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const U_e={kernelName:xO,backendName:"cpu",kernelFunc:ca};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2(t,e,n="float32"){if(n==="complex64"){const i=e2(t,e,"float32"),a=e2(t,e,"float32");return ca({inputs:{real:i,imag:a},backend:t})}const r=ai(he(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const G_e={kernelName:h1,backendName:"cpu",kernelFunc:Sl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const H_e={kernelName:UO,backendName:"cpu",kernelFunc:Qh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=pd([0],n),[a,o]=Zn((s,l)=>s!==l?1:0)(e,[],t,i,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Gc(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Sl({inputs:{x:i},backend:n});const c=e2(n,i.shape,i.dtype),f=Gc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),h=ca({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),h}if(i.dtype==="complex64"){const c=Qh({inputs:{input:i},backend:n}),f=Gc({inputs:{x:c},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(c),f}if(!uq(i.dtype,a)){const c=Sl({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:a}}const o=n.data.get(i.dataId).values,[s,l,u]=UZ(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,u)}const j_e={kernelName:Jy,backendName:"cpu",kernelFunc:Gc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function br(t,e,n,r){return n==null?({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;Ve([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,f=o.dtype==="string"?yu(u):u,h=o.dtype==="string"?yu(c):c,d=r||o.dtype,[p,v]=e(o.shape,s.shape,f,h,d);return l.makeTensorInfo(v,d,p)}:({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Gc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),f=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,d=l.data.get(f.dataId).values,p=l.data.get(h.dataId).values,v=Gc({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,x=l.data.get(g.dataId).values,w=l.data.get(y.dataId).values,[b,C,S]=n(o.shape,s.shape,d,p,x,w),D=l.makeTensorInfo(S,"float32",b),_=l.makeTensorInfo(S,"float32",C),T=ca({inputs:{real:D,imag:_},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(D),l.disposeIntermediateTensorInfo(_),T}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,f=r||o.dtype,[h,d]=e(o.shape,s.shape,u,c,f);return l.makeTensorInfo(d,f,h)}}}function MF(t){return(e,n,r,i,a,o)=>{const s=dt(e,n),l=he(s),u=s.length,c=je(s),f=ii("float32",l),h=ii("float32",l),d=Tv(e,s),p=Tv(n,s),v=mu(r,i),m=mu(a,o),g=e.length,y=je(e),x=n.length,w=je(n);if(d.length+p.length===0)for(let b=0;b<f.length;b++){const C=b%v.length,S=b%m.length,D=t(v[C*2],v[C*2+1],m[S*2],m[S*2+1]);f[b]=D.real,h[b]=D.imag}else for(let b=0;b<f.length;b++){const C=ag(b,u,c),S=C.slice(-g);d.forEach(A=>S[A]=0);const D=hl(S,g,y),_=C.slice(-x);p.forEach(A=>_[A]=0);const T=hl(_,x,w),E=t(v[D*2],v[D*2+1],m[T*2],m[T*2+1]);f[b]=E.real,h[b]=E.imag}return[f,h,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GZ=Zn((t,e)=>t+e),q_e=MF((t,e,n,r)=>({real:t+n,imag:e+r})),kv=br(og,GZ,q_e),K_e={kernelName:og,backendName:"cpu",kernelFunc:kv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OF(t,e,n,r,i){const a=he(r),o=ai(i,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(a>0?o[l]+=e[s]:o[l]+=1)}return o}function HZ(t,e,n,r=!1){const i=t.shape[0],a=t.shape[1],o=Dt([i,n],e.dtype);for(let s=0;s<i;s++)for(let l=0;l<a;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jZ=Zn((t,e)=>t&e),X_e=br(yO,jZ),Y_e={kernelName:yO,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(t){return(e,n,r)=>{const i=Hn(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t,e,n){const r=Rl(e);return ff(t,r,n)}function ff(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;Ve(o,t);const s=a,l=s.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=yu(l)}else u=l;const c=n||o.dtype,f=e(u,c,i);return s.makeTensorInfo(o.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qZ=Rl(t=>Math.ceil(t)),Z_e=ff(e1,qZ),Q_e={kernelName:e1,backendName:"cpu",kernelFunc:Z_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZ(t,e,n,r){const i=Hn(n,he(e));if(r&&n!=="string"){let a=0;t.forEach(o=>{const s=he(o.shape);i.set(o.vals,a),a+=s})}else{let a=0;t.forEach(o=>{const s=n==="string"?yu(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+a;for(let f=0;f<o.shape[1];++f)i[c+f]=s[l++]}a+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZ=Zn((t,e)=>t===e?1:0),YZ=br(wD,XZ,null,"bool"),J_e={kernelName:wD,backendName:"cpu",kernelFunc:YZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ=Rl(t=>Math.exp(t)),QZ=ff(s1,ZZ,"float32"),eTe={kernelName:s1,backendName:"cpu",kernelFunc:QZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JZ=Rl(t=>Math.expm1(t)),tTe=ff(l1,JZ),nTe={kernelName:l1,backendName:"cpu",kernelFunc:tTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eQ=Rl(t=>Math.floor(t)),rTe=ff(u1,eQ),iTe={kernelName:u1,backendName:"cpu",kernelFunc:rTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ=Zn((t,e)=>Math.floor(t/e)),aTe=br(c1,tQ,null,"int32"),oTe={kernelName:c1,backendName:"cpu",kernelFunc:aTe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e,n,r,i,a,o,s,l){const u=Dt([r,a],n);for(let c=0;c<r;c++){const f=[];let h=0;for(let d=0;d<i;d++){const p=t[c*i+d];h+=p*o[d],f.push(p)}if(h<0||h>=l/a)throw new Error(`Invalid indices: ${f} does not index into ${s}`);for(let d=0;d<a;d++)u.values[c*a+d]=e.get(...e.indexToLoc(h*a+d))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(t,e,n){const r=Dt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),s=o[0],l=o[2],u=e.locToIndex([s,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iQ=Zn((t,e)=>t>e?1:0),sTe=br(DD,iQ,null,"bool"),lTe={kernelName:DD,backendName:"cpu",kernelFunc:sTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ=Zn((t,e)=>t>=e?1:0),uTe=br(f1,aQ,null,"bool"),cTe={kernelName:f1,backendName:"cpu",kernelFunc:uTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oQ=Zn((t,e)=>t<e?1:0),fTe=br(TD,oQ,null,"bool"),hTe={kernelName:TD,backendName:"cpu",kernelFunc:fTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQ=Zn((t,e)=>t<=e?1:0),dTe=br(ED,sQ,null,"bool"),pTe={kernelName:ED,backendName:"cpu",kernelFunc:dTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(t,e,n){const r=(e-t)/(n-1),i=ai(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ=Rl(t=>Math.log(t)),vTe=ff(g1,uQ),gTe={kernelName:g1,backendName:"cpu",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(t,e,n,r){const i=ii(r,he(n));for(let a=0;a<i.length;++a){const o=a*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}i[a]=s}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ=Zn((t,e)=>Math.max(t,e)),mTe=br(y1,fQ),yTe={kernelName:y1,backendName:"cpu",kernelFunc:mTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hQ=Zn((t,e)=>Math.min(t,e)),xTe=br(x1,hQ),wTe={kernelName:x1,backendName:"cpu",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PF=Zn((t,e)=>t*e),bTe=MF((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),A_=br(b1,PF,bTe),CTe={kernelName:b1,backendName:"cpu",kernelFunc:A_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(t,e,n){const r=rf(-1,n);return PF([],e,r,t,n)}function STe(t){const{inputs:e,backend:n}=t,{x:r}=e;Ve(r,"neg");const i=n.data.get(r.dataId).values,[a,o]=dQ(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}const DTe={kernelName:LD,backendName:"cpu",kernelFunc:STe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pQ=Zn((t,e)=>t!==e?1:0),_Te=br(zD,pQ,null,"bool"),TTe={kernelName:zD,backendName:"cpu",kernelFunc:_Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FF(t,e,n,r,i){const a=e.length,o=he(e),s=je(e),l=je(i),u=ii(n,he(i));for(let c=0;c<o;++c){const f=ag(c,a,s),h=new Array(f.length);for(let p=0;p<h.length;p++)h[p]=f[r[p]];const d=hl(h,a,l);u[d]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ki(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;Ve(i,"transpose");const o=i.shape.length,s=new Array(o);for(let f=0;f<s.length;f++)s[f]=i.shape[a[f]];const l=r.data.get(i.dataId).values,u=FF(l,i.shape,i.dtype,a,s);return{dataId:r.write(u,s,i.dtype),shape:s,dtype:i.dtype}}const ETe={kernelName:qp,backendName:"cpu",kernelFunc:Ki};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(t,e,n,r){const[i,a]=$r(t,r),o=_a(e,"int32"),s=ai(he(i),o),l=he(a);for(let u=0;u<s.length;++u){const c=u*l;let f=1;for(let h=0;h<l;++h)f*=n[c+h];s[u]=f}return{outVals:s,outShape:i,outDtype:o}}function ATe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Ve(i,"prod");const s=i.shape.length,l=_t(a,i.shape),u=In(l,s);let c=l,f=i;const h=[];u!=null&&(f=Ki({inputs:{x:i},backend:n,attrs:{perm:u}}),h.push(f),c=Xn(c.length,s));const d=n.data.get(f.dataId).values,{outVals:p,outShape:v,outDtype:m}=vQ(f.shape,f.dtype,d,c);let g=v;return o&&(g=or(v,l)),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(g,m,p)}const NTe={kernelName:HD,backendName:"cpu",kernelFunc:ATe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const a=ag(i,e.length,je(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function ITe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function RTe(t,e,n,r){const i=[];let a=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);ITe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let f=1;f<l+1;++f)s[u].push(f*c)}for(let u=0;u<t.length;++u){let c=t[u],f=t[u]+1;for(let h=0;h<n.length;++h){const d=n[h],p=h+e.length-1;if(p>=0){const v=s[p],m=v[v.length-1]-d[c];for(let g=c;g<f;++g)s[p].push(d[g+1]+m)}c=d[c],f=d[f]}f!==c&&(i.push([c,f]),a+=f-c)}return{outSplits:s,valueSlices:i,numValues:a}}function $Te(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Hn("int32",r);e.push(i),t[n].forEach((a,o)=>i[o]=a)}return e}function VB(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function MTe(t,e,n,r,i,a){const o=VB(e,2)[1],s=VB(a,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let f=0;f<r;++f)i[l*s+f]=t[c*o+f];++l}}function OTe(t,e,n,r,i){const a=e.slice();a[0]=i;const o=Hn(n,he(a)),s=t.length,l=s===0?0:s/e[0];return MTe(t,e,r,l,o,a),[o,a]}function gQ(t,e,n,r,i,a,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(kTe(a,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:f,numValues:h}=RTe(a,o,t,u),d=$Te(c),p=OTe(n,r,i,f,h);return[d,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WB=2147483647;function mQ(t,e,n,r,i,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=e.length===0,l=i.length===0,u=o.length===0,c=[];s||c.push(e[0]),l||c.push(i[0]),u||c.push(o[0]);for(let m=1;m<c.length;++m)if(c[m]!==c[m-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],h=Hn("int32",f+1);h[0]=0;for(let m=0;m<f;++m){const g=s?t[0]:t[m],y=l?r[0]:r[m],x=u?a[0]:a[m];if(x===0)throw new Error("Requires delta != 0");let w;if(x>0&&y<g||x<0&&y>g)w=0;else if(w=Math.ceil(Math.abs((y-g)/x)),w>WB)throw new Error(`Requires ((limit - start) / delta) <= ${WB}`);h[m+1]=h[m]+w}const d=h[f],p=Hn(n,d);let v=0;for(let m=0;m<f;++m){const g=h[m+1]-h[m];let y=s?t[0]:t[m];const x=u?a[0]:a[m];for(let w=0;w<g;++w)p[v++]=y,y+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oo=hs;class t2{constructor(e,n,r,i,a,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=iX(c),this.raggedRank=aX(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===oo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===oo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case oo.VALUE_ROWIDS:return t2.getMaxWidthValueRowID(n);case oo.ROW_SPLITS:return t2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${oo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const a=e[i+1]-e[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],a=0;for(let o=1;o<n;++o){const s=e[o];s!==i&&(i=s,a=Math.max(o-r,a),r=o)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return GB(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;oX(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=rX(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),a=[];let o=0;for(let s=0;s<i;++s,o+=n)a.push(o);for(let s=i;s<e;++s)a.push(-1);return V(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,i){const a=e.length,o=[];for(let s=0;s<a-1;++s){const l=e[s+1]-e[s];let u=Math.min(i,l),c=n[s];c===-1&&(u=0);for(let f=0;f<u;++f)o.push(c),c+=r;for(let f=0;f<l-u;++f)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const a=e.length,o=[];if(a===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<a;++c){const f=e[c];if(f===l)u>=0&&(++s,s<i?u+=r:u=-1);else{if(s=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case oo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case oo.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${oo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case oo.FIRST_DIM_SIZE:return e[0];case oo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case oo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${oo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const a=GB(r,!1),o=Hn(this.valuesDType,he(a));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],r[u]);this.setOutput(this.raggedRank,l,o,a)}return[a,o]}setOutput(e,n,r,i){if(r.length===0)return;const a=this.values,o=r;let s=i.slice();s=s.slice(e+1);const l=he(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;le(()=>{const v=ie(c,p);c=Qm(v,s).dataSync()})}let f=0,h=0,d=0;for(let p=0;p<=u;++p){let v=p<u?n[p]:-1;if(v===d){++d;continue}if(h<d){const m=a.subarray(f*l),g=o.subarray(h*l),y=(d-h)*l;UB(g,m,y)}if(p>=u){const m=r.length;v=Math.floor(m/l)}if(v>d)if(this.defaultValue.length===1)o.subarray(d*l,v*l).fill(this.defaultValue[0]),d=v;else for(;v>d;){const m=o.slice(d*l);UB(m,c,l),++d}v<0?(f=p+1,h=d):(f=p,h=d,d=h+1)}}}function UB(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function GB(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function yQ(t,e,n,r,i,a,o,s,l,u){return new t2(t,e,n,r,i,a,o,s,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e,n,r){const i=t===e,a=t<e&&n<0,o=e<t&&n>1;if(i||a||o)return ai(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=ai(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQ=Rl(t=>1/Math.sqrt(t)),PTe=ff(E1,wQ),FTe={kernelName:E1,backendName:"cpu",kernelFunc:PTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ch(t,e,n,r,i,a,o,s,l,u){const c=[r/i,i],f=t.values,h=e.values;if(r===0)return Dt(n,e.dtype);const d=l instanceof Br?l:Dt(c,e.dtype);typeof l=="string"||typeof l=="number"?d.values.fill(l):typeof l=="boolean"&&d.values.fill(+l);for(let p=0;p<a;p++){const v=[];let m=0;for(let g=0;g<o;g++){const y=f[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let g=0;g<i;g++)u?d.values[m*i+g]+=h[p*i+g]:d.values[m*i+g]=e.rank===0?h[0]:h[p*i+g]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTe=Rl(t=>1/(1+Math.exp(-t))),bQ=Kt(R1,t=>1/(1+Math.exp(-t))),zTe={kernelName:R1,backendName:"cpu",kernelFunc:bQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e,n,r,i){const a=GP(r,e,n),o=he(n),s=je(r);if(a){const f=HP(e,s);return i==="string"?t.slice(f,f+o):t.subarray(f,f+o)}const l=i==="string"?yu(t):t,u=Dt(r,i,l),c=Dt(n,i);for(let f=0;f<c.size;++f){const h=c.indexToLoc(f),d=h.map((p,v)=>p+e[v]);c.set(u.get(...d),...h)}return i==="string"?TX(c.values):c.values}function Jh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r;Ve(i,"slice");const[s,l]=d_(i,a,o);WP(i,s,l);const u=n.data.get(i.dataId).values,c=CQ(u,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const BTe={kernelName:ZD,backendName:"cpu",kernelFunc:Jh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQ(t,e,n,r,i,a,o){const s=e[0],l=a[0],u=new Array(l),c=new Array(s),f=e[1];if(l===0){if(s!==0)throw new Error(dX(s));const m=Hn(n,0),g=Hn(i,0);return[m,[0,f],g,u,c]}let h=!0,d=0;const p=new Array(l).fill(0);for(let m=0;m<s;++m){const g=t[m*f];if(g<0)throw new Error(pX(m,g));if(g>=l)throw new Error(vX(m,g,l));++p[g],h=h&&g>=d,d=g}let v=!0;for(let m=0;m<l;++m){const g=p[m]===0;u[m]=g,v=v&&!g,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(v&&h){const m=t,g=r;for(let y=0;y<s;++y)c[y]=y;return[m,[s,f],g,u,c]}else{const m=p[l-1],g=Hn(n,m*f),y=Hn(i,m),x=new Array(l).fill(0);for(let w=0;w<s;++w){const b=t[w*f],C=x[b],S=(b===0?0:p[b-1])+C;x[b]++;for(let D=0;D<f;++D)g[S*f+D]=t[w*f+D];y[S]=r[w],c[w]=S}for(let w=0;w<l;++w)if(x[w]===0){const C=w===0?0:p[w-1];g[C*f+0]=w;for(let S=1;S<f;++S)g[C*f+S]=0;y[C]=o}return[g,[m,f],y,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQ(t,e,n,r,i){const a=he(r),o=e[0],s=i.length,l=[];let u=1,c=-1;for(let m=0;m<s;++m){const g=i[m];if(g===-1){if(c!==-1)throw new Error(gX(c,m));c=m,l.push(1)}else{if(g<0)throw new Error(mX(m,g));u*=g,l.push(g)}}if(c!==-1){if(u<=0)throw new Error(yX());const m=Math.trunc(a/u);if(u*m!==a)throw new Error(xX(r,l));l[c]=m}if(he(l)!==a)throw new Error(wX(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let m=h-2;m>=0;--m)d[m]=d[m+1]*r[m+1]}const p=[];if(s>0){p[s-1]=1;for(let m=s-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}const v=Hn(n,o*s);for(let m=0;m<o;++m){let g=0;for(let y=0;y<h;++y)g+=t[m*h+y]*d[y];for(let y=0;y<s;++y)v[m*s+y]=Math.trunc(g/p[y]),g%=p[y]}return[v,[o,s],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LF(t,e,n,r,i,a=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],f=s>0?i[s-1]+1:0;if(f<0)throw new Error(yI());const h=e.slice();h[0]=f;const d=h.reduce((x,w)=>x*w,1),p=Hn(n,d);if(s===0)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error(yI());let v=0,m=1,g=0,y=i[v];for(;;){let x=0;if(m<s){if(x=i[m],y===x){++m;continue}if(y>=x)throw new Error(bX())}if(y<0||y>=f)throw new Error(CX(y,f));y>g&&p.fill(o,g*u,y*u);for(let w=v;w<m;++w){const b=r[w];if(b<0||b>=l[0])throw new Error(SX(w,r[w],l[0]));for(let C=0;C<u;C++)p[y*u+C]+=t[b*u+C]}if(a)for(let w=0;w<u;w++)p[y*u+w]/=m-v;if(v=m,++m,g=y+1,y=x,m>s)break}return g<f&&p.fill(o,g*u,f*u),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe=Rl(t=>Math.sqrt(t)),WTe=Kt(M1,t=>Math.sqrt(t)),UTe={kernelName:M1,backendName:"cpu",kernelFunc:WTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Q=Zn((t,e)=>{const n=t-e;return n*n}),GTe=br(O1,_Q),HTe={kernelName:O1,backendName:"cpu",kernelFunc:GTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TQ=Rl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),jTe=ff(qO,TQ),qTe={kernelName:qO,backendName:"cpu",kernelFunc:jTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQ(t,e,n,r){const i=Dt(t,e.dtype);for(let a=0;a<i.size;a++){const o=i.indexToLoc(a),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];i.set(e.get(...s),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KTe{constructor(e,n,r,i,a,o){this.separator=Ec(e),this.nGramWidths=n,this.leftPad=Ec(r),this.rightPad=Ec(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,a,o){for(let s=0;s<a;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(a-(s+1))),f=o-(u+c),h=n+(u>0?0:s-l);let d=0;d+=u*this.leftPad.length;for(let y=0;y<f;++y)d+=e[h+y].length;d+=c*this.rightPad.length;const p=u+c+f-1;d+=p*this.separator.length,r[i+s]=new Uint8Array(d);const v=r[i+s];let m=0;const g=y=>y.forEach(x=>v[m++]=x);for(let y=0;y<u;++y)g(this.leftPad),g(this.separator);for(let y=0;y<f-1;++y)g(e[h+y]),g(this.separator);if(f>0){g(e[h+f-1]);for(let y=0;y<c;++y)g(this.separator),g(this.rightPad)}else{for(let y=0;y<c-1;++y)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=i-1,o=Hn("int32",i);if(r===0||i===0){const l=new Array(r);for(let u=0;u<=a;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=a;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[a]);for(let l=0;l<a;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(f=>{const h=n[l+1]-n[l],d=this.getNumNGrams(h,f);this.createNGrams(e,u,s,c,d,f),c+=d}),this.preserveShort&&c===o[l]){const f=n[l+1]-n[l];if(f===0)continue;const h=f+2*this.padWidth,d=1;this.createNGrams(e,u,s,c,d,h)}}return[s,o]}}function AQ(t,e,n,r,i,a,o,s){return new KTe(n,r,i,a,o,s).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=t.indexOf(a);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const o=t.subarray(i,a);(!n||o.length!==0)&&r.push(o),i=a+1}}function NQ(t,e,n){const r=t.length,i=[];let a=0,o=0;const s=new Array(r);for(let h=0;h<r;++h){const d=i.length;XTe(t[h],e,n,i);const p=i.length-d;s[h]=p,a+=p,o=Math.max(o,p)}const l=Hn("int32",a*2),u=new Array(a),c=[r,o];let f=0;for(let h=0;h<r;++h)for(let d=0;d<s[h];++d)l[f*2]=h,l[f*2+1]=d,u[f]=i[f],++f;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(t,e){const n=Hn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=p0e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQ=Zn((t,e)=>t-e),YTe=MF((t,e,n,r)=>({real:t-n,imag:e-r})),zF=br(P1,IQ,YTe),ZTe={kernelName:P1,backendName:"cpu",kernelFunc:zF};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Dt(n,t.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=a[l]%t.shape[l];const s=t.locToIndex(o);r.values[i]=t.values[s]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tm=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function $Q(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),h=Math.max(n,Math.floor(e-l*c/s+f)),d=Math.min(r,Math.floor(e+(s-l)*c/s+f));$Q(t,e,h,d)}const i=t[e];let a=n,o=r;for(ip(t,n,e),Tm(t[r],i)>0&&ip(t,n,r);a<o;){for(ip(t,a,o),a++,o--;Tm(t[a],i)<0;)a=a+1;for(;Tm(t[o],i)>0;)o=o-1}Tm(t[n],i)===0?ip(t,n,o):(o=o+1,ip(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function MQ(t,e,n,r,i){const a=e[e.length-1],[o,s]=[t.length/a,a],l=ii(n,o*r),u=ii("int32",o*r);for(let f=0;f<o;f++){const h=f*s,d=t.subarray(h,h+s);let p=new Array(d.length);d.forEach((y,x)=>p[x]={value:y,index:x}),r<p.length&&($Q(p,r),p=p.slice(0,r)),i&&p.sort(Tm);const v=f*r,m=l.subarray(v,v+r),g=u.subarray(v,v+r);for(let y=0;y<r;y++)m[y]=p[y].value,g[y]=p[y].index}const c=e.slice();return c[c.length-1]=r,[Dt(c,n,l),Dt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t,e,n,r){const i=_t(e,n)[0],a=[1,n[0],1];for(let p=0;p<i;p++)a[0]*=n[p];a[1]=n[i];for(let p=i+1;p<n.length;p++)a[2]*=n[p];const o=new Map,s=new Int32Array(n[i]),l=new Br(a,r,t),u=[],c=a[0]===1&&a[2]===1;for(let p=0;p<n[i];p++){let v;if(c)v=t[p].toString();else{const g=[];for(let y=0;y<a[0];y++)for(let x=0;x<a[2];x++)g.push(l.get(y,p,x));v=g.join(",")}const m=o.get(v);if(m!=null)s[p]=m;else{const g=o.size;o.set(v,g),s[p]=g,u.push(p)}}const f=a.slice();f[1]=o.size;const h=new Br(f,r);u.forEach((p,v)=>{for(let m=0;m<a[0];m++)for(let g=0;g<a[2];g++)h.set(l.get(m,p,g),m,v,g)});const d=n.slice();return d[i]=f[1],{outputValues:h.values,outputShape:d,indices:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:GZ,bincountImpl:OF,bincountReduceImpl:HZ,bitwiseAndImpl:jZ,castImpl:UZ,ceilImpl:qZ,concatImpl:KZ,equalImpl:XZ,expImpl:ZZ,expm1Impl:JZ,floorDivImpl:tQ,floorImpl:eQ,gatherNdImpl:nQ,gatherV2Impl:rQ,greaterEqualImpl:aQ,greaterImpl:iQ,lessEqualImpl:sQ,lessImpl:oQ,linSpaceImpl:lQ,logImpl:uQ,maxImpl:cQ,maximumImpl:fQ,minimumImpl:hQ,multiplyImpl:PF,negImpl:dQ,notEqualImpl:pQ,prodImpl:vQ,raggedGatherImpl:gQ,raggedRangeImpl:mQ,raggedTensorToTensorImpl:yQ,rangeImpl:xQ,rsqrtImpl:wQ,scatterImpl:ch,sigmoidImpl:LTe,simpleAbsImpl:WZ,sliceImpl:CQ,sparseFillEmptyRowsImpl:SQ,sparseReshapeImpl:DQ,sparseSegmentReductionImpl:LF,sqrtImpl:VTe,squaredDifferenceImpl:_Q,staticRegexReplaceImpl:TQ,stridedSliceImpl:EQ,stringNGramsImpl:AQ,stringSplitImpl:NQ,stringToHashBucketFastImpl:kQ,subImpl:IQ,tileImpl:RQ,topKImpl:MQ,transposeImpl:FF,uniqueImpl:OQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lK("cpu",()=>new E_,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQ=Kt(a1,t=>t>=0?t:Math.exp(t)-1),JTe={kernelName:a1,backendName:"cpu",kernelFunc:PQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r;Ve([i],"leakyRelu");const o=he(i.shape),s=n.data.get(i.dataId).values,l=ii("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?a*s[u]:s[u];return n.makeTensorInfo(i.shape,"float32",l)}const eEe={kernelName:_D,backendName:"cpu",kernelFunc:FQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe=Zn((t,e)=>t<0?e*t:t);function LQ(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Ve([r,i],"prelu");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,l]=tEe(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(l,"float32",s)}const nEe={kernelName:GD,backendName:"cpu",kernelFunc:LQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zQ=Kt(D1,t=>Math.max(0,t)),rEe={kernelName:D1,backendName:"cpu",kernelFunc:zQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ=Kt(_1,t=>Math.min(Math.max(0,t),6)),iEe={kernelName:_1,backendName:"cpu",kernelFunc:BQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2(t,e,n,r,i){if(n==="linear")return Sl({inputs:{x:e},backend:t});if(n==="relu")return zQ({inputs:{x:e},backend:t});if(n==="elu")return PQ({inputs:{x:e},backend:t});if(n==="relu6")return BQ({inputs:{x:e},backend:t});if(n==="prelu")return LQ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return FQ({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return bQ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=he(i.shape),s=lq(a,o),l=he(s);V(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;c.shape=s,f.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const aEe={kernelName:jD,backendName:"cpu",kernelFunc:cn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;Ve([i,a],"matMul");const l=i.shape.length,u=a.shape.length,c=o?i.shape[l-2]:i.shape[l-1],f=s?a.shape[u-1]:a.shape[u-2],h=o?i.shape[l-1]:i.shape[l-2],d=s?a.shape[u-2]:a.shape[u-1],p=i.shape.slice(0,-2),v=a.shape.slice(0,-2),m=he(p),g=he(v),x=dt(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,d]);V(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[m,c,h]:[m,h,c],b=s?[g,d,f]:[g,f,d],C=cn({inputs:{x:i},backend:n,attrs:{shape:w}}),S=cn({inputs:{x:a},backend:n,attrs:{shape:b}}),D=o?C.shape[1]:C.shape[2],_=o?C.shape[2]:C.shape[1],T=s?S.shape[1]:S.shape[2],E=Math.max(m,g),A=n.data.get(C.dataId).values,R=n.data.get(S.dataId).values,$=je(C.shape),O=je(S.shape),[M,B,P]=o?[$[0],1,$[1]]:[$[0],$[1],1],[z,U,H]=s?[1,O[1],O[0]]:[O[1],1,O[0]],F=_*T,W=Dt([E,_,T],C.dtype),j=W.values,K=n.blockSize;for(let Y=0;Y<E;Y++){const Z=Y%m,se=Y%g;for(let ee=0;ee<_;ee+=K){const oe=Math.min(ee+K,_);for(let ce=0;ce<T;ce+=K){const ve=Math.min(ce+K,T);for(let ye=0;ye<D;ye+=K){const _e=Math.min(ye+K,D);for(let Ie=ee;Ie<oe;Ie++)for(let Ne=ce;Ne<ve;Ne++){let We=0;for(let qe=ye;qe<_e;qe++){const ft=A[Z*M+Ie*B+qe*P],at=R[qe*z+Ne*U+se*H];We+=ft*at}j[Y*F+(Ie*T+Ne)]+=We}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(x,W.dtype,W.values)}const oEe={kernelName:cD,backendName:"cpu",kernelFunc:VQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;let h,d,p;const v=[];h=VQ({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(d=kv({inputs:{a:h,b:o},backend:n}),v.push(h),h=d),c&&(p=n2(n,h,c,s,f),v.push(h),h=p);for(const g of v)n.disposeIntermediateTensorInfo(g);return h}const lEe={kernelName:$C,backendName:"cpu",kernelFunc:sEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe=Kt(jy,t=>Math.acos(t)),cEe={kernelName:jy,backendName:"cpu",kernelFunc:uEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fEe=Kt(qy,t=>Math.acosh(t)),hEe={kernelName:qy,backendName:"cpu",kernelFunc:fEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t){const{inputs:e,backend:n}=t,r=e;Ve(e,"addN");const i=r.map(s=>n.data.get(s.dataId).values),a=Dt(r[0].shape,r[0].dtype),o=a.values;for(let s=0;s<r.length;s++){const l=i[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const pEe={kernelName:hO,backendName:"cpu",kernelFunc:dEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Ve(i,"all");const s=_t(a,i.shape);let l=s;const u=In(l,i.shape.length);let c=i;u!=null&&(c=Ki({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Xn(l.length,i.shape.length)),Gr("all",l,c.shape.length);const[f,h]=$r(c.shape,l),d=he(h),p=ai(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];x=x&&b}p[g]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=or(f,s),y=cn({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const gEe={kernelName:dO,backendName:"cpu",kernelFunc:vEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Ve(i,"any");const s=_t(a,i.shape);let l=s;const u=In(l,i.shape.length);let c=i;u!=null&&(c=Ki({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Xn(l.length,i.shape.length)),Gr("any",l,c.shape.length);const[f,h]=$r(c.shape,l),d=he(h),p=ai(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];x=x||b}p[g]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=or(f,s),y=cn({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const yEe={kernelName:pO,backendName:"cpu",kernelFunc:mEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Ve(i,"argMax");let o=_t(a,i.shape);const s=In(o,i.shape.length);let l=i;const u=[];s!=null&&(l=Ki({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),o=Xn(o.length,l.shape.length)),o=[o[0]],Gr("argMax",o,l.shape.length);const[c,f]=$r(l.shape,o),h=he(c),d=ai(h,"int32"),p=he(f),v=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const g=m*p;let y=v[g],x=0;for(let w=0;w<p;++w){const b=v[g+w];b>y&&(y=b,x=w)}d[m]=x}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",d)}const wEe={kernelName:oD,backendName:"cpu",kernelFunc:xEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Ve(i,"argMin");let o=_t(a,i.shape);const s=In(o,i.shape.length);let l=i;const u=[];s!=null&&(l=Ki({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),o=Xn(o.length,l.shape.length)),o=[o[0]],Gr("argMin",o,l.shape.length);const[c,f]=$r(l.shape,o),h=he(c),d=ai(h,"int32"),p=he(f),v=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const g=m*p;let y=v[g],x=0;for(let w=0;w<p;++w){const b=v[g+w];b<y&&(y=b,x=w)}d[m]=x}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",d)}const CEe={kernelName:sD,backendName:"cpu",kernelFunc:bEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SEe=Kt(Ky,t=>Math.asin(t)),DEe={kernelName:Ky,backendName:"cpu",kernelFunc:SEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ee=Kt(Xy,t=>Math.asinh(t)),TEe={kernelName:Xy,backendName:"cpu",kernelFunc:_Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe=Kt(Yy,t=>Math.atan(t)),AEe={kernelName:Yy,backendName:"cpu",kernelFunc:EEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEe=Zn((t,e)=>Math.atan2(t,e)),kEe=br(Qy,NEe),IEe={kernelName:Qy,backendName:"cpu",kernelFunc:kEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const REe=Kt(Zy,t=>Math.atanh(t)),$Ee={kernelName:Zy,backendName:"cpu",kernelFunc:REe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BF(t,e,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=i.padInfo.top,d=i.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Dt(i.outShape,n),m=v.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let w=0;w<i.batchSize;++w){const b=w*g,C=w*r[0];for(let S=0;S<i.inChannels;++S)for(let D=0;D<i.outHeight;++D){const _=D*o-h,T=Math.max(0,_),E=Math.min(i.inHeight,c+_),A=b+D*y;for(let R=0;R<i.outWidth;++R){const $=R*s-d,O=Math.max(0,$),M=Math.min(i.inWidth,f+$);let B=p,P=0,z=0;for(let H=T;H<E;H+=l){const F=C+H*r[1];for(let W=O;W<M;W+=u){const j=F+W*r[2],K=t[j+S];a==="max"&&K>B?B=K:a==="avg"&&(P+=K,z++)}if(isNaN(B))break}const U=A+R*x+S;m[U]=a==="avg"?P/z:B}}}return v}function WQ(t,e,n,r,i=!1,a=!1){const o=Dt(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,v=Dt(e,n,t);for(let m=0;m<r.batchSize;++m)for(let g=0;g<r.inChannels;++g)for(let y=0;y<r.outHeight;++y){const x=y*s-d;let w=x;for(;w<0;)w+=u;const b=Math.min(r.inHeight,f+x);for(let C=0;C<r.outWidth;++C){const S=C*l-p;let D=S;for(;D<0;)D+=c;const _=Math.min(r.inWidth,h+S);let T=Number.NEGATIVE_INFINITY,E=-1;for(let A=w;A<b;A+=u){const R=A-x;for(let $=D;$<_;$+=c){const O=$-S,M=v.get(m,A,$,g);M>T&&(T=M,i?E=a?((m*r.inHeight+A)*r.inWidth+$)*r.inChannels+g:(A*r.inWidth+$)*r.inChannels+g:E=R*h+O)}}o.set(E,m,y,C,g)}}return o}function UQ(t,e,n,r,i,a){const o=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,h=i.effectiveFilterDepth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,v=i.padInfo.front,m=i.padInfo.top,g=i.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Dt(i.outShape,n),w=x.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],D=i.outShape[4];for(let _=0;_<i.batchSize;++_){const T=_*b,E=_*r[0];for(let A=0;A<i.inChannels;++A)for(let R=0;R<i.outDepth;++R){const $=R*o-v;let O=$;for(;O<0;)O+=u;const M=Math.min(i.inDepth,h+$),B=T+R*C;for(let P=0;P<i.outHeight;++P){const z=P*s-m;let U=z;for(;U<0;)U+=c;const H=Math.min(i.inHeight,d+z),F=B+P*S;for(let W=0;W<i.outWidth;++W){const j=W*l-g;let K=j;for(;K<0;)K+=f;const Y=Math.min(i.inWidth,p+j),Z=F+W*D;let se=y,ee=0,oe=0;for(let ve=O;ve<M;ve+=u){const ye=E+ve*r[1];for(let _e=U;_e<H;_e+=c){const Ie=ye+_e*r[2];for(let Ne=K;Ne<Y;Ne+=f){const We=Ie+Ne*r[3],qe=t[We+A];if(a==="max"&&qe>se?se=qe:a==="avg"&&(ee+=qe,oe++),isNaN(se))break}if(isNaN(se))break}if(isNaN(se))break}const ce=Z+A;w[ce]=a==="avg"?ee/Math.max(oe,1):se}}}}return x}function MEe(t,e){const n=Dt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let m=0;m<e.inChannels;++m)for(let g=0;g<e.outDepth;++g){const y=g*r-h;let x=y;for(;x<0;)x+=o;const w=Math.min(e.inDepth,u+y);for(let b=0;b<e.outHeight;++b){const C=b*i-d;let S=C;for(;S<0;)S+=s;const D=Math.min(e.inHeight,c+C);for(let _=0;_<e.outWidth;++_){const T=_*a-p;let E=T;for(;E<0;)E+=l;const A=Math.min(e.inWidth,f+T);let R=Number.NEGATIVE_INFINITY,$=-1;for(let O=x;O<w;O+=o){const M=O-y;for(let B=S;B<D;B+=s){const P=B-C;for(let z=E;z<A;z+=l){const U=z-T,H=t.get(v,O,B,z,m);H>=R&&(R=H,$=M*c*f+P*c+U)}}}n.set($,v,g,b,_,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Ve(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(si(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ho(i.shape,a,o,u,s,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))f=Sl({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=je(i.shape),p=BF(h,i.shape,i.dtype,d,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const PEe={kernelName:lD,backendName:"cpu",kernelFunc:OEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ve(i,"avgPool3d");const c=_u(i.shape,a,o,1,s,l,u),f=n.data.get(i.dataId).values,h=UQ(f,i.shape,i.dtype,je(i.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const LEe={kernelName:uD,backendName:"cpu",kernelFunc:FEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;Ve([i,a],"avgPool3DGrad");const c=_u(a.shape,o,s,1,l,u),f=c.strideDepth,h=c.strideHeight,d=c.strideWidth,p=c.filterDepth,v=c.filterHeight,m=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,b=c.effectiveFilterHeight,C=c.effectiveFilterWidth,S=w-1-c.padInfo.front,D=C-1-c.padInfo.left,_=b-1-c.padInfo.top,T=Dt(a.shape,"float32"),E=1/(p*v*m),A=n.bufferSync(i);for(let R=0;R<c.batchSize;++R)for(let $=0;$<c.inChannels;++$)for(let O=0;O<c.inDepth;++O)for(let M=0;M<c.inHeight;++M)for(let B=0;B<c.inWidth;++B){const P=O-S,z=M-_,U=B-D;let H=0;for(let F=0;F<w;F+=g){const W=(P+F)/f;if(!(W<0||W>=c.outDepth||Math.floor(W)!==W))for(let j=0;j<b;j+=y){const K=(z+j)/h;if(!(K<0||K>=c.outHeight||Math.floor(K)!==K))for(let Y=0;Y<C;Y+=x){const Z=(U+Y)/d;if(Z<0||Z>=c.outWidth||Math.floor(Z)!==Z)continue;const se=A.get(R,W,K,Z,$);H+=se}}}T.set(H*E,R,O,M,B,$)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const BEe={kernelName:gO,backendName:"cpu",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;Ve([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=Ho(o.shape,s,l,1,u),f=c.strideHeight,h=c.strideWidth,d=c.filterHeight,p=c.filterWidth,v=c.dilationHeight,m=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,x=y-1-c.padInfo.left,w=g-1-c.padInfo.top,b=Dt(o.shape,"float32"),C=1/(d*p),S=n.data.get(i.dataId).values,D=Dt(i.shape,"float32",S);for(let _=0;_<c.batchSize;++_)for(let T=0;T<c.inChannels;++T)for(let E=0;E<c.inHeight;++E)for(let A=0;A<c.inWidth;++A){const R=E-w,$=A-x;let O=0;for(let M=0;M<g;M+=v){const B=(R+M)/f;if(!(B<0||B>=c.outHeight||Math.floor(B)!==B))for(let P=0;P<y;P+=m){const z=($+P)/h;if(z<0||z>=c.outWidth||Math.floor(z)!==z)continue;const U=D.get(_,B,z,T);O+=U}}b.set(O*C,_,E,A,T)}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const WEe={kernelName:vO,backendName:"cpu",kernelFunc:VEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:o,mean:s,variance:l}=e;V(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ve([i,s,l,a,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,d=a?n.data.get(a.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),m=p.length,g=d.length,y=h.length,x=f.length;let w=0,b=0,C=0,S=0;for(let D=0;D<c.length;++D)v[D]=p[w++]+(c[D]-f[b++])*d[C++]/Math.sqrt(h[S++]+u),w>=m&&(w=0),b>=x&&(b=0),C>=g&&(C=0),S>=y&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,v)}const GEe={kernelName:CD,backendName:"cpu",kernelFunc:UEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;Ve([i],"batchToSpaceND");const s=a.reduce((g,y)=>g*y),l=j1(i.shape,a,s),u=q1(l.length,a.length),c=K1(i.shape,a,s),f=YP(o,a.length),h=ZP(c,o,a.length),d=cn({inputs:{x:i},backend:n,attrs:{shape:l}}),p=Ki({inputs:{x:d},backend:n,attrs:{perm:u}}),v=cn({inputs:{x:p},backend:n,attrs:{shape:c}}),m=Jh({inputs:{x:v},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const jEe={kernelName:fD,backendName:"cpu",kernelFunc:HEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,u=OF(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}const KEe={kernelName:mO,backendName:"cpu",kernelFunc:qEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=dt(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const YEe={kernelName:pq,backendName:"cpu",kernelFunc:XEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZEe=Kt(t1,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),QEe={kernelName:t1,backendName:"cpu",kernelFunc:ZEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JEe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(he(e.shape)),i=n.data.get(e.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],f=l[u];r[u]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},eAe={kernelName:hD,backendName:"cpu",kernelFunc:JEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iv(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const tAe={kernelName:OO,backendName:"cpu",kernelFunc:Iv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rv(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=_t(i,e[0].shape)[0],o=e.map(v=>v.shape);qP(o,a);let s=pl(e.map(v=>v.shape),a);if(he(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(v=>he(v.shape)>0);if(l.length===1)return Sl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const v=l.map(w=>Qh({inputs:{input:w},backend:n})),m=l.map(w=>Iv({inputs:{input:w},backend:n})),g=Rv({inputs:v,backend:n,attrs:{axis:a}}),y=Rv({inputs:m,backend:n,attrs:{axis:a}}),x=ca({inputs:{real:g,imag:y},backend:n});return v.forEach(w=>n.disposeIntermediateTensorInfo(w)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const u=l.map(v=>{const g=[-1,he(v.shape.slice(a))];return cn({inputs:{x:v},backend:n,attrs:{shape:g}})}),c=u.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));s=pl(u.map(v=>v.shape),1);const f=u[0].shape[0]===1,h=KZ(c,s,e[0].dtype,f),d=pl(l.map(v=>v.shape),a),p=n.makeTensorInfo(d,e[0].dtype,h);return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const nAe={kernelName:dD,backendName:"cpu",kernelFunc:Rv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ve([i,a],"conv2d");const f=Tu(l),h=Ur(i.shape,a.shape,o,u,s,c,!1,f),d=h.filterHeight,p=h.filterWidth,v=h.dilationHeight,m=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,x=h.dataFormat==="channelsLast",w=new Br(h.outShape,i.dtype),b=je(i.shape),C=je(a.shape),S=b[0],D=x?b[1]:b[2],_=x?b[2]:1,T=x?1:b[1],E=w.strides[0],A=x?w.strides[1]:w.strides[2],R=x?w.strides[2]:1,$=x?1:w.strides[1],O=n.data.get(i.dataId).values,M=n.data.get(a.dataId).values,B=w.values;for(let P=0;P<h.batchSize;++P){const z=P*S,U=P*E;for(let H=0;H<h.outHeight;++H){const F=U+H*A,W=H*h.strideHeight-y;for(let j=0;j<d;++j){const K=W+j*v;if(K<0||K>=h.inHeight)continue;const Y=j*C[0],Z=z+K*D;for(let se=0;se<h.outWidth;++se){const ee=F+se*R,oe=se*h.strideWidth-g;for(let ce=0;ce<p;++ce){const ve=oe+ce*m;if(ve<0||ve>=h.inWidth)continue;const ye=Y+ce*C[1],_e=Z+ve*_;let Ie=ye;for(let Ne=0;Ne<h.inChannels;++Ne){const We=O[_e+Ne*T];for(let qe=0;qe<h.outChannels;++qe)B[ee+qe*$]+=We*M[Ie+qe];Ie+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,B)}const rAe={kernelName:pD,backendName:"cpu",kernelFunc:GQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ve([i,a],"conv2dBackpropFilter");const f=Tu(l),h=Ur(i.shape,c,o,1,s,u,!1,f),{strideHeight:d,strideWidth:p,filterHeight:v,filterWidth:m}=h,g=h.dataFormat==="channelsLast",y=new Br(h.filterShape,"float32"),x=h.padInfo.left,w=h.padInfo.top,b=n.data.get(i.dataId).values,C=n.data.get(a.dataId).values,S=new Br(i.shape,i.dtype,b),D=new Br(a.shape,a.dtype,C);for(let _=0;_<v;++_){const T=Math.max(0,Math.ceil((w-_)/d)),E=Math.min(h.outHeight,(h.inHeight+w-_)/d);for(let A=0;A<m;++A){const R=Math.max(0,Math.ceil((x-A)/p)),$=Math.min(h.outWidth,(h.inWidth+x-A)/p);for(let O=0;O<h.inChannels;++O)for(let M=0;M<h.outChannels;++M){let B=0;for(let P=0;P<h.batchSize;++P)for(let z=T;z<E;++z){const U=_+z*d-w;for(let H=R;H<$;++H){const F=A+H*p-x;g?B+=S.get(P,U,F,O)*D.get(P,z,H,M):B+=S.get(P,O,U,F)*D.get(P,M,z,H)}}y.set(B,_,A,O,M)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const aAe={kernelName:wO,backendName:"cpu",kernelFunc:iAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ve([i,a],"conv2dBackpropInput");const f=je(a.shape),h=je(i.shape);let d=Tu(u);const p=Ur(o,a.shape,s,1,l,c,!1,d),v=new Br(p.inShape,"float32"),m=v.values,g=n.data.get(i.dataId).values,y=n.data.get(a.dataId).values,[x,w,b]=f,{batchSize:C,filterHeight:S,filterWidth:D,inChannels:_,inHeight:T,inWidth:E,outChannels:A,outHeight:R,outWidth:$,strideHeight:O,strideWidth:M}=p;d=p.dataFormat;const B=S-1-p.padInfo.top,P=D-1-p.padInfo.left,z=d==="channelsLast",U=v.strides[0],H=z?v.strides[1]:v.strides[2],F=z?v.strides[2]:1,W=z?1:v.strides[1],j=h[0],K=z?h[1]:h[2],Y=z?h[2]:1,Z=z?1:h[1];for(let se=0;se<C;++se)for(let ee=0;ee<_;++ee)for(let oe=0;oe<T;++oe){const ce=oe-B,ve=Math.max(0,Math.ceil(ce/O)),ye=Math.min(R,(S+ce)/O);for(let _e=0;_e<E;++_e){const Ie=_e-P,Ne=Math.max(0,Math.ceil(Ie/M)),We=Math.min($,(D+Ie)/M);let qe=0;for(let at=ve;at<ye;++at){const bt=at*O-ce;for(let ot=Ne;ot<We;++ot){const q=ot*M-Ie,Q=j*se+K*at+Y*ot,re=x*(S-1-bt)+w*(D-1-q)+b*ee;for(let pe=0;pe<A;++pe){const me=g[Q+Z*pe],xe=y[re+pe];qe+=me*xe}}}const ft=U*se+H*oe+F*_e+W*ee;m[ft]=qe}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const sAe={kernelName:vD,backendName:"cpu",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r;Ve([i,a],"conv3d");const u=of(i.shape,a.shape,o,l,s),{filterDepth:c,filterHeight:f,filterWidth:h,dilationDepth:d,dilationHeight:p,dilationWidth:v,padInfo:m}=u,g=m.front,y=m.left,x=m.top,w=new Br(u.outShape,i.dtype),b=n.data.get(i.dataId).values,C=n.data.get(a.dataId).values,S=w.values,D=je(i.shape),_=je(a.shape);for(let T=0;T<u.batchSize;++T){const E=T*D[0],A=T*w.strides[0];for(let R=0;R<u.outDepth;++R){const $=A+R*w.strides[1],O=R*u.strideDepth-g;for(let M=0;M<c;++M){const B=O+M*d;if(B<0||B>=u.inDepth)continue;const P=M*_[0],z=E+B*D[1];for(let U=0;U<u.outHeight;++U){const H=$+U*w.strides[2],F=U*u.strideHeight-x;for(let W=0;W<f;++W){const j=F+W*p;if(j<0||j>=u.inHeight)continue;const K=P+W*_[1],Y=z+j*D[2];for(let Z=0;Z<u.outWidth;++Z){const se=H+Z*u.outChannels,ee=Z*u.strideWidth-y;for(let oe=0;oe<h;++oe){const ce=ee+oe*v;if(ce<0||ce>=u.inWidth)continue;const ve=K+oe*_[2],ye=Y+ce*u.inChannels;let _e=ve;for(let Ie=0;Ie<u.inChannels;++Ie){const Ne=b[ye+Ie];for(let We=0;We<u.outChannels;++We)S[se+We]+=Ne*C[_e+We];_e+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const uAe={kernelName:gD,backendName:"cpu",kernelFunc:lAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r;Ve([i,a],"conv3dBackpropFilterV2");const u=je(i.shape),c=je(a.shape),f=of(i.shape,l,o,1,s),h=f.strideDepth,d=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,y=new Br(f.filterShape,"float32"),x=y.values,[w,b,C,S]=y.strides,D=n.data.get(a.dataId).values,[_,T,E,A]=c,R=n.data.get(i.dataId).values,[$,O,M,B]=u,P=f.padInfo.front,z=f.padInfo.left,U=f.padInfo.top;for(let H=0;H<v;++H){const F=Math.max(0,Math.ceil((P-H)/h)),W=Math.min(f.outDepth,(f.inDepth+P-H)/h),j=H*w;for(let K=0;K<m;++K){const Y=Math.max(0,Math.ceil((U-K)/d)),Z=Math.min(f.outHeight,(f.inHeight+U-K)/d),se=K*b+j;for(let ee=0;ee<g;++ee){const oe=Math.max(0,Math.ceil((z-ee)/p)),ce=Math.min(f.outWidth,(f.inWidth+z-ee)/p),ve=ee*C+se;for(let ye=0;ye<f.inChannels;++ye){const _e=ye*S+ve;for(let Ie=0;Ie<f.outChannels;++Ie){let Ne=0;for(let We=0;We<f.batchSize;++We){const qe=We*$,ft=We*_;for(let at=F;at<W;++at){const ot=(H+at*h-P)*O+qe,q=at*T+ft;for(let Q=Y;Q<Z;++Q){const pe=(K+Q*d-U)*M+ot,me=Q*E+q;for(let xe=oe;xe<ce;++xe){const ge=(ee+xe*p-z)*B+pe,Ce=xe*A+me;Ne+=R[ge+ye]*D[Ce+Ie]}}}}x[_e+Ie]=Ne}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const fAe={kernelName:bO,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r;Ve([i],"conv3dBackpropInputV2");const u=je(i.shape),c=je(a.shape),f=of(l,a.shape,s,1,o),h=new Br(f.inShape,"float32"),d=h.values,[p,v,m,g]=h.strides,y=n.data.get(i.dataId).values,[x,w,b,C]=u,S=n.data.get(a.dataId).values,[D,_,T,E]=c,{batchSize:A,filterDepth:R,filterHeight:$,filterWidth:O,inChannels:M,inDepth:B,inHeight:P,inWidth:z,outChannels:U,outDepth:H,outHeight:F,outWidth:W,strideDepth:j,strideHeight:K,strideWidth:Y}=f,Z=R-1-f.padInfo.front,se=$-1-f.padInfo.top,ee=O-1-f.padInfo.left;for(let oe=0;oe<A;++oe)for(let ce=0;ce<M;++ce)for(let ve=0;ve<B;++ve){const ye=ve-Z,_e=Math.max(0,Math.ceil(ye/j)),Ie=Math.min(H,(R+ye)/j);for(let Ne=0;Ne<P;++Ne){const We=Ne-se,qe=Math.max(0,Math.ceil(We/K)),ft=Math.min(F,($+We)/K);for(let at=0;at<z;++at){const bt=at-ee,ot=Math.max(0,Math.ceil(bt/Y)),q=Math.min(W,(O+bt)/Y);let Q=0;for(let re=_e;re<Ie;++re){const pe=re*j-ye;for(let me=qe;me<ft;++me){const xe=me*K-We;for(let Se=ot;Se<q;++Se){const ge=Se*Y-bt,Ce=x*oe+w*re+b*me+C*Se,Le=D*(R-1-pe)+_*($-1-xe)+T*(O-1-ge)+E*ce;for(let st=0;st<U;++st){const Ae=y[Ce+st],ur=S[Le+st];Q+=Ae*ur}}}}d[p*oe+v*ve+m*Ne+g*at+ce]=Q}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const dAe={kernelName:CO,backendName:"cpu",kernelFunc:hAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe=Kt(n1,t=>Math.cos(t)),vAe={kernelName:n1,backendName:"cpu",kernelFunc:pAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=Kt(r1,t=>Math.cosh(t)),mAe={kernelName:r1,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yAe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,f,h,d]=i.shape,p=a.shape[0],[v,m]=s,g=Dt([p,v,m,d],"float32"),y=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,b=je(i.shape),C=je(g.shape);for(let S=0;S<p;S++){const D=S*4,_=y[D],T=y[D+1],E=y[D+2],A=y[D+3],R=x[S];if(R>=c)continue;const $=v>1?(E-_)*(f-1)/(v-1):0,O=m>1?(A-T)*(h-1)/(m-1):0;for(let M=0;M<v;M++){const B=v>1?_*(f-1)+M*$:.5*(_+E)*(f-1);if(B<0||B>f-1){for(let P=0;P<m;P++)for(let z=0;z<d;z++){const U=z+P*C[2]+M*C[1]+S*C[0];g.values[U]=u}continue}if(l==="bilinear"){const P=Math.floor(B),z=Math.ceil(B),U=B-P;for(let H=0;H<m;H++){const F=m>1?T*(h-1)+H*O:.5*(T+A)*(h-1);if(F<0||F>h-1){for(let Y=0;Y<d;Y++){const Z=Y+H*C[2]+M*C[1]+S*C[0];g.values[Z]=u}continue}const W=Math.floor(F),j=Math.ceil(F),K=F-W;for(let Y=0;Y<d;Y++){let Z=Y+W*b[2]+P*b[1]+R*b[0];const se=w[Z];Z=Y+j*b[2]+P*b[1]+R*b[0];const ee=w[Z];Z=Y+W*b[2]+z*b[1]+R*b[0];const oe=w[Z];Z=Y+j*b[2]+z*b[1]+R*b[0];const ce=w[Z],ve=se+(ee-se)*K,ye=oe+(ce-oe)*K;Z=Y+H*C[2]+M*C[1]+S*C[0],g.values[Z]=ve+(ye-ve)*U}}}else for(let P=0;P<m;++P){const z=m>1?T*(h-1)+P*O:.5*(T+A)*(h-1);if(z<0||z>h-1){for(let F=0;F<d;F++){const W=F+P*C[2]+M*C[1]+S*C[0];g.values[W]=u}continue}const U=Math.round(z),H=Math.round(B);for(let F=0;F<d;F++){const W=F+U*b[2]+H*b[1]+R*b[0],j=F+P*C[2]+M*C[1]+S*C[0];g.values[j]=w[W]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const xAe={kernelName:DO,backendName:"cpu",kernelFunc:yAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Ve(i,"cumprod");const l=In([a],i.shape.length);let u=i;l!=null&&(u=Ki({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Xn(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=_a(u.dtype,"int32"),h=uO(he(u.shape),f),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],v=s?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<d.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)h[x]=o?1:d[x];else{const w=v(g,y-1);h[x]=o?d[w]*h[w]:d[x]*h[w]}}const m=n.makeTensorInfo(u.shape,f,h);if(l!=null){const g=sf(l),y=Ki({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),y}return m}const bAe={kernelName:SO,backendName:"cpu",kernelFunc:wAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Ve(i,"cumsum");const l=In([a],i.shape.length);let u=i;l!=null&&(u=Ki({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Xn(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=_a(u.dtype,"int32"),h=ai(he(u.shape),f),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],v=s?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<d.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)h[x]=o?0:d[x];else{const w=v(g,y-1);h[x]=o?d[w]+h[w]:d[x]+h[w]}}const m=n.makeTensorInfo(u.shape,f,h);if(l!=null){const g=sf(l),y=Ki({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),y}return m}const SAe={kernelName:mD,backendName:"cpu",kernelFunc:CAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=OF(l,u,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(a),c=HZ(l,u,o,s);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const _Ae={kernelName:_O,backendName:"cpu",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r;V(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],f=l*a,h=u*a,d=c/(a*a),p=n.data.get(i.dataId).values,v=new Float32Array(s*f*h*d);let m=0;for(let g=0;g<s;++g)for(let y=0;y<f;++y){const x=Math.floor(y/a),w=y%a;for(let b=0;b<h;++b){const C=Math.floor(b/a),S=b%a,D=(w*a+S)*d;for(let _=0;_<d;++_){const E=_+D+c*(C+u*(x+l*g));v[m++]=p[E]}}}return n.makeTensorInfo([s,f,h,d],i.dtype,v)}const EAe={kernelName:TO,backendName:"cpu",kernelFunc:TAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;Ve([i,a],"depthwiseConv2DNative");const c=je(i.shape),f=je(a.shape);let h=l;h==null&&(h=[1,1]),V(si(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const d=Ur(i.shape,a.shape,o,h,s,u,!0),{filterHeight:p,filterWidth:v,dilationHeight:m,dilationWidth:g,padInfo:y}=d,x=y.left,w=y.top,b=d.outChannels/d.inChannels,C=new Br(d.outShape,i.dtype),S=n.data.get(i.dataId).values,D=n.data.get(a.dataId).values,_=C.values;for(let T=0;T<d.batchSize;++T){const E=T*c[0],A=T*C.strides[0];for(let R=0;R<d.outHeight;++R){const $=A+R*C.strides[1],O=R*d.strideHeight-w;for(let M=0;M<p;++M){const B=O+M*m;if(B<0||B>=d.inHeight)continue;const P=M*f[0],z=E+B*c[1];for(let U=0;U<d.outWidth;++U){const H=$+U*C.strides[2],F=U*d.strideWidth-x;for(let W=0;W<v;++W){const j=F+W*g;if(j<0||j>=d.inWidth)continue;const K=P+W*f[1],Y=z+j*d.inChannels;let Z=H,se=K;for(let ee=0;ee<d.inChannels;++ee){const oe=S[Y+ee];for(let ce=0;ce<b;++ce)_[Z+ce]+=oe*D[se+ce];Z+=b,se+=b}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const AAe={kernelName:yD,backendName:"cpu",kernelFunc:HQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;Ve([i,a],"depthwiseConv2dNativeBackpropFilter");const f=Ur(i.shape,c,o,s,l,u,!0),{strideHeight:h,strideWidth:d,filterHeight:p,filterWidth:v}=f,m=new Br(f.filterShape,"float32"),g=f.padInfo.left,y=f.padInfo.top,x=f.outChannels/f.inChannels,w=n.data.get(i.dataId).values,b=new Br(i.shape,i.dtype,w),C=n.data.get(a.dataId).values,S=new Br(a.shape,a.dtype,C);for(let D=0;D<p;++D){const _=Math.max(0,Math.ceil((y-D)/h)),T=Math.min(f.outHeight,(f.inHeight+y-D)/h);for(let E=0;E<v;++E){const A=Math.max(0,Math.ceil((g-E)/d)),R=Math.min(f.outWidth,(f.inWidth+g-E)/d);for(let $=0;$<f.outChannels;++$){const O=Math.trunc($/x),M=$%x;let B=0;for(let P=0;P<f.batchSize;++P)for(let z=_;z<T;++z){const U=D+z*h-y;for(let H=A;H<R;++H){const F=E+H*d-g;B+=b.get(P,U,F,O)*S.get(P,z,H,$)}}m.set(B,D,E,O,M)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const kAe={kernelName:EO,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;Ve([i,a],"depthwiseConv2DNativeBackpropInput");const f=je(i.shape),h=je(a.shape),d=Ur(c,a.shape,o,s,l,u,!0),p=new Br(d.inShape,"float32"),v=p.values,[m,g,y]=p.strides,x=n.data.get(i.dataId).values,[w,b,C]=f,S=n.data.get(a.dataId).values,[D,_,T]=h,{batchSize:E,filterHeight:A,filterWidth:R,inChannels:$,inHeight:O,inWidth:M,outChannels:B,outHeight:P,outWidth:z,strideHeight:U,strideWidth:H}=d,F=A-1-d.padInfo.top,W=R-1-d.padInfo.left,j=B/$;for(let K=0;K<E;++K)for(let Y=0;Y<$;++Y)for(let Z=0;Z<O;++Z){const se=Z-F,ee=Math.max(0,Math.ceil(se/U)),oe=Math.min(P,(A+se)/U);for(let ce=0;ce<M;++ce){const ve=ce-W,ye=Math.max(0,Math.ceil(ve/H)),_e=Math.min(z,(R+ve)/H);let Ie=0;for(let Ne=ee;Ne<oe;++Ne){const We=Ne*U-se;for(let qe=ye;qe<_e;++qe){const ft=qe*H-ve,at=w*K+b*Ne+C*qe,bt=D*(A-1-We)+_*(R-1-ft)+T*Y;for(let ot=0;ot<j;++ot){const q=Y*j+ot,Q=x[at+q],re=S[bt+ot];Ie+=Q*re}}}v[m*K+g*Z+y*ce+Y]=Ie}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const RAe={kernelName:AO,backendName:"cpu",kernelFunc:IAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t){const{inputs:e,backend:n}=t,{x:r}=e,i=he(r.shape),a=n.data.get(r.dataId).values,o=Dt([i,i],r.dtype),s=o.values;for(let u=0;u<a.length;u++)s[u*i+u]=a[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const MAe={kernelName:vq,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:xD,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,f=l.data.get(i.dataId).values,h=i.shape.length,{batchSize:d,inHeight:p,inWidth:v,inChannels:m,outHeight:g,outWidth:y,padInfo:x,strideHeight:w,strideWidth:b,filterHeight:C,filterWidth:S,dilationHeight:D,dilationWidth:_,outShape:T}=V1(r.shape,i.shape,a,o,"NHWC",s),E=he(T),A=T.length,R=Hn(r.dtype,E);for(let O=0;O<d;++O)for(let M=0;M<g;++M){const B=M*w-x.top;for(let P=0;P<y;++P){const z=P*b-x.left;for(let U=0;U<m;++U){let H=Number.MIN_SAFE_INTEGER;for(let W=0;W<C;++W){const j=B+W*D;if(j>=0&&j<p)for(let K=0;K<S;++K){const Y=z+K*_;if(Y>=0&&Y<v){const Z=hl([O,j,Y,U],c,je(r.shape)),se=hl([W,K,U],h,je(i.shape)),ee=u[Z]+f[se];ee>H&&(H=ee)}}}const F=hl([O,M,P,U],A,je(T));R[F]=H}}}return{dataId:l.write(pd(R,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe={kernelName:tI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=bs(r.shape,u.data.get(r.dataId).values),f=bs(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:b,filterWidth:C,dilationHeight:S,dilationWidth:D,outShape:_}=V1(r.shape,i.shape,o,s,"NHWC",l);V(a.rank===_.length,()=>`Error in ${tI}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const T=bs(_,u.data.get(a.dataId).values),E=fq(i.shape,i.dtype);for(let R=0;R<h;++R)for(let $=0;$<m;++$){const O=$*x-y.top;for(let M=0;M<g;++M){const B=M*w-y.left;for(let P=0;P<v;++P){let z=Number.MIN_SAFE_INTEGER,U=0,H=0;for(let F=0;F<b;++F){const W=O+F*S;if(W>=0&&W<d)for(let j=0;j<C;++j){const K=B+j*D;if(K>=0&&K<p){const Y=c[R][W][K][P]+f[F][j][P];Y>z&&(z=Y,U=F,H=j)}}}E[U][H][P]+=T[R][$][M][P]}}}return{dataId:u.write(pd(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FAe={kernelName:eI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=bs(r.shape,u.data.get(r.dataId).values),f=bs(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:b,filterWidth:C,dilationHeight:S,dilationWidth:D,outShape:_}=V1(r.shape,i.shape,o,s,"NHWC",l);V(a.rank===_.length,()=>`Error in ${eI}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const T=bs(_,u.data.get(a.dataId).values),E=fq(r.shape,r.dtype);for(let R=0;R<h;++R)for(let $=0;$<m;++$){const O=$*x-y.top;for(let M=0;M<g;++M){const B=M*w-y.left;for(let P=0;P<v;++P){let z=Number.MIN_SAFE_INTEGER,U=O<0?0:O,H=B<0?0:B;for(let F=0;F<b;++F){const W=O+F*S;if(W>=0&&W<d)for(let j=0;j<C;++j){const K=B+j*D;if(K>=0&&K<p){const Y=c[R][W][K][P]+f[F][j][P];Y>z&&(z=Y,U=W,H=K)}}}E[R][U][H][P]+=T[R][$][M][P]}}}return{dataId:u.write(pd(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:l}=o||{},u=(l==null?void 0:l.alpha)||1,c=(s==null?void 0:s.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const f=a.getContext(c,(s==null?void 0:s.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[h,d]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],v=n.data.get(i.dataId).values,m=i.dtype==="float32"?255:1,g=new Uint8ClampedArray(d*h*4);for(let x=0;x<h*d;++x){const w=[0,0,0,255*u];for(let C=0;C<p;C++){const S=v[x*p+C];if(i.dtype==="float32"){if(S<0||S>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${S}.`)}else if(i.dtype==="int32"&&(S<0||S>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${S}.`);p===1?(w[0]=S*m,w[1]=S*m,w[2]=S*m):w[C]=S*m}const b=x*4;g[b+0]=Math.round(w[0]),g[b+1]=Math.round(w[1]),g[b+2]=Math.round(w[2]),g[b+3]=Math.round(w[3])}a.width=d,a.height=h;const y=new ImageData(g,d,h);return f.putImageData(y,0,0),i}const zAe={kernelName:r0e,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rx(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Ve(i,"sum");let s;i.dtype==="bool"?s=Gc({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):s=Sl({inputs:{x:i},backend:n});const l=s.shape.length,u=_t(a,s.shape),c=In(u,l);let f=u,h=s;c!=null&&(h=Ki({inputs:{x:s},backend:n,attrs:{perm:c}}),f=Xn(f.length,l)),Gr("sum",f,h.shape.length);const[d,p]=$r(h.shape,f),v=_a(h.dtype,"int32");let m=e2(n,d,v);const g=he(p),y=n.data.get(m.dataId).values,x=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const b=w*g;let C=0;for(let S=0;S<g;++S)C+=x[b+S];y[w]=C}if(o){const w=or(m.shape,u),b=m;m=cn({inputs:{x:m},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(b)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(h),m}const BAe={kernelName:QD,backendName:"cpu",kernelFunc:rx};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=aF(i,a.length);sF(o.length,l,a);const{path:u,steps:c}=lF(s,l),f=c.length;let h=null,d=o.length;const p=[];for(let v=0;v<f;++v){for(const m of c[v]){const{permutationIndices:g,expandDims:y}=oF(d,l[m]);let x;uF(g)?x=a[m]:(x=Ki({inputs:{x:a[m]},backend:n,attrs:{perm:g}}),p.push(x));const w=x.shape.slice();for(let b=0;b<y.length;++b)w.splice(y[b],0,1);Bt(x.shape,w)||(x=cn({inputs:{x},backend:n,attrs:{shape:w}}),p.push(x)),h===null?h=x:(h=A_({inputs:{a:x,b:h},backend:n}),p.push(h))}v<f-1&&(u[v]>=0&&(h=rx({inputs:{x:h},backend:n,attrs:{axis:u[v]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const v of p)v!==h&&n.disposeIntermediateTensorInfo(v);return h}const WAe={kernelName:NO,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Ve([r,i],"eluGrad");const a=new Float32Array(he(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?a[l]=s[l]:a[l]=s[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",a)}const GAe={kernelName:kO,backendName:"cpu",kernelFunc:UAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=QP,jAe=JP,qAe=eF,KAe=tF,XAe=nF,YAe=rF,ZAe=Kt(o1,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+HAe*n);return e*(1-((((YAe*r+XAe)*r+KAe)*r+qAe)*r+jAe)*r*Math.exp(-n*n))}),QAe={kernelName:o1,backendName:"cpu",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:a}=r,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(V(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),cn({inputs:{x:i},backend:n,attrs:{shape:s}})}const JAe={kernelName:bD,backendName:"cpu",kernelFunc:r2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eNe=Zn((t,e)=>t/e),VF=br(i1,eNe),AI={kernelName:i1,backendName:"cpu",kernelFunc:VF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(t,e,n){const r=t.shape,i=r[0],a=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,a],c=he(u),f=ii("float32",c),h=ii("float32",c);for(let m=0;m<i;m++){const g=Jh({inputs:{x:s},backend:n,attrs:{begin:[m,0],size:[1,a]}}),y=Jh({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,a]}}),x=ca({inputs:{real:g,imag:y},backend:n}),{real:w,imag:b}=tNe(x,e,n),C=mu(w,b);for(let S=0;S<a;S++){const D=iF(C,S);f[m*a+S]=D.real,h[m*a+S]=D.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x)}const d=n.makeTensorInfo(u,"float32",f),p=n.makeTensorInfo(u,"float32",h),v=ca({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),v}function tNe(t,e,n){const r=he(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(nNe(r)){const s=NI(a,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),f=n.makeTensorInfo([],"float32",rf(r,"float32")),h=Sl({inputs:{x:f},backend:n}),d=AI.kernelFunc({inputs:{a:u,b:f},backend:n}),p=AI.kernelFunc({inputs:{a:c,b:h},backend:n}),v=n.data.get(d.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}else{const s=mu(a,o),l=rNe(s,r,e);return sX(l)}}function nNe(t){return(t&t-1)===0}function NI(t,e,n,r,i){if(n===1)return{real:t,imag:e};const a=mu(t,e),o=n/2,s=lX(a),l=s.real,u=s.imag,c=[l.length],f=i.makeTensorInfo(c,"float32",l),h=i.makeTensorInfo(c,"float32",u),d=ca({inputs:{real:f,imag:h},backend:i}),p=uX(a),v=p.real,m=p.imag,g=[v.length],y=i.makeTensorInfo(g,"float32",v),x=i.makeTensorInfo(g,"float32",m),w=ca({inputs:{real:y,imag:x},backend:i}),b=NI(l,u,o,r,i),C=b.real,S=b.imag,D=[C.length],_=i.makeTensorInfo(D,"float32",C),T=i.makeTensorInfo(D,"float32",S),E=ca({inputs:{real:_,imag:T},backend:i}),A=NI(v,m,o,r,i),R=A.real,$=A.imag,O=[R.length],M=i.makeTensorInfo(O,"float32",R),B=i.makeTensorInfo(O,"float32",$),P=ca({inputs:{real:M,imag:B},backend:i}),z=fX(n,r),U=[z.real.length],H=i.makeTensorInfo(U,"float32",z.real),F=i.makeTensorInfo(U,"float32",z.imag),W=ca({inputs:{real:H,imag:F},backend:i}),j=A_({inputs:{a:W,b:P},backend:i}),K=kv({inputs:{a:E,b:j},backend:i}),Y=zF({inputs:{a:E,b:j},backend:i}),Z=Qh({inputs:{input:K},backend:i}),se=Qh({inputs:{input:Y},backend:i}),ee=Iv({inputs:{input:K},backend:i}),oe=Iv({inputs:{input:Y},backend:i}),ce=Rv({inputs:[Z,se],backend:i,attrs:{axis:0}}),ve=Rv({inputs:[ee,oe],backend:i,attrs:{axis:0}}),ye=i.data.get(ce.dataId).values,_e=i.data.get(ve.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(ve),{real:ye,imag:_e}}function rNe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let a=0,o=0;for(let s=0;s<e;s++){const l=hX(i*s,e,n),u=iF(t,s);a+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(a/=e,o/=e),cX(r,a,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=he(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=cn({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=jQ(s,!1,n),u=cn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const aNe={kernelName:IO,backendName:"cpu",kernelFunc:iNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WF(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:a}=n,o=a||ig(i),s=Hn(o,he(r));return sNe(s,i,o),e.makeTensorInfo(r,o,s)}const oNe={kernelName:RO,backendName:"cpu",kernelFunc:WF};function sNe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe={kernelName:$O,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=ii(r.dtype,he(r.shape)),[o,s,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let h=0;h<o;h++){const d=h*l*s*u;for(let p=0;p<s;p++){const v=p*(l*u);for(let m=0;m<l;m++){const g=m*u;for(let y=0;y<u;y++){const x=Math.round(l-m-1),w=d+v+g+y;let b=c[w];if(x>=0&&x<l){const C=x*u,S=d+v+C+y;b=c[S]}a[w]=b}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let v=GQ({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const m=v;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=cn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=kv({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=kv({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(d){const m=v;if(c==="NCHW"&&d==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const g=cn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=n2(n,v,d,g,p),n.disposeIntermediateTensorInfo(g)}else v=n2(n,v,d,s,p);n.disposeIntermediateTensorInfo(m)}return v}const cNe={kernelName:MC,backendName:"cpu",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let v=HQ({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const m=v;v=kv({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(d){const m=v;v=n2(n,v,d,s,p),n.disposeIntermediateTensorInfo(m)}return v}const hNe={kernelName:Mq,backendName:"cpu",kernelFunc:fNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=he(r.shape),o=i.shape,s=o[o.length-1],[l,u,c,f]=VP(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(i.dataId).values,d=n.bufferSync(r),p=nQ(h,d,r.dtype,u,s,c,f,r.shape,a);return n.makeTensorInfo(l,r.dtype,p.values)}const pNe={kernelName:gq,backendName:"cpu",kernelFunc:dNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r;Ve([i,a],"gatherV2");const l=_t(o,i.shape)[0],u=n.data.get(a.dataId).values,c=i.shape[l];for(let w=0;w<u.length;++w){const b=u[w];V(b<=c-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${c-1}]`)}let f=s;s==null&&(f=0);const h=he(a.shape),d=fF(i,a,l,f),p=cn({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),v=cn({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,h/d.batchSize]}}),m=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],g=n.bufferSync(v),y=n.bufferSync(p),x=rQ(y,g,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(d.outputShape,x.dtype,x.values)}const gNe={kernelName:SD,backendName:"cpu",kernelFunc:vNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=he(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=cn({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=jQ(s,!0,n),u=cn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const yNe={kernelName:MO,backendName:"cpu",kernelFunc:mNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe=Kt(d1,t=>Number.isFinite(t)?1:0,"bool"),wNe={kernelName:d1,backendName:"cpu",kernelFunc:xNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe=Kt(p1,t=>Math.abs(t)===1/0?1:0,"bool"),CNe={kernelName:p1,backendName:"cpu",kernelFunc:bNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe=Kt(v1,t=>Number.isNaN(t)?1:0,"bool"),DNe={kernelName:v1,backendName:"cpu",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=lQ(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const TNe={kernelName:mq,backendName:"cpu",kernelFunc:_Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe=Kt(m1,t=>Math.log1p(t)),ANe={kernelName:m1,backendName:"cpu",kernelFunc:ENe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NNe=Zn((t,e)=>t&&e),kNe=br(AD,NNe,null,"bool"),INe={kernelName:AD,backendName:"cpu",kernelFunc:kNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RNe=Kt(ND,t=>t?0:1,"bool"),$Ne={kernelName:ND,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe=Zn((t,e)=>t||e),ONe=br(kD,MNe,null,"bool"),PNe={kernelName:kD,backendName:"cpu",kernelFunc:ONe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r;Ve(i,"LRN");const u=i.shape[3],c=u-1,f=n.data.get(i.dataId).values,h=he(i.shape),d=new Float32Array(h);function p(v){const m=v%u;let g=v-m+Math.max(0,m-a);const y=v-m+Math.min(m+a,c);let x=0;for(;g<=y;g++){const w=f[g];x+=w*w}return x}for(let v=0;v<h;v++){const m=p(v),g=f[v]*Math.pow(o+s*m,-l);d[v]=g}return n.makeTensorInfo(i.shape,i.dtype,d)}const LNe={kernelName:ID,backendName:"cpu",kernelFunc:FNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;Ve(o,"LRNGrad");const f=he(o.shape),h=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,v=n.data.get(a.dataId).values,m=new Float32Array(f),g=f;for(let y=0;y<g;y++){const x=y%h,w=y-x+Math.max(0,x-s),b=y-x+Math.min(h,x+s+1);let C=0;for(let S=w;S<b;S++)C+=Math.pow(p[S],2);C=u*C+l;for(let S=w;S<b;S++){let D=-2*u*c*p[S]*v[y]/C;y===S&&(D+=Math.pow(C,-c)),D*=d[y],m[S]+=D}}return n.makeTensorInfo(o.shape,i.dtype,m)}const BNe={kernelName:PO,backendName:"cpu",kernelFunc:zNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=n;let l=i.shape;const u=l.length,c=_t(a,l);let f=c;const h=In(f,u);let d=s.data.get(i.dataId).values;if(h!=null){const w=new Array(u);for(let b=0;b<w.length;b++)w[b]=l[h[b]];d=FF(d,l,i.dtype,h,w),f=Xn(f.length,u),l=w}Ve(i,"max"),Gr("max",f,u);const[p,v]=$r(l,f),m=he(v),g=cQ(d,m,p,i.dtype),y=s.write(g,p,i.dtype);let x=p;return o&&(x=or(p,c)),{dataId:y,shape:x,dtype:i.dtype}}const VNe={kernelName:RD,backendName:"cpu",kernelFunc:qQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Ve(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(si(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ho(i.shape,a,o,u,s,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))f=Sl({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=je(i.shape),p=BF(h,i.shape,i.dtype,d,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const UNe={kernelName:$D,backendName:"cpu",kernelFunc:WNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ve(i,"maxPool3d");const c=_u(i.shape,a,o,1,s,l,u),f=n.data.get(i.dataId).values,h=UQ(f,i.shape,i.dtype,je(i.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const HNe={kernelName:MD,backendName:"cpu",kernelFunc:GNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;Ve([i,a],"maxPool3DGrad");const c=_u(a.shape,o,s,1,l,u),f=n.bufferSync(a),h=MEe(f,c),d=c.strideDepth,p=c.strideHeight,v=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,b=c.effectiveFilterWidth,C=x-1-c.padInfo.front,S=b-1-c.padInfo.left,D=w-1-c.padInfo.top,_=Dt(a.shape,"float32"),T=n.bufferSync(i);for(let E=0;E<c.batchSize;++E)for(let A=0;A<c.inChannels;++A)for(let R=0;R<c.inDepth;++R)for(let $=0;$<c.inHeight;++$)for(let O=0;O<c.inWidth;++O){const M=R-C,B=$-D,P=O-S;let z=0;for(let U=0;U<x;U+=m){const H=(M+U)/d;if(!(H<0||H>=c.outDepth||Math.floor(H)!==H))for(let F=0;F<w;F+=g){const W=(B+F)/p;if(!(W<0||W>=c.outHeight||Math.floor(W)!==W))for(let j=0;j<b;j+=y){const K=(P+j)/v;if(K<0||K>=c.outWidth||Math.floor(K)!==K)continue;const Y=x*w*b-1-h.get(E,H,W,K,A),Z=U*w*b+F*b+j,se=Y===Z?1:0;if(se===0)continue;const ee=T.get(E,H,W,K,A);z+=ee*se}}}_.set(z,E,R,$,O,A)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const qNe={kernelName:LO,backendName:"cpu",kernelFunc:jNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;Ve([a,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,h=Ho(s.shape,l,u,1,c,f),d=n.data.get(s.dataId).values,p=Dt(h.outShape,s.dtype,WQ(d,s.shape,s.dtype,h).values),v=h.strideHeight,m=h.strideWidth,g=h.dilationHeight,y=h.dilationWidth,x=h.effectiveFilterHeight,w=h.effectiveFilterWidth,b=w-1-h.padInfo.left,C=x-1-h.padInfo.top,S=Dt(s.shape,"float32"),D=n.data.get(i.dataId).values,_=Dt(i.shape,"float32",D);for(let T=0;T<h.batchSize;++T)for(let E=0;E<h.inChannels;++E)for(let A=0;A<h.inHeight;++A)for(let R=0;R<h.inWidth;++R){const $=A-C,O=R-b;let M=0;for(let B=0;B<x;B+=g){const P=($+B)/v;if(!(P<0||P>=h.outHeight||Math.floor(P)!==P))for(let z=0;z<w;z+=y){const U=(O+z)/m;if(U<0||U>=h.outWidth||Math.floor(U)!==U)continue;const H=x*w-1-p.get(T,P,U,E),F=B*w+z,W=H===F?1:0;if(W===0)continue;const j=_.get(T,P,U,E);M+=j*W}}S.set(M,T,A,R,E)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const XNe={kernelName:FO,backendName:"cpu",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t,e,n,r,i){const a=je(e),o=BF(t,e,n,a,i,"max"),s=WQ(t,e,n,i,!0,r);return[o.values,s.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe={kernelName:yq,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;Ve(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Ho(r.shape,i,a,[1,1],o),[f,h]=YNe(u,r.shape,r.dtype,s,c),d=l.write(f,c.outShape,r.dtype),p=l.write(h,c.outShape,r.dtype);return[{dataId:d,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=_t(a,i.shape),u=$r(i.shape,s)[1],c=he(u),f=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(h);const d=Gc({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(d);const p=VF({inputs:{a:d,b:h},backend:n});f.push(p);const v=rx({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:o}});return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),v}const JNe={kernelName:OD,backendName:"cpu",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Ve(i,"min");const s=_t(a,i.shape);let l=s;const u=In(l,i.shape.length);let c=i;u!=null&&(c=Ki({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Xn(l.length,i.shape.length)),Gr("min",l,c.shape.length);const[f,h]=$r(c.shape,l),d=he(h),p=ai(he(f),c.dtype),v=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const y=g*d;let x=v[y];for(let w=0;w<d;++w){const b=v[y+w];(Number.isNaN(b)||b<x)&&(x=b)}p[g]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(f,c.dtype,p);if(o){const g=or(f,s),y=cn({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const tke={kernelName:PD,backendName:"cpu",kernelFunc:eke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,mode:o}=r;Ve(i,"mirrorPad");const s=a.map((x,w)=>x[0]+i.shape[w]+x[1]),l=a.map(x=>x[0]),u=a.map((x,w)=>x[0]+i.shape[w]),c=o==="reflect"?0:1,f=n.data.get(i.dataId).values,h=i.shape.length,d=je(i.shape),p=he(s),v=s.length,m=je(s),g=ii(i.dtype,p);for(let x=0;x<p;x++){let w=ag(x,v,m);for(let C=0;C<v;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,S)=>C-l[S]);const b=hl(w,h,d);g[x]=f[b]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}const rke={kernelName:FD,backendName:"cpu",kernelFunc:nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ike=Zn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),ake=br(w1,ike),oke={kernelName:w1,backendName:"cpu",kernelFunc:ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=i.shape.length;let s=a;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=_t([s],i.shape),u=qQ({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=or(u.shape,l),f=cn({inputs:{x:u},backend:n,attrs:{shape:c}}),h=zF({inputs:{a:i,b:f},backend:n}),d=QZ({inputs:{x:h},backend:n}),p=rx({inputs:{x:d},backend:n,attrs:{axis:l,keepDims:!1}}),v=cn({inputs:{x:p},backend:n,attrs:{shape:c}}),m=VF({inputs:{a:d,b:v},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const ske={kernelName:t_,backendName:"cpu",kernelFunc:KQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r;Ve(i,"multinomial");const l=s?i:KQ({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],f=n.data.get(l.dataId).values,h=[u,a],d=ai(he(h),"int32");for(let p=0;p<u;++p){const v=p*c,m=new Float32Array(c-1);m[0]=f[v];for(let x=1;x<m.length;++x)m[x]=m[x-1]+f[v+x];const g=TP.alea(o.toString()),y=p*a;for(let x=0;x<a;++x){const w=g();d[y+x]=m.length;for(let b=0;b<m.length;b++)if(w<m[b]){d[y+x]=b;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",d)}const uke={kernelName:xq,backendName:"cpu",kernelFunc:lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cke=OP;function fke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;Ve(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,{selectedIndices:f}=cke(u,c,o,s,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const hke={kernelName:zO,backendName:"cpu",kernelFunc:fke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke=PP;function pke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;Ve(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:d}=dke(c,f,o,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const vke={kernelName:BO,backendName:"cpu",kernelFunc:pke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke=FP;function mke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;Ve(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,h=o,d=s,p=l,v=u,{selectedIndices:m,selectedScores:g}=gke(c,f,h,d,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const yke={kernelName:VO,backendName:"cpu",kernelFunc:mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r;Ve(i,"oneHot");const u=he(i.shape),c=new Float32Array(u*o);c.fill(l);const f=n.data.get(i.dataId).values;for(let h=0;h<u;++h)f[h]>=0&&f[h]<o&&(c[h*o+f[h]]=s);return n.makeTensorInfo([...i.shape,o],a,c)}const wke={kernelName:VD,backendName:"cpu",kernelFunc:xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Qh({inputs:{input:r},backend:n}),a=i2({inputs:{x:i},backend:n}),o=Iv({inputs:{input:r},backend:n}),s=i2({inputs:{x:o},backend:n}),l=ca({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return WF({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const bke={kernelName:i_,backendName:"cpu",kernelFunc:i2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Qh({inputs:{input:r},backend:n}),a=XQ({inputs:{x:i},backend:n}),o=Iv({inputs:{input:r},backend:n}),s=i2({inputs:{x:o},backend:n}),l=ca({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return WF({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Cke={kernelName:BD,backendName:"cpu",kernelFunc:XQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return r2({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(c=>{lO(a,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const f=r2({inputs:{input:c},backend:n,attrs:{dim:i}});return s.push(f),f}),u=Rv({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Ske={kernelName:WD,backendName:"cpu",kernelFunc:YQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;Ve(i,"pad");const s=a.map((y,x)=>y[0]+i.shape[x]+y[1]),l=a.map(y=>y[0]),u=n.data.get(i.dataId).values,c=he(i.shape),f=i.shape.length,h=je(i.shape),d=he(s),p=s.length,v=je(s),m=ii(i.dtype,d);o!==0&&m.fill(o);for(let y=0;y<c;y++){const w=ag(y,f,h).map((C,S)=>C+l[S]),b=hl(w,p,v);m[b]=u[y]}return{dataId:n.write(m,s,i.dtype),shape:s,dtype:i.dtype}}const ZQ={kernelName:UD,backendName:"cpu",kernelFunc:Dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke=Zn((t,e)=>Math.pow(t,e)),Tke=br(C1,_ke),Eke={kernelName:C1,backendName:"cpu",kernelFunc:Tke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,s=i.map(m=>n.data.get(m.dataId).values),l=i.map(m=>m.shape),u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,[f,h,d]=gQ(s,l,u,a.shape,a.dtype,c,o.shape),p=f.map(m=>n.makeTensorInfo([m.length],"int32",m)),v=n.makeTensorInfo(d,a.dtype,h);return p.concat([v])}const Nke={kernelName:wq,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=mQ(o,r.shape,r.dtype,s,i.shape,l,a.shape),f=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const Ike={kernelName:bq,backendName:"cpu",kernelFunc:kke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,h=s.map(m=>n.data.get(m.dataId).values),d=s.map(m=>m.shape),[p,v]=yQ(u,i.shape,c,a.shape,a.dtype,f,o.shape,h,d,l);return n.makeTensorInfo(p,a.dtype,v)}const $ke={kernelName:Cq,backendName:"cpu",kernelFunc:Rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:a,step:o}=n,s=xQ(r,i,o,a);return e.makeTensorInfo([s.length],a,s)}const Oke={kernelName:WO,backendName:"cpu",kernelFunc:Mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke=Kt(S1,t=>1/t),Fke={kernelName:S1,backendName:"cpu",kernelFunc:Pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Ve(i,"resizeBilinear");const l=je(i.shape),[u,c]=s,[f,h,d,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(he([f,u,c,p])),g=[a&&u>1?h-1:h,a&&c>1?d-1:d],y=[a&&u>1?u-1:u,a&&c>1?c-1:c];let x=0;const w=g[0]/y[0],b=g[1]/y[1];for(let C=0;C<f;C++)for(let S=0;S<u;S++){let D;o?D=w*(S+.5)-.5:D=w*S;const _=Math.max(0,Math.floor(D)),T=D-_,E=Math.min(h-1,Math.ceil(D)),A=C*l[0]+_*l[1],R=C*l[0]+E*l[1];for(let $=0;$<c;$++){let O;o?O=b*($+.5)-.5:O=b*$;const M=Math.max(0,Math.floor(O)),B=O-M,P=Math.min(d-1,Math.ceil(O)),z=A+M*l[2],U=R+M*l[2],H=A+P*l[2],F=R+P*l[2];for(let W=0;W<p;W++){const j=v[z+W],K=v[U+W],Y=v[H+W],Z=v[F+W],se=j+(Y-j)*B,ee=K+(Z-K)*B,oe=se+(ee-se)*T;m[x++]=oe}}}return n.makeTensorInfo([f,u,c,p],"float32",m)}const zke={kernelName:KD,backendName:"cpu",kernelFunc:Lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Ve([a,i],"resizeBilinearGrad");const s=je(i.shape),[l,u,c,f]=i.shape,[,h,d]=a.shape,p=new Float32Array(l*u*c*f),v=[o&&h>1?u-1:u,o&&d>1?c-1:c],m=[o&&h>1?h-1:h,o&&d>1?d-1:d],g=v[0]/m[0],y=v[1]/m[1],x=n.data.get(a.dataId).values;let w=0;for(let b=0;b<l;b++){const C=b*s[0];for(let S=0;S<h;S++){const D=S*g,_=Math.floor(D),T=Math.min(Math.ceil(D),u-1),E=C+_*s[1],A=C+T*s[1],R=D-_,$=1-R;for(let O=0;O<d;O++){const M=O*y,B=Math.floor(M),P=Math.min(Math.ceil(M),c-1),z=M-B,U=1-z,H=E+B*s[2],F=E+P*s[2],W=A+B*s[2],j=A+P*s[2],K=$*U,Y=$*z,Z=R*U,se=R*z;for(let ee=0;ee<f;ee++){const oe=x[w++];p[H+ee]+=oe*K,p[F+ee]+=oe*Y,p[W+ee]+=oe*Z,p[j+ee]+=oe*se}}}}return n.makeTensorInfo([l,c,u,f],"float32",p)}const Vke={kernelName:HO,backendName:"cpu",kernelFunc:Bke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Ve(i,"resizeNearestNeighbor");const l=je(i.shape),[u,c]=s,[f,h,d,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(f*u*c*p),g=[a&&u>1?h-1:h,a&&c>1?d-1:d],y=[a&&u>1?u-1:u,a&&c>1?c-1:c],x=g[0]/y[0],w=g[1]/y[1];let b=0;for(let C=0;C<f;C++){const S=C*l[0];for(let D=0;D<u;D++){const _=o?x*(D+.5):x*D;let T=Math.min(h-1,a?Math.round(_):Math.floor(_));o&&(T=Math.max(0,T));const E=S+T*l[1];for(let A=0;A<c;A++){const R=o?w*(A+.5):w*A;let $=Math.min(d-1,a?Math.round(R):Math.floor(R));o&&($=Math.max(0,$));const O=E+$*l[2];for(let M=0;M<p;M++){const B=v[O+M];m[b++]=B}}}}return n.makeTensorInfo([f,u,c,p],i.dtype,m)}const Uke={kernelName:qD,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Ve([a,i],"resizeNearestNeighborGrad");const s=je(i.shape),l=je(a.shape),[u,c,f,h]=i.shape,[,d,p]=a.shape,v=new Float32Array(u*c*f*h),m=n.data.get(a.dataId).values,g=[o&&d>1?c-1:c,o&&p>1?f-1:f],y=[o&&d>1?d-1:d,o&&p>1?p-1:p],x=g[0]/y[0],w=g[1]/y[1],b=1/x,C=1/w,S=Math.ceil(b)*2+2,D=Math.ceil(C)*2+2;for(let _=0;_<u;_++){const T=_*s[0];for(let E=0;E<c;E++){const A=T+E*s[1],R=Math.floor(E*b),$=Math.floor(R-S/2);for(let O=0;O<f;O++){const M=A+O*s[2],B=Math.floor(O*C),P=Math.floor(B-D/2);for(let z=0;z<h;z++){let U=0;for(let H=0;H<S;H++){const F=H+$;if(F<0||F>=d)continue;const W=T+F*l[1],j=F*x,K=Math.min(c-1,o?Math.round(j):Math.floor(j));if(E===K)for(let Y=0;Y<D;Y++){const Z=Y+P;if(Z<0||Z>=p)continue;const se=W+Z*l[2],ee=Z*w,oe=Math.min(f-1,o?Math.round(ee):Math.floor(ee));O===oe&&(U+=m[se+z])}}v[M+z]=U}}}}return n.makeTensorInfo(i.shape,i.dtype,v)}const Hke={kernelName:GO,backendName:"cpu",kernelFunc:Gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r;Ve(i,"reverse");const o=i.shape.length,s=_t(a,i.shape);if(o===0)return Sl({inputs:{x:i},backend:n});const l=new Br(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const f=l.indexToLoc(c),h=f.slice();s.forEach(d=>h[d]=i.shape[d]-1-h[d]),l.set(u.get(...h),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const qke={kernelName:XD,backendName:"cpu",kernelFunc:jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke={kernelName:QO,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=ii(r.dtype,he(r.shape)),[u,c,f,h]=r.shape,[d,p]=XP(o,c,f),v=255,m=Math.sin(i),g=Math.cos(i),y=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const b=w*f*c*h;for(let C=0;C<c;C++){const S=C*(f*h);for(let D=0;D<f;D++){const _=D*h;for(let T=0;T<h;T++){const E=[u,C,D,T],A=E[2],R=E[1];let $=(A-d)*g-(R-p)*m,O=(A-d)*m+(R-p)*g;$=Math.round($+d),O=Math.round(O+p);let M=a;if(typeof a!="number"&&(T===3?M=v:M=a[T]),$>=0&&$<f&&O>=0&&O<c){const P=O*(f*h),z=$*h,U=b+P+z+T;M=y[U]}const B=b+S+_+T;l[B]=M}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke=Kt(T1,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Yke={kernelName:T1,backendName:"cpu",kernelFunc:Xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=xd(a,i,o),h=!0,d=n.bufferSync(i),p=n.bufferSync(a),v=ch(d,p,o,f,u,l,s,c,0,h);return n.makeTensorInfo(o,v.dtype,v.values)}const Qke={kernelName:Sq,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function eIe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function tIe(t,e,n,r,i,a){const o=Hn("int32",n*i);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*i;for(let c=0;c<i;++c)o[u+c]=a==="left"?Jke(l,e[c+u]):eIe(l,e[c+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,u=tIe(s,l,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",u)}const rIe={kernelName:_q,backendName:"cpu",kernelFunc:nIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e;Ve([r,i,a],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=_a(i.dtype,a.dtype),f=ai(he(i.shape),c);let h=0;const d=o===0||o>1||i.shape.length===1?1:he(i.shape.slice(1));for(let p=0;p<s.length;p++)for(let v=0;v<d;v++)s[p]===1?f[h++]=l[p]:f[h++]=u[p];return n.makeTensorInfo(i.shape,c,f)}const aIe={kernelName:YD,backendName:"cpu",kernelFunc:iIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe=v_,sIe=g_,lIe=Kt(A1,t=>t>=0?sIe*t:oIe*(Math.exp(t)-1)),uIe={kernelName:A1,backendName:"cpu",kernelFunc:lIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIe=Kt(I1,t=>t<0?-1:t>0?1:0),fIe={kernelName:I1,backendName:"cpu",kernelFunc:cIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe=Kt(N1,t=>Math.sin(t)),dIe={kernelName:N1,backendName:"cpu",kernelFunc:hIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe=Kt(k1,t=>Math.sinh(t)),vIe={kernelName:k1,backendName:"cpu",kernelFunc:pIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe=11920928955078125e-23,HB=Math.log(gIe)+2,mIe=Kt($1,t=>{const e=t>-HB,n=t<HB,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),yIe={kernelName:$1,backendName:"cpu",kernelFunc:mIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;Ve([i],"spaceToBatchND");const s=he(a),l=[[0,0]];l.push(...o);for(let C=1+a.length;C<i.shape.length;++C)l.push([0,0]);const u=ZQ.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=j1(u.shape,a,s,!1),f=q1(c.length,a.length,!1),h=K1(u.shape,a,s,!1),v=cn({inputs:{x:u},backend:n,attrs:{shape:c}}),y=Ki({inputs:{x:v},backend:n,attrs:{perm:f}}),b=cn({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}const wIe={kernelName:JD,backendName:"cpu",kernelFunc:xIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values[0],[f,h,d,p,v]=SQ(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const CIe={kernelName:Tq,backendName:"cpu",kernelFunc:bIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[u,c,f]=DQ(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const DIe={kernelName:Eq,backendName:"cpu",kernelFunc:SIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=LF(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const TIe={kernelName:Aq,backendName:"cpu",kernelFunc:_Ie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=LF(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const AIe={kernelName:Nq,backendName:"cpu",kernelFunc:EIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:h}=xd(a,i,s),d=!1,p=n.bufferSync(i);let v;switch(a.dtype){case"bool":{const m=n.bufferSync(a),g=!!n.data.get(o.dataId).values[0];v=ch(p,m,s,h,c,u,l,f,g,d);break}case"float32":{const m=n.bufferSync(a),g=n.data.get(o.dataId).values[0];v=ch(p,m,s,h,c,u,l,f,g,d);break}case"int32":{const m=n.bufferSync(a),g=n.data.get(o.dataId).values[0];v=ch(p,m,s,h,c,u,l,f,g,d);break}case"string":{const m=n.bufferSync(a),g=Lc(n.data.get(o.dataId).values[0]);v=ch(p,m,s,h,c,u,l,f,g,d);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,v.dtype,v.values)}const kIe={kernelName:kq,backendName:"cpu",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=_t(o,i.shape)[0],l=cF(i,a,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(f=>{const h=[...c];h[s]=f;const d=Jh({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[s]+=f,d})}const RIe={kernelName:e_,backendName:"cpu",kernelFunc:IIe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:jO,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ve(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const l=i[s];a[s]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe=Kt(B1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),OIe={kernelName:B1,backendName:"cpu",kernelFunc:MIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r;Ve(i,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:w}=jP(i.shape,a,o,s,l,u,c,f,h);let b;if(v)b=cn({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){V(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=UP(y,x,w),S=Jh({inputs:{x:i},backend:n,attrs:{begin:y,size:C}});b=cn({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else{const C=n.bufferSync(i),S=EQ(d,C,w,y);b=n.makeTensorInfo(p,S.dtype,S.values)}return b}const FIe={kernelName:KO,backendName:"cpu",kernelFunc:PIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,h=n.data.get(c.dataId).values,d=n.data.get(f.dataId).values,[p,v]=AQ(h,d,i,a,o,s,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",v)]}const zIe={kernelName:Iq,backendName:"cpu",kernelFunc:LIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,f]=NQ(s,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const VIe={kernelName:Rq,backendName:"cpu",kernelFunc:BIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(a.dataId).values,s=kQ(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const UIe={kernelName:$q,backendName:"cpu",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe=Kt(F1,t=>Math.tan(t)),HIe={kernelName:F1,backendName:"cpu",kernelFunc:GIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe=Kt(L1,t=>Math.tanh(t)),qIe={kernelName:L1,backendName:"cpu",kernelFunc:jIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:a}=e,{sliceRank:o,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=xd(a,i,r.shape),f=!1,h=n.bufferSync(i),d=n.bufferSync(a),p=n.bufferSync(r),v=ch(h,d,r.shape,c,l,s,o,u,p,f);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const XIe={kernelName:Dq,backendName:"cpu",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;Ve(i,"tile");const o=RQ(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const ZIe={kernelName:z1,backendName:"cpu",kernelFunc:YIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r;Ve(i,"topk");const s=n.data.get(i.dataId).values,[l,u]=MQ(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const JIe={kernelName:XO,backendName:"cpu",kernelFunc:QIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,f,h,d]=i.shape,[p,v]=u??[f,h],m=[c,p,v,d],g=je(i.shape),y=g[0],x=g[1],w=g[2],b=je(m),C=b[0],S=b[1],D=b[2],_=ii(i.dtype,he(m));_.fill(l);const T=r.data.get(i.dataId).values,E=r.data.get(a.dataId).values;for(let R=0;R<c;++R){const $=a.shape[0]===1?E:E.subarray(R*8,R*8+8);for(let O=0;O<p;++O)for(let M=0;M<v;++M)for(let B=0;B<d;++B){let P;const z=$[6]*M+$[7]*O+1;if(z===0)continue;const U=($[0]*M+$[1]*O+$[2])/z,H=($[3]*M+$[4]*O+$[5])/z,F=jB(U,h,s),W=jB(H,f,s);switch(o){case"nearest":P=oRe(T,f,h,y,x,w,R,W,F,B,l);break;case"bilinear":P=sRe(T,f,h,y,x,w,R,W,F,B,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const j=R*C+O*S+M*D+B;_[j]=P}return r.makeTensorInfo(m,i.dtype,_)}return{dataId:r.write(_,m,i.dtype),shape:i.shape,dtype:i.dtype}}const tRe={kernelName:YO,backendName:"cpu",kernelFunc:eRe};function jB(t,e,n){switch(n){case"reflect":return nRe(t,e);case"wrap":return rRe(t,e);case"nearest":return aRe(t,e);case"constant":default:return iRe(t)}}function nRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Vh(0,n,e-1)}function rRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Vh(0,n,e-1)}function iRe(t,e){return t}function aRe(t,e){return Vh(0,t,e-1)}function Em(t,e,n,r,i,a,o,s,l,u,c){const f=o*r+s*i+l*a+u;return 0<=s&&s<e&&0<=l&&l<n?t[f]:c}function oRe(t,e,n,r,i,a,o,s,l,u,c){const f=Math.round(s),h=Math.round(l);return Em(t,e,n,r,i,a,o,f,h,u,c)}function sRe(t,e,n,r,i,a,o,s,l,u,c){const f=Math.floor(s),h=Math.floor(l),d=f+1,p=h+1,v=(p-l)*Em(t,e,n,r,i,a,o,f,h,u,c)+(l-h)*Em(t,e,n,r,i,a,o,f,p,u,c),m=(p-l)*Em(t,e,n,r,i,a,o,d,h,u,c)+(l-h)*Em(t,e,n,r,i,a,o,d,p,u,c);return(d-s)*v+(s-f)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Ve(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:u}=OQ(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const uRe={kernelName:ZO,backendName:"cpu",kernelFunc:lRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i.shape.length,s=i.shape[a],l=new Array(o-1);let u=0;for(let d=0;d<o;d++)d!==a&&(l[u++]=i.shape[d]);const c=new Array(o).fill(0),f=i.shape.slice();f[a]=1;const h=new Array(s);for(let d=0;d<h.length;d++){c[a]=d;const p=Jh({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});h[d]=cn({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const fRe={kernelName:n_,backendName:"cpu",kernelFunc:cRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r;Ve(i,"unsortedSegmentSum");const s=i.shape.length,l=a.shape.length,u=[],c=[],f=s-l;let h=a;for(let p=0;p<f;++p){const v=r2({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=v,c.push(v)}for(let p=0;p<o;++p){const v=rf(p,"int32"),m=n.makeTensorInfo([],"int32",v),g=YZ({inputs:{a:m,b:h},backend:n}),y=Gc({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=A_({inputs:{a:y,b:i},backend:n}),w=rx({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});u.push(w),c.push(m),c.push(g),c.push(y),c.push(x),c.push(w)}const d=YQ({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const dRe={kernelName:r_,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pRe=[lEe,W_e,cEe,hEe,K_e,pEe,gEe,yEe,wEe,CEe,DEe,TEe,AEe,IEe,$Ee,PEe,LEe,BEe,WEe,oEe,GEe,jEe,KEe,Y_e,YEe,j_e,Q_e,QEe,U_e,eAe,nAe,rAe,aAe,sAe,uAe,fAe,dAe,vAe,mAe,xAe,bAe,SAe,_Ae,EAe,AAe,kAe,RAe,MAe,OAe,PAe,FAe,zAe,WAe,JTe,GAe,J_e,QAe,eTe,JAe,nTe,aNe,oNe,lNe,iTe,oTe,cNe,hNe,pNe,gNe,lTe,cTe,G_e,yNe,tAe,wNe,CNe,DNe,eEe,hTe,pTe,TNe,gTe,ANe,INe,$Ne,PNe,LNe,BNe,VNe,yTe,UNe,HNe,qNe,XNe,ZNe,JNe,tke,wTe,rke,oke,uke,CTe,DTe,hke,vke,yke,TTe,wke,Cke,Ske,ZQ,Eke,nEe,NTe,Nke,Ike,$ke,Oke,H_e,AI,Fke,rEe,iEe,aEe,zke,Vke,Uke,Hke,qke,Kke,Yke,FTe,Qke,rIe,aIe,uIe,zTe,fIe,dIe,vIe,BTe,ske,yIe,wIe,CIe,DIe,TIe,AIe,kIe,RIe,UTe,$Ie,HTe,qTe,OIe,FIe,zIe,VIe,UIe,ZTe,BAe,HIe,qIe,XIe,ZIe,JIe,tRe,ETe,uRe,fRe,dRe,bke];for(const t of pRe)Oq(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eh={},hw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function vRe(t,e){eh[t]=e}function $s(t,e){if(!(t in eh)||e!=null){const r=mRe(t,e);if(r!==null)eh[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=eh[t];return n==null||n.isContextLost()?(delete eh[t],$s(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),eh[t])}function gRe(t){if(!ue().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function mRe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??gRe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete eh[t]},!1),ue().getBool("SOFTWARE_WEBGL_ENABLED")&&(hw.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",hw)||n.getContext("experimental-webgl",hw):n.getContext("webgl2",hw)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Z0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Z0||(Z0={}));var za;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(za||(za={}));var Fr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Fr||(Fr={}));function ix(t,e){return[e,t]}function yRe(t,e){return t*e}function dw(t){const e=he(t),n=Math.ceil(e/4);return Yk(n)}function hg(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function xRe(t,e){const[n,r]=hg(t,e);return n*r*4}function UF(t,e){const n=t;let r,i,a,o,s,l,u,c,f,h;return ue().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,f=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,a=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(t,e){const n=e();return ue().getBool("DEBUG")&&wRe(t),n}function wRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+DRe(t,e))}const bRe=596e-10,CRe=65504;function SRe(t){return!!(ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||bRe<Math.abs(t)&&Math.abs(t)<CRe)}function DRe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function pw(t,e){return Eu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function _Re(t,e){const n=Eu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Pe(t,()=>t.shaderSource(n,e)),Pe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function TRe(t,e){const n=Eu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Pe(t,()=>t.shaderSource(n,e)),Pe(t,()=>t.compileShader(n)),ue().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw QQ(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const ERe=/ERROR: [0-9]+:([0-9]+):/g;function QQ(t,e){const n=ERe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),a=i.length.toString().length+2,o=i.map((f,h)=>jp((h+1).toString(),a)+f);let s=0;for(let f=0;f<o.length;f++)s=Math.max(o[f].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${jp(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function ARe(t){return Eu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function NRe(t,e){if(Pe(t,()=>t.linkProgram(e)),!ue().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function WE(t,e){if(Pe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function kRe(t,e){const n=Eu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Pe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function IRe(t,e){const n=Eu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Pe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Pe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function RRe(t){return Eu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function $Re(t,e){const n=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function MRe(t){return Eu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function qB(t,e,n,r,i,a,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(Pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Pe(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)),Pe(t,()=>t.enableVertexAttribArray(s)),!0)}function ORe(t,e,n){BRe(t,n),Pe(t,()=>t.activeTexture(t.TEXTURE0+n)),Pe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function PRe(t,e,n){return Eu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function FRe(t,e,n){return t.getUniformLocation(e,n)}function LRe(t,e,n,r){Pe(t,()=>ORe(t,e,r)),Pe(t,()=>t.uniform1i(n,r))}function UE(t,e,n){Pe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Pe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function KB(t,e){Pe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Pe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function vw(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+zRe(t,e))}function zRe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Eu(t,e,n){const r=Pe(t,()=>e());if(r==null)throw new Error(n);return r}function BRe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function $v(t,e=2){return he(t.slice(0,t.length-e))}function Mv(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function gw(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[$v(t),...Mv(t)]),e}function VRe(t,e=!1){let n=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ue().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ue().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?sO(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=nf(t).newShape);let i=he(t),a=null;t.length<=1&&i<=n?a=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const s=$v(t);let l=2,u=2;t.length&&([l,u]=Mv(t)),i=s*(l/2)*(u/2),a=Yk(i).map(c=>c*2)}else a=Yk(i);return a}function mw(t){return t%2===0}function a2(t,e){if(t=t.slice(-2),e=e.slice(-2),Bt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||mw(n)&&mw(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&mw(t[0])&&mw(e[0])}let GE,HE;function WRe(t){if(GE==null){const e=$s(t);GE=e.getParameter(e.MAX_TEXTURE_SIZE)}return GE}function URe(t){if(HE==null){const e=$s(t);HE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,HE)}function GRe(t){if(t===0)return 0;let e;const n=$s(t);return No(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:No(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function No(t,e){return t.getExtension(e)!=null}function XB(t){try{if($s(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function HRe(t){if(t===0)return!1;const e=$s(t);if(t===1){if(!No(e,"OES_texture_float"))return!1}else if(!No(e,"EXT_color_buffer_float"))return!1;return kI(e)}function jRe(t){if(t===0)return!1;const e=$s(t);if(t===1){if(!No(e,"OES_texture_float")||!No(e,"WEBGL_color_buffer_float"))return!1}else{if(No(e,"EXT_color_buffer_float"))return kI(e);const r="EXT_color_buffer_half_float";if(No(e,r)){const i=e.getExtension(r);return qRe(e,i)}return!1}return kI(e)}function kI(t){const e=UF(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),o}function qRe(t,e){const n=UF(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,a=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function KRe(t){return t!==2?!1:$s(t).fenceSync!=null}function ax(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ue=ue();Ue.registerFlag("HAS_WEBGL",()=>Ue.getNumber("WEBGL_VERSION")>0);Ue.registerFlag("WEBGL_VERSION",()=>XB(2)?2:XB(1)?1:0);Ue.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ue.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ue.get("WEBGL_VERSION")===2);Ue.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ue.registerFlag("WEBGL_PACK",()=>Ue.getBool("HAS_WEBGL"));Ue.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_CLIP",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_PACK_REDUCE",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_CONV_IM2COL",()=>Ue.getBool("WEBGL_PACK"));Ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>WRe(Ue.getNumber("WEBGL_VERSION")));Ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>URe(Ue.getNumber("WEBGL_VERSION")));Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ue.getNumber("WEBGL_VERSION");return t===0?0:GRe(t)});Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Qq());Ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>HRe(Ue.getNumber("WEBGL_VERSION")));Ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ue.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>jRe(Ue.getNumber("WEBGL_VERSION")));Ue.registerFlag("WEBGL_FENCE_API_ENABLED",()=>KRe(Ue.getNumber("WEBGL_VERSION")));Ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ue.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ue.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Qq()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ue.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ue.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ue.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ue.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ue.registerFlag("WEBGL_EXP_CONV",()=>!1);Ue.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ue.getBool("IS_TEST"));Ue.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ue.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ue.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ue.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki(){let t,e,n,r,i,a,o,s,l,u;return ue().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=ue().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cd(t,e,n="index"){const r=je(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${i}`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i}`:`index -= ${t[a]} * ${i}`;return`${o}; ${s};`}).join("")}function N_(t,e,n="index"){const r=je(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${o}; ${s};`}).join("")}function XRe(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function YRe(t,e,n="index"){const r=t.map((a,o)=>o),i=XRe(r,e);return i.map((a,o)=>{const s=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${s}; ${l};`}).join("")}function GF(t){const e=je(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function HF(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const JQ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:eJ}=BCe;function ZRe(t,e,n){const r=[];if(t.forEach(d=>{const p=he(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),n.enableShapeUniforms){const{uniformShape:v}=jF(n.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const i=r.join(`
`),a=t.map(d=>QRe(d,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=ki(),l=t$e(s);let u,c,f=i$e(s);return e.isPacked?(u=JRe(e.logicalShape,o,n.enableShapeUniforms),c=r$e(s)):(u=e$e(e.logicalShape,o,n.enableShapeUniforms),c=n$e(s)),n.packedInputs&&(f+=l$e),[f,l,c,i,u,a,n.userCode].join(`
`)}function dg(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return w$e(t,e);case 1:return C$e(t,e);case 2:return D$e(t,e);case 3:return T$e(t,e);case 4:return A$e(t,e);case 5:return N$e(t);case 6:return k$e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function tJ(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return x$e(t);case 1:return b$e(t,e);case 2:return S$e(t,e);case 3:return _$e(t,e);default:return E$e(t,e)}}function QRe(t,e,n=!1,r){let i="";n?i+=tJ(t,r):i+=dg(t,r);const a=t.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(n?i+=I$e(t,e):i+=R$e(t,e)),i}function JRe(t,e,n){switch(t.length){case 0:return nJ();case 1:return u$e(t,e,n);case 2:return m$e(t,e,n);case 3:return f$e(t,e,n);default:return d$e(t,e,n)}}function e$e(t,e,n){switch(t.length){case 0:return nJ();case 1:return c$e(t,e,n);case 2:return y$e(t,e,n);case 3:return h$e(t,e,n);case 4:return p$e(t,e,n);case 5:return v$e(t,e);case 6:return g$e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function t$e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function n$e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function r$e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function i$e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${a$e}
    ${o$e}
    ${s$e}
  `}const a$e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,o$e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,s$e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,l$e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function nJ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function u$e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function c$e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function f$e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),a=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function h$e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${N_(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Cd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function d$e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),a=i*Math.ceil(t[t.length-2]/2);let o=a,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function p$e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${N_(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Cd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function v$e(t,e){const n=Cd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function g$e(t,e){const n=Cd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function m$e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Bt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function y$e(t,e,n){return Bt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Sd(t){return`offset${t}`}function x$e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ki();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function w$e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=t.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Sd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function b$e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=ki();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function C$e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${pg(t)}
      }
    `;const i=t.shapeInfo.texShape,a=i[0],o=i[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Sd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function S$e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=a[0],s=a[1],l=ki();if(a!=null&&Bt(n,a))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function D$e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&Bt(n,a)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=a[0],d=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=nf(n),l=o;if(l.length<n.length){const h=vg(t,l),d=["row","col"];return`
      ${dg(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${gg(d,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${pg(t)}
      }
    `;const u=a[0],c=a[1],f=Sd(r);return c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function _$e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const h=n.slice(1),d=[1,2],p=vg(t,h),v=["b","row","col"];return`
        ${tJ(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${gg(v,d)});
        }
      `}const s=ki();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function T$e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=nf(n),u=s;if(u.length<n.length){const v=vg(t,u),m=["row","col","depth"];return`
        ${dg(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${gg(m,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${pg(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],h=c[1],d=t.shapeInfo.flatOffset;if(h===a&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Sd(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function E$e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=ki();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,o=a.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],f=Math.ceil(a[o-1]/2);let h=f*Math.ceil(a[o-2]/2),d="int b, int row, int col",p=`b * ${h} + (row / 2) * ${f} + (col / 2)`;for(let v=2;v<o-1;v++)d=`int b${v}, `+d,h*=a[o-v-1],p=`b${v} * ${h} + `+p;return`
    vec4 ${r}(${d}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function A$e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,{newShape:l,keptDims:u}=nf(n);if(l.length<n.length){const y=vg(t,l),x=["row","col","depth","depth2"];return`
      ${dg(y,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${gg(x,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${pg(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1],p=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(d===s&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===a&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=Sd(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${v}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${h}, ${d}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function N$e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:l,keptDims:u}=nf(e);if(l.length<e.length){const v=vg(t,l),m=["row","col","depth","depth2","depth3"];return`
      ${dg(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${gg(m,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${a}, ${i})) +
          depth3;
        ${pg(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1];if(d===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(d===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Sd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${a} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${d}, index);
      return sampleTexture(${n}, uv);
    }
  `}function k$e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=nf(e);if(i.length<e.length){const m=vg(t,i),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${dg(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${gg(g,a)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${pg(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Sd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function pg(t){const e=t.name,n=he(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function I$e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=eJ(t.shapeInfo.logicalShape,e.logicalShape),l=Qt(o),u=o-a;let c;const f=["x","y","z","w","u","v"];a===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(y=>`coords.${f[y+u]} = 0;`).join(`
`);let h="";o<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((y,x)=>`coords.${f[x+u]}`).join(", ");let d="return outputValue;";const v=he(t.shapeInfo.logicalShape)===1,g=he(e.logicalShape)===1;if(a===1&&!v&&!g)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!g)o===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(s.length){const y=a-2,x=a-1;s.indexOf(y)>-1&&s.indexOf(x)>-1?d="return vec4(outputValue.x);":s.indexOf(y)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(x)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${d}
    }
  `}function R$e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&Bt(o,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Qt(l),c=eJ(t.shapeInfo.logicalShape,e.logicalShape),f=l-s;let h;const d=["x","y","z","w","u","v"];s===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(v=>`coords.${d[v+f]} = 0;`).join(`
`);let p="";return l<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((v,m)=>`coords.${d[m+f]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function Qt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function jF(t,e,n){const{newShape:r,keptDims:i}=nf(e),a=e.length,o=t&&a===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&a>1&&!Bt(e,n)&&r.length<a||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:i}}function vg(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function gg(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$e(t,e,n,r){const i=n.map((c,f)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:h}}),a=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=ZRe(i,o,e),l=TRe(t.gl,s),u=t.createProgram(l);return ue().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:a,outShapeInfo:o},rJ(t,e,u)))}function rJ(t,e,n){const r=[],i=[];let a,o,s,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),ue().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const h={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${f}Shape`,c),h.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",c),s=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)i.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:o}}function YB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,a=e[r],o=a.shape;if(!Bt(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&a.isUniform)return;const s=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!Bt(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function M$e(t,e,n,r,i){e.program.enableShapeUniforms||(YB(e.inShapeInfos,n),YB([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):t.setOutputMatrixTexture(a.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ue().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:f,shape:h,texShape:d}=e.variablesLocations[l];if(h){const{uniformShape:p}=jF(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(d&&t.gl.uniform2i(d,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(he(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=je(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],f=i[l];if(u.type==="float")t.gl.uniform1fv(c,f);else if(u.type==="vec2")t.gl.uniform2fv(c,f);else if(u.type==="vec3")t.gl.uniform3fv(c,f);else if(u.type==="vec4")t.gl.uniform4fv(c,f);else if(u.type==="int")t.gl.uniform1iv(c,f);else if(u.type==="ivec2")t.gl.uniform2iv(c,f);else if(u.type==="ivec3")t.gl.uniform3iv(c,f);else if(u.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function O$e(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:f}=jF(t.packedInputs,o.shape,l);let h="",d="",p="";if(c.length===1&&t.packedInputs){const b=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${b[0]>1}_${b[1]>1}`}else if(c.length===2&&!t.packedInputs)d=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const b=je(c);p=`${b[0]===l[1]}_${b[b.length-1]===l[1]}`}const v=o.shape.length,m=c.length===2&&Bt(o.shape,l),g=he(o.shape)===1,y=Tv(o.shape,n.shape),x=!t.packedInputs&&v===n.shape.length&&Bt(l,n.texData.texShape),w=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${x}_${u?f:""}_${c.length}_${g}_${y}_${m}_${h}_${d}_${p}_${w}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i+`${ue().getNumber("WEBGL_VERSION")}`,a}function li(t){return ue().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P$e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Z0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ki();this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?N_(["r","c","d"],e):Cd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Z0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ki();this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?N_(["r","c","d"],e):Cd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L$e{constructor(e){this.variableNames=["A"],this.outTexUsage=za.DOWNLOAD;const n=ki();this.outputShape=e,this.userCode=`
      ${JQ}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=za.DOWNLOAD;const n=ki();this.outputShape=e,this.userCode=`
      ${JQ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B$e={R:0,G:1,B:2,A:3};class ZB{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ki();this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let o="";for(let s=0;s<r.length;s++){const l=r[s];o+=`
          if(offset == ${s}) {
            result = values[${B$e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?HF():GF(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V$e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ki();this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length);let i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;i+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?HF():GF(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t){const e=ki(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return _Re(t,n)}function U$e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return kRe(t,e)}function G$e(t){const e=new Uint16Array([0,1,2,2,1,3]);return IRe(t,e)}function ox(t,e,n,r,i,a){$Re(e,n);const o=RRe(t),s=t.TEXTURE_2D;return Pe(t,()=>t.bindTexture(s,o)),Pe(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Pe(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Pe(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Pe(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),ue().getNumber("WEBGL_VERSION")===1?Pe(t,()=>t.texImage2D(s,0,r,e,n,0,i,a,null)):Pe(t,()=>t.texStorage2D(s,1,r,e,n)),Pe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function iJ(t){return t.internalFormatFloat}function H$e(t,e,n,r){const[i,a]=ix(e,n);return ox(t,i,a,iJ(r),r.textureFormatFloat,t.FLOAT)}function aJ(t){return t.internalFormatHalfFloat}function j$e(t,e,n,r){const[i,a]=ix(e,n);return ox(t,i,a,aJ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function oJ(t){return t.downloadTextureFormat}function q$e(t,e,n,r){const[i,a]=ix(e,n);return ox(t,i,a,oJ(r),t.RGBA,t.UNSIGNED_BYTE)}function sJ(t){return t.internalFormatPackedFloat}function K$e(t,e,n,r){const[i,a]=hg(e,n);return ox(t,i,a,sJ(r),t.RGBA,t.FLOAT)}function lJ(t){return t.internalFormatPackedHalfFloat}function X$e(t,e,n,r){const[i,a]=hg(e,n);return ox(t,i,a,lJ(r),t.RGBA,r.textureTypeHalfFloat)}function Y$e(t,e,n){return Pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),qB(t,e,"clipSpacePos",n,3,20,0)&&qB(t,e,"uv",n,2,20,12)}function Z$e(t,e,n,r,i,a){Pe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=a.internalFormatPackedFloat),o.set(i),ue().getNumber("WEBGL_VERSION")===2?Pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):Pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),Pe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Q$e(t,e,n){Pe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ue().getNumber("WEBGL_VERSION")===2?Pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ue().getNumber("WEBGL_VERSION")===2?Pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Pe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function J$e(t,e,n,r){const i=t.createBuffer();Pe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const s=4*4*e*n;return Pe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),Pe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Pe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function eMe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function tMe(t,e,n,r){const[i,a]=ix(e,n),o=4,s=new Uint8Array(yRe(e*n,o));return Pe(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function nMe(t,e,n,r,i,a,o,s){const l=t,u=new Float32Array(xRe(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function rMe(t,e,n){const r=new Float32Array(e*n*4);return Pe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ue().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,vRe(n,e)):this.gl=$s(n),e=this.gl,ue().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>Pe(a,()=>a.createVertexArray()),this.bindVertexArray=o=>Pe(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>Pe(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>Pe(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Pe(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>Pe(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Pe(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>Pe(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ue().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=pw(this.gl,a),No(this.gl,o))this.textureHalfFloatExtension=pw(this.gl,o);else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),No(this.gl,i))this.colorBufferHalfFloatExtension=pw(this.gl,i);else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",No(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(No(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=U$e(this.gl),this.indexBuffer=G$e(this.gl),this.framebuffer=MRe(this.gl),this.textureConfig=UF(this.gl,this.textureHalfFloatExtension)}get debug(){return ue().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Pe(e,()=>e.finish()),Pe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Pe(e,()=>e.deleteFramebuffer(this.framebuffer)),Pe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Pe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Pe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),H$e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),j$e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),q$e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Q$e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),Z$e(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),X$e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),K$e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(KB(this.gl,this.framebuffer),this.outputTexture=null),Pe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>tMe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,a,o){return nMe(this.gl,e,n,r,i,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return eMe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=J$e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ue().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(a,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=a}else ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>rMe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=W$e(n));const r=ARe(n);Pe(n,()=>n.attachShader(r,this.vertexShader)),Pe(n,()=>n.attachShader(r,e)),NRe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&WE(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Pe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Y$e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Pe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&WE(this.gl,this.program),Pe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?PRe(this.gl,e,n):FRe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Pe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),LRe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,a]=hg(n,r);this.setOutputMatrixTextureDriver(e,i,a)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&WE(this.gl,this.program),vw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Pe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Pe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=pw(this.gl,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await P5(()=>this.disposed||this.isQueryAvailable(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=iMe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ue().platform&&(r=ue().platform.setTimeoutCustom.bind(ue().platform)),P5(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),UE(this.gl,e,this.framebuffer),this.debug&&vw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(UE(this.gl,this.outputTexture,this.framebuffer),this.debug&&vw(this.gl)):KB(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;UE(i,e,this.framebuffer),this.debug&&vw(i),this.outputTexture=e,Pe(i,()=>i.viewport(0,0,n,r)),Pe(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Pe(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function iMe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:aMe,bincountImpl:uJ,bincountReduceImpl:oMe,bitwiseAndImpl:sMe,castImpl:lMe,ceilImpl:uMe,concatImpl:cMe,equalImpl:fMe,expImpl:hMe,expm1Impl:dMe,floorImpl:pMe,gatherNdImpl:vMe,gatherV2Impl:gMe,greaterImpl:mMe,greaterEqualImpl:yMe,lessImpl:xMe,lessEqualImpl:wMe,linSpaceImpl:bMe,logImpl:CMe,maxImpl:SMe,maximumImpl:DMe,minimumImpl:_Me,multiplyImpl:TMe,negImpl:EMe,notEqualImpl:AMe,prodImpl:NMe,raggedGatherImpl:kMe,raggedRangeImpl:IMe,raggedTensorToTensorImpl:RMe,rangeImpl:$Me,rsqrtImpl:MMe,scatterImpl:OMe,sigmoidImpl:PMe,simpleAbsImpl:cJ,sliceImpl:FMe,sparseFillEmptyRowsImpl:LMe,sparseReshapeImpl:zMe,sparseSegmentReductionImpl:fJ,sqrtImpl:BMe,staticRegexReplaceImpl:VMe,stridedSliceImpl:WMe,stringNGramsImpl:UMe,stringSplitImpl:GMe,stringToHashBucketFastImpl:HMe,subImpl:jMe,tileImpl:qMe,topKImpl:KMe,transposeImpl:qF,uniqueImpl:XMe}=QTe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJ(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ci(t,e){return e===1?[t]:hJ(t,e)}function YMe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZMe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=li(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ci("rc",this.rank),r=Qt(this.rank),i=this.getOutOfBoundsCondition(n),a=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dJ{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${QMe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?HF():GF(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function QMe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?YRe(["r","c","d"],"inputShape"):Cd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JMe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=JB(n,r),a=e8(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=QB(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let s;return i===Fr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Fr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Fr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Fr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Fr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const a=JB(r,i),o=e8(n,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);const s=QB(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=ue().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function eOe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function QB(t,e,n,r,i){const a=tOe(e,r);let o;if(i){const[l,u]=hg(t[0],t[1]);o=l*u}else{const[l,u]=ix(t[0],t[1]);o=l*u}const s=eOe(n,a);return o*s}function tOe(t,e){switch(t){case Fr.PACKED_2X2_FLOAT32:return sJ(e);case Fr.PACKED_2X2_FLOAT16:return lJ(e);case Fr.UNPACKED_FLOAT32:return iJ(e);case Fr.UNPACKED_FLOAT16:return aJ(e);case Fr.PACKED_4X1_UNSIGNED_BYTE:return oJ(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function nOe(t){return ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Fr.PACKED_2X2_FLOAT32:Fr.UNPACKED_FLOAT32:t?Fr.PACKED_2X2_FLOAT16:Fr.UNPACKED_FLOAT16}function JB(t,e){if(t===za.UPLOAD)return Fr.PACKED_2X2_FLOAT32;if(t===za.RENDER||t==null)return nOe(e);if(t===za.DOWNLOAD||t===za.PIXELS)return Fr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function e8(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class al{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const qo="if (isnan(x)) return x;",rOe="return x;",t8="return abs(x);",iOe="return (x >= 0.0) ? x : (exp(x) - 1.0);",aOe=qo+`
  return (x < 0.0) ? 0.0 : x;
`,oOe=qo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ku="return x;",sOe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe="return x;",uOe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cOe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fOe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hOe="return 1.0 / (1.0 + exp(-1.0 * x));";class ac{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length);const n=e.length,r=Ci("rc",n),i=Qt(n),a=YMe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOe=FK,vOe=1e-7,gOe=1e-4,yw={};function mOe(t){return t in yw||(yw[t]={}),yw[t]}const yOe=ue().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),xOe=600;function wOe(){return ue().global.screen==null?1024:ue().global.screen.height*ue().global.screen.width*window.devicePixelRatio*xOe/1024/1024}class k_ extends oO{nextDataId(){return k_.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ue().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof jE)n=e;else{const r=$s(ue().getNumber("WEBGL_VERSION"),e);n=new jE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=$s(ue().getNumber("WEBGL_VERSION"));n=new jE(r),this.binaryCache=mOe(ue().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new JMe(this.gpgpu),this.numMBBeforeWarning=wOe(),this.texData=new oq(this,qs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,a,o){const s=this.makeTensorInfo(n,r),l=this.texData.get(s.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,a]},l.texShape=[i,a];const u=gw(n),c=new ZB(u,!1,o),f=this.runWebGLProgram(c,[s],r,[[i,a]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(s),f.dataId}write(e,n,r){if((ue().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ue().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:za.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,a){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:za.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:a,slice:o,shape:s,isPacked:l}=n;if(o!=null){let h;l?h=new ac(s,Ku):h=new al(s,Ku);const d=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:i}],i),p=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Li());let f;if(i==="complex64"){const h=this.readSync(a.real.dataId),d=this.readSync(a.imag.dataId);f=mu(h,d)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=Li()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(v=>p.push(v))}const n=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(a!=null){let p;l?p=new ac(i,Ku):p=new al(i,Ku);const v=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),m=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(ue().getBool("DEBUG")&&!ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ue().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&ue().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...dw(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),v=p[0],m=p[1];f=mu(v,m)}else if(u==null)f=this.getValuesFromTexture(e);else{const p=he(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Pe(p,()=>p.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,f),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&qs().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:a,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let d;l?d=new ac(a,Ku):d=new al(a,Ku);const p=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),v=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),v}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=qs().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:f},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Lc(i));return Dt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Dt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!SRe(r))throw ue().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),a=he(n);if(ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),d=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...dw(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),p}const o=ue().getBool("WEBGL_PACK")&&i===!0,s=o?gw(n):n,l=o?new z$e(s):new L$e(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Wh(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Wh(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);s.kernelMs=Gme(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Li(),endMs:null}}endTimer(e){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Li(),e)}async getQueryTime(e){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:a,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=yOe){return ue().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&he(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Pa("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return pOe(e.shape,n)}packedUnaryOp(e,n,r){const i=new ac(e.shape,n),a=this.compileAndRun(i,[e],r);return qs().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=cJ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,t8,e.dtype);const n=new al(e.shape,t8),r=this.compileAndRun(n,[e]);return qs().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Hy(r[0])){const a=r.map(o=>Ec(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return qs().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new dOe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new ZMe(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[$v(e.shape),...Mv(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[$v(n),...Mv(n)],o=new dJ(a,r),s=!0,l=[r],u=this.runWebGLProgram(o,[i],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:a,dtype:o}=r;if(n!=null){const h=he(a),d=n[0]*n[1]*4;V(h<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=gw(a);let l;i?l=new F$e(s):l=new P$e(s);const u=!0,c=[n??dw(s)],f=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:a,dataId:f.dataId}}runWebGLProgram(e,n,r,i,a=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Z0.DENSE){const g=o??dw(e.outputShape);l.texShape=g.map(y=>y*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),he(s.shape)===0)return l.values=ii(s.dtype,0),s;const u=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(g.dataId);if(y.texture==null){if(!e.packedInputs&&he(g.shape)<=ue().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!y.isPacked!=!!e.packedInputs)g=y.isPacked?this.unpackTensor(g):this.packTensor(g),u.push(g),y=this.texData.get(g.dataId);else if(y.isPacked&&!a2(y.shape,g.shape)){const x=g,w=g.shape;g.shape=y.shape,g=this.packedReshape(g,w),u.push(g),y=this.texData.get(g.dataId),x.shape=w}return{shape:g.shape,texData:y,isUniform:!1}});this.uploadToGPU(s.dataId);const f={shape:s.shape,texData:l,isUniform:!1},h=O$e(e,c,f),d=this.getAndSaveBinary(h,()=>$$e(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let v;p&&(v=this.startTimer()),ue().get("ENGINE_COMPILE_ONLY")||M$e(this.gpgpu,d,c,f,i),u.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const m=ue().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const g=Li();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!ue().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}compileAndRun(e,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ue().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=le(()=>{if(!ue().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ue().getBool("DEBUG");ue().set("DEBUG",!1);const n=this.abs(Vt(1e-8)).dataSync()[0];if(ue().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?vOe:gOe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:a,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Li());let f=n.texShape;if(f==null&&(f=VRe(r,l),n.texShape=f),a!=null){const h=gw(r);let d,p=f[1],v=f[0];const m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!m)&&([p,v]=hg(f[0],f[1])),l?d=new V$e(h,m):d=new ZB(h,m);const g=m?[v,p]:f,y=this.makeTensorInfo(g,i),x=this.texData.get(y.dataId);m?x.usage=za.PIXELS:x.usage=za.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,v,a);const w=[[v,p]],b=!0,C=this.runWebGLProgram(d,[y],i,w,b),S=this.texData.get(C.dataId);n.texShape=S.texShape,n.isPacked=S.isPacked,n.usage=S.usage,ue().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=S.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(y),u&&(this.uploadWaitMs+=Li()-c)}else{const h=this.acquireTexture(f,s,i,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=bOe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*RC(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await nX(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(QQ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:l}=rJ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:a,width:o,channels:s}=e,l=qs().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,n,r,a,o,s);return qs().makeTensorFromDataId(u,n,r,l)}}k_.nextDataId=0;function bOe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Jq()&&lK("webgl",()=>new k_,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KF=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class ed{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=dt(n,r),this.enableShapeUniforms=li(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dd=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class mg{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dt(n,r);const a=this.outputShape.length;this.enableShapeUniforms=li(a);let o="";if(i)if(a===0||he(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Qt(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ci("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const COe={kernelName:h1,backendName:"webgl",kernelFunc:Ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=Ea({inputs:{x:r},backend:n}),l=Ea({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:l},a}const SOe={kernelName:xO,backendName:"webgl",kernelFunc:hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pJ="return (a < 0.) ? b * a : a;",vJ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function DOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r,o=n.makeTensorInfo([],"float32",rf(a,"float32")),s=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mg(vJ,i.shape,o.shape):new ed(pJ,i.shape,o.shape),l=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const _Oe={kernelName:_D,backendName:"webgl",kernelFunc:DOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gJ="return (a < 0.) ? b * a : a;",mJ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function TOe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mg(mJ,r.shape,i.shape):new ed(gJ,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const EOe={kernelName:GD,backendName:"webgl",kernelFunc:TOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yg="if (isnan(x)) return x;";function Mt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const f=s.texData.get(o.dataId),h=n(f.values,l);return s.makeTensorInfo(o.shape,l,h)}const u=ue().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new ac(o.shape,e):c=new al(o.shape,t),s.runWebGLProgram(c,[o],l)}}function Hr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),v=c.texData.get(u.dataId),[m,g]=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(x=>{const[w,b]=x,C={dataId:w.dataId,dtype:w.dtype,shape:l.shape},S={dataId:b.dataId,dtype:b.dtype,shape:u.shape},D=new ed(t,l.shape,u.shape);return c.runWebGLProgram(D,[C,S],_a(w.dtype,b.dtype))}),y=hf({inputs:{real:m,imag:g},backend:c});return c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(g),y}const f=a||_a(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&i!=null){const p=c.texData.get(l.dataId).values,v=c.texData.get(u.dataId).values,m=l.dtype==="string"?yu(p):p,g=l.dtype==="string"?yu(v):v,[y,x]=i(l.shape,u.shape,m,g,f),w=c.makeTensorInfo(x,f),b=c.texData.get(w.dataId);return b.values=y,w}const h=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let d;return h?d=new mg(e,l.shape,u.shape,n):d=new ed(t,l.shape,u.shape),c.runWebGLProgram(d,[l,u],f)}}function Q0(t,e=!1){if(t==="linear")return e?lOe:rOe;if(t==="relu")return e?cOe:aOe;if(t==="elu")return e?uOe:iOe;if(t==="relu6")return e?fOe:oOe;if(t==="prelu")return e?mJ:gJ;if(t==="leakyrelu")return e?vJ:pJ;if(t==="sigmoid")return e?hOe:sOe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yJ{constructor(e,n,r,i=!1,a=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=li(this.outputShape.length);const c=i?e[1]:e[2],f=Math.ceil(c/2),h=i?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:m=`vec4 activation(vec4 x) {
          ${s}
        }`,g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let x="rc.x",w="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${w};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${v[0]});
          result += (${p[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class r8{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8="return a * b;";function XF(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=_a(r.dtype,i.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new r8(n8.REAL,r.shape,i.shape),c=new r8(n8.IMAG,r.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=n.runWebGLProgram(u,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=hf({inputs:{real:h,imag:d},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(n.shouldExecuteOnCPU([r,i])){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=TMe(r.shape,i.shape,s.values,l.values,a),f=n.makeTensorInfo(c,a),h=n.texData.get(f.dataId);return h.values=u,f}let o;return ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new mg(i8,r.shape,i.shape):o=new ed(i8,r.shape,i.shape),n.runWebGLProgram(o,[r,i],a)}const AOe={kernelName:b1,backendName:"webgl",kernelFunc:XF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(t,e,n){const r=[$v(t.shape),...Mv(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[$v(e),...Mv(e)],o=new dJ(a,r),s=!0,l=[r],u=n.runWebGLProgram(o,[i],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=n,s=he(i.shape),l=lq(a,s),u=he(l);V(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!a2(i.shape,l)&&!(c.texture!==null&&a2(c.shape,l))?NOe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const kOe={kernelName:jD,backendName:"webgl",kernelFunc:ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a8{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${Sv(f)?f.toPrecision(2):f}, ones);`}let c="";a%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IOe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";n==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):n==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=p_(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function _d(t,e,n,r){const i=ROe(t.shape);let a=t;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:l,outSize:u}=i[o];let c,f;n==="mean"?c=o===0?new a8({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new a8({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new IOe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),f=a,a=r.runWebGLProgram(c,[a],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Oe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Qt(this.rank),a=MOe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function MOe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OOe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Qt(this.rank),a=hJ("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=a[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_(t,e,n){const r=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OOe(t.shape,e):new $Oe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(t,e,n,r){const i=e,a=t.shape.length,o=_t(i,t.shape);let s=o;const l=In(s,a),u=l!=null;let c=t;u&&(c=I_(t,l,r),s=Xn(s.length,a)),Gr("sum",s,a);const[f,h]=$r(c.shape,s);let d=f;n&&(d=or(f,o));const p=he(h),m=he(t.shape)/p,g=ke({inputs:{x:c},attrs:{shape:[m,p]},backend:r}),y=eP(t.dtype),x=_d(g,y,"sum",r),w=ke({inputs:{x},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;return POe(i,a,o,n)}const FOe={kernelName:QD,backendName:"webgl",kernelFunc:R_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ei(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:a}=r,o=n,s=i.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=i.shape[a[c]];let u;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,h=qF(f,i.shape,i.dtype,a,l);u=o.makeTensorInfo(l,i.dtype);const d=o.texData.get(u.dataId);d.values=h}else u=I_(i,a,o);return u}const LOe={kernelName:qp,backendName:"webgl",kernelFunc:Ei};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ=1e3;function o2({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],d=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],v=t.shape.slice(0,-2),m=e.shape.slice(0,-2),g=he(v),y=he(m),w=dt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([d,p]);V(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=n?[g,f,d]:[g,d,f],C=r?[y,p,h]:[y,h,p],S=ke({inputs:{x:t},backend:i,attrs:{shape:b}}),D=ke({inputs:{x:e},backend:i,attrs:{shape:C}}),_=[S,D],T=Math.max(g,y),E=n?S.shape[1]:S.shape[2],A=a!=null,R=o!=null,$=l==="leakyrelu",O=l!=null?Q0(l,!0):null,M=A||R||$||O!=null;let B;if((d===1||p===1)&&E>xJ&&M===!1){let z=S,U=D;n&&(z=Ei({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),_.push(z)),r&&(U=Ei({inputs:{x:D},backend:i,attrs:{perm:[0,2,1]}}),_.push(U));const H=p!==1,F=p===1;let W=z;H&&(W=ke({inputs:{x:z},backend:i,attrs:{shape:[T,E,1]}}),_.push(W));const j=p===1?2:1;let K=U;F&&(K=ke({inputs:{x:U},backend:i,attrs:{shape:[T,1,E]}}),_.push(K));const Y=XF({inputs:{a:W,b:K},backend:i});B=R_({inputs:{x:Y},backend:i,attrs:{axis:j,keepDims:!0}}),_.push(Y)}else{const z=_a(t.dtype,e.dtype),U=new yJ(b,C,[T,d,p],n,r,A,O,R,$),H=[S,D];if(a!=null&&H.push(a),R&&H.push(o),$){const F=i.makeTensorInfo([],"float32",rf(s,"float32"));H.push(F),_.push(F)}B=i.runWebGLProgram(U,H,z)}const P=ke({inputs:{x:B},backend:i,attrs:{shape:w}});_.push(B);for(const z of _)i.disposeIntermediateTensorInfo(z);return P}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return o2({a:i,b:a,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:f,activation:c})}const BOe={kernelName:$C,backendName:"webgl",kernelFunc:zOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8="return abs(x);";function VOe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),o=cJ(a.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return ue().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new ac(r.shape,o8):i=new al(r.shape,o8),n.runWebGLProgram(i,[r],r.dtype)}const WOe={kernelName:aD,backendName:"webgl",kernelFunc:VOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe=qo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,GOe=Mt({opSnippet:UOe}),HOe={kernelName:jy,backendName:"webgl",kernelFunc:GOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe=qo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,qOe=Mt({opSnippet:jOe}),KOe={kernelName:qy,backendName:"webgl",kernelFunc:qOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8="return a + b;",XOe=Hr({opSnippet:s8,packedOpSnippet:s8,supportsComplex:!0,cpuKernelImpl:aMe}),YOe={kernelName:og,backendName:"webgl",kernelFunc:XOe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZOe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QOe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nb(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ea({inputs:{x:r[0]},backend:n});if(r.length>ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Nb({inputs:r.slice(0,l),backend:n}),c=Nb({inputs:r.slice(l),backend:n});return Nb({inputs:[u,c],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>_a(l,u)),a=r.map(l=>l.shape),s=ue().getBool("WEBGL_PACK")?new QOe(r[0].shape,a):new ZOe(r[0].shape,a);return n.runWebGLProgram(s,r,i)}const JOe={kernelName:hO,backendName:"webgl",kernelFunc:Nb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=_t(a,i.shape);let u=l;const c=In(u,s);let f=i;c!=null&&(f=Ei({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Xn(u.length,s)),Gr("all",u,s);const[h,d]=$r(f.shape,u),p=he(d),v=ke({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=_d(v,v.dtype,"all",n);let g;if(o){const y=or(h,l);g=ke({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=ke({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const tPe={kernelName:dO,backendName:"webgl",kernelFunc:ePe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=_t(a,i.shape);let u=l;const c=In(u,s);let f=i;c!=null&&(f=Ei({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Xn(u.length,s)),Gr("any",u,s);const[h,d]=$r(f.shape,u),p=he(d),v=ke({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=_d(v,v.dtype,"any",n);let g;if(o){const y=or(h,l);g=ke({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=ke({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const rPe={kernelName:pO,backendName:"webgl",kernelFunc:nPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iPe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aPe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=Qt(l),c=Ci("coords",l);let f,h;if(o===1){h=l+1;const D=Qt(h);f=`
        ${D} sourceLocR = ${D}(${c.join()}, 0);
        ++${c[l-1]};
        ${D} sourceLocG = ${D}(${c.join()}, 0);
        ++${c[l-2]};
        ${D} sourceLocA = ${D}(${c.join()}, 0);
        --${c[l-1]};
        ${D} sourceLocB = ${D}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],v=d.map(D=>"int "+D),m=Ci("sourceLocR",h-1).concat("inIdx.r"),g=Ci("sourceLocG",h-1).concat("inIdx.g"),y=Ci("sourceLocB",h-1).concat("inIdx.b"),x=Ci("sourceLocA",h-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",b=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,S=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${b}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(t,e,n,r=null){let i=e.shape[0],a=e.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const o=p_(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},l=new iPe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=wJ(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function bJ(t,e,n,r=null){const i=r!=null?r.shape:e.shape,a=i[i.length-1],o=p_(a),s=new aPe(i,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=bJ(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function CJ(t,e,n,r){const i=[n];if(Gr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!ue().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),a.push(l));const[u,c]=$r(l.shape,i),f=he(c),h=ke({inputs:{x:l},backend:t,attrs:{shape:[-1,f]}});a.push(h);const d=wJ(t,h,r);a.push(d);const p=ke({inputs:{x:d},backend:t,attrs:{shape:u}});return a.forEach(v=>t.disposeIntermediateTensorInfo(v)),p}return bJ(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=_t(a,i.shape);const s=In(o,i.shape.length);let l=i;const u=[];s!=null&&(l=Ei({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),o=Xn(o.length,l.shape.length)),Gr("argMax",[o[0]],l.shape.length);const c=CJ(n,l,o[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const sPe={kernelName:oD,backendName:"webgl",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=_t(a,i.shape);const s=In(o,i.shape.length);let l=i;const u=[];s!=null&&(l=Ei({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),o=Xn(o.length,l.shape.length)),Gr("argMin",[o[0]],l.shape.length);const c=CJ(n,l,o[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const uPe={kernelName:sD,backendName:"webgl",kernelFunc:lPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPe=qo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,fPe=Mt({opSnippet:cPe}),hPe={kernelName:Ky,backendName:"webgl",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dPe=qo+"return log(x + sqrt(x * x + 1.0));",pPe=Mt({opSnippet:dPe}),vPe={kernelName:Xy,backendName:"webgl",kernelFunc:pPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=qo+`
  return atan(x);
`,mPe=Mt({opSnippet:gPe}),yPe={kernelName:Yy,backendName:"webgl",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe=KF+`
  return atan(a, b);
`,wPe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dd+`
  return result;
`,bPe=Hr({opSnippet:xPe,packedOpSnippet:wPe}),CPe={kernelName:Qy,backendName:"webgl",kernelFunc:bPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe=qo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,DPe=Mt({opSnippet:SPe}),_Pe={kernelName:Zy,backendName:"webgl",kernelFunc:DPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J0{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(v||(y="-1.0 / 1e-20"),r){const D=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${d}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${D} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?m:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const b=Math.floor(o/4)*4,C=o%4,S=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${d}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${b}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${b};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${w});
      }
    `}}class YF{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let w="0.0";if(x||(w="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${m}, ${g}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${T} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const S=Math.floor(o/4)*4,D=o%4,_=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${S};
            if (${D===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${D===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${D===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ax(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(si(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ho(i.shape,a,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))return Ea({inputs:{x:i},backend:n});const f=new J0(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const EPe={kernelName:lD,backendName:"webgl",kernelFunc:TPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=_u(i.shape,a,o,c,s,l,u),h=new YF(f,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const NPe={kernelName:uD,backendName:"webgl",kernelFunc:APe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kPe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,f=u-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class IPe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=f-1-e.padInfo.front,v=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${v}, ${m});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],h=_u(o.shape,s,l,f,u,c),d=new IPe(h);return n.runWebGLProgram(d,[i],o.dtype)}const $Pe={kernelName:gO,backendName:"webgl",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;ax([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=Ho(o.shape,s,l,1,u),f=new kPe(c);return n.runWebGLProgram(f,[i],o.dtype)}const OPe={kernelName:vO,backendName:"webgl",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;return o2({a:i,b:a,transposeA:o,transposeB:s,backend:n})}const FPe={kernelName:cD,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LPe{constructor(e,n,r,i,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],dt(e,n),dt(e,r);let s="0.0";i!=null&&(dt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";a!=null&&(dt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zPe{constructor(e,n,r,i,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dt(e,n),dt(e,r);let s="vec4(0.0)";i!=null&&(dt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(dt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=t;V(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,a];let c=null;o!=null&&(c=o.shape,u.push(o));let f=null;s!=null&&(f=s.shape,u.push(s));const h=ue().getBool("WEBGL_PACK_NORMALIZATION")?new zPe(r.shape,i.shape,a.shape,c,f,l):new LPe(r.shape,i.shape,a.shape,c,f,l);return e.runWebGLProgram(h,u,u[0].dtype)},VPe={kernelName:CD,backendName:"webgl",kernelFunc:BPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WPe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Qt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=UPe(this.rank);let i;const a=e.map((o,s)=>`sourceLoc.${II[s]} = start[${s}] + coords.${II[s]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const II=["x","y","z","w","u","v"];function UPe(t){if(t===1)return"sourceLoc";if(t<=6)return II.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Qt(this.rank),r=Ci("coords",this.rank),i=Ci("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t,e,n,r){const i=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=HP(e,je(t.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),a}function xg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r,[s,l]=d_(i,a,o);if(WP(i,s,l),he(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),h=FMe(f.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const{isPacked:u}=n.texData.get(i.dataId),c=GP(i.shape,s,l);if(u||!c){const f=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GPe(l):new WPe(l),h=[s];return n.runWebGLProgram(f,[i],i.dtype,h)}return n.uploadToGPU(i.dataId),HPe(i,s,l,n)}const jPe={kernelName:ZD,backendName:"webgl",kernelFunc:xg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;V(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((y,x)=>y*x),l=j1(i.shape,a,s),u=q1(l.length,a.length),c=K1(i.shape,a,s),f=YP(o,a.length),h=ZP(c,o,a.length),d=[],p=ke({inputs:{x:i},backend:n,attrs:{shape:l}}),v=Ei({inputs:{x:p},backend:n,attrs:{perm:u}}),m=ke({inputs:{x:v},backend:n,attrs:{shape:c}}),g=xg({inputs:{x:m},backend:n,attrs:{begin:f,size:h}});return d.push(p),d.push(v),d.push(m),d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},KPe={kernelName:fD,backendName:"webgl",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.readSync(i.dataId),l=n.readSync(a.dataId),u=uJ(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}const YPe={kernelName:mO,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,QPe=`
  return float(int(a.r) & int(b.r));
`;function JPe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ue().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[c,f]=sMe(r.shape,i.shape,l,u,r.dtype),h=n.makeTensorInfo(f,r.dtype),d=n.texData.get(h.dataId);return d.values=c,h}let s;return a?s=new mg(ZPe,r.shape,i.shape,!1):s=new ed(QPe,r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}const eFe={kernelName:yO,backendName:"webgl",kernelFunc:JPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=dt(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const nFe={kernelName:pq,backendName:"webgl",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rFe="return float(a != b);",SJ=Hr({opSnippet:rFe,cpuKernelImpl:AMe,dtype:"bool"}),iFe={kernelName:zD,backendName:"webgl",kernelFunc:SJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sx(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ea({inputs:{x:i.complexTensorInfos.real},backend:n})}const aFe={kernelName:UO,backendName:"webgl",kernelFunc:sx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe="return float(int(x));";function sFe(t,e){const n=new al(t.shape,oFe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RI(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Ea({inputs:{x:i},backend:n});const o=Nr(i.shape),s=RI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=hf({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(i.dtype==="complex64"){const o=sx({inputs:{input:i},backend:n}),s=RI({inputs:{x:o},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(o),s}if(!uq(i.dtype,a)){const o=Ea({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[s,l,u]=lMe(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,u)}if(a==="int32")return sFe(i,n);if(a==="bool"){const o=n.makeTensorInfo([],"bool",ii("bool",1)),l=SJ({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const lFe={kernelName:Jy,backendName:"webgl",kernelFunc:RI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8="return ceil(x);",uFe=Mt({opSnippet:l8,packedOpSnippet:l8,cpuKernelImpl:uMe}),cFe={kernelName:e1,backendName:"webgl",kernelFunc:uFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fFe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:a,clipValueMax:o}=r;let s;ue().getBool("WEBGL_PACK_CLIP")?s=new hFe(i.shape):s=new fFe(i.shape);const l=[[a],[o]];return n.runWebGLProgram(s,[i],i.dtype,l)}const pFe={kernelName:t1,backendName:"webgl",kernelFunc:dFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vFe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function gFe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),a=new vFe(r.shape),o=[u8(r,i.complexTensorInfos.real),u8(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}const mFe={kernelName:hD,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yFe{constructor(e){this.outputShape=[],this.outputShape=pl(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const i=n.length,a=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xFe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=pl(e,n);const r=this.outputShape,i=r.length,a=Qt(i),o=Ci("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,m)=>`T${m}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][n];const u=s[n],c=s.slice(-2),f=s.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let v=1;v<l.length;v++){const m=l[v-1];h+=`
        if (${u} < ${l[v]}  && ${u} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${xw(s,u,m)}),
            vec2(${xw(c,u,m)}));
        }`}const d=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${d}(${xw(s,u,p)}),
          vec2(${xw(c,u,p)}));`,this.userCode=`
      float getValue(${s.map(v=>"int "+v)}) {
        ${h}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function xw(t,e,n){const r=t.indexOf(e);return t.map((a,o)=>o===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ea({inputs:{x:i.complexTensorInfos.imag},backend:n})}const wFe={kernelName:OO,backendName:"webgl",kernelFunc:$_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Am(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(y=>sx({inputs:{input:y},backend:n})),p=t.map(y=>$_({inputs:{input:y},backend:n})),v=Am(d,e,n),m=Am(p,e,n),g=hf({inputs:{real:v,imag:m},backend:n});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const d=t.map(w=>{const C=[-1,he(w.shape.slice(e))];return ke({inputs:{x:w},backend:n,attrs:{shape:C}})}),p=d.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),v=pl(d.map(w=>w.shape),1),m=d[0].shape[0]===1,g=cMe(p,v,r,m),y=pl(t.map(w=>w.shape),e),x=n.makeTensorInfo(y,r,g);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const a=t.filter(d=>he(d.shape)>0),o=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const d=o?new al(t[0].shape,Ku):new ac(t[0].shape,Ku);return n.runWebGLProgram(d,t,r)}const s=ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const d=[];for(let v=0;v<a.length;v+=s){const m=a.slice(v,v+s);d.push(Am(m,e,n))}const p=Am(d,e,n);for(const v of d)n.disposeIntermediateTensorInfo(v);return p}if(o){const d=new xFe(a.map(p=>p.shape),e);return n.runWebGLProgram(d,a,r)}const{tensors2D:l,outShape:u}=bFe(a,e,n),c=new yFe(l.map(d=>d.shape)),f=n.runWebGLProgram(c,l,r);l.forEach(d=>n.disposeIntermediateTensorInfo(d));const h=ke({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),h}function bFe(t,e,n){const r=pl(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>ke({inputs:{x:a},attrs:{shape:[-1,he(a.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DJ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=_t(i,e[0].shape)[0],o=e.map(u=>u.shape);qP(o,a);const s=pl(e.map(u=>u.shape),a);if(he(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>he(u.shape)>0);return l.length===1?Ea({inputs:{x:l[0]},backend:n}):Am(l,a,n)}const CFe={kernelName:dD,backendName:"webgl",kernelFunc:DJ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _J{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,y=m?2:3,x=m?3:1;let w="",b="";r&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,b="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${b}
        setOutput(result);
      }
    `}}class SFe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TJ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=li(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,f=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<c;m++)h+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<c;m++)h+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(f+1)/2;m++){const g=m*2;if(h+=`
           xC = xCCorner + ${g*l};
           `,s===1){if(g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const y=o%2===0?sO(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):y===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let d="",p="";r&&(i?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:d=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DFe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=li(this.outputShape.length);const{dataFormat:r}=n,i=ki(),a=r==="channelsLast",o=a?1:2,s=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function EJ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],h=n.outChannels,d=n.dataFormat==="channelsLast",p=!1,v=!1;let m;const g=[];if(a!=null){const w=s2(a.shape,d);w!=null&&(a=ke({inputs:{x:a},backend:r,attrs:{shape:w}}),g.push(a))}if(i!=null){const w=s2(i.shape,d);w!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:w}}),g.push(i))}if(!((f===1||h===1)&&c>xJ)&&u.isPacked&&d&&u.texture!=null&&l[2]%2!==0&&Bt(u.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),b={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,V(a2(u.shape,b.shape),()=>`packed reshape ${u.shape} to ${b.shape} isn't free`);const S=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(S);const D=o2({a:b,b:S,backend:r,transposeA:p,transposeB:v,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),_=r.texData.get(D.dataId);V(_.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,_.shape=n.outShape,m=Ea({inputs:{x:D},backend:r}),m.shape=n.outShape,g.push(D)}else{const w=n.outHeight*n.outWidth,b=ke({inputs:{x:t},backend:r,attrs:{shape:d?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=o2({a:d?b:C,b:d?C:b,transposeA:!d,transposeB:v,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});m=ke({inputs:{x:S},backend:r,attrs:{shape:n.outShape}}),g.push(b),g.push(C),g.push(S)}for(const w of g)r.disposeIntermediateTensorInfo(w);return m}function AJ({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:h,dataFormat:d}=n,p=d==="channelsLast",v=l*u*c,m=h*f,g=[n.batchSize,v,m],y=!0,x=!1,w=[];if(a!=null){const P=s2(a.shape,p);P!=null&&(a=ke({inputs:{x:a},backend:r,attrs:{shape:P}}),w.push(a))}if(i!=null){const P=s2(i.shape,p);P!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:P}}),w.push(i))}const b=ke({inputs:{x:e},backend:r,attrs:{shape:[1,v,he(e.shape)/v]}});w.push(b);const C=new DFe(g,n),S=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],D=r.runWebGLProgram(C,[t],"float32",S),_=ke({inputs:{x:D},backend:r,attrs:{shape:g}});w.push(D),w.push(_);const T=i!=null,E=a!=null,A=s==="leakyrelu",R=s?Q0(s,!0):null,$=new yJ(p?_.shape:b.shape,p?b.shape:_.shape,p?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],y,x,T,R,E,A),O=p?[_,b]:[b,_];if(i&&O.push(i),E&&O.push(a),A){const P=r.makeTensorInfo([],"float32",rf(o,"float32"));O.push(P),w.push(P)}const M=r.runWebGLProgram($,O,"float32"),B=ke({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});w.push(M);for(const P of w)r.disposeIntermediateTensorInfo(P);return B}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=Tu(l),h=Ur(i.shape,a.shape,o,u,s,c,!1,f);let d;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))d=EJ({x:i,filter:a,convInfo:h,backend:n});else if(h.strideWidth<=2&&f==="channelsLast"&&ue().getBool("WEBGL_EXP_CONV")){const v=new TJ(h),m=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=n.runWebGLProgram(v,[i,a],"float32",m)}else if(ue().getBool("WEBGL_CONV_IM2COL"))d=AJ({x:i,filter:a,convInfo:h,backend:n});else{const v=new _J(h);d=n.runWebGLProgram(v,[i,a],"float32")}const p=ke({inputs:{x:d},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(d),p}const TFe={kernelName:pD,backendName:"webgl",kernelFunc:_Fe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EFe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AFe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class NFe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class kFe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=Tu(l),h=Ur(i.shape,c,o,1,s,u,!1,f),d=new EFe(h);return n.runWebGLProgram(d,[i,a],"float32")}const RFe={kernelName:wO,backendName:"webgl",kernelFunc:IFe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Fe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=li(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=Tu(u),h=Ur(o,a.shape,s,1,l,c,!1,f);if(ue().getBool("WEBGL_PACK")&&f==="channelsLast"){const d=[[h.strideHeight,h.strideWidth]],p=new $Fe(h);return n.runWebGLProgram(p,[i,a],"float32",d)}else{const d=new AFe(h);return n.runWebGLProgram(d,[i,a],"float32")}}const OFe={kernelName:vD,backendName:"webgl",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,u=of(i.shape,a.shape,o,l,s),c=new SFe(u);return n.runWebGLProgram(c,[i,a],"float32")}const FFe={kernelName:gD,backendName:"webgl",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r,u=of(i.shape,l,o,1,s),c=new NFe(u);return n.runWebGLProgram(c,[i,a],"float32")}const zFe={kernelName:bO,backendName:"webgl",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r,u=of(l,a.shape,s,1,o),c=new kFe(u);return n.runWebGLProgram(c,[i,a],"float32")}const VFe={kernelName:CO,backendName:"webgl",kernelFunc:BFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WFe=yg+`
  return cos(x);
`,UFe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Dd}
  return result;
`,GFe=Mt({opSnippet:WFe,packedOpSnippet:UFe}),HFe={kernelName:n1,backendName:"webgl",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jFe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,qFe=Mt({opSnippet:jFe}),KFe={kernelName:r1,backendName:"webgl",kernelFunc:qFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XFe{constructor(e,n,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[f,h]=r;this.outputShape=[c,f,h,u];const d=i==="bilinear"?1:0,[p,v]=[`${s-1}.0`,`${l-1}.0`],[m,g,y]=f>1?[`${(s-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,w,b]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${w};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${b};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YFe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new XFe(i.shape,a.shape,s,l,u);return n.runWebGLProgram(c,[i,a,o],"float32")},ZFe={kernelName:DO,backendName:"webgl",kernelFunc:YFe};var ey;(function(t){t.Prod="*",t.Sum="+"})(ey||(ey={}));class c8{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===ey.Prod?"1.0":"0.0",s=r?o:`getX(${f8(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=i?`end != ${l-1}`:"end != 0",c=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Qt(a)} coords = getOutputCoords();
        int end = ${h8(a,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${h8(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${f8(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function f8(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function h8(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(t,e,n,r,i,a){const o=e.shape.length,s=In([r],o);let l=e;s!=null&&(l=Ei({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=Xn(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let f=Ea({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const d=new c8(t,l.shape,!1,a),p=[[h]],v=f;f=n.runWebGLProgram(d,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(i){const h=new c8(t,l.shape,i,a),d=f;f=n.runWebGLProgram(h,[f],f.dtype),n.disposeIntermediateTensorInfo(d)}if(s!=null){const h=sf(s),d=Ei({inputs:{x:f},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),d}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return NJ(ey.Prod,i,n,a,o,s)}const JFe={kernelName:SO,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return NJ(ey.Sum,i,n,a,o,s)}const t3e={kernelName:mD,backendName:"webgl",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(a.dataId),c=uJ(l,u,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(a),c=oMe(l,u,o,s);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const r3e={kernelName:_O,backendName:"webgl",kernelFunc:n3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r,s=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],u=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],f=l*a,h=u*a,d=c/(a*a),p=o==="NHWC"?[s,f,h,d]:[s,d,f,h],v=new i3e(p,a,o);return n.runWebGLProgram(v,[i],i.dtype)}const o3e={kernelName:TO,backendName:"webgl",kernelFunc:a3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kJ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=li(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IJ{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=li(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<f;g++)d+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;d+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<f;g++)d+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const y=g*2;if(d+=`
          xC = xCCorner + ${y*u};
          `,l===1){if(y<f&&(s%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,u===1&&y>0?d+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<f)){const x=s%2===0?sO(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,u>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:d+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):x===1?d+=`
                    xC${y+1} = xTexelC${y};
                    `:d+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<f&&(s%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<f&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<f&&(d+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<f&&(d+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<f&&(d+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let p="",v="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),V(si(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=Ur(i.shape,a.shape,o,c,s,u,!0);let h;ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?h=new IJ(f):h=new kJ(f);const d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[i,a],"float32",d)}const l3e={kernelName:yD,backendName:"webgl",kernelFunc:s3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class c3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,f=Ur(i.shape,c,o,s,l,u,!0),h=new u3e(f);return n.runWebGLProgram(h,[i,a],"float32")}const h3e={kernelName:EO,backendName:"webgl",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,f=Ur(c,a.shape,o,s,l,u,!0),h=new c3e(f);return n.runWebGLProgram(h,[i,a],"float32")}const p3e={kernelName:AO,backendName:"webgl",kernelFunc:d3e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],a=he(r.shape),o=ke({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new v3e(a),l=n.runWebGLProgram(s,[o],o.dtype),u=ke({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const m3e={kernelName:vq,backendName:"webgl",kernelFunc:g3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:f,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${f}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,u=V1(i.shape,a.shape,o,s,"NHWC",l);let c;const f=new y3e(u);c=n.runWebGLProgram(f,[i,a],"float32");const h=ke({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const w3e={kernelName:xD,backendName:"webgl",kernelFunc:x3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=aF(i,a.length);sF(o.length,l,a);const{path:u,steps:c}=lF(s,l),f=c.length;let h=null,d=o.length;const p=[];for(let v=0;v<f;++v){for(const m of c[v]){const{permutationIndices:g,expandDims:y}=oF(d,l[m]);let x;uF(g)?x=a[m]:(x=Ei({inputs:{x:a[m]},backend:n,attrs:{perm:g}}),p.push(x));const w=x.shape.slice();for(let b=0;b<y.length;++b)w.splice(y[b],0,1);Bt(x.shape,w)||(x=ke({inputs:{x},backend:n,attrs:{shape:w}}),p.push(x)),h===null?h=x:(h=XF({inputs:{a:x,b:h},backend:n}),p.push(h))}v<f-1&&(u[v]>=0&&(h=R_({inputs:{x:h},backend:n,attrs:{axis:u[v]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const v of p)v!==h&&n.disposeIntermediateTensorInfo(v);return h}const C3e={kernelName:NO,backendName:"webgl",kernelFunc:b3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",D3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_3e=Mt({opSnippet:S3e,packedOpSnippet:D3e}),T3e={kernelName:a1,backendName:"webgl",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3e="return (b >= 0.0) ? a : a * (b + 1.0);",A3e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,N3e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new mg(A3e,r.shape,i.shape):new ed(E3e,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},k3e={kernelName:kO,backendName:"webgl",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e=`
  return vec4(equal(a, b));
`,R3e="return float(a == b);",$3e=Hr({opSnippet:R3e,packedOpSnippet:I3e,dtype:"bool",cpuKernelImpl:fMe}),M3e={kernelName:wD,backendName:"webgl",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${QP};
  float a1 = ${JP};
  float a2 = ${eF};
  float a3 = ${tF};
  float a4 = ${nF};
  float a5 = ${rF};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,P3e=Mt({opSnippet:O3e}),F3e={kernelName:o1,backendName:"webgl",kernelFunc:P3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e=yg+`
  return exp(x);
`,z3e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RJ=Mt({opSnippet:L3e,packedOpSnippet:z3e,cpuKernelImpl:hMe,dtype:"float32"}),B3e={kernelName:s1,backendName:"webgl",kernelFunc:RJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $I(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:a}=e,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(V(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),ke({inputs:{x:a},backend:r,attrs:{shape:s}})}const V3e={kernelName:bD,backendName:"webgl",kernelFunc:$I};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8="return exp(x) - 1.0;",W3e=Mt({opSnippet:d8,packedOpSnippet:d8,cpuKernelImpl:dMe}),U3e={kernelName:l1,backendName:"webgl",kernelFunc:W3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p8{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(t,e,n){const r=n.texData.get(t.dataId),i=he(t.shape),a=t.shape[t.shape.length-1],o=i/a,s=ke({inputs:{x:t},backend:n,attrs:{shape:[o,a]}}),l=s.shape,u=new p8("real",l,e),c=new p8("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=hf({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const v=ke({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3e(t){const{inputs:e,backend:n}=t,{input:r}=e;return $J(r,!1,n)}const H3e={kernelName:IO,backendName:"webgl",kernelFunc:G3e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j3e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||ig(i),a==="string"){const o=Hn(a,he(r));return o.fill(i),e.makeTensorInfo(r,a,o)}else{const o=new j3e(r,i),s=[[i]];return e.runWebGLProgram(o,[],a,s)}}const q3e={kernelName:RO,backendName:"webgl",kernelFunc:lx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K3e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3e={kernelName:$O,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new K3e(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8="return floor(x);",Y3e=Mt({opSnippet:v8,packedOpSnippet:v8,cpuKernelImpl:pMe}),Z3e={kernelName:u1,backendName:"webgl",kernelFunc:Y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,J3e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,eLe=Hr({opSnippet:Q3e,packedOpSnippet:J3e,dtype:"int32"}),tLe={kernelName:c1,backendName:"webgl",kernelFunc:eLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nLe{constructor(e){this.variableNames=["A"];const n=ki(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rLe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ki(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe={kernelName:a0e,backendName:"webgl",kernelFunc:aLe};let Pd,qE=ue().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function aLe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],f=[u,l,a];if(s||o){const v=ue().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Pd==null||v!==qE)&&(qE=v,Pd=document.createElement("canvas").getContext("2d",{willReadFrequently:qE})),Pd.canvas.width=l,Pd.canvas.height=u,Pd.drawImage(i,0,0,l,u),i=Pd.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=za.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const d=ue().getBool("WEBGL_PACK")?new rLe(f):new nLe(f),p=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,v=Tu(c),m=Ur(i.shape,a.shape,l,f,u,h,!1,v);let g;const y=[],x=o!=null,w=s!=null,b=d==="leakyrelu",C=()=>{const D=[i,a],_=(T,E)=>{if(E==="NCHW"&&T.shape.length===1&&T.shape[0]!==1){const A=ke({inputs:{x:T},backend:n,attrs:{shape:[T.shape[0],1,1]}});return y.push(A),A}return T};if(x&&D.push(_(o,c)),w&&D.push(_(s,c)),b){const T=n.makeTensorInfo([],"float32",rf(p,"float32"));D.push(T),y.push(T)}return D};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))g=EJ({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else if(m.strideWidth<=2&&v==="channelsLast"&&ue().getBool("WEBGL_EXP_CONV")){const D=d?Q0(d,!0):null,_=new TJ(m,x,D,w,b),T=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=C();g=n.runWebGLProgram(_,E,"float32",T)}else if(ue().getBool("WEBGL_CONV_IM2COL"))g=AJ({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else{const D=d?Q0(d,!1):null,_=new _J(m,x,D,w,b),T=C();g=n.runWebGLProgram(_,T,"float32")}const S=ke({inputs:{x:g},backend:n,attrs:{shape:m.outShape}});return y.push(g),y.forEach(D=>n.disposeIntermediateTensorInfo(D)),S}const sLe={kernelName:MC,backendName:"webgl",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:h,leakyreluAlpha:d}=r,p=[];let v=c;v==null&&(v=[1,1]),V(si(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const m=Ur(i.shape,a.shape,l,v,u,f,!0),g=ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,y=h?Q0(h,g):null,x=[i,a],w=o!=null,b=s!=null,C=h==="leakyrelu";if(w&&x.push(o),b&&x.push(s),C){const T=n.makeTensorInfo([],"float32",rf(d,"float32"));x.push(T),p.push(T)}let S;g?S=new IJ(m,w,y,b,C):S=new kJ(m,w,y,b,C);const D=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],_=n.runWebGLProgram(S,x,"float32",D);return p.forEach(T=>n.disposeIntermediateTensorInfo(T)),_}const uLe={kernelName:Mq,backendName:"webgl",kernelFunc:lLe};class cLe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=Qt(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=i.shape,o=a[a.length-1],s=he(r.shape),[l,u,c,f]=VP(r,i),h=ke({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),d=ke({inputs:{x:r},backend:n,attrs:{shape:[he(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const g=n.readSync(i.dataId),y=n.bufferSync(r),x=vMe(g,y,r.dtype,u,o,c,f,r.shape,s);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new cLe(o,f,[u,c],r.shape),v=n.runWebGLProgram(p,[d,h],d.dtype),m=ke({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(v),m}const hLe={kernelName:gq,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dLe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Qt(this.rank),i=pLe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function pLe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r,l=_t(o,i.shape)[0];if(ue().get("DEBUG")){const y=n.readSync(a.dataId),x=i.shape[l];for(let w=0;w<y.length;++w){const b=y[w];V(b<=x-1&&b>=0,()=>`GatherV2: the index value ${b} is not in [0, ${x-1}]`)}}const u=fF(i,a,l,s),c=he(a.shape),f=[],h=ke({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),d=ke({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(h),f.push(d);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const y=n.bufferSync(d),x=n.bufferSync(h),w=gMe(x,y,p);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(u.outputShape,w.dtype,w.values)}const v=new dLe(h.shape,p),m=n.runWebGLProgram(v,[h,d],h.dtype);f.push(m);const g=ke({inputs:{x:m},backend:n,attrs:{shape:u.outputShape}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const vLe={kernelName:SD,backendName:"webgl",kernelFunc:MJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe="return float(a > b);",mLe=`
  return vec4(greaterThan(a, b));
`,yLe=Hr({opSnippet:gLe,packedOpSnippet:mLe,cpuKernelImpl:mMe,dtype:"bool"}),xLe={kernelName:DD,backendName:"webgl",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe="return float(a >= b);",bLe=`
  return vec4(greaterThanEqual(a, b));
`,CLe=Hr({opSnippet:wLe,packedOpSnippet:bLe,dtype:"bool",cpuKernelImpl:yMe}),SLe={kernelName:f1,backendName:"webgl",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(t){const{inputs:e,backend:n}=t,{input:r}=e;return $J(r,!0,n)}const _Le={kernelName:MO,backendName:"webgl",kernelFunc:DLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe="return float(!isnan(x) && !isinf(x));",ELe=Mt({opSnippet:TLe,dtype:"bool"}),ALe={kernelName:d1,backendName:"webgl",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe="return float(isinf(x));",kLe=Mt({opSnippet:NLe,dtype:"bool"}),ILe={kernelName:p1,backendName:"webgl",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RLe="return float(isnan(x));",$Le=Mt({opSnippet:RLe,dtype:"bool"}),MLe={kernelName:v1,backendName:"webgl",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe="return float(a < b);",PLe=`
  return vec4(lessThan(a, b));
`,FLe=Hr({opSnippet:OLe,packedOpSnippet:PLe,cpuKernelImpl:xMe,dtype:"bool"}),LLe={kernelName:TD,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe="return float(a <= b);",BLe=`
  return vec4(lessThanEqual(a, b));
`,VLe=Hr({opSnippet:zLe,packedOpSnippet:BLe,cpuKernelImpl:wMe,dtype:"bool"}),WLe={kernelName:ED,backendName:"webgl",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=bMe(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const GLe={kernelName:mq,backendName:"webgl",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe=yg+`
  return x < 0.0 ? 0./0. : log(x);
`,jLe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,qLe=Mt({opSnippet:HLe,packedOpSnippet:jLe,cpuKernelImpl:CMe}),KLe={kernelName:g1,backendName:"webgl",kernelFunc:qLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe=yg+`
  return log(1.0 + x);
`,YLe=Mt({opSnippet:XLe}),ZLe={kernelName:m1,backendName:"webgl",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe="return float(a >= 1.0 && b >= 1.0);",JLe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,e4e=Hr({opSnippet:QLe,packedOpSnippet:JLe,dtype:"bool"}),t4e={kernelName:AD,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e="return float(!(x >= 1.0));",r4e=Mt({opSnippet:n4e}),i4e={kernelName:ND,backendName:"webgl",kernelFunc:r4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e="return float(a >= 1.0 || b >= 1.0);",o4e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,s4e=Hr({opSnippet:a4e,packedOpSnippet:o4e,dtype:"bool"}),l4e={kernelName:kD,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u4e{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c4e{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r,u=ue().getBool("WEBGL_PACK_NORMALIZATION")?new c4e(i.shape,a,o,s,l):new u4e(i.shape,a,o,s,l);return n.runWebGLProgram(u,[i],i.dtype)},h4e={kernelName:ID,backendName:"webgl",kernelFunc:f4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d4e{constructor(e,n,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,f=new d4e(i.shape,s,l,u,c);return n.runWebGLProgram(f,[i,a,o],i.dtype)},v4e={kernelName:PO,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4e(t,e,n,r){const i=he(e),o=he(t.shape)/i,s=ke({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=_d(s,t.dtype,"max",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,l=_t(a,i.shape);let u=l;const c=In(u,s),f=c!=null,h=n.shouldExecuteOnCPU([i]);let d=i;if(f){if(h){const x=n.texData.get(d.dataId).values,w=new Array(s);for(let S=0;S<w.length;S++)w[S]=i.shape[c[S]];const b=qF(x,i.shape,i.dtype,c,w);d=n.makeTensorInfo(w,i.dtype);const C=n.texData.get(d.dataId);C.values=b}else d=I_(i,c,n);u=Xn(u.length,s)}Gr("max",u,s);const[p,v]=$r(d.shape,u);let m=p;o&&(m=or(p,l));let g;if(h){const x=n.texData.get(d.dataId).values,w=SMe(x,he(v),m,i.dtype);g=n.makeTensorInfo(m,i.dtype);const b=n.texData.get(g.dataId);b.values=w}else g=g4e(d,v,m,n);return f&&n.disposeIntermediateTensorInfo(d),g}const m4e={kernelName:RD,backendName:"webgl",kernelFunc:OJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e=KF+`
  return max(a, b);
`,x4e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dd+`
  return result;
`,w4e=Hr({opSnippet:y4e,packedOpSnippet:x4e,cpuKernelImpl:DMe}),b4e={kernelName:y1,backendName:"webgl",kernelFunc:w4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;ax(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(si(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ho(i.shape,a,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))return Ea({inputs:{x:i},backend:n});const f=new J0(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const S4e={kernelName:$D,backendName:"webgl",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=_u(i.shape,a,o,c,s,u,l),h=new YF(f,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const _4e={kernelName:MD,backendName:"webgl",kernelFunc:D4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,l=o-1-e.padInfo.left,u=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class E4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.front,h=u-1-e.padInfo.top,d=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],h=_u(o.shape,s,l,f,u,c),d=new YF(h,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),v=new E4e(h),m=n.runWebGLProgram(v,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}const N4e={kernelName:LO,backendName:"webgl",kernelFunc:A4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;ax([a,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,h=Ho(s.shape,l,u,1,c,f),d=!0,p=new J0(h,"max",d),v=n.runWebGLProgram(p,[s],s.dtype),m=new T4e(h),g=n.runWebGLProgram(m,[i,v],s.dtype);return n.disposeIntermediateTensorInfo(v),g}const I4e={kernelName:FO,backendName:"webgl",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4e(t,e,n,r){let i=new J0(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new J0(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:yq,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];V(si(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Ho(r.shape,i,a,u,o),[f,h]=R4e(r,s,c,l);return[f,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4e(t,e,n,r){const i=he(e),o=he(t.shape)/i,s=ke({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=_d(s,"float32","mean",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e={kernelName:OD,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:a}=e,o=n,s=r.shape.length,l=_t(a,r.shape);let u=l;const c=In(u,s),f=c!=null,h=o.shouldExecuteOnCPU([r]),d=[];let p=r;if(f){if(h){const w=o.texData.get(p.dataId).values,b=new Array(s);for(let D=0;D<b.length;D++)b[D]=r.shape[c[D]];const C=qF(w,r.shape,r.dtype,c,b);p=o.makeTensorInfo(b,r.dtype);const S=o.texData.get(p.dataId);S.values=C}else p=I_(r,c,o);d.push(p),u=Xn(u.length,s)}Gr("sum",u,s);const[v,m]=$r(p.shape,u);let g=v;i&&(g=or(v,l));const y=M4e(p,m,g,o);for(const x of d)o.disposeIntermediateTensorInfo(x);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=_t(a,i.shape);let u=l;const c=In(u,s);let f=i;c!=null&&(f=Ei({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Xn(u.length,i.shape.length)),Gr("min",u,s);const[h,d]=$r(f.shape,u),p=he(d),v=ke({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),m=_d(v,v.dtype,"min",n);let g;if(o){const y=or(h,l);g=ke({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=ke({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(f),g}const F4e={kernelName:PD,backendName:"webgl",kernelFunc:P4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e=KF+`
  return min(a, b);
`,z4e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Dd+`
  return result;
`,B4e=Hr({opSnippet:L4e,packedOpSnippet:z4e,cpuKernelImpl:_Me}),V4e={kernelName:x1,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W4e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,a=Qt(i),o=n.map(c=>c[0]).join(","),s=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,v)=>p[0]+e[v]+p[1]);const i=e.length,a=Qt(i),o=n.map(p=>p[0]).join(","),s=n.map((p,v)=>p[0]+e[v]).join(","),l=Ci("rc",i),u=Ci("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,h=r==="reflect"?0:1;let d="";if(i===1){const p=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const p=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:a}=n,o=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U4e(r.shape,i,a):new W4e(r.shape,i,a);return e.runWebGLProgram(o,[r],r.dtype)},H4e={kernelName:FD,backendName:"webgl",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e=`if (b == 0.0) return NAN;
  return mod(a, b);`,q4e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Dd+`
  return result;
`,K4e=Hr({opSnippet:j4e,packedOpSnippet:q4e}),X4e={kernelName:w1,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=`
if (a == b) {
  return 1.0;
};
return a / b;`,Q4e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,PJ=Hr({opSnippet:Z4e,packedOpSnippet:Q4e,checkOutOfBounds:!0}),J4e={kernelName:i1,backendName:"webgl",kernelFunc:PJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8="return a - b;",FJ=Hr({opSnippet:g8,packedOpSnippet:g8,supportsComplex:!0,cpuKernelImpl:jMe}),eze={kernelName:P1,backendName:"webgl",kernelFunc:FJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=_t([a],i.shape),s=OJ({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=or(s.shape,o),u=ke({inputs:{x:s},backend:n,attrs:{shape:l}}),c=FJ({inputs:{a:i,b:u},backend:n}),f=RJ({inputs:{x:c},backend:n}),h=R_({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),d=ke({inputs:{x:h},backend:n,attrs:{shape:l}}),p=PJ({inputs:{a:f,b:d},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}const tze={kernelName:t_,backendName:"webgl",kernelFunc:LJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nze(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r,l=s?i:LJ({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new Y4e(u,c,a),h=[[o]],d=n.runWebGLProgram(f,[l],"int32",h);return s||n.disposeIntermediateTensorInfo(l),d}const rze={kernelName:xq,backendName:"webgl",kernelFunc:nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize=qo+`
  return -x;
`,aze=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function oze(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[o,s]=EMe(a.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let i;return ue().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new ac(r.shape,aze):i=new al(r.shape,ize),n.runWebGLProgram(i,[r],r.dtype)}const sze={kernelName:LD,backendName:"webgl",kernelFunc:oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lze=OP;function uze(t){Pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(a.dataId),{selectedIndices:f}=lze(u,c,o,s,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const cze={kernelName:zO,backendName:"webgl",kernelFunc:uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fze=PP;function hze(t){Pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),f=n.readSync(a.dataId),{selectedIndices:h,validOutputs:d}=fze(c,f,o,s,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const dze={kernelName:BO,backendName:"webgl",kernelFunc:hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pze=FP;function vze(t){Pa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),f=n.readSync(a.dataId),h=o,d=s,p=l,v=u,{selectedIndices:m,selectedScores:g}=pze(c,f,h,d,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const gze={kernelName:VO,backendName:"webgl",kernelFunc:vze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mze{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r,u=he(i.shape),c=new mze(u,o,s,l),f=ke({inputs:{x:i},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[f],a);n.disposeIntermediateTensorInfo(f);const d=[...i.shape,o],p=ke({inputs:{x:h},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(h),p},xze={kernelName:VD,backendName:"webgl",kernelFunc:yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=sx({inputs:{input:r},backend:n}),a=l2({inputs:{x:i},backend:n}),o=$_({inputs:{input:r},backend:n}),s=l2({inputs:{x:o},backend:n}),l=hf({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return lx({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const wze={kernelName:i_,backendName:"webgl",kernelFunc:l2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=sx({inputs:{input:r},backend:n}),a=zJ({inputs:{x:i},backend:n}),o=$_({inputs:{input:r},backend:n}),s=l2({inputs:{x:o},backend:n}),l=hf({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return lx({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const bze={kernelName:BD,backendName:"webgl",kernelFunc:zJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cze(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return $I({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(c=>{lO(a,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const f=$I({inputs:{input:c},backend:n,attrs:{dim:i}});return s.push(f),f}),u=DJ({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Sze={kernelName:WD,backendName:"webgl",kernelFunc:Cze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dze{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const i=e.length,a=Qt(i),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ze{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,m)=>v[0]+e[m]+v[1]);const i=e.length,a=Qt(i),o=n.map(v=>v[0]).join(","),s=n.map((v,m)=>v[0]+e[m]).join(","),l=Ci("rc",i),u=Ci("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${a} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${c}) {`],d=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let v=0,m=i===1?2:4;v<m;v++)p+=`
        ${h[v]}
        if (${d}) {
          result[${v}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${v}] = getChannel(getX(${u.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BJ=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;if(he(i.shape)===0){const u=a.map((c,f)=>c[0]+i.shape[f]+c[1]);return lx({backend:n,attrs:{shape:u,value:o,dtype:i.dtype}})}const s=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _ze(i.shape,a,o):new Dze(i.shape,a,o),l=[[o]];return n.runWebGLProgram(s,[i],i.dtype,l)},Tze={kernelName:UD,backendName:"webgl",kernelFunc:BJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eze=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Aze=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Dd+`
  return result;
`,Nze=Hr({opSnippet:Eze,packedOpSnippet:Aze}),kze={kernelName:C1,backendName:"webgl",kernelFunc:Nze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ize(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=[],u=_t(a,i.shape);let c=u;const f=In(c,s);let h=i;f!=null&&(h=Ei({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Xn(c.length,s),l.push(h)),Gr("prod",c,s);let d;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:v,outShape:m,outDtype:g}=NMe(h.shape,h.dtype,p,c);d=n.makeTensorInfo(m,g,v)}else{const[p,v]=$r(h.shape,c),m=he(v),g=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,m]}}),y=eP(i.dtype),x=_d(g,y,"prod",n);d=ke({inputs:{x},backend:n,attrs:{shape:p}}),l.push(g),l.push(x)}if(o){l.push(d);const p=or(d.shape,u);d=ke({inputs:{x:d},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const Rze={kernelName:HD,backendName:"webgl",kernelFunc:Ize};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,l=i.map(g=>n.readSync(g.dataId)),u=i.map(g=>g.shape),c=n.readSync(a.dataId),f=n.readSync(o.dataId),[h,d,p]=kMe(l,u,c,a.shape,a.dtype,f,o.shape,s),v=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,a.dtype,d);return v.concat([m])}const Mze={kernelName:wq,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=IMe(o,r.shape,r.dtype,s,i.shape,l,a.shape),f=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const Pze={kernelName:bq,backendName:"webgl",kernelFunc:Oze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fze(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(a.dataId),f=n.readSync(o.dataId),h=s.map(m=>n.readSync(m.dataId)),d=s.map(m=>m.shape),[p,v]=RMe(u,i.shape,c,a.shape,a.dtype,f,o.shape,h,d,l);return n.makeTensorInfo(p,a.dtype,v)}const Lze={kernelName:Cq,backendName:"webgl",kernelFunc:Fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VJ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:a,dtype:o}=n,s=$Me(r,i,a,o);return e.makeTensorInfo([s.length],o,s)},zze={kernelName:WO,backendName:"webgl",kernelFunc:VJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bze="return 1.0 / x;",Vze=Mt({opSnippet:Bze}),Wze={kernelName:S1,backendName:"webgl",kernelFunc:Vze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uze=qo+`
  return (x < 0.0) ? 0.0 : x;
`,Gze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Hze=Mt({opSnippet:Uze,packedOpSnippet:Gze}),jze={kernelName:D1,backendName:"webgl",kernelFunc:Hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qze=qo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Kze=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xze=Mt({opSnippet:qze,packedOpSnippet:Kze}),Yze={kernelName:_1,backendName:"webgl",kernelFunc:Xze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zze{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?s-1:s,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;a?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qze{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?s-1:s,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;a?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,u]=s,c=ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Qze(i.shape,l,u,a,o):new Zze(i.shape,l,u,a,o);return n.runWebGLProgram(c,[i],"float32")}const e5e={kernelName:KD,backendName:"webgl",kernelFunc:Jze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t5e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],f=l[1]/u[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,v=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new t5e(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const r5e={kernelName:HO,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i5e{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?s-1:s,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a5e{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?s-1:s,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,u]=s,c=ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new a5e(i.shape,l,u,a,o):new i5e(i.shape,l,u,a,o);return n.runWebGLProgram(c,[i],i.dtype)}const s5e={kernelName:qD,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l5e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],f=l[1]/u[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,v=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new l5e(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const c5e={kernelName:GO,backendName:"webgl",kernelFunc:u5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f5e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,a=e.map((s,l)=>i(l)).join(","),o=Qt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Ci("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Qt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${a}){
            result.g = ${u(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${a}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const v=e.map((y,x)=>d(x,p)),m=v.join(","),g=v.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${g}))`}function d(p,v){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${v[p]} - 1`:`${v[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r,o=i.shape.length,s=_t(a,i.shape);if(o===0)return Ea({inputs:{x:i},backend:n});const l=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h5e(i.shape,s):new f5e(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}const p5e={kernelName:XD,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v5e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e={kernelName:QO,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=new v5e(r.shape,a),[u,c]=XP(o,r.shape[1],r.shape[2]),f=[[u,c,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,y5e=Mt({opSnippet:m5e}),x5e={kernelName:T1,backendName:"webgl",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e="return inversesqrt(x);",b5e=Mt({opSnippet:w5e,cpuKernelImpl:MMe}),C5e={kernelName:E1,backendName:"webgl",kernelFunc:b5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZF{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Qt(a.length),c=Qt(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let v="";l&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S5e{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=Qt(a.length),c=Qt(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let v="";l&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D5e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=xd(a,i,o),h=[f/u,u];if(f===0)return n.makeTensorInfo(o,i.dtype);const d=ke({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),p=ke({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;ue().getBool("WEBGL_PACK")?m=new S5e(l,s,d.shape.length,p.shape.length,c,h):m=new ZF(l,s,d.shape.length,p.shape.length,c,h);const g=n.runWebGLProgram(m,[p,d,v],p.dtype),y=ke({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),y}const _5e={kernelName:Sq,backendName:"webgl",kernelFunc:D5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T5e{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=ue().getNumber("WEBGL_VERSION")===2?a:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=new T5e(i.shape[0],i.shape[1],a.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",l)}const A5e={kernelName:_q,backendName:"webgl",kernelFunc:E5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N5e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);i=l.join(),a=u.join()}const o=Qt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e,o=new N5e(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],_a(i.dtype,a.dtype))}const I5e={kernelName:YD,backendName:"webgl",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${v_};
  float scale = ${g_};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,$5e=Mt({opSnippet:R5e}),M5e={kernelName:A1,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e=yg+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,P5e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,F5e=Mt({opSnippet:O5e,packedOpSnippet:P5e,cpuKernelImpl:PMe}),L5e={kernelName:R1,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,B5e=Mt({opSnippet:z5e}),V5e={kernelName:I1,backendName:"webgl",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5e=yg+`
  return sin(x);
`,U5e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Dd}
  return result;
`,G5e=Mt({opSnippet:W5e,packedOpSnippet:U5e}),H5e={kernelName:N1,backendName:"webgl",kernelFunc:G5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,q5e=Mt({opSnippet:j5e}),K5e={kernelName:k1,backendName:"webgl",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Y5e=Mt({opSnippet:X5e}),Z5e={kernelName:$1,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;V(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((g,y)=>g*y),l=[[0,0]];l.push(...o);for(let g=1+a.length;g<i.shape.length;++g)l.push([0,0]);const u=[],c=BJ({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=j1(c.shape,a,s,!1),h=q1(f.length,a.length,!1),d=K1(c.shape,a,s,!1),p=ke({inputs:{x:c},backend:n,attrs:{shape:f}}),v=Ei({inputs:{x:p},backend:n,attrs:{perm:h}}),m=ke({inputs:{x:v},backend:n,attrs:{shape:d}});return u.push(c),u.push(p),u.push(v),u.forEach(g=>n.disposeIntermediateTensorInfo(g)),m},J5e={kernelName:JD,backendName:"webgl",kernelFunc:Q5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId)[0],[f,h,d,p,v]=LMe(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const tBe={kernelName:Tq,backendName:"webgl",kernelFunc:eBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[u,c,f]=zMe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const rBe={kernelName:Eq,backendName:"webgl",kernelFunc:nBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iBe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=fJ(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const aBe={kernelName:Aq,backendName:"webgl",kernelFunc:iBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=fJ(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const sBe={kernelName:Nq,backendName:"webgl",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:h}=xd(a,i,s),d=!1;if(a.dtype==="string"){const g=n.bufferSync(i),y=n.bufferSync(a),x=Lc(n.readSync(o.dataId)[0]),w=OMe(g,y,s,h,c,u,l,f,x,d);return n.makeTensorInfo(s,w.dtype,w.values)}const p=new ZF(u,l,i.shape.length,a.shape.length,f,[h,1],d),v=n.runWebGLProgram(p,[a,i,o],a.dtype),m=ke({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(v),m}const uBe={kernelName:kq,backendName:"webgl",kernelFunc:lBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=_t(o,i.shape)[0],l=cF(i,a,s),u=i.shape.length,c=new Array(u).fill(0),f=i.shape.slice();return l.map(h=>{const d=[...f];d[s]=h;const p=xg({inputs:{x:i},backend:n,attrs:{begin:c,size:d}});return c[s]+=h,p})}const fBe={kernelName:e_,backendName:"webgl",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8="return sqrt(x);",hBe=Mt({opSnippet:m8,packedOpSnippet:m8,cpuKernelImpl:BMe}),dBe={kernelName:M1,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe="return x * x;",vBe=Mt({opSnippet:pBe}),gBe={kernelName:jO,backendName:"webgl",kernelFunc:vBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y8="return (a - b) * (a - b);",mBe=Hr({opSnippet:y8,packedOpSnippet:y8}),yBe={kernelName:O1,backendName:"webgl",kernelFunc:mBe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),o=yu(a),s=VMe(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}const wBe={kernelName:qO,backendName:"webgl",kernelFunc:xBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bBe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=qo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new al(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const CBe={kernelName:B1,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SBe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=Qt(r.length),o=Qt(r.length);let s="";if(i===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:w}=jP(i.shape,a,o,s,l,u,c,f,h);let b;if(v)b=ke({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){V(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const S=UP(y,x,w),D=xg({inputs:{x:i},backend:n,attrs:{begin:y,size:S}});b=ke({inputs:{x:D},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(D)}else if(n.shouldExecuteOnCPU([i])){const D=n.readSync(i.dataId),_=Dt(i.shape,i.dtype,D),T=WMe(d,_,w,y);b=n.makeTensorInfo(p,i.dtype,T.values)}else{const D=new SBe(y,w,d);b=n.runWebGLProgram(D,[i],i.dtype)}const C=ke({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),C}const _Be={kernelName:KO,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,h=n.readSync(c.dataId),d=n.readSync(f.dataId),[p,v]=UMe(h,d,i,a,o,s,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",v)]}const EBe={kernelName:Iq,backendName:"webgl",kernelFunc:TBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(a.dataId),l=n.readSync(o.dataId)[0],[u,c,f]=GMe(s,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const NBe={kernelName:Rq,backendName:"webgl",kernelFunc:ABe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(a.dataId),s=HMe(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const IBe={kernelName:$q,backendName:"webgl",kernelFunc:kBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RBe="return tan(x);",$Be=Mt({opSnippet:RBe}),MBe={kernelName:F1,backendName:"webgl",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OBe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,PBe=Mt({opSnippet:OBe}),FBe={kernelName:L1,backendName:"webgl",kernelFunc:PBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LBe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:a,updates:o}=e,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=xd(o,a,i.shape),h=[f/u,u];if(f===0)return n.makeTensorInfo(i.shape,a.dtype);const d=ke({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),p=ke({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),v=ke({inputs:{x:i},backend:n,attrs:{shape:h}}),m=new ZF(l,s,d.shape.length,p.shape.length,c,h,!1,!0),g=n.runWebGLProgram(m,[p,d,v],v.dtype),y=ke({inputs:{x:g},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}const zBe={kernelName:Dq,backendName:"webgl",kernelFunc:LBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BBe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Qt(this.rank),a=VBe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function VBe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),u=i.dtype==="string"?l.map(h=>Lc(h)):l,c=Dt(i.shape,i.dtype,u),f=qMe(c,a);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new BBe(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const WBe={kernelName:z1,backendName:"webgl",kernelFunc:WJ};class UBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class GBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wf(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function x8(t){let e=1;for(;e<t;)e*=2;return e}function HBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r,s=ue().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ue().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||a>l){const T=n.readSync(i.dataId),[E,A]=KMe(T,u,i.dtype,a,o);return[n.makeTensorInfo(E.shape,E.dtype,E.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(a===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[i,lx({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(i.dataId),h=f!==null&&f.isPacked,d=h?n.unpackTensor(i):i,v=he(u)/c,m=ke({inputs:{x:d},attrs:{shape:[v,c]},backend:n});h&&wf(n,d);const g=x8(a),y=x8(c);let x=null;const w=()=>x===null?[m,m]:[m,x],b=(T,E,A)=>{const R=w(),$=new UBe(A),M=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[T],[E]],B=x;x=n.runWebGLProgram($,R,"int32",M),wf(n,B)};for(let T=1;T<g;T*=2){const E=T*2;for(let A=T;A>=1;A/=2)b(E,A,[v,y])}for(let T=y;T>g;T/=2){const E=w(),A=new GBe([v,T/2]),$=[[c],[x===null?1:0],[g]],O=x;x=n.runWebGLProgram(A,E,"int32",$),wf(n,O);const M=g/2,B=M*2;for(let P=M;P>=1;P/=2)b(B,P,x.shape)}let C=x;x=xg({inputs:{x},backend:n,attrs:{begin:0,size:[v,a]}}),wf(n,C);let S=MJ({inputs:{x:m,indices:x},backend:n,attrs:{axis:1,batchDims:1}});wf(n,m);const D=u.slice(0,-1);D.push(a),C=x,x=ke({inputs:{x},attrs:{shape:D},backend:n}),wf(n,C);const _=S;return S=ke({inputs:{x:S},attrs:{shape:D},backend:n}),wf(n,_),[S,x]}const jBe={kernelName:XO,backendName:"webgl",kernelFunc:HBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qBe{constructor(e,n,r,i,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KBe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,f,h,d]=i.shape,[p,v]=u??[f,h],m=[c,p,v,d],g=new qBe(f,h,o,s,l,m);return n.runWebGLProgram(g,[i,a],"float32")}const XBe={kernelName:YO,backendName:"webgl",kernelFunc:KBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;ax(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:u}=XMe(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const ZBe={kernelName:ZO,backendName:"webgl",kernelFunc:YBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,l=i.shape[a],u=new Array(s-1);let c=0;for(let v=0;v<s;v++)v!==a&&(u[c++]=o.shape[v]);const f=[],h=new Array(s).fill(0),d=o.shape.slice();d[a]=1;const p=new Array(l);for(let v=0;v<p.length;v++){h[a]=v;const m=xg({inputs:{x:o},backend:n,attrs:{begin:h,size:d}}),g=ke({inputs:{x:m},backend:n,attrs:{shape:u}});p[v]=g,f.push(m)}return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const JBe={kernelName:n_,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e8e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/r);this.outputShape=[i,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let d="";a%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r,s=i.shape.length,l=[];let u=0;const c=In([u],s);let f=i;c!=null&&(f=Ei({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(f),u=Xn(1,s)[0]);const h=_X(f.shape,u,o),d=he([f.shape[u]]),p=ke({inputs:{x:f},backend:n,attrs:{shape:[-1,d]}});l.push(p);const v=eP(i.dtype),m=(w,b,C,S,D)=>{const _=w.shape[0],T=w.shape[1],E=DX(T,D),A={windowSize:E,inSize:T,batchSize:_,numSegments:D},R=new e8e(A,b),$=n.compileAndRun(R,[w,C],S);if(l.push($),$.shape[1]===D)return $;const O=VJ({backend:n,attrs:{start:0,stop:D,step:1,dtype:"float32"}}),M=WJ({inputs:{x:O},backend:n,attrs:{reps:[T/E]}});return l.push(O),l.push(M),m($,b,M,S,D)},g=m(p,"unsortedSegmentSum",a,v,o),y=ke({inputs:{x:g},backend:n,attrs:{shape:h}});let x=y;if(c!=null){l.push(y);const w=sf(c);x=Ei({inputs:{x},backend:n,attrs:{perm:w}})}return l.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const n8e={kernelName:r_,backendName:"webgl",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=[BOe,WOe,HOe,KOe,YOe,JOe,tPe,rPe,sPe,uPe,hPe,vPe,yPe,CPe,_Pe,EPe,NPe,$Pe,OPe,FPe,VPe,KPe,YPe,eFe,nFe,lFe,cFe,pFe,SOe,mFe,CFe,TFe,RFe,OFe,FFe,zFe,VFe,HFe,KFe,ZFe,JFe,t3e,r3e,o3e,l3e,h3e,p3e,m3e,w3e,C3e,T3e,k3e,M3e,F3e,B3e,V3e,U3e,H3e,q3e,X3e,Z3e,tLe,iLe,sLe,uLe,hLe,vLe,xLe,SLe,COe,_Le,wFe,ALe,ILe,MLe,_Oe,LLe,WLe,GLe,KLe,ZLe,t4e,i4e,l4e,h4e,v4e,m4e,b4e,S4e,_4e,N4e,I4e,$4e,O4e,F4e,V4e,H4e,X4e,rze,AOe,sze,cze,dze,gze,iFe,xze,bze,Sze,Tze,kze,EOe,Rze,Mze,Pze,Lze,zze,aFe,J4e,Wze,jze,Yze,kOe,e5e,r5e,s5e,c5e,p5e,g5e,x5e,C5e,_5e,A5e,I5e,M5e,L5e,V5e,H5e,K5e,jPe,tze,Z5e,J5e,tBe,rBe,aBe,sBe,uBe,fBe,dBe,gBe,yBe,wBe,CBe,_Be,EBe,NBe,IBe,eze,FOe,MBe,FBe,zBe,WBe,jBe,XBe,LOe,ZBe,JBe,n8e,wze];for(const t of r8e)Oq(t);let ww,bw;const i8e=async()=>bw||(bw=await(await fetch("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/metadata.json")).json(),bw),a8e=(t,e)=>t.map(n=>{if(n.length>e.max_len&&n.splice(0,n.length-e.max_len),n.length<e.max_len){const r=[];for(let i=0;i<e.max_len-n.length;++i)r.push(0);n=r.concat(n)}return n}),o8e=async()=>ww||(ww=await x_e("https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json"),ww),s8e=(t,e,n)=>{const i=t.trim().toLowerCase().replace(/(\.|,!)/g,"").split(" ").map(u=>{const c=n.word_index[u];return typeof c>"u"?2:c+n.index_from}),a=a8e([i],n),o=Ab(a,[1,n.max_len]),s=e.predict(o),l=s.dataSync()[0];return s.dispose(),l},l8e=t=>t>.5?"Positive":t>.3?"Neutral":"Negative";async function u8e(t,e,n){const r=await o8e(),i=await i8e();let a=[];const o=e+Cv(5);t.forEach(l=>{let u={...l};u[o]=l8e(s8e(l[e],r,i)),a.push(u)});let s=[...n.columns];return s.splice(s.indexOf(e),0,o),{result:a,rowsAffected:a.length,columns:s}}function c8e(t,e){if(typeof t!="string")return t;for(var n=0,r=t.length;n<r&&t[n]===e;)++n;for(;r>n&&t[r-1]===e;)--r;return n>0||r<t.length?t.substring(n,r):t}function f8e(t,e,n){let r=[];return t.forEach(i=>{let a={...i};a[e]=c8e(i[e],n.character??""),r.push(a)}),{result:r,rowsAffected:r.length}}function h8e(t,e){let n=[];return t.forEach(r=>{let i={...r};i[e]="XXXXXXXX",n.push(i)}),{result:n,rowsAffected:n.length}}function d8e(t,e,n){let r=[],{find:i="",replace:a=""}=n,o=0;return t.forEach(s=>{let l={...s};s[e].includes(i)&&(l[e]=s[e].split(i).join(a),o++),r.push(l)}),{result:r,rowsAffected:o,message:aO(o,e,n)}}const p8e={addPrefixSuffix:Mme,remove_duplicates:Pme,delete_column:Fme,remove_blanks:Lme,duplicate_column:zme,find_and_replace:Bme,sentiment:u8e,trim:f8e,mask:h8e,replace_characters:d8e},v8e={},UJ=nO({name:"Toasts",initialState:v8e,reducers:{addToast:(t,e)=>{t[e.payload.id]=e.payload,setTimeout(()=>{delete t[e.payload.id]},e.payload.timeout||5e3)},removeToast:(t,e)=>{delete t[e.payload.id]}}}),{addToast:g8e,removeToast:m8e}=UJ.actions,y8e=UJ.reducer;function Td(t){const{column:e,type:n,options:r={}}=t;return async function(i,a){const o=a(),s=o.data.transformed,l=o.data.order,u=p8e[n];i(dn({path:"loader",value:!0}));const c=Cv();i(Xj({id:c,data:{type:n,column:e,options:r}})),i(dn({path:"activeTransform",value:c})),setTimeout(async()=>{const f=await u(s,e,{...r,columns:l}),{rowsAffected:h,result:d,columns:p,message:v}=f;h&&(i(bv({path:"transformed",value:d})),p&&i(bv({path:"order",value:p}))),v&&i(g8e({id:Cv(),message:v})),i(dn({path:`execution.${c}`,value:{rowsAffected:h}})),i(dn({path:"loader",value:!1}))})}}const zi={addPrefixSuffix:"addPrefixSuffix",remove_duplicates:"remove_duplicates",delete_column:"delete_column",remove_blanks:"remove_blanks",duplicate_column:"duplicate_column",find_and_replace:"find_and_replace",sentiment:"sentiment",trim:"trim",mask:"mask",replace_characters:"replace_characters"};function x8e(t){return kn({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M16.499 1.843l-1.403-1.403c-0.566-0.566-1.555-0.566-2.122 0l-7.536 7.536-1.722 5.287 5.249-1.765 7.534-7.534c0.283-0.283 0.439-0.66 0.439-1.061s-0.156-0.777-0.439-1.060zM5.584 10.758l0.638-1.957 1.92 1.919-1.942 0.653-0.616-0.615zM6.832 7.996l3.986-3.986 2.11 2.11-3.986 3.986-2.11-2.11zM11.525 3.303l0.729-0.729 2.11 2.11-0.729 0.729-2.11-2.11zM15.792 3.257l-0.72 0.721-2.11-2.11 0.72-0.721c0.19-0.189 0.519-0.189 0.707 0l1.403 1.403c0.094 0.095 0.146 0.22 0.146 0.354s-0.052 0.258-0.146 0.353zM15 7.5h1v9.5h-16v-15h7.5v1h-6.5v13h14v-8.5z"}}]})(t)}function w8e({column:t}){const e=zn(),n=(a,o)=>e(Td({column:t,type:a,options:o})),r=a=>e(dn({path:a,value:{open:!0,column:t}})),i=()=>{e(dn({path:"drawer",value:{open:!0,type:"profile",column:t}}))};return I.jsxs(Su,{role:"list",style:{maxHeight:"90vh",overflow:"auto",width:270},children:[I.jsx(Ge,{text:"Data profile",icon:"panel-stats",onClick:i}),I.jsx(cs,{title:"New Column"}),I.jsx(Ge,{icon:"duplicate",text:"Duplicate this column",onClick:()=>n(zi.duplicate_column)}),I.jsx(Ge,{text:"Insert column",icon:"add-column-right",onClick:i}),I.jsx(cs,{}),I.jsxs(Ge,{text:"Remove rows",icon:"remove",children:[I.jsx(cs,{title:"Select condition"}),I.jsx(Ge,{icon:"applications",text:"Duplicates",onClick:()=>n(zi.remove_duplicates)}),I.jsx(Ge,{icon:"cross",text:"Blanks",onClick:()=>n(zi.remove_blanks)}),I.jsx(Ge,{icon:"filter",text:"Specific values"}),I.jsx(Ge,{icon:"locate",text:"Custom"})]}),I.jsx(Ge,{icon:"search-text",text:"Find and replace",onClick:()=>r("findAndReplace")}),I.jsx(Ge,{icon:"regex",text:"Replace characters"}),I.jsx(Ge,{icon:"one-to-many",text:"Split text"}),I.jsx(Ge,{icon:"many-to-one",text:"Merge text"}),I.jsxs(Ge,{icon:"cut",text:"Trim",children:[I.jsx(cs,{title:"Select character"}),I.jsx(Ge,{text:"Whitespaces",icon:I.jsx(Cj,{size:16}),onClick:()=>n(zi.trim,{character:" "})}),I.jsx(Ge,{text:"Quotes",icon:I.jsx(Tb,{size:16}),onClick:()=>n(zi.trim,{character:'"'})}),I.jsx(Ge,{text:"Remove Prefix",icon:I.jsx(I.Fragment,{children:"-a"})}),I.jsx(Ge,{text:"Remove Suffix",icon:I.jsx(I.Fragment,{children:"a-"})}),I.jsx(Ge,{text:"Custom",icon:I.jsx(I.Fragment,{children:"ab"})})]}),I.jsx(Ge,{icon:"new-link",text:"Add Prefix / Suffix",onClick:()=>r("prefixInput")}),I.jsxs(Ge,{icon:I.jsx(x8e,{size:16}),text:"Fill missing values",children:[I.jsx(cs,{title:"Fill with"}),I.jsx(Ge,{text:"Average"}),I.jsx(Ge,{text:"Moving average"}),I.jsx(Ge,{text:"Mode"}),I.jsx(Ge,{text:"Median"}),I.jsx(Ge,{text:"Previous Row"}),I.jsx(Ge,{text:"Next Row"})]}),I.jsxs(Ge,{icon:I.jsx(ame,{size:16}),text:"Change case",children:[I.jsx(Ge,{text:"UPPERCASE"}),I.jsx(Ge,{text:"lowercase"}),I.jsx(Ge,{text:"camelCase"}),I.jsx(Ge,{text:"snake_case"}),I.jsx(Ge,{text:"Sentence case"})]}),I.jsx(Ge,{icon:"floating-point",text:"Round off"}),I.jsxs(Ge,{icon:"more",text:"Advanced",children:[I.jsx(Ge,{icon:I.jsx(dve,{size:16}),text:"Extract keywords"}),I.jsx(Ge,{icon:I.jsx(sve,{size:16}),text:"Mask data",onClick:()=>n(zi.mask)})]}),I.jsx(cs,{}),I.jsx(Ge,{icon:"trash",text:"Delete column",intent:At.DANGER,onClick:()=>n(zi.delete_column)})]})}var QF={exports:{}},ux={},M_={exports:{}},GJ={};function HJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=HJ(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function xu(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=HJ(t))&&(r&&(r+=" "),r+=e);return r}const b8e=Object.freeze(Object.defineProperty({__proto__:null,clsx:xu,default:xu},Symbol.toStringTag,{value:"Module"})),C8e=n7(b8e);var Qn={},$l={};Object.defineProperty($l,"__esModule",{value:!0});$l.dontSetMe=E8e;$l.findInArray=S8e;$l.int=T8e;$l.isFunction=D8e;$l.isNum=_8e;function S8e(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function D8e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function _8e(t){return typeof t=="number"&&!isNaN(t)}function T8e(t){return parseInt(t,10)}function E8e(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});Ed.browserPrefixToKey=qJ;Ed.browserPrefixToStyle=A8e;Ed.default=void 0;Ed.getPrefix=jJ;var KE=["Moz","Webkit","O","ms"];function jJ(){var t,e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var r=(t=window.document)===null||t===void 0||(e=t.documentElement)===null||e===void 0?void 0:e.style;if(!r||n in r)return"";for(var i=0;i<KE.length;i++)if(qJ(n,KE[i])in r)return KE[i];return""}function qJ(t,e){return e?"".concat(e).concat(N8e(t)):t}function A8e(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function N8e(t){for(var e="",n=!0,r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}var k8e=jJ();Ed.default=k8e;function MI(t){"@babel/helpers - typeof";return MI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MI(t)}Object.defineProperty(Qn,"__esModule",{value:!0});Qn.addClassName=QJ;Qn.addEvent=$8e;Qn.addUserSelectStyles=G8e;Qn.createCSSTransform=B8e;Qn.createSVGTransform=V8e;Qn.getTouch=W8e;Qn.getTouchIdentifier=U8e;Qn.getTranslation=JF;Qn.innerHeight=F8e;Qn.innerWidth=L8e;Qn.matchesSelector=ZJ;Qn.matchesSelectorAndParentsTo=R8e;Qn.offsetXYFromParent=z8e;Qn.outerHeight=O8e;Qn.outerWidth=P8e;Qn.removeClassName=JJ;Qn.removeEvent=M8e;Qn.removeUserSelectStyles=H8e;var Ua=$l,w8=I8e(Ed);function KJ(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(KJ=function(i){return i?n:e})(t)}function I8e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||MI(t)!=="object"&&typeof t!="function")return{default:t};var n=KJ(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function b8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(n),!0).forEach(function(r){YJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YJ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cw="";function ZJ(t,e){return Cw||(Cw=(0,Ua.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ua.isFunction)(t[n])})),(0,Ua.isFunction)(t[Cw])?t[Cw](e):!1}function R8e(t,e,n){var r=t;do{if(ZJ(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function $8e(t,e,n,r){if(t){var i=XJ({capture:!0},r);t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}}function M8e(t,e,n,r){if(t){var i=XJ({capture:!0},r);t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}}function O8e(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ua.int)(n.borderTopWidth),e+=(0,Ua.int)(n.borderBottomWidth),e}function P8e(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ua.int)(n.borderLeftWidth),e+=(0,Ua.int)(n.borderRightWidth),e}function F8e(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ua.int)(n.paddingTop),e-=(0,Ua.int)(n.paddingBottom),e}function L8e(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ua.int)(n.paddingLeft),e-=(0,Ua.int)(n.paddingRight),e}function z8e(t,e,n){var r=e===e.ownerDocument.body,i=r?{left:0,top:0}:e.getBoundingClientRect(),a=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:a,y:o}}function B8e(t,e){var n=JF(t,e,"px");return YJ({},(0,w8.browserPrefixToKey)("transform",w8.default),n)}function V8e(t,e){var n=JF(t,e,"");return n}function JF(t,e,n){var r=t.x,i=t.y,a="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){var o="".concat(typeof e.x=="string"?e.x:e.x+n),s="".concat(typeof e.y=="string"?e.y:e.y+n);a="translate(".concat(o,", ").concat(s,")")+a}return a}function W8e(t,e){return t.targetTouches&&(0,Ua.findInArray)(t.targetTouches,function(n){return e===n.identifier})||t.changedTouches&&(0,Ua.findInArray)(t.changedTouches,function(n){return e===n.identifier})}function U8e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function G8e(t){if(t){var e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&QJ(t.body,"react-draggable-transparent-selection")}}function H8e(t){if(t)try{if(t.body&&JJ(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{var e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function QJ(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function JJ(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.canDragX=K8e;Ml.canDragY=X8e;Ml.createCoreData=Z8e;Ml.createDraggableData=Q8e;Ml.getBoundPosition=j8e;Ml.getControlPosition=Y8e;Ml.snapToGrid=q8e;var Ma=$l,Ap=Qn;function j8e(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r=typeof r=="string"?r:J8e(r);var i=e3(t);if(typeof r=="string"){var a=i.ownerDocument,o=a.defaultView,s;if(r==="parent"?s=i.parentNode:s=a.querySelector(r),!(s instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=s,u=o.getComputedStyle(i),c=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,Ma.int)(c.paddingLeft)+(0,Ma.int)(u.marginLeft),top:-i.offsetTop+(0,Ma.int)(c.paddingTop)+(0,Ma.int)(u.marginTop),right:(0,Ap.innerWidth)(l)-(0,Ap.outerWidth)(i)-i.offsetLeft+(0,Ma.int)(c.paddingRight)-(0,Ma.int)(u.marginRight),bottom:(0,Ap.innerHeight)(l)-(0,Ap.outerHeight)(i)-i.offsetTop+(0,Ma.int)(c.paddingBottom)-(0,Ma.int)(u.marginBottom)}}return(0,Ma.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Ma.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Ma.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Ma.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function q8e(t,e,n){var r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function K8e(t){return t.props.axis==="both"||t.props.axis==="x"}function X8e(t){return t.props.axis==="both"||t.props.axis==="y"}function Y8e(t,e,n){var r=typeof e=="number"?(0,Ap.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;var i=e3(n),a=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Ap.offsetXYFromParent)(r||t,a,n.props.scale)}function Z8e(t,e,n){var r=t.state,i=!(0,Ma.isNum)(r.lastX),a=e3(t);return i?{node:a,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:a,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function Q8e(t,e){var n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function J8e(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function e3(t){var e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var O_={},P_={};Object.defineProperty(P_,"__esModule",{value:!0});P_.default=e6e;function e6e(){}function u2(t){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u2(t)}Object.defineProperty(O_,"__esModule",{value:!0});O_.default=void 0;var XE=n6e(L),$a=t3(Vy),t6e=t3(hu),hi=Qn,Ru=Ml,YE=$l,qg=t3(P_);function t3(t){return t&&t.__esModule?t:{default:t}}function eee(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(eee=function(i){return i?n:e})(t)}function n6e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||u2(t)!=="object"&&typeof t!="function")return{default:t};var n=eee(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function C8(t,e){return o6e(t)||a6e(t,e)||i6e(t,e)||r6e()}function r6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i6e(t,e){if(t){if(typeof t=="string")return S8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S8(t,e)}}function S8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,s;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function o6e(t){if(Array.isArray(t))return t}function s6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l6e(t,e,n){return e&&D8(t.prototype,e),n&&D8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},OI(t,e)}function c6e(t){var e=h6e();return function(){var r=c2(t),i;if(e){var a=c2(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return f6e(this,i)}}function f6e(t,e){if(e&&(u2(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vi(t)}function vi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},c2(t)}function vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ns={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},$u=ns.mouse,F_=function(t){u6e(n,t);var e=c6e(n);function n(){var r;s6e(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),vo(vi(r),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),vo(vi(r),"mounted",!1),vo(vi(r),"handleDragStart",function(s){if(r.props.onMouseDown(s),!r.props.allowAnyClick&&typeof s.button=="number"&&s.button!==0)return!1;var l=r.findDOMNode();if(!l||!l.ownerDocument||!l.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var u=l.ownerDocument;if(!(r.props.disabled||!(s.target instanceof u.defaultView.Node)||r.props.handle&&!(0,hi.matchesSelectorAndParentsTo)(s.target,r.props.handle,l)||r.props.cancel&&(0,hi.matchesSelectorAndParentsTo)(s.target,r.props.cancel,l))){s.type==="touchstart"&&s.preventDefault();var c=(0,hi.getTouchIdentifier)(s);r.setState({touchIdentifier:c});var f=(0,Ru.getControlPosition)(s,c,vi(r));if(f!=null){var h=f.x,d=f.y,p=(0,Ru.createCoreData)(vi(r),h,d);(0,qg.default)("DraggableCore: handleDragStart: %j",p),(0,qg.default)("calling",r.props.onStart);var v=r.props.onStart(s,p);v===!1||r.mounted===!1||(r.props.enableUserSelectHack&&(0,hi.addUserSelectStyles)(u),r.setState({dragging:!0,lastX:h,lastY:d}),(0,hi.addEvent)(u,$u.move,r.handleDrag),(0,hi.addEvent)(u,$u.stop,r.handleDragStop))}}}),vo(vi(r),"handleDrag",function(s){var l=(0,Ru.getControlPosition)(s,r.state.touchIdentifier,vi(r));if(l!=null){var u=l.x,c=l.y;if(Array.isArray(r.props.grid)){var f=u-r.state.lastX,h=c-r.state.lastY,d=(0,Ru.snapToGrid)(r.props.grid,f,h),p=C8(d,2);if(f=p[0],h=p[1],!f&&!h)return;u=r.state.lastX+f,c=r.state.lastY+h}var v=(0,Ru.createCoreData)(vi(r),u,c);(0,qg.default)("DraggableCore: handleDrag: %j",v);var m=r.props.onDrag(s,v);if(m===!1||r.mounted===!1){try{r.handleDragStop(new MouseEvent("mouseup"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(g)}return}r.setState({lastX:u,lastY:c})}}),vo(vi(r),"handleDragStop",function(s){if(r.state.dragging){var l=(0,Ru.getControlPosition)(s,r.state.touchIdentifier,vi(r));if(l!=null){var u=l.x,c=l.y;if(Array.isArray(r.props.grid)){var f=u-r.state.lastX||0,h=c-r.state.lastY||0,d=(0,Ru.snapToGrid)(r.props.grid,f,h),p=C8(d,2);f=p[0],h=p[1],u=r.state.lastX+f,c=r.state.lastY+h}var v=(0,Ru.createCoreData)(vi(r),u,c),m=r.props.onStop(s,v);if(m===!1||r.mounted===!1)return!1;var g=r.findDOMNode();g&&r.props.enableUserSelectHack&&(0,hi.removeUserSelectStyles)(g.ownerDocument),(0,qg.default)("DraggableCore: handleDragStop: %j",v),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),g&&((0,qg.default)("DraggableCore: Removing handlers"),(0,hi.removeEvent)(g.ownerDocument,$u.move,r.handleDrag),(0,hi.removeEvent)(g.ownerDocument,$u.stop,r.handleDragStop))}}}),vo(vi(r),"onMouseDown",function(s){return $u=ns.mouse,r.handleDragStart(s)}),vo(vi(r),"onMouseUp",function(s){return $u=ns.mouse,r.handleDragStop(s)}),vo(vi(r),"onTouchStart",function(s){return $u=ns.touch,r.handleDragStart(s)}),vo(vi(r),"onTouchEnd",function(s){return $u=ns.touch,r.handleDragStop(s)}),r}return l6e(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var i=this.findDOMNode();i&&(0,hi.addEvent)(i,ns.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.findDOMNode();if(i){var a=i.ownerDocument;(0,hi.removeEvent)(a,ns.mouse.move,this.handleDrag),(0,hi.removeEvent)(a,ns.touch.move,this.handleDrag),(0,hi.removeEvent)(a,ns.mouse.stop,this.handleDragStop),(0,hi.removeEvent)(a,ns.touch.stop,this.handleDragStop),(0,hi.removeEvent)(i,ns.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,hi.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){var i,a,o;return(i=this.props)!==null&&i!==void 0&&i.nodeRef?(a=this.props)===null||a===void 0||(o=a.nodeRef)===null||o===void 0?void 0:o.current:t6e.default.findDOMNode(this)}},{key:"render",value:function(){return XE.cloneElement(XE.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(XE.Component);O_.default=F_;vo(F_,"displayName","DraggableCore");vo(F_,"propTypes",{allowAnyClick:$a.default.bool,disabled:$a.default.bool,enableUserSelectHack:$a.default.bool,offsetParent:function(e,n){if(e[n]&&e[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:$a.default.arrayOf($a.default.number),handle:$a.default.string,cancel:$a.default.string,nodeRef:$a.default.object,onStart:$a.default.func,onDrag:$a.default.func,onStop:$a.default.func,onMouseDown:$a.default.func,scale:$a.default.number,className:YE.dontSetMe,style:YE.dontSetMe,transform:YE.dontSetMe});vo(F_,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){function e(F){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},e(F)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var n=p(L),r=h(Vy),i=h(hu),a=h(C8e),o=Qn,s=Ml,l=$l,u=h(O_),c=h(P_),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function h(F){return F&&F.__esModule?F:{default:F}}function d(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,j=new WeakMap;return(d=function(Y){return Y?j:W})(F)}function p(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||e(F)!=="object"&&typeof F!="function")return{default:F};var j=d(W);if(j&&j.has(F))return j.get(F);var K={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in F)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(F,Z)){var se=Y?Object.getOwnPropertyDescriptor(F,Z):null;se&&(se.get||se.set)?Object.defineProperty(K,Z,se):K[Z]=F[Z]}return K.default=F,j&&j.set(F,K),K}function v(){return v=Object.assign||function(F){for(var W=1;W<arguments.length;W++){var j=arguments[W];for(var K in j)Object.prototype.hasOwnProperty.call(j,K)&&(F[K]=j[K])}return F},v.apply(this,arguments)}function m(F,W){if(F==null)return{};var j=g(F,W),K,Y;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);for(Y=0;Y<Z.length;Y++)K=Z[Y],!(W.indexOf(K)>=0)&&Object.prototype.propertyIsEnumerable.call(F,K)&&(j[K]=F[K])}return j}function g(F,W){if(F==null)return{};var j={},K=Object.keys(F),Y,Z;for(Z=0;Z<K.length;Z++)Y=K[Z],!(W.indexOf(Y)>=0)&&(j[Y]=F[Y]);return j}function y(F,W){var j=Object.keys(F);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(F);W&&(K=K.filter(function(Y){return Object.getOwnPropertyDescriptor(F,Y).enumerable})),j.push.apply(j,K)}return j}function x(F){for(var W=1;W<arguments.length;W++){var j=arguments[W]!=null?arguments[W]:{};W%2?y(Object(j),!0).forEach(function(K){U(F,K,j[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(j)):y(Object(j)).forEach(function(K){Object.defineProperty(F,K,Object.getOwnPropertyDescriptor(j,K))})}return F}function w(F,W){return _(F)||D(F,W)||C(F,W)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(F,W){if(F){if(typeof F=="string")return S(F,W);var j=Object.prototype.toString.call(F).slice(8,-1);if(j==="Object"&&F.constructor&&(j=F.constructor.name),j==="Map"||j==="Set")return Array.from(F);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return S(F,W)}}function S(F,W){(W==null||W>F.length)&&(W=F.length);for(var j=0,K=new Array(W);j<W;j++)K[j]=F[j];return K}function D(F,W){var j=F==null?null:typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(j!=null){var K=[],Y=!0,Z=!1,se,ee;try{for(j=j.call(F);!(Y=(se=j.next()).done)&&(K.push(se.value),!(W&&K.length===W));Y=!0);}catch(oe){Z=!0,ee=oe}finally{try{!Y&&j.return!=null&&j.return()}finally{if(Z)throw ee}}return K}}function _(F){if(Array.isArray(F))return F}function T(F,W){if(!(F instanceof W))throw new TypeError("Cannot call a class as a function")}function E(F,W){for(var j=0;j<W.length;j++){var K=W[j];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(F,K.key,K)}}function A(F,W,j){return W&&E(F.prototype,W),j&&E(F,j),Object.defineProperty(F,"prototype",{writable:!1}),F}function R(F,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(W&&W.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),W&&$(F,W)}function $(F,W){return $=Object.setPrototypeOf||function(K,Y){return K.__proto__=Y,K},$(F,W)}function O(F){var W=P();return function(){var K=z(F),Y;if(W){var Z=z(this).constructor;Y=Reflect.construct(K,arguments,Z)}else Y=K.apply(this,arguments);return M(this,Y)}}function M(F,W){if(W&&(e(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(F)}function B(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(F){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},z(F)}function U(F,W,j){return W in F?Object.defineProperty(F,W,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[W]=j,F}var H=function(F){R(j,F);var W=O(j);function j(K){var Y;return T(this,j),Y=W.call(this,K),U(B(Y),"onDragStart",function(Z,se){(0,c.default)("Draggable: onDragStart: %j",se);var ee=Y.props.onStart(Z,(0,s.createDraggableData)(B(Y),se));if(ee===!1)return!1;Y.setState({dragging:!0,dragged:!0})}),U(B(Y),"onDrag",function(Z,se){if(!Y.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",se);var ee=(0,s.createDraggableData)(B(Y),se),oe={x:ee.x,y:ee.y};if(Y.props.bounds){var ce=oe.x,ve=oe.y;oe.x+=Y.state.slackX,oe.y+=Y.state.slackY;var ye=(0,s.getBoundPosition)(B(Y),oe.x,oe.y),_e=w(ye,2),Ie=_e[0],Ne=_e[1];oe.x=Ie,oe.y=Ne,oe.slackX=Y.state.slackX+(ce-oe.x),oe.slackY=Y.state.slackY+(ve-oe.y),ee.x=oe.x,ee.y=oe.y,ee.deltaX=oe.x-Y.state.x,ee.deltaY=oe.y-Y.state.y}var We=Y.props.onDrag(Z,ee);if(We===!1)return!1;Y.setState(oe)}),U(B(Y),"onDragStop",function(Z,se){if(!Y.state.dragging)return!1;var ee=Y.props.onStop(Z,(0,s.createDraggableData)(B(Y),se));if(ee===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",se);var oe={dragging:!1,slackX:0,slackY:0},ce=!!Y.props.position;if(ce){var ve=Y.props.position,ye=ve.x,_e=ve.y;oe.x=ye,oe.y=_e}Y.setState(oe)}),Y.state={dragging:!1,dragged:!1,x:K.position?K.position.x:K.defaultPosition.x,y:K.position?K.position.y:K.defaultPosition.y,prevPropsPosition:x({},K.position),slackX:0,slackY:0,isElementSVG:!1},K.position&&!(K.onDrag||K.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Y}return A(j,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Y,Z,se;return(Y=(Z=this.props)===null||Z===void 0||(se=Z.nodeRef)===null||se===void 0?void 0:se.current)!==null&&Y!==void 0?Y:i.default.findDOMNode(this)}},{key:"render",value:function(){var Y,Z=this.props;Z.axis,Z.bounds;var se=Z.children,ee=Z.defaultPosition,oe=Z.defaultClassName,ce=Z.defaultClassNameDragging,ve=Z.defaultClassNameDragged,ye=Z.position,_e=Z.positionOffset;Z.scale;var Ie=m(Z,f),Ne={},We=null,qe=!!ye,ft=!qe||this.state.dragging,at=ye||ee,bt={x:(0,s.canDragX)(this)&&ft?this.state.x:at.x,y:(0,s.canDragY)(this)&&ft?this.state.y:at.y};this.state.isElementSVG?We=(0,o.createSVGTransform)(bt,_e):Ne=(0,o.createCSSTransform)(bt,_e);var ot=(0,a.default)(se.props.className||"",oe,(Y={},U(Y,ce,this.state.dragging),U(Y,ve,this.state.dragged),Y));return n.createElement(u.default,v({},Ie,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(se),{className:ot,style:x(x({},se.props.style),Ne),transform:We}))}}],[{key:"getDerivedStateFromProps",value:function(Y,Z){var se=Y.position,ee=Z.prevPropsPosition;return se&&(!ee||se.x!==ee.x||se.y!==ee.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:se,prevPropsPosition:ee}),{x:se.x,y:se.y,prevPropsPosition:x({},se)}):null}}]),j}(n.Component);t.default=H,U(H,"displayName","Draggable"),U(H,"propTypes",x(x({},u.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),U(H,"defaultProps",x(x({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(GJ);var tee=GJ,nee=tee.default,d6e=tee.DraggableCore;M_.exports=nee;M_.exports.default=nee;M_.exports.DraggableCore=d6e;var p6e=M_.exports,n3={};n3.__esModule=!0;n3.cloneElement=w6e;var v6e=g6e(L);function g6e(t){return t&&t.__esModule?t:{default:t}}function _8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(n),!0).forEach(function(r){m6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m6e(t,e,n){return e=y6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y6e(t){var e=x6e(t,"string");return typeof e=="symbol"?e:String(e)}function x6e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w6e(t,e){return e.style&&t.props.style&&(e.style=T8(T8({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),v6e.default.cloneElement(t,e)}var cx={};cx.__esModule=!0;cx.resizableProps=void 0;var yt=b6e(Vy);function b6e(t){return t&&t.__esModule?t:{default:t}}var C6e={axis:yt.default.oneOf(["both","x","y","none"]),className:yt.default.string,children:yt.default.element.isRequired,draggableOpts:yt.default.shape({allowAnyClick:yt.default.bool,cancel:yt.default.string,children:yt.default.node,disabled:yt.default.bool,enableUserSelectHack:yt.default.bool,offsetParent:yt.default.node,grid:yt.default.arrayOf(yt.default.number),handle:yt.default.string,nodeRef:yt.default.object,onStart:yt.default.func,onDrag:yt.default.func,onStop:yt.default.func,onMouseDown:yt.default.func,scale:yt.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var a;return(a=yt.default.number).isRequired.apply(a,n)}return yt.default.number.apply(yt.default,n)},handle:yt.default.oneOfType([yt.default.node,yt.default.func]),handleSize:yt.default.arrayOf(yt.default.number),lockAspectRatio:yt.default.bool,maxConstraints:yt.default.arrayOf(yt.default.number),minConstraints:yt.default.arrayOf(yt.default.number),onResizeStop:yt.default.func,onResizeStart:yt.default.func,onResize:yt.default.func,resizeHandles:yt.default.arrayOf(yt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:yt.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var a;return(a=yt.default.number).isRequired.apply(a,n)}return yt.default.number.apply(yt.default,n)}};cx.resizableProps=C6e;ux.__esModule=!0;ux.default=void 0;var Kg=E6e(L),S6e=p6e,D6e=n3,_6e=cx,T6e=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function ree(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ree=function(i){return i?n:e})(t)}function E6e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=ree(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}function A6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function E8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(n),!0).forEach(function(r){N6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N6e(t,e,n){return e=k6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k6e(t){var e=I6e(t,"string");return typeof e=="symbol"?e:String(e)}function I6e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R6e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,FI(t,e)}function FI(t,e){return FI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FI(t,e)}var r3=function(t){R6e(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,a){var o=this.props,s=o.minConstraints,l=o.maxConstraints,u=o.lockAspectRatio;if(!s&&!l&&!u)return[i,a];if(u){var c=this.props.width/this.props.height,f=i-this.props.width,h=a-this.props.height;Math.abs(f)>Math.abs(h*c)?a=i/c:i=a*c}var d=i,p=a,v=this.slack||[0,0],m=v[0],g=v[1];return i+=m,a+=g,s&&(i=Math.max(s[0],i),a=Math.max(s[1],a)),l&&(i=Math.min(l[0],i),a=Math.min(l[1],a)),this.slack=[m+(d-i),g+(p-a)],[i,a]},n.resizeHandler=function(i,a){var o=this;return function(s,l){var u=l.node,c=l.deltaX,f=l.deltaY;i==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&a!=="n"&&a!=="s",d=(o.props.axis==="both"||o.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!h&&!d)){var p=a[0],v=a[a.length-1],m=u.getBoundingClientRect();if(o.lastHandleRect!=null){if(v==="w"){var g=m.left-o.lastHandleRect.left;c+=g}if(p==="n"){var y=m.top-o.lastHandleRect.top;f+=y}}o.lastHandleRect=m,v==="w"&&(c=-c),p==="n"&&(f=-f);var x=o.props.width+(h?c/o.props.transformScale:0),w=o.props.height+(d?f/o.props.transformScale:0),b=o.runConstraints(x,w);x=b[0],w=b[1];var C=x!==o.props.width||w!==o.props.height,S=typeof o.props[i]=="function"?o.props[i]:null,D=i==="onResize"&&!C;S&&!D&&(s.persist==null||s.persist(),S(s,{node:u,size:{width:x,height:w},handle:a})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,a){var o=this.props.handle;if(!o)return Kg.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:a});if(typeof o=="function")return o(i,a);var s=typeof o.type=="string",l=ZE({ref:a},s?{}:{handleAxis:i});return Kg.cloneElement(o,l)},n.render=function(){var i=this,a=this.props,o=a.children,s=a.className,l=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var u=a.resizeHandles;a.transformScale;var c=A6e(a,T6e);return(0,D6e.cloneElement)(o,ZE(ZE({},c),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(o.props.children,u.map(function(f){var h,d=(h=i.handleRefs[f])!=null?h:i.handleRefs[f]=Kg.createRef();return Kg.createElement(S6e.DraggableCore,PI({},l,{nodeRef:d,key:"resizableHandle-"+f,onStop:i.resizeHandler("onResizeStop",f),onStart:i.resizeHandler("onResizeStart",f),onDrag:i.resizeHandler("onResize",f)}),i.renderResizeHandle(f,d))}))}))},e}(Kg.Component);ux.default=r3;r3.propTypes=_6e.resizableProps;r3.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var L_={};L_.__esModule=!0;L_.default=void 0;var QE=F6e(L),$6e=iee(Vy),M6e=iee(ux),O6e=cx,P6e=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function iee(t){return t&&t.__esModule?t:{default:t}}function aee(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(aee=function(i){return i?n:e})(t)}function F6e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=aee(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function LI(){return LI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LI.apply(this,arguments)}function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(r){L6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L6e(t,e,n){return e=z6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z6e(t){var e=B6e(t,"string");return typeof e=="symbol"?e:String(e)}function B6e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V6e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function W6e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zI(t,e)}function zI(t,e){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zI(t,e)}var oee=function(t){W6e(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(s,l){var u=l.size;r.props.onResize?(s.persist==null||s.persist(),r.setState(u,function(){return r.props.onResize&&r.props.onResize(s,l)})):r.setState(u)},r}e.getDerivedStateFromProps=function(i,a){return a.propsWidth!==i.width||a.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,a=i.handle,o=i.handleSize;i.onResize;var s=i.onResizeStart,l=i.onResizeStop,u=i.draggableOpts,c=i.minConstraints,f=i.maxConstraints,h=i.lockAspectRatio,d=i.axis;i.width,i.height;var p=i.resizeHandles,v=i.style,m=i.transformScale,g=V6e(i,P6e);return QE.createElement(M6e.default,{axis:d,draggableOpts:u,handle:a,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:f,minConstraints:c,onResizeStart:s,onResize:this.onResize,onResizeStop:l,resizeHandles:p,transformScale:m,width:this.state.width},QE.createElement("div",LI({},g,{style:f2(f2({},v),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(QE.Component);L_.default=oee;oee.propTypes=f2(f2({},O6e.resizableProps),{},{children:$6e.default.element});QF.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};QF.exports.Resizable=ux.default;var U6e=QF.exports.ResizableBox=L_.default;function see(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 8h2V6h3.252L7.68 18H5v2h8v-2h-2.252L13.32 6H17v2h2V4H5z"}}]})(t)}const G6e={number:Zj,string:see,date:Yj},H6e=({column:t,type:e})=>I.jsxs(Su,{children:[I.jsx(cs,{title:"Data Type"}),I.jsx(Ge,{text:"Number",icon:I.jsx(Zj,{size:16}),active:e==="number"}),I.jsx(Ge,{text:"Date",icon:I.jsx(Yj,{size:16,active:e==="date"})}),I.jsx(Ge,{text:"Text / categorical",icon:I.jsx(see,{size:16}),active:e==="string"})]});function j6e({column:t}){const e=mn(a=>{var o;return((o=a.data.details[t])==null?void 0:o.type)||"string"}),n=zn(),r=()=>n(dn({path:"selectedColumn",value:t})),i=G6e[e];return t==="DataPrepIndex"?I.jsx(I.Fragment,{}):I.jsxs("div",{className:"column-name",children:[I.jsx(oi,{minimal:!0,position:"bottom-left",content:I.jsx(H6e,{column:t,type:e}),className:"fcc",children:I.jsx("div",{className:"data-type fcc pointer",children:I.jsx(i,{size:13})})}),I.jsx("div",{className:"ellipsis title",onClick:r,children:t||"<blank>"})]})}const Ov=Pge({reducer:{data:fme,appState:Kge,toasts:y8e},middleware:t=>t({immutableCheck:!1,serializableCheck:!1})}),JE=t=>typeof t=="number"?!0:typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t)),N8=t=>!0,q6e=t=>!1,Zp={number:JE,string:N8,text:N8,int:JE,float:JE,date:q6e};async function K6e(t){const e=Ov.getState(),{transformed:n,details:r}=e.data,{type:i}=r[t],a=Zp[i]||(Zp[i]=()=>!1);let o=0,s=0,l=0;return n.forEach(u=>{const c=u[t];c===""?s++:a(c)?o++:l++}),{valid:o,missing:s,invalid:l}}async function X6e(){const t=Ov.getState(),{transformed:e,details:n,order:r}=t.data;let i={},a={};return r.forEach(o=>{const{type:s}=n[o],l=Zp[s]||(Zp[s]=()=>!1);let u=0,c=0,f=0,h={};e.forEach(d=>{const p=d[o];p===""?c++:l(p)?u++:(f++,h[p]?h[p]++:h[p]=1)}),i[o]={valid:u,missing:c,invalid:f},a[o]=h}),{columns:r,quality:i,rows:e.length,invalids:a}}var wn="-ms-",e0="-moz-",Ht="-webkit-",lee="comm",z_="rule",i3="decl",Y6e="@import",uee="@keyframes",Z6e="@layer",Q6e=Math.abs,a3=String.fromCharCode,BI=Object.assign;function J6e(t,e){return Pr(t,0)^45?(((e<<2^Pr(t,0))<<2^Pr(t,1))<<2^Pr(t,2))<<2^Pr(t,3):0}function cee(t){return t.trim()}function Hl(t,e){return(t=e.exec(t))?t[0]:t}function Ct(t,e,n){return t.replace(e,n)}function kb(t,e){return t.indexOf(e)}function Pr(t,e){return t.charCodeAt(e)|0}function Pv(t,e,n){return t.slice(e,n)}function Js(t){return t.length}function fee(t){return t.length}function Nm(t,e){return e.push(t),t}function eVe(t,e){return t.map(e).join("")}function k8(t,e){return t.filter(function(n){return!Hl(n,e)})}var B_=1,Fv=1,hee=0,zo=0,hr=0,wg="";function V_(t,e,n,r,i,a,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:B_,column:Fv,length:o,return:"",siblings:s}}function Uu(t,e){return BI(V_("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Fd(t){for(;t.root;)t=Uu(t.root,{children:[t]});Nm(t,t.siblings)}function tVe(){return hr}function nVe(){return hr=zo>0?Pr(wg,--zo):0,Fv--,hr===10&&(Fv=1,B_--),hr}function Ds(){return hr=zo<hee?Pr(wg,zo++):0,Fv++,hr===10&&(Fv=1,B_++),hr}function Dh(){return Pr(wg,zo)}function Ib(){return zo}function W_(t,e){return Pv(wg,t,e)}function VI(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rVe(t){return B_=Fv=1,hee=Js(wg=t),zo=0,[]}function iVe(t){return wg="",t}function eA(t){return cee(W_(zo-1,WI(t===91?t+2:t===40?t+1:t)))}function aVe(t){for(;(hr=Dh())&&hr<33;)Ds();return VI(t)>2||VI(hr)>3?"":" "}function oVe(t,e){for(;--e&&Ds()&&!(hr<48||hr>102||hr>57&&hr<65||hr>70&&hr<97););return W_(t,Ib()+(e<6&&Dh()==32&&Ds()==32))}function WI(t){for(;Ds();)switch(hr){case t:return zo;case 34:case 39:t!==34&&t!==39&&WI(hr);break;case 40:t===41&&WI(t);break;case 92:Ds();break}return zo}function sVe(t,e){for(;Ds()&&t+hr!==47+10;)if(t+hr===42+42&&Dh()===47)break;return"/*"+W_(e,zo-1)+"*"+a3(t===47?t:Ds())}function lVe(t){for(;!VI(Dh());)Ds();return W_(t,zo)}function uVe(t){return iVe(Rb("",null,null,null,[""],t=rVe(t),0,[0],t))}function Rb(t,e,n,r,i,a,o,s,l){for(var u=0,c=0,f=o,h=0,d=0,p=0,v=1,m=1,g=1,y=0,x="",w=i,b=a,C=r,S=x;m;)switch(p=y,y=Ds()){case 40:if(p!=108&&Pr(S,f-1)==58){kb(S+=Ct(eA(y),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:S+=eA(y);break;case 9:case 10:case 13:case 32:S+=aVe(p);break;case 92:S+=oVe(Ib()-1,7);continue;case 47:switch(Dh()){case 42:case 47:Nm(cVe(sVe(Ds(),Ib()),e,n,l),l);break;default:S+="/"}break;case 123*v:s[u++]=Js(S)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:g==-1&&(S=Ct(S,/\f/g,"")),d>0&&Js(S)-f&&Nm(d>32?R8(S+";",r,n,f-1,l):R8(Ct(S," ","")+";",r,n,f-2,l),l);break;case 59:S+=";";default:if(Nm(C=I8(S,e,n,u,c,i,s,x,w=[],b=[],f,a),a),y===123)if(c===0)Rb(S,e,C,C,w,a,f,s,b);else switch(h===99&&Pr(S,3)===110?100:h){case 100:case 108:case 109:case 115:Rb(t,C,C,r&&Nm(I8(t,C,C,0,0,i,s,x,i,w=[],f,b),b),i,b,f,s,r?w:b);break;default:Rb(S,C,C,C,[""],b,0,s,b)}}u=c=d=0,v=g=1,x=S="",f=o;break;case 58:f=1+Js(S),d=p;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&nVe()==125)continue}switch(S+=a3(y),y*v){case 38:g=c>0?1:(S+="\f",-1);break;case 44:s[u++]=(Js(S)-1)*g,g=1;break;case 64:Dh()===45&&(S+=eA(Ds())),h=Dh(),c=f=Js(x=S+=lVe(Ib())),y++;break;case 45:p===45&&Js(S)==2&&(v=0)}}return a}function I8(t,e,n,r,i,a,o,s,l,u,c,f){for(var h=i-1,d=i===0?a:[""],p=fee(d),v=0,m=0,g=0;v<r;++v)for(var y=0,x=Pv(t,h+1,h=Q6e(m=o[v])),w=t;y<p;++y)(w=cee(m>0?d[y]+" "+x:Ct(x,/&\f/g,d[y])))&&(l[g++]=w);return V_(t,e,n,i===0?z_:s,l,u,c,f)}function cVe(t,e,n,r){return V_(t,e,n,lee,a3(tVe()),Pv(t,2,-2),0,r)}function R8(t,e,n,r,i){return V_(t,e,n,i3,Pv(t,0,r),Pv(t,r+1,-1),r,i)}function dee(t,e,n){switch(J6e(t,e)){case 5103:return Ht+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ht+t+t;case 4789:return e0+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ht+t+e0+t+wn+t+t;case 5936:switch(Pr(t,e+11)){case 114:return Ht+t+wn+Ct(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ht+t+wn+Ct(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ht+t+wn+Ct(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Ht+t+wn+t+t;case 6165:return Ht+t+wn+"flex-"+t+t;case 5187:return Ht+t+Ct(t,/(\w+).+(:[^]+)/,Ht+"box-$1$2"+wn+"flex-$1$2")+t;case 5443:return Ht+t+wn+"flex-item-"+Ct(t,/flex-|-self/g,"")+(Hl(t,/flex-|baseline/)?"":wn+"grid-row-"+Ct(t,/flex-|-self/g,""))+t;case 4675:return Ht+t+wn+"flex-line-pack"+Ct(t,/align-content|flex-|-self/g,"")+t;case 5548:return Ht+t+wn+Ct(t,"shrink","negative")+t;case 5292:return Ht+t+wn+Ct(t,"basis","preferred-size")+t;case 6060:return Ht+"box-"+Ct(t,"-grow","")+Ht+t+wn+Ct(t,"grow","positive")+t;case 4554:return Ht+Ct(t,/([^-])(transform)/g,"$1"+Ht+"$2")+t;case 6187:return Ct(Ct(Ct(t,/(zoom-|grab)/,Ht+"$1"),/(image-set)/,Ht+"$1"),t,"")+t;case 5495:case 3959:return Ct(t,/(image-set\([^]*)/,Ht+"$1$`$1");case 4968:return Ct(Ct(t,/(.+:)(flex-)?(.*)/,Ht+"box-pack:$3"+wn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ht+t+t;case 4200:if(!Hl(t,/flex-|baseline/))return wn+"grid-column-align"+Pv(t,e)+t;break;case 2592:case 3360:return wn+Ct(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Hl(r.props,/grid-\w+-end/)})?~kb(t+(n=n[e].value),"span")?t:wn+Ct(t,"-start","")+t+wn+"grid-row-span:"+(~kb(n,"span")?Hl(n,/\d+/):+Hl(n,/\d+/)-+Hl(t,/\d+/))+";":wn+Ct(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Hl(r.props,/grid-\w+-start/)})?t:wn+Ct(Ct(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Ct(t,/(.+)-inline(.+)/,Ht+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Js(t)-1-e>6)switch(Pr(t,e+1)){case 109:if(Pr(t,e+4)!==45)break;case 102:return Ct(t,/(.+:)(.+)-([^]+)/,"$1"+Ht+"$2-$3$1"+e0+(Pr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~kb(t,"stretch")?dee(Ct(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return Ct(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,a,o,s,l,u){return wn+i+":"+a+u+(o?wn+i+"-span:"+(s?l:+l-+a)+u:"")+t});case 4949:if(Pr(t,e+6)===121)return Ct(t,":",":"+Ht)+t;break;case 6444:switch(Pr(t,Pr(t,14)===45?18:11)){case 120:return Ct(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ht+(Pr(t,14)===45?"inline-":"")+"box$3$1"+Ht+"$2$3$1"+wn+"$2box$3")+t;case 100:return Ct(t,":",":"+wn)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ct(t,"scroll-","scroll-snap-")+t}return t}function h2(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function fVe(t,e,n,r){switch(t.type){case Z6e:if(t.children.length)break;case Y6e:case i3:return t.return=t.return||t.value;case lee:return"";case uee:return t.return=t.value+"{"+h2(t.children,r)+"}";case z_:if(!Js(t.value=t.props.join(",")))return""}return Js(n=h2(t.children,r))?t.return=t.value+"{"+n+"}":""}function hVe(t){var e=fee(t);return function(n,r,i,a){for(var o="",s=0;s<e;s++)o+=t[s](n,r,i,a)||"";return o}}function dVe(t){return function(e){e.root||(e=e.return)&&t(e)}}function pVe(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case i3:t.return=dee(t.value,t.length,n);return;case uee:return h2([Uu(t,{value:Ct(t.value,"@","@"+Ht)})],r);case z_:if(t.length)return eVe(n=t.props,function(i){switch(Hl(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Fd(Uu(t,{props:[Ct(i,/:(read-\w+)/,":"+e0+"$1")]})),Fd(Uu(t,{props:[i]})),BI(t,{props:k8(n,r)});break;case"::placeholder":Fd(Uu(t,{props:[Ct(i,/:(plac\w+)/,":"+Ht+"input-$1")]})),Fd(Uu(t,{props:[Ct(i,/:(plac\w+)/,":"+e0+"$1")]})),Fd(Uu(t,{props:[Ct(i,/:(plac\w+)/,wn+"input-$1")]})),Fd(Uu(t,{props:[i]})),BI(t,{props:k8(n,r)});break}return""})}}var vVe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lv=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",o3=typeof window<"u"&&"HTMLElement"in window,gVe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),U_=Object.freeze([]),zv=Object.freeze({});function mVe(t,e,n){return n===void 0&&(n=zv),t.theme!==n.theme&&t.theme||e||n.theme}var pee=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),yVe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xVe=/(^-|-$)/g;function $8(t){return t.replace(yVe,"-").replace(xVe,"")}var wVe=/(a)(d)/gi,M8=function(t){return String.fromCharCode(t+(t>25?39:97))};function UI(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=M8(e%52)+n;return(M8(e%52)+n).replace(wVe,"$1-$2")}var tA,Np=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},vee=function(t){return Np(5381,t)};function bVe(t){return UI(vee(t)>>>0)}function CVe(t){return t.displayName||t.name||"Component"}function nA(t){return typeof t=="string"&&!0}var gee=typeof Symbol=="function"&&Symbol.for,mee=gee?Symbol.for("react.memo"):60115,SVe=gee?Symbol.for("react.forward_ref"):60112,DVe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_Ve={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TVe=((tA={})[SVe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tA[mee]=yee,tA);function O8(t){return("type"in(e=t)&&e.type.$$typeof)===mee?yee:"$$typeof"in t?TVe[t.$$typeof]:DVe;var e}var EVe=Object.defineProperty,AVe=Object.getOwnPropertyNames,P8=Object.getOwnPropertySymbols,NVe=Object.getOwnPropertyDescriptor,kVe=Object.getPrototypeOf,F8=Object.prototype;function xee(t,e,n){if(typeof e!="string"){if(F8){var r=kVe(e);r&&r!==F8&&xee(t,r,n)}var i=AVe(e);P8&&(i=i.concat(P8(e)));for(var a=O8(t),o=O8(e),s=0;s<i.length;++s){var l=i[s];if(!(l in _Ve||n&&n[l]||o&&l in o||a&&l in a)){var u=NVe(e,l);try{EVe(t,l,u)}catch{}}}}return t}function Bv(t){return typeof t=="function"}function s3(t){return typeof t=="object"&&"styledComponentId"in t}function fh(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function L8(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e?e+t[r]:t[r];return n}function ty(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function GI(t,e,n){if(n===void 0&&(n=!1),!n&&!ty(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=GI(t[r],e[r]);else if(ty(e))for(var r in e)t[r]=GI(t[r],e[r]);return t}function l3(t,e){Object.defineProperty(t,"toString",{value:e})}function fx(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var IVe=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,a=i;e>=a;)if((a<<=1)<0)throw fx(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var o=i;o<a;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),l=(o=0,n.length);o<l;o++)this.tag.insertRule(s,n[o])&&(this.groupSizes[e]++,s++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var a=r;a<i;a++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),a=i+r,o=i;o<a;o++)n+="".concat(this.tag.getRule(o)).concat(`/*!sc*/
`);return n},t}(),$b=new Map,d2=new Map,rA=1,Sw=function(t){if($b.has(t))return $b.get(t);for(;d2.has(rA);)rA++;var e=rA++;return $b.set(t,e),d2.set(e,t),e},RVe=function(t,e){$b.set(t,e),d2.set(e,t)},$Ve="style[".concat(Lv,"][").concat("data-styled-version",'="').concat("6.0.2",'"]'),MVe=new RegExp("^".concat(Lv,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),OVe=function(t,e,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&t.registerName(e,r)},PVe=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(`/*!sc*/
`),i=[],a=0,o=r.length;a<o;a++){var s=r[a].trim();if(s){var l=s.match(MVe);if(l){var u=0|parseInt(l[1],10),c=l[2];u!==0&&(RVe(c,u),OVe(t,c,l[3]),t.getTag().insertRules(u,i)),i.length=0}else i.push(s)}}};function FVe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var wee=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(s){var l=Array.from(s.querySelectorAll("style[".concat(Lv,"]")));return l[l.length-1]}(n),a=i!==void 0?i.nextSibling:null;r.setAttribute(Lv,"active"),r.setAttribute("data-styled-version","6.0.2");var o=FVe();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},LVe=function(){function t(e){this.element=wee(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,a=r.length;i<a;i++){var o=r[i];if(o.ownerNode===n)return o}throw fx(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),zVe=function(){function t(e){this.element=wee(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),BVe=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),z8=o3,VVe={isServer:!o3,useCSSOMInjection:!gVe},bee=function(){function t(e,n,r){e===void 0&&(e=zv),n===void 0&&(n={});var i=this;this.options=de(de({},VVe),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&o3&&z8&&(z8=!1,function(a){for(var o=document.querySelectorAll($Ve),s=0,l=o.length;s<l;s++){var u=o[s];u&&u.getAttribute(Lv)!=="active"&&(PVe(a,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),l3(this,function(){return function(a){for(var o=a.getTag(),s=o.length,l="",u=function(f){var h=function(g){return d2.get(g)}(f);if(h===void 0)return"continue";var d=a.names.get(h),p=o.getGroup(f);if(d===void 0||p.length===0)return"continue";var v="".concat(Lv,".g").concat(f,'[id="').concat(h,'"]'),m="";d!==void 0&&d.forEach(function(g){g.length>0&&(m+="".concat(g,","))}),l+="".concat(p).concat(v,'{content:"').concat(m,'"}').concat(`/*!sc*/
`)},c=0;c<s;c++)u(c);return l}(i)})}return t.registerId=function(e){return Sw(e)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(de(de({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new BVe(i):r?new LVe(i):new zVe(i)}(this.options),new IVe(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Sw(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Sw(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Sw(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),WVe=/&/g,UVe=/^\s*\/\/.*$/gm;function Cee(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Cee(n.children,e)),n})}function GVe(t){var e,n,r,i=t===void 0?zv:t,a=i.options,o=a===void 0?zv:a,s=i.plugins,l=s===void 0?U_:s,u=function(h,d,p){return p===n||p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):h},c=l.slice();c.push(function(h){h.type===z_&&h.value.includes("&")&&(h.props[0]=h.props[0].replace(WVe,n).replace(r,u))}),o.prefix&&c.push(pVe),c.push(fVe);var f=function(h,d,p,v){d===void 0&&(d=""),p===void 0&&(p=""),v===void 0&&(v="&"),e=v,n=d,r=new RegExp("\\".concat(n,"\\b"),"g");var m=h.replace(UVe,""),g=uVe(p||d?"".concat(p," ").concat(d," { ").concat(m," }"):m);o.namespace&&(g=Cee(g,o.namespace));var y=[];return h2(g,hVe(c.concat(dVe(function(x){return y.push(x)})))),y};return f.hash=l.length?l.reduce(function(h,d){return d.name||fx(15),Np(h,d.name)},5381).toString():"",f}var HVe=new bee,HI=GVe(),See=An.createContext({shouldForwardProp:void 0,styleSheet:HVe,stylis:HI});See.Consumer;An.createContext(void 0);function B8(){return L.useContext(See)}var jVe=function(){function t(e,n){var r=this;this.inject=function(i,a){a===void 0&&(a=HI);var o=r.name+a.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,a(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,l3(this,function(){throw fx(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=HI),this.name+e.hash},t}(),qVe=function(t){return t>="A"&&t<="Z"};function V8(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;qVe(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var Dee=function(t){return t==null||t===!1||t===""},_ee=function(t){var e,n,r=[];for(var i in t){var a=t[i];t.hasOwnProperty(i)&&!Dee(a)&&(Array.isArray(a)&&a.isCss||Bv(a)?r.push("".concat(V8(i),":"),a,";"):ty(a)?r.push.apply(r,xh(xh(["".concat(i," {")],_ee(a),!1),["}"],!1)):r.push("".concat(V8(i),": ").concat((e=i,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in vVe||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function _h(t,e,n,r){if(Dee(t))return[];if(s3(t))return[".".concat(t.styledComponentId)];if(Bv(t)){if(!Bv(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var i=t(e);return _h(i,e,n,r)}var a;return t instanceof jVe?n?(t.inject(n,r),[t.getName(r)]):[t]:ty(t)?_ee(t):Array.isArray(t)?Array.prototype.concat.apply(U_,t.map(function(o){return _h(o,e,n,r)})):[t.toString()]}function KVe(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Bv(n)&&!s3(n))return!1}return!0}var XVe=vee("6.0.2"),YVe=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&KVe(e),this.componentId=n,this.baseHash=Np(XVe,n),this.baseStyle=r,bee.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=fh(i,this.staticRulesId);else{var a=L8(_h(this.rules,e,n,r)),o=UI(Np(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,o)){var s=r(a,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,s)}i=fh(i,o),this.staticRulesId=o}else{for(var l=Np(this.baseHash,r.hash),u="",c=0;c<this.rules.length;c++){var f=this.rules[c];if(typeof f=="string")u+=f;else if(f){var h=L8(_h(f,e,n,r));l=Np(l,h),u+=h}}if(u){var d=UI(l>>>0);n.hasNameForId(this.componentId,d)||n.insertRules(this.componentId,d,r(u,".".concat(d),void 0,this.componentId)),i=fh(i,d)}}return i},t}(),Tee=An.createContext(void 0);Tee.Consumer;var iA={};function ZVe(t,e,n){var r=s3(t),i=t,a=!nA(t),o=e.attrs,s=o===void 0?U_:o,l=e.componentId,u=l===void 0?function(x,w){var b=typeof x!="string"?"sc":$8(x);iA[b]=(iA[b]||0)+1;var C="".concat(b,"-").concat(bVe("6.0.2"+b+iA[b]));return w?"".concat(w,"-").concat(C):C}(e.displayName,e.parentComponentId):l,c=e.displayName;c===void 0&&function(x){return nA(x)?"styled.".concat(x):"Styled(".concat(CVe(x),")")}(t);var f=e.displayName&&e.componentId?"".concat($8(e.displayName),"-").concat(e.componentId):e.componentId||u,h=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,d=e.shouldForwardProp;if(r&&i.shouldForwardProp){var p=i.shouldForwardProp;if(e.shouldForwardProp){var v=e.shouldForwardProp;d=function(x,w){return p(x,w)&&v(x,w)}}else d=p}var m=new YVe(n,f,r?i.componentStyle:void 0);function g(x,w){return function(b,C,S){var D=b.attrs,_=b.componentStyle,T=b.defaultProps,E=b.foldedComponentIds,A=b.styledComponentId,R=b.target,$=An.useContext(Tee),O=B8(),M=b.shouldForwardProp||O.shouldForwardProp,B=function(W,j,K){for(var Y,Z=de(de({},j),{className:void 0,theme:K}),se=0;se<W.length;se+=1){var ee=Bv(Y=W[se])?Y(Z):Y;for(var oe in ee)Z[oe]=oe==="className"?fh(Z[oe],ee[oe]):oe==="style"?de(de({},Z[oe]),ee[oe]):ee[oe]}return j.className&&(Z.className=fh(Z.className,j.className)),Z}(D,C,mVe(C,$,T)||zv),P=B.as||R,z={};for(var U in B)B[U]===void 0||U[0]==="$"||U==="as"||U==="theme"||(U==="forwardedAs"?z.as=B.forwardedAs:M&&!M(U,P)||(z[U]=B[U]));var H=function(W,j){var K=B8(),Y=W.generateAndInjectStyles(j,K.styleSheet,K.stylis);return Y}(_,B),F=fh(E,A);return H&&(F+=" "+H),B.className&&(F+=" "+B.className),z[nA(P)&&!pee.has(P)?"class":"className"]=F,z.ref=S,L.createElement(P,z)}(y,x,w)}var y=An.forwardRef(g);return y.attrs=h,y.componentStyle=m,y.shouldForwardProp=d,y.foldedComponentIds=r?fh(i.foldedComponentIds,i.styledComponentId):"",y.styledComponentId=f,y.target=r?i.target:t,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(w){for(var b=[],C=1;C<arguments.length;C++)b[C-1]=arguments[C];for(var S=0,D=b;S<D.length;S++)GI(w,D[S],!0);return w}({},i.defaultProps,x):x}}),l3(y,function(){return".".concat(y.styledComponentId)}),a&&xee(y,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function W8(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var U8=function(t){return Object.assign(t,{isCss:!0})};function QVe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bv(t)||ty(t)){var r=t;return U8(_h(W8(U_,xh([r],e,!0))))}var i=t;return e.length===0&&i.length===1&&typeof i[0]=="string"?_h(i):U8(_h(W8(i,e)))}function jI(t,e,n){if(n===void 0&&(n=zv),!e)throw fx(1,e);var r=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return t(e,n,QVe.apply(void 0,xh([i],a,!1)))};return r.attrs=function(i){return jI(t,e,de(de({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return jI(t,e,de(de({},n),i))},r}var Eee=function(t){return jI(ZVe,t)},Aee=Eee;pee.forEach(function(t){Aee[t]=Eee(t)});const JVe=Aee.div`
    width: 300px;
    padding: 10px;
    background: var(--bg);
    opacity: ${t=>t.loading?.5:1};
    .group {
        margin-top: 10px;
    }
    .label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
    }
    *,
    .bp5-progress-bar * {
        border-radius: 0;
    }
`,eWe=({column:t="",quality:e={},loading:n=!1})=>{const{valid:r=0,invalid:i=0,missing:a=0}=e,o=[{label:"Valid",value:r,intent:At.PRIMARY},{label:"Invalid",value:i,intent:At.DANGER},{label:"Missing",value:a,intent:At.NONE}],s=r+i+a||1;return I.jsxs(JVe,{loading:n,children:[I.jsx("b",{children:"Data Quality"}),I.jsx("div",{children:o.map(l=>I.jsxs("div",{className:"group",children:[I.jsxs("div",{className:"label",children:[I.jsx("div",{children:l.label}),I.jsxs("div",{children:[l.value," (~",(l.value*100/s).toFixed(2),"%)"]})]}),I.jsx(rve,{animate:!1,value:l.value/s,intent:l.intent})]},l.label))})]})};function tWe({column:t}){const[e,n]=L.useState({}),[r,i]=L.useState(!1);if(t==="DataPrepIndex")return I.jsx(I.Fragment,{});const a=()=>{i(!0),setTimeout(()=>{K6e(t).then(u=>{n(u)}).finally(()=>i(!1))},1e3)},o=r?AS:ri,s="tick",l=At.PRIMARY;return I.jsx(oi,{onOpened:a,content:I.jsx(eWe,{column:t,quality:e,loading:r}),minimal:!0,placement:"bottom-start",children:I.jsx(o,{className:"quality-icon pointer",icon:s,intent:l,size:16})})}function nWe({columns:t=[],sizes:e={}}){const n=zn(),r=mn(o=>o.appState.selectedColumn),i=(o,s,l)=>{n(dn({path:"placeholder.x",value:l.x}))},a=(o,s,l)=>{n(bv({path:`sizes.${o}`,value:s.size.width})),n(dn({path:"placeholder.visible",value:!1}))};return I.jsx("div",{className:"sk-header",children:t.map(o=>I.jsx("div",{style:{width:e[o]??150},className:xu("header-cell fill",r===o&&"active"),children:I.jsx(uj,{content:I.jsx(w8e,{column:o}),className:"fill",children:I.jsx(U6e,{className:"fill",width:e[o]??150,height:30,minConstraints:[40,0],resizeHandles:["e"],onResize:(s,l)=>i(o,l,s),onResizeStart:s=>n(dn({path:"placeholder",value:{visible:!0,x:s.x}})),onResizeStop:(s,l)=>a(o,l),children:I.jsxs("div",{className:"column-title fcc",children:[I.jsx(j6e,{column:o}),I.jsx(tWe,{column:o})]})})})},o))})}function rWe(){const{visible:t,x:e}=mn(n=>n.appState.placeholder);return!t||!e?I.jsx(I.Fragment,{}):I.jsx("div",{className:"drag-placeholder",style:{left:e,top:0}})}function iWe({style:t,index:e}){const n=zn(),r=mn(a=>a.appState.selectedRows[e]),i=()=>{n(qge({index:e}))};return I.jsx("div",{style:t,onClick:i,className:xu("sk-cell serial-no pointer",r&&"selected"),children:e+1})}const aWe=({columnIndex:t,rowIndex:e,style:n,data:r})=>{const i=zn(),a=r.rows[e],o=r.columns[t];let s=a[o];if(t===0)return I.jsx(iWe,{style:n,index:e});const l=u=>{let c=u.target.textContent;i(cme({rowIndex:e,column:o,value:c}))};return I.jsx("div",{style:n,contentEditable:t>0,suppressContentEditableWarning:!0,className:"sk-cell",spellCheck:!1,onBlur:l,children:s})};function oWe(t,e){const n=L.useRef();return L.useEffect(()=>{n.current&&n.current.resetAfterIndices({columnIndex:0,rowIndex:0,shouldForceUpdate:!0})},[t,e]),n}const sWe=({rows:t=[],columns:e=[],sizes:n={}})=>{const r=oWe(n,e),i=L.useRef(),a=L.useRef(),{ref:o,width:s,height:l}=nq(),u=h=>{i.current.scrollLeft=h.scrollLeft,h.verticalScrollDirection==="forward"&&a.current.scrollHeight-a.current.scrollTop===a.current.clientHeight&&console.log("bottom reached"),h.horizontalScrollDirection==="forward"&&a.current.scrollWidth-a.current.scrollLeft===a.current.clientWidth&&(a.current.scrollLeft-=10)},c=h=>{i.current.style.overflow=h},f=h=>n[e[h]]??150;return I.jsxs("div",{className:"sk wrapper",ref:o,children:[I.jsx("div",{className:"header",ref:i,style:{minWidth:s},onScrollCapture:()=>c("auto"),onScroll:()=>c("hidden"),children:I.jsx(nWe,{columns:e,sizes:n})}),I.jsx(kme,{ref:r,outerRef:a,className:"sk-grid",columnCount:e.length,columnWidth:f,height:l-30,rowCount:t.length,rowHeight:()=>26,width:s,onScroll:u,itemData:{rows:t,columns:e},children:aWe}),I.jsx(rWe,{})]})};var Nee={},lWe=Ro&&Ro.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kee=Ro&&Ro.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nee,"__esModule",{value:!0});var so=kee(Vy),aA=kee(L),uWe=function(t){lWe(e,t);function e(n){var r=t.call(this,n)||this;return r.resetDragging=function(){r.frameDragCounter=0,r.setState({draggingOverFrame:!1,draggingOverTarget:!1})},r.handleWindowDragOverOrDrop=function(i){i.preventDefault()},r.handleFrameDrag=function(i){if(e.eventHasFiles(i)){if(r.frameDragCounter+=i.type==="dragenter"?1:-1,r.frameDragCounter===1){r.setState({draggingOverFrame:!0}),r.props.onFrameDragEnter&&r.props.onFrameDragEnter(i);return}if(r.frameDragCounter===0){r.setState({draggingOverFrame:!1}),r.props.onFrameDragLeave&&r.props.onFrameDragLeave(i);return}}},r.handleFrameDrop=function(i){r.state.draggingOverTarget||(r.resetDragging(),r.props.onFrameDrop&&r.props.onFrameDrop(i))},r.handleDragOver=function(i){e.eventHasFiles(i)&&(r.setState({draggingOverTarget:!0}),!e.isIE()&&r.props.dropEffect&&(i.dataTransfer.dropEffect=r.props.dropEffect),r.props.onDragOver&&r.props.onDragOver(i))},r.handleDragLeave=function(i){r.setState({draggingOverTarget:!1}),r.props.onDragLeave&&r.props.onDragLeave(i)},r.handleDrop=function(i){if(r.props.onDrop&&e.eventHasFiles(i)){var a=i.dataTransfer?i.dataTransfer.files:null;r.props.onDrop(a,i)}r.resetDragging()},r.handleTargetClick=function(i){r.props.onTargetClick&&r.props.onTargetClick(i),r.resetDragging()},r.stopFrameListeners=function(i){i&&(i.removeEventListener("dragenter",r.handleFrameDrag),i.removeEventListener("dragleave",r.handleFrameDrag),i.removeEventListener("drop",r.handleFrameDrop))},r.startFrameListeners=function(i){i&&(i.addEventListener("dragenter",r.handleFrameDrag),i.addEventListener("dragleave",r.handleFrameDrag),i.addEventListener("drop",r.handleFrameDrop))},r.frameDragCounter=0,r.state={draggingOverFrame:!1,draggingOverTarget:!1},r}return e.prototype.componentDidMount=function(){this.startFrameListeners(this.props.frame),this.resetDragging(),window.addEventListener("dragover",this.handleWindowDragOverOrDrop),window.addEventListener("drop",this.handleWindowDragOverOrDrop)},e.prototype.componentDidUpdate=function(n){n.frame!==this.props.frame&&(this.resetDragging(),this.stopFrameListeners(n.frame),this.startFrameListeners(this.props.frame))},e.prototype.componentWillUnmount=function(){this.stopFrameListeners(this.props.frame),window.removeEventListener("dragover",this.handleWindowDragOverOrDrop),window.removeEventListener("drop",this.handleWindowDragOverOrDrop)},e.prototype.render=function(){var n=this.props,r=n.children,i=n.className,a=n.targetClassName,o=n.draggingOverFrameClassName,s=n.draggingOverTargetClassName,l=this.state,u=l.draggingOverTarget,c=l.draggingOverFrame,f=a;return c&&(f+=" "+o),u&&(f+=" "+s),aA.default.createElement("div",{className:i,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},aA.default.createElement("div",{className:f,onClick:this.handleTargetClick},r))},e.isIE=function(){return typeof window<"u"&&(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>0)},e.eventHasFiles=function(n){var r=!1;if(n.dataTransfer){var i=n.dataTransfer.types;for(var a in i)if(i[a]==="Files"){r=!0;break}}return r},e.propTypes={className:so.default.string,targetClassName:so.default.string,draggingOverFrameClassName:so.default.string,draggingOverTargetClassName:so.default.string,onDragOver:so.default.func,onDragLeave:so.default.func,onDrop:so.default.func,onTargetClick:so.default.func,dropEffect:so.default.oneOf(["copy","move","link","none"]),frame:function(n,r,i){var a=n[r];if(a==null)return new Error("Warning: Required prop `"+r+"` was not specified in `"+i+"`");if(a!==document&&!(a instanceof HTMLElement))return new Error("Warning: Prop `"+r+"` must be one of the following: document, HTMLElement!")},onFrameDragEnter:so.default.func,onFrameDragLeave:so.default.func,onFrameDrop:so.default.func},e.defaultProps={dropEffect:"copy",frame:typeof window>"u"?void 0:window.document,className:"file-drop",targetClassName:"file-drop-target",draggingOverFrameClassName:"file-drop-dragging-over-frame",draggingOverTargetClassName:"file-drop-dragging-over-target"},e}(aA.default.PureComponent),cWe=Nee.FileDrop=uWe;const fWe="Drop file here or click to select";function hWe({onDrop:t=()=>null,accept:e="*",iconSize:n=80}){const r=L.useRef(null),i=L.useRef(null),a=l=>t(l.target.files),o=()=>{i.current.innerText="Drop here"},s=()=>{i.current.innerText=fWe};return I.jsxs(cWe,{onDrop:t,onTargetClick:()=>{var l;return(l=r.current)==null?void 0:l.click()},onDragOver:o,onDragLeave:s,children:[I.jsx(fve,{size:n,className:"file-drop-icon"}),I.jsx("input",{ref:r,type:"file",className:"psuedo-file-input",onChange:a,accept:e}),I.jsx("div",{ref:i,className:"file-drop-msg",children:"Drag-n-drop your file here OR click to select"})]})}var Iee={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,r){t.exports=r()})(Ro,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},s=0,l={parse:function(D,_){var T=(_=_||{}).dynamicTyping||!1;if(S(T)&&(_.dynamicTypingFunction=T,T={}),_.dynamicTyping=T,_.transform=!!S(_.transform)&&_.transform,_.worker&&l.WORKERS_SUPPORTED){var E=function(){if(!l.WORKERS_SUPPORTED)return!1;var R=(O=r.URL||r.webkitURL||null,M=n.toString(),l.BLOB_URL||(l.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))),$=new r.Worker(R),O,M;return $.onmessage=y,$.id=s++,o[$.id]=$}();return E.userStep=_.step,E.userChunk=_.chunk,E.userComplete=_.complete,E.userError=_.error,_.step=S(_.step),_.chunk=S(_.chunk),_.complete=S(_.complete),_.error=S(_.error),delete _.worker,void E.postMessage({input:D,config:_,workerId:E.id})}var A=null;return l.NODE_STREAM_INPUT,typeof D=="string"?(D=function(R){return R.charCodeAt(0)===65279?R.slice(1):R}(D),A=_.download?new f(_):new d(_)):D.readable===!0&&S(D.read)&&S(D.on)?A=new p(_):(r.File&&D instanceof File||D instanceof Object)&&(A=new h(_)),A.stream(D)},unparse:function(D,_){var T=!1,E=!0,A=",",R=`\r
`,$='"',O=$+$,M=!1,B=null,P=!1;(function(){if(typeof _=="object"){if(typeof _.delimiter!="string"||l.BAD_DELIMITERS.filter(function(F){return _.delimiter.indexOf(F)!==-1}).length||(A=_.delimiter),(typeof _.quotes=="boolean"||typeof _.quotes=="function"||Array.isArray(_.quotes))&&(T=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(M=_.skipEmptyLines),typeof _.newline=="string"&&(R=_.newline),typeof _.quoteChar=="string"&&($=_.quoteChar),typeof _.header=="boolean"&&(E=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");B=_.columns}_.escapeChar!==void 0&&(O=_.escapeChar+$),(typeof _.escapeFormulae=="boolean"||_.escapeFormulae instanceof RegExp)&&(P=_.escapeFormulae instanceof RegExp?_.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var z=new RegExp(m($),"g");if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return U(null,D,M);if(typeof D[0]=="object")return U(B||Object.keys(D[0]),D,M)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||B),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),U(D.fields||[],D.data||[],M);throw new Error("Unable to serialize unrecognized input");function U(F,W,j){var K="";typeof F=="string"&&(F=JSON.parse(F)),typeof W=="string"&&(W=JSON.parse(W));var Y=Array.isArray(F)&&0<F.length,Z=!Array.isArray(W[0]);if(Y&&E){for(var se=0;se<F.length;se++)0<se&&(K+=A),K+=H(F[se],se);0<W.length&&(K+=R)}for(var ee=0;ee<W.length;ee++){var oe=Y?F.length:W[ee].length,ce=!1,ve=Y?Object.keys(W[ee]).length===0:W[ee].length===0;if(j&&!Y&&(ce=j==="greedy"?W[ee].join("").trim()==="":W[ee].length===1&&W[ee][0].length===0),j==="greedy"&&Y){for(var ye=[],_e=0;_e<oe;_e++){var Ie=Z?F[_e]:_e;ye.push(W[ee][Ie])}ce=ye.join("").trim()===""}if(!ce){for(var Ne=0;Ne<oe;Ne++){0<Ne&&!ve&&(K+=A);var We=Y&&Z?F[Ne]:Ne;K+=H(W[ee][We],Ne)}ee<W.length-1&&(!j||0<oe&&!ve)&&(K+=R)}}return K}function H(F,W){if(F==null)return"";if(F.constructor===Date)return JSON.stringify(F).slice(1,25);var j=!1;P&&typeof F=="string"&&P.test(F)&&(F="'"+F,j=!0);var K=F.toString().replace(z,O);return(j=j||T===!0||typeof T=="function"&&T(F,W)||Array.isArray(T)&&T[W]||function(Y,Z){for(var se=0;se<Z.length;se++)if(-1<Y.indexOf(Z[se]))return!0;return!1}(K,l.BAD_DELIMITERS)||-1<K.indexOf(A)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?$+K+$:K}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!i&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=g,l.ParserHandle=v,l.NetworkStreamer=f,l.FileStreamer=h,l.StringStreamer=d,l.ReadableStreamStreamer=p,r.jQuery){var u=r.jQuery;u.fn.parse=function(D){var _=D.config||{},T=[];return this.each(function(R){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)T.push({file:this.files[$],inputElem:this,instanceConfig:u.extend({},_)})}),E(),this;function E(){if(T.length!==0){var R,$,O,M,B=T[0];if(S(D.before)){var P=D.before(B.file,B.inputElem);if(typeof P=="object"){if(P.action==="abort")return R="AbortError",$=B.file,O=B.inputElem,M=P.reason,void(S(D.error)&&D.error({name:R},$,O,M));if(P.action==="skip")return void A();typeof P.config=="object"&&(B.instanceConfig=u.extend(B.instanceConfig,P.config))}else if(P==="skip")return void A()}var z=B.instanceConfig.complete;B.instanceConfig.complete=function(U){S(z)&&z(U,B.file,B.inputElem),A()},l.parse(B.file,B.instanceConfig)}else S(D.complete)&&D.complete()}function A(){T.splice(0,1),E()}}}function c(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var T=b(_);T.chunkSize=parseInt(T.chunkSize),_.step||_.chunk||(T.chunkSize=null),this._handle=new v(T),(this._handle.streamer=this)._config=T}).call(this,D),this.parseChunk=function(_,T){if(this.isFirstChunk&&S(this._config.beforeFirstChunk)){var E=this._config.beforeFirstChunk(_);E!==void 0&&(_=E)}this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+_;this._partialLine="";var R=this._handle.parse(A,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var $=R.meta.cursor;this._finished||(this._partialLine=A.substring($-this._baseIndex),this._baseIndex=$),R&&R.data&&(this._rowCount+=R.data.length);var O=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)r.postMessage({results:R,workerId:l.WORKER_ID,finished:O});else if(S(this._config.chunk)&&!T){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);R=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!O||!S(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),O||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(_){S(this._config.error)?this._config.error(_):a&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:_,finished:!1})}}function f(D){var _;(D=D||{}).chunkSize||(D.chunkSize=l.RemoteChunkSize),c.call(this,D),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var T=this._config.downloadRequestHeaders;for(var E in T)_.setRequestHeader(E,T[E])}if(this._config.chunkSize){var A=this._start+this._config.chunkSize-1;_.setRequestHeader("Range","bytes="+this._start+"-"+A)}try{_.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:_.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(T){var E=T.getResponseHeader("Content-Range");return E===null?-1:parseInt(E.substring(E.lastIndexOf("/")+1))}(_),this.parseChunk(_.responseText)))},this._chunkError=function(T){var E=_.statusText||T;this._sendError(new Error(E))}}function h(D){var _,T;(D=D||{}).chunkSize||(D.chunkSize=l.LocalChunkSize),c.call(this,D);var E=typeof FileReader<"u";this.stream=function(A){this._input=A,T=A.slice||A.webkitSlice||A.mozSlice,E?((_=new FileReader).onload=C(this._chunkLoaded,this),_.onerror=C(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input;if(this._config.chunkSize){var R=Math.min(this._start+this._config.chunkSize,this._input.size);A=T.call(A,this._start,R)}var $=_.readAsText(A,this._config.encoding);E||this._chunkLoaded({target:{result:$}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(_.error)}}function d(D){var _;c.call(this,D=D||{}),this.stream=function(T){return _=T,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var T,E=this._config.chunkSize;return E?(T=_.substring(0,E),_=_.substring(E)):(T=_,_=""),this._finished=!_,this.parseChunk(T)}}}function p(D){c.call(this,D=D||{});var _=[],T=!0,E=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):T=!0},this._streamData=C(function(A){try{_.push(typeof A=="string"?A:A.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(R){this._streamError(R)}},this),this._streamError=C(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=C(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(D){var _,T,E,A=Math.pow(2,53),R=-A,$=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,B=0,P=0,z=!1,U=!1,H=[],F={data:[],errors:[],meta:{}};if(S(D.step)){var W=D.step;D.step=function(ee){if(F=ee,Y())K();else{if(K(),F.data.length===0)return;B+=ee.data.length,D.preview&&B>D.preview?T.abort():(F.data=F.data[0],W(F,M))}}}function j(ee){return D.skipEmptyLines==="greedy"?ee.join("").trim()==="":ee.length===1&&ee[0].length===0}function K(){return F&&E&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),E=!1),D.skipEmptyLines&&(F.data=F.data.filter(function(ee){return!j(ee)})),Y()&&function(){if(!F)return;function ee(ce,ve){S(D.transformHeader)&&(ce=D.transformHeader(ce,ve)),H.push(ce)}if(Array.isArray(F.data[0])){for(var oe=0;Y()&&oe<F.data.length;oe++)F.data[oe].forEach(ee);F.data.splice(0,1)}else F.data.forEach(ee)}(),function(){if(!F||!D.header&&!D.dynamicTyping&&!D.transform)return F;function ee(ce,ve){var ye,_e=D.header?{}:[];for(ye=0;ye<ce.length;ye++){var Ie=ye,Ne=ce[ye];D.header&&(Ie=ye>=H.length?"__parsed_extra":H[ye]),D.transform&&(Ne=D.transform(Ne,Ie)),Ne=Z(Ie,Ne),Ie==="__parsed_extra"?(_e[Ie]=_e[Ie]||[],_e[Ie].push(Ne)):_e[Ie]=Ne}return D.header&&(ye>H.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+ye,P+ve):ye<H.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+ye,P+ve)),_e}var oe=1;return!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(ee),oe=F.data.length):F.data=ee(F.data,0),D.header&&F.meta&&(F.meta.fields=H),P+=oe,F}()}function Y(){return D.header&&H.length===0}function Z(ee,oe){return ce=ee,D.dynamicTypingFunction&&D.dynamicTyping[ce]===void 0&&(D.dynamicTyping[ce]=D.dynamicTypingFunction(ce)),(D.dynamicTyping[ce]||D.dynamicTyping)===!0?oe==="true"||oe==="TRUE"||oe!=="false"&&oe!=="FALSE"&&(function(ve){if($.test(ve)){var ye=parseFloat(ve);if(R<ye&&ye<A)return!0}return!1}(oe)?parseFloat(oe):O.test(oe)?new Date(oe):oe===""?null:oe):oe;var ce}function se(ee,oe,ce,ve){var ye={type:ee,code:oe,message:ce};ve!==void 0&&(ye.row=ve),F.errors.push(ye)}this.parse=function(ee,oe,ce){var ve=D.quoteChar||'"';if(D.newline||(D.newline=function(Ie,Ne){Ie=Ie.substring(0,1048576);var We=new RegExp(m(Ne)+"([^]*?)"+m(Ne),"gm"),qe=(Ie=Ie.replace(We,"")).split("\r"),ft=Ie.split(`
`),at=1<ft.length&&ft[0].length<qe[0].length;if(qe.length===1||at)return`
`;for(var bt=0,ot=0;ot<qe.length;ot++)qe[ot][0]===`
`&&bt++;return bt>=qe.length/2?`\r
`:"\r"}(ee,ve)),E=!1,D.delimiter)S(D.delimiter)&&(D.delimiter=D.delimiter(ee),F.meta.delimiter=D.delimiter);else{var ye=function(Ie,Ne,We,qe,ft){var at,bt,ot,q;ft=ft||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Q=0;Q<ft.length;Q++){var re=ft[Q],pe=0,me=0,xe=0;ot=void 0;for(var Se=new g({comments:qe,delimiter:re,newline:Ne,preview:10}).parse(Ie),ge=0;ge<Se.data.length;ge++)if(We&&j(Se.data[ge]))xe++;else{var Ce=Se.data[ge].length;me+=Ce,ot!==void 0?0<Ce&&(pe+=Math.abs(Ce-ot),ot=Ce):ot=Ce}0<Se.data.length&&(me/=Se.data.length-xe),(bt===void 0||pe<=bt)&&(q===void 0||q<me)&&1.99<me&&(bt=pe,at=re,q=me)}return{successful:!!(D.delimiter=at),bestDelimiter:at}}(ee,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess);ye.successful?D.delimiter=ye.bestDelimiter:(E=!0,D.delimiter=l.DefaultDelimiter),F.meta.delimiter=D.delimiter}var _e=b(D);return D.preview&&D.header&&_e.preview++,_=ee,T=new g(_e),F=T.parse(_,oe,ce),K(),z?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,T.abort(),_=S(D.chunk)?"":_.substring(T.getCharIndex())},this.resume=function(){M.streamer._halted?(z=!1,M.streamer.parseChunk(_,!0)):setTimeout(M.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,T.abort(),F.meta.aborted=!0,S(D.complete)&&D.complete(F),_=""}}function m(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(D){var _,T=(D=D||{}).delimiter,E=D.newline,A=D.comments,R=D.step,$=D.preview,O=D.fastMode,M=_=D.quoteChar===void 0||D.quoteChar===null?'"':D.quoteChar;if(D.escapeChar!==void 0&&(M=D.escapeChar),(typeof T!="string"||-1<l.BAD_DELIMITERS.indexOf(T))&&(T=","),A===T)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<l.BAD_DELIMITERS.indexOf(A))&&(A=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var B=0,P=!1;this.parse=function(z,U,H){if(typeof z!="string")throw new Error("Input must be a string");var F=z.length,W=T.length,j=E.length,K=A.length,Y=S(R),Z=[],se=[],ee=[],oe=B=0;if(!z)return Le();if(D.header&&!U){var ce=z.split(E)[0].split(T),ve=[],ye={},_e=!1;for(var Ie in ce){var Ne=ce[Ie];S(D.transformHeader)&&(Ne=D.transformHeader(Ne,Ie));var We=Ne,qe=ye[Ne]||0;for(0<qe&&(_e=!0,We=Ne+"_"+qe),ye[Ne]=qe+1;ve.includes(We);)We=We+"_"+qe;ve.push(We)}if(_e){var ft=z.split(E);ft[0]=ve.join(T),z=ft.join(E)}}if(O||O!==!1&&z.indexOf(_)===-1){for(var at=z.split(E),bt=0;bt<at.length;bt++){if(ee=at[bt],B+=ee.length,bt!==at.length-1)B+=E.length;else if(H)return Le();if(!A||ee.substring(0,K)!==A){if(Y){if(Z=[],xe(ee.split(T)),st(),P)return Le()}else xe(ee.split(T));if($&&$<=bt)return Z=Z.slice(0,$),Le(!0)}}return Le()}for(var ot=z.indexOf(T,B),q=z.indexOf(E,B),Q=new RegExp(m(M)+m(_),"g"),re=z.indexOf(_,B);;)if(z[B]!==_)if(A&&ee.length===0&&z.substring(B,B+K)===A){if(q===-1)return Le();B=q+j,q=z.indexOf(E,B),ot=z.indexOf(T,B)}else if(ot!==-1&&(ot<q||q===-1))ee.push(z.substring(B,ot)),B=ot+W,ot=z.indexOf(T,B);else{if(q===-1)break;if(ee.push(z.substring(B,q)),Ce(q+j),Y&&(st(),P))return Le();if($&&Z.length>=$)return Le(!0)}else for(re=B,B++;;){if((re=z.indexOf(_,re+1))===-1)return H||se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:B}),ge();if(re===F-1)return ge(z.substring(B,re).replace(Q,_));if(_!==M||z[re+1]!==M){if(_===M||re===0||z[re-1]!==M){ot!==-1&&ot<re+1&&(ot=z.indexOf(T,re+1)),q!==-1&&q<re+1&&(q=z.indexOf(E,re+1));var pe=Se(q===-1?ot:Math.min(ot,q));if(z.substr(re+1+pe,W)===T){ee.push(z.substring(B,re).replace(Q,_)),z[B=re+1+pe+W]!==_&&(re=z.indexOf(_,B)),ot=z.indexOf(T,B),q=z.indexOf(E,B);break}var me=Se(q);if(z.substring(re+1+me,re+1+me+j)===E){if(ee.push(z.substring(B,re).replace(Q,_)),Ce(re+1+me+j),ot=z.indexOf(T,B),re=z.indexOf(_,B),Y&&(st(),P))return Le();if($&&Z.length>=$)return Le(!0);break}se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:B}),re++}}else re++}return ge();function xe(Ae){Z.push(Ae),oe=B}function Se(Ae){var ur=0;if(Ae!==-1){var er=z.substring(re+1,Ae);er&&er.trim()===""&&(ur=er.length)}return ur}function ge(Ae){return H||(Ae===void 0&&(Ae=z.substring(B)),ee.push(Ae),B=F,xe(ee),Y&&st()),Le()}function Ce(Ae){B=Ae,xe(ee),ee=[],q=z.indexOf(E,B)}function Le(Ae){return{data:Z,errors:se,meta:{delimiter:T,linebreak:E,aborted:P,truncated:!!Ae,cursor:oe+(U||0)}}}function st(){R(Le()),Z=[],se=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return B}}function y(D){var _=D.data,T=o[_.workerId],E=!1;if(_.error)T.userError(_.error,_.file);else if(_.results&&_.results.data){var A={abort:function(){E=!0,x(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(S(T.userStep)){for(var R=0;R<_.results.data.length&&(T.userStep({data:_.results.data[R],errors:_.results.errors,meta:_.results.meta},A),!E);R++);delete _.results}else S(T.userChunk)&&(T.userChunk(_.results,A,_.file),delete _.results)}_.finished&&!E&&x(_.workerId,_.results)}function x(D,_){var T=o[D];S(T.userComplete)&&T.userComplete(_),T.terminate(),delete o[D]}function w(){throw new Error("Not implemented.")}function b(D){if(typeof D!="object"||D===null)return D;var _=Array.isArray(D)?[]:{};for(var T in D)_[T]=b(D[T]);return _}function C(D,_){return function(){D.apply(_,arguments)}}function S(D){return typeof D=="function"}return a&&(r.onmessage=function(D){var _=D.data;if(l.WORKER_ID===void 0&&_&&(l.WORKER_ID=_.workerId),typeof _.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(_.input,_.config),finished:!0});else if(r.File&&_.input instanceof File||_.input instanceof Object){var T=l.parse(_.input,_.config);T&&r.postMessage({workerId:l.WORKER_ID,results:T,finished:!0})}}),(f.prototype=Object.create(c.prototype)).constructor=f,(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,l})})(Iee);var dWe=Iee.exports;const pWe=Al(dWe),vWe=t=>new Date(t)!=="Invalid Date"&&!isNaN(new Date(t))?t===new Date(t).toISOString():!1,gWe=t=>vWe(t)?"date":Number.isNaN(Number(t))?"string":"number";function mWe(t){if(!t||!t.length)return{};let e=t[0],n={},r=Object.keys(e);return r.forEach(i=>{n[i]={missing:0,invalid:0,type:gWe(e[i])}}),t.forEach(i=>{r.forEach(a=>{i[a]||(n[a].missing+=1)})}),n}function yWe(t){const e=t.data;return async function(n){const r=mWe(e);n(bv({path:"details",value:r}))}}function Ree({message:t="Applying transform",visible:e=!1}){return!mn(r=>r.appState.loader)&&!e?I.jsx(I.Fragment,{}):I.jsx("div",{className:"loader fcc",children:I.jsx("div",{elevation:3,className:"inprogress fcc",children:I.jsx(gj,{icon:I.jsx(AS,{size:48}),description:t})})})}const xWe="_wrapper_hz69i_1",wWe="_header_hz69i_8",bWe="_table_hz69i_19",CWe="_footer_hz69i_24",SWe="_info_hz69i_36",DWe="_fileinput_hz69i_39",hh={wrapper:xWe,header:wWe,table:bWe,footer:CWe,info:SWe,fileinput:DWe};function _We(){const t=zn(),[e,n]=L.useState(!1),r=a=>{const o=new FileReader;n(!0),o.onload=function(){let s=pWe.parse(o.result.trim(),{header:!0}),l=(s==null?void 0:s.data)||[];t(ume({data:l})),t(yWe({data:l})),n(!1)},o.readAsText(a)},i=a=>{r(a[0])};return I.jsx("div",{className:"fcc",style:{height:"100%"},children:e?I.jsx(Ree,{message:"Parsing file...",visible:!0}):I.jsx("div",{className:hh.fileinput,children:I.jsx(hWe,{accept:".csv",onDrop:i})})})}const Ga=t=>I.jsx(Wt,{...t,minimal:!0,small:!0});function TWe({column:t}){const e=zn(),n=()=>e(dn({path:"drawer",value:{open:!0,type:"profile",column:t}}));return I.jsx(Ga,{icon:"panel-stats",text:"Data Profile",onClick:n,disabled:!t})}const EWe="_popover_dcw39_1",AWe="_popoverActions_dcw39_7",NWe="_row_dcw39_12",kWe="_arrow_dcw39_17",IWe="_divider_dcw39_20",RWe="_sampleValue_dcw39_24",On={popover:EWe,popoverActions:AWe,row:NWe,arrow:kWe,divider:IWe,sampleValue:RWe};function u3({onConfirm:t=()=>null}){return I.jsxs("div",{className:On.popoverActions,children:[I.jsx(Wt,{text:"Cancel",outlined:!0,intent:At.DANGER,className:Da}),I.jsx(Wt,{text:"Confirm",onClick:t,intent:At.PRIMARY,className:Da+" ml-10"})]})}const $We=()=>{const[t,e]=L.useState("");return I.jsxs("div",{className:On.popover,children:[I.jsx(Va,{label:"Value to remove",children:I.jsx(_i,{value:t,onChange:n=>e(n.target.value),placeholder:"Enter value"})}),I.jsx(u3,{})]})},MWe=({column:t})=>{const e=zn(),n=r=>e(Td({column:t,type:r}));return I.jsxs(Su,{className:"compact",children:[I.jsx(Ge,{icon:"applications",text:"Duplicates",onClick:()=>n(zi.remove_duplicates)}),I.jsx(Ge,{icon:"cross",text:"Blanks",onClick:()=>n(zi.remove_blanks)}),I.jsx(Ge,{icon:"locate",text:"Custom",children:I.jsx($We,{})})]})};function OWe({column:t}){const e="Remove Rows",n="remove";return I.jsx(oi,{content:I.jsx(MWe,{column:t}),minimal:!0,position:"bottom-left",matchTargetWidth:!0,children:I.jsx(Ga,{disabled:!t,text:e,icon:n,rightIcon:"chevron-down"})})}const PWe=({column:t})=>{const e=zn(),[n,r]=L.useState(""),[i,a]=L.useState(""),o=()=>e(Td({column:t,type:zi.find_and_replace,options:{find:n,replace:i}}));return I.jsxs("div",{className:On.popover,children:[I.jsx(Va,{label:"Find",children:I.jsx(_i,{value:n,onChange:s=>r(s.target.value),placeholder:"Enter value to find"})}),I.jsx(Va,{label:"Replace with",className:"mt7",children:I.jsx(_i,{value:i,onChange:s=>a(s.target.value),placeholder:"Enter value"})}),I.jsxs("div",{className:On.popoverActions,children:[I.jsx(Wt,{text:"Cancel",outlined:!0,intent:At.DANGER,className:Da}),I.jsx(Wt,{text:"Confirm",onClick:o,intent:At.PRIMARY,className:Da+" ml-10"})]})]})};function FWe({column:t}){return I.jsx(oi,{content:I.jsx(PWe,{column:t}),position:"bottom",children:I.jsx(Ga,{text:"Find & replace",disabled:!t,icon:"search-text"})})}function bg(t){return mn(n=>{var r;return(r=n.data.details[t])==null?void 0:r.type})}function $ee(t,e=5){return mn(r=>{const i=r.data.transformed;let a=[],o={};for(let s=0;s<Math.min(i.length,5,e);s++){const l=i[s][t];o[l]||(a.push(l),o[l]=1)}return a})}function LWe(t){const e=zn();return(r,i)=>e(Td({column:t,type:r,options:i}))}const zWe=({column:t})=>{const[e,n]=L.useState(""),[r,i]=L.useState("");return I.jsxs("div",{className:On.popover,children:[I.jsx(Va,{label:"Character",children:I.jsx(_i,{value:e,onChange:a=>n(a.target.value),placeholder:"Enter character / substring to find"})}),I.jsx(Va,{label:"Replace with",className:"mt7",children:I.jsx(_i,{value:r,onChange:a=>i(a.target.value),placeholder:"Enter value"})}),I.jsxs("div",{className:On.popoverActions,children:[I.jsx(Wt,{text:"Cancel",outlined:!0,intent:At.DANGER,className:Da}),I.jsx(Wt,{text:"Confirm",intent:At.PRIMARY,className:Da+" ml-10"})]})]})};function BWe({column:t}){const n=bg(t)!=="string";return I.jsx(oi,{content:I.jsx(zWe,{column:t}),position:"bottom",children:I.jsx(Ga,{text:"Replace Characters",disabled:n,icon:"regex"})})}const VWe=(t,e)=>{if(!e.length)return[];let n=[];return e.forEach(r=>{let i="";for(let a=r.startIndex;a<Math.min(r.endIndex+1,t.length);a++)i+=t[a];n.push(i)}),n},WWe=(t,e)=>{let n=e.splitters;if(!n||!n.length)return[];let r=0,i=[],a=t;for(;r<n.length;){let o=n[r],[s,...l]=a.split(o);i.push(s),a=l.join(o),r===n.length-1&&a.length&&i.push(a),r++}return i},UWe=["#2D72D2","#238551","#CD4246","#D1980B","#8c7ae6","#ff7a45","#DB2C6F","#a0d911","#9D3F9D","#34ace0","#eb2f96","#ffc53d"],G8=t=>{let e=[],n=0,r,i=0,a=0,o=0,s=0;for(;n<t.length;){let l=t[n];l==="{"&&typeof r!="number"?(r=n-a-o,i=0,o++):l==="}"&&typeof r=="number"?(e.push({startIndex:r,endIndex:r+i-1,color:UWe[s]}),s++,r=null,a++):i++,n++}return e},H8=t=>{let e=[],n=[],r=0,i=!1,a="",o="";for(;r<t.length;){let s=t[r];s==="{"?(i=!0,o=""):s==="}"&&i?(a&&e.push(a),n.push(o),a="",i=!1):i?o+=s:a+=s,r++}return{splitters:e,columnNames:n}},GWe=({column:t})=>{const[e,n]=L.useState(""),[r,i]=L.useState([]),[a,o]=L.useState("relative"),s=$ee(t,3),l=()=>{i((a==="absolute"?G8:H8)(e))},u=f=>{o(f),i((f==="absolute"?G8:H8)(e))};let c=a==="absolute"?VWe:WWe;return I.jsxs("div",{className:On.popover,children:[I.jsx(Va,{label:"Template",children:I.jsx(_i,{value:e,onChange:f=>n(f.target.value),placeholder:"{xxxx}__{xx}___{xxxxx}",onBlur:l})}),I.jsx(Va,{label:"Split strategy",children:I.jsx(hd,{value:a,onValueChange:u,options:[{label:"Absolute",value:"absolute"},{label:"Relative",value:"relative"}]})}),I.jsxs(Il,{style:{backgroundColor:"var(--bg)",width:400},children:[I.jsx("h4",{className:"mb-10",children:"Sample result"}),s.map(f=>{let h=c(f,r)||[];return I.jsxs("div",{className:On.row,children:[I.jsx("div",{className:On.sampleValue,children:f}),I.jsx(bj,{className:On.arrow}),I.jsx("div",{className:On.sampleValue,children:h.map(d=>I.jsx(L0,{minimal:!0,className:"ml-10 border",children:d},d))}),!h.length&&I.jsx("div",{className:On.sampleValue,children:"..."})]},f)})]}),I.jsx(u3,{})]})};function HWe({column:t}){const n=bg(t)!=="string";return I.jsx(oi,{content:I.jsx(GWe,{column:t}),position:"bottom",children:I.jsx(Ga,{text:"Split Text",disabled:n,icon:"one-to-many"})})}const jWe=({column:t})=>{const[e,n]=L.useState('"');return I.jsxs("div",{className:On.popover,children:[I.jsx(hd,{small:!0,options:[{label:"Whitespaces",value:" "},{label:"Single Quotes",value:"'"},{label:"Double Quotes",value:'"'},{label:"Underscore",value:"_"}],value:e,onValueChange:r=>n(r),className:"mb-10"}),I.jsx(Va,{label:"Text / substring",helperText:`Character count : ${e.length}`,children:I.jsx(_i,{placeholder:"Enter character / substring to replace",value:e,onChange:r=>n(r.target.value)})}),I.jsx(F0,{label:"Trim from left",checked:!0}),I.jsx(F0,{label:"Trim from right",checked:!0}),I.jsxs("div",{className:On.popoverActions,children:[I.jsx(Wt,{text:"Cancel",outlined:!0,intent:At.DANGER,className:Da}),I.jsx(Wt,{text:"Confirm",intent:At.PRIMARY,className:Da+" ml-10"})]})]})};function qWe({column:t}){const n=bg(t)!=="string";return I.jsx(oi,{content:I.jsx(jWe,{column:t}),position:"bottom",children:I.jsx(Ga,{disabled:n,text:"Trim Text",icon:"cut"})})}const KWe=({column:t})=>{const e=LWe(t),[n,r]=L.useState(""),[i,a]=L.useState(""),o=()=>e(zi.addPrefixSuffix,{prefix:n,suffix:i});return I.jsxs("div",{className:On.popover,children:[I.jsx(Va,{label:"Prefix",children:I.jsx(_i,{value:n,onChange:s=>r(s.target.value),placeholder:"Enter prefix"})}),I.jsx(Va,{label:"Suffix",className:"mt7",children:I.jsx(_i,{value:i,onChange:s=>a(s.target.value),placeholder:"Enter suffix"})}),I.jsxs("div",{className:"preview",children:[n,I.jsx("b",{style:{color:"orange"},children:"<cell_value>"}),i]}),I.jsxs("div",{className:On.popoverActions,children:[I.jsx(Wt,{text:"Cancel",outlined:!0,intent:At.DANGER,className:Da}),I.jsx(Wt,{text:"Confirm",onClick:o,intent:At.PRIMARY,className:Da+" ml-10"})]})]})};function XWe({column:t}){return I.jsx(oi,{content:I.jsx(KWe,{column:t}),position:"bottom",children:I.jsx(Ga,{text:"Format Values",disabled:!t,icon:"clean"})})}const YWe=({column:t})=>{const e=bg(t),n=[{label:"Column average",value:"avg",disabled:e!=="number"},{label:"Mode",value:"mode"},{label:"Median",value:"median",disabled:e!=="number"},{label:"Previous Row",value:"prev_row"}];return I.jsxs(Su,{className:"compact",children:[I.jsx(cs,{title:"Fill with"}),n.map(r=>I.jsx(Ge,{disabled:r.disabled,text:r.label},r.value))]})};function ZWe({column:t}){return I.jsx(oi,{content:I.jsx(YWe,{column:t}),minimal:!0,position:"bottom-left",matchTargetWidth:!0,children:I.jsx(Ga,{disabled:!t,text:"Fill Missing",icon:"manually-entered-data",rightIcon:"chevron-down"})})}const QWe=/([\p{Ll}\d])(\p{Lu})/gu,JWe=/(\p{Lu})([\p{Lu}][\p{Ll}])/gu,eUe=/(\d)\p{Ll}|(\p{L})\d/u,tUe=/[^\p{L}\d]+/giu,j8="$1\0$2",q8="";function c3(t){let e=t.trim();e=e.replace(QWe,j8).replace(JWe,j8),e=e.replace(tUe,"\0");let n=0,r=e.length;for(;e.charAt(n)==="\0";)n++;if(n===r)return[];for(;e.charAt(r-1)==="\0";)r--;return e.slice(n,r).split(/\0/g)}function Mee(t){const e=c3(t);for(let n=0;n<e.length;n++){const r=e[n],i=eUe.exec(r);if(i){const a=i.index+(i[1]??i[2]).length;e.splice(n,1,r.slice(0,a),r.slice(a))}}return e}function hx(t,e){const[n,r,i]=Cg(t,e);return n+r.map(dx(e==null?void 0:e.locale)).join((e==null?void 0:e.delimiter)??" ")+i}function nUe(t,e){const[n,r,i]=Cg(t,e),a=dx(e==null?void 0:e.locale),o=px(e==null?void 0:e.locale),s=e!=null&&e.mergeAmbiguousCharacters?G_(a,o):Oee(a,o);return n+r.map((l,u)=>u===0?a(l):s(l,u)).join((e==null?void 0:e.delimiter)??"")+i}function rUe(t,e){const[n,r,i]=Cg(t,e),a=dx(e==null?void 0:e.locale),o=px(e==null?void 0:e.locale),s=e!=null&&e.mergeAmbiguousCharacters?G_(a,o):Oee(a,o);return n+r.map(s).join((e==null?void 0:e.delimiter)??"")+i}function iUe(t,e){return f3(t,{delimiter:"_",...e})}function f3(t,e){const[n,r,i]=Cg(t,e),a=dx(e==null?void 0:e.locale),o=px(e==null?void 0:e.locale);return n+r.map(G_(a,o)).join((e==null?void 0:e.delimiter)??" ")+i}function aUe(t,e){const[n,r,i]=Cg(t,e);return n+r.map(px(e==null?void 0:e.locale)).join((e==null?void 0:e.delimiter)??"_")+i}function oUe(t,e){return hx(t,{delimiter:".",...e})}function sUe(t,e){return hx(t,{delimiter:"-",...e})}function lUe(t,e){return hx(t,{delimiter:"/",...e})}function uUe(t,e){const[n,r,i]=Cg(t,e),a=dx(e==null?void 0:e.locale),o=px(e==null?void 0:e.locale),s=G_(a,o);return n+r.map((l,u)=>u===0?s(l):a(l)).join((e==null?void 0:e.delimiter)??" ")+i}function cUe(t,e){return hx(t,{delimiter:"_",...e})}function fUe(t,e){return f3(t,{delimiter:"-",...e})}function dx(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function px(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function G_(t,e){return n=>`${e(n[0])}${t(n.slice(1))}`}function Oee(t,e){return(n,r)=>{const i=n[0];return(r>0&&i>="0"&&i<="9"?"_"+i:e(i))+t(n.slice(1))}}function Cg(t,e={}){const n=e.split??(e.separateNumbers?Mee:c3),r=e.prefixCharacters??q8,i=e.suffixCharacters??q8;let a=0,o=t.length;for(;a<t.length;){const s=t.charAt(a);if(!r.includes(s))break;a++}for(;o>a;){const s=o-1,l=t.charAt(s);if(!i.includes(l))break;o=s}return[t.slice(0,a),n(t.slice(a,o)),t.slice(o)]}const hUe=Object.freeze(Object.defineProperty({__proto__:null,camelCase:nUe,capitalCase:f3,constantCase:aUe,dotCase:oUe,kebabCase:sUe,noCase:hx,pascalCase:rUe,pascalSnakeCase:iUe,pathCase:lUe,sentenceCase:uUe,snakeCase:cUe,split:c3,splitSeparateNumbers:Mee,trainCase:fUe},Symbol.toStringTag,{value:"Module"})),dUe=[{label:"UPPERCASE",value:"uppercase"},{label:"lowercase",value:"lowercase"},{label:"camelCase",value:"camelCase"},{label:"snake_case",value:"snakeCase"},{label:"Sentence case",value:"sentenceCase"},{label:"PascalCase",value:"pascalCase"},{label:"Pascal_Snake_Case",value:"pascalSnakeCase"},{label:"Capital Case",value:"capitalCase"},{label:"kebab-case",value:"kebabCase"},{label:"Train-Case",value:"trainCase"},{label:"CONSTANT_CASE",value:"constantCase"},{label:"dot.case",value:"dotCase"},{label:"path/case",value:"pathCase"}],pUe=({type:t,sampleData:e})=>{let n=e.map(r=>{let i=t==="lowercase"?r.toLowerCase():t==="uppercase"?r.toUpperCase():hUe[t](r);return{original:r,transformed:i}});return I.jsxs("div",{children:[I.jsx("h4",{className:"mb-10",children:"Sample transformations"}),n.map(r=>I.jsxs("div",{className:On.row,children:[I.jsx("div",{className:On.sampleValue,children:r.original}),I.jsx(bj,{className:On.arrow}),I.jsx("div",{className:On.sampleValue,children:r.transformed})]},r.original))]})},vUe=({option:t,sampleData:e})=>I.jsx(ou,{content:I.jsx(pUe,{type:t.value,sampleData:e}),placement:"right",className:"fill",children:I.jsx("div",{className:"fill",children:t.label})}),gUe=({column:t})=>{const e=$ee(t);return I.jsxs(Su,{className:"compact",children:[I.jsx(cs,{title:"Select type"}),dUe.map(n=>I.jsx(Ge,{text:I.jsx(vUe,{option:n,sampleData:e})},n.value))]})};function mUe({column:t}){const n=bg(t)!=="string";return I.jsx(oi,{content:I.jsx(gUe,{column:t}),minimal:!0,position:"bottom-left",matchTargetWidth:!0,children:I.jsx(Ga,{disabled:n,text:"Change Case",icon:"font",rightIcon:"chevron-down"})})}const yUe=[{label:"Default",value:"default"},{label:"Round Up",value:"up"},{label:"Round Down",value:"down"}],xUe=new Array(10).fill(0).map((t,e)=>{const n=Math.pow(10,e+1);return{label:n.toLocaleString(),value:n}}),wUe=()=>{const[t,e]=L.useState("decimal"),[n,r]=L.useState("default"),[i,a]=L.useState(0);return I.jsxs("div",{className:On.popover,children:[I.jsxs(pj,{label:"Round off method",selectedValue:t,onChange:o=>e(o.target.value),children:[I.jsx(yv,{label:"Whole numbers",value:"whole"}),I.jsx(yv,{label:"Decimal points",value:"decimal"})]}),I.jsx("div",{className:On.divider}),t==="decimal"&&I.jsx(Va,{label:"Number of decimal points",children:I.jsx(Jpe,{min:0,max:16,fill:!0,value:i,clampValueOnBlur:!0,onValueChange:o=>a(o)})}),t==="whole"&&I.jsx(Va,{label:"Round off to the nearest",children:I.jsx(vj,{fill:!0,options:xUe,iconName:"chevron-down"})}),I.jsx("div",{className:On.divider}),I.jsx(Va,{label:"Round off strategy",children:I.jsx(hd,{value:n,onValueChange:o=>r(o),fill:!0,options:yUe,iconName:"chevron-down"})}),I.jsx(u3,{})]})};function bUe({column:t}){const n=bg(t)!=="number";return I.jsx(oi,{content:I.jsx(wUe,{column:t}),position:"bottom",children:I.jsx(Ga,{disabled:n,text:"Round Off",icon:"floating-point"})})}function CUe(){const t=zn(),e=mn(r=>{let i=r.appState.selectedRows;return Object.keys(i).length}),n=()=>{t(dn({path:"selectedRows",value:{}}))};return I.jsxs(ng,{className:"transforms",children:[I.jsxs("div",{className:"fcc",children:["Selected Rows : ",e]}),I.jsx(ho,{}),I.jsx(Ga,{text:"Clear Selection",icon:I.jsx(cve,{size:16}),onClick:n}),I.jsx(ho,{}),I.jsx(Ga,{text:"Remove Selected Rows",intent:At.DANGER,icon:"remove"}),I.jsx(ho,{}),I.jsx(Ga,{text:"Keep Selected Rows",intent:At.PRIMARY,icon:"filter-keep"})]})}function SUe(){const t=mn(n=>n.appState.selectedColumn);return mn(n=>{let r=n.appState.selectedRows;return!!Object.keys(r).length})?I.jsx(CUe,{}):I.jsxs(ng,{className:"transforms",children:[I.jsx(TWe,{column:t}),I.jsx(ho,{}),I.jsx(OWe,{column:t}),I.jsx(ho,{}),I.jsx(FWe,{column:t}),I.jsx(ho,{}),I.jsx(BWe,{column:t}),I.jsx(ho,{}),I.jsx(HWe,{column:t}),I.jsx(ho,{}),I.jsx(qWe,{column:t}),I.jsx(ho,{}),I.jsx(XWe,{column:t}),I.jsx(ho,{}),I.jsx(ZWe,{column:t}),I.jsx(ho,{}),I.jsx(mUe,{column:t}),I.jsx(ho,{}),I.jsx(bUe,{column:t})]})}function DUe(t){return kn({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2.5C2 2.22386 2.22386 2 2.5 2H5.5C5.77614 2 6 2.22386 6 2.5C6 2.77614 5.77614 3 5.5 3H3V5.5C3 5.77614 2.77614 6 2.5 6C2.22386 6 2 5.77614 2 5.5V2.5ZM9 2.5C9 2.22386 9.22386 2 9.5 2H12.5C12.7761 2 13 2.22386 13 2.5V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3H9.5C9.22386 3 9 2.77614 9 2.5ZM2.5 9C2.77614 9 3 9.22386 3 9.5V12H5.5C5.77614 12 6 12.2239 6 12.5C6 12.7761 5.77614 13 5.5 13H2.5C2.22386 13 2 12.7761 2 12.5V9.5C2 9.22386 2.22386 9 2.5 9ZM12.5 9C12.7761 9 13 9.22386 13 9.5V12.5C13 12.7761 12.7761 13 12.5 13H9.5C9.22386 13 9 12.7761 9 12.5C9 12.2239 9.22386 12 9.5 12H12V9.5C12 9.22386 12.2239 9 12.5 9Z",fill:"currentColor"}}]})(t)}function _Ue(){const{rows:t,columns:e}=mn(r=>({rows:r.data.transformed.length,columns:r.data.order.length}),Gy),n=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"fcc",children:[I.jsxs("div",{className:hh.info,children:[I.jsx("b",{children:"Total Rows"})," : ",t.toLocaleString()]}),I.jsxs("div",{className:hh.info,children:[I.jsx("b",{children:"Total Columns"})," : ",e]})]}),I.jsx("div",{className:"fcc",children:I.jsx(ou,{content:"Toggle fullscreen",placement:"top",children:I.jsx(Wt,{icon:I.jsx(DUe,{size:16}),small:!0,minimal:!0,onClick:n})})})]})}const TUe=()=>null;function Pee({title:t="",onConfirm:e=TUe,children:n,dialogKey:r,...i}){const a=zn(),o=mn(u=>{var c;return(c=u.appState[r])==null?void 0:c.open}),s=()=>a(dn({path:r,value:!1})),l=()=>{e(),s()};return I.jsxs(ede,{isOpen:o,title:t,onClose:s,...i,children:[I.jsx(Bpe,{children:n}),I.jsx(Vpe,{minimal:!0,actions:I.jsxs(ng,{children:[I.jsx(Wt,{intent:At.DANGER,onClick:s,text:"Cancel"}),I.jsx(Wt,{intent:At.PRIMARY,text:"Confirm",onClick:l})]})})]})}function EUe(){const t=zn(),[e,n]=L.useState(""),[r,i]=L.useState(""),a=mn(s=>s.appState.prefixInput.column),o=()=>t(Td({column:a,type:zi.addPrefixSuffix,options:{prefix:e,suffix:r}}));return I.jsxs(Pee,{dialogKey:"prefixInput",title:"Prefix / Suffix",onConfirm:o,children:["Enter prefix and (or) suffix for the column ",I.jsx("b",{children:a}),I.jsxs(ng,{fill:!0,style:{marginTop:10},children:[I.jsx(_i,{value:e,onChange:s=>n(s.target.value),placeholder:"prefix"}),I.jsx(Wt,{minimal:!0,text:"word",disabled:!0}),I.jsx(_i,{value:r,onChange:s=>i(s.target.value),placeholder:"suffix"})]})]})}function AUe(){const t=zn(),[e,n]=L.useState(""),[r,i]=L.useState(""),[a,o]=L.useState(!0),s=mn(u=>u.appState.findAndReplace.column),l=()=>t(Td({column:s,type:zi.find_and_replace,options:{find:e,replace:r,caseSensitive:a}}));return I.jsxs(Pee,{dialogKey:"findAndReplace",title:"Find and replace",onConfirm:l,children:[I.jsx(_i,{value:e,onChange:u=>n(u.target.value),placeholder:"find"}),I.jsx(_i,{className:"mt7",value:r,onChange:u=>i(u.target.value),placeholder:"replace"}),I.jsx(F0,{checked:a,onChange:u=>o(u.target.checked),className:"mt7",label:"Case Sensitive",alignIndicator:"left"})]})}const NUe=(t,e)=>t===e,kUe=(t,e)=>{let n=!1;try{n=new RegExp(e).test(t)}catch{}return n},IUe=(t,e)=>t.includes(e),RUe=(t,e,n)=>{const r=Ov.getState(),{caseSensitive:i,wholeWord:a,regex:o}=r.appState.searchOptions;if(!n)return t;let s=[];const l=!i&&!o;let u=l?n.toLowerCase():n;return t.forEach(c=>{let f=!1;for(let h=0;h<e.length;h++){let d=c[e[h]];if(typeof d!="string")continue;if(l&&(d=d.toLowerCase()),(o?kUe:a?NUe:IUe)(d,u)){f=!0;break}}f&&s.push(c)}),s},$Ue=(t,e)=>{let n={};return e.forEach(r=>n[r]=t[r]),n},MUe=["transformed","order","sizes"];function OUe(){const{transformed:t,order:e,sizes:n}=mn(o=>$Ue(o.data,MUe),Gy),r=mn(o=>o.appState.searchQuery);if(!t)return I.jsx(_We,{});const i=RUe(t,e,r),a=["DataPrepIndex",...e];return I.jsxs("div",{className:hh.wrapper,children:[I.jsx("div",{className:hh.header,children:I.jsx(SUe,{})}),I.jsx("div",{className:hh.table,children:I.jsx(sWe,{rows:i,columns:a,sizes:n})}),I.jsx("div",{className:hh.footer,children:I.jsx(_Ue,{})}),I.jsx(EUe,{}),I.jsx(AUe,{})]})}const h3=({visible:t})=>t?I.jsx("div",{style:{height:"100%"},className:"fcc fill",children:I.jsx(AS,{})}):I.jsx(I.Fragment,{}),PUe="_wrapper_s6ehi_1",FUe="_header_s6ehi_5",LUe="_table_s6ehi_10",zUe="_left_s6ehi_23",BUe="_center_s6ehi_26",VUe="_warning_s6ehi_29",WUe="_danger_s6ehi_32",UUe="_row_s6ehi_35",GUe="_label_s6ehi_39",Xr={wrapper:PUe,header:FUe,table:LUe,left:zUe,center:BUe,warning:VUe,danger:WUe,row:UUe,label:GUe};function HUe(t){return kn({tag:"svg",attr:{t:"1569683610100",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M841 370c3-3.3 2.7-8.3-0.6-11.3-1.5-1.3-3.4-2.1-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6c-2.9 3.4-7.9 3.8-11.3 0.9-0.9-0.8-1.6-1.7-2.1-2.8l-63.5-141.3c-1.3-2.9-4.1-4.7-7.3-4.7H380.7l0.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415c-0.9 4.3 1.9 8.6 6.2 9.5 0.5 0.1 1.1 0.2 1.6 0.2H284l-89 429.9c-0.9 4.3 1.9 8.6 6.2 9.5 0.5 0.1 1.1 0.2 1.6 0.2H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4 0.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 0.9 0.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6c4.4 0 8-3.6 8-8 0-1.2-0.3-2.4-0.8-3.5l-95.2-198.9c-1.4-2.9-0.9-6.4 1.3-8.8L841 370z"}}]})(t)}function jUe({quality:t}){const e=t.invalid?"bug":t.missing?"issue":"tick",n=t.invalid?At.DANGER:t.missing?At.WARNING:At.PRIMARY,r=t.invalid?`Column contains ${t.invalid} invalid values`:t.missing?`Column contains ${t.missing} missing values`:"All good";return I.jsx(ou,{content:r,intent:n,children:I.jsx(ri,{className:"pointer",icon:e,intent:n})})}function qUe(){const{rows:t,columns:e,types:n}=mn(r=>{const i=r.data;let a={};return Object.keys(i.details).forEach(o=>a[i.details[o].type]=1),{rows:i.transformed.length,columns:i.order.length,types:Object.keys(a).length}},Gy);return I.jsxs(Il,{children:[I.jsx("h4",{className:"mb-10",children:"Overview"}),I.jsxs("div",{className:Xr.row,children:[I.jsx("div",{className:Xr.label,children:"Total Rows"}),I.jsx("div",{className:"value",children:t})]}),I.jsxs("div",{className:Xr.row,children:[I.jsx("div",{className:Xr.label,children:"Columns"}),I.jsx("div",{className:"value",children:e})]}),I.jsxs("div",{className:Xr.row,children:[I.jsx("div",{className:Xr.label,children:"Data Types"}),I.jsx("div",{className:"value",children:n})]})]})}function KUe(){const[t,e]=L.useState(!1),[n,r]=L.useState(null),[i,a]=L.useState("");return L.useEffect(()=>{e(!0),setTimeout(()=>{X6e().then(o=>{r(o)}).catch(o=>console.info(o)).finally(()=>e(!1))})},[]),t||!n?I.jsx(h3,{visible:!0}):I.jsxs(I.Fragment,{children:[I.jsx("h3",{className:"mb-10",children:"Data Quality"}),I.jsx(qUe,{}),I.jsxs("div",{className:Xr.header,children:[I.jsx(_i,{value:i,onChange:o=>a(o.target.value),placeholder:"Search column",leftIcon:"search"}),I.jsx(hd,{options:[{label:"Show All",value:"all"},{label:"Missing",value:"missing"},{label:"Invalid",value:"invalid"}],defaultValue:"all"})]}),I.jsx("div",{className:Xr.wrapper,children:I.jsxs("table",{className:Xr.table,children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{className:Xr.center}),I.jsx("th",{className:Xr.left,children:"Column "}),I.jsx("th",{children:"Valid "}),I.jsx("th",{children:"Missing "}),I.jsx("th",{children:"Invalid "}),I.jsx("th",{className:Xr.center})]})}),I.jsx("tbody",{children:n.columns.filter(o=>o.toLowerCase().includes(i.toLowerCase())).map(o=>{const s=n.quality[o];return I.jsxs("tr",{children:[I.jsx("td",{className:Xr.center,children:I.jsx(jUe,{quality:s})}),I.jsx("td",{className:Xr.left,children:o}),I.jsx("td",{children:s.valid.toLocaleString()}),I.jsx("td",{className:s.missing&&Xr.warning,children:s.missing.toLocaleString()}),I.jsx("td",{className:s.invalid&&Xr.danger,children:s.invalid.toLocaleString()}),I.jsx("td",{className:Xr.center,children:I.jsx(Wt,{small:!0,minimal:!0,icon:I.jsx(HUe,{size:16})})})]},o)})})]})})]})}var Fee={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function _n(t){return typeof t=="number"}function Lr(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Lee(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function zee(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Bee(t){return t&&t.constructor.prototype.isUnit===!0||!1}function el(t){return typeof t=="string"}var Rn=Array.isArray;function Gn(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function ny(t){return Array.isArray(t)||Gn(t)}function XUe(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function YUe(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function ZUe(t){return t&&t.constructor.prototype.isRange===!0||!1}function d3(t){return t&&t.constructor.prototype.isIndex===!0||!1}function QUe(t){return typeof t=="boolean"}function JUe(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function e9e(t){return t&&t.constructor.prototype.isHelp===!0||!1}function t9e(t){return typeof t=="function"}function n9e(t){return t instanceof Date}function r9e(t){return t instanceof RegExp}function i9e(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Lee(t)&&!zee(t))}function a9e(t){return t===null}function o9e(t){return t===void 0}function s9e(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function l9e(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function u9e(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function c9e(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function f9e(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function h9e(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function d9e(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function p9e(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function v9e(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function g9e(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function m9e(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function y9e(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function x9e(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function w9e(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function b9e(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function C9e(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function S9e(t){return t&&t.constructor.prototype.isChain===!0||!1}function _s(t){var e=typeof t;return e==="object"?t===null?"null":Lr(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Wn(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Wn(n)});if(t instanceof Date)return new Date(t.valueOf());if(Lr(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return D9e(t,Wn)}function D9e(t,e){var n={};for(var r in t)ry(t,r)&&(n[r]=e(t[r]));return n}function Vee(t,e){for(var n in e)ry(e,n)&&(t[n]=e[n]);return t}function Vv(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!Vv(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Vv(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function ry(t,e){return t&&Object.hasOwnProperty.call(t,e)}function _9e(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=t[i];a!==void 0&&(n[i]=a)}return n}var T9e=["Matrix","Array"],E9e=["number","BigNumber","Fraction"],Sg=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Fee)};Lh(Sg,Fee,{MATRIX_OPTIONS:T9e,NUMBER_OPTIONS:E9e});function Jo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=A9e(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function A9e(t,e){if(t){if(typeof t=="string")return K8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K8(t,e)}}function K8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function X8(){return!0}function lo(){return!1}function Ld(){}var Y8="Argument is not a typed-function.";function Wee(){function t(q){return kp(q)==="object"&&q!==null&&q.constructor===Object}var e=[{name:"number",test:function(Q){return typeof Q=="number"}},{name:"string",test:function(Q){return typeof Q=="string"}},{name:"boolean",test:function(Q){return typeof Q=="boolean"}},{name:"Function",test:function(Q){return typeof Q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Q){return Q instanceof Date}},{name:"RegExp",test:function(Q){return Q instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Q){return Q===null}},{name:"undefined",test:function(Q){return Q===void 0}}],n={name:"any",test:X8,isAny:!0},r,i,a=0,o={createCount:0};function s(q){var Q=r.get(q);if(Q)return Q;var re='Unknown type "'+q+'"',pe=q.toLowerCase(),me,xe=Jo(i),Se;try{for(xe.s();!(Se=xe.n()).done;)if(me=Se.value,me.toLowerCase()===pe){re+='. Did you mean "'+me+'" ?';break}}catch(ge){xe.e(ge)}finally{xe.f()}throw new TypeError(re)}function l(q){for(var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",re=Q?s(Q).index:i.length,pe=[],me=0;me<q.length;++me){if(!q[me]||typeof q[me].name!="string"||typeof q[me].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var xe=q[me].name;if(r.has(xe))throw new TypeError('Duplicate type name "'+xe+'"');pe.push(xe),r.set(xe,{name:xe,test:q[me].test,isAny:q[me].isAny,index:re+me,conversionsTo:[]})}var Se=i.slice(re);i=i.slice(0,re).concat(pe).concat(Se);for(var ge=re+pe.length;ge<i.length;++ge)r.get(i[ge]).index=ge}function u(){r=new Map,i=[],a=0,l([n],!1)}u(),l(e);function c(){var q,Q=Jo(i),re;try{for(Q.s();!(re=Q.n()).done;)q=re.value,r.get(q).conversionsTo=[]}catch(pe){Q.e(pe)}finally{Q.f()}a=0}function f(q){var Q=i.filter(function(re){var pe=r.get(re);return!pe.isAny&&pe.test(q)});return Q.length?Q:["any"]}function h(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function d(q,Q,re){if(!h(q))throw new TypeError(Y8);var pe=re&&re.exact,me=Array.isArray(Q)?Q.join(","):Q,xe=w(me),Se=m(xe);if(!pe||Se in q.signatures){var ge=q._typedFunctionData.signatureMap.get(Se);if(ge)return ge}var Ce=xe.length,Le;if(pe){Le=[];var st;for(st in q.signatures)Le.push(q._typedFunctionData.signatureMap.get(st))}else Le=q._typedFunctionData.signatures;for(var Ae=0;Ae<Ce;++Ae){var ur=xe[Ae],er=[],ui=void 0,Cr=Jo(Le),ea;try{for(Cr.s();!(ea=Cr.n()).done;){ui=ea.value;var Mr=D(ui.params,Ae);if(!(!Mr||ur.restParam&&!Mr.restParam)){if(!Mr.hasAny){var ro=function(){var ta=x(Mr);if(ur.types.some(function(yf){return!ta.has(yf.name)}))return"continue"}();if(ro==="continue")continue}er.push(ui)}}}catch(ta){Cr.e(ta)}finally{Cr.f()}if(Le=er,Le.length===0)break}var Ii,Ri=Jo(Le),mf;try{for(Ri.s();!(mf=Ri.n()).done;)if(Ii=mf.value,Ii.params.length<=Ce)return Ii}catch(ta){Ri.e(ta)}finally{Ri.f()}throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+m(xe,", ")+"))")}function p(q,Q,re){return d(q,Q,re).implementation}function v(q,Q){var re=s(Q);if(re.test(q))return q;var pe=re.conversionsTo;if(pe.length===0)throw new Error("There are no conversions to "+Q+" defined.");for(var me=0;me<pe.length;me++){var xe=s(pe[me].from);if(xe.test(q))return pe[me].convert(q)}throw new Error("Cannot convert "+q+" to "+Q)}function m(q){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(function(re){return re.name}).join(Q)}function g(q){var Q=q.indexOf("...")===0,re=Q?q.length>3?q.slice(3):"any":q,pe=re.split("|").map(function(ge){return s(ge.trim())}),me=!1,xe=Q?"...":"",Se=pe.map(function(ge){return me=ge.isAny||me,xe+=ge.name+"|",{name:ge.name,typeIndex:ge.index,test:ge.test,isAny:ge.isAny,conversion:null,conversionIndex:-1}});return{types:Se,name:xe.slice(0,-1),hasAny:me,hasConversion:!1,restParam:Q}}function y(q){var Q=q.types.map(function(Se){return Se.name}),re=B(Q),pe=q.hasAny,me=q.name,xe=re.map(function(Se){var ge=s(Se.from);return pe=ge.isAny||pe,me+="|"+Se.from,{name:Se.from,typeIndex:ge.index,test:ge.test,isAny:ge.isAny,conversion:Se,conversionIndex:Se.index}});return{types:q.types.concat(xe),name:me,hasAny:pe,hasConversion:xe.length>0,restParam:q.restParam}}function x(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(function(Q){return q.typeSet.add(Q.name)})),q.typeSet}function w(q){var Q=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");var re=q.trim();if(re==="")return Q;for(var pe=re.split(","),me=0;me<pe.length;++me){var xe=g(pe[me].trim());if(xe.restParam&&me!==pe.length-1)throw new SyntaxError('Unexpected rest parameter "'+pe[me]+'": only allowed for the last parameter');if(xe.types.length===0)return null;Q.push(xe)}return Q}function b(q){var Q=ee(q);return Q?Q.restParam:!1}function C(q){if(!q||q.types.length===0)return X8;if(q.types.length===1)return s(q.types[0].name).test;if(q.types.length===2){var Q=s(q.types[0].name).test,re=s(q.types[1].name).test;return function(xe){return Q(xe)||re(xe)}}else{var pe=q.types.map(function(me){return s(me.name).test});return function(xe){for(var Se=0;Se<pe.length;Se++)if(pe[Se](xe))return!0;return!1}}}function S(q){var Q,re,pe;if(b(q)){Q=se(q).map(C);var me=Q.length,xe=C(ee(q)),Se=function(Ce){for(var Le=me;Le<Ce.length;Le++)if(!xe(Ce[Le]))return!1;return!0};return function(Ce){for(var Le=0;Le<Q.length;Le++)if(!Q[Le](Ce[Le]))return!1;return Se(Ce)&&Ce.length>=me+1}}else return q.length===0?function(Ce){return Ce.length===0}:q.length===1?(re=C(q[0]),function(Ce){return re(Ce[0])&&Ce.length===1}):q.length===2?(re=C(q[0]),pe=C(q[1]),function(Ce){return re(Ce[0])&&pe(Ce[1])&&Ce.length===2}):(Q=q.map(C),function(Ce){for(var Le=0;Le<Q.length;Le++)if(!Q[Le](Ce[Le]))return!1;return Ce.length===Q.length})}function D(q,Q){return Q<q.length?q[Q]:b(q)?ee(q):null}function _(q,Q){var re=D(q,Q);return re?x(re):new Set}function T(q){return q.conversion===null||q.conversion===void 0}function E(q,Q){var re=new Set;return q.forEach(function(pe){var me=_(pe.params,Q),xe,Se=Jo(me),ge;try{for(Se.s();!(ge=Se.n()).done;)xe=ge.value,re.add(xe)}catch(Ce){Se.e(Ce)}finally{Se.f()}}),re.has("any")?["any"]:Array.from(re)}function A(q,Q,re){var pe,me,xe=q||"unnamed",Se=re,ge,Ce=function(){var Cr=[];if(Se.forEach(function(Mr){var ro=D(Mr.params,ge),Ii=C(ro);(ge<Mr.params.length||b(Mr.params))&&Ii(Q[ge])&&Cr.push(Mr)}),Cr.length===0){if(me=E(Se,ge),me.length>0){var ea=f(Q[ge]);return pe=new TypeError("Unexpected type of argument in function "+xe+" (expected: "+me.join(" or ")+", actual: "+ea.join(" | ")+", index: "+ge+")"),pe.data={category:"wrongType",fn:xe,index:ge,actual:ea,expected:me},{v:pe}}}else Se=Cr};for(ge=0;ge<Q.length;ge++){var Le=Ce();if(kp(Le)==="object")return Le.v}var st=Se.map(function(ui){return b(ui.params)?1/0:ui.params.length});if(Q.length<Math.min.apply(null,st))return me=E(Se,ge),pe=new TypeError("Too few arguments in function "+xe+" (expected: "+me.join(" or ")+", index: "+Q.length+")"),pe.data={category:"tooFewArgs",fn:xe,index:Q.length,expected:me},pe;var Ae=Math.max.apply(null,st);if(Q.length>Ae)return pe=new TypeError("Too many arguments in function "+xe+" (expected: "+Ae+", actual: "+Q.length+")"),pe.data={category:"tooManyArgs",fn:xe,index:Q.length,expectedLength:Ae},pe;for(var ur=[],er=0;er<Q.length;++er)ur.push(f(Q[er]).join("|"));return pe=new TypeError('Arguments of type "'+ur.join(", ")+'" do not match any of the defined signatures of function '+xe+"."),pe.data={category:"mismatch",actual:ur},pe}function R(q){for(var Q=i.length+1,re=0;re<q.types.length;re++)T(q.types[re])&&(Q=Math.min(Q,q.types[re].typeIndex));return Q}function $(q){for(var Q=a+1,re=0;re<q.types.length;re++)T(q.types[re])||(Q=Math.min(Q,q.types[re].conversionIndex));return Q}function O(q,Q){if(q.hasAny){if(!Q.hasAny)return 1}else if(Q.hasAny)return-1;if(q.restParam){if(!Q.restParam)return 1}else if(Q.restParam)return-1;if(q.hasConversion){if(!Q.hasConversion)return 1}else if(Q.hasConversion)return-1;var re=R(q)-R(Q);if(re<0)return-1;if(re>0)return 1;var pe=$(q)-$(Q);return pe<0?-1:pe>0?1:0}function M(q,Q){var re=q.params,pe=Q.params,me=ee(re),xe=ee(pe),Se=b(re),ge=b(pe);if(Se&&me.hasAny){if(!ge||!xe.hasAny)return 1}else if(ge&&xe.hasAny)return-1;var Ce=0,Le=0,st,Ae=Jo(re),ur;try{for(Ae.s();!(ur=Ae.n()).done;)st=ur.value,st.hasAny&&++Ce,st.hasConversion&&++Le}catch(Ng){Ae.e(Ng)}finally{Ae.f()}var er=0,ui=0,Cr=Jo(pe),ea;try{for(Cr.s();!(ea=Cr.n()).done;)st=ea.value,st.hasAny&&++er,st.hasConversion&&++ui}catch(Ng){Cr.e(Ng)}finally{Cr.f()}if(Ce!==er)return Ce-er;if(Se&&me.hasConversion){if(!ge||!xe.hasConversion)return 1}else if(ge&&xe.hasConversion)return-1;if(Le!==ui)return Le-ui;if(Se){if(!ge)return 1}else if(ge)return-1;var Mr=(re.length-pe.length)*(Se?-1:1);if(Mr!==0)return Mr;for(var ro=[],Ii=0,Ri=0;Ri<re.length;++Ri){var mf=O(re[Ri],pe[Ri]);ro.push(mf),Ii+=mf}if(Ii!==0)return Ii;for(var ta,yf=0,Px=ro;yf<Px.length;yf++)if(ta=Px[yf],ta!==0)return ta;return 0}function B(q){if(q.length===0)return[];var Q=q.map(s);q.length>1&&Q.sort(function(Ce,Le){return Ce.index-Le.index});var re=Q[0].conversionsTo;if(q.length===1)return re;re=re.concat([]);for(var pe=new Set(q),me=1;me<Q.length;++me){var xe=void 0,Se=Jo(Q[me].conversionsTo),ge;try{for(Se.s();!(ge=Se.n()).done;)xe=ge.value,pe.has(xe.from)||(re.push(xe),pe.add(xe.from))}catch(Ce){Se.e(Ce)}finally{Se.f()}}return re}function P(q,Q){var re=Q;if(q.some(function(ge){return ge.hasConversion})){var pe=b(q),me=q.map(z);re=function(){for(var Ce=[],Le=pe?arguments.length-1:arguments.length,st=0;st<Le;st++)Ce[st]=me[st](arguments[st]);return pe&&(Ce[Le]=arguments[Le].map(me[Le])),Q.apply(this,Ce)}}var xe=re;if(b(q)){var Se=q.length-1;xe=function(){return re.apply(this,oe(arguments,0,Se).concat([oe(arguments,Se)]))}}return xe}function z(q){var Q,re,pe,me,xe=[],Se=[];switch(q.types.forEach(function(ge){ge.conversion&&(xe.push(s(ge.conversion.from).test),Se.push(ge.conversion.convert))}),Se.length){case 0:return function(Ce){return Ce};case 1:return Q=xe[0],pe=Se[0],function(Ce){return Q(Ce)?pe(Ce):Ce};case 2:return Q=xe[0],re=xe[1],pe=Se[0],me=Se[1],function(Ce){return Q(Ce)?pe(Ce):re(Ce)?me(Ce):Ce};default:return function(Ce){for(var Le=0;Le<Se.length;Le++)if(xe[Le](Ce))return Se[Le](Ce);return Ce}}}function U(q){function Q(re,pe,me){if(pe<re.length){var xe=re[pe],Se=[];if(xe.restParam){var ge=xe.types.filter(T);ge.length<xe.types.length&&Se.push({types:ge,name:"..."+ge.map(function(Ce){return Ce.name}).join("|"),hasAny:ge.some(function(Ce){return Ce.isAny}),hasConversion:!1,restParam:!0}),Se.push(xe)}else Se=xe.types.map(function(Ce){return{types:[Ce],name:Ce.name,hasAny:Ce.isAny,hasConversion:Ce.conversion,restParam:!1}});return ve(Se,function(Ce){return Q(re,pe+1,me.concat([Ce]))})}else return[me]}return Q(q,0,[])}function H(q,Q){for(var re=Math.max(q.length,Q.length),pe=0;pe<re;pe++){var me=_(q,pe),xe=_(Q,pe),Se=!1,ge=void 0,Ce=Jo(xe),Le;try{for(Ce.s();!(Le=Ce.n()).done;)if(ge=Le.value,me.has(ge)){Se=!0;break}}catch(ui){Ce.e(ui)}finally{Ce.f()}if(!Se)return!1}var st=q.length,Ae=Q.length,ur=b(q),er=b(Q);return ur?er?st===Ae:Ae>=st:er?st>=Ae:st===Ae}function F(q){return q.map(function(Q){return We(Q)?Ie(Q.referToSelf.callback):Ne(Q)?_e(Q.referTo.references,Q.referTo.callback):Q})}function W(q,Q,re){var pe=[],me,xe=Jo(q),Se;try{for(xe.s();!(Se=xe.n()).done;){me=Se.value;var ge=re[me];if(typeof ge!="number")throw new TypeError('No definition for referenced signature "'+me+'"');if(ge=Q[ge],typeof ge!="function")return!1;pe.push(ge)}}catch(Ce){xe.e(Ce)}finally{xe.f()}return pe}function j(q,Q,re){for(var pe=F(q),me=new Array(pe.length).fill(!1),xe=!0;xe;){xe=!1;for(var Se=!0,ge=0;ge<pe.length;++ge)if(!me[ge]){var Ce=pe[ge];if(We(Ce))pe[ge]=Ce.referToSelf.callback(re),pe[ge].referToSelf=Ce.referToSelf,me[ge]=!0,Se=!1;else if(Ne(Ce)){var Le=W(Ce.referTo.references,pe,Q);Le?(pe[ge]=Ce.referTo.callback.apply(this,Le),pe[ge].referTo=Ce.referTo,me[ge]=!0,Se=!1):xe=!0}}if(Se&&xe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return pe}function K(q){var Q=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(function(re){var pe=q[re];if(Q.test(pe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Y(q,Q){if(o.createCount++,Object.keys(Q).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&K(Q);var re=[],pe=[],me={},xe=[],Se,ge=function(){if(!Object.prototype.hasOwnProperty.call(Q,Se))return"continue";var jr=w(Se);if(!jr)return"continue";re.forEach(function(kd){if(H(kd,jr))throw new TypeError('Conflicting signatures "'+m(kd)+'" and "'+m(jr)+'".')}),re.push(jr);var f4=pe.length;pe.push(Q[Se]);var Ise=jr.map(y),Fx=void 0,Lx=Jo(U(Ise)),h4;try{for(Lx.s();!(h4=Lx.n()).done;){Fx=h4.value;var d4=m(Fx);xe.push({params:Fx,name:d4,fn:f4}),Fx.every(function(kd){return!kd.hasConversion})&&(me[d4]=f4)}}catch(kd){Lx.e(kd)}finally{Lx.f()}};for(Se in Q)var Ce=ge();xe.sort(M);var Le=j(pe,me,Ig),st;for(st in me)Object.prototype.hasOwnProperty.call(me,st)&&(me[st]=Le[me[st]]);for(var Ae=[],ur=new Map,er=0,ui=xe;er<ui.length;er++)st=ui[er],ur.has(st.name)||(st.fn=Le[st.fn],Ae.push(st),ur.set(st.name,st));for(var Cr=Ae[0]&&Ae[0].params.length<=2&&!b(Ae[0].params),ea=Ae[1]&&Ae[1].params.length<=2&&!b(Ae[1].params),Mr=Ae[2]&&Ae[2].params.length<=2&&!b(Ae[2].params),ro=Ae[3]&&Ae[3].params.length<=2&&!b(Ae[3].params),Ii=Ae[4]&&Ae[4].params.length<=2&&!b(Ae[4].params),Ri=Ae[5]&&Ae[5].params.length<=2&&!b(Ae[5].params),mf=Cr&&ea&&Mr&&ro&&Ii&&Ri,ta=0;ta<Ae.length;++ta)Ae[ta].test=S(Ae[ta].params);for(var yf=Cr?C(Ae[0].params[0]):lo,Px=ea?C(Ae[1].params[0]):lo,Ng=Mr?C(Ae[2].params[0]):lo,ase=ro?C(Ae[3].params[0]):lo,ose=Ii?C(Ae[4].params[0]):lo,sse=Ri?C(Ae[5].params[0]):lo,lse=Cr?C(Ae[0].params[1]):lo,use=ea?C(Ae[1].params[1]):lo,cse=Mr?C(Ae[2].params[1]):lo,fse=ro?C(Ae[3].params[1]):lo,hse=Ii?C(Ae[4].params[1]):lo,dse=Ri?C(Ae[5].params[1]):lo,kg=0;kg<Ae.length;++kg)Ae[kg].implementation=P(Ae[kg].params,Ae[kg].fn);var pse=Cr?Ae[0].implementation:Ld,vse=ea?Ae[1].implementation:Ld,gse=Mr?Ae[2].implementation:Ld,mse=ro?Ae[3].implementation:Ld,yse=Ii?Ae[4].implementation:Ld,xse=Ri?Ae[5].implementation:Ld,wse=Cr?Ae[0].params.length:-1,bse=ea?Ae[1].params.length:-1,Cse=Mr?Ae[2].params.length:-1,Sse=ro?Ae[3].params.length:-1,Dse=Ii?Ae[4].params.length:-1,_se=Ri?Ae[5].params.length:-1,Tse=mf?6:0,Ese=Ae.length,Ase=Ae.map(function(Ra){return Ra.test}),Nse=Ae.map(function(Ra){return Ra.implementation}),kse=function(){for(var jr=Tse;jr<Ese;jr++)if(Ase[jr](arguments))return Nse[jr].apply(this,arguments);return o.onMismatch(q,arguments,Ae)};function Ig(Ra,jr){return arguments.length===wse&&yf(Ra)&&lse(jr)?pse.apply(this,arguments):arguments.length===bse&&Px(Ra)&&use(jr)?vse.apply(this,arguments):arguments.length===Cse&&Ng(Ra)&&cse(jr)?gse.apply(this,arguments):arguments.length===Sse&&ase(Ra)&&fse(jr)?mse.apply(this,arguments):arguments.length===Dse&&ose(Ra)&&hse(jr)?yse.apply(this,arguments):arguments.length===_se&&sse(Ra)&&dse(jr)?xse.apply(this,arguments):kse.apply(this,arguments)}try{Object.defineProperty(Ig,"name",{value:q})}catch{}return Ig.signatures=me,Ig._typedFunctionData={signatures:Ae,signatureMap:ur},Ig}function Z(q,Q,re){throw A(q,Q,re)}function se(q){return oe(q,0,q.length-1)}function ee(q){return q[q.length-1]}function oe(q,Q,re){return Array.prototype.slice.call(q,Q,re)}function ce(q,Q){for(var re=0;re<q.length;re++)if(Q(q[re]))return q[re]}function ve(q,Q){return Array.prototype.concat.apply([],q.map(Q))}function ye(){var q=se(arguments).map(function(re){return m(w(re))}),Q=ee(arguments);if(typeof Q!="function")throw new TypeError("Callback function expected as last argument");return _e(q,Q)}function _e(q,Q){return{referTo:{references:q,callback:Q}}}function Ie(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function Ne(q){return q&&kp(q.referTo)==="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function We(q){return q&&kp(q.referToSelf)==="object"&&typeof q.referToSelf.callback=="function"}function qe(q,Q){if(!q)return Q;if(Q&&Q!==q){var re=new Error("Function names do not match (expected: "+q+", actual: "+Q+")");throw re.data={actual:Q,expected:q},re}return q}function ft(q){var Q;for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(h(q[re])||typeof q[re].signature=="string")&&(Q=qe(Q,q[re].name));return Q}function at(q,Q){var re;for(re in Q)if(Object.prototype.hasOwnProperty.call(Q,re)){if(re in q&&Q[re]!==q[re]){var pe=new Error('Signature "'+re+'" is defined twice');throw pe.data={signature:re,sourceFunction:Q[re],destFunction:q[re]},pe}q[re]=Q[re]}}var bt=o;o=function(Q){for(var re=typeof Q=="string",pe=re?1:0,me=re?Q:"",xe={},Se=pe;Se<arguments.length;++Se){var ge=arguments[Se],Ce={},Le=void 0;if(typeof ge=="function"?(Le=ge.name,typeof ge.signature=="string"?Ce[ge.signature]=ge:h(ge)&&(Ce=ge.signatures)):t(ge)&&(Ce=ge,re||(Le=ft(ge))),Object.keys(Ce).length===0){var st=new TypeError("Argument to 'typed' at index "+Se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw st.data={index:Se,argument:ge},st}re||(me=qe(me,Le)),at(xe,Ce)}return Y(me||"",xe)},o.create=Wee,o.createCount=bt.createCount,o.onMismatch=Z,o.throwMismatchError=Z,o.createError=A,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=ye,o.referToSelf=Ie,o.convert=v,o.findSignature=d,o.find=p,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(q,Q){var re="any";Q!==!1&&r.has("Object")&&(re="Object"),o.addTypes([q],re)};function ot(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return o.addConversion=function(q){ot(q);var Q=s(q.to);if(Q.conversionsTo.every(function(re){return re.from!==q.from}))Q.conversionsTo.push({from:q.from,convert:q.convert,index:a++});else throw new Error('There is already a conversion from "'+q.from+'" to "'+Q.name+'"')},o.addConversions=function(q){q.forEach(o.addConversion)},o.removeConversion=function(q){ot(q);var Q=s(q.to),re=ce(Q.conversionsTo,function(me){return me.from===q.from});if(!re)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(re.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");var pe=Q.conversionsTo.indexOf(re);Q.conversionsTo.splice(pe,1)},o.resolve=function(q,Q){if(!h(q))throw new TypeError(Y8);for(var re=q._typedFunctionData.signatures,pe=0;pe<re.length;++pe)if(re[pe].test(Q))return re[pe];return null},o}const Ip=Wee();function fr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function oA(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!fr(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!fr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),a="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function qI(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n="auto",r,i;if(e&&(e.notation&&(n=e.notation),_n(e)?r=e:_n(e.precision)&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return k9e(t,r);case"exponential":return Uee(t,r);case"engineering":return N9e(t,r);case"bin":return oA(t,2,i);case"oct":return oA(t,8,i);case"hex":return oA(t,16,i);case"auto":return I9e(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function H_(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function N9e(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=H_(t),r=j_(n,e),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(_n(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var u=Math.abs(i-o),c=1;u>0;)c++,u--;var f=a.slice(c).join(""),h=_n(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=a.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+o.toString();return r.sign+d}function k9e(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=H_(t),r=typeof e=="number"?j_(n,n.exponent+1+e):n,i=r.coefficients,a=r.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Qp(o-i.length))),a<0&&(i=Qp(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function Uee(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=H_(t),r=e?j_(n,e):n,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Qp(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function I9e(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=n&&n.lowerExp!==void 0?n.lowerExp:-3,i=n&&n.upperExp!==void 0?n.upperExp:5,a=H_(t),o=e?j_(a,e):a;if(o.exponent<r||o.exponent>=i)return Uee(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Qp(e-s.length))),s=s.concat(Qp(l-s.length+1+(s.length<e?e-s.length:0))),s=Qp(-l).concat(s);var u=l>0?l:0;return u<s.length-1&&s.splice(u+1,0,"."),o.sign+s.join("")}function j_(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),n.exponent++,a++),a--,r[a]++}}return n}function Qp(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function R9e(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var $9e=Number.EPSILON||2220446049250313e-31;function p2(t,e,n){if(n==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<$9e?!0:r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}function sA(t,e,n){var r=t.constructor,i=new r(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!fr(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function M9e(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",r,i;if(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?r=e:e.precision!==void 0&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return P9e(t,r);case"exponential":return Z8(t,r);case"engineering":return O9e(t,r);case"bin":return sA(t,2,i);case"oct":return sA(t,8,i);case"hex":return sA(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(r),u=l.e;return u>=a&&u<o?s=l.toFixed():s=Z8(t,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function O9e(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.indexOf("e")!==-1){var o=t.constructor;a=new o(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}function Z8(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function P9e(t,e){return t.toFixed(e)}function cr(t,e){var n=F9e(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function F9e(t,e){if(typeof t=="number")return qI(t,e);if(Lr(t))return M9e(t,e);if(L9e(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Gee(t,e);if(el(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>'"'+r+'": '+cr(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Gee(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=Gee(t[i],e);return n+="]",n}else return cr(t,e)}function L9e(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function jt(t,e,n){if(!(this instanceof jt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}jt.prototype=new RangeError;jt.prototype.constructor=RangeError;jt.prototype.name="DimensionError";jt.prototype.isDimensionError=!0;function df(t,e,n){if(!(this instanceof df))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}df.prototype=new RangeError;df.prototype.constructor=RangeError;df.prototype.name="IndexError";df.prototype.isIndexError=!0;function wa(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Hee(t,e,n){var r,i=t.length;if(i!==e[n])throw new jt(i,e[n]);if(n<e.length-1){var a=n+1;for(r=0;r<i;r++){var o=t[r];if(!Array.isArray(o))throw new jt(e.length-1,e.length,"<");Hee(t[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new jt(e.length+1,e.length,">")}function Q8(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new jt(t.length,0)}else Hee(t,e,0)}function $n(t,e){if(t!==void 0){if(!_n(t)||!fr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new df(t,e)}}function KI(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!_n(i)||!fr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+cr(e)+")")}),(_n(t)||Lr(t))&&(t=[t]);var r=n!==void 0?n:0;return XI(t,e,0,r),t}function XI(t,e,n,r){var i,a,o=t.length,s=e[n],l=Math.min(o,s);if(t.length=s,n<e.length-1){var u=n+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),XI(a,e,u,r);for(i=l;i<s;i++)a=[],t[i]=a,XI(a,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=r}}function jee(t,e){var n=B9e(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new jt(0,r,"!=");e=p3(e,r);var i=qee(e);if(r!==i)throw new jt(i,r,"!=");try{return z9e(n,e)}catch(a){throw a instanceof jt?new jt(i,r,"!="):a}}function p3(t,e){var n=qee(t),r=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%n===0;if(s)if(l)r[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function qee(t){return t.reduce((e,n)=>e*n,1)}function z9e(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var o=n.length/a,s=0;s<o;s++)r.push(n.slice(s*a,(s+1)*a));n=r}return n}function Kee(t,e,n,r){var i=r||wa(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=Xee(t,e,0);i.length<e;)i.push(1);return t}function Xee(t,e,n){var r,i;if(Array.isArray(t)){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=Xee(t[r],e,a)}else for(var o=n;o<e;o++)t=[t];return t}function B9e(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function v2(t,e){for(var n,r=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(r=a.length),o&&a.length!==r)return;var s=o?v2(a,e):e(a);if(n===void 0)n=s;else if(n!==s)return"mixed"}return n}function Yee(t,e,n,r){if(r<n){if(t.length!==e.length)throw new jt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=Yee(t[a],e[a],n,r+1);return i}else return t.concat(e)}function Zee(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return Yee(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function V9e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(h=>h.length),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],l=r[o],u=0;u<l;u++){var c=i-l+u;s[u]>a[c]&&(a[c]=s[u])}for(var f=0;f<e.length;f++)g2(e[f],a);return a}function g2(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var a=n-r+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[a]))}}function J8(t,e){var n=wa(t);if(Vv(n,e))return t;g2(n,e);var r=V9e(n,e),i=r.length,a=[...Array(i-n.length).fill(1),...n],o=U9e(t);n.length<i&&(o=jee(o,a),n=wa(o));for(var s=0;s<i;s++)n[s]<r[s]&&(o=W9e(o,r[s],s),n=wa(o));return o}function W9e(t,e,n){return Zee(...Array(e).fill(t),n)}function U9e(t){return Lh([],t)}function nt(t,e,n,r){function i(a){var o=_9e(a,e.map(j9e));return G9e(t,e,a),n(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function G9e(t,e,n){var r=e.filter(a=>!H9e(a)).every(a=>n[a]!==void 0);if(!r){var i=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function H9e(t){return t&&t[0]==="?"}function j9e(t){return t&&t[0]==="?"?t.slice(1):t}function q9e(t,e){if(Jee(t)&&Qee(t,e))return t[e];throw typeof t[e]=="function"&&Y9e(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function K9e(t,e,n){if(Jee(t)&&Qee(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function X9e(t,e){return e in t}function Qee(t,e){return!t||typeof t!="object"?!1:ry(Z9e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Y9e(t,e){return t==null||typeof t[e]!="function"||ry(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:ry(Q9e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Jee(t){return typeof t=="object"&&t&&t.constructor===Object}var Z9e={length:!0,name:!0},Q9e={toString:!0,valueOf:!0,toLocaleString:!0};class J9e{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return q9e(this.wrappedObject,e)}set(e,n){return K9e(this.wrappedObject,e,n),this}has(e){return X9e(this.wrappedObject,e)}}function e7e(t){return t?t instanceof Map||t instanceof J9e||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var ete=function(){return ete=Ip.create,Ip},t7e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],n7e=nt("typed",t7e,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:a}=e,o=ete();return o.clear(),o.addTypes([{name:"number",test:_n},{name:"Complex",test:Lee},{name:"BigNumber",test:Lr},{name:"Fraction",test:zee},{name:"Unit",test:Bee},{name:"identifier",test:s=>el&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:el},{name:"Chain",test:S9e},{name:"Array",test:Rn},{name:"Matrix",test:Gn},{name:"DenseMatrix",test:XUe},{name:"SparseMatrix",test:YUe},{name:"Range",test:ZUe},{name:"Index",test:d3},{name:"boolean",test:QUe},{name:"ResultSet",test:JUe},{name:"Help",test:e9e},{name:"function",test:t9e},{name:"Date",test:n9e},{name:"RegExp",test:r9e},{name:"null",test:a9e},{name:"undefined",test:o9e},{name:"AccessorNode",test:s9e},{name:"ArrayNode",test:l9e},{name:"AssignmentNode",test:u9e},{name:"BlockNode",test:c9e},{name:"ConditionalNode",test:f9e},{name:"ConstantNode",test:h9e},{name:"FunctionNode",test:p9e},{name:"FunctionAssignmentNode",test:d9e},{name:"IndexNode",test:v9e},{name:"Node",test:g9e},{name:"ObjectNode",test:m9e},{name:"OperatorNode",test:y9e},{name:"ParenthesisNode",test:x9e},{name:"RangeNode",test:w9e},{name:"RelationalNode",test:b9e},{name:"SymbolNode",test:C9e},{name:"Map",test:e7e},{name:"Object",test:i9e}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(n||lA(l),R9e(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new n(l)}},{from:"number",to:"Complex",convert:function(l){return r||Dw(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||Dw(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||Dw(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||uA(l);var u=new a(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){n||lA(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||uA(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||Dw(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return n||lA(l),new n(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||uA(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||r7e(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,u)=>{var c=o.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&ny(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,l,u)=>{var c=o.createError(s,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&ny(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function lA(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Dw(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function r7e(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function uA(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Rp=9e15,pf=1e9,YI="0123456789abcdef",m2="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",y2="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ZI={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Rp,maxE:Rp,crypto:!1},tte,nu,ct=!0,q_="[DecimalError] ",Hc=q_+"Invalid argument: ",nte=q_+"Precision limit exceeded",rte=q_+"crypto unavailable",ite="[object Decimal]",Ai=Math.floor,_r=Math.pow,i7e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,a7e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,o7e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ate=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts=1e7,et=7,s7e=9007199254740991,l7e=m2.length-1,QI=y2.length-1,we={toStringTag:ite};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Xe(t)};we.ceil=function(){return Xe(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Hc+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(t){var e,n,r,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,u=t.s;if(!o||!s)return!l||!u?NaN:l!==u?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(r=o.length,i=s.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};we.cosine=we.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+et,r.rounding=1,n=u7e(r,cte(r,n)),r.precision=t,r.rounding=e,Xe(nu==2||nu==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var t,e,n,r,i,a,o,s,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(ct=!1,a=c.s*_r(c.s*c,1/3),!a||Math.abs(a)==1/0?(n=Jr(c.d),t=c.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=_r(n,1/3),t=Ai((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(a.toString()),o=(t=f.precision)+3;;)if(s=r,l=s.times(s).times(s),u=l.plus(c),r=un(u.plus(c).times(s),u.plus(l),o+2,1),Jr(s.d).slice(0,o)===(n=Jr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Xe(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Xe(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return ct=!0,Xe(r,t,f.rounding,e)};we.decimalPlaces=we.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Ai(this.e/et))*et,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};we.dividedBy=we.div=function(t){return un(this,new this.constructor(t))};we.dividedToIntegerBy=we.divToInt=function(t){var e=this,n=e.constructor;return Xe(un(e,new n(t),0,1,1),n.precision,n.rounding)};we.equals=we.eq=function(t){return this.cmp(t)===0};we.floor=function(){return Xe(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){var e=this.cmp(t);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/X_(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Wv(o,1,a.times(e),new o(1),!0);for(var l,u=t,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Xe(a,o.precision=n,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Wv(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/X_(5,t)),i=Wv(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=e,a.rounding=n,Xe(i,e,n,!0)};we.hyperbolicTangent=we.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,un(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};we.inverseCosine=we.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,a=n.rounding;return r!==-1?r===0?e.isNeg()?ms(n,i,a):new n(0):new n(NaN):e.isZero()?ms(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=ms(n,i+4,a).times(.5),n.precision=i,n.rounding=a,t.minus(e))};we.inverseHyperbolicCosine=we.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,ct=!1,n=n.times(n).minus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};we.inverseHyperbolicSine=we.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,ct=!1,n=n.times(n).plus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Xe(new a(i),t,e,!0):(a.precision=n=r-i.e,i=un(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=ms(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var t,e,n,r,i,a,o,s,l,u=this,c=u.constructor,f=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=QI)return o=ms(c,f+4,h).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(f+4<=QI)return o=ms(c,f+4,h).times(.5),o.s=u.s,o}for(c.precision=s=f+10,c.rounding=1,n=Math.min(28,s/et+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ct=!1,e=Math.ceil(s/et),r=1,l=u.times(u),o=new c(u),i=u;t!==-1;)if(i=i.times(l),a=o.minus(i.div(r+=2)),i=i.times(l),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),ct=!0,Xe(o,c.precision=f,c.rounding=h,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&Ai(this.e/et)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,n,r,i,a,o,s,l,u=this,c=u.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(ct=!1,s=f+d,o=oc(u,s),r=e?x2(c,s+10):oc(t,s),l=un(o,r,s,1),iy(l.d,i=f,h))do if(s+=10,o=oc(u,s),r=e?x2(c,s+10):oc(t,s),l=un(o,r,s,1),!a){+Jr(l.d).slice(i+1,i+15)+1==1e14&&(l=Xe(l,f+1,0));break}while(iy(l.d,i+=10,h));return ct=!0,Xe(l,f,h)};we.minus=we.sub=function(t){var e,n,r,i,a,o,s,l,u,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(u=d.d,h=t.d,s=p.precision,l=p.rounding,!u[0]||!h[0]){if(h[0])t.s=-t.s;else if(u[0])t=new p(d);else return new p(l===3?-0:0);return ct?Xe(t,s,l):t}if(n=Ai(t.e/et),c=Ai(d.e/et),u=u.slice(),a=c-n,a){for(f=a<0,f?(e=u,a=-a,o=h.length):(e=h,n=c,o=u.length),r=Math.max(Math.ceil(s/et),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=u.length,o=h.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(u[r]!=h[r]){f=u[r]<h[r];break}a=0}for(f&&(e=u,u=h,h=e,t.s=-t.s),o=u.length,r=h.length-o;r>0;--r)u[o++]=0;for(r=h.length;r>a;){if(u[--r]<h[r]){for(i=r;i&&u[--i]===0;)u[i]=Ts-1;--u[i],u[r]+=Ts}u[r]-=h[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=K_(u,n),ct?Xe(t,s,l):t):new p(l===3?-0:0)};we.modulo=we.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Xe(new r(n),r.precision,r.rounding):(ct=!1,r.modulo==9?(e=un(n,t.abs(),0,3,1),e.s*=t.s):e=un(n,t,0,r.modulo,1),e=e.times(t),ct=!0,n.minus(e))};we.naturalExponential=we.exp=function(){return JI(this)};we.naturalLogarithm=we.ln=function(){return oc(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Xe(t)};we.plus=we.add=function(t){var e,n,r,i,a,o,s,l,u,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(u=f.d,c=t.d,s=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(t=new h(f)),ct?Xe(t,s,l):t;if(a=Ai(f.e/et),r=Ai(t.e/et),u=u.slice(),i=a-r,i){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=a,o=u.length),a=Math.ceil(s/et),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=u.length,i=c.length,o-i<0&&(i=o,n=c,c=u,u=n),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Ts|0,u[i]%=Ts;for(e&&(u.unshift(e),++r),o=u.length;u[--o]==0;)u.pop();return t.d=u,t.e=K_(u,r),ct?Xe(t,s,l):t};we.precision=we.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Hc+t);return n.d?(e=ote(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};we.round=function(){var t=this,e=t.constructor;return Xe(new e(t),t.e+1,e.rounding)};we.sine=we.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+et,r.rounding=1,n=f7e(r,cte(r,n)),r.precision=t,r.rounding=e,Xe(nu>2?n.neg():n,t,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var t,e,n,r,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(ct=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Jr(s),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Ai((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(a=r,r=a.plus(un(o,a,n+2,1)).times(.5),Jr(a.d).slice(0,n)===(e=Jr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Xe(a,l+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Xe(r,l+1,1),t=!r.times(r).eq(o));break}return ct=!0,Xe(r,l,c.rounding,t)};we.tangent=we.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=un(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Xe(nu==2||nu==4?n.neg():n,t,e,!0)):new r(NaN)};we.times=we.mul=function(t){var e,n,r,i,a,o,s,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=Ai(c.e/et)+Ai(t.e/et),l=h.length,u=d.length,l<u&&(a=h,h=d,d=a,o=l,l=u,u=o),a=[],o=l+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+d[r]*h[i-r-1]+e,a[i--]=s%Ts|0,e=s/Ts|0;a[i]=(a[i]+e)%Ts|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=K_(a,n),ct?Xe(t,f.precision,f.rounding):t};we.toBinary=function(t,e){return v3(this,2,t,e)};we.toDecimalPlaces=we.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Aa(t,0,pf),e===void 0?e=r.rounding:Aa(e,0,8),Xe(n,t+n.e+1,e))};we.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Dl(r,!0):(Aa(t,0,pf),e===void 0?e=i.rounding:Aa(e,0,8),r=Xe(new i(r),t+1,e),n=Dl(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Dl(i):(Aa(t,0,pf),e===void 0?e=a.rounding:Aa(e,0,8),r=Xe(new a(i),t+i.e+1,e),n=Dl(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};we.toFraction=function(t){var e,n,r,i,a,o,s,l,u,c,f,h,d=this,p=d.d,v=d.constructor;if(!p)return new v(d);if(u=n=new v(1),r=l=new v(0),e=new v(r),a=e.e=ote(p)-d.e-1,o=a%et,e.d[0]=_r(10,o<0?et+o:o),t==null)t=a>0?e:u;else{if(s=new v(t),!s.isInt()||s.lt(u))throw Error(Hc+s);t=s.gt(e)?a>0?e:u:s}for(ct=!1,s=new v(Jr(p)),c=v.precision,v.precision=a=p.length*et*2;f=un(s,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=un(t.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=d.s,h=un(u,r,a,1).minus(d).abs().cmp(un(l,n,a,1).minus(d).abs())<1?[u,r]:[l,n],v.precision=c,ct=!0,h};we.toHexadecimal=we.toHex=function(t,e){return v3(this,16,t,e)};we.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Aa(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ct=!1,n=un(n,t,0,e,1).times(t),ct=!0,Xe(n)):(t.s=n.s,n=t),n};we.toNumber=function(){return+this};we.toOctal=function(t,e){return v3(this,8,t,e)};we.toPower=we.pow=function(t){var e,n,r,i,a,o,s=this,l=s.constructor,u=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(_r(+s,u));if(s=new l(s),s.eq(1))return s;if(r=l.precision,a=l.rounding,t.eq(1))return Xe(s,r,a);if(e=Ai(t.e/et),e>=t.d.length-1&&(n=u<0?-u:u)<=s7e)return i=ste(l,s,n,r),t.s<0?new l(1).div(i):Xe(i,r,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return n=_r(+s,u),e=n==0||!isFinite(n)?Ai(u*(Math.log("0."+Jr(s.d))/Math.LN10+s.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(ct=!1,l.rounding=s.s=1,n=Math.min(12,(e+"").length),i=JI(t.times(oc(s,r+n)),r),i.d&&(i=Xe(i,r+5,1),iy(i.d,r,a)&&(e=r+10,i=Xe(JI(t.times(oc(s,e+n)),e),e+5,1),+Jr(i.d).slice(r+1,r+15)+1==1e14&&(i=Xe(i,r+1,0)))),i.s=o,ct=!0,l.rounding=a,Xe(i,r,a))};we.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Dl(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Aa(t,1,pf),e===void 0?e=i.rounding:Aa(e,0,8),r=Xe(new i(r),t,e),n=Dl(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toSignificantDigits=we.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Aa(t,1,pf),e===void 0?e=r.rounding:Aa(e,0,8)),Xe(new r(n),t,e)};we.toString=function(){var t=this,e=t.constructor,n=Dl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};we.truncated=we.trunc=function(){return Xe(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var t=this,e=t.constructor,n=Dl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Jr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=et-r.length,n&&(a+=Xu(n)),a+=r;o=t[e],r=o+"",n=et-r.length,n&&(a+=Xu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Aa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Hc+t)}function iy(t,e,n,r){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=et,i=0):(i=Math.ceil((e+1)/et),e%=et),a=_r(10,et-e),s=t[i]%a|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(t[i+1]/a/100|0)==_r(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(r||n<4)&&s==9999||!r&&n>3&&s==4999):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==_r(10,e-3)-1,o}function Mb(t,e,n){for(var r,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=YI.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function u7e(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/X_(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Wv(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var un=function(){function t(r,i,a){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%a|0,s=o/a|0;return s&&r.unshift(s),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a,o){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,s,l){var u,c,f,h,d,p,v,m,g,y,x,w,b,C,S,D,_,T,E,A,R=r.constructor,$=r.s==i.s?1:-1,O=r.d,M=i.d;if(!O||!O[0]||!M||!M[0])return new R(!r.s||!i.s||(O?M&&O[0]==M[0]:!M)?NaN:O&&O[0]==0||!M?$*0:$/0);for(l?(d=1,c=r.e-i.e):(l=Ts,d=et,c=Ai(r.e/d)-Ai(i.e/d)),E=M.length,_=O.length,g=new R($),y=g.d=[],f=0;M[f]==(O[f]||0);f++);if(M[f]>(O[f]||0)&&c--,a==null?(C=a=R.precision,o=R.rounding):s?C=a+(r.e-i.e)+1:C=a,C<0)y.push(1),p=!0;else{if(C=C/d+2|0,f=0,E==1){for(h=0,M=M[0],C++;(f<_||h)&&C--;f++)S=h*l+(O[f]||0),y[f]=S/M|0,h=S%M|0;p=h||f<_}else{for(h=l/(M[0]+1)|0,h>1&&(M=t(M,h,l),O=t(O,h,l),E=M.length,_=O.length),D=E,x=O.slice(0,E),w=x.length;w<E;)x[w++]=0;A=M.slice(),A.unshift(0),T=M[0],M[1]>=l/2&&++T;do h=0,u=e(M,x,E,w),u<0?(b=x[0],E!=w&&(b=b*l+(x[1]||0)),h=b/T|0,h>1?(h>=l&&(h=l-1),v=t(M,h,l),m=v.length,w=x.length,u=e(v,x,m,w),u==1&&(h--,n(v,E<m?A:M,m,l))):(h==0&&(u=h=1),v=M.slice()),m=v.length,m<w&&v.unshift(0),n(x,v,w,l),u==-1&&(w=x.length,u=e(M,x,E,w),u<1&&(h++,n(x,E<w?A:M,w,l))),w=x.length):u===0&&(h++,x=[0]),y[f++]=h,u&&x[0]?x[w++]=O[D]||0:(x=[O[D]],w=1);while((D++<_||x[0]!==void 0)&&C--);p=x[0]!==void 0}y[0]||y.shift()}if(d==1)g.e=c,tte=p;else{for(f=1,h=y[0];h>=10;h/=10)f++;g.e=f+c*d-1,Xe(g,s?a+g.e+1:a,o,p)}return g}}();function Xe(t,e,n,r){var i,a,o,s,l,u,c,f,h,d=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=et,o=e,c=f[h=0],l=c/_r(10,i-o-1)%10|0;else if(h=Math.ceil((a+1)/et),s=f.length,h>=s)if(r){for(;s++<=h;)f.push(0);c=l=0,i=1,a%=et,o=a-et+1}else break e;else{for(c=s=f[h],i=1;s>=10;s/=10)i++;a%=et,o=a-et+i,l=o<0?0:c/_r(10,i-o-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(o<0?c:c%_r(10,i-o-1)),u=n<4?(l||r)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(a>0?o>0?c/_r(10,i-o):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=t.e+1,f[0]=_r(10,(et-e%et)%et),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=h,s=1,h--):(f.length=h+1,s=_r(10,et-a),f[h]=o>0?(c/_r(10,i-o)%_r(10,o)|0)*s:0),u)for(;;)if(h==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Ts&&(f[0]=1));break}else{if(f[h]+=s,f[h]!=Ts)break;f[h--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return ct&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function Dl(t,e,n){if(!t.isFinite())return ute(t);var r,i=t.e,a=Jr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Xu(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Xu(-i-1)+a,n&&(r=n-o)>0&&(a+=Xu(r))):i>=o?(a+=Xu(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Xu(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Xu(r))),a}function K_(t,e){var n=t[0];for(e*=et;n>=10;n/=10)e++;return e}function x2(t,e,n){if(e>l7e)throw ct=!0,n&&(t.precision=n),Error(nte);return Xe(new t(m2),e,1,!0)}function ms(t,e,n){if(e>QI)throw Error(nte);return Xe(new t(y2),e,n,!0)}function ote(t){var e=t.length-1,n=e*et+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Xu(t){for(var e="";t--;)e+="0";return e}function ste(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/et+4);for(ct=!1;;){if(n%2&&(a=a.times(e),t6(a.d,o)&&(i=!0)),n=Ai(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),t6(e.d,o)}return ct=!0,a}function e6(t){return t.d[t.d.length-1]&1}function lte(t,e,n){for(var r,i=new t(e[0]),a=0;++a<e.length;)if(r=new t(e[a]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function JI(t,e){var n,r,i,a,o,s,l,u=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ct=!1,l=p):l=e,s=new h(.03125);t.e>-2;)t=t.times(s),f+=5;for(r=Math.log(_r(2,f))/Math.LN10*2+5|0,l+=r,n=a=o=new h(1),h.precision=l;;){if(a=Xe(a.times(t),l,1),n=n.times(++c),s=o.plus(un(a,n,l,1)),Jr(s.d).slice(0,l)===Jr(o.d).slice(0,l)){for(i=f;i--;)o=Xe(o.times(o),l,1);if(e==null)if(u<3&&iy(o.d,l-r,d,u))h.precision=l+=10,n=a=s=new h(1),c=0,u++;else return Xe(o,h.precision=p,d,ct=!0);else return h.precision=p,o}o=s}}function oc(t,e){var n,r,i,a,o,s,l,u,c,f,h,d=1,p=10,v=t,m=v.d,g=v.constructor,y=g.rounding,x=g.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(ct=!1,c=x):c=e,g.precision=c+=p,n=Jr(m),r=n.charAt(0),Math.abs(a=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Jr(v.d),r=n.charAt(0),d++;a=v.e,r>1?(v=new g("0."+n),a++):v=new g(r+"."+n.slice(1))}else return u=x2(g,c+2,x).times(a+""),v=oc(new g(r+"."+n.slice(1)),c-p).plus(u),g.precision=x,e==null?Xe(v,x,y,ct=!0):v;for(f=v,l=o=v=un(v.minus(1),v.plus(1),c,1),h=Xe(v.times(v),c,1),i=3;;){if(o=Xe(o.times(h),c,1),u=l.plus(un(o,new g(i),c,1)),Jr(u.d).slice(0,c)===Jr(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(x2(g,c+2,x).times(a+""))),l=un(l,new g(d),c,1),e==null)if(iy(l.d,c-p,y,s))g.precision=c+=p,u=o=v=un(f.minus(1),f.plus(1),c,1),h=Xe(v.times(v),c,1),i=s=1;else return Xe(l,g.precision=x,y,ct=!0);else return g.precision=x,l;l=u,i+=2}}function ute(t){return String(t.s*t.s/0)}function eR(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%et,n<0&&(r+=et),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=et;r<i;)t.d.push(+e.slice(r,r+=et));e=e.slice(r),r=et-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),ct&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function c7e(t,e){var n,r,i,a,o,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),ate.test(e))return eR(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(a7e.test(e))n=16,e=e.toLowerCase();else if(i7e.test(e))n=2;else if(o7e.test(e))n=8;else throw Error(Hc+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=ste(r,new r(n),a,a*2)),u=Mb(e,n,Ts),c=u.length-1,a=c;u[a]===0;--a)u.pop();return a<0?new r(t.s*0):(t.e=K_(u,c),t.d=u,ct=!1,o&&(t=un(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?_r(2,l):Uv.pow(2,l))),ct=!0,t)}function f7e(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Wv(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/X_(5,n)),e=Wv(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Wv(t,e,n,r,i){var a,o,s,l,u=t.precision,c=Math.ceil(u/et);for(ct=!1,l=n.times(n),s=new t(r);;){if(o=un(s.times(l),new t(e++*e++),u,1),s=i?r.plus(o):r.minus(o),r=un(o.times(l),new t(e++*e++),u,1),o=s.plus(r),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=r,r=o,o=a}return ct=!0,o.d.length=c+1,o}function X_(t,e){for(var n=t;--e;)n*=t;return n}function cte(t,e){var n,r=e.s<0,i=ms(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return nu=r?4:1,e;if(n=e.divToInt(i),n.isZero())nu=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return nu=e6(n)?r?2:3:r?4:1,e;nu=e6(n)?r?1:4:r?3:2}return e.minus(i).abs()}function v3(t,e,n,r){var i,a,o,s,l,u,c,f,h,d=t.constructor,p=n!==void 0;if(p?(Aa(n,1,pf),r===void 0?r=d.rounding:Aa(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())c=ute(t);else{for(c=Dl(t),o=c.indexOf("."),p?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-o,h.d=Mb(Dl(h),10,i),h.e=h.d.length),f=Mb(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?a--:(t=new d(t),t.d=f,t.e=a,t=un(t,h,n,r,0,i),f=t.d,a=t.e,u=tte),o=f[n],s=i/2,u=u||f[n+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(t.s<0?3:2)):o>s||o===s&&(r===4||u||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,u)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=YI.charAt(f[o]);if(p){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=Mb(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=YI.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function t6(t,e){if(t.length>e)return t.length=e,!0}function h7e(t){return new this(t).abs()}function d7e(t){return new this(t).acos()}function p7e(t){return new this(t).acosh()}function v7e(t,e){return new this(t).plus(e)}function g7e(t){return new this(t).asin()}function m7e(t){return new this(t).asinh()}function y7e(t){return new this(t).atan()}function x7e(t){return new this(t).atanh()}function w7e(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=ms(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?ms(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=ms(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(un(t,e,a,1)),e=ms(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(un(t,e,a,1)),n}function b7e(t){return new this(t).cbrt()}function C7e(t){return Xe(t=new this(t),t.e+1,2)}function S7e(t,e,n){return new this(t).clamp(e,n)}function D7e(t){if(!t||typeof t!="object")throw Error(q_+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,pf,"rounding",0,8,"toExpNeg",-Rp,0,"toExpPos",0,Rp,"maxE",0,Rp,"minE",-Rp,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=ZI[n]),(r=t[n])!==void 0)if(Ai(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Hc+n+": "+r);if(n="crypto",i&&(this[n]=ZI[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(rte);else this[n]=!1;else throw Error(Hc+n+": "+r);return this}function _7e(t){return new this(t).cos()}function T7e(t){return new this(t).cosh()}function fte(t){var e,n,r;function i(a){var o,s,l,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,n6(a)){u.s=a.s,ct?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ct?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[a]):(u.e=o,u.d=[a]);return}else if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return eR(u,a.toString())}else if(l!=="string")throw Error(Hc+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(s===43&&(a=a.slice(1)),u.s=1),ate.test(a)?eR(u,a):c7e(u,a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=D7e,i.clone=fte,i.isDecimal=n6,i.abs=h7e,i.acos=d7e,i.acosh=p7e,i.add=v7e,i.asin=g7e,i.asinh=m7e,i.atan=y7e,i.atanh=x7e,i.atan2=w7e,i.cbrt=b7e,i.ceil=C7e,i.clamp=S7e,i.cos=_7e,i.cosh=T7e,i.div=E7e,i.exp=A7e,i.floor=N7e,i.hypot=k7e,i.ln=I7e,i.log=R7e,i.log10=M7e,i.log2=$7e,i.max=O7e,i.min=P7e,i.mod=F7e,i.mul=L7e,i.pow=z7e,i.random=B7e,i.round=V7e,i.sign=W7e,i.sin=U7e,i.sinh=G7e,i.sqrt=H7e,i.sub=j7e,i.sum=q7e,i.tan=K7e,i.tanh=X7e,i.trunc=Y7e,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function E7e(t,e){return new this(t).div(e)}function A7e(t){return new this(t).exp()}function N7e(t){return Xe(t=new this(t),t.e+1,3)}function k7e(){var t,e,n=new this(0);for(ct=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return ct=!0,new this(1/0);n=e}return ct=!0,n.sqrt()}function n6(t){return t instanceof Uv||t&&t.toStringTag===ite||!1}function I7e(t){return new this(t).ln()}function R7e(t,e){return new this(t).log(e)}function $7e(t){return new this(t).log(2)}function M7e(t){return new this(t).log(10)}function O7e(){return lte(this,arguments,"lt")}function P7e(){return lte(this,arguments,"gt")}function F7e(t,e){return new this(t).mod(e)}function L7e(t,e){return new this(t).mul(e)}function z7e(t,e){return new this(t).pow(e)}function B7e(t){var e,n,r,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:Aa(t,1,pf),r=Math.ceil(t/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=r/4}else throw Error(rte);else for(;a<r;)s[a++]=Math.random()*1e7|0;for(r=s[--a],t%=et,r&&t&&(i=_r(10,et-t),s[a]=(r/i|0)*i);s[a]===0;a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=et)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<et&&(n-=et-r)}return o.e=n,o.d=s,o}function V7e(t){return Xe(t=new this(t),t.e+1,this.rounding)}function W7e(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function U7e(t){return new this(t).sin()}function G7e(t){return new this(t).sinh()}function H7e(t){return new this(t).sqrt()}function j7e(t,e){return new this(t).sub(e)}function q7e(){var t=0,e=arguments,n=new this(e[t]);for(ct=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return ct=!0,Xe(n,this.precision,this.rounding)}function K7e(t){return new this(t).tan()}function X7e(t){return new this(t).tanh()}function Y7e(t){return Xe(t=new this(t),t.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var Uv=we.constructor=fte(ZI);m2=new Uv(m2);y2=new Uv(y2);var Z7e="BigNumber",Q7e=["?on","config"],J7e=nt(Z7e,Q7e,t=>{var{on:e,config:n}=t,r=Uv.clone({precision:n.precision,modulo:Uv.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),hte={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var d=f*f;return d*(d*(d*(d*(d*(d*(d*(d/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,h){var d=Math.abs(f),p=Math.abs(h);return d<3e3&&p<3e3?Math.sqrt(d*d+p*p):(d<p?(d=p,p=f/h):p=h/f,d*Math.sqrt(1+p*p))},s=function(){throw SyntaxError("Invalid Param")};function l(f,h){var d=Math.abs(f),p=Math.abs(h);return f===0?Math.log(p):h===0?Math.log(d):d<3e3&&p<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var u=function(f,h){var d={re:0,im:0};if(f==null)d.re=d.im=0;else if(h!==void 0)d.re=f,d.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)d.re=f.re,d.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;d.re=f.abs*Math.cos(f.arg),d.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;d.re=f.r*Math.cos(f.phi),d.im=f.r*Math.sin(f.phi)}else f.length===2?(d.re=f[0],d.im=f[1]):s();break;case"string":d.im=d.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;p===null&&s();for(var g=0;g<p.length;g++){var y=p[g];y===" "||y==="	"||y===`
`||(y==="+"?v++:y==="-"?m++:y==="i"||y==="I"?(v+m===0&&s(),p[g+1]!==" "&&!isNaN(p[g+1])?(d.im+=parseFloat((m%2?"-":"")+p[g+1]),g++):d.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(y))&&s(),p[g+1]==="i"||p[g+1]==="I"?(d.im+=parseFloat((m%2?"-":"")+y),g++):d.re+=parseFloat((m%2?"-":"")+y),v=m=0))}v+m>0&&s();break;case"number":d.im=0,d.re=f;break;default:s()}return isNaN(d.re)||isNaN(d.im),d};function c(f,h){if(!(this instanceof c))return new c(f,h);var d=u(f,h);this.re=d.re,this.im=d.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re+d.re,this.im+d.im)},sub:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re-d.re,this.im-d.im)},mul:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isZero()||this.isZero()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:d.im===0&&this.im===0?new c(this.re*d.re,0):new c(this.re*d.re-this.im*d.im,this.re*d.im+this.im*d.re)},div:function(f,h){var d=new c(f,h);if(this.isZero()&&d.isZero()||this.isInfinite()&&d.isInfinite())return c.NAN;if(this.isInfinite()||d.isZero())return c.INFINITY;if(this.isZero()||d.isInfinite())return c.ZERO;f=this.re,h=this.im;var p=d.re,v=d.im,m,g;return v===0?new c(f/p,h/p):Math.abs(p)<Math.abs(v)?(g=p/v,m=p*g+v,new c((f*g+h)/m,(h*g-f)/m)):(g=v/p,m=v*g+p,new c((f+h*g)/m,(h-f*g)/m))},pow:function(f,h){var d=new c(f,h);if(f=this.re,h=this.im,d.isZero())return c.ONE;if(d.im===0){if(h===0&&f>0)return new c(Math.pow(f,d.re),0);if(f===0)switch((d.re%4+4)%4){case 0:return new c(Math.pow(h,d.re),0);case 1:return new c(0,Math.pow(h,d.re));case 2:return new c(-Math.pow(h,d.re),0);case 3:return new c(0,-Math.pow(h,d.re))}}if(f===0&&h===0&&d.re>0&&d.im>=0)return c.ZERO;var p=Math.atan2(h,f),v=l(f,h);return f=Math.exp(d.re*v-d.im*p),h=d.im*v+d.re*p,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,d=this.abs(),p,v;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(d+f))}else p=Math.abs(h)/Math.sqrt(2*(d-f));return f<=0?v=.5*Math.sqrt(2*(d-f)):v=Math.abs(h)/Math.sqrt(2*(d+f)),new c(p,h<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+a(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(l(f,h),Math.atan2(h,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*r(h),Math.cos(f)*i(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*r(h),-Math.sin(f)*i(h))},tan:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)+r(h);return new c(Math.sin(f)/d,i(h)/d)},cot:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)-r(h);return new c(-Math.sin(f)/d,i(h)/d)},sec:function(){var f=this.re,h=this.im,d=.5*r(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(h)/d,Math.sin(f)*i(h)/d)},csc:function(){var f=this.re,h=this.im,d=.5*r(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(h)/d,-Math.cos(f)*i(h)/d)},asin:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var d=f*f+(1-h)*(1-h),p=new c((1-h*h-f*f)/d,-2*f/d).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),r(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(r(f)*Math.cos(h),i(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,d=r(f)+Math.cos(h);return new c(i(f)/d,Math.sin(h)/d)},coth:function(){var f=2*this.re,h=2*this.im,d=r(f)-Math.cos(h);return new c(i(f)/d,-Math.sin(h)/d)},csch:function(){var f=this.re,h=this.im,d=Math.cos(2*h)-r(2*f);return new c(-2*i(f)*Math.cos(h)/d,2*r(f)*Math.sin(h)/d)},sech:function(){var f=this.re,h=this.im,d=Math.cos(2*h)+r(2*f);return new c(2*r(f)*Math.cos(h)/d,-2*i(f)*Math.sin(h)/d)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,d=f>1&&h===0,p=1-f,v=1+f,m=p*p+h*h,g=m!==0?new c((v*p-h*h)/m,(h*p+v*h)/m):new c(f!==-1?f/0:0,h!==0?h/0:0),y=g.re;return g.re=l(g.re,g.im)/2,g.im=Math.atan2(g.im,y)/2,d&&(g.im=-g.im),g},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,d=f*f+h*h;return new c(f/d,-h/d)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var d=new c(f,h);return Math.abs(d.re-this.re)<=c.EPSILON&&Math.abs(d.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,d="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?d+f:(f!==0?(d+=f,d+=" ",h<0?(h=-h,d+="-"):d+="+",d+=" "):h<0&&(h=-h,d+="-"),h!==1&&(d+=h),d+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(hte);var eGe=hte.exports;const qr=Al(eGe);var tGe="Complex",nGe=[],rGe=nt(tGe,nGe,()=>(Object.defineProperty(qr,"name",{value:"Complex"}),qr.prototype.constructor=qr,qr.prototype.type="Complex",qr.prototype.isComplex=!0,qr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},qr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},qr.prototype.format=function(t){var e="",n=this.im,r=this.re,i=qI(this.re,t),a=qI(this.im,t),o=_n(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(r/n)<s&&(r=0),Math.abs(n/r)<s&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+a+"i",e},qr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return qr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(_n(n)){if(Bee(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),_n(r))return new qr({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},qr.prototype.valueOf=qr.prototype.toString,qr.fromJSON=function(t){return new qr(t)},qr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},qr),{isClass:!0}),dte={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=2e3,i={s:1,n:0,d:1};function a(g,y){if(isNaN(g=parseInt(g,10)))throw v();return g*y}function o(g,y){if(y===0)throw p();var x=Object.create(d.prototype);x.s=g<0?-1:1,g=g<0?-g:g;var w=h(g,y);return x.n=g/w,x.d=y/w,x}function s(g){for(var y={},x=g,w=2,b=4;b<=x;){for(;x%w===0;)x/=w,y[w]=(y[w]||0)+1;b+=1+2*w++}return x!==g?x>1&&(y[x]=(y[x]||0)+1):y[g]=(y[g]||0)+1,y}var l=function(g,y){var x=0,w=1,b=1,C=0,S=0,D=0,_=1,T=1,E=0,A=1,R=1,$=1,O=1e7,M;if(g!=null)if(y!==void 0){if(x=g,w=y,b=x*w,x%1!==0||w%1!==0)throw m()}else switch(typeof g){case"object":{if("d"in g&&"n"in g)x=g.n,w=g.d,"s"in g&&(x*=g.s);else if(0 in g)x=g[0],1 in g&&(w=g[1]);else throw v();b=x*w;break}case"number":{if(g<0&&(b=g,g=-g),g%1===0)x=g;else if(g>0){for(g>=1&&(T=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=T);A<=O&&$<=O;)if(M=(E+R)/(A+$),g===M){A+$<=O?(x=E+R,w=A+$):$>A?(x=R,w=$):(x=E,w=A);break}else g>M?(E+=R,A+=$):(R+=E,$+=A),A>O?(x=R,w=$):(x=E,w=A);x*=T}else(isNaN(g)||isNaN(y))&&(w=x=NaN);break}case"string":{if(A=g.match(/\d+|./g),A===null)throw v();if(A[E]==="-"?(b=-1,E++):A[E]==="+"&&E++,A.length===E+1?S=a(A[E++],b):A[E+1]==="."||A[E]==="."?(A[E]!=="."&&(C=a(A[E++],b)),E++,(E+1===A.length||A[E+1]==="("&&A[E+3]===")"||A[E+1]==="'"&&A[E+3]==="'")&&(S=a(A[E],b),_=Math.pow(10,A[E].length),E++),(A[E]==="("&&A[E+2]===")"||A[E]==="'"&&A[E+2]==="'")&&(D=a(A[E+1],b),T=Math.pow(10,A[E+1].length)-1,E+=3)):A[E+1]==="/"||A[E+1]===":"?(S=a(A[E],b),_=a(A[E+2],1),E+=3):A[E+3]==="/"&&A[E+1]===" "&&(C=a(A[E],b),S=a(A[E+2],b),_=a(A[E+4],1),E+=5),A.length<=E){w=_*T,b=x=D+w*C+T*S;break}}default:throw v()}if(w===0)throw p();i.s=b<0?-1:1,i.n=Math.abs(x),i.d=Math.abs(w)};function u(g,y,x){for(var w=1;y>0;g=g*g%x,y>>=1)y&1&&(w=w*g%x);return w}function c(g,y){for(;y%2===0;y/=2);for(;y%5===0;y/=5);if(y===1)return 0;for(var x=10%y,w=1;x!==1;w++)if(x=x*10%y,w>r)return 0;return w}function f(g,y,x){for(var w=1,b=u(10,x,y),C=0;C<300;C++){if(w===b)return C;w=w*10%y,b=b*10%y}return 0}function h(g,y){if(!g)return y;if(!y)return g;for(;;){if(g%=y,!g)return y;if(y%=g,!y)return g}}function d(g,y){if(l(g,y),this instanceof d)g=h(i.d,i.n),this.s=i.s,this.n=i.n/g,this.d=i.d/g;else return o(i.s*i.n,i.d)}var p=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},m=function(){return new Error("Parameters must be integer")};d.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(g,y){return l(g,y),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(g,y){return l(g,y),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(g,y){return l(g,y),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(g,y){return l(g,y),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(g,y){if(isNaN(this.n)||isNaN(this.d))return new d(NaN);if(g===void 0)return o(this.s*this.n%this.d,1);if(l(g,y),i.n===0&&this.d===0)throw p();return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(g,y){return l(g,y),o(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(g,y){return l(g,y),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(g,y){if(l(g,y),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var x=s(this.n),w=s(this.d),b=1,C=1;for(var S in x)if(S!=="1"){if(S==="0"){b=0;break}if(x[S]*=i.n,x[S]%i.d===0)x[S]/=i.d;else return null;b*=Math.pow(S,x[S])}for(var S in w)if(S!=="1"){if(w[S]*=i.n,w[S]%i.d===0)w[S]/=i.d;else return null;C*=Math.pow(S,w[S])}return i.s<0?o(C,b):o(b,C)},equals:function(g,y){return l(g,y),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(g,y){l(g,y);var x=this.s*this.n*i.d-i.s*i.n*this.d;return(0<x)-(x<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var y=this.abs(),x=y.toContinued(),w=1;w<x.length;w++){for(var b=o(x[w-1],1),C=w-2;C>=0;C--)b=b.inverse().add(x[C]);if(Math.abs(b.sub(y).valueOf())<g)return b.mul(this.s)}return this},divisible:function(g,y){return l(g,y),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var y,x="",w=this.n,b=this.d;return this.s<0&&(x+="-"),b===1?x+=w:(g&&(y=Math.floor(w/b))>0&&(x+=y,x+=" ",w%=b),x+=w,x+="/",x+=b),x},toLatex:function(g){var y,x="",w=this.n,b=this.d;return this.s<0&&(x+="-"),b===1?x+=w:(g&&(y=Math.floor(w/b))>0&&(x+=y,w%=b),x+="\\frac{",x+=w,x+="}{",x+=b,x+="}"),x},toContinued:function(){var g,y=this.n,x=this.d,w=[];if(isNaN(y)||isNaN(x))return w;do w.push(Math.floor(y/x)),g=y%x,y=x,x=g;while(y!==1);return w},toString:function(g){var y=this.n,x=this.d;if(isNaN(y)||isNaN(x))return"NaN";g=g||15;var w=c(y,x),b=f(y,x,w),C=this.s<0?"-":"";if(C+=y/x|0,y%=x,y*=10,y&&(C+="."),w){for(var S=b;S--;)C+=y/x|0,y%=x,y*=10;C+="(";for(var S=w;S--;)C+=y/x|0,y%=x,y*=10;C+=")"}else for(var S=g;y&&S--;)C+=y/x|0,y%=x,y*=10;return C}},Object.defineProperty(d,"__esModule",{value:!0}),d.default=d,d.Fraction=d,t.exports=d})()})(dte);var iGe=dte.exports;const zl=Al(iGe);var aGe="Fraction",oGe=[],sGe=nt(aGe,oGe,()=>(Object.defineProperty(zl,"name",{value:"Fraction"}),zl.prototype.constructor=zl,zl.prototype.type="Fraction",zl.prototype.isFraction=!0,zl.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},zl.fromJSON=function(t){return new zl(t)},zl),{isClass:!0}),lGe="Matrix",uGe=[],cGe=nt(lGe,uGe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function pte(t){return Object.keys(t.signatures||{}).reduce(function(e,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var fGe="DenseMatrix",hGe=["Matrix"],dGe=nt(fGe,hGe,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!el(f))throw new Error("Invalid datatype: "+f);if(Gn(c))c.type==="DenseMatrix"?(this._data=Wn(c._data),this._size=Wn(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Rn(c.data)&&Rn(c.size))this._data=c.data,this._size=c.size,Q8(this._data,this._size),this._datatype=f||c.datatype;else if(Rn(c))this._data=u(c),this._size=wa(this._data),Q8(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+_s(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return v2(this._data,_s)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!Rn(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new jt(c.length,this._size.length);for(var f=0;f<c.length;f++)$n(c[f],this._size[f]);for(var h=this._data,d=0,p=c.length;d<p;d++){var v=c[d];$n(v,h.length),h=h[v]}return h},n.prototype.set=function(c,f,h){if(!Rn(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new jt(c.length,this._size.length,"<");var d,p,v,m=c.map(function(y){return y+1});l(this,m,h);var g=this._data;for(d=0,p=c.length-1;d<p;d++)v=c[d],$n(v,g.length),g=g[v];return v=c[c.length-1],$n(v,g.length),g[v]=f,this};function r(c,f){if(!d3(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new jt(d.length,c._size.length);for(var p=f.min(),v=f.max(),m=0,g=c._size.length;m<g;m++)$n(p[m],c._size[m]),$n(v[m],c._size[m]);return new n(i(c._data,f,d.length,0),c._datatype)}function i(c,f,h,d){var p=d===h-1,v=f.dimension(d);return p?v.map(function(m){return $n(m,c.length),c[m]}).valueOf():v.map(function(m){$n(m,c.length);var g=c[m];return i(g,f,h,d+1)}).valueOf()}function a(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),v=f.isScalar(),m;if(Gn(h)?(m=h.size(),h=h.valueOf()):m=wa(h),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(!Vv(m,p))try{m.length===0?h=J8([h],p):h=J8(h,p),m=wa(h)}catch{}if(p.length<c._size.length)throw new jt(p.length,c._size.length,"<");if(m.length<p.length){for(var g=0,y=0;p[g]===1&&m[g]===1;)g++;for(;p[g]===1;)y++,g++;h=Kee(h,p.length,y,m)}if(!Vv(p,m))throw new jt(p,m,">");var x=f.max().map(function(C){return C+1});l(c,x,d);var w=p.length,b=0;o(c._data,f,h,w,b)}return c}function o(c,f,h,d,p){var v=p===d-1,m=f.dimension(p);v?m.forEach(function(g,y){$n(g),c[g]=h[y[0]]}):m.forEach(function(g,y){$n(g),o(c[g],f,h[y[0]],d,p+1)})}n.prototype.resize=function(c,f,h){if(!ny(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),p=h?this.clone():this;return s(p,d,f)};function s(c,f,h){if(f.length===0){for(var d=c._data;Rn(d);)d=d[0];return d}return c._size=f.slice(0),c._data=KI(c._data,c._size,h),c}n.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=jee(h._data,c);var d=h._size.reduce((p,v)=>p*v);return h._size=p3(c,d),h};function l(c,f,h){for(var d=c._size.slice(0),p=!1;d.length<f.length;)d.push(0),p=!0;for(var v=0,m=f.length;v<m;v++)f[v]>d[v]&&(d[v]=f[v],p=!0);p&&s(c,d,h)}n.prototype.clone=function(){var c=new n({data:Wn(this._data),size:Wn(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,h=pte(c),d=function m(g,y){return Rn(g)?g.map(function(x,w){return m(x,y.concat(w))}):h===1?c(g):h===2?c(g,y):c(g,y,f)},p=d(this._data,[]),v=this._datatype!==void 0?v2(p,_s):void 0;return new n(p,v)},n.prototype.forEach=function(c){var f=this,h=function d(p,v){Rn(p)?p.forEach(function(m,g){d(m,v.concat(g))}):c(p,v,f)};h(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(h,d){if(Rn(h))for(var p=0;p<h.length;p++)yield*f(h[p],d.concat(p));else yield{value:h,index:d}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new n([d],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,p=function(g){var y=d.map(x=>[x[g]]);f.push(new n(y,c._datatype))},v=0;v<h[1];v++)p(v);return f},n.prototype.toArray=function(){return Wn(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return cr(this._data,c)},n.prototype.toString=function(){return cr(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Lr(c)&&(c=c.toNumber()),!_n(c)||!fr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],p=this._size[1],v=Math.min(d-h,p-f),m=[],g=0;g<v;g++)m[g]=this._data[g+h][g+f];return new n({data:m,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,h,d){if(!Rn(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Lr(S)&&(S=S.toNumber()),!_n(S)||!fr(S)||S<1)throw new Error("Size values must be positive integers");return S}),h){if(Lr(h)&&(h=h.toNumber()),!_n(h)||!fr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var p=h>0?h:0,v=h<0?-h:0,m=c[0],g=c[1],y=Math.min(m-v,g-p),x;if(Rn(f)){if(f.length!==y)throw new Error("Invalid value array length");x=function(D){return f[D]}}else if(Gn(f)){var w=f.size();if(w.length!==1||w[0]!==y)throw new Error("Invalid matrix length");x=function(D){return f.get([D])}}else x=function(){return f};d||(d=Lr(x(0))?x(0).mul(0):0);var b=[];if(c.length>0){b=KI(b,c,d);for(var C=0;C<y;C++)b[C+v][C+p]=x(C)}return new n({data:b,size:[m,g]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!_n(c)||!fr(c)||!_n(f)||!fr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $n(c,this._size[0]),$n(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function u(c){return Gn(c)?u(c.valueOf()):Rn(c)?c.map(u):c}return n},{isClass:!0});function tR(t,e){Gn(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?tR(i,e):e(i)}}function Ol(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return Ol(r,e)}):e(t)}var r6="isInteger",pGe=["typed"],vGe=nt(r6,pGe,t=>{var{typed:e}=t;return e(r6,{number:fr,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(n=>r=>Ol(r,n))})}),g3="number",vte="number, number";function gte(t){return Math.abs(t)}gte.signature=g3;function mte(t,e){return t+e}mte.signature=vte;function yte(t,e){return t*e}yte.signature=vte;function xte(t){return-t}xte.signature=g3;function wte(t){return t*t}wte.signature=g3;var bte="number";function Cte(t){return t===0}Cte.signature=bte;function Ste(t){return Number.isNaN(t)}Ste.signature=bte;var i6="isZero",gGe=["typed"],mGe=nt(i6,gGe,t=>{var{typed:e}=t;return e(i6,{number:Cte,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>Ol(r,n))})}),a6="isNaN",yGe=["typed"],xGe=nt(a6,yGe,t=>{var{typed:e}=t;return e(a6,{number:Ste,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":function(r){return Ol(r,Number.isNaN)}})});function wGe(t,e,n){if(n==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}function bGe(t,e,n){return p2(t.re,e.re,n)&&p2(t.im,e.im,n)}var CGe=nt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),w2="equalScalar",SGe=["typed","config"],DGe=nt(w2,SGe,t=>{var{typed:e,config:n}=t,r=CGe({typed:e});return e(w2,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return p2(a,o,n.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||wGe(a,o,n.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return bGe(a,o,n.epsilon)}},r)});nt(w2,["typed","config"],t=>{var{typed:e,config:n}=t;return e(w2,{"number, number":function(i,a){return p2(i,a,n.epsilon)}})});var _Ge="SparseMatrix",TGe=["typed","equalScalar","Matrix"],EGe=nt(_Ge,TGe,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!el(m))throw new Error("Invalid datatype: "+m);if(Gn(v))a(this,v,m);else if(v&&Rn(v.index)&&Rn(v.ptr)&&Rn(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(Rn(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+_s(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,g){m.type==="SparseMatrix"?(v._values=m._values?Wn(m._values):void 0,v._index=Wn(m._index),v._ptr=Wn(m._ptr),v._size=Wn(m._size),v._datatype=g||m._datatype):o(v,m.valueOf(),g||m._datatype)}function o(v,m,g){v._values=[],v._index=[],v._ptr=[],v._datatype=g;var y=m.length,x=0,w=n,b=0;if(el(g)&&(w=e.find(n,[g,g])||n,b=e.convert(0,g)),y>0){var C=0;do{v._ptr.push(v._index.length);for(var S=0;S<y;S++){var D=m[S];if(Rn(D)){if(C===0&&x<D.length&&(x=D.length),C<D.length){var _=D[C];w(_,b)||(v._values.push(_),v._index.push(S))}}else C===0&&x<1&&(x=1),w(D,b)||(v._values.push(D),v._index.push(S))}C++}while(C<x)}v._ptr.push(v._index.length),v._size=[y,x]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return v2(this._values,_s)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!d3(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return v.get(m.min());var y=m.size();if(y.length!==v._size.length)throw new jt(y.length,v._size.length);var x,w,b,C,S=m.min(),D=m.max();for(x=0,w=v._size.length;x<w;x++)$n(S[x],v._size[x]),$n(D[x],v._size[x]);var _=v._values,T=v._index,E=v._ptr,A=m.dimension(0),R=m.dimension(1),$=[],O=[];A.forEach(function(z,U){O[z]=U[0],$[z]=!0});var M=_?[]:void 0,B=[],P=[];return R.forEach(function(z){for(P.push(B.length),b=E[z],C=E[z+1];b<C;b++)x=T[b],$[x]===!0&&(B.push(O[x]),M&&M.push(_[b]))}),P.push(B.length),new i({values:M,index:B,ptr:P,size:y,datatype:v._datatype})}function l(v,m,g,y){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var x=m.size(),w=m.isScalar(),b;if(Gn(g)?(b=g.size(),g=g.toArray()):b=wa(g),w){if(b.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),g,y)}else{if(x.length!==1&&x.length!==2)throw new jt(x.length,v._size.length,"<");if(b.length<x.length){for(var C=0,S=0;x[C]===1&&b[C]===1;)C++;for(;x[C]===1;)S++,C++;g=Kee(g,x.length,S,b)}if(!Vv(x,b))throw new jt(x,b,">");if(x.length===1){var D=m.dimension(0);D.forEach(function(E,A){$n(E),v.set([E,0],g[A[0]],y)})}else{var _=m.dimension(0),T=m.dimension(1);_.forEach(function(E,A){$n(E),T.forEach(function(R,$){$n(R),v.set([E,R],g[A[0]][$[0]],y)})})}}return v}i.prototype.get=function(v){if(!Rn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new jt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],g=v[1];$n(m,this._size[0]),$n(g,this._size[1]);var y=u(m,this._ptr[g],this._ptr[g+1],this._index);return y<this._ptr[g+1]&&this._index[y]===m?this._values[y]:0},i.prototype.set=function(v,m,g){if(!Rn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new jt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var y=v[0],x=v[1],w=this._size[0],b=this._size[1],C=n,S=0;el(this._datatype)&&(C=e.find(n,[this._datatype,this._datatype])||n,S=e.convert(0,this._datatype)),(y>w-1||x>b-1)&&(h(this,Math.max(y+1,w),Math.max(x+1,b),g),w=this._size[0],b=this._size[1]),$n(y,w),$n(x,b);var D=u(y,this._ptr[x],this._ptr[x+1],this._index);return D<this._ptr[x+1]&&this._index[D]===y?C(m,S)?c(D,x,this._values,this._index,this._ptr):this._values[D]=m:C(m,S)||f(D,y,x,m,this._values,this._index,this._ptr),this};function u(v,m,g,y){if(g-m===0)return g;for(var x=m;x<g;x++)if(y[x]===v)return x;return m}function c(v,m,g,y,x){g.splice(v,1),y.splice(v,1);for(var w=m+1;w<x.length;w++)x[w]--}function f(v,m,g,y,x,w,b){x.splice(v,0,y),w.splice(v,0,m);for(var C=g+1;C<b.length;C++)b[C]++}i.prototype.resize=function(v,m,g){if(!ny(v))throw new TypeError("Array or Matrix expected");var y=v.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(y.length!==2)throw new Error("Only two dimensions matrix are supported");y.forEach(function(w){if(!_n(w)||!fr(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+cr(y)+")")});var x=g?this.clone():this;return h(x,y[0],y[1],m)};function h(v,m,g,y){var x=y||0,w=n,b=0;el(v._datatype)&&(w=e.find(n,[v._datatype,v._datatype])||n,b=e.convert(0,v._datatype),x=e.convert(x,v._datatype));var C=!w(x,b),S=v._size[0],D=v._size[1],_,T,E;if(g>D){for(T=D;T<g;T++)if(v._ptr[T]=v._values.length,C)for(_=0;_<S;_++)v._values.push(x),v._index.push(_);v._ptr[g]=v._values.length}else g<D&&(v._ptr.splice(g+1,D-g),v._values.splice(v._ptr[g],v._values.length),v._index.splice(v._ptr[g],v._index.length));if(D=g,m>S){if(C){var A=0;for(T=0;T<D;T++){v._ptr[T]=v._ptr[T]+A,E=v._ptr[T+1]+A;var R=0;for(_=S;_<m;_++,R++)v._values.splice(E+R,0,x),v._index.splice(E+R,0,_),A++}v._ptr[D]=v._values.length}}else if(m<S){var $=0;for(T=0;T<D;T++){v._ptr[T]=v._ptr[T]-$;var O=v._ptr[T],M=v._ptr[T+1]-$;for(E=O;E<M;E++)_=v._index[E],_>m-1&&(v._values.splice(E,1),v._index.splice(E,1),$++)}v._ptr[T]=v._values.length}return v._size[0]=m,v._size[1]=g,v}i.prototype.reshape=function(v,m){if(!Rn(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(z){if(!_n(z)||!fr(z)||z<=-2||z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+cr(v)+")")});var g=this._size[0]*this._size[1];v=p3(v,g);var y=v[0]*v[1];if(g!==y)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var x=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return x;for(var w=[],b=0;b<x._ptr.length;b++)for(var C=0;C<x._ptr[b+1]-x._ptr[b];C++)w.push(b);for(var S=x._values.slice(),D=x._index.slice(),_=0;_<x._index.length;_++){var T=D[_],E=w[_],A=T*x._size[1]+E;w[_]=A%v[1],D[_]=Math.floor(A/v[1])}x._values.length=0,x._index.length=0,x._ptr.length=v[1]+1,x._size=v.slice();for(var R=0;R<x._ptr.length;R++)x._ptr[R]=0;for(var $=0;$<S.length;$++){var O=D[$],M=w[$],B=S[$],P=u(O,x._ptr[M],x._ptr[M+1],x._index);f(P,O,M,B,x._values,x._index,x._ptr)}return x},i.prototype.clone=function(){var v=new i({values:this._values?Wn(this._values):void 0,index:Wn(this._index),ptr:Wn(this._ptr),size:Wn(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,y=this._size[0],x=this._size[1],w=pte(v),b=function(S,D,_){return w===1?v(S):w===2?v(S,[D,_]):v(S,[D,_],g)};return d(this,0,y-1,0,x-1,b,m)};function d(v,m,g,y,x,w,b){var C=[],S=[],D=[],_=n,T=0;el(v._datatype)&&(_=e.find(n,[v._datatype,v._datatype])||n,T=e.convert(0,v._datatype));for(var E=function(W,j,K){W=w(W,j,K),_(W,T)||(C.push(W),S.push(j))},A=y;A<=x;A++){D.push(C.length);var R=v._ptr[A],$=v._ptr[A+1];if(b)for(var O=R;O<$;O++){var M=v._index[O];M>=m&&M<=g&&E(v._values[O],M-m,A-y)}else{for(var B={},P=R;P<$;P++){var z=v._index[P];B[z]=v._values[P]}for(var U=m;U<=g;U++){var H=U in B?B[U]:0;E(H,U-m,A-y)}}}return D.push(C.length),new i({values:C,index:S,ptr:D,size:[g-m+1,x-y+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,y=this._size[0],x=this._size[1],w=0;w<x;w++){var b=this._ptr[w],C=this._ptr[w+1];if(m)for(var S=b;S<C;S++){var D=this._index[S];v(this._values[S],[D,w],g)}else{for(var _={},T=b;T<C;T++){var E=this._index[T];_[E]=this._values[T]}for(var A=0;A<y;A++){var R=A in _?_[A]:0;v(R,[A,w],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var g=this._ptr[m],y=this._ptr[m+1],x=g;x<y;x++){var w=this._index[x];yield{value:this._values[x],index:[w,m]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(v,m,g,y,x){var w=y[0],b=y[1],C=[],S,D;for(S=0;S<w;S++)for(C[S]=[],D=0;D<b;D++)C[S][D]=0;for(D=0;D<b;D++)for(var _=g[D],T=g[D+1],E=_;E<T;E++)S=m[E],C[S][D]=v?x?Wn(v[E]):v[E]:1;return C}return i.prototype.format=function(v){for(var m=this._size[0],g=this._size[1],y=this.density(),x="Sparse Matrix ["+cr(m,v)+" x "+cr(g,v)+"] density: "+cr(y,v)+`
`,w=0;w<g;w++)for(var b=this._ptr[w],C=this._ptr[w+1],S=b;S<C;S++){var D=this._index[S];x+=`
    (`+cr(D,v)+", "+cr(w,v)+") ==> "+(this._values?cr(this._values[S],v):"X")}return x},i.prototype.toString=function(){return cr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Lr(v)&&(v=v.toNumber()),!_n(v)||!fr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,g=v<0?-v:0,y=this._size[0],x=this._size[1],w=Math.min(y-g,x-m),b=[],C=[],S=[];S[0]=0;for(var D=m;D<x&&b.length<w;D++)for(var _=this._ptr[D],T=this._ptr[D+1],E=_;E<T;E++){var A=this._index[E];if(A===D-m+g){b.push(this._values[E]),C[b.length-1]=A-g;break}}return S.push(b.length),new i({values:b,index:C,ptr:S,size:[w,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,g,y,x){if(!Rn(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(z){if(Lr(z)&&(z=z.toNumber()),!_n(z)||!fr(z)||z<1)throw new Error("Size values must be positive integers");return z}),g){if(Lr(g)&&(g=g.toNumber()),!_n(g)||!fr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var w=n,b=0;el(x)&&(w=e.find(n,[x,x])||n,b=e.convert(0,x));var C=g>0?g:0,S=g<0?-g:0,D=v[0],_=v[1],T=Math.min(D-S,_-C),E;if(Rn(m)){if(m.length!==T)throw new Error("Invalid value array length");E=function(U){return m[U]}}else if(Gn(m)){var A=m.size();if(A.length!==1||A[0]!==T)throw new Error("Invalid matrix length");E=function(U){return m.get([U])}}else E=function(){return m};for(var R=[],$=[],O=[],M=0;M<_;M++){O.push(R.length);var B=M-C;if(B>=0&&B<T){var P=E(B);w(P,b)||($.push(B+S),R.push(P))}}return O.push(R.length),new i({values:R,index:$,ptr:O,size:[D,_]})},i.prototype.swapRows=function(v,m){if(!_n(v)||!fr(v)||!_n(m)||!fr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $n(v,this._size[0]),$n(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,g,y,x){for(var w=y[v],b=y[v+1],C=w;C<b;C++)x(g[C],m[C])},i._swapRows=function(v,m,g,y,x,w){for(var b=0;b<g;b++){var C=w[b],S=w[b+1],D=u(v,C,S,x),_=u(m,C,S,x);if(D<S&&_<S&&x[D]===v&&x[_]===m){if(y){var T=y[D];y[D]=y[_],y[_]=T}continue}if(D<S&&x[D]===v&&(_>=S||x[_]!==m)){var E=y?y[D]:void 0;x.splice(_,0,m),y&&y.splice(_,0,E),x.splice(_<=D?D+1:D,1),y&&y.splice(_<=D?D+1:D,1);continue}if(_<S&&x[_]===m&&(D>=S||x[D]!==v)){var A=y?y[_]:void 0;x.splice(D,0,v),y&&y.splice(D,0,A),x.splice(D<=_?_+1:_,1),y&&y.splice(D<=_?_+1:_,1)}}},i},{isClass:!0}),AGe="number",NGe=["typed"];function kGe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function IGe(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is no valid number');return a}var RGe=nt(AGe,NGe,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=kGe(i);if(a)return IGe(a);var o=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(o=Number(s[2]),i=s[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is no valid number');if(s){if(l>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(o-1)&&(l=l-2**o)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(r=>i=>Ol(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),$Ge="bignumber",MGe=["typed","BigNumber"],OGe=nt($Ge,MGe,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var o=a[2],s=n(a[1]),l=new n(2).pow(Number(o));if(s.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new n(2).pow(Number(o)-1);return s.gte(u)?s.sub(l):s}return new n(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>Ol(i,r))})}),PGe="fraction",FGe=["typed","Fraction"],LGe=nt(PGe,FGe,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,a){return new n(i,a)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>Ol(i,r))})}),o6="matrix",zGe=["typed","Matrix","DenseMatrix","SparseMatrix"],BGe=nt(o6,zGe,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(o6,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new r(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),s6="unaryMinus",VGe=["typed"],WGe=nt(s6,VGe,t=>{var{typed:e}=t;return e(s6,{number:xte,"Complex | BigNumber | Fraction":n=>n.neg(),Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>Ol(r,n))})}),l6="abs",UGe=["typed"],GGe=nt(l6,UGe,t=>{var{typed:e}=t;return e(l6,{number:gte,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),"Array | Matrix":e.referToSelf(n=>r=>Ol(r,n))})}),u6="apply",HGe=["typed","isInteger"],jGe=nt(u6,HGe,t=>{var{typed:e,isInteger:n}=t;return e(u6,{"Array | Matrix, number | BigNumber, function":function(i,a,o){if(!n(a))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?wa(i):i.size();if(a<0||a>=s.length)throw new df(a,s.length);return Gn(i)?i.create(b2(i.valueOf(),a,o)):b2(i,a,o)}})});function b2(t,e,n){var r,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=qGe(t),i=[],r=0;r<a.length;r++)i[r]=b2(a[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=b2(t[r],e-1,n);return i}}function qGe(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}var c6="addScalar",KGe=["typed"],XGe=nt(c6,KGe,t=>{var{typed:e}=t;return e(c6,{"number, number":mte,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),YGe="matAlgo11xS0s",ZGe=["typed","equalScalar"],Dte=nt(YGe,ZGe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=n,g=0,y=o;typeof h=="string"&&(v=h,m=e.find(n,[v,v]),g=e.convert(0,v),a=e.convert(a,v),y=e.find(o,[v,v]));for(var x=[],w=[],b=[],C=0;C<p;C++){b[C]=w.length;for(var S=c[C],D=c[C+1],_=S;_<D;_++){var T=u[_],E=s?y(a,l[_]):y(l[_],a);m(E,g)||(w.push(T),x.push(E))}}return b[p]=w.length,i.createSparseMatrix({values:x,index:w,ptr:b,size:[d,p],datatype:v})}}),QGe="matAlgo12xSfs",JGe=["typed","DenseMatrix"],eHe=nt(QGe,JGe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=o;typeof h=="string"&&(v=h,a=e.convert(a,v),m=e.find(o,[v,v]));for(var g=[],y=[],x=[],w=0;w<p;w++){for(var b=w+1,C=c[w],S=c[w+1],D=C;D<S;D++){var _=u[D];y[_]=l[D],x[_]=b}for(var T=0;T<d;T++)w===0&&(g[T]=[]),x[T]===b?g[T][w]=s?m(a,y[T]):m(y[T],a):g[T][w]=s?m(a,0):m(0,a)}return new n({data:g,size:[d,p],datatype:v})}}),tHe="matAlgo14xDs",nHe=["typed"],m3=nt(tHe,nHe,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,u=i._size,c=i._datatype,f,h=o;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(o,[f,f]));var d=u.length>0?n(h,0,u,u[0],l,a,s):[];return i.createDenseMatrix({data:d,size:Wn(u),datatype:f})};function n(r,i,a,o,s,l,u){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=u?r(l,s[f]):r(s[f],l);else for(var h=0;h<o;h++)c[h]=n(r,i+1,a,a[i+1],s[h],l,u);return c}}),rHe="matAlgo01xDSid",iHe=["typed"],_te=nt(rHe,iHe,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,l=r._size,u=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(l.length!==d.length)throw new jt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],g=typeof u=="string"&&u===p?u:void 0,y=g?e.find(a,[g,g]):a,x,w,b=[];for(x=0;x<v;x++)b[x]=[];var C=[],S=[];for(w=0;w<m;w++){for(var D=w+1,_=h[w],T=h[w+1],E=_;E<T;E++)x=f[E],C[x]=o?y(c[E],s[x][w]):y(s[x][w],c[E]),S[x]=D;for(x=0;x<v;x++)S[x]===D?b[x][w]=C[x]:b[x][w]=s[x][w]}return r.createDenseMatrix({data:b,size:[v,m],datatype:g})}}),aHe="matAlgo04xSidSid",oHe=["typed","equalScalar"],sHe=nt(aHe,oHe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,p=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new jt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var g=c[0],y=c[1],x,w=n,b=0,C=o;typeof f=="string"&&f===m&&(x=f,w=e.find(n,[x,x]),b=e.convert(0,x),C=e.find(o,[x,x]));var S=s&&h?[]:void 0,D=[],_=[],T=s&&h?[]:void 0,E=s&&h?[]:void 0,A=[],R=[],$,O,M,B,P;for(O=0;O<y;O++){_[O]=D.length;var z=O+1;for(B=u[O],P=u[O+1],M=B;M<P;M++)$=l[M],D.push($),A[$]=z,T&&(T[$]=s[M]);for(B=p[O],P=p[O+1],M=B;M<P;M++)if($=d[M],A[$]===z){if(T){var U=C(T[$],h[M]);w(U,b)?A[$]=null:T[$]=U}}else D.push($),R[$]=z,E&&(E[$]=h[M]);if(T&&E)for(M=_[O];M<D.length;)$=D[M],A[$]===z?(S[M]=T[$],M++):R[$]===z?(S[M]=E[$],M++):D.splice(M,1)}return _[y]=D.length,i.createSparseMatrix({values:S,index:D,ptr:_,size:[g,y],datatype:x})}}),lHe="matAlgo10xSids",uHe=["typed","DenseMatrix"],Tte=nt(lHe,uHe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],v,m=o;typeof h=="string"&&(v=h,a=e.convert(a,v),m=e.find(o,[v,v]));for(var g=[],y=[],x=[],w=0;w<p;w++){for(var b=w+1,C=c[w],S=c[w+1],D=C;D<S;D++){var _=u[D];y[_]=l[D],x[_]=b}for(var T=0;T<d;T++)w===0&&(g[T]=[]),x[T]===b?g[T][w]=s?m(a,y[T]):m(y[T],a):g[T][w]=a}return new n({data:g,size:[d,p],datatype:v})}}),cHe="matAlgo13xDD",fHe=["typed"],hHe=nt(cHe,fHe,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,u=i._datatype,c=a._data,f=a._size,h=a._datatype,d=[];if(l.length!==f.length)throw new jt(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");d[p]=l[p]}var v,m=o;typeof u=="string"&&u===h&&(v=u,m=e.find(o,[v,v]));var g=d.length>0?n(m,0,d,d[0],s,c):[];return i.createDenseMatrix({data:g,size:d,datatype:v})};function n(r,i,a,o,s,l){var u=[];if(i===a.length-1)for(var c=0;c<o;c++)u[c]=r(s[c],l[c]);else for(var f=0;f<o;f++)u[f]=n(r,i+1,a,a[i+1],s[f],l[f]);return u}}),dHe="broadcast",pHe=["concat"],vHe=nt(dHe,pHe,t=>{var{concat:e}=t;return function(i,a){var o=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((p,v)=>p===a._size[v]))return[i,a];for(var s=n(i._size,o,0),l=n(a._size,o,0),u=[],c=0;c<o;c++)u[c]=Math.max(s[c],l[c]);g2(s,u),g2(l,u);var f=i.clone(),h=a.clone();f._size.length<o?f.reshape(n(f._size,o,1)):h._size.length<o&&h.reshape(n(h._size,o,1));for(var d=0;d<o;d++)f._size[d]<u[d]&&(f=r(f,u[d],d)),h._size[d]<u[d]&&(h=r(h,u[d],d));return[f,h]};function n(i,a,o){return[...Array(a-i.length).fill(o),...i]}function r(i,a,o){return e(...Array(a).fill(i),o)}}),gHe="matrixAlgorithmSuite",mHe=["typed","matrix","concat"],Ete=nt(gHe,mHe,t=>{var{typed:e,matrix:n,concat:r}=t,i=hHe({typed:e}),a=m3({typed:e}),o=vHe({concat:r});return function(l){var u=l.elop,c=l.SD||l.DS,f;u?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),u),"Array, Array":(v,m)=>i(...o(n(v),n(m)),u).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(n(v),m),u),"DenseMatrix, Array":(v,m)=>i(...o(v,n(m)),u)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),u,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),u,!1),f["Array, SparseMatrix"]=(v,m)=>l.DS(...o(n(v),m),u,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),u,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(n(m),v),u,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,g)=>i(...o(m,g),v)),"Array, Array":e.referToSelf(v=>(m,g)=>i(...o(n(m),n(g)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,g)=>i(...o(n(m),g),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,g)=>i(...o(m,n(g)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,g)=>l.SS(...o(m,g),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,g)=>l.DS(...o(m,g),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,g)=>l.DS(...o(n(m),g),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,g)=>c(...o(g,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,g)=>c(...o(n(g),m),v,!0))));var h=l.scalar||"any",d=l.Ds||l.Ss;d&&(u?(f["DenseMatrix,"+h]=(v,m)=>a(v,m,u,!1),f[h+", DenseMatrix"]=(v,m)=>a(m,v,u,!0),f["Array,"+h]=(v,m)=>a(n(v),m,u,!1).valueOf(),f[h+", Array"]=(v,m)=>a(n(m),v,u,!0).valueOf()):(f["DenseMatrix,"+h]=e.referToSelf(v=>(m,g)=>a(m,g,v,!1)),f[h+", DenseMatrix"]=e.referToSelf(v=>(m,g)=>a(g,m,v,!0)),f["Array,"+h]=e.referToSelf(v=>(m,g)=>a(n(m),g,v,!1).valueOf()),f[h+", Array"]=e.referToSelf(v=>(m,g)=>a(n(g),m,v,!0).valueOf())));var p=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(f["SparseMatrix,"+h]=(v,m)=>l.Ss(v,m,u,!1)),p&&(f[h+", SparseMatrix"]=(v,m)=>p(m,v,u,!0))):(l.Ss&&(f["SparseMatrix,"+h]=e.referToSelf(v=>(m,g)=>l.Ss(m,g,v,!1))),p&&(f[h+", SparseMatrix"]=e.referToSelf(v=>(m,g)=>p(g,m,v,!0)))),u&&u.signatures&&Vee(f,u.signatures),f}}),yHe="matAlgo03xDSf",xHe=["typed"],wHe=nt(yHe,xHe,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,l=r._size,u=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(l.length!==d.length)throw new jt(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],g,y=0,x=a;typeof u=="string"&&u===p&&(g=u,y=e.convert(0,g),x=e.find(a,[g,g]));for(var w=[],b=0;b<v;b++)w[b]=[];for(var C=[],S=[],D=0;D<m;D++){for(var _=D+1,T=h[D],E=h[D+1],A=T;A<E;A++){var R=f[A];C[R]=o?x(c[A],s[R][D]):x(s[R][D],c[A]),S[R]=_}for(var $=0;$<v;$++)S[$]===_?w[$][D]=C[$]:w[$][D]=o?x(y,s[$][D]):x(s[$][D],y)}return r.createDenseMatrix({data:w,size:[v,m],datatype:g})}}),bHe="matAlgo05xSfSf",CHe=["typed","equalScalar"],SHe=nt(bHe,CHe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype,h=a._values,d=a._index,p=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new jt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var g=c[0],y=c[1],x,w=n,b=0,C=o;typeof f=="string"&&f===m&&(x=f,w=e.find(n,[x,x]),b=e.convert(0,x),C=e.find(o,[x,x]));var S=s&&h?[]:void 0,D=[],_=[],T=S?[]:void 0,E=S?[]:void 0,A=[],R=[],$,O,M,B;for(O=0;O<y;O++){_[O]=D.length;var P=O+1;for(M=u[O],B=u[O+1];M<B;M++)$=l[M],D.push($),A[$]=P,T&&(T[$]=s[M]);for(M=p[O],B=p[O+1];M<B;M++)$=d[M],A[$]!==P&&D.push($),R[$]=P,E&&(E[$]=h[M]);if(S)for(M=_[O];M<D.length;){$=D[M];var z=A[$],U=R[$];if(z===P||U===P){var H=z===P?T[$]:b,F=U===P?E[$]:b,W=C(H,F);w(W,b)?D.splice(M,1):(S.push(W),M++)}}}return _[y]=D.length,i.createSparseMatrix({values:S,index:D,ptr:_,size:[g,y],datatype:x})}}),DHe="multiplyScalar",_He=["typed"],THe=nt(DHe,_He,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":yte,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),f6="multiply",EHe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],AHe=nt(f6,EHe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=t,s=Dte({typed:e,equalScalar:a}),l=m3({typed:e});function u(b,C){switch(b.length){case 1:switch(C.length){case 1:if(b[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(b[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+b[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(b[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+b[1]+") must match Vector length ("+C[0]+")");break;case 2:if(b[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+b[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+b.length+" dimensions)")}}function c(b,C,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return o(b,C)}function f(b,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(b,C)}function h(b,C){var S=b._data,D=b._size,_=b._datatype,T=C._data,E=C._size,A=C._datatype,R=D[0],$=E[1],O,M=r,B=i;_&&A&&_===A&&typeof _=="string"&&(O=_,M=e.find(r,[O,O]),B=e.find(i,[O,O]));for(var P=[],z=0;z<$;z++){for(var U=B(S[0],T[0][z]),H=1;H<R;H++)U=M(U,B(S[H],T[H][z]));P[z]=U}return b.createDenseMatrix({data:P,size:[$],datatype:O})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":y}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":w});function v(b,C){var S=b._data,D=b._size,_=b._datatype,T=C._data,E=C._datatype,A=D[0],R=D[1],$,O=r,M=i;_&&E&&_===E&&typeof _=="string"&&($=_,O=e.find(r,[$,$]),M=e.find(i,[$,$]));for(var B=[],P=0;P<A;P++){for(var z=S[P],U=M(z[0],T[0]),H=1;H<R;H++)U=O(U,M(z[H],T[H]));B[P]=U}return b.createDenseMatrix({data:B,size:[A],datatype:$})}function m(b,C){var S=b._data,D=b._size,_=b._datatype,T=C._data,E=C._size,A=C._datatype,R=D[0],$=D[1],O=E[1],M,B=r,P=i;_&&A&&_===A&&typeof _=="string"&&(M=_,B=e.find(r,[M,M]),P=e.find(i,[M,M]));for(var z=[],U=0;U<R;U++){var H=S[U];z[U]=[];for(var F=0;F<O;F++){for(var W=P(H[0],T[0][F]),j=1;j<$;j++)W=B(W,P(H[j],T[j][F]));z[U][F]=W}}return b.createDenseMatrix({data:z,size:[R,O],datatype:M})}function g(b,C){var S=b._data,D=b._size,_=b._datatype,T=C._values,E=C._index,A=C._ptr,R=C._size,$=C._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=D[0],M=R[1],B,P=r,z=i,U=a,H=0;_&&$&&_===$&&typeof _=="string"&&(B=_,P=e.find(r,[B,B]),z=e.find(i,[B,B]),U=e.find(a,[B,B]),H=e.convert(0,B));for(var F=[],W=[],j=[],K=C.createSparseMatrix({values:F,index:W,ptr:j,size:[O,M],datatype:B}),Y=0;Y<M;Y++){j[Y]=W.length;var Z=A[Y],se=A[Y+1];if(se>Z)for(var ee=0,oe=0;oe<O;oe++){for(var ce=oe+1,ve=void 0,ye=Z;ye<se;ye++){var _e=E[ye];ee!==ce?(ve=z(S[oe][_e],T[ye]),ee=ce):ve=P(ve,z(S[oe][_e],T[ye]))}ee===ce&&!U(ve,H)&&(W.push(oe),F.push(ve))}}return j[M]=W.length,K}function y(b,C){var S=b._values,D=b._index,_=b._ptr,T=b._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var E=C._data,A=C._datatype,R=b._size[0],$=C._size[0],O=[],M=[],B=[],P,z=r,U=i,H=a,F=0;T&&A&&T===A&&typeof T=="string"&&(P=T,z=e.find(r,[P,P]),U=e.find(i,[P,P]),H=e.find(a,[P,P]),F=e.convert(0,P));var W=[],j=[];B[0]=0;for(var K=0;K<$;K++){var Y=E[K];if(!H(Y,F))for(var Z=_[K],se=_[K+1],ee=Z;ee<se;ee++){var oe=D[ee];j[oe]?W[oe]=z(W[oe],U(Y,S[ee])):(j[oe]=!0,M.push(oe),W[oe]=U(Y,S[ee]))}}for(var ce=M.length,ve=0;ve<ce;ve++){var ye=M[ve];O[ve]=W[ye]}return B[1]=M.length,b.createSparseMatrix({values:O,index:M,ptr:B,size:[R,1],datatype:P})}function x(b,C){var S=b._values,D=b._index,_=b._ptr,T=b._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var E=C._data,A=C._datatype,R=b._size[0],$=C._size[0],O=C._size[1],M,B=r,P=i,z=a,U=0;T&&A&&T===A&&typeof T=="string"&&(M=T,B=e.find(r,[M,M]),P=e.find(i,[M,M]),z=e.find(a,[M,M]),U=e.convert(0,M));for(var H=[],F=[],W=[],j=b.createSparseMatrix({values:H,index:F,ptr:W,size:[R,O],datatype:M}),K=[],Y=[],Z=0;Z<O;Z++){W[Z]=F.length;for(var se=Z+1,ee=0;ee<$;ee++){var oe=E[ee][Z];if(!z(oe,U))for(var ce=_[ee],ve=_[ee+1],ye=ce;ye<ve;ye++){var _e=D[ye];Y[_e]!==se?(Y[_e]=se,F.push(_e),K[_e]=P(oe,S[ye])):K[_e]=B(K[_e],P(oe,S[ye]))}}for(var Ie=W[Z],Ne=F.length,We=Ie;We<Ne;We++){var qe=F[We];H[We]=K[qe]}}return W[O]=F.length,j}function w(b,C){var S=b._values,D=b._index,_=b._ptr,T=b._datatype,E=C._values,A=C._index,R=C._ptr,$=C._datatype,O=b._size[0],M=C._size[1],B=S&&E,P,z=r,U=i;T&&$&&T===$&&typeof T=="string"&&(P=T,z=e.find(r,[P,P]),U=e.find(i,[P,P]));for(var H=B?[]:void 0,F=[],W=[],j=b.createSparseMatrix({values:H,index:F,ptr:W,size:[O,M],datatype:P}),K=B?[]:void 0,Y=[],Z,se,ee,oe,ce,ve,ye,_e,Ie=0;Ie<M;Ie++){W[Ie]=F.length;var Ne=Ie+1;for(ce=R[Ie],ve=R[Ie+1],oe=ce;oe<ve;oe++)if(_e=A[oe],B)for(se=_[_e],ee=_[_e+1],Z=se;Z<ee;Z++)ye=D[Z],Y[ye]!==Ne?(Y[ye]=Ne,F.push(ye),K[ye]=U(E[oe],S[Z])):K[ye]=z(K[ye],U(E[oe],S[Z]));else for(se=_[_e],ee=_[_e+1],Z=se;Z<ee;Z++)ye=D[Z],Y[ye]!==Ne&&(Y[ye]=Ne,F.push(ye));if(B)for(var We=W[Ie],qe=F.length,ft=We;ft<qe;ft++){var at=F[ft];H[ft]=K[at]}}return W[M]=F.length,j}return e(f6,i,{"Array, Array":e.referTo("Matrix, Matrix",b=>(C,S)=>{u(wa(C),wa(S));var D=b(n(C),n(S));return Gn(D)?D.valueOf():D}),"Matrix, Matrix":function(C,S){var D=C.size(),_=S.size();return u(D,_),D.length===1?_.length===1?c(C,S,D[0]):f(C,S):_.length===1?d(C,S):p(C,S)},"Matrix, Array":e.referTo("Matrix,Matrix",b=>(C,S)=>b(C,n(S))),"Array, Matrix":e.referToSelf(b=>(C,S)=>b(n(C,S.storage()),S)),"SparseMatrix, any":function(C,S){return s(C,S,i,!1)},"DenseMatrix, any":function(C,S){return l(C,S,i,!1)},"any, SparseMatrix":function(C,S){return s(S,C,i,!0)},"any, DenseMatrix":function(C,S){return l(S,C,i,!0)},"Array, any":function(C,S){return l(n(C),S,i,!1).valueOf()},"any, Array":function(C,S){return l(n(S),C,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(b=>(C,S,D)=>{for(var _=b(C,S),T=0;T<D.length;T++)_=b(_,D[T]);return _})})}),NHe="sqrt",kHe=["config","typed","Complex"],IHe=nt(NHe,kHe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),h6="square",RHe=["typed"],$He=nt(h6,RHe,t=>{var{typed:e}=t;return e(h6,{number:wte,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),d6="subtract",MHe=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],OHe=nt(d6,MHe,t=>{var{typed:e,matrix:n,equalScalar:r,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=_te({typed:e}),u=wHe({typed:e}),c=SHe({typed:e,equalScalar:r}),f=Tte({typed:e,DenseMatrix:o}),h=eHe({typed:e,DenseMatrix:o}),d=Ete({typed:e,matrix:n,concat:s});return e(d6,{"number, number":(p,v)=>p-v,"Complex, Complex":(p,v)=>p.sub(v),"BigNumber, BigNumber":(p,v)=>p.minus(v),"Fraction, Fraction":(p,v)=>p.sub(v),"Unit, Unit":e.referToSelf(p=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var g=v.clone();return g.value=e.find(p,[g.valueType(),m.valueType()])(g.value,m.value),g.fixPrefix=!1,g})},d({SS:c,DS:l,SD:u,Ss:h,sS:f}))}),p6="conj",PHe=["typed"],FHe=nt(p6,PHe,t=>{var{typed:e}=t;return e(p6,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>Ol(r,n))})}),v6="concat",LHe=["typed","matrix","isInteger"],zHe=nt(v6,LHe,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(v6,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,u,c=!1,f=[];for(o=0;o<s;o++){var h=a[o];if(Gn(h)&&(c=!0),_n(h)||Lr(h)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=h.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>u)throw new df(l,u+1)}else{var d=Wn(h).valueOf(),p=wa(d);if(f[o]=d,u=l,l=p.length-1,o>0&&l!==u)throw new jt(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=Zee(v,f.shift(),l);return c?n(v):v},"...string":function(a){return a.join("")}})});function BHe(t,e,n,r,i){if(Ip.isTypedFunction(t)){var a=[e,n,r],o=Ip.resolve(t,a);if(o)return f(o.implementation,a);var s=[e,n],l=Ip.resolve(t,s);if(l)return f(l.implementation,s);var u=[e],c=Ip.resolve(t,u);return c?f(c.implementation,u):f(t,a)}else return t(e,n,r);function f(h,d){try{return h.apply(h,d)}catch(m){var p;if(m instanceof TypeError&&((p=m.data)===null||p===void 0?void 0:p.category)==="wrongType"){var v=[];throw v.push("value: ".concat(_s(e))),d.length>=2&&v.push("index: ".concat(_s(n))),d.length>=3&&v.push("array: ".concat(_s(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(t.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(t.name,": ").concat(m.message))}}}var g6="identity",VHe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],WHe=nt(g6,VHe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=t;return e(g6,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return l(c,f,h)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(u,c){switch(u.length){case 0:return c?r(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var h=Lr(u)||Lr(c)?i:null;if(Lr(u)&&(u=u.toNumber()),Lr(c)&&(c=c.toNumber()),!fr(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!fr(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var d=h?new i(1):1,p=h?new h(0):0,v=[u,c];if(f){if(f==="sparse")return o.diagonal(v,d,0,p);if(f==="dense")return a.diagonal(v,d,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var m=KI([],v,p),g=u<c?u:c,y=0;y<g;y++)m[y][y]=d;return m}}),m6="map",UHe=["typed"],GHe=nt(m6,UHe,t=>{var{typed:e}=t;return e(m6,{"Array, function":HHe,"Matrix, function":function(r,i){return r.map(i)}})});function HHe(t,e){var n=function r(i,a){return Array.isArray(i)?i.map(function(o,s){return r(o,a.concat(s))}):BHe(e,i,a,t,"map")};return n(t,[])}function jHe(){throw new Error('No "bignumber" implementation available')}function qHe(){throw new Error('No "fraction" implementation available')}function KHe(){throw new Error('No "matrix" implementation available')}var y6="size",XHe=["typed","config","?matrix"],YHe=nt(y6,XHe,t=>{var{typed:e,config:n,matrix:r}=t;return e(y6,{Matrix:function(a){return a.create(a.size())},Array:wa,string:function(a){return n.matrix==="Array"?[a.length]:r([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:r?r([]):KHe()}})});function x6(t,e,n){var r;return String(t).indexOf("Unexpected type")!==-1?(r=arguments.length>2?" (type: "+_s(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).indexOf("complex numbers")!==-1?(r=arguments.length>2?" (type: "+_s(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var ZHe="numeric",QHe=["number","?bignumber","?fraction"],JHe=nt(ZHe,QHe,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:n?o=>n(o):jHe,Fraction:r?o=>r(o):qHe};return function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=_s(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in a))throw new TypeError("Cannot convert "+s+' to type "'+l+'"; valid output types are '+Object.keys(a).join(", "));return l===c?s:a[l](s)}}),w6="divideScalar",eje=["typed","numeric"],tje=nt(w6,eje,t=>{var{typed:e,numeric:n}=t;return e(w6,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),b6="add",nje=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],rje=nt(b6,nje,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=_te({typed:e}),u=sHe({typed:e,equalScalar:i}),c=Tte({typed:e,DenseMatrix:a}),f=Ete({typed:e,matrix:n,concat:s});return e(b6,{"any, any":r,"any, any, ...any":e.referToSelf(h=>(d,p,v)=>{for(var m=h(d,p),g=0;g<v.length;g++)m=h(m,v[g]);return m})},f({elop:r,DS:l,SS:u,Ss:c}))}),C6="dot",ije=["typed","addScalar","multiplyScalar","conj","size"],aje=nt(C6,ije,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:a}=t;return e(C6,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,f){var h=u(c),d=u(f),p,v;if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)v=d[0];else if(d.length===2&&d[1]===1)v=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(p!==v)throw new RangeError("Vectors must have equal length ("+p+" != "+v+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,f){var h=o(c,f),d=Gn(c)?c._data:c,p=Gn(c)?c._datatype:void 0,v=Gn(f)?f._data:f,m=Gn(f)?f._datatype:void 0,g=u(c).length===2,y=u(f).length===2,x=n,w=r;if(p&&m&&p===m&&typeof p=="string"){var b=p;x=e.find(n,[b,b]),w=e.find(r,[b,b])}if(!g&&!y){for(var C=w(i(d[0]),v[0]),S=1;S<h;S++)C=x(C,w(i(d[S]),v[S]));return C}if(!g&&y){for(var D=w(i(d[0]),v[0][0]),_=1;_<h;_++)D=x(D,w(i(d[_]),v[_][0]));return D}if(g&&!y){for(var T=w(i(d[0][0]),v[0]),E=1;E<h;E++)T=x(T,w(i(d[E][0]),v[E]));return T}if(g&&y){for(var A=w(i(d[0][0]),v[0][0]),R=1;R<h;R++)A=x(A,w(i(d[R][0]),v[R][0]));return A}}function l(c,f){o(c,f);for(var h=c._index,d=c._values,p=f._index,v=f._values,m=0,g=n,y=r,x=0,w=0;x<h.length&&w<p.length;){var b=h[x],C=p[w];if(b<C){x++;continue}if(b>C){w++;continue}b===C&&(m=g(m,y(d[x],v[w])),x++,w++)}return m}function u(c){return Gn(c)?c.size():a(c)}}),S6="det",oje=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],sje=nt(S6,oje,t=>{var{typed:e,matrix:n,subtract:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=t;return e(S6,{any:function(c){return Wn(c)},"Array | Matrix":function(c){var f;switch(Gn(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Wn(c);case 1:if(f[0]===1)return Wn(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+cr(f)+")");case 2:{var h=f[0],d=f[1];if(h===d)return l(c.clone().valueOf(),h);if(d===0)return 1;throw new RangeError("Matrix must be square (size: "+cr(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+cr(f)+")")}}});function l(u,c,f){if(c===1)return Wn(u[0][0]);if(c===2)return r(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var h=!1,d=new Array(c).fill(0).map((S,D)=>D),p=0;p<c;p++){var v=d[p];if(o(u[v][p])){var m=void 0;for(m=p+1;m<c;m++)if(!o(u[d[m]][p])){v=d[m],d[m]=d[p],d[p]=v,h=!h;break}if(m===c)return u[v][p]}for(var g=u[v][p],y=p===0?1:u[d[p-1]][p-1],x=p+1;x<c;x++)for(var w=d[x],b=p+1;b<c;b++)u[w][b]=a(r(i(u[w][b],g),i(u[w][p],u[v][b])),y)}var C=u[d[c-1]][c-1];return h?s(C):C}}),D6="inv",lje=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],uje=nt(D6,lje,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:l,abs:u}=t;return e(D6,{"Array | Matrix":function(h){var d=Gn(h)?h.size():wa(h);switch(d.length){case 1:if(d[0]===1)return Gn(h)?n([r(1,h.valueOf()[0])]):[r(1,h[0])];throw new RangeError("Matrix must be square (size: "+cr(d)+")");case 2:{var p=d[0],v=d[1];if(p===v)return Gn(h)?n(c(h.valueOf(),p,v),h.storage()):c(h,p,v);throw new RangeError("Matrix must be square (size: "+cr(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+cr(d)+")")}},any:function(h){return r(1,h)}});function c(f,h,d){var p,v,m,g,y;if(h===1){if(g=f[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,g)]]}else if(h===2){var x=s(f);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],x),r(o(f[0][1]),x)],[r(o(f[1][0]),x),r(f[0][0],x)]]}else{var w=f.concat();for(p=0;p<h;p++)w[p]=w[p].concat();for(var b=l(h).valueOf(),C=0;C<d;C++){var S=u(w[C][C]),D=C;for(p=C+1;p<h;)u(w[p][C])>S&&(S=u(w[p][C]),D=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=D,p!==C&&(y=w[C],w[C]=w[p],w[p]=y,y=b[C],b[C]=b[p],b[p]=y);var _=w[C],T=b[C];for(p=0;p<h;p++){var E=w[p],A=b[p];if(p!==C){if(E[C]!==0){for(m=r(o(E[C]),_[C]),v=C;v<d;v++)E[v]=i(E[v],a(m,_[v]));for(v=0;v<d;v++)A[v]=i(A[v],a(m,T[v]))}}else{for(m=_[C],v=C;v<d;v++)E[v]=r(E[v],m);for(v=0;v<d;v++)A[v]=r(A[v],m)}}}return b}}}),cje="divide",fje=["typed","matrix","multiply","equalScalar","divideScalar","inv"],hje=nt(cje,fje,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=t,s=Dte({typed:e,equalScalar:i}),l=m3({typed:e});return e("divide",Vee({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return l(c,f,a,!1)},"SparseMatrix, any":function(c,f){return s(c,f,a,!1)},"Array, any":function(c,f){return l(n(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},a.signatures))}),cA="unbiased",_6="variance",dje=["typed","add","subtract","multiply","divide","apply","isNaN"],pje=nt(_6,dje,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=t;return e(_6,{"Array | Matrix":function(f){return l(f,cA)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(f,h){return u(f,h,cA)},"Array | Matrix, number | BigNumber, string":u,"...":function(f){return l(f,cA)}});function l(c,f){var h,d=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(tR(c,function(m){try{h=h===void 0?m:n(h,m),d++}catch(g){throw x6(g,"variance",m)}}),d===0)throw new Error("Cannot calculate variance of an empty array");var p=a(h,d);if(h=void 0,tR(c,function(m){var g=r(m,p);h=h===void 0?i(g,g):n(h,i(g,g))}),s(h))return h;switch(f){case"uncorrected":return a(h,d);case"biased":return a(h,d+1);case"unbiased":{var v=Lr(h)?h.mul(0):0;return d===1?v:a(h,d-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,f,h){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,d=>l(d,h))}catch(d){throw x6(d,"variance")}}}),T6="std",vje=["typed","map","sqrt","variance"],gje=nt(T6,vje,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(T6,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(s){return a(s)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return ny(l)?n(l,r):r(l)}catch(u){throw u instanceof TypeError&&u.message.indexOf(" variance")!==-1?new TypeError(u.message.replace(" variance"," std")):u}}}),y3=J7e({config:Sg}),Ate=rGe({}),Nte=sGe({}),x3=cGe({}),vx=dGe({Matrix:x3}),Ut=n7e({BigNumber:y3,Complex:Ate,DenseMatrix:vx,Fraction:Nte}),mje=GGe({typed:Ut}),gx=XGe({typed:Ut}),yje=OGe({BigNumber:y3,typed:Ut}),xje=FHe({typed:Ut}),mx=DGe({config:Sg,typed:Ut}),kte=vGe({typed:Ut}),wje=mGe({typed:Ut}),bje=GHe({typed:Ut}),Ite=THe({typed:Ut}),Cje=RGe({typed:Ut}),w3=EGe({Matrix:x3,equalScalar:mx,typed:Ut}),Sje=$He({typed:Ut}),Dje=jGe({isInteger:kte,typed:Ut}),_je=xGe({typed:Ut}),Tje=IHe({Complex:Ate,config:Sg,typed:Ut}),b3=WGe({typed:Ut}),Eje=LGe({Fraction:Nte,typed:Ut}),Au=BGe({DenseMatrix:vx,Matrix:x3,SparseMatrix:w3,typed:Ut}),Aje=JHe({bignumber:yje,fraction:Eje,number:Cje}),Nje=YHe({matrix:Au,config:Sg,typed:Ut}),Rte=zHe({isInteger:kte,matrix:Au,typed:Ut}),C3=tje({numeric:Aje,typed:Ut}),kje=WHe({BigNumber:y3,DenseMatrix:vx,SparseMatrix:w3,config:Sg,matrix:Au,typed:Ut}),$te=OHe({DenseMatrix:vx,addScalar:gx,concat:Rte,equalScalar:mx,matrix:Au,typed:Ut,unaryMinus:b3}),Ije=rje({DenseMatrix:vx,SparseMatrix:w3,addScalar:gx,concat:Rte,equalScalar:mx,matrix:Au,typed:Ut}),Rje=aje({addScalar:gx,conj:xje,multiplyScalar:Ite,size:Nje,typed:Ut}),Y_=AHe({addScalar:gx,dot:Rje,equalScalar:mx,matrix:Au,multiplyScalar:Ite,typed:Ut}),$je=sje({divideScalar:C3,isZero:wje,matrix:Au,multiply:Y_,subtract:$te,typed:Ut,unaryMinus:b3}),Mje=uje({abs:mje,addScalar:gx,det:$je,divideScalar:C3,identity:kje,matrix:Au,multiply:Y_,typed:Ut,unaryMinus:b3}),Oje=hje({divideScalar:C3,equalScalar:mx,inv:Mje,matrix:Au,multiply:Y_,typed:Ut}),Pje=pje({add:Ije,apply:Dje,divide:Oje,isNaN:_je,multiply:Y_,subtract:$te,typed:Ut}),Fje=gje({map:bje,sqrt:Tje,typed:Ut,variance:Pje});const Lje=t=>typeof t=="number"?!0:typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t)),zje=(t,e=!1)=>Fje(t),Bje=(t,e=!1)=>{let n=0,r=0,i=0,a=0,o=0,s=0,l=0,u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,f={},h={},d=[];t.forEach(g=>{Lje(g)?d.push(parseFloat(g)):g===""?r++:i++}),d.forEach(g=>{if(g===void 0){r++;return}g===0?a++:g>0?s++:o++,f[g]?f[g]++:(f[g]=1,n++),u=Math.min(u,g),c=Math.max(c,g),l=l+g});const p=Object.entries(f).sort((g,y)=>y[1]-g[1]);for(let g=0;g<Math.min(20,p.length);g++)h[p[g][0]]=p[g][1];let v={frequency:h,profile:{Count:t.length,"Distinct values":n,"Missing values":r,"Invalid values":i,Zeros:a,Negatives:o,Positives:s,Sum:l,Average:l/t.length,Minimum:u,Maximum:c},type:"numerical"};if(!e||!d.length)return v;const m=zje(d);return v.profile["Standard Deviation"]=m,v.profile.Variance=Sje(m),v};function E6(t,e){t=" ".repeat(e-1)+t.toLowerCase()+" ".repeat(e-1);let n=new Array(t.length-e+1);for(let r=0;r<n.length;r++)n[r]=t.slice(r,r+e);return n}function Vje(t,e,n=2){if(!(t!=null&&t.length)||!(e!=null&&e.length))return 0;let r=t.length<e.length?t:e,i=t.length<e.length?e:t,a=E6(r,n),o=E6(i,n),s=new Set(a),l=o.length,u=0;for(let c of o)s.delete(c)&&u++;return u/l}const Wje=(t,e)=>{const n=Math.min(t,e)>=.1*Math.max(e,t),r=Math.min(e,t)>-2;return n&&r},Uje=t=>{let e=0,n=0,r=0,i={},a={};t.forEach(f=>{if(f===void 0){n++;return}i[f]?i[f]++:(i[f]=1,e++)});const o=Object.entries(i).sort((f,h)=>h[1]-f[1]);for(let f=0;f<Math.min(20,o.length);f++)a[o[f][0]]=o[f][1];let s={frequency:a,profile:{"Distinct values":e,"Missing values":n,"Invalid values":r},type:"categorical"};if(e>t.length*.7)return s;let u=[],c=Math.min(o.length,1e3);for(let f=0;f<c;f++){let[h,d]=o[f];if(!(h.length>50))for(let p=f+1;p<c;p++){let[v,m]=o[p];if(Wje(d,m)||v.length>50)continue;let g=Vje(h,v);g>.7&&u.push({id:Cv(5),lhs:{value:h,frequency:d},rhs:{value:v,frequency:m},score:g})}}return s.similarities=u,s};async function Gje({data:t,column:e,type:n,extended:r=!1}){const i=n==="number",a=t.map(o=>o[e]);return i?Bje(a,r):Uje(a)}const Hje="_row_10h1f_1",jje="_danger_10h1f_7",qje="_chart_10h1f_10",Kje="_switcher_10h1f_18",Xje="_similarities_10h1f_24",Yje="_count_10h1f_27",Zje="_word_10h1f_31",ds={row:Hje,danger:jje,chart:qje,switcher:Kje,similarities:Xje,count:Yje,word:Zje};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nR=function(t,e){return nR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},nR(t,e)};function He(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nR(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qje=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),Jje=function(){function t(){this.browser=new Qje,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),Xf=new Jje;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Xf.wxa=!0,Xf.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Xf.worker=!0:typeof navigator>"u"?(Xf.node=!0,Xf.svgSupported=!0):eqe(navigator.userAgent,Xf);function eqe(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),a=t.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),o&&(n.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}const St=Xf;var S3=12,Mte="sans-serif",jc=S3+"px "+Mte,tqe=20,nqe=100,rqe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function iqe(t){var e={};if(typeof JSON>"u")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-tqe)/nqe;e[r]=i}return e}var aqe=iqe(rqe),wu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var i=wu.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==r&&(e=t.font=r||jc),t.measureText(n);n=n||"",r=r||jc;var a=/(\d+)px/.exec(r),o=a&&+a[1]||S3,s=0;if(r.indexOf("mono")>=0)s=o*n.length;else for(var l=0;l<n.length;l++){var u=aqe[n[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}};function Ote(t){for(var e in wu)t[e]&&(wu[e]=t[e])}var Pte=_l(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),Fte=_l(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),Dg=Object.prototype.toString,Z_=Array.prototype,oqe=Z_.forEach,sqe=Z_.filter,D3=Z_.slice,lqe=Z_.map,A6=(function(){}).constructor,_w=A6?A6.prototype:null,_3="__proto__",uqe=2311;function T3(){return uqe++}function Q_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console<"u"&&console.error.apply(console,t)}function ht(t){if(t==null||typeof t!="object")return t;var e=t,n=Dg.call(t);if(n==="[object Array]"){if(!ev(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=ht(t[r])}}else if(Fte[n]){if(!ev(t)){var a=t.constructor;if(a.from)e=a.from(t);else{e=new a(t.length);for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}}}else if(!Pte[n]&&!ev(t)&&!Gv(t)){e={};for(var o in t)t.hasOwnProperty(o)&&o!==_3&&(e[o]=ht(t[o]))}return e}function mt(t,e,n){if(!Ye(e)||!Ye(t))return n?ht(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==_3){var i=t[r],a=e[r];Ye(a)&&Ye(i)&&!Me(a)&&!Me(i)&&!Gv(a)&&!Gv(i)&&!rR(a)&&!rR(i)&&!ev(a)&&!ev(i)?mt(i,a,n):(n||!(r in t))&&(t[r]=ht(e[r]))}return t}function cqe(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=mt(n,t[r],e);return n}function De(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==_3&&(t[n]=e[n]);return t}function pt(t,e,n){for(var r=Ot(e),i=0;i<r.length;i++){var a=r[i];(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}return t}var fqe=wu.createCanvas;function kt(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function E3(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function Ko(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(n?e[a]!=null:t[a]==null)&&(t[a]=e[a])}else pt(t,e,n)}function Xi(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function G(t,e,n){if(t&&e)if(t.forEach&&t.forEach===oqe)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function $e(t,e,n){if(!t)return[];if(!e)return J_(t);if(t.map&&t.map===lqe)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r}function _l(t,e,n,r){if(t&&e){for(var i=0,a=t.length;i<a;i++)n=e.call(r,n,t[i],i,t);return n}}function Un(t,e,n){if(!t)return[];if(!e)return J_(t);if(t.filter&&t.filter===sqe)return t.filter(e,n);for(var r=[],i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function hqe(t,e,n){if(t&&e){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]}}function Ot(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function dqe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(D3.call(arguments)))}}var qt=_w&&lt(_w.bind)?_w.call.bind(_w.bind):dqe;function Pt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(D3.call(arguments)))}}function Me(t){return Array.isArray?Array.isArray(t):Dg.call(t)==="[object Array]"}function lt(t){return typeof t=="function"}function Be(t){return typeof t=="string"}function C2(t){return Dg.call(t)==="[object String]"}function Zt(t){return typeof t=="number"}function Ye(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function rR(t){return!!Pte[Dg.call(t)]}function Na(t){return!!Fte[Dg.call(t)]}function Gv(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function yx(t){return t.colorStops!=null}function Lte(t){return t.image!=null}function pqe(t){return Dg.call(t)==="[object RegExp]"}function ay(t){return t!==t}function Hv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function wt(t,e){return t??e}function Jp(t,e,n){return t??e??n}function J_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return D3.apply(t,e)}function A3(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function Ya(t,e){if(!t)throw new Error(e)}function ys(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var zte="__ec_primitive__";function S2(t){t[zte]=!0}function ev(t){return t[zte]}var vqe=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return Ot(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),Bte=typeof Map=="function";function gqe(){return Bte?new Map:new vqe}var Vte=function(){function t(e){var n=Me(e);this.data=gqe();var r=this;e instanceof t?e.each(i):e&&G(e,i);function i(a,o){n?r.set(a,o):r.set(o,a)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,i){e.call(n,r,i)})},t.prototype.keys=function(){var e=this.data.keys();return Bte?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function ut(t){return new Vte(t)}function Wte(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var i=t.length,r=0;r<e.length;r++)n[r+i]=e[r];return n}function xx(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&De(n,e),n}function N3(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function td(t,e){return t.hasOwnProperty(e)}function ti(){}var t0=180/Math.PI;const mqe=Object.freeze(Object.defineProperty({__proto__:null,HashMap:Vte,RADIAN_TO_DEGREE:t0,assert:Ya,bind:qt,clone:ht,concatArray:Wte,createCanvas:fqe,createHashMap:ut,createObject:xx,curry:Pt,defaults:pt,disableUserSelect:N3,each:G,eqNaN:ay,extend:De,filter:Un,find:hqe,guid:T3,hasOwn:td,indexOf:kt,inherits:E3,isArray:Me,isArrayLike:Xi,isBuiltInObject:rR,isDom:Gv,isFunction:lt,isGradientObject:yx,isImagePatternObject:Lte,isNumber:Zt,isObject:Ye,isPrimitive:ev,isRegExp:pqe,isString:Be,isStringSafe:C2,isTypedArray:Na,keys:Ot,logError:Q_,map:$e,merge:mt,mergeAll:cqe,mixin:Ko,noop:ti,normalizeCssArray:A3,reduce:_l,retrieve:Hv,retrieve2:wt,retrieve3:Jp,setAsPrimitive:S2,slice:J_,trim:ys},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iR=function(t,e){return iR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},iR(t,e)};function an(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iR(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ad(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function yqe(t,e){return t[0]=e[0],t[1]=e[1],t}function Ute(t){return[t[0],t[1]]}function xqe(t,e,n){return t[0]=e,t[1]=n,t}function aR(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function wqe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Gte(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function k3(t){return Math.sqrt(I3(t))}var bqe=k3;function I3(t){return t[0]*t[0]+t[1]*t[1]}var Cqe=I3;function Sqe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Dqe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function _qe(t,e){return t[0]*e[0]+t[1]*e[1]}function Ob(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Hte(t,e){var n=k3(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function D2(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var _2=D2;function jte(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Th=jte;function Tqe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function n0(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function Hi(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function sc(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function lc(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}const Eqe=Object.freeze(Object.defineProperty({__proto__:null,add:aR,applyTransform:Hi,clone:Ute,copy:yqe,create:Ad,dist:_2,distSquare:Th,distance:D2,distanceSquare:jte,div:Dqe,dot:_qe,len:k3,lenSquare:I3,length:bqe,lengthSquare:Cqe,lerp:n0,max:lc,min:sc,mul:Sqe,negate:Tqe,normalize:Hte,scale:Ob,scaleAndAdd:wqe,set:xqe,sub:Gte},Symbol.toStringTag,{value:"Module"}));var zd=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),Aqe=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new zd(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,n.drift(a,o,e),this.handler.dispatchToElement(new zd(n,e),"drag",e.event);var s=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=s,n!==s&&(l&&s!==l&&this.handler.dispatchToElement(new zd(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new zd(s,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new zd(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new zd(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}();const Nqe=Aqe;var kqe=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!e)return this;var o=this._$eventProcessor;n!=null&&o&&o.normalizeQuery&&(n=o.normalizeQuery(n)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=a[e].length-1,c=a[e][u];return c&&c.callAtLast?a[e].splice(u,0,l):a[e].push(l),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==n&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=n.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,n[0]);break;case 2:u.h.call(u.ctx,n[0],n[1]);break;default:u.h.apply(u.ctx,n);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=n.length,s=n[o-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,n[0]);break;case 2:c.h.call(s,n[0],n[1]);break;default:c.h.apply(s,n.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t}();const Fs=kqe;var Iqe=Math.log(2);function oR(t,e,n,r,i,a){var o=r+"-"+i,s=t.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/Iqe);return t[n][l]}for(var u=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*t[n][h]*oR(t,e-1,c,u,i|p,a),d++)}return a[o]=f,f}function N6(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=oR(n,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*oR(n,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(l,u,c){var f=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/f,l[1]=(u*a[3]+c*a[4]+a[5])/f}}}var k6="___zrEVENTSAVED",fA=[];function Rqe(t,e,n,r,i){return sR(fA,e,r,i,!0)&&sR(t,n,fA[0],fA[1])}function sR(t,e,n,r,i){if(e.getBoundingClientRect&&St.domSupported&&!qte(e)){var a=e[k6]||(e[k6]={}),o=$qe(e,a),s=Mqe(o,a,i);if(s)return s(t,n,r),!0}return!1}function $qe(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),t.appendChild(o),n.push(o)}return n}function Mqe(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var c=t[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;o.push(h,d),l=l&&a&&h===a[f]&&d===a[f+1],s.push(t[u].offsetLeft,t[u].offsetTop)}return l&&i?i:(e.srcCoords=o,e[r]=n?N6(s,o):N6(o,s))}function qte(t){return t.nodeName.toUpperCase()==="CANVAS"}var Oqe=/([&<>"'])/g,Pqe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function oa(t){return t==null?"":(t+"").replace(Oqe,function(e,n){return Pqe[n]})}var Fqe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,hA=[],Lqe=St.browser.firefox&&+St.browser.version.split(".")[0]<39;function lR(t,e,n,r){return n=n||{},r?I6(t,e,n):Lqe&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):I6(t,e,n),n}function I6(t,e,n){if(St.domSupported&&t.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(qte(t)){var a=t.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}else if(sR(hA,t,r,i)){n.zrX=hA[0],n.zrY=hA[1];return}}n.zrX=n.zrY=0}function R3(t){return t||window.event}function go(t,e,n){if(e=R3(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&lR(t,o,e,n)}else{lR(t,e,e,n);var a=zqe(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&Fqe.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function zqe(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var i=Math.abs(r!==0?r:n),a=r>0?-1:r<0?1:n>0?-1:1;return 3*i*a}function uR(t,e,n,r){t.addEventListener(e,n,r)}function Bqe(t,e,n,r){t.removeEventListener(e,n,r)}var Kte=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0},Vqe=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:n,event:e},o=0,s=i.length;o<s;o++){var l=i[o],u=lR(r,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},t.prototype._recognize=function(e){for(var n in dA)if(dA.hasOwnProperty(n)){var r=dA[n](this._track,e);if(r)return r}},t}();function R6(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function Wqe(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var dA={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=R6(r)/R6(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=Wqe(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}};function nd(){return[1,0,0,1,0,0]}function bx(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function $3(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function kc(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],o=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t}function T2(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function eT(t,e,n){var r=e[0],i=e[2],a=e[4],o=e[1],s=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=-r*u+o*c,t[2]=i*c+s*u,t[3]=-i*u+c*s,t[4]=c*a+u*l,t[5]=c*l-u*a,t}function Xte(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function Cx(t,e){var n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=n*o-a*r;return l?(l=1/l,t[0]=o*l,t[1]=-a*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*s-o*i)*l,t[5]=(a*i-n*s)*l,t):null}function Uqe(t){var e=nd();return $3(e,t),e}const Gqe=Object.freeze(Object.defineProperty({__proto__:null,clone:Uqe,copy:$3,create:nd,identity:bx,invert:Cx,mul:kc,rotate:eT,scale:Xte,translate:T2},Symbol.toStringTag,{value:"Module"}));var Hqe=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,i){e.x=n.x+r.x*i,e.y=n.y+r.y*i},t.lerp=function(e,n,r,i){var a=1-i;e.x=a*n.x+i*r.x,e.y=a*n.y+i*r.y},t}();const tt=Hqe;var Tw=Math.min,Ew=Math.max,bf=new tt,Cf=new tt,Sf=new tt,Df=new tt,Xg=new tt,Yg=new tt,jqe=function(){function t(e,n,r,i){r<0&&(e=e+r,r=-r),i<0&&(n=n+i,i=-i),this.x=e,this.y=n,this.width=r,this.height=i}return t.prototype.union=function(e){var n=Tw(e.x,this.x),r=Tw(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Ew(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Ew(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,i=e.height/n.height,a=nd();return T2(a,a,[-n.x,-n.y]),Xte(a,a,[r,i]),T2(a,a,[e.x,e.y]),a},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,u=e.x+e.width,c=e.y,f=e.y+e.height,h=!(a<l||u<i||s<c||f<o);if(n){var d=1/0,p=0,v=Math.abs(a-l),m=Math.abs(u-i),g=Math.abs(s-c),y=Math.abs(f-o),x=Math.min(v,m),w=Math.min(g,y);a<l||u<i?x>p&&(p=x,v<m?tt.set(Yg,-v,0):tt.set(Yg,m,0)):x<d&&(d=x,v<m?tt.set(Xg,v,0):tt.set(Xg,-m,0)),s<c||f<o?w>p&&(p=w,g<y?tt.set(Yg,0,-g):tt.set(Yg,0,y)):x<d&&(d=x,g<y?tt.set(Xg,0,g):tt.set(Xg,0,-y))}return n&&tt.copy(n,h?Xg:Yg),h},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=n.x*i+o,e.y=n.y*a+s,e.width=n.width*i,e.height=n.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}bf.x=Sf.x=n.x,bf.y=Df.y=n.y,Cf.x=Df.x=n.x+n.width,Cf.y=Sf.y=n.y+n.height,bf.transform(r),Df.transform(r),Cf.transform(r),Sf.transform(r),e.x=Tw(bf.x,Cf.x,Sf.x,Df.x),e.y=Tw(bf.y,Cf.y,Sf.y,Df.y);var l=Ew(bf.x,Cf.x,Sf.x,Df.x),u=Ew(bf.y,Cf.y,Sf.y,Df.y);e.width=l-e.x,e.height=u-e.y},t}();const Et=jqe;var Yte="silent";function qqe(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Kqe}}function Kqe(){Kte(this.event)}var Xqe=function(t){an(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Fs),Zg=function(){function t(e,n){this.x=e,this.y=n}return t}(),Yqe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],pA=new Et(0,0,0,0),Zte=function(t){an(e,t);function e(n,r,i,a,o){var s=t.call(this)||this;return s._hovered=new Zg(0,0),s.storage=n,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new Xqe,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Nqe(s),s}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(G(Yqe,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,a=Qte(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Zg(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",n),this.dispatchToElement(l,"mousemove",n),u&&u!==s&&this.dispatchToElement(l,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new Zg(0,0)},e.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,i){n=n||{};var a=n.target;if(!(a&&a.silent)){for(var o="on"+r,s=qqe(r,n,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(n,r,i){var a=this.storage.getDisplayList(),o=new Zg(n,r);if($6(a,o,n,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,c=new Et(n-u,r-u,l,l),f=a.length-1;f>=0;f--){var h=a[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(pA.copy(h.getBoundingRect()),h.transform&&pA.applyTransform(h.transform),pA.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=d)for(var g=0;g<v;g+=p){var y=n+m*Math.cos(g),x=r+m*Math.sin(g);if($6(s,o,y,x,i),o.target)return o}}return o},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new Vqe);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;n.gestureEvent=o;var s=new Zg;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(Fs);G(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Zte.prototype[t]=function(e){var n=e.zrX,r=e.zrY,i=Qte(this,n,r),a,o;if((t!=="mouseup"||!i)&&(a=this.findHover(n,r),o=a.target),t==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(t==="mouseup")this._upEl=o;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||_2(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,t,e)}});function Zqe(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,n))return!1;r.silent&&(i=!0)}var s=r.__hostTarget;r=s||r.parent}return i?Yte:!0}return!1}function $6(t,e,n,r,i){for(var a=t.length-1;a>=0;a--){var o=t[a],s=void 0;if(o!==i&&!o.ignore&&(s=Zqe(o,n,r))&&(!e.topTarget&&(e.topTarget=o),s!==Yte)){e.target=o;break}}}function Qte(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}const Qqe=Zte;var Jte=32,Qg=7;function Jqe(t){for(var e=0;t>=Jte;)e|=t&1,t>>=1;return t+e}function M6(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;eKe(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function eKe(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function O6(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var a=t[r],o=e,s=r,l;o<s;)l=o+s>>>1,i(a,t[l])<0?s=l:o=l+1;var u=r-o;switch(u){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:for(;u>0;)t[o+u]=t[o+u-1],u--}t[o]=a}}function vA(t,e,n,r,i,a){var o=0,s=0,l=1;if(a(t,e[n+i])>0){for(s=r-i;l<s&&a(t,e[n+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(t,e[n+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[n+c])>0?o=c+1:l=c}return l}function gA(t,e,n,r,i,a){var o=0,s=0,l=1;if(a(t,e[n+i])<0){for(s=i+1;l<s&&a(t,e[n+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}else{for(s=r-i;l<s&&a(t,e[n+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[n+c])<0?l=c:o=c+1}return l}function tKe(t,e){var n=Qg,r,i,a=0;t.length;var o=[];r=[],i=[];function s(d,p){r[a]=d,i[a]=p,a+=1}function l(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=r[d],v=i[d],m=r[d+1],g=i[d+1];i[d]=v+g,d===a-3&&(r[d+1]=r[d+2],i[d+1]=i[d+2]),a--;var y=gA(t[m],t,p,v,0,e);p+=y,v-=y,v!==0&&(g=vA(t[p+v-1],t,m,g,g-1,e),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)o[g]=t[d+g];var y=0,x=v,w=d;if(t[w++]=t[x++],--m===0){for(g=0;g<p;g++)t[w+g]=o[y+g];return}if(p===1){for(g=0;g<m;g++)t[w+g]=t[x+g];t[w+m]=o[y];return}for(var b=n,C,S,D;;){C=0,S=0,D=!1;do if(e(t[x],o[y])<0){if(t[w++]=t[x++],S++,C=0,--m===0){D=!0;break}}else if(t[w++]=o[y++],C++,S=0,--p===1){D=!0;break}while((C|S)<b);if(D)break;do{if(C=gA(t[x],o,y,p,0,e),C!==0){for(g=0;g<C;g++)t[w+g]=o[y+g];if(w+=C,y+=C,p-=C,p<=1){D=!0;break}}if(t[w++]=t[x++],--m===0){D=!0;break}if(S=vA(o[y],t,x,m,0,e),S!==0){for(g=0;g<S;g++)t[w+g]=t[x+g];if(w+=S,x+=S,m-=S,m===0){D=!0;break}}if(t[w++]=o[y++],--p===1){D=!0;break}b--}while(C>=Qg||S>=Qg);if(D)break;b<0&&(b=0),b+=2}if(n=b,n<1&&(n=1),p===1){for(g=0;g<m;g++)t[w+g]=t[x+g];t[w+m]=o[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)t[w+g]=o[y+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)o[g]=t[v+g];var y=d+p-1,x=m-1,w=v+m-1,b=0,C=0;if(t[w--]=t[y--],--p===0){for(b=w-(m-1),g=0;g<m;g++)t[b+g]=o[g];return}if(m===1){for(w-=p,y-=p,C=w+1,b=y+1,g=p-1;g>=0;g--)t[C+g]=t[b+g];t[w]=o[x];return}for(var S=n;;){var D=0,_=0,T=!1;do if(e(o[x],t[y])<0){if(t[w--]=t[y--],D++,_=0,--p===0){T=!0;break}}else if(t[w--]=o[x--],_++,D=0,--m===1){T=!0;break}while((D|_)<S);if(T)break;do{if(D=p-gA(o[x],t,d,p,p-1,e),D!==0){for(w-=D,y-=D,p-=D,C=w+1,b=y+1,g=D-1;g>=0;g--)t[C+g]=t[b+g];if(p===0){T=!0;break}}if(t[w--]=o[x--],--m===1){T=!0;break}if(_=m-vA(t[y],o,0,m,m-1,e),_!==0){for(w-=_,x-=_,m-=_,C=w+1,b=x+1,g=0;g<_;g++)t[C+g]=o[b+g];if(m<=1){T=!0;break}}if(t[w--]=t[y--],--p===0){T=!0;break}S--}while(D>=Qg||_>=Qg);if(T)break;S<0&&(S=0),S+=2}if(n=S,n<1&&(n=1),m===1){for(w-=p,y-=p,C=w+1,b=y+1,g=p-1;g>=0;g--)t[C+g]=t[b+g];t[w]=o[x]}else{if(m===0)throw new Error;for(b=w-(m-1),g=0;g<m;g++)t[b+g]=o[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Pb(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var a=0;if(i<Jte){a=M6(t,n,r,e),O6(t,n,r,n+a,e);return}var o=tKe(t,e),s=Jqe(i);do{if(a=M6(t,n,r,e),a<s){var l=i;l>s&&(l=s),O6(t,n,n+l,n+a,e),a=l}o.pushRun(n,a),o.mergeRuns(),i-=a,n+=a}while(i!==0);o.forceMergeRuns()}}var Fa=1,km=2,sp=4,P6=!1;function mA(){P6||(P6=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function F6(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var nKe=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=F6}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,a=n.length;i<a;i++)this._updateAndAddDisplayable(n[i],null,e);r.length=this._displayListLen,Pb(r,F6)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),n.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var u=s[l];e.__dirty&&(u.__dirty|=Fa),this._updateAndAddDisplayable(u,n,r)}e.__dirty=0}else{var c=e;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(mA(),c.z=0),isNaN(c.z2)&&(mA(),c.z2=0),isNaN(c.zlevel)&&(mA(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,n,r);var d=e.getTextContent();d&&this._updateAndAddDisplayable(d,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var i=kt(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();const rKe=nKe;var ene;ene=St.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};const cR=ene;var Fb={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-Fb.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?Fb.bounceIn(t*2)*.5:Fb.bounceOut(t*2-1)*.5+.5}};const tne=Fb;var Aw=Math.pow,Ic=Math.sqrt,E2=1e-8,nne=1e-4,L6=Ic(3),Nw=1/3,nl=Ad(),bo=Ad(),tv=Ad();function uc(t){return t>-E2&&t<E2}function rne(t){return t>E2||t<-E2}function Tr(t,e,n,r,i){var a=1-i;return a*a*(a*t+3*i*e)+i*i*(i*r+3*a*n)}function z6(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)}function A2(t,e,n,r,i,a){var o=r+3*(e-n)-t,s=3*(n-e*2+t),l=3*(e-t),u=t-i,c=s*s-3*o*l,f=s*l-9*o*u,h=l*l-3*s*u,d=0;if(uc(c)&&uc(f))if(uc(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[d++]=p)}else{var v=f*f-4*c*h;if(uc(v)){var m=f/c,p=-s/o+m,g=-m/2;p>=0&&p<=1&&(a[d++]=p),g>=0&&g<=1&&(a[d++]=g)}else if(v>0){var y=Ic(v),x=c*s+1.5*o*(-f+y),w=c*s+1.5*o*(-f-y);x<0?x=-Aw(-x,Nw):x=Aw(x,Nw),w<0?w=-Aw(-w,Nw):w=Aw(w,Nw);var p=(-s-(x+w))/(3*o);p>=0&&p<=1&&(a[d++]=p)}else{var b=(2*c*s-3*o*f)/(2*Ic(c*c*c)),C=Math.acos(b)/3,S=Ic(c),D=Math.cos(C),p=(-s-2*S*D)/(3*o),g=(-s+S*(D+L6*Math.sin(C)))/(3*o),_=(-s+S*(D-L6*Math.sin(C)))/(3*o);p>=0&&p<=1&&(a[d++]=p),g>=0&&g<=1&&(a[d++]=g),_>=0&&_<=1&&(a[d++]=_)}}return d}function ine(t,e,n,r,i){var a=6*n-12*e+6*t,o=9*e+3*r-3*t-9*n,s=3*e-3*t,l=0;if(uc(o)){if(rne(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(uc(c))i[0]=-a/(2*o);else if(c>0){var f=Ic(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function qc(t,e,n,r,i,a){var o=(e-t)*i+t,s=(n-e)*i+e,l=(r-n)*i+n,u=(s-o)*i+o,c=(l-s)*i+s,f=(c-u)*i+u;a[0]=t,a[1]=o,a[2]=u,a[3]=f,a[4]=f,a[5]=c,a[6]=l,a[7]=r}function iKe(t,e,n,r,i,a,o,s,l,u,c){var f,h=.005,d=1/0,p,v,m,g;nl[0]=l,nl[1]=u;for(var y=0;y<1;y+=.05)bo[0]=Tr(t,n,i,o,y),bo[1]=Tr(e,r,a,s,y),m=Th(nl,bo),m<d&&(f=y,d=m);d=1/0;for(var x=0;x<32&&!(h<nne);x++)p=f-h,v=f+h,bo[0]=Tr(t,n,i,o,p),bo[1]=Tr(e,r,a,s,p),m=Th(bo,nl),p>=0&&m<d?(f=p,d=m):(tv[0]=Tr(t,n,i,o,v),tv[1]=Tr(e,r,a,s,v),g=Th(tv,nl),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=Tr(t,n,i,o,f),c[1]=Tr(e,r,a,s,f)),Ic(d)}function aKe(t,e,n,r,i,a,o,s,l){for(var u=t,c=e,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=Tr(t,n,i,o,p),m=Tr(e,r,a,s,p),g=v-u,y=m-c;f+=Math.sqrt(g*g+y*y),u=v,c=m}return f}function yi(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function B6(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function oKe(t,e,n,r,i){var a=t-2*e+n,o=2*(e-t),s=t-r,l=0;if(uc(a)){if(rne(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(uc(c)){var u=-o/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=Ic(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function ane(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function N2(t,e,n,r,i){var a=(e-t)*r+t,o=(n-e)*r+e,s=(o-a)*r+a;i[0]=t,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function sKe(t,e,n,r,i,a,o,s,l){var u,c=.005,f=1/0;nl[0]=o,nl[1]=s;for(var h=0;h<1;h+=.05){bo[0]=yi(t,n,i,h),bo[1]=yi(e,r,a,h);var d=Th(nl,bo);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<nne);p++){var v=u-c,m=u+c;bo[0]=yi(t,n,i,v),bo[1]=yi(e,r,a,v);var d=Th(bo,nl);if(v>=0&&d<f)u=v,f=d;else{tv[0]=yi(t,n,i,m),tv[1]=yi(e,r,a,m);var g=Th(tv,nl);m<=1&&g<f?(u=m,f=g):c*=.5}}return l&&(l[0]=yi(t,n,i,u),l[1]=yi(e,r,a,u)),Ic(f)}function lKe(t,e,n,r,i,a,o){for(var s=t,l=e,u=0,c=1/o,f=1;f<=o;f++){var h=f*c,d=yi(t,n,i,h),p=yi(e,r,a,h),v=d-s,m=p-l;u+=Math.sqrt(v*v+m*m),s=d,l=p}return u}var uKe=/cubic-bezier\(([0-9,\.e ]+)\)/;function M3(t){var e=t&&uKe.exec(t);if(e){var n=e[1].split(","),r=+ys(n[0]),i=+ys(n[1]),a=+ys(n[2]),o=+ys(n[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:A2(0,r,a,1,l,s)&&Tr(0,i,o,1,s[0])}}}var cKe=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||ti,this.ondestroy=e.ondestroy||ti,this.onrestart=e.onrestart||ti,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=lt(e)?e:tne[e]||M3(e)},t}();const fKe=cKe;var one=function(){function t(e){this.value=e}return t}(),hKe=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new one(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),dKe=function(){function t(e){this._list=new hKe,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=n:s=new one(n),s.key=e,r.insertEntry(s),i[e]=s}return a},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}();const Sx=dKe;var V6={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Es(t){return t=Math.round(t),t<0?0:t>255?255:t}function pKe(t){return t=Math.round(t),t<0?0:t>360?360:t}function oy(t){return t<0?0:t>1?1:t}function yA(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Es(parseFloat(e)/100*255):Es(parseInt(e,10))}function Eh(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?oy(parseFloat(e)/100):oy(parseFloat(e))}function xA(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function cc(t,e,n){return t+(e-t)*n}function fo(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function fR(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var sne=new Sx(20),kw=null;function Bd(t,e){kw&&fR(kw,e),kw=sne.put(t,kw||e.slice())}function ba(t,e){if(t){e=e||[];var n=sne.get(t);if(n)return fR(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in V6)return fR(e,V6[r]),Bd(t,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){fo(e,0,0,0,1);return}return fo(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Bd(t,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){fo(e,0,0,0,1);return}return fo(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Bd(t,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),u=r.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?fo(e,+u[0],+u[1],+u[2],1):fo(e,0,0,0,1);c=Eh(u.pop());case"rgb":if(u.length>=3)return fo(e,yA(u[0]),yA(u[1]),yA(u[2]),u.length===3?c:Eh(u[3])),Bd(t,e),e;fo(e,0,0,0,1);return;case"hsla":if(u.length!==4){fo(e,0,0,0,1);return}return u[3]=Eh(u[3]),hR(u,e),Bd(t,e),e;case"hsl":if(u.length!==3){fo(e,0,0,0,1);return}return hR(u,e),Bd(t,e),e;default:return}}fo(e,0,0,0,1)}}function hR(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=Eh(t[1]),i=Eh(t[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],fo(e,Es(xA(o,a,n+1/3)*255),Es(xA(o,a,n)*255),Es(xA(o,a,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function vKe(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-e)/6+o/2)/o,f=((a-n)/6+o/2)/o,h=((a-r)/6+o/2)/o;e===a?l=h-f:n===a?l=1/3+c-h:r===a&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return t[3]!=null&&d.push(t[3]),d}}function dR(t,e){var n=ba(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return vf(n,n.length===4?"rgba":"rgb")}}function gKe(t){var e=ba(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function lne(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],l=r-i;return n[0]=Es(cc(o[0],s[0],l)),n[1]=Es(cc(o[1],s[1],l)),n[2]=Es(cc(o[2],s[2],l)),n[3]=oy(cc(o[3],s[3],l)),n}}var mKe=lne;function O3(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=ba(e[i]),s=ba(e[a]),l=r-i,u=vf([Es(cc(o[0],s[0],l)),Es(cc(o[1],s[1],l)),Es(cc(o[2],s[2],l)),oy(cc(o[3],s[3],l))],"rgba");return n?{color:u,leftIndex:i,rightIndex:a,value:r}:u}}var yKe=O3;function xKe(t,e,n,r){var i=ba(t);if(t)return i=vKe(i),e!=null&&(i[0]=pKe(e)),n!=null&&(i[1]=Eh(n)),r!=null&&(i[2]=Eh(r)),vf(hR(i),"rgba")}function wKe(t,e){var n=ba(t);if(n&&e!=null)return n[3]=oy(e),vf(n,"rgba")}function vf(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function sy(t,e){var n=ba(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}function bKe(){return vf([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}const CKe=Object.freeze(Object.defineProperty({__proto__:null,fastLerp:lne,fastMapToColor:mKe,lerp:O3,lift:dR,lum:sy,mapToColor:yKe,modifyAlpha:wKe,modifyHSL:xKe,parse:ba,random:bKe,stringify:vf,toHex:gKe},Symbol.toStringTag,{value:"Module"}));var k2=Math.round;function ly(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=ba(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e??1}}var W6=1e-4;function fc(t){return t<W6&&t>-W6}function Iw(t){return k2(t*1e3)/1e3}function pR(t){return k2(t*1e4)/1e4}function SKe(t){return"matrix("+Iw(t[0])+","+Iw(t[1])+","+Iw(t[2])+","+Iw(t[3])+","+pR(t[4])+","+pR(t[5])+")"}var DKe={left:"start",right:"end",center:"middle",middle:"middle"};function _Ke(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function TKe(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function EKe(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function une(t){return t&&!!t.image}function AKe(t){return t&&!!t.svgElement}function P3(t){return une(t)||AKe(t)}function cne(t){return t.type==="linear"}function fne(t){return t.type==="radial"}function hne(t){return t&&(t.type==="linear"||t.type==="radial")}function tT(t){return"url(#"+t+")"}function dne(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function pne(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*t0,i=wt(t.scaleX,1),a=wt(t.scaleY,1),o=t.skewX||0,s=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+k2(o*t0)+"deg, "+k2(s*t0)+"deg)"),l.join(" ")}var NKe=function(){return St.hasGlobalWindow&&lt(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),vR=Array.prototype.slice;function jl(t,e,n){return(e-t)*n+t}function wA(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=jl(e[a],n[a],r);return t}function kKe(t,e,n,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=jl(e[o][s],n[o][s],r)}return t}function Rw(t,e,n,r){for(var i=e.length,a=0;a<i;a++)t[a]=e[a]+n[a]*r;return t}function U6(t,e,n,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=e[o][s]+n[o][s]*r}return t}function IKe(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,a=Math.min(n,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(n,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function RKe(t,e,n){var r=t,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(n===1?i[l]:vR.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function Lb(t){if(Xi(t)){var e=t.length;if(Xi(t[0])){for(var n=[],r=0;r<e;r++)n.push(vR.call(t[r]));return n}return vR.call(t)}return t}function zb(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function $Ke(t){return Xi(t&&t[0])?2:1}var $w=0,Bb=1,vne=2,Im=3,gR=4,mR=5,G6=6;function H6(t){return t===gR||t===mR}function Mw(t){return t===Bb||t===vne}var Jg=[0,0,0,0],MKe=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=G6,l=n;if(Xi(n)){var u=$Ke(n);s=u,(u===1&&!Zt(n[0])||u===2&&!Zt(n[0][0]))&&(o=!0)}else if(Zt(n)&&!ay(n))s=$w;else if(Be(n))if(!isNaN(+n))s=$w;else{var c=ba(n);c&&(l=c,s=Im)}else if(yx(n)){var f=De({},l);f.colorStops=$e(n.colorStops,function(d){return{offset:d.offset,color:ba(d.color)}}),cne(n)?s=gR:fne(n)&&(s=mR),l=f}a===0?this.valType=s:(s!==this.valType||s===G6)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:l,rawValue:n,percent:0};return r&&(h.easing=r,h.easingFunc=lt(r)?r:tne[r]||M3(r)),i.push(h),h},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(v,m){return v.time-m.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=Mw(i),u=H6(i),c=0;c<a;c++){var f=r[c],h=f.value,d=o.value;f.percent=f.time/e,s||(l&&c!==a-1?RKe(h,d,i):u&&IKe(h.colorStops,d.colorStops))}if(!s&&i!==mR&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var p=r[0].value,c=0;c<a;c++)i===$w?r[c].additiveValue=r[c].value-p:i===Im?r[c].additiveValue=Rw([],r[c].value,p,-1):Mw(i)&&(r[c].additiveValue=i===Bb?Rw([],r[c].value,p,-1):U6([],r[c].value,p,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===Im,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=o[0];else{if(n<0)c=0;else if(n<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(o[c].percent<=n);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(o[c].percent>n);c++);c=h(c-1,s-2)}p=o[c+1],d=o[c]}if(d&&p){this._lastFr=c,this._lastFrP=n;var m=p.percent-d.percent,g=m===0?1:h((n-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var y=r?this._additiveValue:u?Jg:e[l];if((Mw(a)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)e[l]=g<1?d.rawValue:p.rawValue;else if(Mw(a))a===Bb?wA(y,d[i],p[i],g):kKe(y,d[i],p[i],g);else if(H6(a)){var x=d[i],w=p[i],b=a===gR;e[l]={type:b?"linear":"radial",x:jl(x.x,w.x,g),y:jl(x.y,w.y,g),colorStops:$e(x.colorStops,function(S,D){var _=w.colorStops[D];return{offset:jl(S.offset,_.offset,g),color:zb(wA([],S.color,_.color,g))}}),global:w.global},b?(e[l].x2=jl(x.x2,w.x2,g),e[l].y2=jl(x.y2,w.y2,g)):e[l].r=jl(x.r,w.r,g)}else if(u)wA(y,d[i],p[i],g),r||(e[l]=zb(y));else{var C=jl(d[i],p[i],g);r?this._additiveValue=C:e[l]=C}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,i=this._additiveValue;n===$w?e[r]=e[r]+i:n===Im?(ba(e[r],Jg),Rw(Jg,Jg,i,1),e[r]=zb(Jg)):n===Bb?Rw(e[r],e[r],i,1):n===vne&&U6(e[r],e[r],i,1)},t}(),OKe=function(){function t(e,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&i){Q_("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,Ot(n),r)},t.prototype.whenWithKeys=function(e,n,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new MKe(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Im&&u&&(u=zb(u))}else u=this._target[s];if(u==null)continue;e>0&&l.addKeyframe(0,Lb(u),i),this._trackKeys.push(s)}l.addKeyframe(e,Lb(n[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(n=a)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(n._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new fKe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){n._started=2;var p=n._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(n._additiveAnimators=null)}for(var m=0;m<r.length;m++)r[m].step(n._target,d);var g=n._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](n._target,d)},ondestroy:function(){n._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return $e(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(n?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var a=n[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=Lb(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||Ot(e);for(var r=0;r<n.length;r++){var i=n[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},t}();const F3=OKe;function $p(){return new Date().getTime()}var PKe=function(t){an(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=$p()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(cR(r),!n._paused&&n.update())}cR(r)},e.prototype.start=function(){this._running||(this._time=$p(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=$p(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=$p()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var i=new F3(n,r.loop);return this.addAnimator(i),i},e}(Fs);const FKe=PKe;var LKe=300,bA=St.domSupported,CA=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=$e(t,function(i){var a=i.replace("mouse","pointer");return n.hasOwnProperty(a)?a:i});return{mouse:t,touch:e,pointer:r}}(),j6={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},q6=!1;function yR(t){var e=t.pointerType;return e==="pen"||e==="touch"}function zKe(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function SA(t){t&&(t.zrByTouch=!0)}function BKe(t,e){return go(t.dom,new VKe(t,e),!0)}function gne(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var VKe=function(){function t(e,n){this.stopPropagation=ti,this.stopImmediatePropagation=ti,this.preventDefault=ti,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),as={mousedown:function(t){t=go(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=go(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=go(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=go(this.dom,t);var e=t.toElement||t.relatedTarget;gne(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){q6=!0,t=go(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){q6||(t=go(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=go(this.dom,t),SA(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),as.mousemove.call(this,t),as.mousedown.call(this,t)},touchmove:function(t){t=go(this.dom,t),SA(t),this.handler.processGesture(t,"change"),as.mousemove.call(this,t)},touchend:function(t){t=go(this.dom,t),SA(t),this.handler.processGesture(t,"end"),as.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<LKe&&as.click.call(this,t)},pointerdown:function(t){as.mousedown.call(this,t)},pointermove:function(t){yR(t)||as.mousemove.call(this,t)},pointerup:function(t){as.mouseup.call(this,t)},pointerout:function(t){yR(t)||as.mouseout.call(this,t)}};G(["click","dblclick","contextmenu"],function(t){as[t]=function(e){e=go(this.dom,e),this.trigger(t,e)}});var xR={pointermove:function(t){yR(t)||xR.mousemove.call(this,t)},pointerup:function(t){xR.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function WKe(t,e){var n=e.domHandlers;St.pointerEventsSupported?G(CA.pointer,function(r){Vb(e,r,function(i){n[r].call(t,i)})}):(St.touchEventsSupported&&G(CA.touch,function(r){Vb(e,r,function(i){n[r].call(t,i),zKe(e)})}),G(CA.mouse,function(r){Vb(e,r,function(i){i=R3(i),e.touching||n[r].call(t,i)})}))}function UKe(t,e){St.pointerEventsSupported?G(j6.pointer,n):St.touchEventsSupported||G(j6.mouse,n);function n(r){function i(a){a=R3(a),gne(t,a.target)||(a=BKe(t,a),e.domHandlers[r].call(t,a))}Vb(e,r,i,{capture:!0})}}function Vb(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,uR(t.domTarget,e,n,r)}function DA(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&Bqe(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var K6=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),GKe=function(t){an(e,t);function e(n,r){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new K6(n,as),bA&&(i._globalHandlerScope=new K6(document,xR)),WKe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){DA(this._localHandlerScope),bA&&DA(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,bA&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?UKe(this,r):DA(r)}},e}(Fs);const HKe=GKe;var mne=1;St.hasGlobalWindow&&(mne=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var I2=mne,wR=.4,bR="#333",CR="#ccc",jKe="#eee",X6=bx,Y6=5e-5;function _f(t){return t>Y6||t<-Y6}var Tf=[],Vd=[],_A=nd(),TA=Math.abs,qKe=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return _f(this.rotation)||_f(this.x)||_f(this.y)||_f(this.scaleX-1)||_f(this.scaleY-1)||_f(this.skewX)||_f(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(X6(r),this.invTransform=null);return}r=r||nd(),n?this.getLocalTransform(r):X6(r),e&&(n?kc(r,e,r):$3(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(Tf);var r=Tf[0]<0?-1:1,i=Tf[1]<0?-1:1,a=((Tf[0]-r)*n+r)/Tf[0]||0,o=((Tf[1]-i)*n+i)/Tf[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||nd(),Cx(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),n=Math.sqrt(n),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(kc(Vd,e.invTransform,n),n=Vd);var r=this.originX,i=this.originY;(r||i)&&(_A[4]=r,_A[5]=i,kc(Vd,n,_A),Vd[4]-=r,Vd[5]-=i,n=Vd),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],i=this.invTransform;return i&&Hi(r,r,i),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],i=this.transform;return i&&Hi(r,r,i),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&TA(e[0]-1)>1e-10&&TA(e[3]-1)>1e-10?Math.sqrt(TA(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){yne(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,f=e.y,h=e.skewX?Math.tan(e.skewX):0,d=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var p=r+s,v=i+l;n[4]=-p*a-h*v*o,n[5]=-v*o-d*p*a}else n[4]=n[5]=0;return n[0]=a,n[3]=o,n[1]=d*a,n[2]=h*o,u&&eT(n,n,u),n[4]+=r+c,n[5]+=i+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),uy=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function yne(t,e){for(var n=0;n<uy.length;n++){var r=uy[n];t[r]=e[r]}}const nT=qKe;var Z6={};function Ha(t,e){e=e||jc;var n=Z6[e];n||(n=Z6[e]=new Sx(500));var r=n.get(t);return r==null&&(r=wu.measureText(t,e).width,n.put(t,r)),r}function Q6(t,e,n,r){var i=Ha(t,e),a=iT(e),o=Rm(0,i,n),s=lp(0,a,r),l=new Et(o,s,i,a);return l}function rT(t,e,n,r){var i=((t||"")+"").split(`
`),a=i.length;if(a===1)return Q6(i[0],e,n,r);for(var o=new Et(0,0,0,0),s=0;s<i.length;s++){var l=Q6(i[s],e,n,r);s===0?o.copy(l):o.union(l)}return o}function Rm(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function lp(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function iT(t){return Ha("国",t)}function Kc(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function R2(t,e,n){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=n.height,o=n.width,s=a/2,l=n.x,u=n.y,c="left",f="top";if(r instanceof Array)l+=Kc(r[0],n.width),u+=Kc(r[1],n.height),c=null,f=null;else switch(r){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+o,u+=s,f="middle";break;case"top":l+=o/2,u-=i,c="center",f="bottom";break;case"bottom":l+=o/2,u+=a+i,c="center";break;case"inside":l+=o/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=o-i,u+=s,c="right",f="middle";break;case"insideTop":l+=o/2,u+=i,c="center";break;case"insideBottom":l+=o/2,u+=a-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=o-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,f="bottom";break;case"insideBottomRight":l+=o-i,u+=a-i,c="right",f="bottom";break}return t=t||{},t.x=l,t.y=u,t.align=c,t.verticalAlign=f,t}var EA="__zr_normal__",AA=uy.concat(["ignore"]),KKe=_l(uy,function(t,e){return t[e]=!0,t},{ignore:!1}),Wd={},XKe=new Et(0,0,0,0),L3=function(){function t(e){this.id=T3(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=n.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(n),r.position!=null){var c=XKe;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Wd,r,c):R2(Wd,r,c),a.x=Wd.x,a.y=Wd.y,o=Wd.align,s=Wd.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=Kc(f[0],c.width),d=Kc(f[1],c.height)),u=!0,a.originX=-a.x+h+(i?0:c.x),a.originY=-a.y+d+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,x=void 0;v&&this.canBeInsideText()?(g=r.insideFill,y=r.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),x=!0)):(g=r.outsideFill,y=r.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),x=!0)),g=g||"#000",(g!==m.fill||y!==m.stroke||x!==m.autoStroke||o!==m.align||s!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=y,m.autoStroke=x,m.align=o,m.verticalAlign=s,n.setDefaultTextStyle(m)),n.__dirty|=Fa,l&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?CR:bR},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&ba(n);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,vf(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},De(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(Ye(e))for(var r=e,i=Ot(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==EA)){var o=i.targetName,s=o?n[o]:n;i.saveTo(s)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,AA)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in n)&&(n[a]=this[a])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(EA,!1,e)},t.prototype.useState=function(e,n,r,i){var a=e===EA,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(kt(s,e)>=0&&(n||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!a){Q_("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(e,n,r,c),h&&h.useState(e,n,r,c),a?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Fa),u}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var f=i[o-1],h=!!(f&&f.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(e.join(","),d,this._normalState,!1,!n&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(e,n,h),m&&m.useStates(e,n,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Fa)}},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=kt(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var i=this.currentStates.slice(),a=kt(i,e),o=kt(i,n)>=0;a>=0?o?i.splice(a,1):i[a]=n:r&&!o&&i.push(n),this.useStates(i)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,i=0;i<e.length;i++){var a=e[i];De(n,a),a.textConfig&&(r=r||{},De(r,a.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,i,a,o){var s=!(n&&i);n&&n.textConfig?(this.textConfig=De({},i?this.textConfig:r.textConfig),De(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<AA.length;c++){var f=AA[c],h=a&&KKe[f];n&&n[f]!=null?h?(u=!0,l[f]=n[f]):this[f]=n[f]:s&&r[f]!=null&&(h?(u=!0,l[f]=r[f]):this[f]=r[f])}if(!a)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(n||r)[p]:n||r)}u&&this._transitionState(e,l,o)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new nT,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),De(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=Fa;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var i=e?this[e]:this,a=new F3(i,n,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},t.prototype.addAnimator=function(e,n){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(n)}).done(function(){var a=i.animators,o=kt(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(n):a.push(s)}return this.animators=a,this},t.prototype.animateTo=function(e,n,r){NA(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){NA(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,i){for(var a=NA(this,n,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Fa;function n(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(c){l[o]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();Ko(L3,Fs);Ko(L3,nT);function NA(t,e,n,r,i){n=n||{};var a=[];xne(t,"",t,e,n,r,a,i);var o=a.length,s=!1,l=n.done,u=n.aborted,c=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},f=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&n.during&&a[0].during(function(p,v){n.during(v)});for(var h=0;h<a.length;h++){var d=a[h];c&&d.done(c),f&&d.aborted(f),n.force&&d.duration(n.duration),d.start(n.easing)}return a}function kA(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function YKe(t){return Xi(t[0])}function ZKe(t,e,n){if(Xi(e[n]))if(Xi(t[n])||(t[n]=[]),Na(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),kA(t[n],e[n],r))}else{var i=e[n],a=t[n],o=i.length;if(YKe(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?kA(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else kA(a,i,o);a.length=i.length}else t[n]=e[n]}function QKe(t,e){return t===e||Xi(t)&&Xi(e)&&JKe(t,e)}function JKe(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function xne(t,e,n,r,i,a,o,s){for(var l=Ot(r),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Ye(a),p=t.animators,v=[],m=0;m<l.length;m++){var g=l[m],y=r[g];if(y!=null&&n[g]!=null&&(d||a[g]))if(Ye(y)&&!Xi(y)&&!yx(y)){if(e){s||(n[g]=y,t.updateDuringAnimation(e));continue}xne(t,g,n[g],y,i,a&&a[g],o,s)}else v.push(g);else s||(n[g]=y,t.updateDuringAnimation(e),v.push(g))}var x=v.length;if(!f&&x)for(var w=0;w<p.length;w++){var b=p[w];if(b.targetName===e){var C=b.stopTracks(v);if(C){var S=kt(p,b);p.splice(S,1)}}}if(i.force||(v=Un(v,function(E){return!QKe(r[E],n[E])}),x=v.length),x>0||i.force&&!o.length){var D=void 0,_=void 0,T=void 0;if(s){_={},h&&(D={});for(var w=0;w<x;w++){var g=v[w];_[g]=n[g],h?D[g]=r[g]:n[g]=r[g]}}else if(h){T={};for(var w=0;w<x;w++){var g=v[w];T[g]=Lb(n[g]),ZKe(n,r,g)}}var b=new F3(n,!1,!1,f?Un(p,function(A){return A.targetName===e}):null);b.targetName=e,i.scope&&(b.scope=i.scope),h&&D&&b.whenWithKeys(0,D,v),T&&b.whenWithKeys(0,T,v),b.whenWithKeys(u??500,s?_:r,v).delay(c||0),t.addAnimator(b,e),o.push(b)}}const wne=L3;var bne=function(t){an(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var i=kt(this._children,n);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(n,r){var i=this._children,a=i[r];if(n&&n!==this&&n.parent!==this&&n!==a){i[r]=n,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,i=this._children,a=kt(i,n);return a<0?this:(i.splice(a,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var a=n[i];r&&a.removeSelfFromZr(r),a.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];n.call(r,o,a)}return this},e.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=n.call(r,a);a.isGroup&&!o&&a.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new Et(0,0,0,0),i=n||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(Et.applyTransform(r,u,c),o=o||r.clone(),o.union(r)):(o=o||u.clone(),o.union(u))}}return o||r},e}(wne);bne.prototype.type="group";const sr=bne;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Wb={},dh={};function eXe(t){delete dh[t]}function tXe(t){if(!t)return!1;if(typeof t=="string")return sy(t,1)<wR;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=sy(e[i].color,1);return n/=r,n<wR}return!1}var nXe=function(){function t(e,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var a=new rKe,o=r.renderer||"canvas";Wb[o]||(o=Ot(Wb)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new Wb[o](n,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!St.node&&!St.worker&&!l?new HKe(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?St.touchEventsSupported:!!c,h=44,d;f&&(d=wt(r.pointerSize,h)),this.handler=new Qqe(a,s,u,s.root,d),this.animation=new FKe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh()},t.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=tXe(e)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(e){var n,r=$p();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=$p();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},t.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this.handler.off(e,n)},t.prototype.trigger=function(e,n){this.handler.trigger(e,n)},t.prototype.clear=function(){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof sr&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,eXe(this.id)},t}();function SR(t,e){var n=new nXe(T3(),t,e);return dh[n.id]=n,n}function rXe(t){t.dispose()}function iXe(){for(var t in dh)dh.hasOwnProperty(t)&&dh[t].dispose();dh={}}function aXe(t){return dh[t]}function Cne(t,e){Wb[t]=e}var oXe="5.4.4";const sXe=Object.freeze(Object.defineProperty({__proto__:null,dispose:rXe,disposeAll:iXe,getInstance:aXe,init:SR,registerPainter:Cne,version:oXe},Symbol.toStringTag,{value:"Module"}));var J6=1e-4,Sne=20;function lXe(t){return t.replace(/^\s+|\s+$/g,"")}function Ql(t,e,n,r){var i=e[0],a=e[1],o=n[0],s=n[1],l=a-i,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(r)if(l>0){if(t<=i)return o;if(t>=a)return s}else{if(t>=i)return o;if(t<=a)return s}else{if(t===i)return o;if(t===a)return s}return(t-i)/l*u+o}function En(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return Be(t)?lXe(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function ar(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),Sne),t=(+t).toFixed(e),n?t:+t}function Dne(t){return t.sort(function(e,n){return e-n}),t}function ol(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return _ne(t)}function _ne(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,i=n>0?n:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function z3(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),a=Math.round(n(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function uXe(t,e,n){if(!t[e])return 0;var r=Tne(t,n);return r[e]||0}function Tne(t,e){var n=_l(t,function(d,p){return d+(isNaN(p)?0:p)},0);if(n===0)return[];for(var r=Math.pow(10,e),i=$e(t,function(d){return(isNaN(d)?0:d)/n*r*100}),a=r*100,o=$e(i,function(d){return Math.floor(d)}),s=_l(o,function(d,p){return d+p},0),l=$e(i,function(d,p){return d-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,f=0,h=l.length;f<h;++f)l[f]>u&&(u=l[f],c=f);++o[c],l[c]=0,++s}return $e(o,function(d){return d/r})}function cXe(t,e){var n=Math.max(ol(t),ol(e)),r=t+e;return n>Sne?r:ar(r,n)}var fXe=9007199254740991;function B3(t){var e=Math.PI*2;return(t%e+e)%e}function cy(t){return t>-J6&&t<J6}var hXe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Bo(t){if(t instanceof Date)return t;if(Be(t)){var e=hXe.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function Ene(t){return Math.pow(10,aT(t))}function aT(t){if(t===0)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function V3(t,e){var n=aT(t),r=Math.pow(10,n),i=t/r,a;return e?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,t=a*r,n>=-20?+t.toFixed(n<0?-n:0):t}function dXe(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i}function pXe(t){t.sort(function(l,u){return s(l,u,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,a=t[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-n),e=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!==1?t.splice(r,1):r++}return t;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function fy(t){var e=parseFloat(t);return e==t&&(e!==0||!Be(t)||t.indexOf("x")<=0)?e:NaN}function Ane(t){return!isNaN(fy(t))}function Nne(){return Math.round(Math.random()*9)}function kne(t,e){return e===0?t:kne(e,t%e)}function eV(t,e){return t==null?e:e==null?t:t*e/kne(t,e)}function sa(t){throw new Error(t)}function tV(t,e,n){return(e-t)*n+t}var Ine="series\0",Rne="\0_ec_\0";function xr(t){return t instanceof Array?t:t==null?[]:[t]}function DR(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var nV=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Dx(t){return Ye(t)&&!Me(t)&&!(t instanceof Date)?t.value:t}function vXe(t){return Ye(t)&&!(t instanceof Array)}function gXe(t,e,n){var r=n==="normalMerge",i=n==="replaceMerge",a=n==="replaceAll";t=t||[],e=(e||[]).slice();var o=ut();G(e,function(l,u){if(!Ye(l)){e[u]=null;return}});var s=mXe(t,o,n);return(r||i)&&yXe(s,t,o,e),r&&xXe(s,e),r||i?wXe(s,e,i):a&&bXe(s,e),CXe(s),s}function mXe(t,e,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<t.length;i++){var a=t[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:n==="replaceMerge"||hy(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function yXe(t,e,n,r){G(r,function(i,a){if(!(!i||i.id==null)){var o=r0(i.id),s=n.get(o);if(s!=null){var l=t[s];Ya(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],r[a]=null}}})}function xXe(t,e){G(e,function(n,r){if(!(!n||n.name==null))for(var i=0;i<t.length;i++){var a=t[i].existing;if(!t[i].newOption&&a&&(a.id==null||n.id==null)&&!hy(n)&&!hy(a)&&$ne("name",a,n)){t[i].newOption=n,e[r]=null;return}}})}function wXe(t,e,n){G(e,function(r){if(r){for(var i,a=0;(i=t[a])&&(i.newOption||hy(i.existing)||i.existing&&r.id!=null&&!$ne("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),a++}})}function bXe(t,e){G(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function CXe(t){var e=ut();G(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),G(t,function(n){var r=n.newOption;Ya(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),G(t,function(n,r){var i=n.existing,a=n.newOption,o=n.keyInfo;if(Ye(a)){if(o.name=a.name!=null?r0(a.name):i?i.name:Ine+r,i)o.id=r0(i.id);else if(a.id!=null)o.id=r0(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,n)}})}function $ne(t,e,n){var r=yl(e[t],null),i=yl(n[t],null);return r!=null&&i!=null&&r===i}function r0(t){return yl(t,"")}function yl(t,e){return t==null?e:Be(t)?t:Zt(t)||C2(t)?t+"":e}function W3(t){var e=t.name;return!!(e&&e.indexOf(Ine))}function hy(t){return t&&t.id!=null&&r0(t.id).indexOf(Rne)===0}function SXe(t){return Rne+t}function DXe(t,e,n){G(t,function(r){var i=r.newOption;Ye(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=_Xe(e,i,r.existing,n))})}function _Xe(t,e,n,r){var i=e.type?e.type:n?n.subType:r.determineSubType(t,e);return i}function rd(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Me(e.dataIndex)?$e(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Me(e.name)?$e(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function Jn(){var t="__ec_inner_"+TXe++;return function(e){return e[t]||(e[t]={})}}var TXe=Nne();function i0(t,e,n){var r=U3(e,n),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=n?n.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var f=_x(t,c,u,{useDefault:l===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function U3(t,e){var n;if(Be(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var i=ut(),a={},o=!1;return G(n,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&kt(e.includeMainTypes,c)<0)){o=o||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Wi={useDefault:!0,enableAll:!1,enableNone:!1},EXe={useDefault:!1,enableAll:!0,enableNone:!0};function _x(t,e,n,r){r=r||Wi;var i=n.index,a=n.id,o=n.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=t.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(Ya(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Ya(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=t.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function Mne(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function AXe(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function NXe(t){return t==="auto"?St.domSupported?"html":"richText":t||"html"}function kXe(t,e,n,r,i){var a=e==null||e==="auto";if(r==null)return r;if(Zt(r)){var o=tV(n||0,r,i);return ar(o,a?Math.max(ol(n||0),ol(r)):e)}else{if(Be(r))return i<1?n:r;for(var s=[],l=n,u=r,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=t.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],o=tV(d,p,i);s[f]=ar(o,a?Math.max(ol(d),ol(p)):e)}}return s}}var IXe=".",Ef="___EC__COMPONENT__CONTAINER___",One="___EC__EXTENDED_CLASS___";function sl(t){var e={main:"",sub:""};if(t){var n=t.split(IXe);e.main=n[0]||"",e.sub=n[1]||""}return e}function RXe(t){Ya(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function $Xe(t){return!!(t&&t[One])}function G3(t,e){t.$constructor=t,t.extend=function(n){var r=this,i;return MXe(r)?i=function(a){He(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},E3(i,this)),De(i.prototype,n),i[One]=!0,i.extend=this.extend,i.superCall=FXe,i.superApply=LXe,i.superClass=r,i}}function MXe(t){return lt(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function Pne(t,e){t.extend=e.extend}var OXe=Math.round(Math.random()*10);function PXe(t){var e=["__\0is_clz",OXe++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function FXe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function LXe(t,e,n){return this.superClass.prototype[e].apply(t,n)}function oT(t){var e={};t.registerClass=function(r){var i=r.type||r.prototype.type;if(i){RXe(i),r.prototype.type=i;var a=sl(i);if(!a.sub)e[a.main]=r;else if(a.sub!==Ef){var o=n(a);o[a.sub]=r}}return r},t.getClass=function(r,i,a){var o=e[r];if(o&&o[Ef]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},t.getClassesByMainType=function(r){var i=sl(r),a=[],o=e[i.main];return o&&o[Ef]?G(o,function(s,l){l!==Ef&&a.push(s)}):a.push(o),a},t.hasClass=function(r){var i=sl(r);return!!e[i.main]},t.getAllClassMainTypes=function(){var r=[];return G(e,function(i,a){r.push(a)}),r},t.hasSubTypes=function(r){var i=sl(r),a=e[i.main];return a&&a[Ef]};function n(r){var i=e[r.main];return(!i||!i[Ef])&&(i=e[r.main]={},i[Ef]=!0),i}}function dy(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<t.length;s++){var l=t[s][1];if(!(i&&kt(i,l)>=0||a&&kt(a,l)<0)){var u=r.getShallow(l,e);u!=null&&(o[t[s][0]]=u)}}return o}}var zXe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],BXe=dy(zXe),VXe=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return BXe(this,e,n)},t}(),_R=new Sx(50);function WXe(t){if(typeof t=="string"){var e=_R.get(t);return e&&e.image}else return t}function H3(t,e,n,r,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var a=_R.get(t),o={hostEl:n,cb:r,cbPayload:i};return a?(e=a.image,!sT(e)&&a.pending.push(o)):(e=wu.loadImage(t,rV,rV),e.__zrImageSrc=t,_R.put(t,e.__cachedImgObj={image:e,pending:[o]})),e}else return t;else return e}function rV(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function sT(t){return t&&t.width&&t.height}var IA=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Fne(t,e,n,r,i){if(!e)return"";var a=(t+"").split(`
`);i=Lne(e,n,r,i);for(var o=0,s=a.length;o<s;o++)a[o]=zne(a[o],i);return a.join(`
`)}function Lne(t,e,n,r){r=r||{};var i=De({},r);i.font=e,n=wt(n,"..."),i.maxIterations=wt(r.maxIterations,2);var a=i.minChar=wt(r.minChar,0);i.cnCharWidth=Ha("国",e);var o=i.ascCharWidth=Ha("a",e);i.placeholder=wt(r.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<a&&s>=o;l++)s-=o;var u=Ha(n,e);return u>s&&(n="",u=0),s=t-u,i.ellipsis=n,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=t,i}function zne(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var a=Ha(t,r);if(a<=n)return t;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){t+=e.ellipsis;break}var s=o===0?UXe(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;t=t.substr(0,s),a=Ha(t,r)}return t===""&&(t=e.placeholder),t}function UXe(t,e,n,r){for(var i=0,a=0,o=t.length;a<o&&i<e;a++){var s=t.charCodeAt(a);i+=0<=s&&s<=127?n:r}return a}function GXe(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,i=e.font,a=n==="truncate",o=iT(i),s=wt(e.lineHeight,o),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=e.width,f;c!=null&&(n==="break"||n==="breakAll")?f=t?Bne(t,e.font,c,n==="breakAll",0).lines:[]:f=t?t.split(`
`):[];var h=f.length*s,d=wt(e.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(t&&a&&c!=null)for(var v=Lne(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),m=0;m<f.length;m++)f[m]=zne(f[m],v);for(var g=d,y=0,m=0;m<f.length;m++)y=Math.max(Ha(f[m],i),y);c==null&&(c=y);var x=y;return r&&(g+=r[0]+r[2],x+=r[1]+r[3],c+=r[1]+r[3]),l&&(x=c),{lines:f,height:d,outerWidth:x,outerHeight:g,lineHeight:s,calculatedLineHeight:o,contentWidth:y,contentHeight:h,width:c}}var HXe=function(){function t(){}return t}(),iV=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),jXe=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function qXe(t,e){var n=new jXe;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=IA.lastIndex=0,l;(l=IA.exec(t))!=null;){var u=l.index;u>s&&RA(n,t.substring(s,u),e,o),RA(n,l[2],e,o,l[1]),s=IA.lastIndex}s<t.length&&RA(n,t.substring(s,t.length),e,o);var c=[],f=0,h=0,d=e.padding,p=a==="truncate",v=e.lineOverflow==="truncate";function m(P,z,U){P.width=z,P.lineHeight=U,f+=U,h=Math.max(h,z)}e:for(var g=0;g<n.lines.length;g++){for(var y=n.lines[g],x=0,w=0,b=0;b<y.tokens.length;b++){var C=y.tokens[b],S=C.styleName&&e.rich[C.styleName]||{},D=C.textPadding=S.padding,_=D?D[1]+D[3]:0,T=C.font=S.font||e.font;C.contentHeight=iT(T);var E=wt(S.height,C.contentHeight);if(C.innerHeight=E,D&&(E+=D[0]+D[2]),C.height=E,C.lineHeight=Jp(S.lineHeight,e.lineHeight,E),C.align=S&&S.align||e.align,C.verticalAlign=S&&S.verticalAlign||"middle",v&&i!=null&&f+C.lineHeight>i){b>0?(y.tokens=y.tokens.slice(0,b),m(y,w,x),n.lines=n.lines.slice(0,g+1)):n.lines=n.lines.slice(0,g);break e}var A=S.width,R=A==null||A==="auto";if(typeof A=="string"&&A.charAt(A.length-1)==="%")C.percentWidth=A,c.push(C),C.contentWidth=Ha(C.text,T);else{if(R){var $=S.backgroundColor,O=$&&$.image;O&&(O=WXe(O),sT(O)&&(C.width=Math.max(C.width,O.width*E/O.height)))}var M=p&&r!=null?r-w:null;M!=null&&M<C.width?!R||M<_?(C.text="",C.width=C.contentWidth=0):(C.text=Fne(C.text,M-_,T,e.ellipsis,{minChar:e.truncateMinChar}),C.width=C.contentWidth=Ha(C.text,T)):C.contentWidth=Ha(C.text,T)}C.width+=_,w+=C.width,S&&(x=Math.max(x,C.lineHeight))}m(y,w,x)}n.outerWidth=n.width=wt(r,h),n.outerHeight=n.height=wt(i,f),n.contentHeight=f,n.contentWidth=h,d&&(n.outerWidth+=d[1]+d[3],n.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var C=c[g],B=C.percentWidth;C.width=parseInt(B,10)/100*n.width}return n}function RA(t,e,n,r,i){var a=e==="",o=i&&n.rich[i]||{},s=t.lines,l=o.font||n.font,u=!1,c,f;if(r){var h=o.padding,d=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Kc(o.width,r.width)+d;s.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),u=!0),r.accumWidth=p}else{var v=Bne(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=e.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],y=new HXe;if(y.styleName=i,y.text=g,y.isLineHolder=!g&&!a,typeof o.width=="number"?y.width=o.width:y.width=f?f[m]:Ha(g,l),!m&&!u){var x=(s[s.length-1]||(s[0]=new iV)).tokens,w=x.length;w===1&&x[0].isLineHolder?x[0]=y:(g||!w||a)&&x.push(y)}else s.push(new iV([y]))}}function KXe(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var XXe=_l(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function YXe(t){return KXe(t)?!!XXe[t]:!0}function Bne(t,e,n,r,i){for(var a=[],o=[],s="",l="",u=0,c=0,f=0;f<t.length;f++){var h=t.charAt(f);if(h===`
`){l&&(s+=l,c+=u),a.push(s),o.push(c),s="",l="",u=0,c=0;continue}var d=Ha(h,e),p=r?!1:!YXe(h);if(a.length?c+d>n:i+c+d>n){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),a.push(s),o.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(c),s=h,c=d)):p?(a.push(l),o.push(u),l=h,u=d):(a.push(h),o.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!a.length&&!s&&(s=t,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var TR="__zr_style_"+Math.round(Math.random()*10),Ah={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},lT={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ah[TR]=!0;var aV=["z","z2","invisible"],ZXe=["invisible"],QXe=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=Ot(n),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(n[a]):t.prototype.attrKV.call(this,a,n[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&JXe(this,n,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Et(0,0,0,0)),r?Et.applyTransform(n,i,r):n.copy(i),(o||s||l)&&(n.width+=o*2+Math.abs(s),n.height+=o*2+Math.abs(l),n.x=Math.min(n.x,n.x+s-o),n.y=Math.min(n.y,n.y+l-o));var u=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-u),n.y=Math.floor(n.y-u),n.width=Math.ceil(n.width+1+u*2),n.height=Math.ceil(n.height+1+u*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Et(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:De(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=km,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&km)},e.prototype.styleUpdated=function(){this.__dirty&=~km},e.prototype.createStyle=function(n){return xx(Ah,n)},e.prototype.useStyle=function(n){n[TR]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[TR]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,aV)},e.prototype._applyStateObj=function(n,r,i,a,o,s){t.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.style?o?a?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=Ot(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=Ot(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(n,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?ZXe:aV,h=0;h<v.length;h++){var d=v[h];r&&r[d]!=null?this[d]=r[d]:l&&i[d]!=null&&(this[d]=i[d])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(n,r){return De(n,r),n},e.prototype.getAnimationStyleProps=function(){return lT},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=Fa|km}(),e}(wne),$A=new Et(0,0,0,0),MA=new Et(0,0,0,0);function JXe(t,e,n){return $A.copy(t.getBoundingRect()),t.transform&&$A.applyTransform(t.transform),MA.width=e,MA.height=n,!$A.intersect(MA)}const _g=QXe;var la=Math.min,ua=Math.max,OA=Math.sin,PA=Math.cos,Af=Math.PI*2,Ow=Ad(),Pw=Ad(),Fw=Ad();function Vne(t,e,n){if(t.length!==0){for(var r=t[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<t.length;l++)r=t[l],i=la(i,r[0]),a=ua(a,r[0]),o=la(o,r[1]),s=ua(s,r[1]);e[0]=i,e[1]=o,n[0]=a,n[1]=s}}function oV(t,e,n,r,i,a){i[0]=la(t,n),i[1]=la(e,r),a[0]=ua(t,n),a[1]=ua(e,r)}var sV=[],lV=[];function eYe(t,e,n,r,i,a,o,s,l,u){var c=ine,f=Tr,h=c(t,n,i,o,sV);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(t,n,i,o,sV[d]);l[0]=la(p,l[0]),u[0]=ua(p,u[0])}h=c(e,r,a,s,lV);for(var d=0;d<h;d++){var v=f(e,r,a,s,lV[d]);l[1]=la(v,l[1]),u[1]=ua(v,u[1])}l[0]=la(t,l[0]),u[0]=ua(t,u[0]),l[0]=la(o,l[0]),u[0]=ua(o,u[0]),l[1]=la(e,l[1]),u[1]=ua(e,u[1]),l[1]=la(s,l[1]),u[1]=ua(s,u[1])}function tYe(t,e,n,r,i,a,o,s){var l=ane,u=yi,c=ua(la(l(t,n,i),1),0),f=ua(la(l(e,r,a),1),0),h=u(t,n,i,c),d=u(e,r,a,f);o[0]=la(t,i,h),o[1]=la(e,a,d),s[0]=ua(t,i,h),s[1]=ua(e,a,d)}function nYe(t,e,n,r,i,a,o,s,l){var u=sc,c=lc,f=Math.abs(i-a);if(f%Af<1e-4&&f>1e-4){s[0]=t-n,s[1]=e-r,l[0]=t+n,l[1]=e+r;return}if(Ow[0]=PA(i)*n+t,Ow[1]=OA(i)*r+e,Pw[0]=PA(a)*n+t,Pw[1]=OA(a)*r+e,u(s,Ow,Pw),c(l,Ow,Pw),i=i%Af,i<0&&(i=i+Af),a=a%Af,a<0&&(a=a+Af),i>a&&!o?a+=Af:i<a&&o&&(i+=Af),o){var h=a;a=i,i=h}for(var d=0;d<a;d+=Math.PI/2)d>i&&(Fw[0]=PA(d)*n+t,Fw[1]=OA(d)*r+e,u(s,Fw,s),c(l,Fw,l))}var Gt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Nf=[],kf=[],Vs=[],Mu=[],Ws=[],Us=[],FA=Math.min,LA=Math.max,If=Math.cos,Rf=Math.sin,Bl=Math.abs,ER=Math.PI,Gu=ER*2,zA=typeof Float32Array<"u",em=[];function BA(t){var e=Math.round(t/ER*1e8)/1e8;return e%2*ER}function rYe(t,e){var n=BA(t[0]);n<0&&(n+=Gu);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=Gu?i=n+Gu:e&&n-i>=Gu?i=n-Gu:!e&&n>i?i=n+(Gu-BA(n-i)):e&&n<i&&(i=n-(Gu-BA(i-n))),t[0]=n,t[1]=i}var iYe=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=Bl(r/I2/e)||0,this._uy=Bl(r/I2/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(Gt.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=Bl(e-this._xi),i=Bl(n-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Gt.L,e,n),this._ctx&&a&&this._ctx.lineTo(e,n),a)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(e,n,r,i,a,o){return this._drawPendingPt(),this.addData(Gt.C,e,n,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,n,r,i,a,o),this._xi=a,this._yi=o,this},t.prototype.quadraticCurveTo=function(e,n,r,i){return this._drawPendingPt(),this.addData(Gt.Q,e,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,i),this._xi=r,this._yi=i,this},t.prototype.arc=function(e,n,r,i,a,o){this._drawPendingPt(),em[0]=i,em[1]=a,rYe(em,o),i=em[0],a=em[1];var s=a-i;return this.addData(Gt.A,e,n,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,n,r,i,a,o),this._xi=If(a)*r+e,this._yi=Rf(a)*r+n,this},t.prototype.arcTo=function(e,n,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,i,a),this},t.prototype.rect=function(e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,i),this.addData(Gt.R,e,n,r,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(Gt.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&zA&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,i=this._len,a=0;a<n;a++)r+=e[a].len();zA&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<n;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},t.prototype.addData=function(e,n,r,i,a,o,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,zA&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){Vs[0]=Vs[1]=Ws[0]=Ws[1]=Number.MAX_VALUE,Mu[0]=Mu[1]=Us[0]=Us[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(n=e[o],r=e[o+1],i=n,a=r),s){case Gt.M:n=i=e[o++],r=a=e[o++],Ws[0]=i,Ws[1]=a,Us[0]=i,Us[1]=a;break;case Gt.L:oV(n,r,e[o],e[o+1],Ws,Us),n=e[o++],r=e[o++];break;case Gt.C:eYe(n,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Ws,Us),n=e[o++],r=e[o++];break;case Gt.Q:tYe(n,r,e[o++],e[o++],e[o],e[o+1],Ws,Us),n=e[o++],r=e[o++];break;case Gt.A:var u=e[o++],c=e[o++],f=e[o++],h=e[o++],d=e[o++],p=e[o++]+d;o+=1;var v=!e[o++];l&&(i=If(d)*f+u,a=Rf(d)*h+c),nYe(u,c,f,h,d,p,v,Ws,Us),n=If(p)*f+u,r=Rf(p)*h+c;break;case Gt.R:i=n=e[o++],a=r=e[o++];var m=e[o++],g=e[o++];oV(i,a,i+m,a+g,Ws,Us);break;case Gt.Z:n=i,r=a;break}sc(Vs,Vs,Ws),lc(Mu,Mu,Us)}return o===0&&(Vs[0]=Vs[1]=Mu[0]=Mu[1]=0),new Et(Vs[0],Vs[1],Mu[0]-Vs[0],Mu[1]-Vs[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<n;){var d=e[h++],p=h===1;p&&(a=e[h],o=e[h+1],s=a,l=o);var v=-1;switch(d){case Gt.M:a=s=e[h++],o=l=e[h++];break;case Gt.L:{var m=e[h++],g=e[h++],y=m-a,x=g-o;(Bl(y)>r||Bl(x)>i||h===n-1)&&(v=Math.sqrt(y*y+x*x),a=m,o=g);break}case Gt.C:{var w=e[h++],b=e[h++],m=e[h++],g=e[h++],C=e[h++],S=e[h++];v=aKe(a,o,w,b,m,g,C,S,10),a=C,o=S;break}case Gt.Q:{var w=e[h++],b=e[h++],m=e[h++],g=e[h++];v=lKe(a,o,w,b,m,g,10),a=m,o=g;break}case Gt.A:var D=e[h++],_=e[h++],T=e[h++],E=e[h++],A=e[h++],R=e[h++],$=R+A;h+=1,e[h++],p&&(s=If(A)*T+D,l=Rf(A)*E+_),v=LA(T,E)*FA(Gu,Math.abs(R)),a=If($)*T+D,o=Rf($)*E+_;break;case Gt.R:{s=a=e[h++],l=o=e[h++];var O=e[h++],M=e[h++];v=O*2+M*2;break}case Gt.Z:{var y=s-a,x=l-o;v=Math.sqrt(y*y+x*x),a=s,o=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,n){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,u,c,f,h,d=n<1,p,v,m=0,g=0,y,x=0,w,b;if(!(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=n*v,!y)))e:for(var C=0;C<o;){var S=r[C++],D=C===1;switch(D&&(u=r[C],c=r[C+1],s=u,l=c),S!==Gt.L&&x>0&&(e.lineTo(w,b),x=0),S){case Gt.M:s=u=r[C++],l=c=r[C++],e.moveTo(u,c);break;case Gt.L:{f=r[C++],h=r[C++];var _=Bl(f-u),T=Bl(h-c);if(_>i||T>a){if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;e.lineTo(u*(1-A)+f*A,c*(1-A)+h*A);break e}m+=E}e.lineTo(f,h),u=f,c=h,x=0}else{var R=_*_+T*T;R>x&&(w=f,b=h,x=R)}break}case Gt.C:{var $=r[C++],O=r[C++],M=r[C++],B=r[C++],P=r[C++],z=r[C++];if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;qc(u,$,M,P,A,Nf),qc(c,O,B,z,A,kf),e.bezierCurveTo(Nf[1],kf[1],Nf[2],kf[2],Nf[3],kf[3]);break e}m+=E}e.bezierCurveTo($,O,M,B,P,z),u=P,c=z;break}case Gt.Q:{var $=r[C++],O=r[C++],M=r[C++],B=r[C++];if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;N2(u,$,M,A,Nf),N2(c,O,B,A,kf),e.quadraticCurveTo(Nf[1],kf[1],Nf[2],kf[2]);break e}m+=E}e.quadraticCurveTo($,O,M,B),u=M,c=B;break}case Gt.A:var U=r[C++],H=r[C++],F=r[C++],W=r[C++],j=r[C++],K=r[C++],Y=r[C++],Z=!r[C++],se=F>W?F:W,ee=Bl(F-W)>.001,oe=j+K,ce=!1;if(d){var E=p[g++];m+E>y&&(oe=j+K*(y-m)/E,ce=!0),m+=E}if(ee&&e.ellipse?e.ellipse(U,H,F,W,Y,j,oe,Z):e.arc(U,H,se,j,oe,Z),ce)break e;D&&(s=If(j)*F+U,l=Rf(j)*W+H),u=If(oe)*F+U,c=Rf(oe)*W+H;break;case Gt.R:s=u=r[C],l=c=r[C+1],f=r[C++],h=r[C++];var ve=r[C++],ye=r[C++];if(d){var E=p[g++];if(m+E>y){var _e=y-m;e.moveTo(f,h),e.lineTo(f+FA(_e,ve),h),_e-=ve,_e>0&&e.lineTo(f+ve,h+FA(_e,ye)),_e-=ye,_e>0&&e.lineTo(f+LA(ve-_e,0),h+ye),_e-=ve,_e>0&&e.lineTo(f,h+LA(ye-_e,0));break e}m+=E}e.rect(f,h,ve,ye);break;case Gt.Z:if(d){var E=p[g++];if(m+E>y){var A=(y-m)/E;e.lineTo(u*(1-A)+s*A,c*(1-A)+l*A);break e}m+=E}e.closePath(),u=s,c=l}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=Gt,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();const Tl=iYe;function Ud(t,e,n,r,i,a,o){if(i===0)return!1;var s=i,l=0,u=t;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>t+s&&a>n+s||a<t-s&&a<n-s)return!1;if(t!==n)l=(e-r)/(t-n),u=(t*r-n*e)/(t-n);else return Math.abs(a-t)<=s/2;var c=l*a-o+u,f=c*c/(l*l+1);return f<=s/2*s/2}function aYe(t,e,n,r,i,a,o,s,l,u,c){if(l===0)return!1;var f=l;if(c>e+f&&c>r+f&&c>a+f&&c>s+f||c<e-f&&c<r-f&&c<a-f&&c<s-f||u>t+f&&u>n+f&&u>i+f&&u>o+f||u<t-f&&u<n-f&&u<i-f&&u<o-f)return!1;var h=iKe(t,e,n,r,i,a,o,s,u,c,null);return h<=f/2}function oYe(t,e,n,r,i,a,o,s,l){if(o===0)return!1;var u=o;if(l>e+u&&l>r+u&&l>a+u||l<e-u&&l<r-u&&l<a-u||s>t+u&&s>n+u&&s>i+u||s<t-u&&s<n-u&&s<i-u)return!1;var c=sKe(t,e,n,r,i,a,s,l,null);return c<=u/2}var uV=Math.PI*2;function Lw(t){return t%=uV,t<0&&(t+=uV),t}var tm=Math.PI*2;function sYe(t,e,n,r,i,a,o,s,l){if(o===0)return!1;var u=o;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(r-i)%tm<1e-4)return!0;if(a){var f=r;r=Lw(i),i=Lw(f)}else r=Lw(r),i=Lw(i);r>i&&(i+=tm);var h=Math.atan2(l,s);return h<0&&(h+=tm),h>=r&&h<=i||h+tm>=r&&h+tm<=i}function ql(t,e,n,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(n-t)+t;return l===i?1/0:l>i?s:0}var Ou=Tl.CMD,$f=Math.PI*2,lYe=1e-4;function uYe(t,e){return Math.abs(t-e)<lYe}var Oi=[-1,-1,-1],yo=[-1,-1];function cYe(){var t=yo[0];yo[0]=yo[1],yo[1]=t}function fYe(t,e,n,r,i,a,o,s,l,u){if(u>e&&u>r&&u>a&&u>s||u<e&&u<r&&u<a&&u<s)return 0;var c=A2(e,r,a,s,u,Oi);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=Oi[v],g=m===0||m===1?.5:1,y=Tr(t,n,i,o,m);y<l||(h<0&&(h=ine(e,r,a,s,yo),yo[1]<yo[0]&&h>1&&cYe(),d=Tr(e,r,a,s,yo[0]),h>1&&(p=Tr(e,r,a,s,yo[1]))),h===2?m<yo[0]?f+=d<e?g:-g:m<yo[1]?f+=p<d?g:-g:f+=s<p?g:-g:m<yo[0]?f+=d<e?g:-g:f+=s<d?g:-g)}return f}function hYe(t,e,n,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=oKe(e,r,a,s,Oi);if(l===0)return 0;var u=ane(e,r,a);if(u>=0&&u<=1){for(var c=0,f=yi(e,r,a,u),h=0;h<l;h++){var d=Oi[h]===0||Oi[h]===1?.5:1,p=yi(t,n,i,Oi[h]);p<o||(Oi[h]<u?c+=f<e?d:-d:c+=a<f?d:-d)}return c}else{var d=Oi[0]===0||Oi[0]===1?.5:1,p=yi(t,n,i,Oi[0]);return p<o?0:a<e?d:-d}}function dYe(t,e,n,r,i,a,o,s){if(s-=e,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Oi[0]=-l,Oi[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=$f-1e-4){r=0,i=$f;var c=a?1:-1;return o>=Oi[0]+t&&o<=Oi[1]+t?c:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=$f,i+=$f);for(var h=0,d=0;d<2;d++){var p=Oi[d];if(p+t>o){var v=Math.atan2(s,p),c=a?1:-1;v<0&&(v=$f+v),(v>=r&&v<=i||v+$f>=r&&v+$f<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function Wne(t,e,n,r,i){for(var a=t.data,o=t.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<o;){var v=a[p++],m=p===1;switch(v===Ou.M&&p>1&&(n||(s+=ql(l,u,c,f,r,i))),m&&(l=a[p],u=a[p+1],c=l,f=u),v){case Ou.M:c=a[p++],f=a[p++],l=c,u=f;break;case Ou.L:if(n){if(Ud(l,u,a[p],a[p+1],e,r,i))return!0}else s+=ql(l,u,a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ou.C:if(n){if(aYe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=fYe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ou.Q:if(n){if(oYe(l,u,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=hYe(l,u,a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ou.A:var g=a[p++],y=a[p++],x=a[p++],w=a[p++],b=a[p++],C=a[p++];p+=1;var S=!!(1-a[p++]);h=Math.cos(b)*x+g,d=Math.sin(b)*w+y,m?(c=h,f=d):s+=ql(l,u,h,d,r,i);var D=(r-g)*w/x+g;if(n){if(sYe(g,y,w,b,b+C,S,e,D,i))return!0}else s+=dYe(g,y,w,b,b+C,S,D,i);l=Math.cos(b+C)*x+g,u=Math.sin(b+C)*w+y;break;case Ou.R:c=l=a[p++],f=u=a[p++];var _=a[p++],T=a[p++];if(h=c+_,d=f+T,n){if(Ud(c,f,h,f,e,r,i)||Ud(h,f,h,d,e,r,i)||Ud(h,d,c,d,e,r,i)||Ud(c,d,c,f,e,r,i))return!0}else s+=ql(h,f,h,d,r,i),s+=ql(c,d,c,f,r,i);break;case Ou.Z:if(n){if(Ud(l,u,c,f,e,r,i))return!0}else s+=ql(l,u,c,f,r,i);l=c,u=f;break}}return!n&&!uYe(u,f)&&(s+=ql(l,u,c,f,r,i)||0),s!==0}function pYe(t,e,n){return Wne(t,0,!1,e,n)}function vYe(t,e,n,r){return Wne(t,e,!0,n,r)}var $2=pt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Ah),gYe={style:pt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},lT.style)},VA=uy.concat(["invisible","culling","z","z2","zlevel","parent"]),mYe=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<VA.length;++s)i[VA[s]]=this[VA[s]];i.__dirty|=Fa}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=Ot(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=n[o];o==="style"?this.style?De(this.style,s):this.useStyle(s):o==="shape"?De(this.shape,s):t.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(Be(n)){var r=sy(n,0);return r>.5?bR:r>.2?jKe:CR}else if(n)return CR}return bR},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(Be(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=sy(n,0)<wR;if(a===o)return r}},e.prototype.buildPath=function(n,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~sp},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new Tl(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&sp)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),n=o.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return n},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect(),o=this.style;if(n=i[0],r=i[1],a.contain(n,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),vYe(s,l/u,n,r)))return!0}if(this.hasFill())return pYe(s,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=sp,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:De(i,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&sp)},e.prototype.createStyle=function(n){return xx($2,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=De({},this.shape))},e.prototype._applyStateObj=function(n,r,i,a,o,s){t.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.shape?o?a?u=r.shape:(u=De({},i.shape),De(u,r.shape)):(u=De({},a?this.shape:i.shape),De(u,r.shape)):l&&(u=i.shape),u)if(o){this.shape=De({},this.shape);for(var c={},f=Ot(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(n,{shape:c},s)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return gYe},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(a){an(o,a);function o(s){var l=a.call(this,s)||this;return n.init&&n.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return ht(n.style)},o.prototype.getDefaultShape=function(){return ht(n.shape)},o}(e);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=Fa|km|sp}(),e}(_g);const Nt=mYe;var yYe=pt({strokeFirst:!0,font:jc,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},$2),Une=function(t){an(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return xx(yYe,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=rT(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var a=n.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(_g);Une.prototype.type="tspan";const M2=Une;var xYe=pt({x:0,y:0},Ah),wYe={style:pt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},lT.style)};function bYe(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var Gne=function(t){an(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return xx(xYe,n)},e.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var a=bYe(r.image)?r.image:this.__image;if(!a)return 0;var o=n==="width"?"height":"width",s=r[o];return s==null?a[n]:a[n]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return wYe},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Et(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(_g);Gne.prototype.type="image";const Pl=Gne;function CYe(t,e){var n=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,l,u,c;i<0&&(n=n+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=u=c=o:o instanceof Array?o.length===1?s=l=u=c=o[0]:o.length===2?(s=u=o[0],l=c=o[1]):o.length===3?(s=o[0],l=c=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],c=o[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>a&&(f=l+u,l*=a/f,u*=a/f),s+c>a&&(f=s+c,s*=a/f,c*=a/f),t.moveTo(n+s,r),t.lineTo(n+i-l,r),l!==0&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+a-u),u!==0&&t.arc(n+i-u,r+a-u,u,0,Math.PI/2),t.lineTo(n+c,r+a),c!==0&&t.arc(n+c,r+a-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+s),s!==0&&t.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var Mp=Math.round;function Hne(t,e,n){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;t.x1=r,t.x2=i,t.y1=a,t.y2=o;var s=n&&n.lineWidth;return s&&(Mp(r*2)===Mp(i*2)&&(t.x1=t.x2=ph(r,s,!0)),Mp(a*2)===Mp(o*2)&&(t.y1=t.y2=ph(a,s,!0))),t}}function jne(t,e,n){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;t.x=r,t.y=i,t.width=a,t.height=o;var s=n&&n.lineWidth;return s&&(t.x=ph(r,s,!0),t.y=ph(i,s,!0),t.width=Math.max(ph(r+a,s,!1)-t.x,a===0?0:1),t.height=Math.max(ph(i+o,s,!1)-t.y,o===0?0:1)),t}}function ph(t,e,n){if(!e)return t;var r=Mp(t*2);return(r+Mp(e))%2===0?r/2:(r+(n?1:-1))/2}var SYe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),DYe={},qne=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new SYe},e.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=jne(DYe,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?CYe(n,r):n.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Nt);qne.prototype.type="rect";const qn=qne;var cV={fill:"#000"},fV=2,_Ye={style:pt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},lT.style)},Kne=function(t){an(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=cV,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,AYe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Et(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(n.copy(l),n.applyTransform(u),a=a||n.clone(),a.union(n)):(a=a||l.clone(),a.union(l))}this._rect=a||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||cV},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,a=n.rich||i&&{};return De(n,r),i&&a?(this._mergeRich(a,i),n.rich=a):a&&(n.rich=a),n},e.prototype._mergeRich=function(n,r){for(var i=Ot(r),a=0;a<i.length;a++){var o=i[a];n[o]=n[o]||{},De(n[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return _Ye},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||jc,i=n.padding,a=yV(n),o=GXe(a,n),s=WA(n),l=!!n.backgroundColor,u=o.outerHeight,c=o.outerWidth,f=o.contentWidth,h=o.lines,d=o.lineHeight,p=this._defaultStyle,v=n.x||0,m=n.y||0,g=n.align||p.align||"left",y=n.verticalAlign||p.verticalAlign||"top",x=v,w=lp(m,o.contentHeight,y);if(s||i){var b=Rm(v,c,g),C=lp(m,u,y);s&&this._renderBackground(n,n,b,C,c,u)}w+=d/2,i&&(x=mV(v,g,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var S=0,D=!1,_=gV("fill"in n?n.fill:(D=!0,p.fill)),T=vV("stroke"in n?n.stroke:!l&&(!p.autoStroke||D)?(S=fV,p.stroke):null),E=n.textShadowBlur>0,A=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),R=o.calculatedLineHeight,$=0;$<h.length;$++){var O=this._getOrCreateChild(M2),M=O.createStyle();O.useStyle(M),M.text=h[$],M.x=x,M.y=w,g&&(M.textAlign=g),M.textBaseline="middle",M.opacity=n.opacity,M.strokeFirst=!0,E&&(M.shadowBlur=n.textShadowBlur||0,M.shadowColor=n.textShadowColor||"transparent",M.shadowOffsetX=n.textShadowOffsetX||0,M.shadowOffsetY=n.textShadowOffsetY||0),M.stroke=T,M.fill=_,T&&(M.lineWidth=n.lineWidth||S,M.lineDash=n.lineDash,M.lineDashOffset=n.lineDashOffset||0),M.font=r,dV(M,n),w+=d,A&&O.setBoundingRect(new Et(Rm(M.x,n.width,M.textAlign),lp(M.y,R,M.textBaseline),f,R))}},e.prototype._updateRichTexts=function(){var n=this.style,r=yV(n),i=qXe(r,n),a=i.width,o=i.outerWidth,s=i.outerHeight,l=n.padding,u=n.x||0,c=n.y||0,f=this._defaultStyle,h=n.align||f.align,d=n.verticalAlign||f.verticalAlign,p=Rm(u,o,h),v=lp(c,s,d),m=p,g=v;l&&(m+=l[3],g+=l[0]);var y=m+a;WA(n)&&this._renderBackground(n,n,p,v,o,s);for(var x=!!n.backgroundColor,w=0;w<i.lines.length;w++){for(var b=i.lines[w],C=b.tokens,S=C.length,D=b.lineHeight,_=b.width,T=0,E=m,A=y,R=S-1,$=void 0;T<S&&($=C[T],!$.align||$.align==="left");)this._placeToken($,n,D,g,E,"left",x),_-=$.width,E+=$.width,T++;for(;R>=0&&($=C[R],$.align==="right");)this._placeToken($,n,D,g,A,"right",x),_-=$.width,A-=$.width,R--;for(E+=(a-(E-m)-(y-A)-_)/2;T<=R;)$=C[T],this._placeToken($,n,D,g,E+$.width/2,"center",x),E+=$.width,T++;g+=D}},e.prototype._placeToken=function(n,r,i,a,o,s,l){var u=r.rich[n.styleName]||{};u.text=n.text;var c=n.verticalAlign,f=a+i/2;c==="top"?f=a+n.height/2:c==="bottom"&&(f=a+i-n.height/2);var h=!n.isLineHolder&&WA(u);h&&this._renderBackground(u,r,s==="right"?o-n.width:s==="center"?o-n.width/2:o,f-n.height/2,n.width,n.height);var d=!!u.backgroundColor,p=n.textPadding;p&&(o=mV(o,s,p),f-=n.height/2-p[0]-n.innerHeight/2);var v=this._getOrCreateChild(M2),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,y=!1,x=0,w=gV("fill"in u?u.fill:"fill"in r?r.fill:(y=!0,g.fill)),b=vV("stroke"in u?u.stroke:"stroke"in r?r.stroke:!d&&!l&&(!g.autoStroke||y)?(x=fV,g.stroke):null),C=u.textShadowBlur>0||r.textShadowBlur>0;m.text=n.text,m.x=o,m.y=f,C&&(m.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,m.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=n.font||jc,m.opacity=Jp(u.opacity,r.opacity,1),dV(m,u),b&&(m.lineWidth=Jp(u.lineWidth,r.lineWidth,x),m.lineDash=wt(u.lineDash,r.lineDash),m.lineDashOffset=r.lineDashOffset||0,m.stroke=b),w&&(m.fill=w);var S=n.contentWidth,D=n.contentHeight;v.setBoundingRect(new Et(Rm(m.x,S,m.textAlign),lp(m.y,D,m.textBaseline),S,D))},e.prototype._renderBackground=function(n,r,i,a,o,s){var l=n.backgroundColor,u=n.borderWidth,c=n.borderColor,f=l&&l.image,h=l&&!f,d=n.borderRadius,p=this,v,m;if(h||n.lineHeight||u&&c){v=this._getOrCreateChild(qn),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=a,g.width=o,g.height=s,g.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=wt(n.fillOpacity,1)}else if(f){m=this._getOrCreateChild(Pl),m.onload=function(){p.dirtyStyle()};var x=m.style;x.image=l.image,x.x=i,x.y=a,x.width=o,x.height=s}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=wt(n.strokeOpacity,1),y.lineDash=n.borderDash,y.lineDashOffset=n.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=n.shadowBlur||0,w.shadowColor=n.shadowColor||"transparent",w.shadowOffsetX=n.shadowOffsetX||0,w.shadowOffsetY=n.shadowOffsetY||0,w.opacity=Jp(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return Yne(n)&&(r=[n.fontStyle,n.fontWeight,Xne(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&ys(r)||n.textFont||n.font},e}(_g),TYe={left:!0,right:1,center:1},EYe={top:1,bottom:1,middle:1},hV=["fontStyle","fontWeight","fontSize","fontFamily"];function Xne(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?S3+"px":t+"px"}function dV(t,e){for(var n=0;n<hV.length;n++){var r=hV[n],i=e[r];i!=null&&(t[r]=i)}}function Yne(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function AYe(t){return pV(t),G(t.rich,pV),t}function pV(t){if(t){t.font=Kne.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||TYe[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||EYe[n]?n:"top";var r=t.padding;r&&(t.padding=A3(t.padding))}}function vV(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function gV(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function mV(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function yV(t){var e=t.text;return e!=null&&(e+=""),e}function WA(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}const Vr=Kne;var Xt=Jn(),NYe=function(t,e,n,r){if(r){var i=Xt(r);i.dataIndex=n,i.dataType=e,i.seriesIndex=t,r.type==="group"&&r.traverse(function(a){var o=Xt(a);o.seriesIndex=t,o.dataIndex=n,o.dataType=e})}},xV=1,wV={},Zne=Jn(),j3=Jn(),q3=0,uT=1,cT=2,Vo=["emphasis","blur","select"],O2=["normal","emphasis","blur","select"],kYe=10,IYe=9,Nh="highlight",Ub="downplay",a0="select",Gb="unselect",o0="toggleSelect";function Gd(t){return t!=null&&t!=="none"}var bV=new Sx(100);function CV(t){if(Be(t)){var e=bV.get(t);return e||(e=dR(t,-.1),bV.put(t,e)),e}else if(yx(t)){var n=De({},t);return n.colorStops=$e(t.colorStops,function(r){return{offset:r.offset,color:dR(r.color,-.1)}}),n}return t}function fT(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function Qne(t){fT(t,"emphasis",cT)}function Jne(t){t.hoverState===cT&&fT(t,"normal",q3)}function K3(t){fT(t,"blur",uT)}function ere(t){t.hoverState===uT&&fT(t,"normal",q3)}function RYe(t){t.selected=!0}function $Ye(t){t.selected=!1}function SV(t,e,n){e(t,n)}function Nu(t,e,n){SV(t,e,n),t.isGroup&&t.traverse(function(r){SV(r,e,n)})}function DV(t,e){switch(e){case"emphasis":t.hoverState=cT;break;case"normal":t.hoverState=q3;break;case"blur":t.hoverState=uT;break;case"select":t.selected=!0}}function MYe(t,e,n,r){for(var i=t.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<t.animators.length;o++){var u=t.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(n)<0&&u.targetName==="style"&&u.saveTo(a,e)}return a}function OYe(t,e,n,r){var i=n&&kt(n,"select")>=0,a=!1;if(t instanceof Nt){var o=Zne(t),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(Gd(s)||Gd(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(a=!0,r=De({},r),u=De({},u),u.fill=s):!Gd(u.fill)&&Gd(s)?(a=!0,r=De({},r),u=De({},u),u.fill=CV(s)):!Gd(u.stroke)&&Gd(l)&&(a||(r=De({},r),u=De({},u)),u.stroke=CV(l)),r.style=u}}if(r&&r.z2==null){a||(r=De({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(c??kYe)}return r}function PYe(t,e,n){if(n&&n.z2==null){n=De({},n);var r=t.z2SelectLift;n.z2=t.z2+(r??IYe)}return n}function FYe(t,e,n){var r=kt(t.currentStates,e)>=0,i=t.style.opacity,a=r?null:MYe(t,["opacity"],e,{opacity:1});n=n||{};var o=n.style||{};return o.opacity==null&&(n=De({},n),o=De({opacity:r?i:a.opacity*.1},o),n.style=o),n}function UA(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return OYe(this,t,e,n);if(t==="blur")return FYe(this,t,n);if(t==="select")return PYe(this,t,n)}return n}function LYe(t){t.stateProxy=UA;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=UA),n&&(n.stateProxy=UA)}function _V(t,e){!ire(t,e)&&!t.__highByOuter&&Nu(t,Qne)}function TV(t,e){!ire(t,e)&&!t.__highByOuter&&Nu(t,Jne)}function jv(t,e){t.__highByOuter|=1<<(e||0),Nu(t,Qne)}function qv(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&Nu(t,Jne)}function zYe(t){Nu(t,K3)}function tre(t){Nu(t,ere)}function nre(t){Nu(t,RYe)}function rre(t){Nu(t,$Ye)}function ire(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function are(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(i,a){var o=j3(a),s=i==="series",l=s?t.getViewOfSeriesModel(a):t.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(u){ere(u)}),s&&n.push(a)),o.isBlured=!1}),G(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,e)})}function AR(t,e,n,r){var i=r.getModel();n=n||"coordinateSystem";function a(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&tre(h)}}if(t!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(t),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=o===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!h||e==="series"&&c)){var d=r.getViewOfSeriesModel(u);if(d.group.traverse(function(m){m.__highByOuter&&c&&e==="self"||K3(m)}),Xi(e))a(u.getData(),e);else if(Ye(e))for(var p=Ot(e),v=0;v<p.length;v++)a(u.getData(p[v]),e[p[v]]);l.push(u),j3(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function NR(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){j3(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){K3(a)})}}}function BYe(t,e,n){var r=t.seriesIndex,i=t.getData(e.dataType);if(i){var a=rd(i,e);a=(Me(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var u=Xt(o);AR(r,u.focus,u.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&AR(r,c,f,n)}}}function X3(t,e,n,r){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return i;var a=r.getModel().getComponent(t,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(n),l,u=0;u<s.length;u++)if(Xt(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function VYe(t,e,n){var r=Xt(t),i=X3(r.componentMainType,r.componentIndex,r.componentHighDownName,n),a=i.dispatchers,o=i.focusSelf;a?(o&&NR(r.componentMainType,r.componentIndex,n),G(a,function(s){return _V(s,e)})):(AR(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&NR(r.componentMainType,r.componentIndex,n),_V(t,e))}function WYe(t,e,n){are(n);var r=Xt(t),i=X3(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?G(i,function(a){return TV(a,e)}):TV(t,e)}function UYe(t,e,n){if(IR(e)){var r=e.dataType,i=t.getData(r),a=rd(i,e);Me(a)||(a=[a]),t[e.type===o0?"toggleSelect":e.type===a0?"select":"unselect"](a,r)}}function EV(t){var e=t.getAllData();G(e,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(a,o){t.isSelected(o,i)?nre(a):rre(a)})})}function GYe(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();G(r,function(i){i.data;var a=i.type,o=n.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:n.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function P2(t,e,n){ore(t,!0),Nu(t,LYe),jYe(t,e,n)}function HYe(t){ore(t,!1)}function py(t,e,n,r){r?HYe(t):P2(t,e,n)}function jYe(t,e,n){var r=Xt(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var AV=["emphasis","blur","select"],qYe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function F2(t,e,n,r){n=n||"itemStyle";for(var i=0;i<AV.length;i++){var a=AV[i],o=e.getModel([a,n]),s=t.ensureState(a);s.style=r?r(o):o[qYe[n]]()}}function ore(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function kR(t){return!!(t&&t.__highDownDispatcher)}function KYe(t){var e=wV[t];return e==null&&xV<=32&&(e=wV[t]=xV++),e}function IR(t){var e=t.type;return e===a0||e===Gb||e===o0}function NV(t){var e=t.type;return e===Nh||e===Ub}function XYe(t){var e=Zne(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Hd=Tl.CMD,YYe=[[],[],[]],kV=Math.sqrt,ZYe=Math.atan2;function sre(t,e){if(e){var n=t.data,r=t.len(),i,a,o,s,l,u,c=Hd.M,f=Hd.C,h=Hd.L,d=Hd.R,p=Hd.A,v=Hd.Q;for(o=0,s=0;o<r;){switch(i=n[o++],s=o,a=0,i){case c:a=1;break;case h:a=1;break;case f:a=3;break;case v:a=2;break;case p:var m=e[4],g=e[5],y=kV(e[0]*e[0]+e[1]*e[1]),x=kV(e[2]*e[2]+e[3]*e[3]),w=ZYe(-e[1]/x,e[0]/y);n[o]*=y,n[o++]+=m,n[o]*=x,n[o++]+=g,n[o++]*=y,n[o++]*=x,n[o++]+=w,n[o++]+=w,o+=2,s=o;break;case d:u[0]=n[o++],u[1]=n[o++],Hi(u,u,e),n[s++]=u[0],n[s++]=u[1],u[0]+=n[o++],u[1]+=n[o++],Hi(u,u,e),n[s++]=u[0],n[s++]=u[1]}for(l=0;l<a;l++){var b=YYe[l];b[0]=n[o++],b[1]=n[o++],Hi(b,b,e),n[s++]=b[0],n[s++]=b[1]}}t.increaseVersion()}}var GA=Math.sqrt,zw=Math.sin,Bw=Math.cos,nm=Math.PI;function IV(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function RR(t,e){return(t[0]*e[0]+t[1]*e[1])/(IV(t)*IV(e))}function RV(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(RR(t,e))}function $V(t,e,n,r,i,a,o,s,l,u,c){var f=l*(nm/180),h=Bw(f)*(t-n)/2+zw(f)*(e-r)/2,d=-1*zw(f)*(t-n)/2+Bw(f)*(e-r)/2,p=h*h/(o*o)+d*d/(s*s);p>1&&(o*=GA(p),s*=GA(p));var v=(i===a?-1:1)*GA((o*o*(s*s)-o*o*(d*d)-s*s*(h*h))/(o*o*(d*d)+s*s*(h*h)))||0,m=v*o*d/s,g=v*-s*h/o,y=(t+n)/2+Bw(f)*m-zw(f)*g,x=(e+r)/2+zw(f)*m+Bw(f)*g,w=RV([1,0],[(h-m)/o,(d-g)/s]),b=[(h-m)/o,(d-g)/s],C=[(-1*h-m)/o,(-1*d-g)/s],S=RV(b,C);if(RR(b,C)<=-1&&(S=nm),RR(b,C)>=1&&(S=0),S<0){var D=Math.round(S/nm*1e6)/1e6;S=nm*2+D%2*nm}c.addData(u,y,x,o,s,w,S,f,a)}var QYe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,JYe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function eZe(t){var e=new Tl;if(!t)return e;var n=0,r=0,i=n,a=r,o,s=Tl.CMD,l=t.match(QYe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(JYe)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0,S=void 0,D=n,_=r,T=void 0,E=void 0;switch(f){case"l":n+=d[m++],r+=d[m++],h=s.L,e.addData(h,n,r);break;case"L":n=d[m++],r=d[m++],h=s.L,e.addData(h,n,r);break;case"m":n+=d[m++],r+=d[m++],h=s.M,e.addData(h,n,r),i=n,a=r,f="l";break;case"M":n=d[m++],r=d[m++],h=s.M,e.addData(h,n,r),i=n,a=r,f="L";break;case"h":n+=d[m++],h=s.L,e.addData(h,n,r);break;case"H":n=d[m++],h=s.L,e.addData(h,n,r);break;case"v":r+=d[m++],h=s.L,e.addData(h,n,r);break;case"V":r=d[m++],h=s.L,e.addData(h,n,r);break;case"C":h=s.C,e.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),n=d[m-2],r=d[m-1];break;case"c":h=s.C,e.addData(h,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r),n+=d[m-2],r+=d[m-1];break;case"S":g=n,y=r,T=e.len(),E=e.data,o===s.C&&(g+=n-E[T-4],y+=r-E[T-3]),h=s.C,D=d[m++],_=d[m++],n=d[m++],r=d[m++],e.addData(h,g,y,D,_,n,r);break;case"s":g=n,y=r,T=e.len(),E=e.data,o===s.C&&(g+=n-E[T-4],y+=r-E[T-3]),h=s.C,D=n+d[m++],_=r+d[m++],n+=d[m++],r+=d[m++],e.addData(h,g,y,D,_,n,r);break;case"Q":D=d[m++],_=d[m++],n=d[m++],r=d[m++],h=s.Q,e.addData(h,D,_,n,r);break;case"q":D=d[m++]+n,_=d[m++]+r,n+=d[m++],r+=d[m++],h=s.Q,e.addData(h,D,_,n,r);break;case"T":g=n,y=r,T=e.len(),E=e.data,o===s.Q&&(g+=n-E[T-4],y+=r-E[T-3]),n=d[m++],r=d[m++],h=s.Q,e.addData(h,g,y,n,r);break;case"t":g=n,y=r,T=e.len(),E=e.data,o===s.Q&&(g+=n-E[T-4],y+=r-E[T-3]),n+=d[m++],r+=d[m++],h=s.Q,e.addData(h,g,y,n,r);break;case"A":x=d[m++],w=d[m++],b=d[m++],C=d[m++],S=d[m++],D=n,_=r,n=d[m++],r=d[m++],h=s.A,$V(D,_,n,r,C,S,x,w,b,h,e);break;case"a":x=d[m++],w=d[m++],b=d[m++],C=d[m++],S=d[m++],D=n,_=r,n+=d[m++],r+=d[m++],h=s.A,$V(D,_,n,r,C,S,x,w,b,h,e);break}}(f==="z"||f==="Z")&&(h=s.Z,e.addData(h),n=i,r=a),o=h}return e.toStatic(),e}var lre=function(t){an(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(Nt);function ure(t){return t.setData!=null}function cre(t,e){var n=eZe(t),r=De({},e);return r.buildPath=function(i){if(ure(i)){i.setData(n.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;n.rebuildPath(a,1)}},r.applyTransform=function(i){sre(n,i),this.dirtyShape()},r}function tZe(t,e){return new lre(cre(t,e))}function nZe(t,e){var n=cre(t,e),r=function(i){an(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return a}(lre);return r}function rZe(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var a=t[i];n.push(a.getUpdatedPathProxy(!0))}var o=new Nt(e);return o.createPathProxy(),o.buildPath=function(s){if(ure(s)){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function Y3(t,e){e=e||{};var n=new Nt;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?sre(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}var iZe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),fre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new iZe},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Nt);fre.prototype.type="circle";const hT=fre;var aZe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),hre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new aZe},e.prototype.buildPath=function(n,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,u=s*i,c=l*i;n.moveTo(a-s,o),n.bezierCurveTo(a-s,o-c,a-u,o-l,a,o-l),n.bezierCurveTo(a+u,o-l,a+s,o-c,a+s,o),n.bezierCurveTo(a+s,o+c,a+u,o+l,a,o+l),n.bezierCurveTo(a-u,o+l,a-s,o+c,a-s,o),n.closePath()},e}(Nt);hre.prototype.type="ellipse";const Z3=hre;var dre=Math.PI,HA=dre*2,Mf=Math.sin,jd=Math.cos,oZe=Math.acos,di=Math.atan2,MV=Math.abs,s0=Math.sqrt,$m=Math.max,Gs=Math.min,rs=1e-4;function sZe(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,h=f*l-c*u;if(!(h*h<rs))return h=(c*(e-a)-f*(t-i))/h,[t+h*l,e+h*u]}function Vw(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/s0(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,p=n+c,v=r+f,m=(h+p)/2,g=(d+v)/2,y=p-h,x=v-d,w=y*y+x*x,b=i-a,C=h*v-p*d,S=(x<0?-1:1)*s0($m(0,b*b*w-C*C)),D=(C*x-y*S)/w,_=(-C*y-x*S)/w,T=(C*x+y*S)/w,E=(-C*y+x*S)/w,A=D-m,R=_-g,$=T-m,O=E-g;return A*A+R*R>$*$+O*O&&(D=T,_=E),{cx:D,cy:_,x0:-c,y0:-f,x1:D*(i/b-1),y1:_*(i/b-1)}}function lZe(t){var e;if(Me(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function uZe(t,e){var n,r=$m(e.r,0),i=$m(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,f=e.cy,h=!!e.clockwise,d=MV(u-l),p=d>HA&&d%HA;if(p>rs&&(d=p),!(r>rs))t.moveTo(c,f);else if(d>HA-rs)t.moveTo(c+r*jd(l),f+r*Mf(l)),t.arc(c,f,r,l,u,!h),i>rs&&(t.moveTo(c+i*jd(u),f+i*Mf(u)),t.arc(c,f,i,u,l,h));else{var v=void 0,m=void 0,g=void 0,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0,S=void 0,D=void 0,_=void 0,T=void 0,E=void 0,A=void 0,R=void 0,$=void 0,O=r*jd(l),M=r*Mf(l),B=i*jd(u),P=i*Mf(u),z=d>rs;if(z){var U=e.cornerRadius;U&&(n=lZe(U),v=n[0],m=n[1],g=n[2],y=n[3]);var H=MV(r-i)/2;if(x=Gs(H,g),w=Gs(H,y),b=Gs(H,v),C=Gs(H,m),_=S=$m(x,w),T=D=$m(b,C),(S>rs||D>rs)&&(E=r*jd(u),A=r*Mf(u),R=i*jd(l),$=i*Mf(l),d<dre)){var F=sZe(O,M,R,$,E,A,B,P);if(F){var W=O-F[0],j=M-F[1],K=E-F[0],Y=A-F[1],Z=1/Mf(oZe((W*K+j*Y)/(s0(W*W+j*j)*s0(K*K+Y*Y)))/2),se=s0(F[0]*F[0]+F[1]*F[1]);_=Gs(S,(r-se)/(Z+1)),T=Gs(D,(i-se)/(Z-1))}}}if(!z)t.moveTo(c+O,f+M);else if(_>rs){var ee=Gs(g,_),oe=Gs(y,_),ce=Vw(R,$,O,M,r,ee,h),ve=Vw(E,A,B,P,r,oe,h);t.moveTo(c+ce.cx+ce.x0,f+ce.cy+ce.y0),_<S&&ee===oe?t.arc(c+ce.cx,f+ce.cy,_,di(ce.y0,ce.x0),di(ve.y0,ve.x0),!h):(ee>0&&t.arc(c+ce.cx,f+ce.cy,ee,di(ce.y0,ce.x0),di(ce.y1,ce.x1),!h),t.arc(c,f,r,di(ce.cy+ce.y1,ce.cx+ce.x1),di(ve.cy+ve.y1,ve.cx+ve.x1),!h),oe>0&&t.arc(c+ve.cx,f+ve.cy,oe,di(ve.y1,ve.x1),di(ve.y0,ve.x0),!h))}else t.moveTo(c+O,f+M),t.arc(c,f,r,l,u,!h);if(!(i>rs)||!z)t.lineTo(c+B,f+P);else if(T>rs){var ee=Gs(v,T),oe=Gs(m,T),ce=Vw(B,P,E,A,i,-oe,h),ve=Vw(O,M,R,$,i,-ee,h);t.lineTo(c+ce.cx+ce.x0,f+ce.cy+ce.y0),T<D&&ee===oe?t.arc(c+ce.cx,f+ce.cy,T,di(ce.y0,ce.x0),di(ve.y0,ve.x0),!h):(oe>0&&t.arc(c+ce.cx,f+ce.cy,oe,di(ce.y0,ce.x0),di(ce.y1,ce.x1),!h),t.arc(c,f,i,di(ce.cy+ce.y1,ce.cx+ce.x1),di(ve.cy+ve.y1,ve.cx+ve.x1),h),ee>0&&t.arc(c+ve.cx,f+ve.cy,ee,di(ve.y1,ve.x1),di(ve.y0,ve.x0),!h))}else t.lineTo(c+B,f+P),t.arc(c,f,i,u,l,h)}t.closePath()}}}var cZe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),pre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new cZe},e.prototype.buildPath=function(n,r){uZe(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Nt);pre.prototype.type="sector";const El=pre;var fZe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),vre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new fZe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.PI*2;n.moveTo(i+r.r,a),n.arc(i,a,r.r,0,o,!1),n.moveTo(i+r.r0,a),n.arc(i,a,r.r0,0,o,!0)},e}(Nt);vre.prototype.type="ring";const Q3=vre;function hZe(t,e,n,r){var i=[],a=[],o=[],s=[],l,u,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=t.length;h<d;h++)sc(c,c,t[h]),lc(f,f,t[h]);sc(c,c,r[0]),lc(f,f,r[1])}for(var h=0,d=t.length;h<d;h++){var p=t[h];if(n)l=t[h?h-1:d-1],u=t[(h+1)%d];else if(h===0||h===d-1){i.push(Ute(t[h]));continue}else l=t[h-1],u=t[h+1];Gte(a,u,l),Ob(a,a,e);var v=D2(p,l),m=D2(p,u),g=v+m;g!==0&&(v/=g,m/=g),Ob(o,a,-v),Ob(s,a,m);var y=aR([],p,o),x=aR([],p,s);r&&(lc(y,y,c),sc(y,y,f),lc(x,x,c),sc(x,x,f)),i.push(y),i.push(x)}return n&&i.push(i.shift()),i}function gre(t,e,n){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=hZe(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[s*2],u=a[s*2+1],c=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var dZe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),mre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new dZe},e.prototype.buildPath=function(n,r){gre(n,r,!0)},e}(Nt);mre.prototype.type="polygon";const Tx=mre;var pZe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),yre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new pZe},e.prototype.buildPath=function(n,r){gre(n,r,!1)},e}(Nt);yre.prototype.type="polyline";const Tg=yre;var vZe={},gZe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),xre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new gZe},e.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=Hne(vZe,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var u=r.percent;u!==0&&(n.moveTo(i,a),u<1&&(o=i*(1-u)+o*u,s=a*(1-u)+s*u),n.lineTo(o,s))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(Nt);xre.prototype.type="line";const Xc=xre;var ra=[],mZe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function OV(t,e,n){var r=t.cpx2,i=t.cpy2;return r!=null||i!=null?[(n?z6:Tr)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?z6:Tr)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?B6:yi)(t.x1,t.cpx1,t.x2,e),(n?B6:yi)(t.y1,t.cpy1,t.y2,e)]}var wre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new mZe},e.prototype.buildPath=function(n,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,f=r.cpy2,h=r.percent;h!==0&&(n.moveTo(i,a),c==null||f==null?(h<1&&(N2(i,l,o,h,ra),l=ra[1],o=ra[2],N2(a,u,s,h,ra),u=ra[1],s=ra[2]),n.quadraticCurveTo(l,u,o,s)):(h<1&&(qc(i,l,c,o,h,ra),l=ra[1],c=ra[2],o=ra[3],qc(a,u,f,s,h,ra),u=ra[1],f=ra[2],s=ra[3]),n.bezierCurveTo(l,u,c,f,o,s)))},e.prototype.pointAt=function(n){return OV(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=OV(this.shape,n,!0);return Hte(r,r)},e}(Nt);wre.prototype.type="bezier-curve";const J3=wre;var yZe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),bre=function(t){an(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new yZe},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(s),f=Math.sin(s);n.moveTo(c*o+i,f*o+a),n.arc(i,a,o,s,l,!u)},e}(Nt);bre.prototype.type="arc";const dT=bre;var xZe=function(t){an(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(n,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Nt.prototype.getBoundingRect.call(this)},e}(Nt);const eL=xZe;var wZe=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}();const Cre=wZe;var bZe=function(t){an(e,t);function e(n,r,i,a,o,s){var l=t.call(this,o)||this;return l.x=n??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(Cre);const tL=bZe;var CZe=function(t){an(e,t);function e(n,r,i,a,o){var s=t.call(this,a)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(Cre);const Sre=CZe;var Of=[0,0],Pf=[0,0],Ww=new tt,Uw=new tt,SZe=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new tt;for(var r=0;r<2;r++)this._axes[r]=new tt;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),n)for(var u=0;u<4;u++)r[u].transform(n);tt.sub(i[0],r[1],r[0]),tt.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,i=!n;return Ww.set(1/0,1/0),Uw.set(0,0),!this._intersectCheckOneSide(this,e,Ww,Uw,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,Ww,Uw,i,-1)&&(r=!1,i)||i||tt.copy(n,r?Ww:Uw),r},t.prototype._intersectCheckOneSide=function(e,n,r,i,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,Of),this._getProjMinMaxOnAxis(l,n._corners,Pf),Of[1]<Pf[0]||Of[0]>Pf[1]){if(s=!1,a)return s;var c=Math.abs(Pf[0]-Of[1]),f=Math.abs(Of[0]-Pf[1]);Math.min(c,f)>i.len()&&(c<f?tt.scale(i,u,-c*o):tt.scale(i,u,f*o))}else if(r){var c=Math.abs(Pf[0]-Of[1]),f=Math.abs(Of[0]-Pf[1]);Math.min(c,f)<r.len()&&(c<f?tt.scale(r,u,c*o):tt.scale(r,u,-f*o))}}return s},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var i=this._axes[e],a=this._origin,o=n[0].dot(i)+a[e],s=o,l=o,u=1;u<n.length;u++){var c=n[u].dot(i)+a[e];s=Math.min(c,s),l=Math.max(c,l)}r[0]=s,r[1]=l},t}();const L2=SZe;var DZe=[],_Ze=function(t){an(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Et(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(DZe)),n.union(a)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(n,r))return!0}return!1},e}(_g);const Dre=_Ze;var _re=Jn();function pT(t,e,n,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=t==="update";if(s){var u=void 0,c=void 0,f=void 0;r?(u=wt(r.duration,200),c=wt(r.easing,"cubicOut"),f=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(f=a.delay)),lt(f)&&(f=f(n,i)),lt(u)&&(u=u(n));var h={duration:u||0,delay:f,easing:c};return h}else return null}function nL(t,e,n,r,i,a,o){var s=!1,l;lt(i)?(o=a,a=i,i=null):Ye(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=t==="leave";u||e.stopAnimation("leave");var c=pT(t,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:a,force:!!a||!!o,setToFinal:!u,scope:t,during:o};s?e.animateFrom(n,p):e.animateTo(n,p)}else e.stopAnimation(),!s&&e.attr(n),o&&o(1),a&&a()}function Ni(t,e,n,r,i,a){nL("update",t,e,n,r,i,a)}function Ca(t,e,n,r,i,a){nL("enter",t,e,n,r,i,a)}function l0(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function z2(t,e,n,r,i,a){l0(t)||nL("leave",t,e,n,r,i,a)}function PV(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),z2(t,{style:{opacity:0}},e,n,r)}function B2(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||PV(i,e,n,r)}):PV(t,e,n,r)}function rL(t){_re(t).oldStyle=t.style}function TZe(t){return _re(t).oldStyle}var V2=Math.max,W2=Math.min,$R={};function Tre(t){return Nt.extend(t)}var EZe=nZe;function Ere(t,e){return EZe(t,e)}function Xo(t,e){$R[t]=e}function Are(t){if($R.hasOwnProperty(t))return $R[t]}function vT(t,e,n,r){var i=tZe(t,e);return n&&(r==="center"&&(n=Nre(n,i.getBoundingRect())),aL(i,n)),i}function iL(t,e,n){var r=new Pl({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(n==="center"){var a={width:i.width,height:i.height};r.setStyle(Nre(e,a))}}});return r}function Nre(t,e){var n=e.width/e.height,r=t.height*n,i;r<=t.width?i=t.height:(r=t.width,i=r/n);var a=t.x+t.width/2,o=t.y+t.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var kre=rZe;function aL(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function vy(t,e){return Hne(t,t,{lineWidth:e}),t}function AZe(t){return jne(t.shape,t.shape,t.style),t}var NZe=ph;function gT(t,e){for(var n=bx([]);t&&t!==e;)kc(n,t.getLocalTransform(),n),t=t.parent;return n}function oL(t,e,n){return e&&!Xi(e)&&(e=nT.getLocalTransform(e)),n&&(e=Cx([],e)),Hi([],t,e)}function Ire(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[t==="left"?-r:t==="right"?r:0,t==="top"?-i:t==="bottom"?i:0];return a=oL(a,e,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function FV(t){return!t.isGroup}function kZe(t){return t.shape!=null}function Rre(t,e,n){if(!t||!e)return;function r(o){var s={};return o.traverse(function(l){FV(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return kZe(o)&&(s.shape=De({},o.shape)),s}var a=r(t);e.traverse(function(o){if(FV(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),Ni(o,l,n,Xt(o).dataIndex)}}})}function sL(t,e){return $e(t,function(n){var r=n[0];r=V2(r,e.x),r=W2(r,e.x+e.width);var i=n[1];return i=V2(i,e.y),i=W2(i,e.y+e.height),[r,i]})}function $re(t,e){var n=V2(t.x,e.x),r=W2(t.x+t.width,e.x+e.width),i=V2(t.y,e.y),a=W2(t.y+t.height,e.y+e.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function Ex(t,e,n){var r=De({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),pt(i,n),new Pl(r)):vT(t.replace("path://",""),r,n,"center")}function IZe(t,e,n,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(Mre(t,e,n,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function Mre(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,h=jA(c,f,l,u);if(RZe(h))return!1;var d=t-i,p=e-a,v=jA(d,p,l,u)/h;if(v<0||v>1)return!1;var m=jA(d,p,c,f)/h;return!(m<0||m>1)}function jA(t,e,n,r){return t*r-n*e}function RZe(t){return t<=1e-6&&t>=-1e-6}function mT(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,i=Be(e)?{formatter:e}:e,a=n.mainType,o=n.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=t.formatterParamsExtra;l&&G(Ot(l),function(c){td(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=Xt(t.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:r,option:pt({content:r,formatterParams:s},i)}}function LV(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function yT(t,e){if(t)if(Me(t))for(var n=0;n<t.length;n++)LV(t[n],e);else LV(t,e)}Xo("circle",hT);Xo("ellipse",Z3);Xo("sector",El);Xo("ring",Q3);Xo("polygon",Tx);Xo("polyline",Tg);Xo("rect",qn);Xo("line",Xc);Xo("bezierCurve",J3);Xo("arc",dT);const $Ze=Object.freeze(Object.defineProperty({__proto__:null,Arc:dT,BezierCurve:J3,BoundingRect:Et,Circle:hT,CompoundPath:eL,Ellipse:Z3,Group:sr,Image:Pl,IncrementalDisplayable:Dre,Line:Xc,LinearGradient:tL,OrientedBoundingRect:L2,Path:Nt,Point:tt,Polygon:Tx,Polyline:Tg,RadialGradient:Sre,Rect:qn,Ring:Q3,Sector:El,Text:Vr,applyTransform:oL,clipPointsByRect:sL,clipRectByRect:$re,createIcon:Ex,extendPath:Ere,extendShape:Tre,getShapeClass:Are,getTransform:gT,groupTransition:Rre,initProps:Ca,isElementRemoved:l0,lineLineIntersect:Mre,linePolygonIntersect:IZe,makeImage:iL,makePath:vT,mergePath:kre,registerShape:Xo,removeElement:z2,removeElementWithFadeOut:B2,resizePath:aL,setTooltipConfig:mT,subPixelOptimize:NZe,subPixelOptimizeLine:vy,subPixelOptimizeRect:AZe,transformDirection:Ire,traverseElements:yT,updateProps:Ni},Symbol.toStringTag,{value:"Module"}));var xT={};function MZe(t,e){for(var n=0;n<Vo.length;n++){var r=Vo[n],i=e[r],a=t.ensureState(r);a.style=a.style||{},a.style.text=i}var o=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(o,!0)}function zV(t,e,n){var r=t.labelFetcher,i=t.labelDataIndex,a=t.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=lt(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var l={normal:s},u=0;u<Vo.length;u++){var c=Vo[u],f=e[c];l[c]=wt(r?r.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,s)}return l}function Ax(t,e,n,r){n=n||xT;for(var i=t instanceof Vr,a=!1,o=0;o<O2.length;o++){var s=e[O2[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?t:t.getTextContent();if(a){i||(l||(l=new Vr,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var u=zV(n,e),c=e.normal,f=!!c.getShallow("show"),h=id(c,r&&r.normal,n,!1,!i);h.text=u.normal,i||t.setTextConfig(BV(c,n,!1));for(var o=0;o<Vo.length;o++){var d=Vo[o],s=e[d];if(s){var p=l.ensureState(d),v=!!wt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=id(s,r&&r[d],n,!0,!i),p.style.text=u[d],!i){var m=t.ensureState(d);m.textConfig=BV(s,n,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),n.enableTextSetter&&(wT(l).setLabelText=function(g){var y=zV(n,e,g);MZe(l,y)})}else l&&(l.ignore=!0);t.dirty()}function Nx(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<Vo.length;r++){var i=Vo[r];n[i]=t.getModel([i,e])}return n}function id(t,e,n,r,i){var a={};return OZe(a,t,n,r,i),e&&De(a,e),a}function BV(t,e,n){e=e||{};var r={},i,a=t.getShallow("rotate"),o=wt(t.getShallow("distance"),n?null:5),s=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function OZe(t,e,n,r,i){n=n||xT;var a=e.ecModel,o=a&&a.option.textStyle,s=PZe(e),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=e.getModel(["rich",u]);GV(l[u]={},c,o,n,r,i,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var h=e.get("minMargin");h!=null&&(t.margin=h),GV(t,e,o,n,r,i,!0,!1)}function PZe(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||xT).rich;if(n){e=e||{};for(var r=Ot(n),i=0;i<r.length;i++){var a=r[i];e[a]=1}}t=t.parentModel}return e}var VV=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],WV=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],UV=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function GV(t,e,n,r,i,a,o,s){n=!i&&n||xT;var l=r&&r.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=wt(e.getShallow("opacity"),n.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||n.color,c=c||n.textBorderColor),u!=null&&(t.fill=u),c!=null&&(t.stroke=c);var h=wt(e.getShallow("textBorderWidth"),n.textBorderWidth);h!=null&&(t.lineWidth=h);var d=wt(e.getShallow("textBorderType"),n.textBorderType);d!=null&&(t.lineDash=d);var p=wt(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);p!=null&&(t.lineDashOffset=p),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!i&&!a&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var v=0;v<VV.length;v++){var m=VV[v],g=wt(e.getShallow(m),n[m]);g!=null&&(t[m]=g)}for(var v=0;v<WV.length;v++){var m=WV[v],g=e.getShallow(m);g!=null&&(t[m]=g)}if(t.verticalAlign==null){var y=e.getShallow("baseline");y!=null&&(t.verticalAlign=y)}if(!o||!r.disableBox){for(var v=0;v<UV.length;v++){var m=UV[v],g=e.getShallow(m);g!=null&&(t[m]=g)}var x=e.getShallow("borderType");x!=null&&(t.borderDash=x),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function FZe(t,e){var n=e&&e.getModel("textStyle");return ys([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var wT=Jn();function LZe(t,e,n,r){if(t){var i=wT(t);i.prevValue=i.value,i.value=n;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}var zZe=["textStyle","color"],qA=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],KA=new Vr,BZe=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(zZe):null)},t.prototype.getFont=function(){return FZe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<qA.length;r++)n[qA[r]]=this.getShallow(qA[r]);return KA.useStyle(n),KA.update(),KA.getBoundingRect()},t}();const VZe=BZe;var Ore=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],WZe=dy(Ore),UZe=function(){function t(){}return t.prototype.getLineStyle=function(e){return WZe(this,e)},t}(),Pre=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],GZe=dy(Pre),HZe=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return GZe(this,e,n)},t}(),Nd=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){mt(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,i=r==null?r:r[e];if(i==null&&!n){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},t.prototype.getModel=function(e,n){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(a,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(ht(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!St.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();G3(Nd);PXe(Nd);Ko(Nd,UZe);Ko(Nd,HZe);Ko(Nd,VXe);Ko(Nd,VZe);const gr=Nd;var jZe=Math.round(Math.random()*10);function kx(t){return[t||"",jZe++].join("_")}function qZe(t){var e={};t.registerSubTypeDefaulter=function(n,r){var i=sl(n);e[i.main]=r},t.determineSubType=function(n,r){var i=r.type;if(!i){var a=sl(n).main;t.hasSubTypes(n)&&e[a]&&(i=e[a](r))}return i}}function KZe(t,e){t.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=n(o),c=u.graph,f=u.noEntryList,h={};for(G(a,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),G(p.successor,v?g:m)}G(h,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function g(y){h[y]=!0,m(y)}};function n(a){var o={},s=[];return G(a,function(l){var u=r(o,l),c=u.originalDeps=e(l),f=i(c,a);u.entryCount=f.length,u.entryCount===0&&s.push(l),G(f,function(h){kt(u.predecessor,h)<0&&u.predecessor.push(h);var d=r(o,h);kt(d.successor,h)<0&&d.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return G(a,function(l){kt(o,l)>=0&&s.push(l)}),s}}function Fre(t,e){return mt(mt({},t,!0),e,!0)}const XZe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},YZe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var U2="ZH",lL="EN",gy=lL,Hb={},uL={},Lre=St.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(U2)>-1?U2:gy}():gy;function cL(t,e){t=t.toUpperCase(),uL[t]=new gr(e),Hb[t]=e}function ZZe(t){if(Be(t)){var e=Hb[t.toUpperCase()]||{};return t===U2||t===lL?ht(e):mt(ht(e),ht(Hb[gy]),!1)}else return mt(ht(t),ht(Hb[gy]),!1)}function QZe(t){return uL[t]}function JZe(){return uL[gy]}cL(lL,XZe);cL(U2,YZe);var fL=1e3,hL=fL*60,u0=hL*60,So=u0*24,HV=So*365,Mm={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Gw="{yyyy}-{MM}-{dd}",jV={year:"{yyyy}",month:"{yyyy}-{MM}",day:Gw,hour:Gw+" "+Mm.hour,minute:Gw+" "+Mm.minute,second:Gw+" "+Mm.second,millisecond:Mm.none},XA=["year","month","day","hour","minute","second","millisecond"],zre=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Pi(t,e){return t+="","0000".substr(0,e-t.length)+t}function nv(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function eQe(t){return t===nv(t)}function tQe(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Ix(t,e,n,r){var i=Bo(t),a=i[dL(n)](),o=i[rv(n)]()+1,s=Math.floor((o-1)/3)+1,l=i[bT(n)](),u=i["get"+(n?"UTC":"")+"Day"](),c=i[my(n)](),f=(c-1)%12+1,h=i[CT(n)](),d=i[ST(n)](),p=i[DT(n)](),v=r instanceof gr?r:QZe(r||Lre)||JZe(),m=v.getModel("time"),g=m.get("month"),y=m.get("monthAbbr"),x=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Pi(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,g[o-1]).replace(/{MMM}/g,y[o-1]).replace(/{MM}/g,Pi(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Pi(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,x[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Pi(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Pi(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Pi(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Pi(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,Pi(p,3)).replace(/{S}/g,p+"")}function nQe(t,e,n,r,i){var a=null;if(Be(n))a=n;else if(lt(n))a=n(t.value,e,{level:t.level});else{var o=De({},Mm);if(t.level>0)for(var s=0;s<XA.length;++s)o[XA[s]]="{primary|"+o[XA[s]]+"}";var l=n?n.inherit===!1?n:pt(n,o):o,u=Bre(t.value,i);if(l[u])a=l[u];else if(l.inherit){for(var c=zre.indexOf(u),s=c-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(Me(a)){var f=t.level==null?0:t.level>=0?t.level:a.length+t.level;f=Math.min(f,a.length-1),a=a[f]}}return Ix(new Date(t.value),a,i,r)}function Bre(t,e){var n=Bo(t),r=n[rv(e)]()+1,i=n[bT(e)](),a=n[my(e)](),o=n[CT(e)](),s=n[ST(e)](),l=n[DT(e)](),u=l===0,c=u&&s===0,f=c&&o===0,h=f&&a===0,d=h&&i===1,p=d&&r===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function qV(t,e,n){var r=Zt(t)?Bo(t):t;switch(e=e||Bre(t,n),e){case"year":return r[dL(n)]();case"half-year":return r[rv(n)]()>=6?1:0;case"quarter":return Math.floor((r[rv(n)]()+1)/4);case"month":return r[rv(n)]();case"day":return r[bT(n)]();case"half-day":return r[my(n)]()/24;case"hour":return r[my(n)]();case"minute":return r[CT(n)]();case"second":return r[ST(n)]();case"millisecond":return r[DT(n)]()}}function dL(t){return t?"getUTCFullYear":"getFullYear"}function rv(t){return t?"getUTCMonth":"getMonth"}function bT(t){return t?"getUTCDate":"getDate"}function my(t){return t?"getUTCHours":"getHours"}function CT(t){return t?"getUTCMinutes":"getMinutes"}function ST(t){return t?"getUTCSeconds":"getSeconds"}function DT(t){return t?"getUTCMilliseconds":"getMilliseconds"}function rQe(t){return t?"setUTCFullYear":"setFullYear"}function Vre(t){return t?"setUTCMonth":"setMonth"}function Wre(t){return t?"setUTCDate":"setDate"}function Ure(t){return t?"setUTCHours":"setHours"}function Gre(t){return t?"setUTCMinutes":"setMinutes"}function Hre(t){return t?"setUTCSeconds":"setSeconds"}function jre(t){return t?"setUTCMilliseconds":"setMilliseconds"}function iQe(t,e,n,r,i,a,o,s){var l=new Vr({style:{text:t,font:e,align:n,verticalAlign:r,padding:i,rich:a,overflow:o?"truncate":null,lineHeight:s}});return l.getBoundingRect()}function pL(t){if(!Ane(t))return Be(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function vL(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Rx=A3;function MR(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&ys(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=e==="time",s=t instanceof Date;if(o||s){var l=o?Bo(t):t;if(isNaN(+l)){if(s)return"-"}else return Ix(l,r,n)}if(e==="ordinal")return C2(t)?i(t):Zt(t)&&a(t)?t+"":"-";var u=fy(t);return a(u)?pL(u):C2(t)?i(t):typeof t=="boolean"?t+"":"-"}var KV=["a","b","c","d","e","f","g"],YA=function(t,e){return"{"+t+(e??"")+"}"};function gL(t,e,n){Me(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=KV[a];t=t.replace(YA(o),YA(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var u=e[s][i[l]];t=t.replace(YA(KV[l],s),n?oa(u):u)}return t}function qre(t,e){var n=Be(t)?{color:t,extraCssText:e}:t||{},r=n.color,i=n.type;e=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+oa(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+oa(r)+";"+(e||"")+'"></span>';var o=n.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function aQe(t,e,n){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var r=Bo(e),i=n?"getUTC":"get",a=r[i+"FullYear"](),o=r[i+"Month"]()+1,s=r[i+"Date"](),l=r[i+"Hours"](),u=r[i+"Minutes"](),c=r[i+"Seconds"](),f=r[i+"Milliseconds"]();return t=t.replace("MM",Pi(o,2)).replace("M",o).replace("yyyy",a).replace("yy",Pi(a%100+"",2)).replace("dd",Pi(s,2)).replace("d",s).replace("hh",Pi(l,2)).replace("h",l).replace("mm",Pi(u,2)).replace("m",u).replace("ss",Pi(c,2)).replace("s",c).replace("SSS",Pi(f,3)),t}function oQe(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)}function ad(t,e){return e=e||"transparent",Be(t)?t:Ye(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}var jb=G,sQe=["left","right","top","bottom","width","height"],Hw=[["width","left","right"],["height","top","bottom"]];function mL(t,e,n,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),f=e.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(t==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=a+v,d>r||l.newline?(a=0,d=v,o+=s+n,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=o+m,p>i||l.newline?(a+=s+n,o=0,p=m,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),t==="horizontal"?a=d+n:o=p+n)})}var iv=mL;Pt(mL,"vertical");Pt(mL,"horizontal");function Yc(t,e,n){n=Rx(n||0);var r=e.width,i=e.height,a=En(t.left,r),o=En(t.top,i),s=En(t.right,r),l=En(t.bottom,i),u=En(t.width,r),c=En(t.height,i),f=n[2]+n[0],h=n[1]+n[3],d=t.aspect;switch(isNaN(u)&&(u=r-s-h-a),isNaN(c)&&(c=i-l-f-o),d!=null&&(isNaN(u)&&isNaN(c)&&(d>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(a)&&(a=r-s-u-h),isNaN(o)&&(o=i-l-c-f),t.left||t.right){case"center":a=r/2-u/2-n[3];break;case"right":a=r-u-h;break}switch(t.top||t.bottom){case"middle":case"center":o=i/2-c/2-n[0];break;case"bottom":o=i-c-f;break}a=a||0,o=o||0,isNaN(u)&&(u=r-h-a-(s||0)),isNaN(c)&&(c=i-f-o-(l||0));var p=new Et(a+n[3],o+n[0],u,c);return p.margin=n,p}function lQe(t,e,n,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||t,a.x=t.x,a.y=t.y,!o&&!s)return!1;var u;if(l==="raw")u=t.type==="group"?new Et(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Yc(pt({width:u.width,height:u.height},e),n,r),h=o?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(a.x=h,a.y=d):(a.x+=h,a.y+=d),a===t&&t.markRedraw(),!0}function yy(t){var e=t.layoutMode||t.constructor.layoutMode;return Ye(e)?e:e?{type:e}:null}function Kv(t,e,n){var r=n&&n.ignoreSize;!Me(r)&&(r=[r,r]);var i=o(Hw[0],0),a=o(Hw[1],1);u(Hw[0],t,i),u(Hw[1],t,a);function o(c,f){var h={},d=0,p={},v=0,m=2;if(jb(c,function(x){p[x]=t[x]}),jb(c,function(x){s(e,x)&&(h[x]=p[x]=e[x]),l(h,x)&&d++,l(p,x)&&v++}),r[f])return l(e,c[1])?p[c[2]]=null:l(e,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var y=c[g];if(!s(h,y)&&s(t,y)){h[y]=t[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){jb(c,function(d){f[d]=h[d]})}}function _T(t){return uQe({},t)}function uQe(t,e){return e&&t&&jb(sQe,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var cQe=Jn(),Eg=function(t){He(e,t);function e(n,r,i){var a=t.call(this,n,r,i)||this;return a.uid=kx("ec_cpt_model"),a}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=yy(this),a=i?_T(n):{},o=r.getTheme();mt(n,o.get(this.mainType)),mt(n,this.getDefaultOption()),i&&Kv(n,a,i)},e.prototype.mergeOption=function(n,r){mt(this.option,n,!0);var i=yy(this);i&&Kv(this.option,n,i)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!$Xe(n))return n.defaultOption;var r=cQe(this);if(!r.defaultOption){for(var i=[],a=n;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=mt(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var i=n+"Index",a=n+"Id";return _x(this.ecModel,n,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(gr);Pne(Eg,gr);oT(Eg);qZe(Eg);KZe(Eg,fQe);function fQe(t){var e=[];return G(Eg.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=$e(e,function(n){return sl(n).main}),t!=="dataset"&&kt(e,"dataset")<=0&&e.unshift("dataset"),e}const nn=Eg;var Kre="";typeof navigator<"u"&&(Kre=navigator.platform||"");var qd="rgba(0, 0, 0, 0.2)";const hQe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:qd,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:qd,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:qd,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:qd,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:qd,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:qd,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Kre.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Xre=ut(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Yo="original",ka="arrayRows",Ls="objectRows",Fl="keyedColumns",Rc="typedArray",Yre="unknown",su="column",Ag="row",Yr={Must:1,Might:2,Not:3},Zre=Jn();function dQe(t){Zre(t).datasetMap=ut()}function pQe(t,e,n){var r={},i=yL(e);if(!i||!t)return r;var a=[],o=[],s=e.ecModel,l=Zre(s).datasetMap,u=i.uid+"_"+n.seriesLayoutBy,c,f;t=t.slice(),G(t,function(v,m){var g=Ye(v)?v:t[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),r[g.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});G(t,function(v,m){var g=v.name,y=p(v);if(c==null){var x=h.valueWayDim;d(r[g],x,y),d(o,x,y),h.valueWayDim+=y}else if(c===m)d(r[g],0,y),d(a,0,y);else{var x=h.categoryWayDim;d(r[g],x,y),d(o,x,y),h.categoryWayDim+=y}});function d(v,m,g){for(var y=0;y<g;y++)v.push(m+y)}function p(v){var m=v.dimsDef;return m?m.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function vQe(t,e,n){var r={},i=yL(t);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===Ls||a===Fl)&&G(o,function(c,f){(Ye(c)?c.name:c)==="name"&&(s=f)});var l=function(){for(var c={},f={},h=[],d=0,p=Math.min(5,n);d<p;d++){var v=Jre(e.data,a,e.seriesLayoutBy,o,e.startIndex,d);h.push(v);var m=v===Yr.Not;if(m&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!m&&h[c.n]===Yr.Not)&&(c.n=d),g(c)&&h[c.n]!==Yr.Not)return c;m||(v===Yr.Might&&f.v==null&&d!==s&&(f.v=d),(f.n==null||f.n===f.v)&&(f.n=d))}function g(y){return y.v!=null&&y.n!=null}return g(c)?c:g(f)?f:null}();if(l){r.value=[l.v];var u=s??l.n;r.itemName=[u],r.seriesName=[u]}return r}function yL(t){var e=t.get("data",!0);if(!e)return _x(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Wi).models[0]}function gQe(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:_x(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Wi).models}function Qre(t,e){return Jre(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Jre(t,e,n,r,i,a){var o,s=5;if(Na(t))return Yr.Not;var l,u;if(r){var c=r[a];Ye(c)?(l=c.name,u=c.type):Be(c)&&(l=c)}if(u!=null)return u==="ordinal"?Yr.Must:Yr.Not;if(e===ka){var f=t;if(n===Ag){for(var h=f[a],d=0;d<(h||[]).length&&d<s;d++)if((o=w(h[i+d]))!=null)return o}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(o=w(p[a]))!=null)return o}}else if(e===Ls){var v=t;if(!l)return Yr.Not;for(var d=0;d<v.length&&d<s;d++){var m=v[d];if(m&&(o=w(m[l]))!=null)return o}}else if(e===Fl){var g=t;if(!l)return Yr.Not;var h=g[l];if(!h||Na(h))return Yr.Not;for(var d=0;d<h.length&&d<s;d++)if((o=w(h[d]))!=null)return o}else if(e===Yo)for(var y=t,d=0;d<y.length&&d<s;d++){var m=y[d],x=Dx(m);if(!Me(x))return Yr.Not;if((o=w(x[a]))!=null)return o}function w(b){var C=Be(b);if(b!=null&&isFinite(b)&&b!=="")return C?Yr.Might:Yr.Not;if(C&&b!=="-")return Yr.Must}return Yr.Not}var OR=ut();function mQe(t,e){Ya(OR.get(t)==null&&e),OR.set(t,e)}function yQe(t,e,n){var r=OR.get(e);if(!r)return n;var i=r(t);return i?n.concat(i):n}var XV=Jn();Jn();var xL=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var i=xr(this.get("color",!0)),a=this.get("colorLayer",!0);return wQe(this,XV,i,a,e,n,r)},t.prototype.clearColorPalette=function(){bQe(this,XV)},t}();function xQe(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function wQe(t,e,n,r,i,a,o){a=a||t;var s=e(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=o==null||!r?n:xQe(r,o);if(c=c||n,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function bQe(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var jw,rm,YV,ZV="\0_ec_inner",CQe=1,eie=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i,a,o,s){a=a||{},this.option=null,this._theme=new gr(a),this._locale=new gr(o),this._optionManager=s},e.prototype.setOption=function(n,r,i){var a=eW(r);this._optionManager.setOption(n,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(n,r){return this._resetOption(n,eW(r))},e.prototype._resetOption=function(n,r){var i=!1,a=this._optionManager;if(!n||n==="recreate"){var o=a.mountOption(n==="recreate");!this.option||n==="recreate"?YV(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var l=a.getMediaOption(this);l.length&&G(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=ut(),u=r&&r.replaceMergeMainTypeMap;dQe(this),G(n,function(f,h){f!=null&&(nn.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?ht(f):mt(i[h],f,!0))}),u&&u.each(function(f,h){nn.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),nn.topologicalTravel(s,nn.getAllClassMainTypes(),c,this);function c(f){var h=yQe(this,f,xr(n[f])),d=a.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=gXe(d,h,p);DXe(v,f,nn),i[f]=null,a.set(f,null),o.set(f,0);var m=[],g=[],y=0,x;G(v,function(w,b){var C=w.existing,S=w.newOption;if(!S)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var D=f==="series",_=nn.getClass(f,w.keyInfo.subType,!D);if(!_)return;if(f==="tooltip"){if(x)return;x=!0}if(C&&C.constructor===_)C.name=w.keyInfo.name,C.mergeOption(S,this),C.optionUpdated(S,!1);else{var T=De({componentIndex:b},w.keyInfo);C=new _(S,this,this,T),De(C,T),w.brandNew&&(C.__requireNewView=!0),C.init(S,this,this),C.optionUpdated(null,!0)}}C?(m.push(C.option),g.push(C),y++):(m.push(void 0),g.push(void 0))},this),i[f]=m,a.set(f,g),o.set(f,y),f==="series"&&jw(this)}this._seriesIndices||jw(this)},e.prototype.getOption=function(){var n=ht(this.option);return G(n,function(r,i){if(nn.hasClass(i)){for(var a=xr(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!hy(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,n[i]=a}}),delete n[ZV],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,a=n.id,o=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],G(xr(i),function(u){s[u]&&l.push(s[u])})):a!=null?l=QV("id",a,s):o!=null?l=QV("name",o,s):l=Un(s,function(u){return!!u}),JV(l,n)},e.prototype.findComponents=function(n){var r=n.query,i=n.mainType,a=s(r),o=a?this.queryComponents(a):Un(this._componentsMap.get(i),function(u){return!!u});return l(JV(o,n));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return n.filter?Un(u,n.filter):u}},e.prototype.eachComponent=function(n,r,i){var a=this._componentsMap;if(lt(n)){var o=r,s=n;a.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(o,h,p,p.componentIndex)}})}else for(var l=Be(n)?a.get(n):Ye(n)?this.findComponents(n):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=yl(n,null);return Un(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return Un(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return Un(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){rm(this),G(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)},this)},e.prototype.eachRawSeries=function(n,r){G(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,i){rm(this),G(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===n&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(n,r,i){return G(this.getSeriesByType(n),r,i)},e.prototype.isSeriesFiltered=function(n){return rm(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){rm(this);var i=[];G(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];n.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=ut(i)},e.prototype.restoreData=function(n){jw(this);var r=this._componentsMap,i=[];r.each(function(a,o){nn.hasClass(o)&&i.push(o)}),nn.topologicalTravel(i,nn.getAllClassMainTypes(),function(a){G(r.get(a),function(o){o&&(a!=="series"||!SQe(o,n))&&o.restoreData()})})},e.internalField=function(){jw=function(n){var r=n._seriesIndices=[];G(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=ut(r)},rm=function(n){},YV=function(n,r){n.option={},n.option[ZV]=CQe,n._componentsMap=ut({series:[]}),n._componentsCount=ut();var i=r.aria;Ye(i)&&i.enabled==null&&(i.enabled=!0),DQe(r,n._theme.option),mt(r,hQe,!1),n._mergeOption(r,null)}}(),e}(gr);function SQe(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,i=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||i!=null&&t.name!==i}}function DQe(t,e){var n=t.color&&!t.colorLayer;G(e,function(r,i){i==="colorLayer"&&n||nn.hasClass(i)||(typeof r=="object"?t[i]=t[i]?mt(t[i],r,!1):ht(r):t[i]==null&&(t[i]=r))})}function QV(t,e,n){if(Me(e)){var r=ut();return G(e,function(a){if(a!=null){var o=yl(a,null);o!=null&&r.set(a,!0)}}),Un(n,function(a){return a&&r.get(a[t])})}else{var i=yl(e,null);return Un(n,function(a){return a&&i!=null&&a[t]===i})}}function JV(t,e){return e.hasOwnProperty("subType")?Un(t,function(n){return n&&n.subType===e.subType}):t}function eW(t){var e=ut();return t&&G(xr(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}Ko(eie,xL);const tie=eie;var _Qe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],TQe=function(){function t(e){G(_Qe,function(n){this[n]=qt(e[n],e)},this)}return t}();const nie=TQe;var ZA={},EQe=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];G(ZA,function(i,a){var o=i.create(e,n);r=r.concat(o||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){G(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){ZA[e]=n},t.get=function(e){return ZA[e]},t}();const TT=EQe;var AQe=/^(min|max)?(.+)$/,NQe=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(G(xr(e.series),function(o){o&&o.data&&Na(o.data)&&S2(o.data)}),G(xr(e.dataset),function(o){o&&o.source&&Na(o.source)&&S2(o.source)})),e=ht(e);var i=this._optionBackup,a=kQe(e,n,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],ht(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(n=ht(r[i.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,u=i.length;l<u;l++)IQe(i[l].query,n,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!$Qe(o,this._currentMediaIndices)&&(s=$e(o,function(c){return ht(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},t}();function kQe(t,e,n){var r=[],i,a,o=t.baseOption,s=t.timeline,l=t.options,u=t.media,c=!!t.media,f=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((f||c)&&(t.options=t.media=null),a=t),c&&Me(u)&&G(u,function(d){d&&d.option&&(d.query?r.push(d):i||(i=d))}),h(a),G(l,function(d){return h(d)}),G(r,function(d){return h(d.option)});function h(d){G(e,function(p){p(d,n)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function IQe(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return G(t,function(a,o){var s=o.match(AQe);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();RQe(r[u],a,l)||(i=!1)}}),i}function RQe(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function $Qe(t,e){return t.join(",")===e.join(",")}const MQe=NQe;var es=G,xy=Ye,tW=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function QA(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=tW.length;n<r;n++){var i=tW[n],a=e.normal,o=e.emphasis;a&&a[i]&&(t[i]=t[i]||{},t[i].normal?mt(t[i].normal,a[i]):t[i].normal=a[i],a[i]=null),o&&o[i]&&(t[i]=t[i]||{},t[i].emphasis?mt(t[i].emphasis,o[i]):t[i].emphasis=o[i],o[i]=null)}}function xi(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,pt(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function Om(t){xi(t,"itemStyle"),xi(t,"lineStyle"),xi(t,"areaStyle"),xi(t,"label"),xi(t,"labelLine"),xi(t,"upperLabel"),xi(t,"edgeLabel")}function tr(t,e){var n=xy(t)&&t[e],r=xy(n)&&n.textStyle;if(r)for(var i=0,a=nV.length;i<a;i++){var o=nV[i];r.hasOwnProperty(o)&&(n[o]=r[o])}}function mo(t){t&&(Om(t),tr(t,"label"),t.emphasis&&tr(t.emphasis,"label"))}function OQe(t){if(xy(t)){QA(t),Om(t),tr(t,"label"),tr(t,"upperLabel"),tr(t,"edgeLabel"),t.emphasis&&(tr(t.emphasis,"label"),tr(t.emphasis,"upperLabel"),tr(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(QA(e),mo(e));var n=t.markLine;n&&(QA(n),mo(n));var r=t.markArea;r&&mo(r);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var a=t.links||t.edges;if(a&&!Na(a))for(var o=0;o<a.length;o++)mo(a[o]);G(t.categories,function(u){Om(u)})}if(i&&!Na(i))for(var o=0;o<i.length;o++)mo(i[o]);if(e=t.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)mo(s[o]);if(n=t.markLine,n&&n.data)for(var l=n.data,o=0;o<l.length;o++)Me(l[o])?(mo(l[o][0]),mo(l[o][1])):mo(l[o]);t.type==="gauge"?(tr(t,"axisLabel"),tr(t,"title"),tr(t,"detail")):t.type==="treemap"?(xi(t.breadcrumb,"itemStyle"),G(t.levels,function(u){Om(u)})):t.type==="tree"&&Om(t.leaves)}}function Vl(t){return Me(t)?t:t?[t]:[]}function nW(t){return(Me(t)?t[0]:t)||{}}function PQe(t,e){es(Vl(t.series),function(r){xy(r)&&OQe(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),es(n,function(r){es(Vl(t[r]),function(i){i&&(tr(i,"axisLabel"),tr(i.axisPointer,"label"))})}),es(Vl(t.parallel),function(r){var i=r&&r.parallelAxisDefault;tr(i,"axisLabel"),tr(i&&i.axisPointer,"label")}),es(Vl(t.calendar),function(r){xi(r,"itemStyle"),tr(r,"dayLabel"),tr(r,"monthLabel"),tr(r,"yearLabel")}),es(Vl(t.radar),function(r){tr(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),es(Vl(t.geo),function(r){xy(r)&&(mo(r),es(Vl(r.regions),function(i){mo(i)}))}),es(Vl(t.timeline),function(r){mo(r),xi(r,"label"),xi(r,"itemStyle"),xi(r,"controlStyle",!0);var i=r.data;Me(i)&&G(i,function(a){Ye(a)&&(xi(a,"label"),xi(a,"itemStyle"))})}),es(Vl(t.toolbox),function(r){xi(r,"iconStyle"),es(r.feature,function(i){xi(i,"iconStyle")})}),tr(nW(t.axisPointer),"label"),tr(nW(t.tooltip).axisPointer,"label")}function FQe(t,e){for(var n=e.split(","),r=t,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function LQe(t,e,n,r){for(var i=e.split(","),a=t,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];(r||a[i[s]]==null)&&(a[i[s]]=n)}function rW(t){t&&G(zQe,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var zQe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],BQe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],JA=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function im(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<JA.length;n++){var r=JA[n][1],i=JA[n][0];e[r]!=null&&(e[i]=e[r])}}function iW(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function aW(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function VQe(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function rie(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&rie(t[n].children,e)}function iie(t,e){PQe(t,e),t.series=xr(t.series),G(t.series,function(n){if(Ye(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),iW(n.label);var i=n.data;if(i&&!Na(i))for(var a=0;a<i.length;a++)iW(i[a]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var o=FQe(n,"pointer.color");o!=null&&LQe(n,"itemStyle.color",o)}else if(r==="bar"){im(n),im(n.backgroundStyle),im(n.emphasis);var i=n.data;if(i&&!Na(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(im(i[a]),im(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),aW(n),rie(n.data,aW)}else r==="graph"||r==="sankey"?VQe(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&pt(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),rW(n)}}),t.dataRange&&(t.visualMap=t.dataRange),G(BQe,function(n){var r=t[n];r&&(Me(r)||(r=[r]),G(r,function(i){rW(i)}))})}function WQe(t){var e=ut();t.eachSeries(function(n){var r=n.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=n.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(UQe)}function UQe(t){G(t,function(e,n){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,c,f){var h=o.get(e.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=o.getRawIndex(f):d=o.get(e.stackedByDimension,f);for(var v=NaN,m=n-1;m>=0;m--){var g=t[m];if(s||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=cXe(h,y),v=y;break}}}return r[0]=h,r[1]=v,r})})}var ET=function(){function t(e){this.data=e.data||(e.sourceFormat===Fl?{}:[]),this.sourceFormat=e.sourceFormat||Yre,this.seriesLayoutBy=e.seriesLayoutBy||su,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&Qre(this,r)===Yr.Must&&(i.type="ordinal")}}return t}();function wL(t){return t instanceof ET}function PR(t,e,n){n=n||aie(t);var r=e.seriesLayoutBy,i=HQe(t,n,r,e.sourceHeader,e.dimensions),a=new ET({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:ht(e)});return a}function bL(t){return new ET({data:t,sourceFormat:Na(t)?Rc:Yo})}function GQe(t){return new ET({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:ht(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function aie(t){var e=Yre;if(Na(t))e=Rc;else if(Me(t)){t.length===0&&(e=ka);for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null){if(Me(i)){e=ka;break}else if(Ye(i)){e=Ls;break}}}}else if(Ye(t)){for(var a in t)if(td(t,a)&&Xi(t[a])){e=Fl;break}}return e}function HQe(t,e,n,r,i){var a,o;if(!t)return{dimensionsDefine:oW(i),startIndex:o,dimensionsDetectedCount:a};if(e===ka){var s=t;r==="auto"||r==null?sW(function(u){u!=null&&u!=="-"&&(Be(u)?o==null&&(o=1):o=0)},n,s,10):o=Zt(r)?r:r?1:0,!i&&o===1&&(i=[],sW(function(u,c){i[c]=u!=null?u+"":""},n,s,1/0)),a=i?i.length:n===Ag?s.length:s[0]?s[0].length:null}else if(e===Ls)i||(i=jQe(t));else if(e===Fl)i||(i=[],G(t,function(u,c){i.push(c)}));else if(e===Yo){var l=Dx(t[0]);a=Me(l)&&l.length||1}return{startIndex:o,dimensionsDefine:oW(i),dimensionsDetectedCount:a}}function jQe(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return Ot(n)}function oW(t){if(t){var e=ut();return $e(t,function(n,r){n=Ye(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function sW(t,e,n,r){if(e===Ag)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)t(a[i],i)}function oie(t){var e=t.sourceFormat;return e===Ls||e===Fl}var Ff,Lf,zf,lW,uW,sie=function(){function t(e,n){var r=wL(e)?e:bL(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Rc&&(this._offset=0,this._dimSize=n,this._data=i),uW(this,i,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;uW=function(o,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=lW[CL(u,c)];if(De(o,d),u===Rc)o.getItem=n,o.count=i,o.fillStorage=r;else{var p=lie(u,c);o.getItem=qt(p,null,s,f,h);var v=uie(u,c);o.count=qt(v,null,s,f,h)}};var n=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*o,f=0;f<u;f++)s[f]=l[c+f];return s},r=function(o,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=s-o,g=l[h],y=0;y<m;y++){var x=c[y*f+h];g[o+y]=x,x<p&&(p=x),x>v&&(v=x)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};lW=(e={},e[ka+"_"+su]={pure:!0,appendData:a},e[ka+"_"+Ag]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Ls]={pure:!0,appendData:a},e[Fl]={pure:!0,appendData:function(o){var s=this._data;G(o,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},e[Yo]={appendData:a},e[Rc]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),t}(),cW=function(t,e,n,r){return t[r]},qQe=(Ff={},Ff[ka+"_"+su]=function(t,e,n,r){return t[r+e]},Ff[ka+"_"+Ag]=function(t,e,n,r,i){r+=e;for(var a=i||[],o=t,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},Ff[Ls]=cW,Ff[Fl]=function(t,e,n,r,i){for(var a=i||[],o=0;o<n.length;o++){var s=n[o].name,l=t[s];a[o]=l?l[r]:null}return a},Ff[Yo]=cW,Ff);function lie(t,e){var n=qQe[CL(t,e)];return n}var fW=function(t,e,n){return t.length},KQe=(Lf={},Lf[ka+"_"+su]=function(t,e,n){return Math.max(0,t.length-e)},Lf[ka+"_"+Ag]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},Lf[Ls]=fW,Lf[Fl]=function(t,e,n){var r=n[0].name,i=t[r];return i?i.length:0},Lf[Yo]=fW,Lf);function uie(t,e){var n=KQe[CL(t,e)];return n}var eN=function(t,e,n){return t[e]},XQe=(zf={},zf[ka]=eN,zf[Ls]=function(t,e,n){return t[n]},zf[Fl]=eN,zf[Yo]=function(t,e,n){var r=Dx(t);return r instanceof Array?r[e]:r},zf[Rc]=eN,zf);function cie(t){var e=XQe[t];return e}function CL(t,e){return t===ka?t+"_"+e:t}function Xv(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var i=t.getStore(),a=i.getSource().sourceFormat;if(n!=null){var o=t.getDimensionIndex(n),s=i.getDimensionProperty(o);return cie(a)(r,o,s)}else{var l=r;return a===Yo&&(l=Dx(r)),l}}}}var YQe=/\{@(.+?)\}/g,ZQe=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),i=this.getRawValue(e,n),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),u=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:n,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,i,a,o){n=n||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),i!=null&&Me(l.value)&&(l.value=l.value[i]),!a){var u=s.getItemModel(e);a=u.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(lt(a))return l.status=n,l.dimensionIndex=i,a(l);if(Be(a)){var c=gL(a,l);return c.replace(YQe,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Xv(s,e,p);if(o&&Me(o.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(v=o.interpolatedValue[m])}return v!=null?v+"":""})}},t.prototype.getRawValue=function(e,n){return Xv(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function hW(t){var e,n;return Ye(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function c0(t){return new QQe(t)}var QQe=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(o!==l||s!==u)&&(a="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=u;var h=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(f||d<p)){var v=this._progress;if(Me(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,i,a){dW.reset(n,r,i,a),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:dW.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),Me(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),dW=function(){var t,e,n,r,i,a={reset:function(l,u,c,f){e=l,t=u,n=c,r=f,i=Math.ceil(r/n),a.next=n>1&&r>0?s:o}};return a;function o(){return e<t?e++:null}function s(){var l=e%i*n+Math.ceil(e/i),u=e>=t?null:l<r?l:e;return e++,u}}();function qb(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!Zt(t)&&t!=null&&t!=="-"&&(t=+Bo(t)),t==null||t===""?NaN:+t)}ut({number:function(t){return parseFloat(t)},time:function(t){return+Bo(t)},trim:function(t){return Be(t)?ys(t):t}});var JQe=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=Zt(e)?e:fy(e),i=Zt(n)?n:fy(n),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=Be(e),l=Be(n);s&&(r=l?e:0),l&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},t}(),eJe=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return qb(e,n)},t}();function tJe(t,e){var n=new eJe,r=t.data,i=n.sourceFormat=t.sourceFormat,a=t.startIndex,o="";t.seriesLayoutBy!==su&&sa(o);var s=[],l={},u=t.dimensionsDefine;if(u)G(u,function(v,m){var g=v.name,y={index:m,name:g,displayName:v.displayName};if(s.push(y),g!=null){var x="";td(l,g)&&sa(x),l[g]=y}});else for(var c=0;c<t.dimensionsDetectedCount;c++)s.push({index:c});var f=lie(i,su);e.__isBuiltIn&&(n.getRawDataItem=function(v){return f(r,a,s,v)},n.getRawData=qt(nJe,null,t)),n.cloneRawData=qt(rJe,null,t);var h=uie(i,su);n.count=qt(h,null,r,a,s);var d=cie(i);n.retrieveValue=function(v,m){var g=f(r,a,s,v);return p(g,m)};var p=n.retrieveValueFromItem=function(v,m){if(v!=null){var g=s[m];if(g)return d(v,m,g.name)}};return n.getDimensionInfo=qt(iJe,null,s,l),n.cloneAllDimensionInfo=qt(aJe,null,s),n}function nJe(t){var e=t.sourceFormat;if(!SL(e)){var n="";sa(n)}return t.data}function rJe(t){var e=t.sourceFormat,n=t.data;if(!SL(e)){var r="";sa(r)}if(e===ka){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].slice());return i}else if(e===Ls){for(var i=[],a=0,o=n.length;a<o;a++)i.push(De({},n[a]));return i}}function iJe(t,e,n){if(n!=null){if(Zt(n)||!isNaN(n)&&!td(e,n))return t[n];if(td(e,n))return e[n]}}function aJe(t){return ht(t)}var fie=ut();function oJe(t){t=ht(t);var e=t.type,n="";e||sa(n);var r=e.split(":");r.length!==2&&sa(n);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),t.__isBuiltIn=i,fie.set(e,t)}function sJe(t,e,n){var r=xr(t),i=r.length,a="";i||sa(a);for(var o=0,s=i;o<s;o++){var l=r[o];e=lJe(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function lJe(t,e,n,r){var i="";e.length||sa(i),Ye(t)||sa(i);var a=t.type,o=fie.get(a);o||sa(i);var s=$e(e,function(u){return tJe(u,o)}),l=xr(o.transform({upstream:s[0],upstreamList:s,config:ht(t.config)}));return $e(l,function(u,c){var f="";Ye(u)||sa(f),u.data||sa(f);var h=aie(u.data);SL(h)||sa(f);var d,p=e[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:su,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:su,sourceHeader:0,dimensions:u.dimensions};return PR(u.data,d,null)})}function SL(t){return t===ka||t===Ls}var AT="undefined",uJe=typeof Uint32Array===AT?Array:Uint32Array,cJe=typeof Uint16Array===AT?Array:Uint16Array,hie=typeof Int32Array===AT?Array:Int32Array,pW=typeof Float64Array===AT?Array:Float64Array,die={float:pW,int:hie,ordinal:Array,number:Array,time:pW},tN;function am(t){return t>65535?uJe:cJe}function Kd(){return[1/0,-1/0]}function fJe(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function vW(t,e,n,r,i){var a=die[n||"float"];if(i){var o=t[e],s=o&&o.length;if(s!==r){for(var l=new a(r),u=0;u<s;u++)l[u]=o[u];t[e]=l}}else t[e]=new a(r)}var hJe=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=ut()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=tN[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],oie(i),this._dimensions=$e(n,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===n)return a}else a=i.length;return i[a]={type:n},r.set(e,a),this._chunks[a]=new die[n||"float"](this._rawCount),this._rawExtent[a]=Kd(),a},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=Kd());for(var l=a[e],u=o;u<s;u++){var c=r[u]=n.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,n||0),u=0;u<a;u++){var c=i[u];vW(r,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<a;p++){var c=i[p],v=tN.arrayRows.call(this,e[d]||f,c.property,d,p);r[p][h]=v;var m=o[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},t.prototype._initDataFromProvider=function(e,n,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=$e(o,function(y){return y.property}),c=0;c<s;c++){var f=o[c];l[c]||(l[c]=Kd()),vW(a,c,f.type,n,r)}if(i.fillStorage)i.fillStorage(e,n,a,l);else for(var h=[],d=e;d<n;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=a[p],m=this._dimValueGetter(h,u[p],d,p);v[d]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],i=[];if(n==null){n=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(a){isNaN(a)||n.push(a)});var r=n.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(n[o]<e)i=o+1;else if(n[o]>e)a=o-1;else return o}return-1},t.prototype.indicesOfNearest=function(e,n,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=n-a[h],p=Math.abs(d);p<=r&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(o[u++]=c))}return o.length=u,o},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=n[a]}else e=new r(n.buffer,0,i)}else{var r=am(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=am(r._rawCount),o=new a(i),s=[],l=e.length,u=0,c=e[0],f=r._chunks,h=0;h<i;h++){var d=void 0,p=r.getRawIndex(h);if(l===0)d=n(h);else if(l===1){var v=f[c][p];d=n(v,h)}else{for(var m=0;m<l;m++)s[m]=f[e[m]][p];s[m]=h,d=n.apply(null,s)}d&&(o[u++]=p)}return u<i&&(r._indices=o),r._count=u,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var i=Ot(e),a=i.length;if(!a)return this;var o=n.count(),s=am(n._rawCount),l=new s(o),u=0,c=i[0],f=e[c][0],h=e[c][1],d=n._chunks,p=!1;if(!n._indices){var v=0;if(a===1){for(var m=d[i[0]],g=0;g<r;g++){var y=m[g];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(a===2){for(var m=d[i[0]],x=d[i[1]],w=e[i[1]][0],b=e[i[1]][1],g=0;g<r;g++){var y=m[g],C=x[g];(y>=f&&y<=h||isNaN(y))&&(C>=w&&C<=b||isNaN(C))&&(l[u++]=v),v++}p=!0}}if(!p)if(a===1)for(var g=0;g<o;g++){var S=n.getRawIndex(g),y=d[i[0]][S];(y>=f&&y<=h||isNaN(y))&&(l[u++]=S)}else for(var g=0;g<o;g++){for(var D=!0,S=n.getRawIndex(g),_=0;_<a;_++){var T=i[_],y=d[T][S];(y<e[T][0]||y>e[T][1])&&(D=!1)}D&&(l[u++]=n.getRawIndex(g))}return u<o&&(n._indices=l),n._count=u,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var i=e._chunks,a=[],o=n.length,s=e.count(),l=[],u=e._rawExtent,c=0;c<n.length;c++)u[n[c]]=Kd();for(var f=0;f<s;f++){for(var h=e.getRawIndex(f),d=0;d<o;d++)l[d]=i[n[d]][h];l[o]=f;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var v=n[c],m=p[c],g=u[v],y=i[v];y&&(y[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/n),u=this.getRawIndex(0),c,f,h,d=new(am(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));d[s++]=u;for(var p=1;p<o-1;p+=l){for(var v=Math.min(p+l,o-1),m=Math.min(p+l*2,o),g=(m+v)/2,y=0,x=v;x<m;x++){var w=this.getRawIndex(x),b=a[w];isNaN(b)||(y+=b)}y/=m-v;var C=p,S=Math.min(p+l,o),D=p-1,_=a[u];c=-1,h=C;for(var T=-1,E=0,x=C;x<S;x++){var w=this.getRawIndex(x),b=a[w];if(isNaN(b)){E++,T<0&&(T=w);continue}f=Math.abs((D-g)*(b-_)-(D-x)*(y-_)),f>c&&(c=f,h=w)}E>0&&E<S-C&&(d[s++]=Math.min(T,h),h=Math.max(T,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(o-1),r._count=s,r._indices=d,r.getRawIndex=this._getRawIdx,r},t.prototype.downSample=function(e,n,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/n),u=o[e],c=this.count(),f=a._rawExtent[e]=Kd(),h=new(am(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);s[v]=u[m]}var g=r(s),y=this.getRawIndex(Math.min(p+i(s,g)||0,c-1));u[y]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=y}return a._count=d,a._indices=h,a._updateGetRawIdx(),a},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:n(a);break;case 1:n(i[e[0]][s],a);break;case 2:n(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[e[l]][s];u[l]=a,n.apply(null,u)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=Kd();if(!n)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=n[c];f<s&&(s=f),f>l&&(l=f)}return o=[s,l],this._extent[e]=o,o},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][n]);return r},t.prototype.clone=function(e,n){var r=new t,i=this._chunks,a=e&&_l(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?fJe(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=ht(this._extent),e._rawExtent=ht(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,i,a){return qb(n[a],this._dimensions[a])}tN={arrayRows:e,objectRows:function(n,r,i,a){return qb(n[r],this._dimensions[a])},keyedColumns:e,original:function(n,r,i,a){var o=n&&(n.value==null?n:n.value);return qb(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(n,r,i,a){return n[a]}}}(),t}();const FR=hJe;var dJe=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,a;if(qw(e)){var o=e,s=void 0,l=void 0,u=void 0;if(r){var c=n[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),l=Na(s)?Rc:Yo,a=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=wt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=wt(f.sourceHeader,h.sourceHeader),v=wt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[PR(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var g=e;if(r){var y=this._applyTransform(n);i=y.sourceList,a=y.upstreamSignList}else{var x=g.get("source",!0);i=[PR(x,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&gW(a)}var o,s=[],l=[];return G(e,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&gW(f),s.push(c),l.push(u._getVersionSign())}),r?o=sJe(r,s,{datasetIndex:n.componentIndex}):i!=null&&(o=[GQe(s[0])]),{sourceList:o,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];qw(this._sourceHost)&&l?s=l._innerGetDataStore(e,n,r):(s=new FR,s.initData(new sie(n,e.length),e)),o[r]=s}return s},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(qw(e)){var n=yL(e);return n?[n.getSourceManager()]:[]}else return $e(gQe(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,i;if(qw(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;n=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},t}();function qw(t){return t.mainType==="series"}function gW(t){throw new Error(t)}var pie="line-height:1";function vie(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,i=t.fontWeight||"400",a=t.color||"#464646",o=t.fontSize||14,s=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+oa(r+"")+"px;color:"+oa(n)+";font-weight:"+oa(i+""),valueStyle:"font-size:"+oa(o+"")+"px;color:"+oa(a)+";font-weight:"+oa(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var pJe=[0,10,20,30],vJe=["",`
`,`

`,`


`];function wy(t,e){return e.type=t,e}function LR(t){return t.type==="section"}function gie(t){return LR(t)?gJe:mJe}function mie(t){if(LR(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return G(t.blocks,function(i){var a=mie(i);a>=e&&(e=a+ +(r&&(!a||LR(i)&&!i.noHeader)))}),e}return 0}function gJe(t,e,n,r){var i=e.noHeader,a=yJe(mie(e)),o=[],s=e.blocks||[];Ya(!s||Me(s)),s=s||[];var l=t.orderMode;if(e.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(td(u,l)){var c=new JQe(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}G(s,function(p,v){var m=e.valueFormatter,g=gie(p)(m?De(De({},t),{valueFormatter:m}):t,p,v>0?a.html:0,r);g!=null&&o.push(g)});var f=t.renderMode==="richText"?o.join(a.richText):zR(o.join(""),i?n:a.html);if(i)return f;var h=MR(e.header,"ordinal",t.useUTC),d=vie(r,t.renderMode).nameStyle;return t.renderMode==="richText"?yie(t,h,d)+a.richText+f:zR('<div style="'+d+";"+pie+';">'+oa(h)+"</div>"+f,n)}function mJe(t,e,n,r){var i=t.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,u=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(w){return w=Me(w)?w:[w],$e(w,function(b,C){return MR(b,Me(d)?d[C]:d,u)})};if(!(a&&o)){var f=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":MR(l,"ordinal",u),d=e.valueType,p=o?[]:c(e.value),v=!s||!a,m=!s&&a,g=vie(r,i),y=g.nameStyle,x=g.valueStyle;return i==="richText"?(s?"":f)+(a?"":yie(t,h,y))+(o?"":bJe(t,p,v,m,x)):zR((s?"":f)+(a?"":xJe(h,!s,y))+(o?"":wJe(p,v,m,x)),n)}}function mW(t,e,n,r,i,a){if(t){var o=gie(t),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return o(s,t,0,a)}}function yJe(t){return{html:pJe[t],richText:vJe[t]}}function zR(t,e){var n='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+pie+';">'+t+n+"</div>"}function xJe(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+oa(t)+"</span>"}function wJe(t,e,n,r){var i=n?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return t=Me(t)?t:[t],'<span style="'+a+";"+r+'">'+$e(t,function(o){return oa(o)}).join("&nbsp;&nbsp;")+"</span>"}function yie(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function bJe(t,e,n,r,i){var a=[i],o=r?10:20;return n&&a.push({padding:[0,0,0,o],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Me(e)?e.join("  "):e,a)}function CJe(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return ad(r)}function xie(t,e){var n=t.get("padding");return n??(e==="richText"?[8,10]:10)}var nN=function(){function t(){this.richTextStyles={},this._nextStyleNameId=Nne()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var i=r==="richText"?this._generateStyleName():null,a=qre({color:n,type:e,renderMode:r,markerId:i});return Be(a)?a:(this.richTextStyles[i]=a.style,a.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};Me(n)?G(n,function(a){return De(r,a)}):De(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},t}();function SJe(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(n),l=Me(s),u=CJe(e,n),c,f,h,d;if(o>1||l&&!o){var p=DJe(s,e,n,a,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);d=c=Xv(i,n,a[0]),f=v.type}else d=c=l?s[0]:s;var m=W3(e),g=m&&e.name||"",y=i.getName(n),x=r?g:y;return wy("section",{header:g,noHeader:r||!m,sortParam:d,blocks:[wy("nameValue",{markerType:"item",markerColor:u,name:x,noName:!ys(x),value:c,valueType:f})].concat(h||[])})}function DJe(t,e,n,r,i){var a=e.getData(),o=_l(t,function(f,h,d){var p=a.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];r.length?G(r,function(f){c(Xv(a,n,f),f)}):G(t,c);function c(f,h){var d=a.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(o?u.push(wy("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Pu=Jn();function Kw(t,e){return t.getName(e)||t.getId(e)}var Kb="__universalTransitionEnabled",NT=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=c0({count:TJe,reset:EJe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var a=Pu(this).sourceManager=new dJe(this);a.prepareSource();var o=this.getInitialData(n,i);xW(o,this),this.dataTask.context.data=o,Pu(this).dataBeforeProcessed=o,yW(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=yy(this),a=i?_T(n):{},o=this.subType;nn.hasClass(o)&&(o+="Series"),mt(n,r.getTheme().get(this.subType)),mt(n,this.getDefaultOption()),DR(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&Kv(n,a,i)},e.prototype.mergeOption=function(n,r){n=mt(this.option,n,!0),this.fillDataTextStyle(n.data);var i=yy(this);i&&Kv(this.option,n,i);var a=Pu(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(n,r);xW(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Pu(this).dataBeforeProcessed=o,yW(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(n){if(n&&!Na(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&DR(n[i],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=BR(this);if(r){var i=r.context.data;return n==null?i:i.getLinkedData(n)}else return Pu(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=BR(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}Pu(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return ut(n)},e.prototype.getSourceManager=function(){return Pu(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Pu(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,i){return SJe({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(St.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,i){var a=this.ecModel,o=xL.prototype.getColorFromPalette.call(this,n,r,i);return o||(o=a.getColorFromPalette(n,r,i)),o},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var l=n[s],u=Kw(o,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(n,r){for(var i=[],a=0;a<n.length;a++)i[0]=n[a],this.isSelected(n[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=Ot(n),i=[],a=0;a<r.length;a++){var o=n[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[Kw(a,n)])&&!a.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Kb])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Ye(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,c=0;c<l;c++){var f=r[c],h=Kw(n,f);u[h]=!0,this._selectedDataIndicesMap[h]=n.getRawIndex(f)}}else if(s==="single"||s===!0){var d=r[l-1],h=Kw(n,d);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=n.getRawIndex(d),a)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var a=n.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return nn.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(nn);Ko(NT,ZQe);Ko(NT,xL);Pne(NT,nn);function yW(t){var e=t.name;W3(t)||(t.name=_Je(t)||e)}function _Je(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return G(n,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function TJe(t){return t.model.getRawData().count()}function EJe(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),AJe}function AJe(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function xW(t,e){G(Wte(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,Pt(NJe,e))})}function NJe(t,e){var n=BR(t);return n&&n.setOutputEnd((e||this).count()),e}function BR(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}const Wo=NT;var DL=function(){function t(){this.group=new sr,this.uid=kx("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){},t.prototype.updateLayout=function(e,n,r,i){},t.prototype.updateVisual=function(e,n,r,i){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();G3(DL);oT(DL);const Za=DL;function _L(){var t=Jn();return function(e){var n=t(e),r=e.pipelineContext,i=!!n.large,a=!!n.progressiveRender,o=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var wie=Jn(),kJe=_L(),TL=function(){function t(){this.group=new sr,this.uid=kx("viewChart"),this.renderTask=c0({plan:IJe,reset:RJe}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.highlight=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&bW(a,i,"emphasis")},t.prototype.downplay=function(e,n,r,i){var a=e.getData(i&&i.dataType);a&&bW(a,i,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateLayout=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateVisual=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.eachRendered=function(e){yT(this.group,e)},t.markUpdateMethod=function(e,n){wie(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function wW(t,e,n){t&&kR(t)&&(e==="emphasis"?jv:qv)(t,n)}function bW(t,e,n){var r=rd(t,e),i=e&&e.highlightKey!=null?KYe(e.highlightKey):null;r!=null?G(xr(r),function(a){wW(t.getItemGraphicEl(a),n,i)}):t.eachItemGraphicEl(function(a){wW(a,n,i)})}G3(TL);oT(TL);function IJe(t){return kJe(t.model)}function RJe(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=i&&wie(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,n,r,i),$Je[l]}var $Je={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const Sa=TL;var G2="\0__throttleOriginMethod",CW="\0__throttleRate",SW="\0__throttleType";function kT(t,e,n){var r,i=0,a=0,o=null,s,l,u,c;e=e||0;function f(){a=new Date().getTime(),o=null,t.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];r=new Date().getTime(),l=this,u=d;var v=c||e,m=c||n;c=null,s=r-(m?i:a)-v,clearTimeout(o),m?o=setTimeout(f,v):s>=0?f():o=setTimeout(f,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(d){c=d},h}function bie(t,e,n,r){var i=t[e];if(i){var a=i[G2]||i,o=i[SW],s=i[CW];if(s!==n||o!==r){if(n==null||!r)return t[e]=a;i=t[e]=kT(a,n,r==="debounce"),i[G2]=a,i[SW]=r,i[CW]=n}return i}}function VR(t,e){var n=t[e];n&&n[G2]&&(n.clear&&n.clear(),t[e]=n[G2])}var DW=Jn(),_W={itemStyle:dy(Pre,!0),lineStyle:dy(Ore,!0)},MJe={lineStyle:"stroke",itemStyle:"fill"};function Cie(t,e){var n=t.visualStyleMapper||_W[e];return n||(console.warn("Unknown style type '"+e+"'."),_W.itemStyle)}function Sie(t,e){var n=t.visualDrawType||MJe[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var OJe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=t.getModel(r),a=Cie(t,r),o=a(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var l=Sie(t,r),u=o[l],c=lt(u)?u:null,f=o.fill==="auto"||o.stroke==="auto";if(!o[l]||c||f){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[l]||(o[l]=h,n.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||lt(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||lt(o.stroke)?h:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",l),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=t.getDataParams(p),m=De({},o);m[l]=c(v),d.setItemVisual(p,"style",m)}}}},om=new gr,PJe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=Cie(t,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){om.option=l[r];var u=i(om),c=o.ensureUniqueItemVisual(s,"style");De(c,u),om.option.decal&&(o.setItemVisual(s,"decal",om.option.decal),om.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},FJe={performRawSeries:!0,overallReset:function(t){var e=ut();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),DW(n).scope=a}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),i={},a=n.getData(),o=DW(n).scope,s=n.visualStyleAccessPath||"itemStyle",l=Sie(n,s);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],f=a.getItemVisual(c,"colorFromPalette");if(f){var h=a.ensureUniqueItemVisual(c,"style"),d=r.getName(u)||u+"",p=r.count();h[l]=n.getColorFromPalette(d,o,p)}})}})}},Xw=Math.PI;function LJe(t,e){e=e||{},pt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new sr,r=new qn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var i=new Vr({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new qn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(a);var o;return e.showSpinner&&(o=new dT({shape:{startAngle:-Xw/2,endAngle:-Xw/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:Xw*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:Xw*3/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(t.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),c=t.getHeight()/2;e.showSpinner&&o.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var zJe=function(){function t(e,n,r,i){this._stageTaskMap=ut(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&n.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=ut();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),n._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;G(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";Ya(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,n,r),i.overallReset&&this._createOverallStageTask(i,a,n,r)},this)},t.prototype.prepareView=function(e,n,r,i){var a=e.renderTask,o=a.context;o.model=n,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(n,a)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,i){i=i||{};var a=!1,o=this;G(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=o._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),o.updatePayload(h,r);var v=o.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(a=!0)}else f&&f.each(function(m,g){s(i,m)&&m.dirty();var y=o.getPerformArgs(m,i.block);y.skip=!l.performRawSeries&&n.isSeriesFiltered(m.context.model),o.updatePayload(m,r),m.perform(y)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,i){var a=this,o=n.seriesTaskMap,s=n.seriesTaskMap=ut(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(f){var h=f.uid,d=s.set(h,o&&o.get(h)||c0({plan:GJe,reset:HJe,count:qJe}));d.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(f,d)}},t.prototype._createOverallStageTask=function(e,n,r,i){var a=this,o=n.overallTask=n.overallTask||c0({reset:BJe});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=ut(),u=e.seriesType,c=e.getTargetSeries,f=!0,h=!1,d="";Ya(!e.createOnAllSeries,d),u?r.eachRawSeriesByType(u,p):c?c(r,i).each(p):(f=!1,G(r.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,s&&s.get(m)||(h=!0,c0({reset:VJe,onDirty:UJe})));g.context={model:v,overallProgress:f},g.agent=o,g.__block=f,a._pipe(v,g)}h&&o.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},t.wrapStageHandler=function(e,n){return lt(e)&&(e={overallReset:e,seriesType:KJe(e)}),e.uid=kx("stageHandler"),n&&(e.visualType=n),e},t}();function BJe(t){t.overallReset(t.ecModel,t.api,t.payload)}function VJe(t){return t.overallProgress&&WJe}function WJe(){this.agent.dirty(),this.getDownstream().dirty()}function UJe(){this.agent&&this.agent.dirty()}function GJe(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function HJe(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=xr(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?$e(e,function(n,r){return Die(r)}):jJe}var jJe=Die(0);function Die(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function qJe(t){return t.data.count()}function KJe(t){H2=null;try{t(by,_ie)}catch{}return H2}var by={},_ie={},H2;Tie(by,tie);Tie(_ie,nie);by.eachSeriesByType=by.eachRawSeriesByType=function(t){H2=t};by.eachComponent=function(t){t.mainType==="series"&&t.subType&&(H2=t.subType)};function Tie(t,e){for(var n in e.prototype)t[n]=ti}const Eie=zJe;var TW=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const XJe={color:TW,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],TW]};var $i="#B9B8CE",EW="#100C2A",Yw=function(){return{axisLine:{lineStyle:{color:$i}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},AW=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Aie={darkMode:!0,color:AW,backgroundColor:EW,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:$i}},textStyle:{color:$i},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:$i}},dataZoom:{borderColor:"#71708A",textStyle:{color:$i},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:$i}},timeline:{lineStyle:{color:$i},label:{color:$i},controlStyle:{color:$i,borderColor:$i}},calendar:{itemStyle:{color:EW},dayLabel:{color:$i},monthLabel:{color:$i},yearLabel:{color:$i}},timeAxis:Yw(),logAxis:Yw(),valueAxis:Yw(),categoryAxis:Yw(),line:{symbol:"circle"},graph:{color:AW},gauge:{title:{color:$i},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:$i},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Aie.categoryAxis.splitLine.show=!1;const YJe=Aie;var ZJe=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},i={};if(Be(e)){var a=sl(e);n.mainType=a.main||null,n.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};G(e,function(l,u){for(var c=!1,f=0;f<o.length;f++){var h=o[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(n.mainType=p,n[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=n.cptQuery,u=n.dataQuery;return c(l,o,"mainType")&&c(l,o,"subType")&&c(l,o,"index","componentIndex")&&c(l,o,"name")&&c(l,o,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,n.otherQuery,i,a));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),WR=["symbol","symbolSize","symbolRotate","symbolOffset"],NW=WR.concat(["symbolKeepAspect"]),QJe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<WR.length;o++){var s=WR[o],l=t.get(s);lt(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(De({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var u=Ot(i);function c(f,h){for(var d=t.getRawValue(h),p=t.getDataParams(h),v=0;v<u.length;v++){var m=u[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:a?c:null}}},JJe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<NW.length;s++){var l=NW[s],u=o.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:n.hasItemOption?r:null}}};function eet(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function tet(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function net(t,e){function n(r,i){var a=[];return r.eachComponent({mainType:"series",subType:t,query:i},function(o){a.push(o.seriesIndex)}),a}G([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=De({},i),o.dispatchAction(De(i,{type:r[1],seriesIndex:n(a,i)}))})})}function Xd(t,e,n,r,i){var a=t+e;n.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=o.getData(),h=rd(f,i.fromActionPayload);n.trigger(a,{type:a,seriesId:o.id,name:Me(h)?f.getName(h[0]):f.getName(h),selected:Be(l)?l:De({},l)})}})}function ret(t,e,n){t.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(Xd("map","selectchanged",e,i,r),Xd("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Xd("map","selected",e,i,r),Xd("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Xd("map","unselected",e,i,r),Xd("pie","unselected",e,i,r))})}function Pm(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var iet=Math.round(Math.random()*9),aet=typeof Object.defineProperty=="function",oet=function(){function t(){this._id="__ec_inner_"+iet++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return aet?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}();const set=oet;var uet=Nt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r+a),t.lineTo(n-i,r+a),t.closePath()}}),cet=Nt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r),t.lineTo(n,r+a),t.lineTo(n-i,r),t.closePath()}}),fet=Nt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,f=Math.sin(u),h=Math.cos(u),d=o*.6,p=o*.7;t.moveTo(n-c,l+s),t.arc(n,l,o,Math.PI-u,Math.PI*2+u),t.bezierCurveTo(n+c-f*d,l+s+h*d,n,r-p,n,r),t.bezierCurveTo(n,r-p,n-c+f*d,l+s+h*d,n-c,l+s),t.closePath()}}),het=Nt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;t.moveTo(i,a),t.lineTo(i+o,a+n),t.lineTo(i,a+n/4*3),t.lineTo(i-o,a+n),t.lineTo(i,a),t.closePath()}}),det={line:Xc,rect:qn,roundRect:qn,square:qn,circle:hT,diamond:cet,pin:fet,arrow:het,triangle:uet},pet={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var a=Math.min(n,r);i.x=t,i.y=e,i.width=a,i.height=a},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},UR={};G(det,function(t,e){UR[e]=new t});var vet=Nt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=R2(t,e,n),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var i=UR[r];i||(r="rect",i=UR[r]),pet[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function get(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function Zc(t,e,n,r,i,a,o){var s=t.indexOf("empty")===0;s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=iL(t.slice(8),new Et(e,n,r,i),o?"center":"cover"):t.indexOf("path://")===0?l=vT(t.slice(7),{},new Et(e,n,r,i),o?"center":"cover"):l=new vet({shape:{symbolType:t,x:e,y:n,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=get,a&&l.setColor(a),l}function met(t){return Me(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function Nie(t,e){if(t!=null)return Me(t)||(t=[t,t]),[En(t[0],e[0])||0,En(wt(t[1],t[0]),e[1])||0]}function vh(t){return isFinite(t)}function yet(t,e,n){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),r=vh(r)?r:0,i=vh(i)?i:1,a=vh(a)?a:0,o=vh(o)?o:0;var s=t.createLinearGradient(r,a,i,o);return s}function xet(t,e,n){var r=n.width,i=n.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+n.x,s=s*i+n.y,l=l*a),o=vh(o)?o:.5,s=vh(s)?s:.5,l=l>=0&&vh(l)?l:.5;var u=t.createRadialGradient(o,s,0,o,s,l);return u}function GR(t,e,n){for(var r=e.type==="radial"?xet(t,e,n):yet(t,e,n),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function wet(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function Zw(t){return parseInt(t,10)}function Op(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(t);return(t[i]||Zw(s[r])||Zw(t.style[r]))-(Zw(s[a])||0)-(Zw(s[o])||0)|0}function bet(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:Zt(t)?[t]:Me(t)?t:null}function EL(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&bet(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(n=$e(n,function(a){return a/i}),r/=i)}return[n,r]}var Cet=new Tl(!0);function j2(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function kW(t){return typeof t=="string"&&t!=="none"}function q2(t){var e=t.fill;return e!=null&&e!=="none"}function IW(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function RW(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function HR(t,e,n){var r=H3(e.image,e.__image,n);if(sT(r)){var i=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*t0),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function Det(t,e,n,r){var i,a=j2(n),o=q2(n),s=n.strokePercent,l=s<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||Cet,f=e.__dirty;if(!r){var h=n.fill,d=n.stroke,p=o&&!!h.colorStops,v=a&&!!d.colorStops,m=o&&!!h.image,g=a&&!!d.image,y=void 0,x=void 0,w=void 0,b=void 0,C=void 0;(p||v)&&(C=e.getBoundingRect()),p&&(y=f?GR(t,h,C):e.__canvasFillGradient,e.__canvasFillGradient=y),v&&(x=f?GR(t,d,C):e.__canvasStrokeGradient,e.__canvasStrokeGradient=x),m&&(w=f||!e.__canvasFillPattern?HR(t,h,e):e.__canvasFillPattern,e.__canvasFillPattern=w),g&&(b=f||!e.__canvasStrokePattern?HR(t,d,e):e.__canvasStrokePattern,e.__canvasStrokePattern=w),p?t.fillStyle=y:m&&(w?t.fillStyle=w:o=!1),v?t.strokeStyle=x:g&&(b?t.strokeStyle=b:a=!1)}var S=e.getGlobalScale();c.setScale(S[0],S[1],e.segmentIgnoreThreshold);var D,_;t.setLineDash&&n.lineDash&&(i=EL(e),D=i[0],_=i[1]);var T=!0;(u||f&sp)&&(c.setDPR(t.dpr),l?c.setContext(null):(c.setContext(t),T=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),T&&c.rebuildPath(t,l?s:1),D&&(t.setLineDash(D),t.lineDashOffset=_),r||(n.strokeFirst?(a&&RW(t,n),o&&IW(t,n)):(o&&IW(t,n),a&&RW(t,n))),D&&t.setLineDash([])}function _et(t,e,n){var r=e.__image=H3(n.image,e.__image,e,e.onload);if(!(!r||!sT(r))){var i=n.x||0,a=n.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;t.drawImage(r,u,c,n.sWidth,n.sHeight,i,a,o,s)}else if(n.sx&&n.sy){var u=n.sx,c=n.sy,f=o-u,h=s-c;t.drawImage(r,u,c,f,h,i,a,o,s)}else t.drawImage(r,i,a,o,s)}}function Tet(t,e,n){var r,i=n.text;if(i!=null&&(i+=""),i){t.font=n.font||jc,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var a=void 0,o=void 0;t.setLineDash&&n.lineDash&&(r=EL(e),a=r[0],o=r[1]),a&&(t.setLineDash(a),t.lineDashOffset=o),n.strokeFirst?(j2(n)&&t.strokeText(i,n.x,n.y),q2(n)&&t.fillText(i,n.x,n.y)):(q2(n)&&t.fillText(i,n.x,n.y),j2(n)&&t.strokeText(i,n.x,n.y)),a&&t.setLineDash([])}}var $W=["shadowBlur","shadowOffsetX","shadowOffsetY"],MW=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function kie(t,e,n,r,i){var a=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){fa(t,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(o)?Ah.opacity:o}(r||e.blend!==n.blend)&&(a||(fa(t,i),a=!0),t.globalCompositeOperation=e.blend||Ah.blend);for(var s=0;s<$W.length;s++){var l=$W[s];(r||e[l]!==n[l])&&(a||(fa(t,i),a=!0),t[l]=t.dpr*(e[l]||0))}return(r||e.shadowColor!==n.shadowColor)&&(a||(fa(t,i),a=!0),t.shadowColor=e.shadowColor||Ah.shadowColor),a}function OW(t,e,n,r,i){var a=Cy(e,i.inHover),o=r?null:n&&Cy(n,i.inHover)||{};if(a===o)return!1;var s=kie(t,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(fa(t,i),s=!0),kW(a.fill)&&(t.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(fa(t,i),s=!0),kW(a.stroke)&&(t.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(fa(t,i),s=!0),t.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==u&&(s||(fa(t,i),s=!0),t.lineWidth=u)}for(var c=0;c<MW.length;c++){var f=MW[c],h=f[0];(r||a[h]!==o[h])&&(s||(fa(t,i),s=!0),t[h]=a[h]||f[1])}return s}function Eet(t,e,n,r,i){return kie(t,Cy(e,i.inHover),n&&Cy(n,i.inHover),r,i)}function Iie(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function Aet(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i];r=r||a.isZeroArea(),Iie(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}n.allClipped=r}function Net(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var PW=1,FW=2,LW=3,zW=4;function ket(t){var e=q2(t),n=j2(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function fa(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function Cy(t,e){return e&&t.__hoverStyle||t.style}function AL(t,e){gh(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function gh(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~Fa,e.__isRendered=!1;return}var a=e.__clipPaths,o=n.prevElClipPaths,s=!1,l=!1;if((!o||wet(a,o))&&(o&&o.length&&(fa(t,n),t.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),a&&a.length&&(fa(t,n),t.save(),Aet(a,t,n),s=!0),n.prevElClipPaths=a),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=n.prevEl;u||(l=s=!0);var c=e instanceof Nt&&e.autoBatch&&ket(e.style);s||Net(i,u.transform)?(fa(t,n),Iie(t,e)):c||fa(t,n);var f=Cy(e,n.inHover);e instanceof Nt?(n.lastDrawType!==PW&&(l=!0,n.lastDrawType=PW),OW(t,e,u,l,n),(!c||!n.batchFill&&!n.batchStroke)&&t.beginPath(),Det(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof M2?(n.lastDrawType!==LW&&(l=!0,n.lastDrawType=LW),OW(t,e,u,l,n),Tet(t,e,f)):e instanceof Pl?(n.lastDrawType!==FW&&(l=!0,n.lastDrawType=FW),Eet(t,e,u,l,n),_et(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==zW&&(l=!0,n.lastDrawType=zW),Iet(t,e,n)),c&&r&&fa(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Iet(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),gh(t,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),gh(t,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var rN=new set,BW=new Sx(100),VW=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function jR(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";t.dirty&&rN.delete(t);var a=rN.get(t);if(a)return a;var o=pt(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/n,rN.set(t,s),t.dirty=!1,s;function l(u){for(var c=[n],f=!0,h=0;h<VW.length;++h){var d=o[VW[h]];if(d!=null&&!Me(d)&&!Be(d)&&!Zt(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=BW.get(p);v&&(i?u.svgElement=v:u.image=v)}var m=$ie(o.dashArrayX),g=Ret(o.dashArrayY),y=Rie(o.symbol),x=$et(m),w=Mie(g),b=!i&&wu.createCanvas(),C=i&&{tag:"g",attrs:{},key:"dcl",children:[]},S=_(),D;b&&(b.width=S.width*n,b.height=S.height*n,D=b.getContext("2d")),T(),f&&BW.put(p,b||C),u.image=b,u.svgElement=C,u.svgWidth=S.width,u.svgHeight=S.height;function _(){for(var E=1,A=0,R=x.length;A<R;++A)E=eV(E,x[A]);for(var $=1,A=0,R=y.length;A<R;++A)$=eV($,y[A].length);E*=$;var O=w*x.length*y.length;return{width:Math.max(1,Math.min(E,o.maxTileWidth)),height:Math.max(1,Math.min(O,o.maxTileHeight))}}function T(){D&&(D.clearRect(0,0,b.width,b.height),o.backgroundColor&&(D.fillStyle=o.backgroundColor,D.fillRect(0,0,b.width,b.height)));for(var E=0,A=0;A<g.length;++A)E+=g[A];if(E<=0)return;for(var R=-w,$=0,O=0,M=0;R<S.height;){if($%2===0){for(var B=O/2%y.length,P=0,z=0,U=0;P<S.width*2;){for(var H=0,A=0;A<m[M].length;++A)H+=m[M][A];if(H<=0)break;if(z%2===0){var F=(1-o.symbolSize)*.5,W=P+m[M][z]*F,j=R+g[$]*F,K=m[M][z]*o.symbolSize,Y=g[$]*o.symbolSize,Z=U/2%y[B].length;se(W,j,K,Y,y[B][Z])}P+=m[M][z],++U,++z,z===m[M].length&&(z=0)}++M,M===m.length&&(M=0)}R+=g[$],++O,++$,$===g.length&&($=0)}function se(ee,oe,ce,ve,ye){var _e=i?1:n,Ie=Zc(ye,ee*_e,oe*_e,ce*_e,ve*_e,o.color,o.symbolKeepAspect);if(i){var Ne=r.painter.renderOneToVNode(Ie);Ne&&C.children.push(Ne)}else AL(D,Ie)}}}}function Rie(t){if(!t||t.length===0)return[["rect"]];if(Be(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!Be(t[n])){e=!1;break}if(e)return Rie([t]);for(var r=[],n=0;n<t.length;++n)Be(t[n])?r.push([t[n]]):r.push(t[n]);return r}function $ie(t){if(!t||t.length===0)return[[0,0]];if(Zt(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!Zt(t[r])){n=!1;break}if(n)return $ie([t]);for(var i=[],r=0;r<t.length;++r)if(Zt(t[r])){var e=Math.ceil(t[r]);i.push([e,e])}else{var e=$e(t[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function Ret(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(Zt(t)){var e=Math.ceil(t);return[e,e]}var n=$e(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function $et(t){return $e(t,function(e){return Mie(e)})}function Mie(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function Met(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=jR(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=jR(i,e)}}})}var Oet=new Fs;const os=Oet;var Oie={};function Pet(t,e){Oie[t]=e}function Pie(t){return Oie[t]}var Fet="5.4.3",Let={zrender:"5.4.4"},zet=1,Bet=800,Vet=900,Wet=1e3,Uet=2e3,Get=5e3,Fie=1e3,Het=1100,NL=2e3,Lie=3e3,jet=4e3,IT=4500,qet=4600,Ket=5e3,Xet=6e3,zie=7e3,Bie={PROCESSOR:{FILTER:Wet,SERIES_FILTER:Bet,STATISTIC:Get},VISUAL:{LAYOUT:Fie,PROGRESSIVE_LAYOUT:Het,GLOBAL:NL,CHART:Lie,POST_CHART_LAYOUT:qet,COMPONENT:jet,BRUSH:Ket,CHART_ITEM:IT,ARIA:Xet,DECAL:zie}},pi="__flagInMainProcess",ia="__pendingUpdate",iN="__needsUpdateStatus",WW=/^[a-zA-Z0-9_]+$/,aN="__connectUpdateStatus",UW=0,Yet=1,Zet=2;function Vie(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return Uie(this,t,e)}}function Wie(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Uie(this,t,e)}}function Uie(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),Fs.prototype[e].apply(t,n)}var Gie=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Fs),Hie=Gie.prototype;Hie.on=Wie("on");Hie.off=Wie("off");var Yd,oN,Qw,Fu,sN,lN,uN,sm,lm,GW,HW,cN,jW,Jw,qW,jie,uo,KW,K2=function(t){He(e,t);function e(n,r,i){var a=t.call(this,new ZJe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Be(r)&&(r=qie[r]),a._dom=n;var o="canvas",s="auto",l=!1,u=a._zr=SR(n,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:wt(i.useDirtyRect,l),useCoarsePointer:wt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=kT(qt(u.flush,u),17),r=ht(r),r&&iie(r,!0),a._theme=r,a._locale=ZZe(i.locale||Lre),a._coordSysMgr=new TT;var c=a._api=qW(a);function f(h,d){return h.__prio-d.__prio}return Pb(Y2,f),Pb(qR,f),a._scheduler=new Eie(a,c,qR,Y2),a._messageCenter=new Gie,a._initEvents(),a.resize=qt(a.resize,a),u.animation.on("frame",a._onframe,a),GW(u,a),HW(u,a),S2(a),a}return e.prototype._onframe=function(){if(!this._disposed){KW(this);var n=this._scheduler;if(this[ia]){var r=this[ia].silent;this[pi]=!0;try{Yd(this),Fu.update.call(this,null,this[ia].updateParams)}catch(l){throw this[pi]=!1,this[ia]=null,l}this._zr.flush(),this[pi]=!1,this[ia]=null,sm.call(this,r),lm.call(this,r)}else if(n.unfinished){var i=zet,a=this._model,o=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(a),n.performDataProcessorTasks(a),lN(this,a),n.performVisualTasks(a),Jw(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,i){if(!this[pi]){if(this._disposed){this.id;return}var a,o,s;if(Ye(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[pi]=!0,!this._model||r){var l=new MQe(this._api),u=this._theme,c=this._model=new tie;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(n,{replaceMerge:o},KR);var f={seriesTransition:s,optionChanged:!0};if(i)this[ia]={silent:a,updateParams:f},this[pi]=!1,this.getZr().wakeUp();else{try{Yd(this),Fu.update.call(this,null,f)}catch(h){throw this[ia]=null,this[pi]=!1,h}this._ssr||this._zr.flush(),this[ia]=null,this[pi]=!1,sm.call(this,a),lm.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||St.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(St.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return G(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,a=[],o=this;G(r,function(l){i.eachComponent({mainType:l},function(u){var c=o._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return G(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(Z2[i]){var l=s,u=s,c=-s,f=-s,h=[],d=n&&n.pixelRatio||this.getDevicePixelRatio();G(kh,function(x,w){if(x.group===i){var b=r?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(ht(n)),C=x.getDom().getBoundingClientRect();l=a(C.left,l),u=a(C.top,u),c=o(C.right,c),f=o(C.bottom,f),h.push({dom:b,left:C.left,top:C.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,m=wu.createCanvas(),g=SR(m,{renderer:r?"svg":"canvas"});if(g.resize({width:p,height:v}),r){var y="";return G(h,function(x){var w=x.left-l,b=x.top-u;y+='<g transform="translate('+w+","+b+')">'+x.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,n.connectedBackgroundColor&&g.painter.setBackgroundColor(n.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return n.connectedBackgroundColor&&g.add(new qn({shape:{x:0,y:0,width:p,height:v},style:{fill:n.connectedBackgroundColor}})),G(h,function(x){var w=new Pl({style:{x:x.left*d-l,y:x.top*d-u,image:x.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return sN(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return sN(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,a,o=i0(i,n);return G(o,function(s,l){l.indexOf("Models")>=0&&G(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(a=a||f.containPoint(r,u))}},this)},this),!!a},e.prototype.getVisual=function(n,r){var i=this._model,a=i0(i,n,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?eet(s,l,r):tet(s,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;G(Qet,function(r){var i=function(a){var o=n.getModel(),s=a.target,l,u=r==="globalout";if(u?l={}:s&&Pm(s,function(p){var v=Xt(p);if(v&&v.dataIndex!=null){var m=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=De({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&o.getComponent(c,f),d=h&&n[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=a,l.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),G(f0,function(r,i){n._messageCenter.on(i,function(a){this.trigger(i,a)},n)}),G(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),ret(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&Mne(this.getDom(),IL,"");var r=this,i=r._api,a=r._model;G(r._componentsViews,function(o){o.dispose(a,i)}),G(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete kh[r.id]},e.prototype.resize=function(n){if(!this[pi]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=n&&n.silent;this[ia]&&(a==null&&(a=this[ia].silent),i=!0,this[ia]=null),this[pi]=!0;try{i&&Yd(this),Fu.update.call(this,{type:"resize",animation:De({duration:0},n&&n.animation)})}catch(o){throw this[pi]=!1,o}this[pi]=!1,sm.call(this,a),lm.call(this,a)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(Ye(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!XR[n]){var i=XR[n](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=De({},n);return r.type=f0[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(Ye(r)||(r={silent:!!r}),!!X2[n.type]&&this._model){if(this[pi]){this._pendingActions.push(n);return}var i=r.silent;uN.call(this,n,i);var a=r.flush;a?this._zr.flush():a!==!1&&St.browser.weChat&&this._throttledZrFlush(),sm.call(this,i),lm.call(this,i)}},e.prototype.updateLabelLayout=function(){os.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Yd=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),oN(f,!0),oN(f,!1),h.plan()},oN=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,y=f._api,x=0;x<v.length;x++)v[x].__alive=!1;h?d.eachComponent(function(C,S){C!=="series"&&w(S)}):d.eachSeries(w);function w(C){var S=C.__requireNewView;C.__requireNewView=!1;var D="_ec_"+C.id+"_"+C.type,_=!S&&m[D];if(!_){var T=sl(C.type),E=h?Za.getClass(T.main,T.sub):Sa.getClass(T.sub);_=new E,_.init(d,y),m[D]=_,v.push(_),g.add(_.group)}C.__viewId=_.__id=D,_.__alive=!0,_.__model=C,_.group.__ecComponentInfo={mainType:C.mainType,index:C.componentIndex},!h&&p.prepareView(_,C,d,y)}for(var x=0;x<v.length;){var b=v[x];b.__alive?x++:(!h&&b.renderTask.dispose(),g.remove(b.group),b.dispose(d,y),v.splice(x,1),m[b.__id]===b&&delete m[b.__id],b.__id=b.group.__ecComponentInfo=null)}},Qw=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){G([].concat(f._componentsViews).concat(f._chartsViews),b);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var y={mainType:p,query:g};v&&(y.subType=v);var x=d.excludeSeriesId,w;x!=null&&(w=ut(),G(xr(x),function(C){var S=yl(C,null);S!=null&&w.set(S,!0)})),m&&m.eachComponent(y,function(C){var S=w&&w.get(C.id)!=null;if(!S)if(NV(d))if(C instanceof Wo)d.type===Nh&&!d.notBlur&&!C.get(["emphasis","disabled"])&&BYe(C,d,f._api);else{var D=X3(C.mainType,C.componentIndex,d.name,f._api),_=D.focusSelf,T=D.dispatchers;d.type===Nh&&_&&!d.notBlur&&NR(C.mainType,C.componentIndex,f._api),T&&G(T,function(E){d.type===Nh?jv(E):qv(E)})}else IR(d)&&C instanceof Wo&&(UYe(C,d,f._api),EV(C),uo(f))},f),m&&m.eachComponent(y,function(C){var S=w&&w.get(C.id)!=null;S||b(f[p==="series"?"_chartsMap":"_componentsMap"][C.__viewId])},f);function b(C){C&&C.__alive&&C[h]&&C[h](C.__model,m,f._api,d)}},Fu={prepareAndUpdate:function(f){Yd(this),Fu.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),lN(this,d),m.update(d,p),n(d),g.performVisualTasks(d,f),cN(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",x=d.get("darkMode");v.setBackgroundColor(y),x!=null&&x!=="auto"&&v.setDarkMode(x),os.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,y){if(g!=="series"){var x=h.getViewOfComponentModel(y);if(x&&x.__alive)if(x.updateTransform){var w=x.updateTransform(y,d,p,f);w&&w.update&&v.push(x)}else v.push(x)}});var m=ut();d.eachSeries(function(g){var y=h._chartsMap[g.__viewId];if(y.updateTransform){var x=y.updateTransform(g,d,p,f);x&&x.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),n(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),Jw(this,d,p,f,{},m),os.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;h&&(h.setUpdatePayload(f),Sa.markUpdateMethod(f,"updateView"),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),cN(this,h,this._api,f,{}),os.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;d&&(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Sa.markUpdateMethod(f,"updateVisual"),n(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),os.trigger("afterupdate",d,this._api))},updateLayout:function(f){Fu.update.call(this,f)}},sN=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,y=i0(v,d),x=0;x<m.length;x++){var w=m[x];if(w[h]&&(g=w[h](v,y,p))!=null)return g}},lN=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},uN=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=X2[v],y=g.actionInfo,x=(y.update||"update").split(":"),w=x.pop(),b=x[0]!=null&&sl(x[0]);this[pi]=!0;var C=[f],S=!1;f.batch&&(S=!0,C=$e(f.batch,function($){return $=pt(De({},$),f),$.batch=null,$}));var D=[],_,T=IR(f),E=NV(f);if(E&&are(this._api),G(C,function($){if(_=g.action($,d._model,d._api),_=_||De({},$),_.type=y.event||_.type,D.push(_),E){var O=U3(f),M=O.queryOptionMap,B=O.mainTypeSpecified,P=B?M.keys()[0]:"series";Qw(d,w,$,P),uo(d)}else T?(Qw(d,w,$,"series"),uo(d)):b&&Qw(d,w,$,b.main,b.sub)}),w!=="none"&&!E&&!T&&!b)try{this[ia]?(Yd(this),Fu.update.call(this,f),this[ia]=null):Fu[w].call(this,f)}catch($){throw this[pi]=!1,$}if(S?_={type:y.event||v,escapeConnect:m,batch:D}:_=D[0],this[pi]=!1,!h){var A=this._messageCenter;if(A.trigger(_.type,_),T){var R={type:"selectchanged",escapeConnect:m,selected:GYe(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};A.trigger(R.type,R)}}},sm=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();uN.call(this,d,f)}},lm=function(f){!f&&this.trigger("updated")},GW=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[ia]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},HW=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Pm(p,kR);v&&(VYe(v,d,h._api),uo(h))}).on("mouseout",function(d){var p=d.target,v=Pm(p,kR);v&&(WYe(v,d,h._api),uo(h))}).on("click",function(d){var p=d.target,v=Pm(p,function(y){return Xt(y).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=Xt(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function r(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,x){var w=x.get("zlevel")||0,b=x.get("z")||0,C=x.getZLevelKey();p=p||!!C,(y==="series"?d:h).push({zlevel:w,z:b,idx:x.componentIndex,type:y,key:C})}),p){var v=h.concat(d),m,g;Pb(v,function(y,x){return y.zlevel===x.zlevel?y.z-x.z:y.zlevel-x.zlevel}),G(v,function(y){var x=f.getComponent(y.type,y.idx),w=y.zlevel,b=y.key;m!=null&&(w=Math.max(m,w)),b?(w===m&&b!==g&&w++,g=b):g&&(w===m&&w++,g=""),m=w,x.setZLevel(w)})}}cN=function(f,h,d,p,v){r(h),jW(f,h,d,p,v),G(f._chartsViews,function(m){m.__alive=!1}),Jw(f,h,d,p,v),G(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},jW=function(f,h,d,p,v,m){G(m||f._componentsViews,function(g){var y=g.__model;u(y,g),g.render(y,h,d,p),s(y,g),c(y,g)})},Jw=function(f,h,d,p,v,m){var g=f._scheduler;v=De(v||{},{updatedSeries:h.getSeries()}),os.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(x){var w=f._chartsMap[x.__viewId];w.__alive=!0;var b=w.renderTask;g.updatePayload(b,p),u(x,w),m&&m.get(x.uid)&&b.dirty(),b.perform(g.getPerformArgs(b))&&(y=!0),w.group.silent=!!x.get("silent"),o(x,w),EV(x)}),g.unfinished=y||g.unfinished,os.trigger("series:layoutlabels",h,d,v),os.trigger("series:transition",h,d,v),h.eachSeries(function(x){var w=f._chartsMap[x.__viewId];s(x,w),c(x,w)}),a(f,h),os.trigger("series:afterupdate",h,d,v)},uo=function(f){f[iN]=!0,f.getZr().wakeUp()},KW=function(f){f[iN]&&(f.getZr().storage.traverse(function(h){l0(h)||i(h)}),f[iN]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===cT&&f.states.emphasis?h.push("emphasis"):f.hoverState===uT&&f.states.blur&&h.push("blur"),f.useStates(h)}function a(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!St.node&&!St.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function o(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var y=f.childrenRef(),x=0;x<y.length;x++)p=Math.max(l(y[x],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!l0(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(l0(g))return;if(g instanceof Nt&&XYe(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=m;var x=g.getTextContent(),w=g.getTextGuideLine();x&&(x.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}qW=function(f){return new(function(h){He(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){jv(p,v),uo(f)},d.prototype.leaveEmphasis=function(p,v){qv(p,v),uo(f)},d.prototype.enterBlur=function(p){zYe(p),uo(f)},d.prototype.leaveBlur=function(p){tre(p),uo(f)},d.prototype.enterSelect=function(p){nre(p),uo(f)},d.prototype.leaveSelect=function(p){rre(p),uo(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(nie))(f)},jie=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[aN]=p}}G(f0,function(d,p){f._messageCenter.on(p,function(v){if(Z2[f.group]&&f[aN]!==UW){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];G(kh,function(y){y!==f&&y.group===f.group&&g.push(y)}),h(g,UW),G(g,function(y){y[aN]!==Yet&&y.dispatchAction(m)}),h(g,Zet)}})})}}(),e}(Fs),kL=K2.prototype;kL.on=Vie("on");kL.off=Vie("off");kL.one=function(t,e,n){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(t,i)}this.on.call(this,t,i,n)};var Qet=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var X2={},f0={},qR=[],KR=[],Y2=[],qie={},XR={},kh={},Z2={},Jet=+new Date-0,ett=+new Date-0,IL="_echarts_instance_";function ttt(t,e,n){var r=!(n&&n.ssr);if(r){var i=RL(t);if(i)return i}var a=new K2(t,e,n);return a.id="ec_"+Jet++,kh[a.id]=a,r&&Mne(t,IL,a.id),jie(a),os.trigger("afterinit",a),a}function ntt(t){if(Me(t)){var e=t;t=null,G(e,function(n){n.group!=null&&(t=n.group)}),t=t||"g_"+ett++,G(e,function(n){n.group=t})}return Z2[t]=!0,t}function Kie(t){Z2[t]=!1}var rtt=Kie;function itt(t){Be(t)?t=kh[t]:t instanceof K2||(t=RL(t)),t instanceof K2&&!t.isDisposed()&&t.dispose()}function RL(t){return kh[AXe(t,IL)]}function att(t){return kh[t]}function $L(t,e){qie[t]=e}function ML(t){kt(KR,t)<0&&KR.push(t)}function OL(t,e){PL(qR,t,e,Uet)}function Xie(t){RT("afterinit",t)}function Yie(t){RT("afterupdate",t)}function RT(t,e){os.on(t,e)}function zs(t,e,n){lt(e)&&(n=e,e="");var r=Ye(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!f0[e]&&(Ya(WW.test(r)&&WW.test(e)),X2[r]||(X2[r]={action:n,actionInfo:t}),f0[e]=r)}function Zie(t,e){TT.register(t,e)}function ott(t){var e=TT.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function Qie(t,e){PL(Y2,t,e,Fie,"layout")}function gf(t,e){PL(Y2,t,e,Lie,"visual")}var XW=[];function PL(t,e,n,r,i){if((lt(e)||Ye(e))&&(n=e,e=r),!(kt(XW,n)>=0)){XW.push(n);var a=Eie.wrapStageHandler(n,i);a.__prio=e,a.__raw=n,t.push(a)}}function FL(t,e){XR[t]=e}function stt(t){Ote({createCanvas:t})}function Jie(t,e,n){var r=Pie("registerMap");r&&r(t,e,n)}function ltt(t){var e=Pie("getMap");return e&&e(t)}var eae=oJe;gf(NL,OJe);gf(IT,PJe);gf(IT,FJe);gf(NL,QJe);gf(IT,JJe);gf(zie,Met);ML(iie);OL(Vet,WQe);FL("default",LJe);zs({type:Nh,event:Nh,update:Nh},ti);zs({type:Ub,event:Ub,update:Ub},ti);zs({type:a0,event:a0,update:a0},ti);zs({type:Gb,event:Gb,update:Gb},ti);zs({type:o0,event:o0,update:o0},ti);$L("light",XJe);$L("dark",YJe);var utt={};function um(t){return t==null?0:t.length||1}function YW(t){return t}var ctt=function(){function t(e,n,r,i,a,o){this._old=e,this._new=n,this._oldKeyGetter=r||YW,this._newKeyGetter=i||YW,this.context=a,this._diffModeMultiple=o==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},i=new Array(e.length),a=new Array(n.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],u=um(l);if(u>1){var c=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(c,o)}else u===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(n,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=r[l],c=i[l],f=um(u),h=um(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=n[i],o=um(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);n[i]=null}},t.prototype._initIndexMap=function(e,n,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!n){var l=n[s],u=um(l);u===0?(n[s]=o,a&&r.push(s)):u===1?n[s]=[l,o]:l.push(o)}}},t}();const Sy=ctt;var ftt=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function htt(t,e){var n={},r=n.encode={},i=ut(),a=[],o=[],s={};G(t.dimensions,function(h){var d=t.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;fN(r,p)[v]=h,d.isExtraCoord||(i.set(p,1),ptt(d.type)&&(a[0]=h),fN(s,p)[v]=t.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(h)}Xre.each(function(m,g){var y=fN(r,g),x=d.otherDims[g];x!=null&&x!==!1&&(y[x]=d.name)})});var l=[],u={};i.each(function(h,d){var p=r[d];u[d]=p[0],l=l.concat(p)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=$e(l,function(h){return t.getDimensionInfo(h).storeDimIndex}),n.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(a=c.slice());var f=r.tooltip;return f&&f.length?o=f.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,n.userOutput=new ftt(s,e),n}function fN(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function dtt(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function ptt(t){return!(t==="ordinal"||t==="time")}var vtt=function(){function t(e){this.otherDims={},e!=null&&De(this,e)}return t}();const Xb=vtt;var gtt=Jn(),mtt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},tae=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=iae(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return wt(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=oie(this.source),r=!aae(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===o)l=n?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(l=n?h.name:null,u=h.type)}a.push({property:l,type:u,ordinalMeta:c}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=mtt[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:p}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===n)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(n);o&&(i=o.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function nae(t){return t instanceof tae}function rae(t){for(var e=ut(),n=0;n<(t||[]).length;n++){var r=t[n],i=Ye(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,n)}return e}function iae(t){var e=gtt(t);return e.dimNameMap||(e.dimNameMap=rae(t.dimensionsDefine))}function aae(t){return t>30}var cm=Ye,Lu=$e,ytt=typeof Int32Array>"u"?Array:Int32Array,xtt="e\0\0",ZW=-1,wtt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],btt=["_approximateExtent"],QW,eb,fm,hm,hN,tb,dN,Ctt=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;nae(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,u={},c=0;c<r.length;c++){var f=r[c],h=Be(f)?new Xb({name:f}):f instanceof Xb?f:new Xb(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),a[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=ut();G(o,function(m){v.set(a[m].storeDimIndex,m)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(Zt(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var i=this,a;if(e instanceof FR&&(a=e),!a){var o=this.dimensions,s=wL(e)||Xi(e)?new sie(e,o.length):e;a=new FR;var l=Lu(o,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(s,l,r)}this._store=a,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=htt(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=n[l],o&&dN(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Rc&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===Yo;if(l&&!i.pure)for(var u=[],c=e;c<n;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&vXe(f)&&(this.hasItemOption=!0),f){var h=f.name;a[c]==null&&h!=null&&(a[c]=yl(h,null));var d=f.id;o[c]==null&&d!=null&&(o[c]=yl(d,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<n;c++)dN(this,c);QW(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){cm(e)?De(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=fm(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},t.prototype.getId=function(e){return eb(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,i=this._store;return Me(e)?i.getValues(Lu(e,function(a){return r._getStoreDimIndex(a)}),n):i.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],i=r[n];return i==null||isNaN(i)?ZW:i},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){lt(e)&&(r=n,n=e,e=[]);var i=r||this,a=Lu(hm(e),this._getStoreDimIndex,this);this._store.each(a,i?qt(n,i):n)},t.prototype.filterSelf=function(e,n,r){lt(e)&&(r=n,n=e,e=[]);var i=r||this,a=Lu(hm(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?qt(n,i):n),this},t.prototype.selectRange=function(e){var n=this,r={},i=Ot(e);return G(i,function(a){var o=n._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){lt(e)&&(r=n,n=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(n&&n.apply(this,arguments))},r),i},t.prototype.map=function(e,n,r,i){var a=r||i||this,o=Lu(hm(e),this._getStoreDimIndex,this),s=tb(this);return s._store=this._store.map(o,a?qt(n,a):n),s},t.prototype.modify=function(e,n,r,i){var a=r||i||this,o=Lu(hm(e),this._getStoreDimIndex,this);this._store.modify(o,a?qt(n,a):n)},t.prototype.downSample=function(e,n,r,i){var a=tb(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),n,r,i),a},t.prototype.lttbDownSample=function(e,n){var r=tb(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new gr(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new Sy(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return eb(e,r)},function(r){return eb(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},cm(e)?De(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],i=r&&r[n];return i??this.getVisual(n)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[n];return a==null&&(a=this.getVisual(n),Me(a)?a=a.slice():cm(a)&&(a=De({},a)),i[n]=a),a},t.prototype.setItemVisual=function(e,n,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,cm(n)?De(i,n):i[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){cm(e)?De(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?De(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;NYe(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){G(this._graphicEls,function(r,i){r&&e&&e.call(n,r,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:Lu(this.dimensions,this._getDimInfo,this),this.hostModel)),hN(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];lt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(J_(arguments)))})},t.internalField=function(){QW=function(e){var n=e._invertedIndicesMap;G(n,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=n[i]=new ytt(o.categories.length);for(var l=0;l<r.length;l++)r[l]=ZW;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},fm=function(e,n,r){return yl(e._getCategory(n,r),null)},eb=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=fm(e,e._idDimIdx,n)),r==null&&(r=xtt+n),r},hm=function(e){return Me(e)||(e=e!=null?[e]:[]),e},tb=function(e){var n=new t(e._schema?e._schema:Lu(e.dimensions,e._getDimInfo,e),e.hostModel);return hN(n,e),n},hN=function(e,n){G(wtt.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,G(btt,function(r){e[r]=ht(n[r])}),e._calculationInfo=De({},n._calculationInfo)},dN=function(e,n){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[n],l=i[n];if(s==null&&a!=null&&(r[n]=s=fm(e,a,n)),l==null&&o!=null&&(i[n]=l=fm(e,o,n)),l==null&&s!=null){var u=e._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[n]=l}}}(),t}();const LL=Ctt;function Stt(t,e){return zL(t,e).dimensions}function zL(t,e){wL(t)||(t=bL(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],i=ut(),a=[],o=_tt(t,n,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&aae(o),l=r===t.dimensionsDefine,u=l?iae(t):rae(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,o));for(var f=ut(c),h=new hie(o),d=0;d<h.length;d++)h[d]=-1;function p(_){var T=h[_];if(T<0){var E=r[_],A=Ye(E)?E:{name:E},R=new Xb,$=A.name;$!=null&&u.get($)!=null&&(R.name=R.displayName=$),A.type!=null&&(R.type=A.type),A.displayName!=null&&(R.displayName=A.displayName);var O=a.length;return h[_]=O,R.storeDimIndex=_,a.push(R),R}return a[T]}if(!s)for(var d=0;d<o;d++)p(d);f.each(function(_,T){var E=xr(_).slice();if(E.length===1&&!Be(E[0])&&E[0]<0){f.set(T,!1);return}var A=f.set(T,[]);G(E,function(R,$){var O=Be(R)?u.get(R):R;O!=null&&O<o&&(A[$]=O,m(p(O),T,$))})});var v=0;G(n,function(_){var T,E,A,R;if(Be(_))T=_,R={};else{R=_,T=R.name;var $=R.ordinalMeta;R.ordinalMeta=null,R=De({},R),R.ordinalMeta=$,E=R.dimsDef,A=R.otherDims,R.name=R.coordDim=R.coordDimIndex=R.dimsDef=R.otherDims=null}var O=f.get(T);if(O!==!1){if(O=xr(O),!O.length)for(var M=0;M<(E&&E.length||1);M++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&O.push(v++)}G(O,function(B,P){var z=p(B);if(l&&R.type!=null&&(z.type=R.type),m(pt(z,R),T,P),z.name==null&&E){var U=E[P];!Ye(U)&&(U={name:U}),z.name=z.displayName=U.name,z.defaultTooltip=U.defaultTooltip}A&&pt(z.otherDims,A)})}});function m(_,T,E){Xre.get(T)!=null?_.otherDims[T]=E:(_.coordDim=T,_.coordDimIndex=E,i.set(T,!0))}var g=e.generateCoord,y=e.generateCoordCount,x=y!=null;y=g?y||1:0;var w=g||"value";function b(_){_.name==null&&(_.name=_.coordDim)}if(s)G(a,function(_){b(_)}),a.sort(function(_,T){return _.storeDimIndex-T.storeDimIndex});else for(var C=0;C<o;C++){var S=p(C),D=S.coordDim;D==null&&(S.coordDim=Ttt(w,i,x),S.coordDimIndex=0,(!g||y<=0)&&(S.isExtraCoord=!0),y--),b(S),S.type==null&&(Qre(t,C)===Yr.Must||S.isExtraCoord&&(S.otherDims.itemName!=null||S.otherDims.seriesName!=null))&&(S.type="ordinal")}return Dtt(a),new tae({source:t,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function Dtt(t){for(var e=ut(),n=0;n<t.length;n++){var r=t[n],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function _tt(t,e,n,r){var i=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return G(e,function(a){var o;Ye(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function Ttt(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var Ett=function(){function t(e){this.coordSysDims=[],this.axisMap=ut(),this.categoryAxisMap=ut(),this.coordSysName=e}return t}();function Att(t){var e=t.get("coordinateSystem"),n=new Ett(e),r=Ntt[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var Ntt={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis",Wi).models[0],a=t.getReferringComponents("yAxis",Wi).models[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),Zd(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Zd(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis",Wi).models[0];e.coordSysDims=["single"],n.set("single",i),Zd(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar",Wi).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Zd(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),Zd(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,a=i.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();G(a.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=o[l];n.set(c,u),Zd(u)&&(r.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Zd(t){return t.get("type")==="category"}function oae(t,e,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,a,o,s;ktt(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(t&&t.get("stack")),u,c,f,h;if(G(a,function(y,x){Be(y)&&(a[x]=y={name:y}),l&&!y.isExtraCoord&&(!r&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!r&&!u&&(r=!0),c){f="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;G(a,function(y){y.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(h,p),g.storeDimIndex=s.ensureCalculationDimension(f,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(a.push(m),a.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:f}}function ktt(t){return!nae(t.schema)}function od(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function sae(t,e){return od(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Itt(t,e){var n=t.get("coordinateSystem"),r=TT.get(n),i;return e&&e.coordSysDims&&(i=$e(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=dtt(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function Rtt(t,e,n){var r,i;return n&&G(t,function(a,o){var s=a.coordDim,l=n.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(t[r].otherDims.itemName=0),r}function $x(t,e,n){n=n||{};var r=e.getSourceManager(),i,a=!1;t?(a=!0,i=bL(t)):(i=r.getSource(),a=i.sourceFormat===Yo);var o=Att(e),s=Itt(e,o),l=n.useEncodeDefaulter,u=lt(l)?l:l?Pt(pQe,s,e):null,c={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},f=zL(i,c),h=Rtt(f.dimensions,n.createInvertedIndices,o),d=a?null:r.getSharedDataStore(f),p=oae(e,{schema:f,store:d}),v=new LL(f,e);v.setCalculationInfo(p);var m=h!=null&&$tt(i)?function(g,y,x,w){return w===h?x:this.defaultDimValueGetter(g,y,x,w)}:null;return v.hasItemOption=!1,v.initData(a?i:d,null,m),v}function $tt(t){if(t.sourceFormat===Yo){var e=Mtt(t.data||[]);return!Me(Dx(e))}}function Mtt(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}var lae=function(){function t(e){this._setting=e||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(e){return this._setting[e]},t.prototype.unionExtent=function(e){var n=this._extent;e[0]<n[0]&&(n[0]=e[0]),e[1]>n[1]&&(n[1]=e[1])},t.prototype.unionExtentFromData=function(e,n){this.unionExtent(e.getApproximateExtent(n))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(e,n){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(n)||(r[1]=n)},t.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(e){this._isBlank=e},t}();oT(lae);const ku=lae;var Ott=0,Ptt=function(){function t(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Ott}return t.createByAxisModel=function(e){var n=e.option,r=n.data,i=r&&$e(r,Ftt);return new t({categories:i,needCollect:!i,deduplication:n.dedplication!==!1})},t.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},t.prototype.parseAndCollect=function(e){var n,r=this._needCollect;if(!Be(e)&&!r)return e;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=e,n;var i=this._getOrCreateMap();return n=i.get(e),n==null&&(r?(n=this.categories.length,this.categories[n]=e,i.set(e,n)):n=NaN),n},t.prototype._getOrCreateMap=function(){return this._map||(this._map=ut(this.categories))},t}();function Ftt(t){return Ye(t)&&t.value!=null?t.value:t+""}const YR=Ptt;function ZR(t){return t.type==="interval"||t.type==="log"}function Ltt(t,e,n,r){var i={},a=t[1]-t[0],o=i.interval=V3(a/e,!0);n!=null&&o<n&&(o=i.interval=n),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=uae(o),l=i.niceTickExtent=[ar(Math.ceil(t[0]/o)*o,s),ar(Math.floor(t[1]/o)*o,s)];return ztt(l,t),i}function pN(t){var e=Math.pow(10,aT(t)),n=t/e;return n?n===2?n=3:n===3?n=5:n*=2:n=1,ar(n*e)}function uae(t){return ol(t)+2}function JW(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function ztt(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),JW(t,0,e),JW(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function $T(t,e){return t>=e[0]&&t<=e[1]}function MT(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function OT(t,e){return t*(e[1]-e[0])+e[0]}var cae=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new YR({})),Me(i)&&(i=new YR({categories:$e(i,function(a){return Ye(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(n){return n==null?NaN:Be(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},e.prototype.contain=function(n){return n=this.parse(n),$T(n,this._extent)&&this._ordinalMeta.categories[n]!=null},e.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),MT(n,this._extent)},e.prototype.scale=function(n){return n=Math.round(OT(n,this._extent)),this.getRawOrdinalNumber(n)},e.prototype.getTicks=function(){for(var n=[],r=this._extent,i=r[0];i<=r[1];)n.push({value:i}),i++;return n},e.prototype.getMinorTicks=function(n){},e.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var u=r[o];i[o]=u,a[u]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},e.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},e.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(ku);ku.registerClass(cae);const fae=cae;var Bf=ar,hae=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return $T(n,this._extent)},e.prototype.normalize=function(n){return MT(n,this._extent)},e.prototype.scale=function(n){return OT(n,this._extent)},e.prototype.setExtent=function(n,r){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=uae(n)},e.prototype.getTicks=function(n){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(n?s.push({value:Bf(a[0]-r,o)}):s.push({value:i[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=Bf(u+r,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(n?s.push({value:Bf(c+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],u=0,c=[],f=s.value-l.value,h=f/n;u<n-1;){var d=Bf(l.value+(u+1)*h);d>a[0]&&d<a[1]&&c.push(d),u++}i.push(c)}return i},e.prototype.getLabel=function(n,r){if(n==null)return"";var i=r&&r.precision;i==null?i=ol(n.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=Bf(n.value,i,!0);return pL(a)},e.prototype.calcNiceTicks=function(n,r,i){n=n||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=Ltt(a,n,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);n.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var o=this._interval;n.fixMin||(r[0]=Bf(Math.floor(r[0]/o)*o)),n.fixMax||(r[1]=Bf(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},e.type="interval",e}(ku);ku.registerClass(hae);const Mx=hae;var dae=typeof Float32Array<"u",Btt=dae?Float32Array:Array;function ru(t){return Me(t)?dae?new Float32Array(t):t:new Btt(t)}var Vtt="__ec_stack_";function BL(t){return t.get("stack")||Vtt+t.seriesIndex}function VL(t){return t.dim+t.index}function pae(t,e){var n=[];return e.eachSeriesByType(t,function(r){gae(r)&&n.push(r)}),n}function Wtt(t){var e={};G(t,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);e[h]?e[h].push(g):e[h]=[g]}});var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,u){return l-u});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}n[r]=a}}return n}function vae(t){var e=Wtt(t),n=[];return G(t,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=e[l],c=Math.abs(o[1]-o[0]),f=a.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=r.getData();s=Math.abs(o[1]-o[0])/d.count()}var p=En(r.get("barWidth"),s),v=En(r.get("barMaxWidth"),s),m=En(r.get("barMinWidth")||(mae(r)?.5:1),s),g=r.get("barGap"),y=r.get("barCategoryGap");n.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:VL(a),stackId:BL(r)})}),Utt(n)}function Utt(t){var e={};G(t,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var u=r.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=r.barMaxWidth;f&&(l[u].maxWidth=f);var h=r.barMinWidth;h&&(l[u].minWidth=h);var d=r.barGap;d!=null&&(s.gap=d);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var n={};return G(e,function(r,i){n[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=Ot(a).length;s=Math.max(35-l*4,15)+"%"}var u=En(s,o),c=En(r.gap,1),f=r.remainedWidth,h=r.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),G(a,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var w=g.width;y&&(w=Math.min(w,y)),x&&(w=Math.max(w,x)),g.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),x&&x>w&&(w=x),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;G(a,function(g,y){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;G(a,function(g,y){n[i][y]=n[i][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+c)})}),n}function Gtt(t,e,n){if(t&&e){var r=t[VL(e)];return r!=null&&n!=null?r[BL(n)]:r}}function Htt(t,e){var n=pae(t,e),r=vae(n);G(n,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=BL(i),u=r[VL(s)][l],c=u.offset,f=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function jtt(t){return{seriesType:t,plan:_L(),reset:function(e){if(gae(e)){var n=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=n.getDimensionIndex(n.mapDimension(a.dim)),s=n.getDimensionIndex(n.mapDimension(i.dim)),l=e.get("showBackground",!0),u=n.mapDimension(a.dim),c=n.getCalculationInfo("stackResultDimension"),f=od(n,u)&&!!n.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),d=qtt(i,a),p=mae(e),v=e.get("barMinHeight")||0,m=c&&n.getDimensionIndex(c),g=n.getLayout("size"),y=n.getLayout("offset");return{progress:function(x,w){for(var b=x.count,C=p&&ru(b*3),S=p&&l&&ru(b*3),D=p&&ru(b),_=r.master.getRect(),T=h?_.width:_.height,E,A=w.getStore(),R=0;(E=x.next())!=null;){var $=A.get(f?m:o,E),O=A.get(s,E),M=d,B=void 0;f&&(B=+$-A.get(o,E));var P=void 0,z=void 0,U=void 0,H=void 0;if(h){var F=r.dataToPoint([$,O]);if(f){var W=r.dataToPoint([B,O]);M=W[0]}P=M,z=F[1]+y,U=F[0]-M,H=g,Math.abs(U)<v&&(U=(U<0?-1:1)*v)}else{var F=r.dataToPoint([O,$]);if(f){var W=r.dataToPoint([O,B]);M=W[1]}P=F[0]+y,z=M,U=g,H=F[1]-M,Math.abs(H)<v&&(H=(H<=0?-1:1)*v)}p?(C[R]=P,C[R+1]=z,C[R+2]=h?U:H,S&&(S[R]=h?_.x:P,S[R+1]=h?z:_.y,S[R+2]=T),D[E]=E):w.setItemLayout(E,{x:P,y:z,width:U,height:H}),R+=3}p&&w.setLayout({largePoints:C,largeDataIndices:D,largeBackgroundPoints:S,valueAxisHorizontal:h})}}}}}}function gae(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function mae(t){return t.pipelineContext&&t.pipelineContext.large}function qtt(t,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var Ktt=function(t,e,n,r){for(;n<r;){var i=n+r>>>1;t[i][1]<e?n=i+1:r=i}return n},yae=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r.type="time",r}return e.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return Ix(n.value,jV[tQe(nv(this._minLevelUnit))]||jV.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(n,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return nQe(n,r,i,o,a)},e.prototype.getTicks=function(){var n=this._interval,r=this._extent,i=[];if(!n)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=tnt(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=So,r[1]+=So),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-So}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},e.prototype.calcNiceTicks=function(n,r,i){n=n||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=nb.length,l=Math.min(Ktt(nb,this._approxInterval,0,s),s-1);this._interval=nb[l][1],this._minLevelUnit=nb[Math.max(l-1,0)][0]},e.prototype.parse=function(n){return Zt(n)?n:+Bo(n)},e.prototype.contain=function(n){return $T(this.parse(n),this._extent)},e.prototype.normalize=function(n){return MT(this.parse(n),this._extent)},e.prototype.scale=function(n){return OT(n,this._extent)},e.type="time",e}(Mx),nb=[["second",fL],["minute",hL],["hour",u0],["quarter-day",u0*6],["half-day",u0*12],["day",So*1.2],["half-week",So*3.5],["week",So*7],["month",So*31],["quarter",So*95],["half-year",HV/2],["year",HV]];function Xtt(t,e,n,r){var i=Bo(e),a=Bo(n),o=function(p){return qV(i,p,r)===qV(a,p,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},f=function(){return c()&&o("minute")},h=function(){return f()&&o("second")},d=function(){return h()&&o("millisecond")};switch(t){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function Ytt(t,e){return t/=So,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function Ztt(t){var e=30*So;return t/=e,t>6?6:t>3?3:t>2?2:1}function Qtt(t){return t/=u0,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function eU(t,e){return t/=e?hL:fL,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function Jtt(t){return V3(t,!0)}function ent(t,e,n){var r=new Date(t);switch(nv(e)){case"year":case"month":r[Vre(n)](0);case"day":r[Wre(n)](1);case"hour":r[Ure(n)](0);case"minute":r[Gre(n)](0);case"second":r[Hre(n)](0),r[jre(n)](0)}return r.getTime()}function tnt(t,e,n,r){var i=1e4,a=zre,o=0;function s(T,E,A,R,$,O,M){for(var B=new Date(E),P=E,z=B[R]();P<A&&P<=r[1];)M.push({value:P}),z+=T,B[$](z),P=B.getTime();M.push({value:P,notAdd:!0})}function l(T,E,A){var R=[],$=!E.length;if(!Xtt(nv(T),r[0],r[1],n)){$&&(E=[{value:ent(new Date(r[0]),T,n)},{value:r[1]}]);for(var O=0;O<E.length-1;O++){var M=E[O].value,B=E[O+1].value;if(M!==B){var P=void 0,z=void 0,U=void 0,H=!1;switch(T){case"year":P=Math.max(1,Math.round(e/So/365)),z=dL(n),U=rQe(n);break;case"half-year":case"quarter":case"month":P=Ztt(e),z=rv(n),U=Vre(n);break;case"week":case"half-week":case"day":P=Ytt(e),z=bT(n),U=Wre(n),H=!0;break;case"half-day":case"quarter-day":case"hour":P=Qtt(e),z=my(n),U=Ure(n);break;case"minute":P=eU(e,!0),z=CT(n),U=Gre(n);break;case"second":P=eU(e,!1),z=ST(n),U=Hre(n);break;case"millisecond":P=Jtt(e),z=DT(n),U=jre(n);break}s(P,M,B,z,U,H,R),T==="year"&&A.length>1&&O===0&&A.unshift({value:A[0].value-P})}}for(var O=0;O<R.length;O++)A.push(R[O]);return R}}for(var u=[],c=[],f=0,h=0,d=0;d<a.length&&o++<i;++d){var p=nv(a[d]);if(eQe(a[d])){l(a[d],u[u.length-1]||[],c);var v=a[d+1]?nv(a[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(T,E){return T.value-E.value});for(var m=[],g=0;g<c.length;++g){var y=c[g].value;(g===0||c[g-1].value!==y)&&(m.push(c[g]),y>=r[0]&&y<=r[1]&&f++)}var x=(r[1]-r[0])/e;if(f>x*1.5&&h>x/1.5||(u.push(m),f>x||t===a[d]))break}c=[]}}}for(var w=Un($e(u,function(T){return Un(T,function(E){return E.value>=r[0]&&E.value<=r[1]&&!E.notAdd})}),function(T){return T.length>0}),b=[],C=w.length-1,d=0;d<w.length;++d)for(var S=w[d],D=0;D<S.length;++D)b.push({value:S[D].value,level:C-d});b.sort(function(T,E){return T.value-E.value});for(var _=[],d=0;d<b.length;++d)(d===0||b[d].value!==b[d-1].value)&&_.push(b[d]);return _}ku.registerClass(yae);const nnt=yae;var tU=ku.prototype,h0=Mx.prototype,rnt=ar,int=Math.floor,ant=Math.ceil,rb=Math.pow,ts=Math.log,WL=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new Mx,n._interval=0,n}return e.prototype.getTicks=function(n){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=h0.getTicks.call(this,n);return $e(o,function(s){var l=s.value,u=ar(rb(this.base,l));return u=l===i[0]&&this._fixMin?ib(u,a[0]):u,u=l===i[1]&&this._fixMax?ib(u,a[1]):u,{value:u}},this)},e.prototype.setExtent=function(n,r){var i=ts(this.base);n=ts(Math.max(0,n))/i,r=ts(Math.max(0,r))/i,h0.setExtent.call(this,n,r)},e.prototype.getExtent=function(){var n=this.base,r=tU.getExtent.call(this);r[0]=rb(n,r[0]),r[1]=rb(n,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=ib(r[0],a[0])),this._fixMax&&(r[1]=ib(r[1],a[1])),r},e.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=ts(n[0])/ts(r),n[1]=ts(n[1])/ts(r),tU.unionExtent.call(this,n)},e.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=Ene(i),o=n/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[ar(ant(r[0]/a)*a),ar(int(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(n){h0.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},e.prototype.parse=function(n){return n},e.prototype.contain=function(n){return n=ts(n)/ts(this.base),$T(n,this._extent)},e.prototype.normalize=function(n){return n=ts(n)/ts(this.base),MT(n,this._extent)},e.prototype.scale=function(n){return n=OT(n,this._extent),rb(this.base,n)},e.type="log",e}(ku),xae=WL.prototype;xae.getMinorTicks=h0.getMinorTicks;xae.getLabel=h0.getLabel;function ib(t,e){return rnt(t,ol(e))}ku.registerClass(WL);const ont=WL;var snt=function(){function t(e,n,r){this._prepareParams(e,n,r)}return t.prototype._prepareParams=function(e,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var a=this._modelMinRaw=n.get("min",!0);lt(a)?this._modelMinNum=ab(e,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=ab(e,a));var o=this._modelMaxRaw=n.get("max",!0);if(lt(o)?this._modelMaxNum=ab(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=ab(e,o)),i)this._axisDataLen=n.getCategories().length;else{var s=n.get("boundaryGap"),l=Me(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Kc(l[0],1),Kc(l[1],1)]}},t.prototype.calculate=function(){var e=this._isOrdinal,n=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-n||Math.abs(n),s=this._modelMinRaw==="dataMin"?n:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=e?i?0:NaN:n-a[0]*o),l==null&&(l=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=ay(s)||ay(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},t.prototype.modifyDataMinMax=function(e,n){this[unt[e]]=n},t.prototype.setDeterminedMinMax=function(e,n){var r=lnt[e];this[r]=n},t.prototype.freeze=function(){this.frozen=!0},t}(),lnt={min:"_determinedMin",max:"_determinedMax"},unt={min:"_dataMin",max:"_dataMax"};function wae(t,e,n){var r=t.rawExtentInfo;return r||(r=new snt(t,e,n),t.rawExtentInfo=r,r)}function ab(t,e){return e==null?null:ay(e)?NaN:t.parse(e)}function bae(t,e){var n=t.type,r=wae(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&n==="time"){var s=pae("bar",o),l=!1;if(G(s,function(f){l=l||f.getBaseAxis()===e.axis}),l){var u=vae(s),c=cnt(i,a,e,u);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function cnt(t,e,n,r){var i=n.axis.getExtent(),a=i[1]-i[0],o=Gtt(r,n.axis);if(o===void 0)return{min:t,max:e};var s=1/0;G(o,function(d){s=Math.min(d.offset,s)});var l=-1/0;G(o,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-t,f=1-(s+l)/a,h=c/f-c;return e+=h*(l/u),t-=h*(s/u),{min:t,max:e}}function QR(t,e){var n=e,r=bae(t,n),i=r.extent,a=n.get("splitNumber");t instanceof ont&&(t.base=n.get("logBase"));var o=t.type,s=n.get("interval"),l=o==="interval"||o==="time";t.setExtent(i[0],i[1]),t.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),s!=null&&t.setInterval&&t.setInterval(s)}function Cae(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new fae({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new nnt({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(ku.getClass(e)||Mx)}}function fnt(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function Ox(t){var e=t.getLabelModel().get("formatter"),n=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(r){return function(i,a){return t.scale.getFormattedLabel(i,a,r)}}(e):Be(e)?function(r){return function(i){var a=t.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):lt(e)?function(r){return function(i,a){return n!=null&&(a=i.value-n),r(UL(t,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return t.scale.getLabel(r)}}function UL(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function hnt(t){var e=t.model,n=t.scale;if(!(!e.get(["axisLabel","show"])||n.isBlank())){var r,i,a=n.getExtent();n instanceof fae?i=n.count():(r=n.getTicks(),i=r.length);var o=t.getLabelModel(),s=Ox(t),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=r?r[c]:{value:a[0]+c},h=s(f,c),d=o.getTextRect(h),p=dnt(d,o.get("rotate")||0);l?l.union(p):l=p}return l}}function dnt(t,e){var n=e*Math.PI/180,r=t.width,i=t.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),o=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n)),s=new Et(t.x,t.y,a,o);return s}function GL(t){var e=t.get("interval");return e??"auto"}function Sae(t){return t.type==="category"&&GL(t.getLabelModel())===0}function Dae(t,e){var n={};return G(t.mapDimensionsAll(e),function(r){n[sae(t,r)]=!0}),Ot(n)}function pnt(t,e,n){e&&G(Dae(e,n),function(r){var i=e.getApproximateExtent(r);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])})}var _ae=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},t.prototype.getCoordSysModel=function(){},t}();function vnt(t){return $x(null,t)}var gnt={isDimensionStacked:od,enableDataStack:oae,getStackedDimension:sae};function mnt(t,e){var n=e;e instanceof gr||(n=new gr(e));var r=Cae(n);return r.setExtent(t[0],t[1]),QR(r,n),r}function ynt(t){Ko(t,_ae)}function xnt(t,e){return e=e||{},id(t,null,null,e.state!=="normal")}const wnt=Object.freeze(Object.defineProperty({__proto__:null,createDimensions:Stt,createList:vnt,createScale:mnt,createSymbol:Zc,createTextStyle:xnt,dataStack:gnt,enableHoverEmphasis:P2,getECData:Xt,getLayoutRect:Yc,mixinAxisModelCommonMethods:ynt},Symbol.toStringTag,{value:"Module"}));var nU=[],bnt={registerPreprocessor:ML,registerProcessor:OL,registerPostInit:Xie,registerPostUpdate:Yie,registerUpdateLifecycle:RT,registerAction:zs,registerCoordinateSystem:Zie,registerLayout:Qie,registerVisual:gf,registerTransform:eae,registerLoading:FL,registerMap:Jie,registerImpl:Pet,PRIORITY:Bie,ComponentModel:nn,ComponentView:Za,SeriesModel:Wo,ChartView:Sa,registerComponentModel:function(t){nn.registerClass(t)},registerComponentView:function(t){Za.registerClass(t)},registerSeriesModel:function(t){Wo.registerClass(t)},registerChartView:function(t){Sa.registerClass(t)},registerSubTypeDefaulter:function(t,e){nn.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){Cne(t,e)}};function Ms(t){if(Me(t)){G(t,function(e){Ms(e)});return}kt(nU,t)>=0||(nU.push(t),lt(t)&&(t={install:t}),t.install(bnt))}var Cnt=1e-8;function rU(t,e){return Math.abs(t-e)<Cnt}function iU(t,e,n){var r=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var o=t[a];r+=ql(i[0],i[1],o[0],o[1],e,n),i=o}var s=t[0];return(!rU(i[0],s[0])||!rU(i[1],s[1]))&&(r+=ql(i[0],i[1],s[0],s[1],e,n)),r!==0}var Snt=[];function vN(t,e){for(var n=0;n<t.length;n++)Hi(t[n],t[n],e)}function aU(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(sc(e,e,a),lc(n,n,a))}}function Dnt(t){for(var e=0,n=0,r=0,i=t.length,a=t[i-1][0],o=t[i-1][1],s=0;s<i;s++){var l=t[s][0],u=t[s][1],c=a*u-l*o;e+=c,n+=(a+l)*c,r+=(o+u)*c,a=l,o=u}return e?[n/e/3,r/e/3,e]:[t[0][0]||0,t[0][1]||0]}var Tae=function(){function t(e){this.name=e}return t.prototype.setCenter=function(e){this._center=e},t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},t}(),oU=function(){function t(e,n){this.type="polygon",this.exterior=e,this.interiors=n}return t}(),sU=function(){function t(e){this.type="linestring",this.points=e}return t}(),_nt=function(t){He(e,t);function e(n,r,i){var a=t.call(this,n)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var n=this.geometries,r,i=0,a=0;a<n.length;a++){var o=n[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return Dnt(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},e.prototype.getBoundingRect=function(n){var r=this._rect;if(r&&!n)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return G(o,function(s){s.type==="polygon"?aU(s.exterior,i,a,n):G(s.points,function(l){aU(l,i,a,n)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new Et(i[0],i[1],a[0]-i[0],a[1]-i[1]),n||(this._rect=r),r},e.prototype.contain=function(n){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(n[0],n[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(iU(l,n[0],n[1])){for(var c=0;c<(u?u.length:0);c++)if(iU(u[c],n[0],n[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new Et(n,r,i,a),u=o.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var h=c[f];h.type==="polygon"?(vN(h.exterior,u),G(h.interiors,function(d){vN(d,u)})):G(h.points,function(d){vN(d,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(n){n==null&&(n=this.name);var r=new e(n,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(Tae);(function(t){He(e,t);function e(n,r){var i=t.call(this,n)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,r=n.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=bx(Snt),o=n;o&&!o.isGeoSVGGraphicRoot;)kc(a,o.getLocalTransform(),a),o=o.parent;return Cx(a,a),Hi(i,i,a),i},e})(Tae);function Tnt(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;n==null&&(n=1024);var r=e.features;return G(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=Eae(s,o,n);break;case"Polygon":gN(s,o,n);break;case"MultiLineString":gN(s,o,n);break;case"MultiPolygon":G(s,function(l,u){return gN(l,o[u],n)})}}),e.UTF8Encoding=!1,e}function gN(t,e,n){for(var r=0;r<t.length;r++)t[r]=Eae(t[r],e[r],n)}function Eae(t,e,n){for(var r=[],i=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,l=t.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/n,l/n])}return r}function lU(t,e){return t=Tnt(t),$e(Un(t.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var r=n.properties,i=n.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new oU(o[0],o.slice(1)));break;case"MultiPolygon":G(i.coordinates,function(l){l[0]&&a.push(new oU(l[0],l.slice(1)))});break;case"LineString":a.push(new sU([i.coordinates]));break;case"MultiLineString":a.push(new sU(i.coordinates))}var s=new _nt(r[e||"name"],a,r.cp);return s.properties=r,s})}const Ent=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER:fXe,asc:Dne,getPercentWithPrecision:uXe,getPixelPrecision:z3,getPrecision:ol,getPrecisionSafe:_ne,isNumeric:Ane,isRadianAroundZero:cy,linearMap:Ql,nice:V3,numericToNumber:fy,parseDate:Bo,quantile:dXe,quantity:Ene,quantityExponent:aT,reformIntervals:pXe,remRadian:B3,round:ar},Symbol.toStringTag,{value:"Module"})),Ant=Object.freeze(Object.defineProperty({__proto__:null,format:Ix,parse:Bo},Symbol.toStringTag,{value:"Module"})),Nnt=Object.freeze(Object.defineProperty({__proto__:null,Arc:dT,BezierCurve:J3,BoundingRect:Et,Circle:hT,CompoundPath:eL,Ellipse:Z3,Group:sr,Image:Pl,IncrementalDisplayable:Dre,Line:Xc,LinearGradient:tL,Polygon:Tx,Polyline:Tg,RadialGradient:Sre,Rect:qn,Ring:Q3,Sector:El,Text:Vr,clipPointsByRect:sL,clipRectByRect:$re,createIcon:Ex,extendPath:Ere,extendShape:Tre,getShapeClass:Are,getTransform:gT,initProps:Ca,makeImage:iL,makePath:vT,mergePath:kre,registerShape:Xo,resizePath:aL,updateProps:Ni},Symbol.toStringTag,{value:"Module"})),knt=Object.freeze(Object.defineProperty({__proto__:null,addCommas:pL,capitalFirst:oQe,encodeHTML:oa,formatTime:aQe,formatTpl:gL,getTextRect:iQe,getTooltipMarker:qre,normalizeCssArray:Rx,toCamelCase:vL,truncateText:Fne},Symbol.toStringTag,{value:"Module"})),Int=Object.freeze(Object.defineProperty({__proto__:null,bind:qt,clone:ht,curry:Pt,defaults:pt,each:G,extend:De,filter:Un,indexOf:kt,inherits:E3,isArray:Me,isFunction:lt,isObject:Ye,isString:Be,map:$e,merge:mt,reduce:_l},Symbol.toStringTag,{value:"Module"}));var Dy=Jn();function Rnt(t){return t.type==="category"?Mnt(t):Pnt(t)}function $nt(t,e){return t.type==="category"?Ont(t,e):{ticks:$e(t.scale.getTicks(),function(n){return n.value})}}function Mnt(t){var e=t.getLabelModel(),n=Aae(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function Aae(t,e){var n=Nae(t,"labels"),r=GL(e),i=kae(n,r);if(i)return i;var a,o;return lt(r)?a=$ae(t,r):(o=r==="auto"?Fnt(t):r,a=Rae(t,o)),Iae(n,r,{labels:a,labelCategoryInterval:o})}function Ont(t,e){var n=Nae(t,"ticks"),r=GL(e),i=kae(n,r);if(i)return i;var a,o;if((!e.get("show")||t.scale.isBlank())&&(a=[]),lt(r))a=$ae(t,r,!0);else if(r==="auto"){var s=Aae(t,t.getLabelModel());o=s.labelCategoryInterval,a=$e(s.labels,function(l){return l.tickValue})}else o=r,a=Rae(t,o,!0);return Iae(n,r,{ticks:a,tickCategoryInterval:o})}function Pnt(t){var e=t.scale.getTicks(),n=Ox(t);return{labels:$e(e,function(r,i){return{level:r.level,formattedLabel:n(r,i),rawLabel:t.scale.getLabel(r),tickValue:r.value}})}}function Nae(t,e){return Dy(t)[e]||(Dy(t)[e]=[])}function kae(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Iae(t,e,n){return t.push({key:e,value:n}),n}function Fnt(t){var e=Dy(t).autoInterval;return e??(Dy(t).autoInterval=t.calculateCategoryInterval())}function Lnt(t){var e=znt(t),n=Ox(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(u*Math.cos(r)),f=Math.abs(u*Math.sin(r)),h=0,d=0;l<=a[1];l+=s){var p=0,v=0,m=rT(n({value:l}),e.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,y=d/f;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(g,y))),w=Dy(t.model),b=t.getExtent(),C=w.lastAutoInterval,S=w.lastTickCount;return C!=null&&S!=null&&Math.abs(C-x)<=1&&Math.abs(S-o)<=1&&C>x&&w.axisExtent0===b[0]&&w.axisExtent1===b[1]?x=C:(w.lastTickCount=o,w.lastAutoInterval=x,w.axisExtent0=b[0],w.axisExtent1=b[1]),x}function znt(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function Rae(t,e,n){var r=Ox(t),i=t.scale,a=i.getExtent(),o=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),u=a[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=Sae(t),h=o.get("showMinLabel")||f,d=o.get("showMaxLabel")||f;h&&u!==a[0]&&v(a[0]);for(var p=u;p<=a[1];p+=l)v(p);d&&p-l!==a[1]&&v(a[1]);function v(m){var g={value:m};s.push(n?m:{formattedLabel:r(g),rawLabel:i.getLabel(g),tickValue:m})}return s}function $ae(t,e,n){var r=t.scale,i=Ox(t),a=[];return G(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(n?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var uU=[0,1],Bnt=function(){function t(e,n,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=n,this._extent=r||[0,0]}return t.prototype.contain=function(e){var n=this._extent,r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return e>=r&&e<=i},t.prototype.containData=function(e){return this.scale.contain(e)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(e){return z3(e||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(e,n){var r=this._extent;r[0]=e,r[1]=n},t.prototype.dataToCoord=function(e,n){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),cU(r,i.count())),Ql(e,uU,r,n)},t.prototype.coordToData=function(e,n){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),cU(r,i.count()));var a=Ql(e,r,uU,n);return this.scale.scale(a)},t.prototype.pointToData=function(e,n){},t.prototype.getTicksCoords=function(e){e=e||{};var n=e.tickModel||this.getTickModel(),r=$nt(this,n),i=r.ticks,a=$e(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=n.get("alignWithLabel");return Vnt(this,a,o,e.clamp),a},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),n=e.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),i=$e(r,function(a){return $e(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},t.prototype.getViewLabels=function(){return Rnt(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var e=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},t.prototype.calculateCategoryInterval=function(){return Lnt(this)},t}();function cU(t,e){var n=t[1]-t[0],r=e,i=n/r/2;t[0]+=i,t[1]-=i}function Vnt(t,e,n,r){var i=e.length;if(!t.onBand||n||!i)return;var a=t.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1]};else{var l=e[i-1].tickValue-e[0].tickValue,u=(e[i-1].coord-e[0].coord)/l;G(e,function(d){d.coord-=u/2});var c=t.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+u*s},e.push(o)}var f=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(d,p){return d=ar(d),p=ar(p),f?d>p:d<p}}const Mae=Bnt;function Wnt(t){var e=nn.extend(t);return nn.registerClass(e),e}function Unt(t){var e=Za.extend(t);return Za.registerClass(e),e}function Gnt(t){var e=Wo.extend(t);return Wo.registerClass(e),e}function Hnt(t){var e=Sa.extend(t);return Sa.registerClass(e),e}Tl.CMD;function Oae(t,e,n,r,i,a,o,s){var l=i-t,u=a-e,c=n-t,f=r-e,h=Math.sqrt(c*c+f*f);c/=h,f/=h;var d=l*c+u*f,p=d/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var v=o[0]=t+p*c,m=o[1]=e+p*f;return Math.sqrt((v-i)*(v-i)+(m-a)*(m-a))}var hc=new tt,Bn=new tt,Zr=new tt,dc=new tt,rl=new tt,Q2=[],Fi=new tt;function jnt(t,e){if(e<=180&&e>0){e=e/180*Math.PI,hc.fromArray(t[0]),Bn.fromArray(t[1]),Zr.fromArray(t[2]),tt.sub(dc,hc,Bn),tt.sub(rl,Zr,Bn);var n=dc.len(),r=rl.len();if(!(n<.001||r<.001)){dc.scale(1/n),rl.scale(1/r);var i=dc.dot(rl),a=Math.cos(e);if(a<i){var o=Oae(Bn.x,Bn.y,Zr.x,Zr.y,hc.x,hc.y,Q2,!1);Fi.fromArray(Q2),Fi.scaleAndAdd(rl,o/Math.tan(Math.PI-e));var s=Zr.x!==Bn.x?(Fi.x-Bn.x)/(Zr.x-Bn.x):(Fi.y-Bn.y)/(Zr.y-Bn.y);if(isNaN(s))return;s<0?tt.copy(Fi,Bn):s>1&&tt.copy(Fi,Zr),Fi.toArray(t[1])}}}}function qnt(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,hc.fromArray(t[0]),Bn.fromArray(t[1]),Zr.fromArray(t[2]),tt.sub(dc,Bn,hc),tt.sub(rl,Zr,Bn);var r=dc.len(),i=rl.len();if(!(r<.001||i<.001)){dc.scale(1/r),rl.scale(1/i);var a=dc.dot(e),o=Math.cos(n);if(a<o){var s=Oae(Bn.x,Bn.y,Zr.x,Zr.y,hc.x,hc.y,Q2,!1);Fi.fromArray(Q2);var l=Math.PI/2,u=Math.acos(rl.dot(e)),c=l+u-n;if(c>=l)tt.copy(Fi,Zr);else{Fi.scaleAndAdd(rl,s/Math.tan(Math.PI/2-c));var f=Zr.x!==Bn.x?(Fi.x-Bn.x)/(Zr.x-Bn.x):(Fi.y-Bn.y)/(Zr.y-Bn.y);if(isNaN(f))return;f<0?tt.copy(Fi,Bn):f>1&&tt.copy(Fi,Zr)}Fi.toArray(t[1])}}}}function fU(t,e,n,r){var i=n==="normal",a=i?t:t.ensureState(n);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?t.useStyle(s):a.style=s}function Knt(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=_2(r[0],r[1]),a=_2(r[1],r[2]);if(!i||!a){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=n0([],r[1],r[0],o/i),l=n0([],r[1],r[2],o/a),u=n0([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function Xnt(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<O2.length;l++){var u=O2[l],c=e[u],f=u==="normal";if(c){var h=c.get("show"),d=f?s:wt(i.states[u]&&i.states[u].ignore,s);if(d||!wt(h,o)){var p=f?r:r&&r.states[u];p&&(p.ignore=!0);continue}r||(r=new Tg,t.setTextGuideLine(r),!f&&(s||!o)&&fU(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),fU(r,!1,u,c)}}if(r){pt(r.style,n),r.style.fill=null;var v=a.get("showAbove"),m=t.textGuideLineConfig=t.textGuideLineConfig||{};m.showAbove=v||!1,r.buildPath=Knt}}function Ynt(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<Vo.length;r++){var i=Vo[r];n[i]=t.getModel([i,e])}return n}function Znt(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new L2(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:u,localRect:o,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function Qnt(t,e,n,r,i,a){var o=t.length;if(o<2)return;t.sort(function(D,_){return D.rect[e]-_.rect[e]});for(var s=0,l,u=!1,c=0,f=0;f<o;f++){var h=t[f],d=h.rect;l=d[e]-s,l<0&&(d[e]-=l,h.label[e]-=l,u=!0);var p=Math.max(-l,0);c+=p,s=d[e]+d[n]}c>0&&a&&b(-c/o,0,o);var v=t[0],m=t[o-1],g,y;x(),g<0&&C(-g,.8),y<0&&C(y,.8),x(),w(g,y,1),w(y,g,-1),x(),g<0&&S(-g),y<0&&S(y);function x(){g=v.rect[e]-r,y=i-m.rect[e]-m.rect[n]}function w(D,_,T){if(D<0){var E=Math.min(_,-D);if(E>0){b(E*T,0,o);var A=E+D;A<0&&C(-A*T,1)}else C(-D*T,1)}}function b(D,_,T){D!==0&&(u=!0);for(var E=_;E<T;E++){var A=t[E],R=A.rect;R[e]+=D,A.label[e]+=D}}function C(D,_){for(var T=[],E=0,A=1;A<o;A++){var R=t[A-1].rect,$=Math.max(t[A].rect[e]-R[e]-R[n],0);T.push($),E+=$}if(E){var O=Math.min(Math.abs(D)/E,_);if(D>0)for(var A=0;A<o-1;A++){var M=T[A]*O;b(M,0,A+1)}else for(var A=o-1;A>0;A--){var M=T[A-1]*O;b(-M,A,o)}}}function S(D){var _=D<0?-1:1;D=Math.abs(D);for(var T=Math.ceil(D/(o-1)),E=0;E<o-1;E++)if(_>0?b(T,0,E+1):b(-T,o-E-1,o),D-=T,D<=0)return}return u}function Jnt(t,e,n,r){return Qnt(t,"y","height",e,n,r)}function ert(t){var e=[];t.sort(function(v,m){return m.priority-v.priority});var n=new Et(0,0,0,0);function r(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<t.length;i++){var a=t[i],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,c=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=a.obb,h=!1,d=0;d<e.length;d++){var p=e[d];if(n.intersect(p.rect)){if(o&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new L2(p.localRect,p.transform)),f||(f=new L2(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(r(u),c&&r(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}const trt=Object.freeze(Object.defineProperty({__proto__:null,Axis:Mae,ChartView:Sa,ComponentModel:nn,ComponentView:Za,List:LL,Model:gr,PRIORITY:Bie,SeriesModel:Wo,color:CKe,connect:ntt,dataTool:utt,dependencies:Let,disConnect:rtt,disconnect:Kie,dispose:itt,env:St,extendChartView:Hnt,extendComponentModel:Wnt,extendComponentView:Unt,extendSeriesModel:Gnt,format:knt,getCoordinateSystemDimensions:ott,getInstanceByDom:RL,getInstanceById:att,getMap:ltt,graphic:Nnt,helper:wnt,init:ttt,innerDrawElementOnCanvas:AL,matrix:Gqe,number:Ent,parseGeoJSON:lU,parseGeoJson:lU,registerAction:zs,registerCoordinateSystem:Zie,registerLayout:Qie,registerLoading:FL,registerLocale:cL,registerMap:Jie,registerPostInit:Xie,registerPostUpdate:Yie,registerPreprocessor:ML,registerProcessor:OL,registerTheme:$L,registerTransform:eae,registerUpdateLifecycle:RT,registerVisual:gf,setCanvasCreator:stt,setPlatformAPI:Ote,throttle:kT,time:Ant,use:Ms,util:Int,vector:Eqe,version:Fet,zrUtil:mqe,zrender:sXe},Symbol.toStringTag,{value:"Module"}));var nrt=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(nn);const rrt=nrt;var JR=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Wi).models[0]},e.type="cartesian2dAxis",e}(nn);Ko(JR,_ae);var Pae={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},irt=mt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Pae),HL=mt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Pae),art=mt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},HL),ort=pt({logBase:10},HL);const srt={category:irt,value:HL,time:art,log:ort};var lrt={value:1,category:1,time:1,log:1};function hU(t,e,n,r){G(lrt,function(i,a){var o=mt(mt({},srt[a],!0),r,!0),s=function(l){He(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=yy(this),d=h?_T(c):{},p=f.getTheme();mt(c,p.get(a+"Axis")),mt(c,this.getDefaultOption()),c.type=dU(c),h&&Kv(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=YR.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+a,u.defaultOption=o,u}(n);t.registerComponentModel(s)}),t.registerSubTypeDefaulter(e+"Axis",dU)}function dU(t){return t.type||(t.data?"category":"value")}var urt=function(){function t(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return t.prototype.getAxis=function(e){return this._axes[e]},t.prototype.getAxes=function(){return $e(this._dimList,function(e){return this._axes[e]},this)},t.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Un(this.getAxes(),function(n){return n.scale.type===e})},t.prototype.addAxis=function(e){var n=e.dim;this._axes[n]=e,this._dimList.push(n)},t}();const crt=urt;var e$=["x","y"];function pU(t){return t.type==="interval"||t.type==="time"}var frt=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=e$,n}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!pU(n)||!pU(r))){var i=n.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,f=(s[1]-o[1])/u,h=o[0]-i[0]*c,d=o[1]-a[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=Cx([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(n){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},e.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},e.prototype.containZone=function(n,r){var i=this.dataToPoint(n),a=this.dataToPoint(r),o=this.getArea(),s=new Et(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(n,r,i){i=i||[];var a=n[0],o=n[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Hi(i,n,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(n,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(n[0]),u=a.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(n,r){var i=[];if(this._invTransform)return Hi(i,n,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(n[0]),r),i[1]=o.coordToData(o.toLocalCoord(n[1]),r),i},e.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},e.prototype.getArea=function(){var n=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),i=Math.min(n[0],n[1]),a=Math.min(r[0],r[1]),o=Math.max(n[0],n[1])-i,s=Math.max(r[0],r[1])-a;return new Et(i,a,o,s)},e}(crt),hrt=function(t){He(e,t);function e(n,r,i,a,o){var s=t.call(this,n,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},e.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},e}(Mae);const drt=hrt;function t$(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?p[h[s]]-p[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Hv(n.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var g=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-g:g,a.z2=1,a}function vU(t){return t.get("coordinateSystem")==="cartesian2d"}function gU(t){var e={xAxisModel:null,yAxisModel:null};return G(e,function(n,r){var i=r.replace(/Model$/,""),a=t.getReferringComponents(i,Wi).models[0];e[r]=a}),e}var mN=Math.log;function prt(t,e,n){var r=Mx.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),o=i.length-1,s=r.getInterval.call(n),l=bae(t,e),u=l.extent,c=l.fixMin,f=l.fixMax;if(t.type==="log"){var h=mN(t.base);u=[mN(u[0])/h,mN(u[1])/h]}t.setExtent(u[0],u[1]),t.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var d=r.getExtent.call(t);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=r.getInterval.call(t),v=u[0],m=u[1];if(c&&f)p=(m-v)/o;else if(c)for(m=u[0]+p*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=pN(p),m=u[0]+p*o;else if(f)for(v=u[1]-p*o;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=pN(p),v=u[1]-p*o;else{var g=t.getTicks().length-1;g>o&&(p=pN(p));var y=p*o;m=Math.ceil(u[1]/p)*p,v=ar(m-y),v<0&&u[0]>=0?(v=0,m=ar(y)):m>0&&u[1]<=0&&(m=0,v=-ar(y))}var x=(i[0].value-a[0].value)/s,w=(i[o].value-a[o].value)/s;r.setExtent.call(t,v+p*x,m+p*w),r.setInterval.call(t,p),(x||w)&&r.setNiceExtent.call(t,v+p,m-p)}var vrt=function(){function t(e,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=e$,this._initCartesian(e,n,r),this.model=e}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(e,n){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Ot(o),u=l.length;if(u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=o[h],p=d.model,v=d.scale;ZR(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(QR(v,p),ZR(v)&&(s=d))}c.length&&(s||(s=c.pop(),QR(s.scale,s.model)),G(c,function(m){prt(m.scale,m.model,s.scale)}))}}i(r.x),i(r.y);var a={};G(r.x,function(o){mU(r,"y",o,a)}),G(r.y,function(o){mU(r,"x",o,a)}),this.resize(this.model,n)},t.prototype.resize=function(e,n,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=Yc(i,{width:n.getWidth(),height:n.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(G(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=hnt(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);o[f]-=c[f]+h,u.position==="top"?o.y+=c.height+h:u.position==="left"&&(o.x+=c.width+h)}}}),l()),G(this._coordsList,function(u){u.calcAffineTransform()});function l(){G(s,function(u){var c=u.isHorizontal(),f=c?[0,o.width]:[0,o.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),grt(u,c?o.x:o.y)})}},t.prototype.getAxis=function(e,n){var r=this._axesMap[e];if(r!=null)return r[n||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(e,n){if(e!=null&&n!=null){var r="x"+e+"y"+n;return this._coordsMap[r]}Ye(e)&&(n=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===n)return a[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},t.prototype.convertFromPixel=function(e,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},t.prototype._findConvertTarget=function(e){var n=e.seriesModel,r=e.xAxisModel||n&&n.getReferringComponents("xAxis",Wi).models[0],i=e.yAxisModel||n&&n.getReferringComponents("yAxis",Wi).models[0],a=e.gridModel,o=this._coordsList,s,l;if(n)s=n.coordinateSystem,kt(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},t.prototype.containPoint=function(e){var n=this._coordsList[0];if(n)return n.containPoint(e)},t.prototype._initCartesian=function(e,n,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(n.eachComponent("xAxis",u("x"),this),n.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,G(s.x,function(c,f){G(s.y,function(h,d){var p="x"+f+"y"+d,v=new frt(p);v.master=i,v.model=e,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(yN(f,e)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var p=new drt(c,Cae(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=a,p.index=h,a._axesList.push(p),s[c][h]=p,l[c]++}}}},t.prototype._updateScale=function(e,n){G(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(vU(i)){var a=gU(i),o=a.xAxisModel,s=a.yAxisModel;if(!yN(o,n)||!yN(s,n))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");r(u,c),r(u,f)}},this);function r(i,a){G(Dae(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},t.prototype.getTooltipAxes=function(e){var n=[],r=[];return G(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);kt(n,a)<0&&n.push(a),kt(r,o)<0&&r.push(o)}),{baseAxes:n,otherAxes:r}},t.create=function(e,n){var r=[];return e.eachComponent("grid",function(i,a){var o=new t(i,e,n);o.name="grid_"+a,o.resize(i,n,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(vU(i)){var a=gU(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),r},t.dimensions=e$,t}();function yN(t,e){return t.getCoordSysModel()===e}function mU(t,e,n,r){n.getAxesOnZeroOf=function(){return a?[a]:[]};var i=t[e],a,o=n.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)yU(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&yU(i[u])&&!r[c(i[u])]){a=i[u];break}a&&(r[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function yU(t){return t&&t.type!=="category"&&t.type!=="time"&&fnt(t)}function grt(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord=t.dim==="x"?function(i){return i+e}:function(i){return r-i+e},t.toLocalCoord=t.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}const mrt=vrt;var pc=Math.PI,Ih=function(){function t(e,n){this.group=new sr,this.opt=n,this.axisModel=e,pt(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new sr({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!xU[e]},t.prototype.add=function(e){xU[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var i=B3(n-e),a,o;return cy(i)?(o=r>0?"top":"bottom",a="center"):cy(i-pc)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<pc?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),xU={axisLine:function(t,e,n,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Hi(s,s,o),Hi(l,l,o));var c=De({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Xc({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});vy(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);Be(h)&&(h=[h,h]),(Be(d)||Zt(d))&&(d=[d,d]);var p=Nie(e.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];G([{rotate:t.rotation+Math.PI/2,offset:p[0],r:0},{rotate:t.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,y){if(h[y]!=="none"&&h[y]!=null){var x=Zc(h[y],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,b=u?l:s;x.attr({rotation:g.rotate,x:b[0]+w*Math.cos(t.rotation),y:b[1]-w*Math.sin(t.rotation),silent:!0,z2:11}),n.add(x)}})}}},axisTickLabel:function(t,e,n,r){var i=wrt(n,r,e,t),a=Crt(n,r,e,t);if(xrt(e,a,i),brt(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=Znt($e(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));ert(o)}},axisName:function(t,e,n,r){var i=Hv(t.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,bU(a)?t.labelOffset+o*l:0],h,d=e.get("nameRotate");d!=null&&(d=d*pc/180);var p;bU(a)?h=Ih.innerTextLayout(t.rotation,d??t.rotation,o):(h=yrt(t.rotation,a,d||0,u),p=t.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),m=e.get("nameTruncate",!0)||{},g=m.ellipsis,y=Hv(t.nameTruncateMaxWidth,m.maxWidth,p),x=new Vr({x:f[0],y:f[1],rotation:h.rotation,silent:Ih.isLabelSilent(e),style:id(s,{text:i,font:v,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(mT({el:x,componentModel:e,itemName:i}),x.__fullText=i,x.anid="name",e.get("triggerEvent")){var w=Ih.makeAxisEventDataBase(e);w.targetType="axisName",w.name=i,Xt(x).eventData=w}r.add(x),x.updateTransform(),n.add(x),x.decomposeTransform()}}};function yrt(t,e,n,r){var i=B3(n-t),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return cy(i-pc/2)?(o=l?"bottom":"top",a="center"):cy(i-pc*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<pc*1.5&&i>pc/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function xrt(t,e,n){if(!Sae(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=n[0],c=n[1],f=n[n.length-1],h=n[n.length-2];r===!1?(co(a),co(u)):wU(a,o)&&(r?(co(o),co(c)):(co(a),co(u))),i===!1?(co(s),co(f)):wU(l,s)&&(i?(co(l),co(h)):(co(s),co(f)))}}function co(t){t&&(t.ignore=!0)}function wU(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var i=bx([]);return eT(i,i,-t.rotation),n.applyTransform(kc([],i,t.getLocalTransform())),r.applyTransform(kc([],i,e.getLocalTransform())),n.intersect(r)}}function bU(t){return t==="middle"||t==="center"}function Fae(t,e,n,r,i){for(var a=[],o=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=n,e&&(Hi(o,o,e),Hi(s,s,e));var c=new Xc({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});vy(c.shape,c.style.lineWidth),c.anid=i+"_"+t[l].tickValue,a.push(c)}return a}function wrt(t,e,n,r){var i=n.axis,a=n.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),u=i.getTicksCoords(),c=Fae(u,e.transform,l,pt(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function brt(t,e,n,r){var i=n.axis,a=n.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),u=pt(s.getLineStyle(),pt(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var f=Fae(o[c],e.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)t.add(f[h])}}function Crt(t,e,n,r){var i=n.axis,a=Hv(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=n.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(Hv(r.labelRotate,o.get("rotate"))||0)*pc/180,c=Ih.innerTextLayout(r.rotation,u,r.labelDirection),f=n.getCategories&&n.getCategories(!0),h=[],d=Ih.isLabelSilent(n),p=n.get("triggerEvent");return G(l,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,x=v.rawLabel,w=o;if(f&&f[g]){var b=f[g];Ye(b)&&b.textStyle&&(w=new gr(b.textStyle,o,n.ecModel))}var C=w.getTextColor()||n.get(["axisLine","lineStyle","color"]),S=i.dataToCoord(g),D=new Vr({x:S,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:id(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:lt(C)?C(i.type==="category"?x:i.type==="value"?g+"":g,m):C})});if(D.anid="label_"+g,p){var _=Ih.makeAxisEventDataBase(n);_.targetType="axisLabel",_.value=x,_.tickIndex=m,i.type==="category"&&(_.dataIndex=g),Xt(D).eventData=_}e.add(D),D.updateTransform(),h.push(D),t.add(D),D.decomposeTransform()}),h}}const Lae=Ih;function Srt(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Drt(n,t,e),n.seriesInvolved&&Trt(n,t),n}function Drt(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];G(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=_y(s.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",r);if(G(s.getAxes(),Pt(v,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&G(p.baseAxes,Pt(v,d?"cross":!0,h)),d&&G(p.otherAxes,Pt(v,"cross",!1))}function v(m,g,y){var x=y.model.getModel("axisPointer",i),w=x.get("show");if(!(!w||w==="auto"&&!m&&!n$(x))){g==null&&(g=x.get("triggerTooltip")),x=m?_rt(y,f,i,e,m,g):x;var b=x.get("snap"),C=x.get("triggerEmphasis"),S=_y(y.model),D=g||b||y.type==="category",_=t.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:C,involveSeries:D,snap:b,useHandle:n$(x),seriesModels:[],linkGroup:null};u[S]=_,t.seriesInvolved=t.seriesInvolved||D;var T=Ert(a,y);if(T!=null){var E=o[T]||(o[T]={axesInfo:{}});E.axesInfo[S]=_,E.mapper=a[T].mapper,_.linkGroup=E}}}})}function _rt(t,e,n,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};G(s,function(h){l[h]=ht(o.get(h))}),l.snap=t.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!a){var f=l.lineStyle=o.get("crossStyle");f&&pt(u,f.textStyle)}}return t.model.getModel("axisPointer",new gr(l,n,r))}function Trt(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),a=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||n.get(["axisPointer","show"],!0)===!1||G(t.coordSysAxesInfo[_y(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(n),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=n.getData().count())})})}function Ert(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var a=t[i]||{};if(xN(a[r+"AxisId"],n.id)||xN(a[r+"AxisIndex"],n.componentIndex)||xN(a[r+"AxisName"],n.name))return i}}function xN(t,e){return t==="all"||Me(t)&&kt(t,e)>=0||t===e}function Art(t){var e=jL(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,a=n.get("status"),o=n.get("value");o!=null&&(o=r.parse(o));var s=n$(n);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function jL(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[_y(t)]}function Nrt(t){var e=jL(t);return e&&e.axisPointerModel}function n$(t){return!!t.get(["handle","show"])}function _y(t){return t.type+"||"+t.id}var CU={},krt=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.axisPointerClass&&Art(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},e.prototype.updateAxisPointer=function(n,r,i,a){this._doUpdateAxisPointerClass(n,i,!1)},e.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=Nrt(n);o?(this._axisPointer||(this._axisPointer=new a)).render(n,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){CU[n]=r},e.getAxisPointerClass=function(n){return n&&CU[n]},e.type="axis",e}(Za);const zae=krt;var r$=Jn();function Irt(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,f=r$(t).splitAreaColors,h=ut(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),g=o.getAreaStyle();s=Me(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),x=void 0,w=void 0,b=void 0,C=void 0;i.isHorizontal()?(x=m,w=l.y,b=y-x,C=l.height,m=x+b):(x=l.x,w=m,b=l.width,C=y-w,m=w+C);var S=u[p-1].tickValue;S!=null&&h.set(S,d),e.add(new qn({anid:S!=null?"area_"+S:null,shape:{x,y:w,width:b,height:C},style:pt({fill:s[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}r$(t).splitAreaColors=h}}}function Rrt(t){r$(t).splitAreaColors=null}var $rt=["axisLine","axisTickLabel","axisName"],Mrt=["splitArea","splitLine","minorSplitLine"],Bae=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return e.prototype.render=function(n,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new sr,this.group.add(this._axisGroup),!!n.get("show")){var s=n.getCoordSysModel(),l=t$(s,n),u=new Lae(n,De({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(ZR(h[d].getOtherAxis(n.axis).scale))return!0;return!1}},l));G($rt,u.add,u),this._axisGroup.add(u.getGroup()),G(Mrt,function(f){n.get([f,"show"])&&Ort[f](this,this._axisGroup,n,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||Rre(o,this._axisGroup,n),t.prototype.render.call(this,n,r,i,a)}},e.prototype.remove=function(){Rrt(this)},e.type="cartesianAxis",e}(zae),Ort={splitLine:function(t,e,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Me(s)?s:[s];for(var l=r.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:a}),h=[],d=[],p=o.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var g=c++%s.length,y=f[v].tickValue,x=new Xc({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:pt({stroke:s[g]},p),silent:!0});vy(x.shape,p.lineWidth),e.add(x)}}},minorSplitLine:function(t,e,n,r){var i=n.axis,a=n.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var c=[],f=[],h=o.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var m=new Xc({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});vy(m.shape,h.lineWidth),e.add(m)}},splitArea:function(t,e,n,r){Irt(t,e,n,r)}},Vae=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="xAxis",e}(Bae),Prt=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=Vae.type,n}return e.type="yAxis",e}(Bae),Frt=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="grid",n}return e.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new qn({shape:n.coordinateSystem.getRect(),style:pt({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Za),SU={offset:0};function Wae(t){t.registerComponentView(Frt),t.registerComponentModel(rrt),t.registerCoordinateSystem("cartesian2d",mrt),hU(t,"x",JR,SU),hU(t,"y",JR,SU),t.registerComponentView(Vae),t.registerComponentView(Prt),t.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var th=Jn(),DU=ht,wN=qt,Lrt=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,i){var a=n.get("value"),o=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,e,n,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,n);if(!s)s=this._group=new sr,this.createPointerEl(s,u,e,n),this.createLabelEl(s,u,e,n),r.getZr().add(s);else{var h=Pt(_U,n,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,n)}EU(s,n,!0),this._renderHandle(a)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),i=e.axis,a=i.type==="category",o=n.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=jL(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,i,a){},t.prototype.createPointerEl=function(e,n,r,i){var a=n.pointer;if(a){var o=th(e).pointerEl=new $Ze[a.type](DU(n.pointer));e.add(o)}},t.prototype.createLabelEl=function(e,n,r,i){if(n.label){var a=th(e).labelEl=new Vr(DU(n.label));e.add(a),TU(a,i)}},t.prototype.updatePointerEl=function(e,n,r){var i=th(e).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,i){var a=th(e).labelEl;a&&(a.setStyle(n.label.style),r(a,{x:n.label.x,y:n.label.y}),TU(a,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=Ex(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Kte(u.event)},onmousedown:wN(this._onHandleDragMove,this,0,0),drift:wN(this._onHandleDragMove,this),ondragend:wN(this._onHandleDragEnd,this)}),r.add(i)),EU(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Me(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,bie(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},t.prototype._moveHandleToValue=function(e,n){_U(this._axisPointerModel,!n&&this._moveAnimation,this._handle,bN(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(bN(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(bN(i)),th(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),VR(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function _U(t,e,n,r){Uae(th(n).lastProp,r)||(th(n).lastProp=r,e?Ni(n,r,t):(n.stopAnimation(),n.attr(r)))}function Uae(t,e){if(Ye(t)&&Ye(e)){var n=!0;return G(e,function(r,i){n=n&&Uae(t[i],r)}),!!n}else return t===e}function TU(t,e){t[e.get(["label","show"])?"show":"hide"]()}function bN(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function EU(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=n)})}const zrt=Lrt;function Brt(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function Vrt(t,e,n,r,i){var a=n.get("value"),o=Gae(a,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=Rx(s.get("padding")||0),u=s.getFont(),c=rT(o,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Wrt(f,h,d,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:id(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Wrt(t,e,n,r){var i=r.getWidth(),a=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function Gae(t,e,n,r,i){t=e.scale.parse(t);var a=e.scale.getLabel({value:t},{precision:i.precision}),o=i.formatter;if(o){var s={value:UL(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};G(r,function(l){var u=n.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Be(o)?a=o.replace("{value}",a):lt(o)&&(a=o(s))}return a}function Hae(t,e,n){var r=nd();return eT(r,r,n.rotation),T2(r,r,n.position),oL([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function Urt(t,e,n,r,i,a){var o=Lae.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),Vrt(e,r,i,a,{position:Hae(r.axis,t,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Grt(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function Hrt(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}var jrt=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),c=AU(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var h=Brt(a),d=qrt[u](s,f,c);d.style=h,n.graphicKey=d.type,n.pointer=d}var p=t$(l.model,i);Urt(r,n,p,i,a,o)},e.prototype.getHandleTransform=function(n,r,i){var a=t$(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=Hae(r.axis,n,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=AU(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,f=[n.x,n.y];f[c]+=r[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:d,tooltipOption:p[c]}},e}(zrt);function AU(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var qrt={line:function(t,e,n){var r=Grt([e,n[0]],[e,n[1]],NU(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:Hrt([e-r/2,n[0]],[r,i],NU(t))}}};function NU(t){return t.dim==="x"?0:1}const Krt=jrt;var Xrt=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(nn);const Yrt=Xrt;var iu=Jn(),Zrt=G;function jae(t,e,n){if(!St.node){var r=e.getZr();iu(r).records||(iu(r).records={}),Qrt(r,e);var i=iu(r).records[t]||(iu(r).records[t]={});i.handler=n}}function Qrt(t,e){if(iu(t).initialized)return;iu(t).initialized=!0,n("click",Pt(kU,"click")),n("mousemove",Pt(kU,"mousemove")),n("globalout",eit);function n(r,i){t.on(r,function(a){var o=tit(e);Zrt(iu(t).records,function(s){s&&i(s,a,o.dispatchAction)}),Jrt(o.pendings,e)})}}function Jrt(t,e){var n=t.showTip.length,r=t.hideTip.length,i;n?i=t.showTip[n-1]:r&&(i=t.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function eit(t,e,n){t.handler("leave",null,n)}function kU(t,e,n,r){e.handler(t,n,r)}function tit(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function i$(t,e){if(!St.node){var n=e.getZr(),r=(iu(n).records||{})[t];r&&(iu(n).records[t]=null)}}var nit=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=r.getComponent("tooltip"),o=n.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";jae("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(n,r){i$("axisPointer",r)},e.prototype.dispose=function(n,r){i$("axisPointer",r)},e.type="axisPointer",e}(Za);const rit=nit;function qae(t,e){var n=[],r=t.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=rd(a,t);if(o==null||o<0||Me(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(t.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=a.mapDimension(h),v=[];v[d]=a.get(p,o),v[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),n=l.dataToPoint(v)||[]}else n=l.dataToPoint(a.getValues($e(l.dimensions,function(g){return a.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),n=[m.x+m.width/2,m.y+m.height/2]}return{point:n,el:s}}var IU=Jn();function iit(t,e,n){var r=t.currTrigger,i=[t.x,t.y],a=t,o=t.dispatchAction||qt(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Yb(i)&&(i=qae({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=Yb(i),u=a.axesInfo,c=s.axesInfo,f=r==="leave"||Yb(i),h={},d={},p={list:[],map:{}},v={showPointer:Pt(oit,d),showTooltip:Pt(sit,p)};G(s.coordSysMap,function(g,y){var x=l||g.containPoint(i);G(s.coordSysAxesInfo[y],function(w,b){var C=w.axis,S=fit(u,w);if(!f&&x&&(!u||S)){var D=S&&S.value;D==null&&!l&&(D=C.pointToData(i)),D!=null&&RU(w,D,v,!1,h)}})});var m={};return G(c,function(g,y){var x=g.linkGroup;x&&!d[y]&&G(x.axesInfo,function(w,b){var C=d[b];if(w!==g&&C){var S=C.value;x.mapper&&(S=g.axis.scale.parse(x.mapper(S,$U(w),$U(g)))),m[g.key]=S}})}),G(m,function(g,y){RU(c[y],g,v,!0,h)}),lit(d,c,h),uit(p,i,t,o),cit(c,o,n),h}}function RU(t,e,n,r,i){var a=t.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var o=ait(e,t),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&De(i,s[0]),!r&&t.snap&&a.containData(l)&&l!=null&&(e=l),n.showPointer(t,e,s),n.showTooltip(t,o,l)}}function ait(t,e){var n=e.axis,r=n.dim,i=t,a=[],o=Number.MAX_VALUE,s=-1;return G(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,t,n);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],t,n.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=t-f,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,i=f,a.length=0),G(h,function(m){a.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:i}}function oit(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function sit(t,e,n,r){var i=n.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=_y(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function lit(t,e,n){var r=n.axesInfo=[];G(e,function(i,a){var o=i.axisPointerModel.option,s=t[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function uit(t,e,n,r){if(Yb(e)||!t.list.length){r({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function cit(t,e,n){var r=n.getZr(),i="axisPointerLastHighlights",a=IU(r)[i]||{},o=IU(r)[i]={};G(t,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&u.triggerEmphasis&&G(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;o[d]=h})});var s=[],l=[];G(a,function(u,c){!o[c]&&l.push(u)}),G(o,function(u,c){!a[c]&&s.push(u)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function fit(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function $U(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function Yb(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function Kae(t){zae.registerAxisPointerClass("CartesianAxisPointer",Krt),t.registerComponentModel(Yrt),t.registerComponentView(rit),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!Me(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=Srt(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},iit)}function hit(t){Ms(Wae),Ms(Kae)}var MU="\0_ec_interaction_mutex";function dit(t,e,n){var r=Xae(t);r[e]=n}function pit(t,e,n){var r=Xae(t),i=r[e];i===n&&(r[e]=null)}function Xae(t){return t[MU]||(t[MU]={})}zs({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ti);var vit={axisPointer:1,tooltip:1,brush:1};function git(t,e,n){var r=e.getComponentByElement(t.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!vit.hasOwnProperty(r.mainType)&&i&&i.model!==n}function Yae(t,e,n,r,i,a){t=t||0;var o=n[1]-n[0];if(i!=null&&(i=Qd(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=Qd(s,[0,o]),i=a=Qd(s,[i,a]),r=0}e[0]=Qd(e[0],n),e[1]=Qd(e[1],n);var l=CN(e,r);e[r]+=t;var u=i||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,e[r]=Qd(e[r],c);var f;return f=CN(e,r),i!=null&&(f.sign!==l.sign||f.span<i)&&(e[1-r]=e[r]+l.sign*i),f=CN(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function CN(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Qd(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var sd=!0,Ty=Math.min,Yv=Math.max,mit=Math.pow,yit=1e4,xit=6,wit=6,OU="globalPan",bit={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Cit={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},PU={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Sit=0,Dit=function(t){He(e,t);function e(n){var r=t.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new sr,r._uid="brushController_"+Sit++,G(Iit,function(i,a){this._handlers[a]=qt(i,this)},r),r}return e.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},e.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||dit(r,OU,this._uid),G(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=mt(ht(PU),n,!0)},e.prototype._doDisableBrush=function(){var n=this._zr;pit(n,OU,this._uid),G(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};G(n,function(i){r[i.panelId]=ht(i)})}else this._panels=null;return this},e.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(n){n=$e(n,function(h){return mt(ht(PU),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Sy(i,n,u,l).add(c).update(c).remove(f).execute(),this;function l(h,d){return(h.id!=null?h.id:r+d)+"-"+h.brushType}function u(h,d){return l(h.__brushOption,d)}function c(h,d){var p=n[h];if(d!=null&&i[d]===s)a[h]=i[d];else{var v=a[h]=d!=null?(i[d].__brushOption=p,i[d]):Qae(o,Zae(o,p));qL(o,v)}}function f(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),a$(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Fs);function Zae(t,e){var n=PT[e.brushType].createCover(t,e);return n.__brushOption=e,eoe(n,e),t.group.add(n),n}function Qae(t,e){var n=KL(e);return n.endCreating&&(n.endCreating(t,e),eoe(e,e.__brushOption)),e}function Jae(t,e){var n=e.__brushOption;KL(e).updateCoverShape(t,e,n.range,n)}function eoe(t,e){var n=e.z;n==null&&(n=yit),t.traverse(function(r){r.z=n,r.z2=n})}function qL(t,e){KL(e).updateCommon(t,e),Jae(t,e)}function KL(t){return PT[t.__brushOption.brushType]}function XL(t,e,n){var r=t._panels;if(!r)return sd;var i,a=t._transform;return G(r,function(o){o.isTargetByCursor(e,n,a)&&(i=o)}),i}function toe(t,e){var n=t._panels;if(!n)return sd;var r=e.__brushOption.panelId;return r!=null?n[r]:sd}function a$(t){var e=t._covers,n=e.length;return G(e,function(r){t.group.remove(r)},t),e.length=0,!!n}function ld(t,e){var n=$e(t._covers,function(r){var i=r.__brushOption,a=ht(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function _it(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],i=n[0]-r[0],a=n[1]-r[1],o=mit(i*i+a*a,.5);return o>xit}function noe(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function roe(t,e,n,r){var i=new sr;return i.add(new qn({name:"main",style:YL(n),silent:!0,draggable:!0,cursor:"move",drift:Pt(FU,t,e,i,["n","s","w","e"]),ondragend:Pt(ld,e,{isEnd:!0})})),G(r,function(a){i.add(new qn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Pt(FU,t,e,i,a),ondragend:Pt(ld,e,{isEnd:!0})}))}),i}function ioe(t,e,n,r){var i=r.brushStyle.lineWidth||0,a=Yv(i,wit),o=n[0][0],s=n[1][0],l=o-i/2,u=s-i/2,c=n[0][1],f=n[1][1],h=c-a+i/2,d=f-a+i/2,p=c-o,v=f-s,m=p+i,g=v+i;Wl(t,e,"main",o,s,p,v),r.transformable&&(Wl(t,e,"w",l,u,a,g),Wl(t,e,"e",h,u,a,g),Wl(t,e,"n",l,u,m,a),Wl(t,e,"s",l,d,m,a),Wl(t,e,"nw",l,u,a,a),Wl(t,e,"ne",h,u,a,a),Wl(t,e,"sw",l,d,a,a),Wl(t,e,"se",h,d,a,a))}function o$(t,e){var n=e.__brushOption,r=n.transformable,i=e.childAt(0);i.useStyle(YL(n)),i.attr({silent:!r,cursor:r?"move":"default"}),G([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?s$(t,a[0]):Eit(t,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?Cit[s]+"-resize":null})})}function Wl(t,e,n,r,i,a,o){var s=e.childOfName(n);s&&s.setShape(Nit(ZL(t,e,[[r,i],[r+a,i+o]])))}function YL(t){return pt({strokeNoScale:!0},t.brushStyle)}function aoe(t,e,n,r){var i=[Ty(t,n),Ty(e,r)],a=[Yv(t,n),Yv(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Tit(t){return gT(t.group)}function s$(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=Ire(n[e],Tit(t));return r[i]}function Eit(t,e){var n=[s$(t,e[0]),s$(t,e[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function FU(t,e,n,r,i,a){var o=n.__brushOption,s=t.toRectRange(o.range),l=ooe(e,i,a);G(r,function(u){var c=bit[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=t.fromRectRange(aoe(s[0][0],s[1][0],s[0][1],s[1][1])),qL(e,n),ld(e,{isEnd:!1})}function Ait(t,e,n,r){var i=e.__brushOption.range,a=ooe(t,n,r);G(i,function(o){o[0]+=a[0],o[1]+=a[1]}),qL(t,e),ld(t,{isEnd:!1})}function ooe(t,e,n){var r=t.group,i=r.transformCoordToLocal(e,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function ZL(t,e,n){var r=toe(t,e);return r&&r!==sd?r.clipPath(n,t._transform):ht(n)}function Nit(t){var e=Ty(t[0][0],t[1][0]),n=Ty(t[0][1],t[1][1]),r=Yv(t[0][0],t[1][0]),i=Yv(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:i-n}}function kit(t,e,n){if(!(!t._brushType||Rit(t,e.offsetX,e.offsetY))){var r=t._zr,i=t._covers,a=XL(t,e,n);if(!t._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===sd||s.panelId===a.panelId)&&PT[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function l$(t){var e=t.event;e.preventDefault&&e.preventDefault()}function u$(t,e,n){return t.childOfName("main").contain(e,n)}function soe(t,e,n,r){var i=t._creatingCover,a=t._creatingPanel,o=t._brushOption,s;if(t._track.push(n.slice()),_it(t)||i){if(a&&!i){o.brushMode==="single"&&a$(t);var l=ht(o);l.brushType=LU(l.brushType,a),l.panelId=a===sd?null:a.panelId,i=t._creatingCover=Zae(t,l),t._covers.push(i)}if(i){var u=PT[LU(t._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(ZL(t,i,t._track)),r&&(Qae(t,i),u.updateCommon(t,i)),Jae(t,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&XL(t,e,n)&&a$(t)&&(s={isEnd:r,removeOnClick:!0});return s}function LU(t,e){return t==="auto"?e.defaultBrushType:t}var Iit={mousedown:function(t){if(this._dragging)zU(this,t);else if(!t.target||!t.target.draggable){l$(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=XL(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(kit(this,t,r),this._dragging){l$(t);var i=soe(this,t,r,!1);i&&ld(this,i)}},mouseup:function(t){zU(this,t)}};function zU(t,e){if(t._dragging){l$(e);var n=e.offsetX,r=e.offsetY,i=t.group.transformCoordToLocal(n,r),a=soe(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&ld(t,a)}}function Rit(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var PT={lineX:BU(0),lineY:BU(1),rect:{createCover:function(t,e){function n(r){return r}return roe({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=noe(t);return aoe(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){ioe(t,e,n,r)},updateCommon:o$,contain:u$},polygon:{createCover:function(t,e){var n=new sr;return n.add(new Tg({name:"main",style:YL(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Tx({name:"main",draggable:!0,drift:Pt(Ait,t,e),ondragend:Pt(ld,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:ZL(t,e,n)})},updateCommon:o$,contain:u$}};function BU(t){return{createCover:function(e,n){return roe({toRectRange:function(r){var i=[r,[0,100]];return t&&i.reverse(),i},fromRectRange:function(r){return r[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=noe(e),r=Ty(n[0][t],n[1][t]),i=Yv(n[0][t],n[1][t]);return[r,i]},updateCoverShape:function(e,n,r,i){var a,o=toe(e,n);if(o!==sd&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[r,a];t&&l.reverse(),ioe(e,n,l,i)},updateCommon:o$,contain:u$}}const $it=Dit;function Mit(t){return t=QL(t),function(e){return sL(e,t)}}function Oit(t,e){return t=QL(t),function(n){var r=e??n,i=r?t.width:t.height,a=r?t.x:t.y;return[a,a+(i||0)]}}function Pit(t,e,n){var r=QL(t);return function(i,a){return r.contain(a[0],a[1])&&!git(i,e,n)}}function QL(t){return Et.create(t)}var VU=["x","y","radius","angle","single"],Fit=["cartesian2d","polar","singleAxis"];function Lit(t){var e=t.get("coordinateSystem");return kt(Fit,e)>=0}function Pp(t){return t+"Axis"}function zit(t,e){var n=ut(),r=[],i=ut();t.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,t.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),u(c)}function l(c){var f=!1;return c.eachTargetAxis(function(h,d){var p=n.get(h);p&&p[d]&&(f=!0)}),f}function u(c){c.eachTargetAxis(function(f,h){(n.get(f)||n.set(f,[]))[h]=!0})}return r}var SN=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),Bit=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return e.prototype.init=function(n,r,i){var a=WU(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},e.prototype.mergeOption=function(n){var r=WU(n);mt(this.option,n,!0),mt(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;G([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=ut(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return G(VU,function(i){var a=this.getReferringComponents(Pp(i),EXe);if(a.specified){r=!0;var o=new SN;G(a.models,function(s){o.add(s.componentIndex)}),n.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(s,"single")}function l(u,c){var f=u[0];if(f){var h=new SN;if(h.add(f.componentIndex),n.set(c,h),a=!1,c==="x"||c==="y"){var d=f.getReferringComponents("grid",Wi).models[0];d&&G(u,function(p){f.componentIndex!==p.componentIndex&&d===p.getReferringComponents("grid",Wi).models[0]&&h.add(p.componentIndex)})}}}a&&G(VU,function(u){if(a){var c=i.findComponents({mainType:Pp(u),filter:function(h){return h.get("type",!0)==="category"}});if(c[0]){var f=new SN;f.add(c[0].componentIndex),n.set(u,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");G([["start","startValue"],["end","endValue"]],function(a,o){var s=n[a[0]]!=null,l=n[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(Pp(r),i))},this),n},e.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){G(i.indexList,function(o){n.call(r,a,o)})})},e.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(Pp(n),r)},e.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;G([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},e.prototype.setCalculatedRange=function(n){var r=this.option;G(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},e.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},e.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(nn);function WU(t){var e={};return G(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}const Vit=Bit;var Wit=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(Vit);const Uit=Wit;var Git=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Za);const Hit=Git;var jit=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(Hit);const qit=jit;var up=G,UU=Dne,Kit=function(){function t(e,n,r,i){this._dimName=e,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(n){if(Lit(n)){var r=Pp(this._dimName),i=n.getReferringComponents(r,Wi).models[0];i&&this._axisIndex===i.componentIndex&&e.push(n)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return ht(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;up(["start","end"],function(h,d){var p=e[h],v=e[h+"Value"];a[d]==="percent"?(p==null&&(p=o[d]),v=i.parse(Ql(p,o,n))):(u=!0,v=v==null?n[d]:i.parse(v),p=Ql(v,n,o)),l[d]=v==null||isNaN(v)?n[d]:v,s[d]=p==null||isNaN(p)?o[d]:p}),UU(l),UU(s);var c=this._minMaxSpan;u?f(l,s,n,o,!1):f(s,l,o,n,!0);function f(h,d,p,v,m){var g=m?"Span":"ValueSpan";Yae(0,h,p,"all",c["min"+g],c["max"+g]);for(var y=0;y<2;y++)d[y]=Ql(h[y],p,v,!0),m&&(d[y]=i.parse(d[y]))}return{valueWindow:l,percentWindow:s}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=Xit(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,n){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;up(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var f=u.getStore(),h=$e(c,function(d){return u.getDimensionIndex(d)},u);u.filterSelf(function(d){for(var p,v,m,g=0;g<c.length;g++){var y=f.get(h[g],d),x=!isNaN(y),w=y<o[0],b=y>o[1];if(x&&!w&&!b)return!0;x&&(m=!0),w&&(p=!0),b&&(v=!0)}return m&&p&&v})}else up(c,function(d){if(a==="empty")l.setData(u=u.map(d,function(v){return s(v)?v:NaN}));else{var p={};p[d]=o,u.selectRange(p)}});up(c,function(d){u.setApproximateExtent(o,d)})}});function s(l){return l>=o[0]&&l<=o[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;up(["min","max"],function(i){var a=n.get(i+"Span"),o=n.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Ql(r[0]+o,r,[0,100],!0):a!=null&&(o=Ql(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=z3(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},t}();function Xit(t,e,n){var r=[1/0,-1/0];up(n,function(o){pnt(r,o.getData(),e)});var i=t.getAxisModel(),a=wae(i.axis.scale,i,r).calculate();return[a.min,a.max]}const Yit=Kit;var Zit={getTargetSeries:function(t){function e(i){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=t.getComponent(Pp(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var n=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Yit(i,a,s,t),n.push(o.__dzAxisProxy))});var r=ut();return G(n,function(i){G(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,e)})}),t.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const Qit=Zit;function Jit(t){t.registerAction("dataZoom",function(e,n){var r=zit(n,e);G(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var GU=!1;function eat(t){GU||(GU=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,Qit),Jit(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function tat(t){t.registerComponentModel(Uit),t.registerComponentView(qit),eat(t)}var ps=function(){function t(){}return t}(),loe={};function dm(t,e){loe[t]=e}function uoe(t){return loe[t]}var nat=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;G(this.option.feature,function(r,i){var a=uoe(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),mt(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(nn);const rat=nat;function iat(t,e,n){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=Yc(r,a,i);iv(e.get("orient"),t,e.get("itemGap"),o.width,o.height),lQe(t,r,a,i)}function coe(t,e){var n=Rx(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new qn({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var aat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){var o=this.group;if(o.removeAll(),!n.get("show"))return;var s=+n.get("itemSize"),l=n.get("orient")==="vertical",u=n.get("feature")||{},c=this._features||(this._features={}),f=[];G(u,function(p,v){f.push(v)}),new Sy(this._featureNames||[],f).add(h).update(h).remove(Pt(h,null)).execute(),this._featureNames=f;function h(p,v){var m=f[p],g=f[v],y=u[m],x=new gr(y,n,n.ecModel),w;if(a&&a.newTitle!=null&&a.featureName===m&&(y.title=a.newTitle),m&&!g){if(oat(m))w={onclick:x.option.onclick,featureName:m};else{var b=uoe(m);if(!b)return;w=new b}c[m]=w}else if(w=c[g],!w)return;w.uid=kx("toolbox-feature"),w.model=x,w.ecModel=r,w.api=i;var C=w instanceof ps;if(!m&&g){C&&w.dispose&&w.dispose(r,i);return}if(!x.get("show")||C&&w.unusable){C&&w.remove&&w.remove(r,i);return}d(x,w,m),x.setIconStatus=function(S,D){var _=this.option,T=this.iconPaths;_.iconStatus=_.iconStatus||{},_.iconStatus[S]=D,T[S]&&(D==="emphasis"?jv:qv)(T[S])},w instanceof ps&&w.render&&w.render(x,r,i,a)}function d(p,v,m){var g=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),x=v instanceof ps&&v.getIcons?v.getIcons():p.get("icon"),w=p.get("title")||{},b,C;Be(x)?(b={},b[m]=x):b=x,Be(w)?(C={},C[m]=w):C=w;var S=p.iconPaths={};G(b,function(D,_){var T=Ex(D,{},{x:-s/2,y:-s/2,width:s,height:s});T.setStyle(g.getItemStyle());var E=T.ensureState("emphasis");E.style=y.getItemStyle();var A=new Vr({style:{text:C[_],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});T.setTextContent(A),mT({el:T,componentModel:n,itemName:_,formatterParamsExtra:{title:C[_]}}),T.__title=C[_],T.on("mouseover",function(){var R=y.getItemStyle(),$=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";A.setStyle({fill:y.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||$}),A.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",_])!=="emphasis"&&i.leaveEmphasis(this),A.hide()}),(p.get(["iconStatus",_])==="emphasis"?jv:qv)(T),o.add(T),T.on("click",qt(v.onclick,v,r,i,_)),S[_]=T})}iat(o,n,i),o.add(coe(o.getBoundingRect(),n)),l||o.eachChild(function(p){var v=p.__title,m=p.ensureState("emphasis"),g=m.textConfig||(m.textConfig={}),y=p.getTextContent(),x=y&&y.ensureState("emphasis");if(x&&!lt(x)&&v){var w=x.style||(x.style={}),b=rT(v,Vr.makeFont(w)),C=p.x+o.x,S=p.y+o.y+s,D=!1;S+b.height>i.getHeight()&&(g.position="top",D=!0);var _=D?-5-b.height:s+10;C+b.width/2>i.getWidth()?(g.position=["100%",_],w.align="right"):C-b.width/2<0&&(g.position=[0,_],w.align="left")}})},e.prototype.updateView=function(n,r,i,a){G(this._features,function(o){o instanceof ps&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(n,r){G(this._features,function(i){i instanceof ps&&i.remove&&i.remove(n,r)}),this.group.removeAll()},e.prototype.dispose=function(n,r){G(this._features,function(i){i instanceof ps&&i.dispose&&i.dispose(n,r)})},e.type="toolbox",e}(Za);function oat(t){return t.indexOf("my")===0}const sat=aat;var lat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=St.browser;if(lt(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),d=h[0].indexOf("base64")>-1,p=o?decodeURIComponent(h[1]):h[1];d&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,g=new Uint8Array(m);m--;)g[m]=p.charCodeAt(m);var y=new Blob([g]);window.navigator.msSaveOrOpenBlob(y,v)}else{var x=document.createElement("iframe");document.body.appendChild(x);var w=x.contentWindow,b=w.document;b.open("image/svg+xml","replace"),b.write(p),b.close(),w.focus(),b.execCommand("SaveAs",!0,v),document.body.removeChild(x)}}else{var C=i.get("lang"),S='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',D=window.open();D.document.write(S),D.document.title=a}},e.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(ps);const uat=lat;var HU="__ec_magicType_stack__",cat=[["line","bar"],["stack"]],fat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return G(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(n,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(jU[i]){var s={series:[]},l=function(f){var h=f.subType,d=f.id,p=jU[i](h,d,f,a);p&&(pt(p,f.option),s.series.push(p));var v=f.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var m=v.getAxesByScale("ordinal")[0];if(m){var g=m.dim,y=g+"Axis",x=f.getReferringComponents(y,Wi).models[0],w=x.componentIndex;s[y]=s[y]||[];for(var b=0;b<=w;b++)s[y][w]=s[y][w]||{};s[y][w].boundaryGap=i==="bar"}}};G(cat,function(f){kt(f,i)>=0&&G(f,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=mt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(ps),jU={line:function(t,e,n,r){if(t==="bar")return mt({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if(t==="line")return mt({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var i=n.get("stack")===HU;if(t==="line"||t==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),mt({id:e,stack:i?"":HU},r.get(["option","stack"])||{},!0)}};zs({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});const hat=fat;var FT=new Array(60).join("-"),Zv="	";function dat(t){var e={},n=[],r=[];return t.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function pat(t){var e=[];return G(t,function(n,r){var i=n.categoryAxis,a=n.valueAxis,o=a.dim,s=[" "].concat($e(n.series,function(d){return d.name})),l=[i.model.getCategories()];G(n.series,function(d){var p=d.getRawData();l.push(d.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var u=[s.join(Zv)],c=0;c<l[0].length;c++){for(var f=[],h=0;h<l.length;h++)f.push(l[h][c]);u.push(f.join(Zv))}e.push(u.join(`
`))}),e.join(`

`+FT+`

`)}function vat(t){return $e(t,function(e){var n=e.getRawData(),r=[e.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=n.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+Zv:"")+i.join(Zv))}),r.join(`
`)}).join(`

`+FT+`

`)}function gat(t){var e=dat(t);return{value:Un([pat(e.seriesGroupByCategoryAxis),vat(e.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+FT+`

`),meta:e.meta}}function J2(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mat(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Zv)>=0)return!0}var c$=new RegExp("["+Zv+"]+","g");function yat(t){for(var e=t.split(/\n+/g),n=J2(e.shift()).split(c$),r=[],i=$e(n,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=J2(e[a]).split(c$);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function xat(t){for(var e=t.split(/\n+/g),n=J2(e.shift()),r=[],i=0;i<e.length;i++){var a=J2(e[i]);if(a){var o=a.split(c$),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}function wat(t,e){var n=t.split(new RegExp(`
*`+FT+`
*`,"g")),r={series:[]};return G(n,function(i,a){if(mat(i)){var o=yat(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=xat(i);r.series.push(o)}}),r}var bat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var f=a.get("optionToContent"),h=a.get("contentToOption"),d=gat(n);if(lt(f)){var p=f(r.getOption());Be(p)?u.innerHTML=p:Gv(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=d.value,u.appendChild(c)}var m=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),w=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var b=this;function C(){i.removeChild(o),b._dom=null}uR(x,"click",C),uR(w,"click",function(){if(h==null&&f!=null||h!=null&&f==null){C();return}var S;try{lt(h)?S=h(u,r.getOption()):S=wat(c.value,m)}catch(D){throw C(),new Error("Data view format error "+D)}S&&r.dispatchAction({type:"changeDataView",newOption:S}),C()}),x.innerHTML=l[1],w.innerHTML=l[2],w.style.cssText=x.style.cssText=y,!a.get("readOnly")&&g.appendChild(w),g.appendChild(x),o.appendChild(s),o.appendChild(u),o.appendChild(g),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(ps);function Cat(t,e){return $e(t,function(n,r){var i=e&&e[r];if(Ye(i)&&!Me(i)){var a=Ye(n)&&!Me(n);a||(n={value:n});var o=i.name!=null&&n.name==null;return n=pt(n,i),o&&delete n.name,n}else return n})}zs({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];G(t.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)n.push(De({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:Cat(r.data,a)})}}),e.mergeOption(pt({series:n},t.newOption))});const Sat=bat;var foe=G,hoe=Jn();function Dat(t,e){var n=JL(t);foe(e,function(r,i){for(var a=n.length-1;a>=0;a--){var o=n[a];if(o[i])break}if(a<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();n[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),n.push(e)}function _at(t){var e=JL(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return foe(n,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function Tat(t){hoe(t).snapshots=null}function Eat(t){return JL(t).length}function JL(t){var e=hoe(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Aat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){Tat(n),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(ps);zs({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});const Nat=Aat;var kat=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Iat=function(){function t(e,n,r){var i=this;this._targetInfoList=[];var a=qU(n,e);G(Rat,function(o,s){(!r||!r.include||kt(r.include,s)>=0)&&o(a,i._targetInfoList)})}return t.prototype.setOutputRanges=function(e,n){return this.matchOutputRanges(e,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=DN[r.brushType](0,a,i);r.__rangeOffset={offset:ZU[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,n,r){G(e,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&G(a.coordSyses,function(o){var s=DN[i.brushType](1,o,i.range,!0);r(i,s.values,o,n)})},this)},t.prototype.setInputRanges=function(e,n){G(e,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=DN[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?ZU[r.brushType](a.values,o.offset,$at(a.xyMinMax,o.xyMinMax)):a.values}},this)},t.prototype.makePanelOpts=function(e,n){return $e(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:Mit(i),isTargetByCursor:Pit(i,e,r.coordSysModel),getLinearBrushOtherExtent:Oit(i)}})},t.prototype.controlSeries=function(e,n,r){var i=this.findTargetInfo(e,r);return i===!0||i&&kt(i.coordSyses,n.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,n){for(var r=this._targetInfoList,i=qU(n,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<KU.length;l++)if(KU[l](i,o))return o}return!0},t}();function f$(t){return t[0]>t[1]&&t.reverse(),t}function qU(t,e){return i0(t,e,{includeMainTypes:kat})}var Rat={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,i=t.gridModels,a=ut(),o={},s={};!n&&!r&&!i||(G(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),G(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),G(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];G(u.getCartesians(),function(f,h){(kt(n,f.getAxis("x").model)>=0||kt(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:XU.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){G(t.geoModels,function(n){var r=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:XU.geo})})}},KU=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],XU={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(gT(t)),e}},DN={lineX:Pt(YU,0),lineY:Pt(YU,1),rect:function(t,e,n,r){var i=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),a=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),o=[f$([i[0],a[0]]),f$([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(t,e,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=$e(n,function(o){var s=t?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function YU(t,e,n,r){var i=n.getAxis(["x","y"][t]),a=f$($e([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var ZU={lineX:Pt(QU,0),lineY:Pt(QU,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return $e(t,function(r,i){return[r[0]-n[0]*e[i][0],r[1]-n[1]*e[i][1]]})}};function QU(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function $at(t,e){var n=JU(t),r=JU(e),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function JU(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const doe=Iat;var h$=G,Mat=SXe("toolbox-dataZoom_"),Oat=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new $it(i.getZr()),this._brushController.on("brush",qt(this._onBrush,this)).mount()),Lat(n,r,this,a,i),Fat(n,r)},e.prototype.onclick=function(n,r,i){Pat[i].call(this)},e.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new doe(e4(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(u,c,f){if(f.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[h],f,c)}}),Dat(a,i),this._dispatchZoomAction(i);function s(u,c,f){var h=c.getAxis(u),d=h.model,p=l(u,d,a),v=p.findRepresentativeAxisProxy(d).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(f=Yae(0,f.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function l(u,c,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var p=d.getAxisModel(u,c.componentIndex);p&&(h=d)}),h}},e.prototype._dispatchZoomAction=function(n){var r=[];h$(n,function(i,a){r.push(ht(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(ps),Pat={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(_at(this.ecModel))}};function e4(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function Fat(t,e){t.setIconStatus("back",Eat(e)>1?"emphasis":"normal")}function Lat(t,e,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new doe(e4(t),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}mQe("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(!e||e.get(n)==null)return;var r=e.getModel(n),i=[],a=e4(r),o=i0(t,a);h$(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),h$(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var f=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Mat+u+f};h[c]=f,i.push(h)}return i});const zat=Oat;function Bat(t){t.registerComponentModel(rat),t.registerComponentView(sat),dm("saveAsImage",uat),dm("magicType",hat),dm("dataView",Sat),dm("dataZoom",zat),dm("restore",Nat),Ms(tat)}var Vat=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(nn);const Wat=Vat;function poe(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function voe(t){if(St.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var goe=voe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Uat=voe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function moe(t,e){if(!t)return e;e=vL(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function Gat(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var Hat=moe(Uat,"transition"),t4=moe(goe,"transform"),jat="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(St.transform3dSupported?"will-change:transform;":"");function qat(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function Kat(t,e,n){if(!Be(n)||n==="inside")return"";var r=t.get("backgroundColor"),i=t.get("borderWidth");e=ad(e);var a=qat(n),o=Math.max(Math.round(i)*1.5,6),s="",l=t4+":",u;kt(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=o+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+a+":-"+d+"px";var p=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function Xat(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,i="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,i+=St.transformSupported?","+t4+r:",left"+r+",top"+r),Hat+":"+i}function e9(t,e,n){var r=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!St.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=St.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+t4+":"+o+";":[["top",0],["left",0],[goe,o]]}function Yat(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(n*3/2)+"px");var i=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,o=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),G(["decoration","align"],function(l){var u=t.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function Zat(t,e,n){var r=[],i=t.get("transitionDuration"),a=t.get("backgroundColor"),o=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=xie(t,"html"),h=l+"px "+u+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(Xat(i,n)),a&&r.push("background-color:"+a),G(["width","color","radius"],function(d){var p="border-"+d,v=vL(p),m=t.get(v);m!=null&&r.push(p+":"+m+(d==="color"?"":"px"))}),r.push(Yat(c)),f!=null&&r.push("padding:"+Rx(f).join("px ")+"px"),r.join(";")+";"}function t9(t,e,n,r,i){var a=e&&e.painter;if(n){var o=a&&a.getViewportRoot();o&&Rqe(t,o,document.body,r,i)}else{t[0]=r,t[1]=i;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Qat=function(){function t(e,n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,St.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=n.getZr(),o=this._appendToBody=r&&r.appendToBody;t9(this._styleCoord,a,o,n.getWidth()/2,n.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=a.handler,c=a.painter.getViewportRoot();go(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(e){var n=this._container,r=Gat(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=jat+Zat(e,!this._firstShow,this._longHide)+e9(a[0],a[1],!0)+("border-color:"+ad(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(Be(a)&&r.get("trigger")==="item"&&!poe(r)&&(s=Kat(r,i,a)),Be(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Me(e)||(e=[e]);for(var l=0;l<e.length;l++)Gv(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},t.prototype.moveTo=function(e,n){var r=this._styleCoord;if(t9(r,this._zr,this._appendToBody,e,n),r[0]!=null&&r[1]!=null){var i=this.el.style,a=e9(r[0],r[1]);G(a,function(o){i[o[0]]=o[1]})}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",St.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(qt(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}();const Jat=Qat;var eot=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),r9(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,i,a){var o=this;Ye(e)&&sa(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Vr({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:xie(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),G(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),G(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=n9(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var i=this._styleCoord;r9(i,this._zr,e,n),e=i[0],n=i[1];var a=r.style,o=Hu(a.borderWidth||0),s=n9(a);r.x=e+o+s.left,r.y=n+o+s.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(qt(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Hu(t){return Math.max(0,t)}function n9(t){var e=Hu(t.shadowBlur||0),n=Hu(t.shadowOffsetX||0),r=Hu(t.shadowOffsetY||0);return{left:Hu(e-n),right:Hu(e+n),top:Hu(e-r),bottom:Hu(e+r)}}function r9(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}const tot=eot;var not=new qn({shape:{x:-1,y:-1,width:2,height:2}}),rot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(St.node||!r.getDom())){var i=n.getComponent("tooltip"),a=this._renderMode=NXe(i.get("renderMode"));this._tooltipContent=a==="richText"?new tot(r):new Jat(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(n,r,i){if(!(St.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(n),a.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?bie(this,"_updatePosition",50,"fixRate"):VR(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");jae("itemTooltip",this._api,qt(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,a=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(n,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,i,a){if(!(a.from===this.uid||St.node||!i.getDom())){var o=i9(a,i);this._ticket="";var s=a.dataByCoordSys,l=sot(a,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=not;c.x=a.x,c.y=a.y,c.update(),Xt(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,a))return;var f=qae(a,r),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(n,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(i9(a,i))},e.prototype._manuallyAxisShowTip=function(n,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=r.getSeriesByIndex(o);if(u){var c=u.getData(),f=pm([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(n,r){var i=n.target,a=this._tooltipModel;if(a){this._lastX=n.offsetX,this._lastY=n.offsetY;var o=n.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,n);else if(i){this._lastDataByCoordSys=null;var s,l;Pm(i,function(u){if(Xt(u).dataIndex!=null)return s=u,!0;if(Xt(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(n,s,r):l?this._showComponentItemTooltip(n,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=qt(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=pm([r.tooltipOption],a),l=this._renderMode,u=[],c=wy("section",{blocks:[],noHeader:!0}),f=[],h=new nN;G(n,function(y){G(y.dataByAxis,function(x){var w=i.getComponent(x.axisDim+"Axis",x.axisIndex),b=x.value;if(!(!w||b==null)){var C=Gae(b,w.axis,i,x.seriesDataIndices,x.valueLabelOpt),S=wy("section",{header:C,noHeader:!ys(C),sortBlocks:!0,blocks:[]});c.blocks.push(S),G(x.seriesDataIndices,function(D){var _=i.getSeriesByIndex(D.seriesIndex),T=D.dataIndexInside,E=_.getDataParams(T);if(!(E.dataIndex<0)){E.axisDim=x.axisDim,E.axisIndex=x.axisIndex,E.axisType=x.axisType,E.axisId=x.axisId,E.axisValue=UL(w.axis,{value:b}),E.axisValueLabel=C,E.marker=h.makeTooltipMarker("item",ad(E.color),l);var A=hW(_.formatTooltip(T,!0,null)),R=A.frag;if(R){var $=pm([_],a).get("valueFormatter");S.blocks.push($?De({valueFormatter:$},R):R)}A.text&&f.push(A.text),u.push(E)}})}})}),c.blocks.reverse(),f.reverse();var d=r.position,p=s.get("order"),v=mW(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,u)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",o[0],o[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(n,r,i){var a=this._ecModel,o=Xt(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,f=o.dataType,h=u.getData(f),d=this._renderMode,p=n.positionDefault,v=pm([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,f),y=new nN;g.marker=y.makeTooltipMarker("item",ad(g.color),d);var x=hW(u.formatTooltip(c,!1,f)),w=v.get("order"),b=v.get("valueFormatter"),C=x.frag,S=C?mW(b?De({valueFormatter:b},C):C,y,d,w,a.get("useUTC"),v.get("textStyle")):x.text,D="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,S,g,D,n.offsetX,n.offsetY,n.position,n.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,i){var a=Xt(r),o=a.tooltipConfig,s=o.option||{};if(Be(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=n.positionDefault,h=pm(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new nN;this._showOrMove(h,function(){var m=ht(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,n.offsetX,n.offsetY,n.position,r,v)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,i,a,o,s,l,u,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var h=n.get("formatter");l=l||n.get("position");var d=r,p=this._getNearestPoint([o,s],i,n.get("trigger"),n.get("borderColor")),v=p.color;if(h)if(Be(h)){var m=n.ecModel.get("useUTC"),g=Me(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,y&&(d=Ix(g.axisValue,d,m)),d=gL(d,i,!0)}else if(lt(h)){var x=qt(function(w,b){w===this._ticket&&(f.setContent(b,c,n,v,l),this._updatePosition(n,l,o,s,f,i,u))},this);this._ticket=a,d=h(i,a,x)}else d=h;f.setContent(d,c,n,v,l),f.show(n,v),this._updatePosition(n,l,o,s,f,i,u)}},e.prototype._getNearestPoint=function(n,r,i,a){if(i==="axis"||Me(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Me(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,i,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var f=o.getSize(),h=n.get("align"),d=n.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),lt(r)&&(r=r([i,a],s,o.el,p,{viewSize:[u,c],contentSize:f.slice()})),Me(r))i=En(r[0],u),a=En(r[1],c);else if(Ye(r)){var v=r;v.width=f[0],v.height=f[1];var m=Yc(v,{width:u,height:c});i=m.x,a=m.y,h=null,d=null}else if(Be(r)&&l){var g=oot(r,p,f,n.get("borderWidth"));i=g[0],a=g[1]}else{var g=iot(i,a,o,u,c,h?null:20,d?null:20);i=g[0],a=g[1]}if(h&&(i-=a9(h)?f[0]/2:h==="right"?f[0]:0),d&&(a-=a9(d)?f[1]/2:d==="bottom"?f[1]:0),poe(n)){var g=aot(i,a,o,u,c);i=g[0],a=g[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===n.length;return o&&G(i,function(s,l){var u=s.dataByAxis||[],c=n[l]||{},f=c.dataByAxis||[];o=o&&u.length===f.length,o&&G(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,o&&G(v,function(g,y){var x=m[y];o=o&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),a&&G(h.seriesDataIndices,function(g){var y=g.seriesIndex,x=r[y],w=a[y];x&&w&&w.data!==x.data&&(o=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!o},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){St.node||!r.getDom()||(VR(this,"_updatePosition"),this._tooltipContent.dispose(),i$("itemTooltip",r))},e.type="tooltip",e}(Za);function pm(t,e,n){var r=e.ecModel,i;n?(i=new gr(n,r,r),i=new gr(e.option,i,r)):i=e;for(var a=t.length-1;a>=0;a--){var o=t[a];o&&(o instanceof gr&&(o=o.get("tooltip",!0)),Be(o)&&(o={formatter:o}),o&&(i=new gr(o,i,r)))}return i}function i9(t,e){return t.dispatchAction||qt(e.dispatchAction,e)}function iot(t,e,n,r,i,a,o){var s=n.getSize(),l=s[0],u=s[1];return a!=null&&(t+l+a+2>r?t-=l+a:t+=a),o!=null&&(e+u+o>i?e-=u+o:e+=o),[t,e]}function aot(t,e,n,r,i){var a=n.getSize(),o=a[0],s=a[1];return t=Math.min(t+o,r)-o,e=Math.min(e+s,i)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function oot(t,e,n,r){var i=n[0],a=n[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=e.width,c=e.height;switch(t){case"inside":s=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":s=e.x+u/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+c+o;break;case"left":s=e.x-i-o,l=e.y+c/2-a/2;break;case"right":s=e.x+u+o,l=e.y+c/2-a/2}return[s,l]}function a9(t){return t==="center"||t==="middle"}function sot(t,e,n){var r=U3(t).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=_x(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=n.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=Xt(u).tooltipConfig;if(c&&c.name===t.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}const lot=rot;function uot(t){Ms(Kae),t.registerComponentModel(Wat),t.registerComponentView(lot),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ti),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ti)}function n4(t,e){var n=t.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var i=Xv(t,e,n[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<n.length;o++)a.push(Xv(t,e,n[o]));return a.join(" ")}}function yoe(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Me(e))return e+"";for(var r=[],i=0;i<n.length;i++){var a=t.getDimensionIndex(n[i]);a>=0&&r.push(e[a])}return r.join(" ")}var cot=function(t){He(e,t);function e(n,r,i,a){var o=t.call(this)||this;return o.updateData(n,r,i,a),o}return e.prototype._createSymbol=function(n,r,i,a,o){this.removeAll();var s=Zc(n,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=fot,this._symbolType=n,this.add(s)},e.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){jv(this.childAt(0))},e.prototype.downplay=function(){qv(this.childAt(0))},e.prototype.setZ=function(n,r){var i=this.childAt(0);i.zlevel=n,i.z=r},e.prototype.setDraggable=function(n,r){var i=this.childAt(0);i.draggable=n,i.cursor=!r&&n?"move":i.cursor},e.prototype.updateData=function(n,r,i,a){this.silent=!1;var o=n.getItemVisual(r,"symbol")||"circle",s=n.hostModel,l=e.getSymbolSize(n,r),u=o!==this._symbolType,c=a&&a.disableAnimation;if(u){var f=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,n,r,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):Ni(h,d,s,r),rL(h)}if(this._updateCommon(n,r,l,i,a),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Ca(h,d,s,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(n,r,i,a,o){var s=this.childAt(0),l=n.hostModel,u,c,f,h,d,p,v,m,g;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,f=a.selectItemStyle,h=a.focus,d=a.blurScope,v=a.labelStatesModels,m=a.hoverScale,g=a.cursorStyle,p=a.emphasisDisabled),!a||n.hasItemOption){var y=a&&a.itemModel?a.itemModel:n.getItemModel(r),x=y.getModel("emphasis");u=x.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=x.get("focus"),d=x.get("blurScope"),p=x.get("disabled"),v=Nx(y),m=x.getShallow("scale"),g=y.getShallow("cursor")}var w=n.getItemVisual(r,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var b=Nie(n.getItemVisual(r,"symbolOffset"),i);b&&(s.x=b[0],s.y=b[1]),g&&s.attr("cursor",g);var C=n.getItemVisual(r,"style"),S=C.fill;if(s instanceof Pl){var D=s.style;s.useStyle(De({image:D.image,x:D.x,y:D.y,width:D.width,height:D.height},C))}else s.__isEmptyBrush?s.useStyle(De({},C)):s.useStyle(C),s.style.decal=null,s.setColor(S,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var _=n.getItemVisual(r,"liftZ"),T=this._z2;_!=null?T==null&&(this._z2=s.z2,s.z2+=_):T!=null&&(s.z2=T,this._z2=null);var E=o&&o.useNameLabel;Ax(s,v,{labelFetcher:l,labelDataIndex:r,defaultText:A,inheritColor:S,defaultOpacity:C.opacity});function A(O){return E?n.getName(O):n4(n,O)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var R=s.ensureState("emphasis");R.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var $=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;R.scaleX=this._sizeX*$,R.scaleY=this._sizeY*$,this.setSymbolScale(1),py(this,h,d,p)},e.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},e.prototype.fadeOut=function(n,r,i){var a=this.childAt(0),o=Xt(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&z2(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();z2(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:n,removeOpt:s})},e.getSymbolSize=function(n,r){return met(n.getItemVisual(r,"symbolSize"))},e}(sr);function fot(t,e){this.parent.drift(t,e)}const r4=cot;function _N(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&t.getItemVisual(n,"symbol")!=="none"}function o9(t){return t!=null&&!Ye(t)&&(t={isIgnore:t}),t||{}}function s9(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Nx(e),cursorStyle:e.get("cursor")}}var hot=function(){function t(e){this.group=new sr,this._SymbolCtor=e||r4}return t.prototype.updateData=function(e,n){this._progressiveEls=null,n=o9(n);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=n.disableAnimation,l=s9(e),u={disableAnimation:s},c=n.getSymbolPoint||function(f){return e.getItemLayout(f)};a||r.removeAll(),e.diff(a).add(function(f){var h=c(f);if(_N(e,h,f,n)){var d=new o(e,f,l,u);d.setPosition(h),e.setItemGraphicEl(f,d),r.add(d)}}).update(function(f,h){var d=a.getItemGraphicEl(h),p=c(f);if(!_N(e,p,f,n)){r.remove(d);return}var v=e.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)r.remove(d),d=new o(e,f,l,u),d.setPosition(p);else{d.updateData(e,f,l,u);var g={x:p[0],y:p[1]};s?d.attr(g):Ni(d,g,i)}r.add(d),e.setItemGraphicEl(f,d)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=e},t.prototype.updateLayout=function(){var e=this,n=this._data;n&&n.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=s9(e),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n,r){this._progressiveEls=[],r=o9(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=n.getItemLayout(a);if(_N(n,o,a,r)){var s=new this._SymbolCtor(n,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),n.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},t.prototype.eachRendered=function(e){yT(this._progressiveEls||this.group,e)},t.prototype.remove=function(e){var n=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){n.remove(i)},r.hostModel)}):n.removeAll()},t}();const xoe=hot;function i4(t,e){return t.type===e}var dot=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},pot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),Me(r)&&G(r,function(a,o){Be(a)&&(a={type:a}),r[o]=mt(a,dot(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,h=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):c=!0}else c=!0;c&&W3(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=ut(),s=$e(a,function(l){return(Be(l)||Zt(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new gr(l,this,this.ecModel))},this);this._data=Un(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;G(a,function(o){r[o.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;G(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;G(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&kt(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(nn);const d$=pot;var Jd=Pt,p$=G,ob=sr,vot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new ob),this.group.add(this._selectorGroup=new ob),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var o=n.get("align"),s=n.get("orient");(!o||o==="auto")&&(o=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),u=n.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,n,r,i,l,s,u);var c=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=n.get("padding"),d=Yc(c,f,h),p=this.layoutInner(n,o,d,a,l,u),v=Yc(pt({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=coe(p,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this.getContentGroup(),c=ut(),f=r.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),p$(r.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new ob;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var y=g.getData(),x=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),b=y.getVisual("style"),C=this._createItem(g,v,p,d,r,n,x,b,w,f,a);C.on("click",Jd(l9,v,null,a,h)).on("mouseover",Jd(v$,g.name,null,a,h)).on("mouseout",Jd(g$,g.name,null,a,h)),c.set(v,!0)}else i.eachRawSeries(function(S){if(!c.get(v)&&S.legendVisualProvider){var D=S.legendVisualProvider;if(!D.containName(v))return;var _=D.indexOfName(v),T=D.getItemVisual(_,"style"),E=D.getItemVisual(_,"legendIcon"),A=ba(T.fill);A&&A[3]===0&&(A[3]=.2,T=De(De({},T),{fill:vf(A,"rgba")}));var R=this._createItem(S,v,p,d,r,n,{},T,E,f,a);R.on("click",Jd(l9,null,v,a,h)).on("mouseover",Jd(v$,null,v,a,h)).on("mouseout",Jd(g$,null,v,a,h)),c.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(n,r,i,a,o){var s=this.getSelectorGroup();p$(n,function(u){var c=u.type,f=new Vr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=r.getModel("selectorLabel"),d=r.getModel(["emphasis","selectorLabel"]);Ax(f,{normal:h,emphasis:d},{defaultText:u.title}),P2(f)})},e.prototype._createItem=function(n,r,i,a,o,s,l,u,c,f,h){var d=n.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),m=o.isSelected(r),g=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),x=a.get("icon");c=x||c||"roundRect";var w=got(c,a,l,u,d,m,h),b=new ob,C=a.getModel("textStyle");if(lt(n.getLegendIcon)&&(!x||x==="inherit"))b.add(n.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var S=x==="inherit"&&n.getData().getVisual("symbol")?g==="inherit"?n.getData().getVisual("symbolRotate"):g:0;b.add(mot({itemWidth:p,itemHeight:v,icon:c,iconRotate:S,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var D=s==="left"?p+5:-5,_=s,T=o.get("formatter"),E=r;Be(T)&&T?E=T.replace("{name}",r??""):lt(T)&&(E=T(r));var A=m?C.getTextColor():a.get("inactiveColor");b.add(new Vr({style:id(C,{text:E,x:D,y:v/2,fill:A,align:_,verticalAlign:"middle"},{inheritColor:A})}));var R=new qn({shape:b.getBoundingRect(),invisible:!0}),$=a.getModel("tooltip");return $.get("show")&&mT({el:R,componentModel:o,itemName:r,itemTooltipOption:$.option}),b.add(R),b.eachChild(function(O){O.silent=!0}),R.silent=!f,this.getContentGroup().add(b),P2(b),b.__legendDataIndex=i,b},e.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();iv(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){iv("horizontal",u,n.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=n.get("selectorButtonGap",!0),v=n.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",y=v===0?"y":"x";s==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var x={x:0,y:0};return x[m]=c[m]+p+h[m],x[g]=Math.max(c[g],h[g]),x[y]=Math.min(0,h[y]+d[1-v]),x}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Za);function got(t,e,n,r,i,a,o){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),p$(m,function(y,x){m[x]==="inherit"&&(m[x]=g[x])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?r.decal:jR(f,o),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:n).opacity),s(u,r);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,n),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&v?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function mot(t){var e=t.icon||"roundRect",n=Zc(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function l9(t,e,n,r){g$(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t??e}),v$(t,e,n,r)}function woe(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function v$(t,e,n,r){woe(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function g$(t,e,n,r){woe(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}const boe=vot;function yot(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function vm(t,e,n){var r={},i=t==="toggleSelected",a;return n.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?o[t]():(o[t](e.name),a=o.isSelected(e.name));var s=o.getData();G(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&c:r[u]=c}})}),t==="allSelect"||t==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function xot(t){t.registerAction("legendToggleSelect","legendselectchanged",Pt(vm,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Pt(vm,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Pt(vm,"inverseSelect")),t.registerAction("legendSelect","legendselected",Pt(vm,"select")),t.registerAction("legendUnSelect","legendunselected",Pt(vm,"unSelect"))}function Coe(t){t.registerComponentModel(d$),t.registerComponentView(boe),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,yot),t.registerSubTypeDefaulter("legend",function(){return"plain"}),xot(t)}var wot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var a=_T(n);t.prototype.init.call(this,n,r,i),u9(this,n,a)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),u9(this,this.option,n)},e.type="legend.scroll",e.defaultOption=Fre(d$.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(d$);function u9(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,Kv(e,n,{type:"box",ignoreSize:!!i})}const bot=wot;var c9=sr,TN=["width","height"],EN=["x","y"],Cot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new c9),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new c9)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this;t.prototype.renderInner.call(this,n,r,i,a,o,s,l);var c=this._controllerGroup,f=r.get("pageIconSize",!0),h=Me(f)?f:[f,f];p("pagePrev",0);var d=r.getModel("pageTextStyle");c.add(new Vr({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",y=Ex(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:qt(u._pageGo,u,g,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},e.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getSelectorGroup(),u=n.getOrient().index,c=TN[u],f=EN[u],h=TN[1-u],d=EN[1-u];o&&iv("horizontal",l,n.get("selectorItemGap",!0));var p=n.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=ht(i);o&&(g[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(n,a,g,u,c,h,d,f);if(o){if(s==="end")m[u]+=y[c]+p;else{var x=v[c]+p;m[u]-=x,y[f]-=x}y[c]+=v[c]+p,m[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(n,r,i,a,o,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;iv(n.get("orient"),c,n.get("itemGap"),a?i.width:null,a?null:i.height),iv("horizontal",h,n.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[o]>i[o],m=[-d.x,-d.y];r||(m[a]=c[u]);var g=[0,0],y=[-p.x,-p.y],x=wt(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(v){var w=n.get("pageButtonPosition",!0);w==="end"?y[a]+=i[o]-p[o]:g[a]+=p[o]+x}y[1-a]+=d[s]/2-p[s]/2,c.setPosition(m),f.setPosition(g),h.setPosition(y);var b={x:0,y:0};if(b[o]=v?i[o]:d[o],b[s]=Math.max(d[s],p[s]),b[l]=Math.min(0,p[l]+y[1-a]),f.__rectSize=i[o],v){var C={x:0,y:0};C[o]=Math.max(i[o]-p[o]-x,0),C[s]=b[s],f.setClipPath(new qn({shape:C})),f.__rectSize=C[o]}else h.eachChild(function(D){D.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(n);return S.pageIndex!=null&&Ni(c,{x:S.contentPosition[0],y:S.contentPosition[1]},v?n:null),this._updatePageInfoView(n,S),b},e.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;G(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=r[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;a&&o&&a.setStyle("text",Be(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=n.getOrient().index,s=TN[o],l=EN[o],u=this._findTargetItemIndex(r),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[o]=-v.s;for(var m=u+1,g=v,y=v,x=null;m<=h;++m)x=w(c[m]),(!x&&y.e>g.s+a||x&&!b(x,g.s))&&(y.i>g.i?g=y:g=x,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=x;for(var m=u-1,g=v,y=v,x=null;m>=-1;--m)x=w(c[m]),(!x||!b(y,x.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=x;return p;function w(C){if(C){var S=C.getBoundingRect(),D=S[l]+C[l];return{s:D,e:D+S[s],i:C.__legendDataIndex}}}function b(C,S){return C.e>=S&&C.s<=S+a}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===n&&(r=s)}),r??a},e.type="legend.scroll",e}(boe);const Sot=Cot;function Dot(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function _ot(t){Ms(Coe),t.registerComponentModel(bot),t.registerComponentView(Sot),Dot(t)}function Tot(t){Ms(Coe),Ms(_ot)}var Eot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n){return $x(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(n){var r=new sr,i=Zc("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(i),i.setStyle(n.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=n.itemHeight*.8,u=Zc(s,(n.itemWidth-l)/2,(n.itemHeight-l)/2,l,l,n.itemStyle.fill);r.add(u),u.setStyle(n.itemStyle);var c=n.iconRotate==="inherit"?o:n.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([n.itemWidth/2,n.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Wo);const Aot=Eot;function Soe(t,e,n){var r=t.getBaseAxis(),i=t.getOtherAxis(r),a=Not(i,n),o=r.dim,s=i.dim,l=e.mapDimension(s),u=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,f=$e(t.dimensions,function(p){return e.mapDimension(p)}),h=!1,d=e.getCalculationInfo("stackResultDimension");return od(e,f[0])&&(h=!0,f[0]=d),od(e,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Not(t,e){var n=0,r=t.scale.getExtent();return e==="start"?n=r[0]:e==="end"?n=r[1]:Zt(e)&&!isNaN(e)?n=e:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function Doe(t,e,n,r){var i=NaN;t.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function kot(t,e){var n=[];return e.diff(t).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,i){n.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function Iot(t,e,n,r,i,a,o,s){for(var l=kot(t,e),u=[],c=[],f=[],h=[],d=[],p=[],v=[],m=Soe(i,e,o),g=t.getLayout("points")||[],y=e.getLayout("points")||[],x=0;x<l.length;x++){var w=l[x],b=!0,C=void 0,S=void 0;switch(w.cmd){case"=":C=w.idx*2,S=w.idx1*2;var D=g[C],_=g[C+1],T=y[S],E=y[S+1];(isNaN(D)||isNaN(_))&&(D=T,_=E),u.push(D,_),c.push(T,E),f.push(n[C],n[C+1]),h.push(r[S],r[S+1]),v.push(e.getRawIndex(w.idx1));break;case"+":var A=w.idx,R=m.dataDimsForPoint,$=i.dataToPoint([e.get(R[0],A),e.get(R[1],A)]);S=A*2,u.push($[0],$[1]),c.push(y[S],y[S+1]);var O=Doe(m,i,e,A);f.push(O[0],O[1]),h.push(r[S],r[S+1]),v.push(e.getRawIndex(A));break;case"-":b=!1}b&&(d.push(w),p.push(p.length))}p.sort(function(K,Y){return v[K]-v[Y]});for(var M=u.length,B=ru(M),P=ru(M),z=ru(M),U=ru(M),H=[],x=0;x<p.length;x++){var F=p[x],W=x*2,j=F*2;B[W]=u[j],B[W+1]=u[j+1],P[W]=c[j],P[W+1]=c[j+1],z[W]=f[j],z[W+1]=f[j+1],U[W]=h[j],U[W+1]=h[j+1],H[x]=d[F]}return{current:B,next:P,stackedOnCurrent:z,stackedOnNext:U,status:H}}var zu=Math.min,Bu=Math.max;function Rh(t,e){return isNaN(t)||isNaN(e)}function m$(t,e,n,r,i,a,o,s,l){for(var u,c,f,h,d,p,v=n,m=0;m<r;m++){var g=e[v*2],y=e[v*2+1];if(v>=i||v<0)break;if(Rh(g,y)){if(l){v+=a;continue}break}if(v===n)t[a>0?"moveTo":"lineTo"](g,y),f=g,h=y;else{var x=g-u,w=y-c;if(x*x+w*w<.5){v+=a;continue}if(o>0){for(var b=v+a,C=e[b*2],S=e[b*2+1];C===g&&S===y&&m<r;)m++,b+=a,v+=a,C=e[b*2],S=e[b*2+1],g=e[v*2],y=e[v*2+1],x=g-u,w=y-c;var D=m+1;if(l)for(;Rh(C,S)&&D<r;)D++,b+=a,C=e[b*2],S=e[b*2+1];var _=.5,T=0,E=0,A=void 0,R=void 0;if(D>=r||Rh(C,S))d=g,p=y;else{T=C-u,E=S-c;var $=g-u,O=C-g,M=y-c,B=S-y,P=void 0,z=void 0;if(s==="x"){P=Math.abs($),z=Math.abs(O);var U=T>0?1:-1;d=g-U*P*o,p=y,A=g+U*z*o,R=y}else if(s==="y"){P=Math.abs(M),z=Math.abs(B);var H=E>0?1:-1;d=g,p=y-H*P*o,A=g,R=y+H*z*o}else P=Math.sqrt($*$+M*M),z=Math.sqrt(O*O+B*B),_=z/(z+P),d=g-T*o*(1-_),p=y-E*o*(1-_),A=g+T*o*_,R=y+E*o*_,A=zu(A,Bu(C,g)),R=zu(R,Bu(S,y)),A=Bu(A,zu(C,g)),R=Bu(R,zu(S,y)),T=A-g,E=R-y,d=g-T*P/z,p=y-E*P/z,d=zu(d,Bu(u,g)),p=zu(p,Bu(c,y)),d=Bu(d,zu(u,g)),p=Bu(p,zu(c,y)),T=g-d,E=y-p,A=g+T*z/P,R=y+E*z/P}t.bezierCurveTo(f,h,d,p,g,y),f=A,h=R}else t.lineTo(g,y)}u=g,c=y,v+=a}return m}var _oe=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),Rot=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new _oe},e.prototype.buildPath=function(n,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&Rh(i[o*2-2],i[o*2-1]);o--);for(;a<o&&Rh(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=m$(n,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=Tl.CMD,s,l,u=r==="x",c=[],f=0;f<a.length;){var h=a[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,x=void 0;switch(h){case o.M:s=a[f++],l=a[f++];break;case o.L:if(d=a[f++],p=a[f++],x=u?(n-s)/(d-s):(n-l)/(p-l),x<=1&&x>=0){var w=u?(p-l)*x+l:(d-s)*x+s;return u?[n,w]:[w,n]}s=d,l=p;break;case o.C:d=a[f++],p=a[f++],v=a[f++],m=a[f++],g=a[f++],y=a[f++];var b=u?A2(s,d,v,g,n,c):A2(l,p,m,y,n,c);if(b>0)for(var C=0;C<b;C++){var S=c[C];if(S<=1&&S>=0){var w=u?Tr(l,p,m,y,S):Tr(s,d,v,g,S);return u?[n,w]:[w,n]}}s=g,l=y;break}}},e}(Nt),$ot=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(_oe),Mot=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new $ot},e.prototype.buildPath=function(n,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Rh(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Rh(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=m$(n,i,o,s,s,1,r.smooth,l,r.connectNulls);m$(n,a,o+u-1,u,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=u+1,n.closePath()}},e}(Nt);function Toe(t,e,n,r,i){var a=t.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=n.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,u+=c,o=Math.floor(o),l=Math.round(l);var f=new qn({shape:{x:o,y:s,width:l,height:u}});if(e){var h=t.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=lt(i)?function(m){i(m,f)}:null;Ca(f,{shape:{width:l,height:u,x:o,y:s}},n,null,r,v)}return f}function Eoe(t,e,n){var r=t.getArea(),i=ar(r.r0,1),a=ar(r.r,1),o=new El({shape:{cx:ar(t.cx,1),cy:ar(t.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=t.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,Ca(o,{shape:{endAngle:r.endAngle,r:a}},n)}return o}function Oot(t,e,n,r,i){if(t){if(t.type==="polar")return Eoe(t,e,n);if(t.type==="cartesian2d")return Toe(t,e,n,r,i)}else return null;return null}function f9(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function h9(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;){var o=t[a++],s=t[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[e,n],[r,i]]}function d9(t,e){var n=h9(t),r=n[0],i=n[1],a=h9(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function p9(t){return Zt(t)?t:t?.5:0}function Pot(t,e,n){if(!n.valueDim)return[];for(var r=e.count(),i=ru(r*2),a=0;a<r;a++){var o=Doe(n,t,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Vu(t,e,n,r){var i=e.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,l=[],u=[],c=[],f=[];if(r){for(s=0;s<t.length;s+=2)!isNaN(t[s])&&!isNaN(t[s+1])&&f.push(t[s],t[s+1]);t=f}for(s=0;s<t.length-2;s+=2)switch(c[0]=t[s+2],c[1]=t[s+3],u[0]=t[s],u[1]=t[s+1],o.push(u[0],u[1]),n){case"end":l[a]=c[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var h=(u[a]+c[a])/2,d=[];l[a]=d[a]=h,l[1-a]=u[1-a],d[1-a]=c[1-a],o.push(l[0],l[1]),o.push(d[0],d[1]);break;default:l[a]=u[a],l[1-a]=c[1-a],o.push(l[0],l[1])}return o.push(t[s++],t[s++]),o}function Fot(t,e){var n=[],r=t.length,i,a;function o(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=O3(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<r;s++){var l=t[s],u=l.coord;if(u<0)i=l;else if(u>e){a?n.push(o(a,l,e)):i&&n.push(o(i,l,0),o(i,l,e));break}else i&&(n.push(o(i,l,0)),i=null),n.push(l),a=l}return n}function Lot(t,e,n){var r=t.getVisual("visualMeta");if(!(!r||!r.length||!t.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=t.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=e.getAxis(i),u=$e(a.stops,function(x){return{coord:l.toGlobalCoord(l.dataToCoord(x.value)),color:x.color}}),c=u.length,f=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=Fot(u,i==="x"?n.getWidth():n.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";G(h,function(x){x.offset=(x.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new tL(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=m,y}}}function zot(t,e,n){var r=t.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=n.getAxesByScale("ordinal")[0];if(a&&!(i&&Bot(a,e))){var o=e.mapDimension(a.dim),s={};return G(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function Bot(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(r4.getSymbolSize(e,o)[t.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Vot(t,e){return isNaN(t)||isNaN(e)}function Wot(t){for(var e=t.length/2;e>0&&Vot(t[e*2-2],t[e*2-1]);e--);return e-1}function v9(t,e){return[t[e*2],t[e*2+1]]}function Uot(t,e,n){for(var r=t.length/2,i=n==="x"?0:1,a,o,s=0,l=-1,u=0;u<r;u++)if(o=t[u*2+i],!(isNaN(o)||isNaN(t[u*2+1-i]))){if(u===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=u;break}s=u,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function Aoe(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Vo.length;e++)if(t.get([Vo[e],"endLabel","show"]))return!0;return!1}function AN(t,e,n,r){if(i4(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=Aoe(r)?function(d,p){t._endLabelOnDuring(d,p,o,s,a,i,e)}:null,u=e.getBaseAxis().isHorizontal(),c=Toe(e,n,r,function(){var d=t._endLabel;d&&n&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return Eoe(e,n,r)}function Got(t,e){var n=e.getBaseAxis(),r=n.isHorizontal(),i=n.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||o}}}var Hot=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=new sr,r=new xoe;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n},e.prototype.render=function(n,r,i){var a=this,o=n.coordinateSystem,s=this.group,l=n.getData(),u=n.getModel("lineStyle"),c=n.getModel("areaStyle"),f=l.getLayout("points")||[],h=o.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,y=!r.ssr&&n.isAnimationEnabled(),x=!c.isEmpty(),w=c.get("origin"),b=Soe(o,l,w),C=x&&Pot(o,l,b),S=n.get("showSymbol"),D=n.get("connectNulls"),_=S&&!h&&zot(n,l,o),T=this._data;T&&T.eachItemGraphicEl(function(Y,Z){Y.__temp&&(s.remove(Y),T.setItemGraphicEl(Z,null))}),S||p.remove(),s.add(g);var E=h?!1:n.get("step"),A;o&&o.getArea&&n.get("clip",!0)&&(A=o.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var R=Lot(l,o,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===o.type&&E===this._step))S&&p.updateData(l,{isIgnore:_,clipShape:A,disableAnimation:!0,getSymbolPoint:function(Y){return[f[Y*2],f[Y*2+1]]}}),y&&this._initSymbolLabelAnimation(l,o,A),E&&(f=Vu(f,o,E,D),C&&(C=Vu(C,o,E,D))),v=this._newPolyline(f),x?m=this._newPolygon(f,C):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(n,o,ad(R)),g.setClipPath(AN(this,o,!0,n));else{x&&!m?m=this._newPolygon(f,C):m&&!x&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(n,o,ad(R));var $=g.getClipPath();if($){var O=AN(this,o,!1,n);Ca($,{shape:O.shape},n)}else g.setClipPath(AN(this,o,!0,n));S&&p.updateData(l,{isIgnore:_,clipShape:A,disableAnimation:!0,getSymbolPoint:function(Y){return[f[Y*2],f[Y*2+1]]}}),(!f9(this._stackedOnPoints,C)||!f9(this._points,f))&&(y?this._doUpdateAnimation(l,C,o,i,E,w,D):(E&&(f=Vu(f,o,E,D),C&&(C=Vu(C,o,E,D))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:C})))}var M=n.getModel("emphasis"),B=M.get("focus"),P=M.get("blurScope"),z=M.get("disabled");if(v.useStyle(pt(u.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),F2(v,n,"lineStyle"),v.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var U=v.getState("emphasis").style;U.lineWidth=+v.style.lineWidth+1}Xt(v).seriesIndex=n.seriesIndex,py(v,B,P,z);var H=p9(n.get("smooth")),F=n.get("smoothMonotone");if(v.setShape({smooth:H,smoothMonotone:F,connectNulls:D}),m){var W=l.getCalculationInfo("stackedOnSeries"),j=0;m.useStyle(pt(c.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),W&&(j=p9(W.get("smooth"))),m.setShape({smooth:H,stackedOnSmooth:j,smoothMonotone:F,connectNulls:D}),F2(m,n,"areaStyle"),Xt(m).seriesIndex=n.seriesIndex,py(m,B,P,z)}var K=function(Y){a._changePolyState(Y)};l.eachItemGraphicEl(function(Y){Y&&(Y.onHoverStateChange=K)}),this._polyline.onHoverStateChange=K,this._data=l,this._coordSys=o,this._stackedOnPoints=C,this._points=f,this._step=E,this._valueOrigin=w,n.get("triggerLineEvent")&&(this.packEventData(n,v),m&&this.packEventData(n,m))},e.prototype.packEventData=function(n,r){Xt(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},e.prototype.highlight=function(n,r,i,a){var o=n.getData(),s=rd(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=n.get("zlevel")||0,d=n.get("z")||0;u=new r4(o,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Sa.prototype.highlight.call(this,n,r,i,a)},e.prototype.downplay=function(n,r,i,a){var o=n.getData(),s=rd(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Sa.prototype.downplay.call(this,n,r,i,a)},e.prototype._changePolyState=function(n){var r=this._polygon;DV(this._polyline,n),r&&DV(r,n)},e.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new Rot({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(n,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Mot({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(n,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var u=n.hostModel,c=u.get("animationDuration");lt(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=lt(f)?f(null):f;n.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,y=void 0,x=void 0;if(i)if(o){var w=i,b=r.pointToCoord(m);a?(g=w.startAngle,y=w.endAngle,x=-b[1]/180*Math.PI):(g=w.r0,y=w.r,x=b[0])}else{var C=i;a?(g=C.x,y=C.x+C.width,x=d.x):(g=C.y+C.height,y=C.y,x=d.y)}var S=y===g?0:(x-g)/(y-g);l&&(S=1-S);var D=lt(f)?f(p):c*S+h,_=v.getSymbolPath(),T=_.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:D}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:D}),_.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(n,r,i){var a=n.getModel("endLabel");if(Aoe(n)){var o=n.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Vr({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Wot(l);c>=0&&(Ax(s,Nx(n,"endLabel"),{inheritColor:i,labelFetcher:n,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?yoe(o,d):n4(o,f)},enableTextSetter:!0},Got(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(n,r,i,a,o,s,l){var u=this._endLabel,c=this._polyline;if(u){n<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,x=r.shape,w=y?g?x.x:x.y+x.height:g?x.x+x.width:x.y,b=(g?v:0)*(y?-1:1),C=(g?0:-v)*(y?-1:1),S=g?"x":"y",D=Uot(f,w,S),_=D.range,T=_[1]-_[0],E=void 0;if(T>=1){if(T>1&&!d){var A=v9(f,_[0]);u.attr({x:A[0]+b,y:A[1]+C}),o&&(E=h.getRawValue(_[0]))}else{var A=c.getPointOn(w,S);A&&u.attr({x:A[0]+b,y:A[1]+C});var R=h.getRawValue(_[0]),$=h.getRawValue(_[1]);o&&(E=kXe(i,p,R,$,D.t))}a.lastFrameIndex=_[0]}else{var O=n===1||a.lastFrameIndex>0?_[0]:0,A=v9(f,O);o&&(E=h.getRawValue(O)),u.attr({x:A[0]+b,y:A[1]+C})}if(o){var M=wT(u);typeof M.setLabelText=="function"&&M.setLabelText(E)}}},e.prototype._doUpdateAnimation=function(n,r,i,a,o,s,l){var u=this._polyline,c=this._polygon,f=n.hostModel,h=Iot(this._data,n,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(o&&(d=Vu(h.current,i,o,l),p=Vu(h.stackedOnCurrent,i,o,l),v=Vu(h.next,i,o,l),m=Vu(h.stackedOnNext,i,o,l)),d9(d,v)>3e3||c&&d9(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),u.stopAnimation(),Ni(u,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),Ni(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],x=h.status,w=0;w<x.length;w++){var b=x[w].cmd;if(b==="="){var C=n.getItemGraphicEl(x[w].idx1);C&&y.push({el:C,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var S=u.shape.__points,D=0;D<y.length;D++){var _=y[D].el,T=y[D].ptIdx*2;_.x=S[T],_.y=S[T+1],_.markRedraw()}})},e.prototype.remove=function(n){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Sa);const jot=Hot;function a4(t,e){return{seriesType:t,plan:_L(),reset:function(n){var r=n.getData(),i=n.coordinateSystem,a=n.pipelineContext,o=e||a.large;if(i){var s=$e(i.dimensions,function(d){return r.mapDimension(d)}).slice(0,2),l=s.length,u=r.getCalculationInfo("stackResultDimension");od(r,s[0])&&(s[0]=u),od(r,s[1])&&(s[1]=u);var c=r.getStore(),f=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,m=o&&ru(v*l),g=[],y=[],x=d.start,w=0;x<d.end;x++){var b=void 0;if(l===1){var C=c.get(f,x);b=i.dataToPoint(C,null,y)}else g[0]=c.get(f,x),g[1]=c.get(h,x),b=i.dataToPoint(g,null,y);o?(m[w++]=b[0],m[w++]=b[1]):p.setItemLayout(x,b.slice())}o&&p.setLayout("points",m)}}}}}}var qot={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return n===0?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Kot=function(t){return Math.round(t.length/2)};function Noe(t){return{seriesType:t,reset:function(e,n,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),f=r.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){a==="lttb"&&e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Be(a)?p=qot[a]:lt(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Kot))}}}}}function Xot(t){t.registerChartView(jot),t.registerSeriesModel(Aot),t.registerLayout(a4("line",!0)),t.registerVisual({seriesType:"line",reset:function(e){var n=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Noe("line"))}var koe=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return $x(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(n),s=a.dataToPoint(o);if(i)G(a.getAxes(),function(h,d){if(h.type==="category"&&r!=null){var p=h.getTicksCoords(),v=o[d],m=r[d]==="x1"||r[d]==="y1";if(m&&(v+=1),p.length<2)return;if(p.length===2){s[d]=h.toGlobalCoord(h.getExtent()[m?1:0]);return}for(var g=void 0,y=void 0,x=1,w=0;w<p.length;w++){var b=p[w].coord,C=w===p.length-1?p[w-1].tickValue+x:p[w].tickValue;if(C===v){y=b;break}else if(C<v)g=b;else if(g!=null&&C>v){y=(b+g)/2;break}w===1&&(x=C-p[0].tickValue)}y==null&&(g?g&&(y=p[p.length-1].coord):y=p[0].coord),s[d]=h.toGlobalCoord(y)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;s[f]+=u+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Wo);Wo.registerClass(koe);const g9=koe;var Yot=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(){return $x(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},e.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Fre(g9.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(g9);const Zot=Yot;var Qot=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Jot=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Qot},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,c=r.startAngle,f=r.endAngle,h=r.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),y=Math.sin(f);p?(n.moveTo(v*o+i,m*o+a),n.arc(v*u+i,m*u+a,l,-Math.PI+c,c,!h)):n.moveTo(v*s+i,m*s+a),n.arc(i,a,s,c,f,!h),n.arc(g*u+i,y*u+a,l,f-Math.PI*2,f-Math.PI,!h),o!==0&&n.arc(i,a,o,f,c,h)},e}(Nt);const m9=Jot;function est(t,e){e=e||{};var n=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return R2(r,i,a);var s=t(o),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,y=n?Math.abs(h-d)/2:0,x=Math.cos,w=Math.sin,b=c+h*x(v),C=f+h*w(v),S="left",D="top";switch(s){case"startArc":b=c+(d-l)*x(g),C=f+(d-l)*w(g),S="center",D="top";break;case"insideStartArc":b=c+(d+l)*x(g),C=f+(d+l)*w(g),S="center",D="bottom";break;case"startAngle":b=c+p*x(v)+sb(v,l+y,!1),C=f+p*w(v)+lb(v,l+y,!1),S="right",D="middle";break;case"insideStartAngle":b=c+p*x(v)+sb(v,-l+y,!1),C=f+p*w(v)+lb(v,-l+y,!1),S="left",D="middle";break;case"middle":b=c+p*x(g),C=f+p*w(g),S="center",D="middle";break;case"endArc":b=c+(h+l)*x(g),C=f+(h+l)*w(g),S="center",D="bottom";break;case"insideEndArc":b=c+(h-l)*x(g),C=f+(h-l)*w(g),S="center",D="top";break;case"endAngle":b=c+p*x(m)+sb(m,l+y,!0),C=f+p*w(m)+lb(m,l+y,!0),S="left",D="middle";break;case"insideEndAngle":b=c+p*x(m)+sb(m,-l+y,!0),C=f+p*w(m)+lb(m,-l+y,!0),S="right",D="middle";break;default:return R2(r,i,a)}return r=r||{},r.x=b,r.y=C,r.align=S,r.verticalAlign=D,r}}function tst(t,e,n,r){if(Zt(r)){t.setTextConfig({rotation:r});return}else if(Me(e)){t.setTextConfig({rotation:0});return}var i=t.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=n(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function sb(t,e,n){return e*Math.sin(t)*(n?-1:1)}function lb(t,e,n){return e*Math.cos(t)*(n?1:-1)}function Fm(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;Me(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:$e(r,function(a){return Kc(a,i)})}}var NN=Math.max,kN=Math.min;function nst(t,e){var n=t.getArea&&t.getArea();if(i4(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var rst=function(t){He(e,t);function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return e.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var o=n.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},e.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},e.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},e.prototype.eachRendered=function(n){yT(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n,r,i,a){var o=this.group,s=n.getData(),l=this._data,u=n.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=n.isAnimationEnabled()?n:null,d=ist(n,u);d&&this._enableRealtimeSort(d,s,i);var p=n.get("clip",!0)||d,v=nst(u,s);o.removeClipPath();var m=n.get("roundCap",!0),g=n.get("showBackground",!0),y=n.getModel("backgroundStyle"),x=y.get("borderRadius")||0,w=[],b=this._backgroundEls,C=a&&a.isInitSort,S=a&&a.type==="changeAxisOrder";function D(E){var A=ub[u.type](s,E),R=fst(u,f,A);return R.useStyle(y.getItemStyle()),u.type==="cartesian2d"?R.setShape("r",x):R.setShape("cornerRadius",x),w[E]=R,R}s.diff(l).add(function(E){var A=s.getItemModel(E),R=ub[u.type](s,E,A);if(g&&D(E),!(!s.hasValue(E)||!C9[u.type](R))){var $=!1;p&&($=y9[u.type](v,R));var O=x9[u.type](n,s,E,R,f,h,c.model,!1,m);d&&(O.forceLabelAnimation=!0),S9(O,s,E,A,R,n,f,u.type==="polar"),C?O.attr({shape:R}):d?w9(d,h,O,R,E,f,!1,!1):Ca(O,{shape:R},n,E),s.setItemGraphicEl(E,O),o.add(O),O.ignore=$}}).update(function(E,A){var R=s.getItemModel(E),$=ub[u.type](s,E,R);if(g){var O=void 0;b.length===0?O=D(A):(O=b[A],O.useStyle(y.getItemStyle()),u.type==="cartesian2d"?O.setShape("r",x):O.setShape("cornerRadius",x),w[E]=O);var M=ub[u.type](s,E),B=Roe(f,M,u);Ni(O,{shape:B},h,E)}var P=l.getItemGraphicEl(A);if(!s.hasValue(E)||!C9[u.type]($)){o.remove(P);return}var z=!1;if(p&&(z=y9[u.type](v,$),z&&o.remove(P)),P?rL(P):P=x9[u.type](n,s,E,$,f,h,c.model,!!P,m),d&&(P.forceLabelAnimation=!0),S){var U=P.getTextContent();if(U){var H=wT(U);H.prevValue!=null&&(H.prevValue=H.value)}}else S9(P,s,E,R,$,n,f,u.type==="polar");C?P.attr({shape:$}):d?w9(d,h,P,$,E,f,!0,S):Ni(P,{shape:$},n,E,null),s.setItemGraphicEl(E,P),P.ignore=z,o.add(P)}).remove(function(E){var A=l.getItemGraphicEl(E);A&&B2(A,n,E)}).execute();var _=this._backgroundGroup||(this._backgroundGroup=new sr);_.removeAll();for(var T=0;T<w.length;++T)_.add(w[T]);o.add(_),this._backgroundEls=w,this._data=s},e.prototype._renderLarge=function(n,r,i){this._clear(),_9(n,this.group),this._updateLargeClip(n)},e.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),_9(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&Oot(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var o=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:$e(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,o=n.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=n.rawIndexOf(o,a.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},e.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(n.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var o=this._dataSort(n,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,o=this._dataSort(n,a,function(s){return n.get(n.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){B2(a,n,Xt(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Sa),y9={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,a=t.y+t.height,o=NN(e.x,t.x),s=kN(e.x+e.width,i),l=NN(e.y,t.y),u=kN(e.y+e.height,a),c=s<o,f=u<l;return e.x=c&&o>i?s:o,e.y=f&&l>a?u:l,e.width=c?0:s-o,e.height=f?0:u-l,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var i=kN(e.r,t.r),a=NN(e.r0,t.r0);e.r=i,e.r0=a;var o=i-a<0;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},x9={cartesian2d:function(t,e,n,r,i,a,o,s,l){var u=new qn({shape:De({},r),z2:1});if(u.__dataIndex=n,u.name="item",a){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(t,e,n,r,i,a,o,s,l){var u=!i&&l?m9:El,c=new u({shape:r,z2:1});c.name="item";var f=Ioe(i);if(c.calculateTextPosition=est(f,{isRoundCap:u===m9}),a){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?r.r0:r.startAngle,p[d]=r[d],(s?Ni:Ca)(c,{shape:p},a)}return c}};function ist(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function w9(t,e,n,r,i,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?Ni:Ca)(n,{shape:l},e,i,null);var c=e?t.baseAxis.model:null;(o?Ni:Ca)(n,{shape:u},c,i)}function b9(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var ast=["x","y","width","height"],ost=["cx","cy","r","startAngle","endAngle"],C9={cartesian2d:function(t){return!b9(t,ast)},polar:function(t){return!b9(t,ost)}},ub={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=n?lst(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function sst(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function Ioe(t){return function(e){var n=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(t)}function S9(t,e,n,r,i,a,o,s){var l=e.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var c=t.shape,f=Fm(r.getModel("itemStyle"),c,!0);De(c,f),t.setShape(c)}}else{var u=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",u)}t.useStyle(l);var h=r.getShallow("cursor");h&&t.attr("cursor",h);var d=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Nx(r);Ax(t,p,{labelFetcher:a,labelDataIndex:n,defaultText:n4(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var v=t.getTextContent();if(s&&v){var m=r.get(["label","position"]);t.textConfig.inside=m==="middle"?!0:null,tst(t,m==="outside"?d:m,Ioe(o),r.get(["label","rotate"]))}LZe(v,p,a.getRawValue(n),function(y){return yoe(e,y)});var g=r.getModel(["emphasis"]);py(t,g.get("focus"),g.get("blurScope"),g.get("disabled")),F2(t,r),sst(i)&&(t.style.fill="none",t.style.stroke="none",G(t.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function lst(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var ust=function(){function t(){}return t}(),D9=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new ust},e.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],n.rect(s[0],s[1],l[0],l[1])},e}(Nt);function _9(t,e,n,r){var i=t.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=t.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new D9({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),n&&n.push(c)}var f=new D9({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,e.add(f),f.useStyle(i.getVisual("style")),Xt(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",T9),f.on("mousemove",T9)),n&&n.push(f)}var T9=kT(function(t){var e=this,n=cst(e,t.offsetX,t.offsetY);Xt(e).dataIndex=n>=0?n:null},30,!1);function cst(t,e,n){for(var r=t.baseDimIdx,i=1-r,a=t.shape.points,o=t.largeDataIndices,s=[],l=[],u=t.barWidth,c=0,f=a.length/3;c<f;c++){var h=c*3;if(l[r]=u,l[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}function Roe(t,e,n){if(i4(n,"cartesian2d")){var r=e,i=n.getArea();return{x:t?r.x:i.x,y:t?i.y:r.y,width:t?r.width:i.width,height:t?i.height:r.height}}else{var i=n.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:a.r0,r:t?i.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:Math.PI*2}}}function fst(t,e,n){var r=t.type==="polar"?El:qn;return new r({shape:Roe(e,n,t),silent:!0,z2:0})}const hst=rst;function dst(t){t.registerChartView(hst),t.registerSeriesModel(Zot),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Pt(Htt,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,jtt("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Noe("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,n){var r=e.componentType||"series";n.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var cb=Math.PI*2,E9=Math.PI/180;function $oe(t,e){return Yc(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Moe(t,e){var n=$oe(t,e),r=t.get("center"),i=t.get("radius");Me(i)||(i=[0,i]);var a=En(n.width,e.getWidth()),o=En(n.height,e.getHeight()),s=Math.min(a,o),l=En(i[0],s/2),u=En(i[1],s/2),c,f,h=t.coordinateSystem;if(h){var d=h.dataToPoint(r);c=d[0]||0,f=d[1]||0}else Me(r)||(r=[r,r]),c=En(r[0],a)+n.x,f=En(r[1],o)+n.y;return{cx:c,cy:f,r0:l,r:u}}function pst(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),a=i.mapDimension("value"),o=$oe(r,n),s=Moe(r,n),l=s.cx,u=s.cy,c=s.r,f=s.r0,h=-r.get("startAngle")*E9,d=r.get("minAngle")*E9,p=0;i.each(a,function(T){!isNaN(T)&&p++});var v=i.getSum(a),m=Math.PI/(v||p)*2,g=r.get("clockwise"),y=r.get("roseType"),x=r.get("stillShowZeroSum"),w=i.getDataExtent(a);w[0]=0;var b=cb,C=0,S=h,D=g?1:-1;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(T,E){var A;if(isNaN(T)){i.setItemLayout(E,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:l,cy:u,r0:f,r:y?NaN:c});return}y!=="area"?A=v===0&&x?m:T*m:A=cb/p,A<d?(A=d,b-=d):C+=T;var R=S+D*A;i.setItemLayout(E,{angle:A,startAngle:S,endAngle:R,clockwise:g,cx:l,cy:u,r0:f,r:y?Ql(T,w,[f,c]):c}),S=R}),b<cb&&p)if(b<=.001){var _=cb/p;i.each(a,function(T,E){if(!isNaN(T)){var A=i.getItemLayout(E);A.angle=_,A.startAngle=h+D*E*_,A.endAngle=h+D*(E+1)*_}})}else m=b/C,S=h,i.each(a,function(T,E){if(!isNaN(T)){var A=i.getItemLayout(E),R=A.angle===d?d:T*m;A.startAngle=S,A.endAngle=S+D*R,S+=D*R}})})}function vst(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var gst=Math.PI/180;function A9(t,e,n,r,i,a,o,s,l,u){if(t.length<2)return;function c(v){for(var m=v.rB,g=m*m,y=0;y<v.list.length;y++){var x=v.list[y],w=Math.abs(x.label.y-n),b=r+x.len,C=b*b,S=Math.sqrt((1-Math.abs(w*w/g))*C),D=e+(S+x.len2)*i,_=D-x.label.x,T=x.targetTextWidth-_*i;Ooe(x,T,!0),x.label.x=D}}function f(v){for(var m={list:[],maxY:0},g={list:[],maxY:0},y=0;y<v.length;y++)if(v[y].labelAlignTo==="none"){var x=v[y],w=x.label.y>n?g:m,b=Math.abs(x.label.y-n);if(b>=w.maxY){var C=x.label.x-e-x.len2*i,S=r+x.len,D=Math.abs(C)<S?Math.sqrt(b*b/(1-C*C/S/S)):S;w.rB=D,w.maxY=b}w.list.push(x)}c(m),c(g)}for(var h=t.length,d=0;d<h;d++)if(t[d].position==="outer"&&t[d].labelAlignTo==="labelLine"){var p=t[d].label.x-u;t[d].linePoints[1][0]+=p,t[d].label.x=u}Jnt(t,l,l+o)&&f(t)}function mst(t,e,n,r,i,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<t.length;h++){var d=t[h].label;IN(t[h])||(d.x<e?(c=Math.min(c,d.x),l.push(t[h])):(f=Math.max(f,d.x),u.push(t[h])))}for(var h=0;h<t.length;h++){var p=t[h];if(!IN(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var d=p.label,v=p.linePoints,m=void 0;p.labelAlignTo==="edge"?d.x<e?m=v[2][0]-p.labelDistance-o-p.edgeDistance:m=o+i-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?d.x<e?m=c-o-p.bleedMargin:m=o+i-f-p.bleedMargin:d.x<e?m=d.x-o-p.bleedMargin:m=o+i-d.x-p.bleedMargin,p.targetTextWidth=m,Ooe(p,m)}}A9(u,e,n,r,1,i,a,o,s,f),A9(l,e,n,r,-1,i,a,o,s,c);for(var h=0;h<t.length;h++){var p=t[h];if(!IN(p)&&p.linePoints){var d=p.label,v=p.linePoints,g=p.labelAlignTo==="edge",y=d.style.padding,x=y?y[1]+y[3]:0,w=d.style.backgroundColor?0:x,b=p.rect.width+w,C=v[1][0]-v[2][0];g?d.x<e?v[2][0]=o+p.edgeDistance+b+p.labelDistance:v[2][0]=o+i-p.edgeDistance-b-p.labelDistance:(d.x<e?v[2][0]=d.x+p.labelDistance:v[2][0]=d.x-p.labelDistance,v[1][0]=v[2][0]+C),v[1][1]=v[2][1]=d.y}}}function Ooe(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,a=t.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=a.width+(o?0:l);if(e<c||n){var f=a.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var d=e-l,p=e<c?d:n?d>t.unconstrainedWidth?null:d:null;r.setStyle("width",p)}var v=r.getBoundingRect();a.width=v.width;var m=(r.style.margin||0)+2.1;a.height=v.height+m,a.y-=(a.height-f)/2}}}function IN(t){return t.position==="center"}function yst(t){var e=t.getData(),n=[],r,i,a=!1,o=(t.get("minShowLabelAngle")||0)*gst,s=e.getLayout("viewRect"),l=e.getLayout("r"),u=s.width,c=s.x,f=s.y,h=s.height;function d(C){C.ignore=!0}function p(C){if(!C.ignore)return!0;for(var S in C.states)if(C.states[S].ignore===!1)return!0;return!1}e.each(function(C){var S=e.getItemGraphicEl(C),D=S.shape,_=S.getTextContent(),T=S.getTextGuideLine(),E=e.getItemModel(C),A=E.getModel("label"),R=A.get("position")||E.get(["emphasis","label","position"]),$=A.get("distanceToLabelLine"),O=A.get("alignTo"),M=En(A.get("edgeDistance"),u),B=A.get("bleedMargin"),P=E.getModel("labelLine"),z=P.get("length");z=En(z,u);var U=P.get("length2");if(U=En(U,u),Math.abs(D.endAngle-D.startAngle)<o){G(_.states,d),_.ignore=!0,T&&(G(T.states,d),T.ignore=!0);return}if(p(_)){var H=(D.startAngle+D.endAngle)/2,F=Math.cos(H),W=Math.sin(H),j,K,Y,Z;r=D.cx,i=D.cy;var se=R==="inside"||R==="inner";if(R==="center")j=D.cx,K=D.cy,Z="center";else{var ee=(se?(D.r+D.r0)/2*F:D.r*F)+r,oe=(se?(D.r+D.r0)/2*W:D.r*W)+i;if(j=ee+F*3,K=oe+W*3,!se){var ce=ee+F*(z+l-D.r),ve=oe+W*(z+l-D.r),ye=ce+(F<0?-1:1)*U,_e=ve;O==="edge"?j=F<0?c+M:c+u-M:j=ye+(F<0?-$:$),K=_e,Y=[[ee,oe],[ce,ve],[ye,_e]]}Z=se?"center":O==="edge"?F>0?"right":"left":F>0?"left":"right"}var Ie=Math.PI,Ne=0,We=A.get("rotate");if(Zt(We))Ne=We*(Ie/180);else if(R==="center")Ne=0;else if(We==="radial"||We===!0){var qe=F<0?-H+Ie:-H;Ne=qe}else if(We==="tangential"&&R!=="outside"&&R!=="outer"){var ft=Math.atan2(F,W);ft<0&&(ft=Ie*2+ft);var at=W>0;at&&(ft=Ie+ft),Ne=ft-Ie}if(a=!!Ne,_.x=j,_.y=K,_.rotation=Ne,_.setStyle({verticalAlign:"middle"}),se){_.setStyle({align:Z});var q=_.states.select;q&&(q.x+=_.x,q.y+=_.y)}else{var bt=_.getBoundingRect().clone();bt.applyTransform(_.getComputedTransform());var ot=(_.style.margin||0)+2.1;bt.y-=ot/2,bt.height+=ot,n.push({label:_,labelLine:T,position:R,len:z,len2:U,minTurnAngle:P.get("minTurnAngle"),maxSurfaceAngle:P.get("maxSurfaceAngle"),surfaceNormal:new tt(F,W),linePoints:Y,textAlign:Z,labelDistance:$,labelAlignTo:O,edgeDistance:M,bleedMargin:B,rect:bt,unconstrainedWidth:bt.width,labelStyleWidth:_.style.width})}S.setTextConfig({inside:se})}}),!a&&t.get("avoidLabelOverlap")&&mst(n,r,i,l,u,h,c,f);for(var v=0;v<n.length;v++){var m=n[v],g=m.label,y=m.labelLine,x=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:m.textAlign}),x&&(G(g.states,d),g.ignore=!0);var w=g.states.select;w&&(w.x+=g.x,w.y+=g.y)}if(y){var b=m.linePoints;x||!b?(G(y.states,d),y.ignore=!0):(jnt(b,m.minTurnAngle),qnt(b,m.surfaceNormal,m.maxSurfaceAngle),y.setShape({points:b}),g.__hostTarget.textGuideLineConfig={anchor:new tt(b[0][0],b[0][1])})}}}var xst=function(t){He(e,t);function e(n,r,i){var a=t.call(this)||this;a.z2=2;var o=new Vr;return a.setTextContent(o),a.updateData(n,r,i,!0),a}return e.prototype.updateData=function(n,r,i,a){var o=this,s=n.hostModel,l=n.getItemModel(r),u=l.getModel("emphasis"),c=n.getItemLayout(r),f=De(Fm(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var h=s.getShallow("animationType");s.ecModel.ssr?(Ca(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):h==="scale"?(o.shape.r=c.r0,Ca(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),Ca(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,Ni(o,{shape:{endAngle:c.endAngle}},s,r))}else rL(o),Ni(o,{shape:f},s,r);o.useStyle(n.getItemVisual(r,"style")),F2(o,l);var d=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(d)*p,m=Math.sin(d)*p,g=l.getShallow("cursor");g&&o.attr("cursor",g),this._updateLabel(s,n,r),o.ensureState("emphasis").shape=De({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},Fm(u.getModel("itemStyle"),c)),De(o.ensureState("select"),{x:v,y:m,shape:Fm(l.getModel(["select","itemStyle"]),c)}),De(o.ensureState("blur"),{shape:Fm(l.getModel(["blur","itemStyle"]),c)});var y=o.getTextGuideLine(),x=o.getTextContent();y&&De(y.ensureState("select"),{x:v,y:m}),De(x.ensureState("select"),{x:v,y:m}),py(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;Ax(a,Nx(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=n.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Tg,this.setTextGuideLine(d)),Xnt(this,Ynt(o),{stroke:u,opacity:Jp(s.get(["lineStyle","opacity"]),c,1)})}},e}(El),wst=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,a){var o=n.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&n.get("showEmptyCircle")){var h=new El({shape:Moe(n,i)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}o.diff(s).add(function(d){var p=new xst(o,d,u);o.setItemGraphicEl(d,p),l.add(p)}).update(function(d,p){var v=s.getItemGraphicEl(p);v.updateData(o,d,u),v.off("click"),l.add(v),o.setItemGraphicEl(d,v)}).remove(function(d){var p=s.getItemGraphicEl(d);B2(p,n,d)}).execute(),yst(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Sa);const bst=wst;function Cst(t,e,n){e=Me(e)&&{coordDimensions:e}||De({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=zL(r,e).dimensions,a=new LL(i,t);return a.initData(r,n),a}var Sst=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}();const Dst=Sst;var _st=Jn(),Tst=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Dst(qt(this.getData,this),qt(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Cst(this,{coordDimensions:["value"],encodeDefaulter:Pt(vQe,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=_st(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=Tne(o,r.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,n);return s.percent=a[n]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(n){DR(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Wo);const Est=Tst;function Ast(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(Zt(o)&&!isNaN(o)&&o<0)})}}}function Nst(t){t.registerChartView(bst),t.registerSeriesModel(Est),net("pie",t.registerAction),t.registerLayout(Pt(pst,"pie")),t.registerProcessor(vst("pie")),t.registerProcessor(Ast("pie"))}var kst=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return $x(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Wo);const Ist=kst;var Poe=4,Rst=function(){function t(){}return t}(),$st=function(t){He(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Rst},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(n,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=n.getContext?n.getContext():n,u=l&&a[0]<Poe,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-a[0]/2,s.y=d-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(n,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],u=r[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,f=a[c]-s/2,h=a[c+1]-l/2;if(n>=f&&r>=h&&n<=f+s&&r<=h+l)return u}return-1},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}n=this._rect=new Et(l-o/2,u-s/2,c-l+o,f-u+s)}return n},e}(Nt),Mst=function(){function t(){this.group=new sr}return t.prototype.updateData=function(e,n){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,n)},t.prototype.updateLayout=function(e){var n=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,n,r){var i=this._newAdded[0],a=n.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,n,r)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new $st({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Zc(n.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<Poe;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=n.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Xt(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(u.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}();const Ost=Mst;var Pst=function(t){He(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},e.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=a4("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},e.prototype._getClipShape=function(n){var r=n.coordinateSystem,i=r&&r.getArea&&r.getArea();return n.get("clip",!0)?i:null},e.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Ost:new xoe,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Sa);const Fst=Pst;function Lst(t){Ms(Wae),t.registerSeriesModel(Ist),t.registerChartView(Fst),t.registerLayout(a4("scatter"))}var Hs=Tl.CMD;function Fp(t,e){return Math.abs(t-e)<1e-5}function y$(t){var e=t.data,n=t.len(),r=[],i,a=0,o=0,s=0,l=0;function u(R,$){i&&i.length>2&&r.push(i),i=[R,$]}function c(R,$,O,M){Fp(R,O)&&Fp($,M)||i.push(R,$,O,M,O,M)}function f(R,$,O,M,B,P){var z=Math.abs($-R),U=Math.tan(z/4)*4/3,H=$<R?-1:1,F=Math.cos(R),W=Math.sin(R),j=Math.cos($),K=Math.sin($),Y=F*B+O,Z=W*P+M,se=j*B+O,ee=K*P+M,oe=B*U*H,ce=P*U*H;i.push(Y-oe*W,Z+ce*F,se+oe*K,ee-ce*j,se,ee)}for(var h,d,p,v,m=0;m<n;){var g=e[m++],y=m===1;switch(y&&(a=e[m],o=e[m+1],s=a,l=o,(g===Hs.L||g===Hs.C||g===Hs.Q)&&(i=[s,l])),g){case Hs.M:a=s=e[m++],o=l=e[m++],u(s,l);break;case Hs.L:h=e[m++],d=e[m++],c(a,o,h,d),a=h,o=d;break;case Hs.C:i.push(e[m++],e[m++],e[m++],e[m++],a=e[m++],o=e[m++]);break;case Hs.Q:h=e[m++],d=e[m++],p=e[m++],v=e[m++],i.push(a+2/3*(h-a),o+2/3*(d-o),p+2/3*(h-p),v+2/3*(d-v),p,v),a=p,o=v;break;case Hs.A:var x=e[m++],w=e[m++],b=e[m++],C=e[m++],S=e[m++],D=e[m++]+S;m+=1;var _=!e[m++];h=Math.cos(S)*b+x,d=Math.sin(S)*C+w,y?(s=h,l=d,u(s,l)):c(a,o,h,d),a=Math.cos(D)*b+x,o=Math.sin(D)*C+w;for(var T=(_?-1:1)*Math.PI/2,E=S;_?E>D:E<D;E+=T){var A=_?Math.max(E+T,D):Math.min(E+T,D);f(E,A,x,w,b,C)}break;case Hs.R:s=a=e[m++],l=o=e[m++],h=s+e[m++],d=l+e[m++],u(h,l),c(h,l,h,d),c(h,d,s,d),c(s,d,s,l),c(s,l,h,l);break;case Hs.Z:i&&c(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function x$(t,e,n,r,i,a,o,s,l,u){if(Fp(t,n)&&Fp(e,r)&&Fp(i,o)&&Fp(a,s)){l.push(o,s);return}var c=2/u,f=c*c,h=o-t,d=s-e,p=Math.sqrt(h*h+d*d);h/=p,d/=p;var v=n-t,m=r-e,g=i-o,y=a-s,x=v*v+m*m,w=g*g+y*y;if(x<f&&w<f){l.push(o,s);return}var b=h*v+d*m,C=-h*g-d*y,S=x-b*b,D=w-C*C;if(S<f&&b>=0&&D<f&&C>=0){l.push(o,s);return}var _=[],T=[];qc(t,n,i,o,.5,_),qc(e,r,a,s,.5,T),x$(_[0],T[0],_[1],T[1],_[2],T[2],_[3],T[3],l,u),x$(_[4],T[4],_[5],T[5],_[6],T[6],_[7],T[7],l,u)}function zst(t,e){var n=y$(t),r=[];e=e||1;for(var i=0;i<n.length;i++){var a=n[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],f=a[u++],h=a[u++],d=a[u++],p=a[u++],v=a[u++];x$(s,l,c,f,h,d,p,v,o,e),s=p,l=v}r.push(o)}return r}function Foe(t,e,n){var r=t[e],i=t[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*n)),s=Math.floor(n/o);s===0&&(s=1,o=n);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,f=n-c;if(f>0)for(var u=0;u<f;u++)l[u%o]+=1;return l}function N9(t,e,n){for(var r=t.r0,i=t.r,a=t.startAngle,o=t.endAngle,s=Math.abs(o-a),l=s*i,u=i-r,c=l>Math.abs(u),f=Foe([l,u],c?0:1,e),h=(c?s:u)/f.length,d=0;d<f.length;d++)for(var p=(c?u:s)/f[d],v=0;v<f[d];v++){var m={};c?(m.startAngle=a+h*d,m.endAngle=a+h*(d+1),m.r0=r+p*v,m.r=r+p*(v+1)):(m.startAngle=a+p*v,m.endAngle=a+p*(v+1),m.r0=r+h*d,m.r=r+h*(d+1)),m.clockwise=t.clockwise,m.cx=t.cx,m.cy=t.cy,n.push(m)}}function Bst(t,e,n){for(var r=t.width,i=t.height,a=r>i,o=Foe([r,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",f=t[s]/o.length,h=0;h<o.length;h++)for(var d=t[l]/o[h],p=0;p<o[h];p++){var v={};v[u]=h*f,v[c]=p*d,v[s]=f,v[l]=d,v.x+=t.x,v.y+=t.y,n.push(v)}}function k9(t,e,n,r){return t*r-n*e}function Vst(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,h=k9(c,f,l,u);if(Math.abs(h)<1e-6)return null;var d=t-i,p=e-a,v=k9(d,p,c,f)/h;return v<0||v>1?null:new tt(v*l+t,v*u+e)}function Wst(t,e,n){var r=new tt;tt.sub(r,n,e),r.normalize();var i=new tt;tt.sub(i,t,e);var a=i.dot(r);return a}function ep(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function Ust(t,e,n){for(var r=t.length,i=[],a=0;a<r;a++){var o=t[a],s=t[(a+1)%r],l=Vst(o[0],o[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&i.push({projPt:Wst(l,e,n),pt:l,idx:a})}if(i.length<2)return[{points:t},{points:t}];i.sort(function(m,g){return m.projPt-g.projPt});var u=i[0],c=i[i.length-1];if(c.idx<u.idx){var f=u;u=c,c=f}for(var h=[u.pt.x,u.pt.y],d=[c.pt.x,c.pt.y],p=[h],v=[d],a=u.idx+1;a<=c.idx;a++)ep(p,t[a].slice());ep(p,d),ep(p,h);for(var a=c.idx+1;a<=u.idx+r;a++)ep(v,t[a%r].slice());return ep(v,h),ep(v,d),[{points:p},{points:v}]}function I9(t){var e=t.points,n=[],r=[];Vne(e,n,r);var i=new Et(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=i.width,o=i.height,s=i.x,l=i.y,u=new tt,c=new tt;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),Ust(e,u,c)}function eS(t,e,n,r){if(n===1)r.push(e);else{var i=Math.floor(n/2),a=t(e);eS(t,a[0],i,r),eS(t,a[1],n-i,r)}return r}function Gst(t,e){for(var n=[],r=0;r<e;r++)n.push(Y3(t));return n}function Hst(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function jst(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}function qst(t,e){var n=[],r=t.shape,i;switch(t.type){case"rect":Bst(r,e,n),i=qn;break;case"sector":N9(r,e,n),i=El;break;case"circle":N9({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,n),i=El;break;default:var a=t.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=$e(zst(t.getUpdatedPathProxy(),o),function(g){return jst(g)}),l=s.length;if(l===0)eS(I9,{points:s[0]},e,n);else if(l===e)for(var u=0;u<l;u++)n.push({points:s[u]});else{var c=0,f=$e(s,function(g){var y=[],x=[];Vne(g,y,x);var w=(x[1]-y[1])*(x[0]-y[0]);return c+=w,{poly:g,area:w}});f.sort(function(g,y){return y.area-g.area});for(var h=e,u=0;u<l;u++){var d=f[u];if(h<=0)break;var p=u===l-1?h:Math.ceil(d.area/c*e);p<0||(eS(I9,{points:d.poly},p,n),h-=p)}}i=Tx;break}if(!i)return Gst(t,e);for(var v=[],u=0;u<n.length;u++){var m=new i;m.setShape(n[u]),Hst(t,m),v.push(m)}return v}function Kst(t,e){var n=t.length,r=e.length;if(n===r)return[t,e];for(var i=[],a=[],o=n<r?t:e,s=Math.min(n,r),l=Math.abs(r-n)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,f=[o[0],o[1]],h=l,d=2;d<s;){var p=o[d-2],v=o[d-1],m=o[d++],g=o[d++],y=o[d++],x=o[d++],w=o[d++],b=o[d++];if(h<=0){f.push(m,g,y,x,w,b);continue}for(var C=Math.min(h,c-1)+1,S=1;S<=C;S++){var D=S/C;qc(p,m,y,w,D,i),qc(v,g,x,b,D,a),p=i[3],v=a[3],f.push(i[1],a[1],i[2],a[2],p,v),m=i[5],g=a[5],y=i[6],x=a[6]}h-=C-1}return o===t?[f,e]:[t,f]}function R9(t,e){for(var n=t.length,r=t[n-2],i=t[n-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function Xst(t,e){for(var n,r,i,a=[],o=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],u=e[s],c=void 0,f=void 0;l?u?(n=Kst(l,u),c=n[0],f=n[1],r=c,i=f):(f=R9(i||l,l),c=l):(c=R9(r||u,u),f=u),a.push(c),o.push(f)}return[a,o]}function $9(t){for(var e=0,n=0,r=0,i=t.length,a=0,o=i-2;a<i;o=a,a+=2){var s=t[o],l=t[o+1],u=t[a],c=t[a+1],f=s*c-u*l;e+=f,n+=(s+u)*f,r+=(l+c)*f}return e===0?[t[0]||0,t[1]||0]:[n/e/3,r/e/3,e]}function Yst(t,e,n,r){for(var i=(t.length-2)/6,a=1/0,o=0,s=t.length,l=s-2,u=0;u<i;u++){for(var c=u*6,f=0,h=0;h<s;h+=2){var d=h===0?c:(c+h-2)%l+2,p=t[d]-n[0],v=t[d+1]-n[1],m=e[h]-r[0],g=e[h+1]-r[1],y=m-p,x=g-v;f+=y*y+x*x}f<a&&(a=f,o=u)}return o}function Zst(t){for(var e=[],n=t.length,r=0;r<n;r+=2)e[r]=t[n-r-2],e[r+1]=t[n-r-1];return e}function Qst(t,e,n,r){for(var i=[],a,o=0;o<t.length;o++){var s=t[o],l=e[o],u=$9(s),c=$9(l);a==null&&(a=u[2]<0!=c[2]<0);var f=[],h=[],d=0,p=1/0,v=[],m=s.length;a&&(s=Zst(s));for(var g=Yst(s,l,u,c)*6,y=m-2,x=0;x<y;x+=2){var w=(g+x)%y+2;f[x+2]=s[w]-u[0],f[x+3]=s[w+1]-u[1]}if(f[0]=s[g]-u[0],f[1]=s[g+1]-u[1],n>0)for(var b=r/n,C=-r/2;C<=r/2;C+=b){for(var S=Math.sin(C),D=Math.cos(C),_=0,x=0;x<s.length;x+=2){var T=f[x],E=f[x+1],A=l[x]-c[0],R=l[x+1]-c[1],$=A*D-R*S,O=A*S+R*D;v[x]=$,v[x+1]=O;var M=$-T,B=O-E;_+=M*M+B*B}if(_<p){p=_,d=C;for(var P=0;P<v.length;P++)h[P]=v[P]}}else for(var z=0;z<m;z+=2)h[z]=l[z]-c[0],h[z+1]=l[z+1]-c[1];i.push({from:f,to:h,fromCp:u,toCp:c,rotation:-d})}return i}function tS(t){return t.__isCombineMorphing}var Loe="__mOriginal_";function nS(t,e,n){var r=Loe+e,i=t[r]||t[e];t[r]||(t[r]=t[e]);var a=n.replace,o=n.after,s=n.before;t[e]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),o&&o.apply(this,l),u}}function d0(t,e){var n=Loe+e;t[n]&&(t[e]=t[n],t[n]=null)}function M9(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function zoe(t,e){var n=t.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=Xst(y$(n),y$(r)),a=i[0],o=i[1],s=t.getComputedTransform(),l=e.getComputedTransform();function u(){this.transform=null}s&&M9(a,s),l&&M9(o,l),nS(e,"updateTransform",{replace:u}),e.transform=null;var c=Qst(a,o,10,Math.PI),f=[];nS(e,"buildPath",{replace:function(h){for(var d=e.__morphT,p=1-d,v=[],m=0;m<c.length;m++){var g=c[m],y=g.from,x=g.to,w=g.rotation*d,b=g.fromCp,C=g.toCp,S=Math.sin(w),D=Math.cos(w);n0(v,b,C,d);for(var _=0;_<y.length;_+=2){var T=y[_],E=y[_+1],A=x[_],R=x[_+1],$=T*p+A*d,O=E*p+R*d;f[_]=$*D-O*S+v[0],f[_+1]=$*S+O*D+v[1]}var M=f[0],B=f[1];h.moveTo(M,B);for(var _=2;_<y.length;){var A=f[_++],R=f[_++],P=f[_++],z=f[_++],U=f[_++],H=f[_++];M===A&&B===R&&P===U&&z===H?h.lineTo(U,H):h.bezierCurveTo(A,R,P,z,U,H),M=U,B=H}}}})}function o4(t,e,n){if(!t||!e)return e;var r=n.done,i=n.during;zoe(t,e),e.__morphT=0;function a(){d0(e,"buildPath"),d0(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},pt({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},n)),e}function Jst(t,e,n,r,i,a){var o=16;t=i===n?0:Math.round(32767*(t-n)/(i-n)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,f=0;(t&u)>0&&(c=1),(e&u)>0&&(f=1),s+=u*u*(3*c^f),f===0&&(c===1&&(t=u-1-t,e=u-1-e),l=t,t=e,e=l)}return s}function rS(t){var e=1/0,n=1/0,r=-1/0,i=-1/0,a=$e(t,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),f=l.y+l.height/2+(u?u[5]:0);return e=Math.min(c,e),n=Math.min(f,n),r=Math.max(c,r),i=Math.max(f,i),[c,f]}),o=$e(a,function(s,l){return{cp:s,z:Jst(s[0],s[1],e,n,r,i),path:t[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function Boe(t){return qst(t.path,t.count)}function w$(){return{fromIndividuals:[],toIndividuals:[],count:0}}function elt(t,e,n){var r=[];function i(b){for(var C=0;C<b.length;C++){var S=b[C];tS(S)?i(S.childrenRef()):S instanceof Nt&&r.push(S)}}i(t);var a=r.length;if(!a)return w$();var o=n.dividePath||Boe,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),w$();r=rS(r),s=rS(s);for(var l=n.done,u=n.during,c=n.individualDelay,f=new nT,h=0;h<a;h++){var d=r[h],p=s[h];p.parent=e,p.copyTransform(f),c||zoe(d,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(b){for(var C=0;C<s.length;C++)s[C].addSelfToZr(b)}nS(e,"addSelfToZr",{after:function(b){v(b)}}),nS(e,"removeSelfFromZr",{after:function(b){for(var C=0;C<s.length;C++)s[C].removeSelfFromZr(b)}});function m(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,d0(e,"addSelfToZr"),d0(e,"removeSelfFromZr")}var g=s.length;if(c)for(var y=g,x=function(){y--,y===0&&(m(),l&&l())},h=0;h<g;h++){var w=c?pt({delay:(n.delay||0)+c(h,g,r[h],s[h]),done:x},n):n;o4(r[h],s[h],w)}else e.__morphT=0,e.animateTo({__morphT:1},pt({during:function(b){for(var C=0;C<g;C++){var S=s[C];S.__morphT=e.__morphT,S.dirtyShape()}u&&u(b)},done:function(){m();for(var b=0;b<t.length;b++)d0(t[b],"updateTransform");l&&l()}},n));return e.__zr&&v(e.__zr),{fromIndividuals:r,toIndividuals:s,count:g}}function tlt(t,e,n){var r=e.length,i=[],a=n.dividePath||Boe;function o(d){for(var p=0;p<d.length;p++){var v=d[p];tS(v)?o(v.childrenRef()):v instanceof Nt&&i.push(v)}}if(tS(t)){o(t.childrenRef());var s=i.length;if(s<r)for(var l=0,u=s;u<r;u++)i.push(Y3(i[l++%s]));i.length=r}else{i=a({path:t,count:r});for(var c=t.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),w$()}i=rS(i),e=rS(e);for(var f=n.individualDelay,u=0;u<r;u++){var h=f?pt({delay:(n.delay||0)+f(u,r,i[u],e[u])},n):n;o4(i[u],e[u],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function O9(t){return Me(t[0])}function P9(t,e){for(var n=[],r=t.length,i=0;i<r;i++)n.push({one:t[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)n[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!n[i].many.length){var l=n[s].many;if(l.length<=1)if(s)s=0;else return n;var a=l.length,u=Math.ceil(a/2);n[i].many=l.slice(u,a),n[s].many=l.slice(0,u),s++}return n}var nlt={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),r=0;r<t.count;r++){var i=Y3(t.path);i.setStyle("opacity",n),e.push(i)}return e},split:null};function RN(t,e,n,r,i,a){if(!t.length||!e.length)return;var o=pT("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;O9(t)&&(u=t,c=e),O9(e)&&(u=e,c=t);function f(g,y,x,w,b){var C=g.many,S=g.one;if(C.length===1&&!b){var D=y?C[0]:S,_=y?S:C[0];if(tS(D))f({many:[D],one:_},!0,x,w,!0);else{var T=s?pt({delay:s(x,w)},l):l;o4(D,_,T),a(D,_,D,_,T)}}else for(var E=pt({dividePath:nlt[n],individualDelay:s&&function(B,P,z,U){return s(B+x,w)}},l),A=y?elt(C,S,E):tlt(S,C,E),R=A.fromIndividuals,$=A.toIndividuals,O=R.length,M=0;M<O;M++){var T=s?pt({delay:s(M,O)},l):l;a(R[M],$[M],y?C[M]:g.one,y?g.one:C[M],T)}}for(var h=u?u===t:t.length>e.length,d=u?P9(c,u):P9(h?e:t,[h?t:e]),p=0,v=0;v<d.length;v++)p+=d[v].many.length;for(var m=0,v=0;v<d.length;v++)f(d[v],h,m,p),m+=d[v].many.length}function Yf(t){if(!t)return[];if(Me(t)){for(var e=[],n=0;n<t.length;n++)e.push(Yf(t[n]));return e}var r=[];return t.traverse(function(i){i instanceof Nt&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var Voe=1e4,rlt=Jn();function ilt(t){for(var e=t.dimensions,n=0;n<e.length;n++){var r=t.getDimensionInfo(e[n]);if(r&&r.otherDims.itemGroupId===0)return e[n]}}function F9(t){var e=[];return G(t,function(n){var r=n.data;if(!(r.count()>Voe))for(var i=r.getIndices(),a=ilt(r),o=0;o<i.length;o++)e.push({dataGroupId:n.dataGroupId,data:r,dim:n.dim||a,divide:n.divide,dataIndex:o})}),e}function $N(t,e,n){t.traverse(function(r){r instanceof Nt&&Ca(r,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})})}function MN(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function tp(t){t.stopAnimation(),t.isGroup&&t.traverse(function(e){e.stopAnimation()})}function alt(t,e,n){var r=pT("update",n,e);r&&t.traverse(function(i){if(i instanceof _g){var a=TZe(i);a&&i.animateFrom({style:a},r)}})}function olt(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++){var i=t[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Woe(t,e,n){var r=F9(t),i=F9(e);function a(g,y,x,w,b){(x||g)&&y.animateFrom({style:x&&x!==g?De(De({},x.style),g.style):g.style},b)}function o(g){for(var y=0;y<g.length;y++)if(g[y].dim)return g[y].dim}var s=o(r),l=o(i),u=!1;function c(g,y){return function(x){var w=x.data,b=x.dataIndex;if(y)return w.getId(b);var C=x.dataGroupId,S=g?s||l:l||s,D=S&&w.getDimensionInfo(S),_=D&&D.ordinalMeta;if(D){var T=w.get(D.name,b);return _&&_.categories[T]||T+""}var E=w.getRawDataItem(b);return E&&E.groupId?E.groupId+"":C||w.getId(b)}}var f=olt(r,i),h={};if(!f)for(var d=0;d<i.length;d++){var p=i[d],v=p.data.getItemGraphicEl(p.dataIndex);v&&(h[v.id]=!0)}function m(g,y){var x=r[y],w=i[g],b=w.data.hostModel,C=x.data.getItemGraphicEl(x.dataIndex),S=w.data.getItemGraphicEl(w.dataIndex);if(C===S){S&&alt(S,w.dataIndex,b);return}C&&h[C.id]||S&&(tp(S),C?(tp(C),MN(C),u=!0,RN(Yf(C),Yf(S),w.divide,b,g,a)):$N(S,b,g))}new Sy(r,i,c(!0,f),c(!1,f),null,"multiple").update(m).updateManyToOne(function(g,y){var x=i[g],w=x.data,b=w.hostModel,C=w.getItemGraphicEl(x.dataIndex),S=Un($e(y,function(D){return r[D].data.getItemGraphicEl(r[D].dataIndex)}),function(D){return D&&D!==C&&!h[D.id]});C&&(tp(C),S.length?(G(S,function(D){tp(D),MN(D)}),u=!0,RN(Yf(S),Yf(C),x.divide,b,g,a)):$N(C,b,x.dataIndex))}).updateOneToMany(function(g,y){var x=r[y],w=x.data.getItemGraphicEl(x.dataIndex);if(!(w&&h[w.id])){var b=Un($e(g,function(S){return i[S].data.getItemGraphicEl(i[S].dataIndex)}),function(S){return S&&S!==w}),C=i[g[0]].data.hostModel;b.length&&(G(b,function(S){return tp(S)}),w?(tp(w),MN(w),u=!0,RN(Yf(w),Yf(b),x.divide,C,g[0],a)):G(b,function(S){return $N(S,C,g[0])}))}}).updateManyToMany(function(g,y){new Sy(y,g,function(x){return r[x].data.getId(r[x].dataIndex)},function(x){return i[x].data.getId(i[x].dataIndex)}).update(function(x,w){m(g[x],y[w])}).execute()}).execute(),u&&G(e,function(g){var y=g.data,x=y.hostModel,w=x&&n.getViewOfSeriesModel(x),b=pT("update",x,0);w&&x.isAnimationEnabled()&&b&&b.duration>0&&w.group.traverse(function(C){C instanceof Nt&&!C.animators.length&&C.animateFrom({style:{opacity:0}},b)})})}function L9(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function z9(t){return Me(t)?t.sort().join(","):t}function Yu(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function slt(t,e){var n=ut(),r=ut(),i=ut();return G(t.oldSeries,function(a,o){var s=t.oldDataGroupIds[o],l=t.oldData[o],u=L9(a),c=z9(u);r.set(c,{dataGroupId:s,data:l}),Me(u)&&G(u,function(f){i.set(f,{key:c,dataGroupId:s,data:l})})}),G(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=L9(a),u=z9(l),c=r.get(u);if(c)n.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Yu(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Yu(s),data:s}]});else if(Me(l)){var f=[];G(l,function(p){var v=r.get(p);v.data&&f.push({dataGroupId:v.dataGroupId,divide:Yu(v.data),data:v.data})}),f.length&&n.set(u,{oldSeries:f,newSeries:[{dataGroupId:o,data:s,divide:Yu(s)}]})}else{var h=i.get(l);if(h){var d=n.get(h.key);d||(d={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:Yu(h.data)}],newSeries:[]},n.set(h.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:Yu(s)})}}}}),n}function B9(t,e){for(var n=0;n<t.length;n++){var r=e.seriesIndex!=null&&e.seriesIndex===t[n].seriesIndex||e.seriesId!=null&&e.seriesId===t[n].id;if(r)return n}}function llt(t,e,n,r){var i=[],a=[];G(xr(t.from),function(o){var s=B9(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Yu(e.oldData[s]),dim:o.dimension})}),G(xr(t.to),function(o){var s=B9(n.updatedSeries,o);if(s>=0){var l=n.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Yu(l),dim:o.dimension})}}),i.length>0&&a.length>0&&Woe(i,a,r)}function ult(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,n,r){G(xr(r.seriesTransition),function(i){G(xr(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][Kb]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(e,n,r){var i=rlt(n);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)G(xr(a),function(d){llt(d,i,r,n)});else{var o=slt(i,r);G(o.keys(),function(d){var p=o.get(d);Woe(p.oldSeries,p.newSeries,n)})}G(r.updatedSeries,function(d){d[Kb]&&(d[Kb]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],c=i.oldData=[],f=0;f<s.length;f++){var h=s[f].getData();h.count()<Voe&&(l.push(s[f]),u.push(s[f].get("dataGroupId")),c.push(h))}})}var ON=Math.sin,PN=Math.cos,Uoe=Math.PI,Vf=Math.PI*2,clt=180/Uoe,flt=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,i,a,o){this._add("C",e,n,r,i,a,o)},t.prototype.quadraticCurveTo=function(e,n,r,i){this._add("Q",e,n,r,i)},t.prototype.arc=function(e,n,r,i,a,o){this.ellipse(e,n,r,r,0,i,a,o)},t.prototype.ellipse=function(e,n,r,i,a,o,s,l){var u=s-o,c=!l,f=Math.abs(u),h=fc(f-Vf)||(c?u>=Vf:-u>=Vf),d=u>0?u%Vf:u%Vf+Vf,p=!1;h?p=!0:fc(f)?p=!1:p=d>=Uoe==!!c;var v=e+r*PN(o),m=n+i*ON(o);this._start&&this._add("M",v,m);var g=Math.round(a*clt);if(h){var y=1/this._p,x=(c?1:-1)*(Vf-y);this._add("A",r,i,g,1,+c,e+r*PN(o+x),n+i*ON(o+x)),y>.01&&this._add("A",r,i,g,0,+c,v,m)}else{var w=e+r*PN(s),b=n+i*ON(s);this._add("A",r,i,g,+p,+c,w,b)}},t.prototype.rect=function(e,n,r,i){this._add("M",e,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,i,a,o,s,l,u){for(var c=[],f=this._p,h=1;h<arguments.length;h++){var d=arguments[h];if(isNaN(d)){this._invalid=!0;return}c.push(Math.round(d*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}();const Goe=flt;var p0="none",hlt=Math.round;function dlt(t){var e=t.fill;return e!=null&&e!==p0}function plt(t){var e=t.stroke;return e!=null&&e!==p0}var b$=["lineCap","miterLimit","lineJoin"],vlt=$e(b$,function(t){return"stroke-"+t.toLowerCase()});function glt(t,e,n,r){var i=e.opacity==null?1:e.opacity;if(n instanceof Pl){t("opacity",i);return}if(dlt(e)){var a=ly(e.fill);t("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;(r||o<1)&&t("fill-opacity",o)}else t("fill",p0);if(plt(e)){var s=ly(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,f=e.strokeFirst;if((r||u!==1)&&t("stroke-width",u),(r||f)&&t("paint-order",f?"stroke":"fill"),(r||c<1)&&t("stroke-opacity",c),e.lineDash){var h=EL(n),d=h[0],p=h[1];d&&(p=hlt(p||0),t("stroke-dasharray",d.join(",")),(p||r)&&t("stroke-dashoffset",p))}else r&&t("stroke-dasharray",p0);for(var v=0;v<b$.length;v++){var m=b$[v];if(r||e[m]!==$2[m]){var g=e[m]||$2[m];g&&t(vlt[v],g)}}}else r&&t("stroke",p0)}var Hoe="http://www.w3.org/2000/svg",joe="http://www.w3.org/1999/xlink",mlt="http://www.w3.org/2000/xmlns/",ylt="http://www.w3.org/XML/1998/namespace";function qoe(t){return document.createElementNS(Hoe,t)}function Rr(t,e,n,r,i){return{tag:t,attrs:n||{},children:r,text:i,key:e}}function xlt(t,e){var n=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),n.push(a))}return"<"+t+" "+n.join(" ")+">"}function wlt(t){return"</"+t+">"}function s4(t,e){e=e||{};var n=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return xlt(o,s)+(o!=="style"?oa(l):l||"")+(a?""+n+$e(a,function(u){return r(u)}).join(n)+n:"")+wlt(o)}return r(t)}function blt(t,e,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,a=r+"}",o=$e(Ot(t),function(l){return l+i+$e(Ot(t[l]),function(u){return u+":"+t[l][u]+";"}).join(r)+a}).join(r),s=$e(Ot(e),function(l){return"@keyframes "+l+i+$e(Ot(e[l]),function(u){return u+i+$e(Ot(e[l][u]),function(c){var f=e[l][u][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function C$(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function V9(t,e,n,r){return Rr("svg","root",{width:t,height:e,xmlns:Hoe,"xmlns:xlink":joe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var W9={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Zf="transform-origin";function Clt(t,e,n){var r=De({},t.shape);De(r,e),t.buildPath(n,r);var i=new Goe;return i.reset(dne(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function Slt(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[Zf]=n+"px "+r+"px")}var Dlt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Koe(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function _lt(t,e,n){var r=t.shape.paths,i={},a,o;if(G(r,function(l){var u=C$(n.zrId);u.animation=!0,LT(l,{},u,!0);var c=u.cssAnims,f=u.cssNodes,h=Ot(c),d=h.length;if(d){o=h[d-1];var p=c[o];for(var v in p){var m=p[v];i[v]=i[v]||{d:""},i[v].d+=m.d||""}for(var g in f){var y=f[g].animation;y.indexOf(o)>=0&&(a=y)}}}),!!a){e.d=!1;var s=Koe(i,n);return a.replace(o,s)}}function U9(t){return Be(t)?W9[t]?"cubic-bezier("+W9[t]+")":M3(t)?t:"":""}function LT(t,e,n,r){var i=t.animators,a=i.length,o=[];if(t instanceof eL){var s=_lt(t,e,n);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=i[u],f=[c.getMaxTime()/1e3+"s"],h=U9(c.getClip().easing),d=c.getDelay();h?f.push(h):f.push("linear"),d&&f.push(d/1e3+"s"),c.getLoop()&&f.push("infinite");var p=f.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function v(y){var x=y[1],w=x.length,b={},C={},S={},D="animation-timing-function";function _(se,ee,oe){for(var ce=se.getTracks(),ve=se.getMaxTime(),ye=0;ye<ce.length;ye++){var _e=ce[ye];if(_e.needsAnimate()){var Ie=_e.keyframes,Ne=_e.propName;if(oe&&(Ne=oe(Ne)),Ne)for(var We=0;We<Ie.length;We++){var qe=Ie[We],ft=Math.round(qe.time/ve*100)+"%",at=U9(qe.easing),bt=qe.rawValue;(Be(bt)||Zt(bt))&&(ee[ft]=ee[ft]||{},ee[ft][Ne]=qe.rawValue,at&&(ee[ft][D]=at))}}}}for(var T=0;T<w;T++){var E=x[T],A=E.targetName;A?A==="shape"&&_(E,C):!r&&_(E,b)}for(var R in b){var $={};yne($,t),De($,b[R]);var O=pne($),M=b[R][D];S[R]=O?{transform:O}:{},Slt(S[R],$),M&&(S[R][D]=M)}var B,P=!0;for(var R in C){S[R]=S[R]||{};var z=!B,M=C[R][D];z&&(B=new Tl);var U=B.len();B.reset(),S[R].d=Clt(t,C[R],B);var H=B.len();if(!z&&U!==H){P=!1;break}M&&(S[R][D]=M)}if(!P)for(var R in S)delete S[R].d;if(!r)for(var T=0;T<w;T++){var E=x[T],A=E.targetName;A==="style"&&_(E,S,function(ce){return Dlt[ce]})}for(var F=Ot(S),W=!0,j,T=1;T<F.length;T++){var K=F[T-1],Y=F[T];if(S[K][Zf]!==S[Y][Zf]){W=!1;break}j=S[K][Zf]}if(W&&j){for(var R in S)S[R][Zf]&&delete S[R][Zf];e[Zf]=j}if(Un(F,function(se){return Ot(S[se]).length>0}).length){var Z=Koe(S,n);return Z+" "+y[0]+" both"}}for(var m in l){var s=v(l[m]);s&&o.push(s)}if(o.length){var g=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+g]={animation:o.join(",")},e.class=g}}var Ey=Math.round;function Xoe(t){return t&&Be(t.src)}function Yoe(t){return t&&lt(t.toDataURL)}function l4(t,e,n,r){glt(function(i,a){var o=i==="fill"||i==="stroke";o&&hne(a)?Qoe(e,t,i,r):o&&P3(a)?Joe(n,t,i,r):t[i]=a},e,n,!1),Rlt(n,t,r)}function G9(t){return fc(t[0]-1)&&fc(t[1])&&fc(t[2])&&fc(t[3]-1)}function Tlt(t){return fc(t[4])&&fc(t[5])}function u4(t,e,n){if(e&&!(Tlt(e)&&G9(e))){var r=n?10:1e4;t.transform=G9(e)?"translate("+Ey(e[4]*r)/r+" "+Ey(e[5]*r)/r+")":SKe(e)}}function H9(t,e,n){for(var r=t.points,i=[],a=0;a<r.length;a++)i.push(Ey(r[a][0]*n)/n),i.push(Ey(r[a][1]*n)/n);e.points=i.join(" ")}function j9(t){return!t.smooth}function Elt(t){var e=$e(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=n[o[0]];s!=null&&(r[o[1]]=Ey(s*i)/i)}}}var Alt={circle:[Elt(["cx","cy","r"])],polyline:[H9,j9],polygon:[H9,j9]};function Nlt(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function Zoe(t,e){var n=t.style,r=t.shape,i=Alt[t.type],a={},o=e.animation,s="path",l=t.style.strokePercent,u=e.compress&&dne(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&Nlt(t))&&!(l<1)){s=t.type;var c=Math.pow(10,u);i[0](r,a,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var h=t.path;f&&(h.beginPath(),t.buildPath(h,t.shape),t.pathUpdated());var d=h.getVersion(),p=t,v=p.__svgPathBuilder;(p.__svgPathVersion!==d||!v||l!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new Goe),v.reset(u),h.rebuildPath(v,l),v.generateStr(),p.__svgPathVersion=d,p.__svgPathStrokePercent=l),a.d=v.getStr()}return u4(a,t.transform),l4(a,n,t,e),e.animation&&LT(t,a,e),Rr(s,t.id+"",a)}function klt(t,e){var n=t.style,r=n.image;if(r&&!Be(r)&&(Xoe(r)?r=r.src:Yoe(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,a=n.y||0,o=n.width,s=n.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),u4(l,t.transform),l4(l,n,t,e),e.animation&&LT(t,l,e),Rr("image",t.id+"",l)}}function Ilt(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||jc,a=n.x||0,o=_Ke(n.y||0,iT(i),n.textBaseline),s=DKe[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(Yne(n)){var u="",c=n.fontStyle,f=Xne(n.fontSize);if(!parseFloat(f))return;var h=n.fontFamily||Mte,d=n.fontWeight;u+="font-size:"+f+";font-family:"+h+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),d&&d!=="normal"&&(u+="font-weight:"+d+";"),l.style=u}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),u4(l,t.transform),l4(l,n,t,e),e.animation&&LT(t,l,e),Rr("text",t.id+"",l,void 0,r)}}function q9(t,e){if(t instanceof Nt)return Zoe(t,e);if(t instanceof Pl)return klt(t,e);if(t instanceof M2)return Ilt(t,e)}function Rlt(t,e,n){var r=t.style;if(TKe(r)){var i=EKe(t),a=n.shadowCache,o=a[i];if(!o){var s=t.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=r.shadowOffsetX||0,f=r.shadowOffsetY||0,h=r.shadowBlur,d=ly(r.shadowColor),p=d.opacity,v=d.color,m=h/2/l,g=h/2/u,y=m+" "+g;o=n.zrId+"-s"+n.shadowIdx++,n.defs[o]=Rr("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Rr("feDropShadow","",{dx:c/l,dy:f/u,stdDeviation:y,"flood-color":v,"flood-opacity":p})]),a[i]=o}e.filter=tT(o)}}function Qoe(t,e,n,r){var i=t[n],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(cne(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(fne(i))a="radialGradient",o.cx=wt(i.x,.5),o.cy=wt(i.y,.5),o.r=wt(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var f=pR(s[u].offset)*100+"%",h=s[u].color,d=ly(h),p=d.color,v=d.opacity,m={offset:f};m["stop-color"]=p,v<1&&(m["stop-opacity"]=v),l.push(Rr("stop",u+"",m))}var g=Rr(a,"",o,l),y=s4(g),x=r.gradientCache,w=x[y];w||(w=r.zrId+"-g"+r.gradientIdx++,x[y]=w,o.id=w,r.defs[w]=Rr(a,w,o,l)),e[n]=tT(w)}function Joe(t,e,n,r){var i=t.style[n],a=t.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",f;if(une(i)){var h=i.imageWidth,d=i.imageHeight,p=void 0,v=i.image;if(Be(v)?p=v:Xoe(v)?p=v.src:Yoe(v)&&(p=v.toDataURL()),typeof Image>"u"){var m="Image width/height must been given explictly in svg-ssr renderer.";Ya(h,m),Ya(d,m)}else if(h==null||d==null){var g=function(T,E){if(T){var A=T.elm,R=h||E.width,$=d||E.height;T.tag==="pattern"&&(u?($=1,R/=a.width):c&&(R=1,$/=a.height)),T.attrs.width=R,T.attrs.height=$,A&&(A.setAttribute("width",R),A.setAttribute("height",$))}},y=H3(p,null,t,function(T){l||g(C,T),g(f,T)});y&&y.width&&y.height&&(h=h||y.width,d=d||y.height)}f=Rr("image","img",{href:p,width:h,height:d}),o.width=h,o.height=d}else i.svgElement&&(f=ht(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(f){var x,w;l?x=w=1:u?(w=1,x=o.width/a.width):c?(x=1,w=o.height/a.height):o.patternUnits="userSpaceOnUse",x!=null&&!isNaN(x)&&(o.width=x),w!=null&&!isNaN(w)&&(o.height=w);var b=pne(i);b&&(o.patternTransform=b);var C=Rr("pattern","",o,[f]),S=s4(C),D=r.patternCache,_=D[S];_||(_=r.zrId+"-p"+r.patternIdx++,D[S]=_,o.id=_,C=r.defs[_]=Rr("pattern",_,o,[f])),e[n]=tT(_)}}function $lt(t,e,n){var r=n.clipPathCache,i=n.defs,a=r[t.id];if(!a){a=n.zrId+"-c"+n.clipPathIdx++;var o={id:a};r[t.id]=a,i[a]=Rr("clipPath",a,o,[Zoe(t,n)])}e["clip-path"]=tT(a)}function K9(t){return document.createTextNode(t)}function nh(t,e,n){t.insertBefore(e,n)}function X9(t,e){t.removeChild(e)}function Y9(t,e){t.appendChild(e)}function ese(t){return t.parentNode}function tse(t){return t.nextSibling}function FN(t,e){t.textContent=e}var Z9=58,Mlt=120,Olt=Rr("","");function S$(t){return t===void 0}function Xs(t){return t!==void 0}function Plt(t,e,n){for(var r={},i=e;i<=n;++i){var a=t[i].key;a!==void 0&&(r[a]=i)}return r}function Lm(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function Ay(t){var e,n=t.children,r=t.tag;if(Xs(r)){var i=t.elm=qoe(r);if(c4(Olt,t),Me(n))for(e=0;e<n.length;++e){var a=n[e];a!=null&&Y9(i,Ay(a))}else Xs(t.text)&&!Ye(t.text)&&Y9(i,K9(t.text))}else t.elm=K9(t.text);return t.elm}function nse(t,e,n,r,i){for(;r<=i;++r){var a=n[r];a!=null&&nh(t,Ay(a),e)}}function iS(t,e,n,r){for(;n<=r;++n){var i=e[n];if(i!=null)if(Xs(i.tag)){var a=ese(i.elm);X9(a,i.elm)}else X9(t,i.elm)}}function c4(t,e){var n,r=e.elm,i=t&&t.attrs||{},a=e.attrs||{};if(i!==a){for(n in a){var o=a[n],s=i[n];s!==o&&(o===!0?r.setAttribute(n,""):o===!1?r.removeAttribute(n):n.charCodeAt(0)!==Mlt?r.setAttribute(n,o):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(mlt,n,o):n.charCodeAt(3)===Z9?r.setAttributeNS(ylt,n,o):n.charCodeAt(5)===Z9?r.setAttributeNS(joe,n,o):r.setAttribute(n,o))}for(n in i)n in a||r.removeAttribute(n)}}function Flt(t,e,n){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],l=n.length-1,u=n[0],c=n[l],f,h,d,p;r<=a&&i<=l;)o==null?o=e[++r]:s==null?s=e[--a]:u==null?u=n[++i]:c==null?c=n[--l]:Lm(o,u)?(cp(o,u),o=e[++r],u=n[++i]):Lm(s,c)?(cp(s,c),s=e[--a],c=n[--l]):Lm(o,c)?(cp(o,c),nh(t,o.elm,tse(s.elm)),o=e[++r],c=n[--l]):Lm(s,u)?(cp(s,u),nh(t,s.elm,o.elm),s=e[--a],u=n[++i]):(S$(f)&&(f=Plt(e,r,a)),h=f[u.key],S$(h)?nh(t,Ay(u),o.elm):(d=e[h],d.tag!==u.tag?nh(t,Ay(u),o.elm):(cp(d,u),e[h]=void 0,nh(t,d.elm,o.elm))),u=n[++i]);(r<=a||i<=l)&&(r>a?(p=n[l+1]==null?null:n[l+1].elm,nse(t,p,n,i,l)):iS(t,e,r,a))}function cp(t,e){var n=e.elm=t.elm,r=t.children,i=e.children;t!==e&&(c4(t,e),S$(e.text)?Xs(r)&&Xs(i)?r!==i&&Flt(n,r,i):Xs(i)?(Xs(t.text)&&FN(n,""),nse(n,null,i,0,i.length-1)):Xs(r)?iS(n,r,0,r.length-1):Xs(t.text)&&FN(n,""):t.text!==e.text&&(Xs(r)&&iS(n,r,0,r.length-1),FN(n,e.text)))}function Llt(t,e){if(Lm(t,e))cp(t,e);else{var n=t.elm,r=ese(n);Ay(e),r!==null&&(nh(r,e.elm,tse(n)),iS(r,[t],0,0))}return e}var zlt=0,Blt=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=Q9(),this.configLayer=Q9(),this.storage=n,this._opts=r=De({},r),this.root=e,this._id="zr"+zlt++,this._oldVNode=V9(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=qoe("svg");c4(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",Llt(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return q9(e,C$(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=C$(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress;var o=[],s=this._bgVNode=Vlt(r,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=Rr("g","main",{},[]);this._paintList(n,a,l?l.children:o),l&&o.push(l);var u=$e(Ot(a.defs),function(h){return a.defs[h]});if(u.length&&o.push(Rr("defs","defs",{},u)),e.animation){var c=blt(a.cssNodes,a.cssAnims,{newline:!0});if(c){var f=Rr("style","stl",{},[],c);o.push(f)}}return V9(r,i,o,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},s4(this.renderToVNode({animation:wt(e.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:wt(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var i=e.length,a=[],o=0,s,l,u=0,c=0;c<i;c++){var f=e[c];if(!f.invisible){var h=f.__clipPaths,d=h&&h.length||0,p=l&&l.length||0,v=void 0;for(v=Math.max(d-1,p-1);v>=0&&!(h&&l&&h[v]===l[v]);v--);for(var m=p-1;m>v;m--)o--,s=a[o-1];for(var g=v+1;g<d;g++){var y={};$lt(h[g],y,n);var x=Rr("g","clip-g-"+u++,y,[]);(s?s.children:r).push(x),a[o++]=x,s=x}l=h;var w=q9(f,n);w&&(s?s.children:r).push(w)}}},t.prototype.resize=function(e,n){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),i&&a&&(a.style.display="none",e=Op(i,0,r),n=Op(i,1,r),a.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,a){var o=a.style;o.width=e+"px",o.height=n+"px"}if(P3(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=NKe(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function Q9(t){return function(){}}function Vlt(t,e,n,r){var i;if(n&&n!=="none")if(i=Rr("rect","bg",{width:t,height:e,x:"0",y:"0",id:"0"}),hne(n))Qoe({fill:n},i.attrs,"fill",r);else if(P3(n))Joe({style:{fill:n},dirty:ti,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",r);else{var a=ly(n),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}const Wlt=Blt;function Ult(t){t.registerPainter("svg",Wlt)}function J9(t,e,n){var r=wu.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=a*n,r}var Glt=function(t){an(e,t);function e(n,r,i){var a=t.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||I2,typeof n=="string"?o=J9(n,r,i):Ye(n)&&(o=n,n=o.id),a.id=n,a.dom=o;var s=o.style;return s&&(N3(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=J9("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new Et(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var x=new Et(0,0,0,0);x.copy(y),o.push(x)}else{for(var w=!1,b=1/0,C=0,S=0;S<o.length;++S){var D=o[S];if(D.intersect(y)){var _=new Et(0,0,0,0);_.copy(D),_.union(y),o[S]=_,w=!0;break}else if(l){u.copy(y),u.union(D);var T=y.width*y.height,E=D.width*D.height,A=u.width*u.height,R=A-T-E;R<b&&(b=R,C=S)}}if(l&&(o[C].union(y),w=!0),!w){var x=new Et(0,0,0,0);x.copy(y),o.push(x)}l||(l=o.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=n[f];if(h){var d=h.shouldBePainted(i,a,!0,!0),p=h.__isRendered&&(h.__dirty&Fa||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Fa||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=r[f],d=h.shouldBePainted(i,a,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<o.length;){if(o[f].isZero()){o.splice(f,1);continue}for(var g=f+1;g<o.length;)o[f].intersect(o[g])?(m=!0,o[f].union(o[g]),o.splice(g,1)):g++;f++}}while(m);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=n+"px",o.height=r+"px"),a.width=n*i,a.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(n,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!n,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/f,l/f));var d=this.domBack;function p(v,m,g,y){if(o.clearRect(v,m,g,y),r&&r!=="transparent"){var x=void 0;if(yx(r)){var w=r.global||r.__width===g&&r.__height===y;x=w&&r.__canvasGradient||GR(o,r,{x:0,y:0,width:g,height:y}),r.__canvasGradient=x,r.__width=g,r.__height=y}else Lte(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,x=HR(o,r,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}}));o.save(),o.fillStyle=x||r,o.fillRect(v,m,g,y),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(d,v,m,g,y),o.restore())}!i||u?p(0,0,s,l):i.length&&G(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},e}(Fs);const LN=Glt;var e7=1e5,Wf=314159,fb=.01,Hlt=.001;function jlt(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function qlt(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var Klt=function(){function t(e,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=De({},r||{}),this.dpr=r.devicePixelRatio||I2,this._singleCanvas=a,this.root=e;var o=e.style;o&&(N3(e),e.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,f=c.width,h=c.height;r.width!=null&&(f=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new LN(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Wf]=d,d.zlevel=Wf,s.push(Wf),this._domRoot=e}else{this._width=Op(e,0,r),this._height=Op(e,1,r);var u=this._domRoot=qlt(this._width,this._height);e.appendChild(u)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<n;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(e7)),a||(a=r.ctx,a.save()),gh(a,s,i,o===n-1))}a&&a.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(e7)},t.prototype.paintOne=function(e,n){AL(e,n)},t.prototype._paintList=function(e,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,n,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;cR(function(){l._paintList(e,n,r,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(Wf).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var c=!0,f=!1,h=function(v){var m=a[v],g=m.ctx,y=o&&m.createRepaintRects(e,n,d._width,d._height),x=r?m.__startIndex:m.__drawIndex,w=!r&&m.incremental&&Date.now,b=w&&Date.now(),C=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,C,y);else if(x===m.__startIndex){var S=e[x];(!S.incremental||!S.notClear||r)&&m.clear(!1,C,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=m.__startIndex);var D,_=function(R){var $={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(D=x;D<m.__endIndex;D++){var O=e[D];if(O.__inHover&&(f=!0),i._doPaintEl(O,m,o,R,$,D===m.__endIndex-1),w){var M=Date.now()-b;if(M>15)break}}$.prevElClipPaths&&g.restore()};if(y)if(y.length===0)D=m.__endIndex;else for(var T=d.dpr,E=0;E<y.length;++E){var A=y[E];g.save(),g.beginPath(),g.rect(A.x*T,A.y*T,A.width*T,A.height*T),g.clip(),_(A),g.restore()}else g.save(),_(),g.restore();m.__drawIndex=D,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<a.length;p++)h(p);return St.wxa&&G(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,i,a,o){var s=n.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(gh(s,e,a,o),e.setPrevPaintRect(l))}else gh(s,e,a,o)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Wf);var r=this._layers[e];return r||(r=new LN("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?mt(r,this._layerConfig[e],!0):this._layerConfig[e-fb]&&mt(r,this._layerConfig[e-fb],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&jlt(n)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=n,!n.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(n.dom,u.nextSibling):o.appendChild(n.dom)}else o.firstChild?o.insertBefore(n.dom,o.firstChild):o.appendChild(n.dom);n.__painter=this}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(n,this._layers[a],a)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(n,o,a)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(n,o,a)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function n(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;s!==u&&(s=u,o=0),i.incremental?(c=this.getLayer(u+Hlt,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?fb:0),this._needsManuallyCompositing),c.__builtin__||Q_("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,n(l),a=c),i.__dirty&Fa&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,G(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?mt(r[e],n,!0):r[e]=n;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+fb){var o=this._layers[a];mt(o,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,i=n[e];i&&(i.dom.parentNode.removeChild(i.dom),delete n[e],r.splice(kt(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),n!=null&&(i.height=n),e=Op(a,0,i),n=Op(a,1,i),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(Wf).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Wf].dom;var n=new LN("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,a=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];gh(r,c,o,l===u-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();const Xlt=Klt;function Ylt(t){t.registerPainter("canvas",Xlt)}Ms([uot,hit,Tot,Bat,Ylt,Ult,Xot,ult,dst,Nst,Lst]);function Zlt({options:t={}}){const{ref:e,width:n,height:r}=nq(),[i,a]=L.useState(null),o=()=>{if(!e.current)return;let s=trt.init(e.current,"light",{renderer:"canvas",devicePixelRatio:2,locale:"EN"});a(s)};return L.useEffect(()=>(o(),()=>i==null?void 0:i.dispose()),[]),L.useEffect(()=>{i==null||i.resize({width:n,height:r})},[n,r]),L.useEffect(()=>{i&&i.setOption(t,!0,!0)},[i,t]),I.jsx("div",{style:{width:"100%",height:"100%"},ref:e})}const rse=L.memo(Zlt,Gy);function Qlt({data:t,type:e="bar"}){const n=t.frequency,r=Object.keys(n),i={tooltip:{trigger:"axis",axisPointer:{type:"line",label:{show:!0}}},grid:{left:"1%",right:"1%",bottom:"2%",containLabel:!0,top:"5%"},xAxis:[{type:"category",data:r,axisTick:{alignWithLabel:!0},axisLabel:{overflow:"truncate",width:100},splitLine:{lineStyle:{color:"#888",type:"dashed",opacity:.3}}}],yAxis:[{type:"value",splitLine:{lineStyle:{color:"#888",type:"dashed",opacity:.3}}}],series:[{name:"Count",type:e,barWidth:"60%",data:r.map(a=>n[a]),color:"#2D72D2"}]};return I.jsx(rse,{options:i})}function Jlt({data:t}){const e=t.frequency,n={tooltip:{trigger:"item"},series:[{name:"Count",type:"pie",radius:"50%",data:Object.keys(e).map(r=>({value:e[r],name:r})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{textBorderColor:"transparent",color:"#888"}}]};return I.jsx(rse,{options:n})}const eut=[{label:"Bar",value:"bar"},{label:"Line",value:"line"},{label:"Pie",value:"pie"}];function tut({data:t}){const[e,n]=L.useState("bar"),r=e==="pie"?Jlt:Qlt;return I.jsxs(Il,{className:ds.chart,children:[I.jsx(hd,{small:!0,className:ds.switcher,options:eut,value:e,onValueChange:i=>n(i),intent:At.PRIMARY}),I.jsx(r,{data:t,type:e})]})}function nut(t){return kn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"14",width:"8",height:"8",rx:"2"}},{tag:"path",attr:{d:"m3 7 3 3 3-3"}},{tag:"path",attr:{d:"M6 10V5a2.95 2.95 0 0 1 3-3h1"}},{tag:"path",attr:{d:"M22 8a2 2 0 0 1-2 2"}},{tag:"path",attr:{d:"M20 2a2 2 0 0 1 2 2"}},{tag:"path",attr:{d:"M14 4a2 2 0 0 1 2-2"}},{tag:"path",attr:{d:"M16 10a2 2 0 0 1-2-2"}},{tag:"path",attr:{d:"M14 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"}},{tag:"path",attr:{d:"M20 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2"}}]})(t)}const rut=()=>I.jsxs(I.Fragment,{children:[I.jsx("h4",{style:{marginTop:30,color:"var(--danger)"},children:"Misspelled words *"}),I.jsx(Il,{className:ds.similarities,children:I.jsx(gj,{icon:"tick-circle",title:"Looks good",description:"Data Prep could not detect any misspelled* word"})})]});function iut({list:t=[],column:e}){const n=zn();if(!t.length)return I.jsx(rut,{});const r=a=>{let o=a.lhs,s=a.rhs;return a.lhs.frequency<a.rhs.frequency&&(o=a.rhs,s=a.lhs),{lhs:o,rhs:s}},i=(a,o)=>{e&&n(Td({column:e,type:zi.find_and_replace,options:{find:o.value,replace:a.value,caseSensitive:!0}}))};return I.jsxs(I.Fragment,{children:[I.jsx("h4",{style:{marginTop:30,color:"var(--danger)"},children:"Misspelled words *"}),I.jsx(OS,{bordered:!0,compact:!0,className:ds.similarities,children:t.map((a,o)=>{if(o>100)return I.jsx(I.Fragment,{});const{lhs:s,rhs:l}=r(a);return I.jsxs(Il,{interactive:!0,className:ds.row,children:[I.jsxs("div",{children:[I.jsxs("div",{className:ds.word,children:[a.lhs.value,I.jsx(L0,{className:ds.count,minimal:!0,intent:At.PRIMARY,children:a.lhs.frequency})]}),I.jsxs("div",{className:ds.word,style:{marginTop:5},children:[a.rhs.value,I.jsx(L0,{className:ds.count,minimal:!0,intent:At.WARNING,children:a.rhs.frequency})]})]}),I.jsx("div",{children:I.jsx(ou,{content:I.jsxs(I.Fragment,{children:["Replace all occurences of ",I.jsxs("em",{children:['"',l.value,'"']})," with"," ",I.jsxs("em",{children:['"',s.value,'"']})]}),children:I.jsx(Wt,{small:!0,outlined:!0,icon:I.jsx(nut,{size:16}),onClick:()=>i(s,l)})})})]},a.id)})})]})}const aut=["Zeros","Negatives","Missing values","Invalid values"];function out({column:t}){console.log(t);const[e,n]=L.useState(!1),[r,i]=L.useState(null),a=Pj();if(L.useEffect(()=>{n(!0);const o=a.getState();let s={data:o.data.transformed,column:t,type:o.data.details[t].type,extended:!0};setTimeout(()=>{Gje(s).then(l=>{i(l)}).catch(l=>console.info(l)).finally(()=>n(!1))})},[t]),!!t)return e||!r?I.jsx(h3,{visible:!0}):I.jsxs(I.Fragment,{children:[I.jsx("h3",{children:t}),I.jsx(tut,{data:r}),I.jsx("h4",{style:{marginTop:30},children:"Statistics"}),I.jsx(OS,{bordered:!0,compact:!0,style:{marginTop:10},children:Object.keys(r.profile).map(o=>{const s=r.profile[o],l=aut.includes(o)&&s;return I.jsxs(Il,{className:xu(ds.row,l&&ds.danger),interactive:!0,children:[I.jsx("div",{children:o}),I.jsx("div",{children:s.toLocaleString()})]},o)})}),r.type==="categorical"&&I.jsx(iut,{list:r.similarities,column:t})]})}const sut="_item_d2dm8_1",lut="_timeline_d2dm8_4",uut="_vertical_d2dm8_10",cut="_section_d2dm8_18",fut="_story_d2dm8_25",hut="_title_d2dm8_29",dut="_heading_d2dm8_33",put="_icon_d2dm8_39",vut="_column_d2dm8_50",gut="_active_d2dm8_53",mut="_next_d2dm8_65",yut="_blurred_d2dm8_97",Ar={item:sut,timeline:lut,vertical:uut,section:cut,story:fut,title:hut,heading:dut,icon:put,column:vut,active:gut,next:mut,blurred:yut},xut={data_profile:{label:"Data Profile",icon:"vertical-bar-chart-desc"},extended_profile:{label:"Extended Data Profile",icon:"panel-stats"},remove_rows:{label:"Remove rows",icon:"remove"},remove_duplicates:{icon:"applications",label:"Remove Duplicates"},remove_blanks:{icon:"cross",label:"Remove Blanks"},remove_specific:{icon:"filter",label:"Remove specific values"},remove_custom:{icon:"locate",label:"Custom conditions"},duplicate_column:{label:"Duplicate Column",icon:"duplicate",transform:zi.duplicate_column},insert_right_column:{label:"Insert column to the right",icon:"add-column-right"},insert_left_column:{label:"Insert column to the left",icon:"add-column-left"},find_and_replace:{label:"Find and Replace",icon:"search-text"},replace_characters:{label:"Replace characters",icon:"regex"},split_text:{label:"Split text",icon:"one-to-many"},merge_text:{label:"Merge text",icon:"many-to-one"},trim:{label:"Trim",icon:"cut"},trim_whitespace:{label:"Trim whitespaces",icon:Cj},trim_quotes:{label:"Trim quotes",icon:Tb},trim_prefix:{label:"Trim prefix",icon:Tb},trim_suffix:{label:"Trim suffix",icon:Tb},fill_missing:{label:"Fill missing values",icon:"edit"},delete_column:{label:"Delete column",icon:"trash"}};function wut(){return I.jsx("div",{className:xu(Ar.section,Ar.next),children:I.jsxs("div",{className:Ar.title,children:[I.jsx("div",{className:Ar.icon,children:I.jsx(ri,{icon:"route",size:16})}),I.jsx("div",{className:Ar.heading,children:"Transforms you apply next will go here"})]})})}const but=({id:t,config:e})=>{const{type:n,column:r,options:i}=e,{rowsAffected:a}=mn(u=>u.appState.execution[t]||{}),o=typeof a>"u",l=(kE[n]??(kE[n]=()=>I.jsx("div",{children:"Hello World"})))(a,r,i);return I.jsx("div",{className:Ar.story,children:I.jsx("div",{className:o&&_fe,children:l})})};function Cut({id:t,config:e,isActive:n=!1,isBlurred:r=!1}){const i=zn(),{type:a}=e,{icon:o="star-empty",label:s=a}=xut[a]||{},u=typeof o=="function"?o:ri,c=()=>{i(dn({path:"activeTransform",value:t}))};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:xu(Ar.section,n&&Ar.active,r&&Ar.blurred),children:[I.jsxs("div",{className:Ar.title,onClick:c,children:[I.jsx("div",{className:Ar.icon,children:I.jsx(u,{icon:o,size:16})}),I.jsx("div",{className:Ar.heading,children:s})]}),I.jsx(but,{config:e,id:t})]}),n&&I.jsx(wut,{})]})}function Sut(){return I.jsxs("div",{className:Ar.section,style:{pointerEvents:"none"},children:[I.jsxs("div",{className:Ar.title,children:[I.jsx("div",{className:Ar.icon,children:I.jsx(ri,{icon:"th",size:16})}),I.jsx("div",{className:Ar.heading,children:"Load data"})]}),I.jsx("div",{className:Ar.story,children:I.jsx("div",{children:"Load data from a csv file"})})]})}function Dut(){const{order:t,params:e}=mn(i=>i.appState.transforms),n=mn(i=>i.appState.activeTransform);let r=!1;return I.jsxs("div",{children:[I.jsx("h3",{className:"mb-10 quiet",children:"Applied Transforms"}),I.jsxs("div",{className:Ar.timeline,children:[I.jsx("div",{className:Ar.vertical}),I.jsx(Sut,{}),t.map(i=>{const a=i===n;a&&(r=!0);const o=e[i];return I.jsx(Cut,{id:i,config:o,isActive:a,isBlurred:r},i)})]})]})}const zN={quality:KUe,transforms:Dut,profile:out};function _ut(){const t=zn(),[e,n]=L.useState(!1),{open:r,type:i,column:a}=mn(u=>u.appState.drawer),o=mn(u=>u.appState.darkMode),s=zN[i]||(zN[i]=()=>I.jsx(I.Fragment,{})),l=()=>{t(dn({path:"drawer.open",value:!1})),n(!1)};return I.jsx(Wpe,{className:xu(o&&hv),size:"40vw",isOpen:r,onClose:l,hasBackdrop:!1,onOpened:()=>n(!0),lazy:!1,children:I.jsx("div",{className:Oce,style:{padding:10},children:e?I.jsx(s,{column:a}):I.jsx(h3,{visible:!0})})})}function Tut(){const t=mn(r=>r.toasts),e=zn(),n=r=>{e(m8e({id:r}))};return I.jsx(ive,{position:"top-right",children:Object.keys(t).map(r=>{const i=t[r];return I.jsx(yj,{onDismiss:()=>n(i.id),message:i.message,intent:i.intent,timeout:5e3},i.id)})})}const Eut={"shift+d":()=>{const e=Ov.getState().appState.darkMode;Ov.dispatch(dn({path:"darkMode",value:!e}))},"?":()=>{console.log("help requested")}};var ise={exports:{}};(function(t){(function(e,n,r){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function c(S,D,_){if(S.addEventListener){S.addEventListener(D,_,!1);return}S.attachEvent("on"+D,_)}function f(S){if(S.type=="keypress"){var D=String.fromCharCode(S.which);return S.shiftKey||(D=D.toLowerCase()),D}return i[S.which]?i[S.which]:a[S.which]?a[S.which]:String.fromCharCode(S.which).toLowerCase()}function h(S,D){return S.sort().join(",")===D.sort().join(",")}function d(S){var D=[];return S.shiftKey&&D.push("shift"),S.altKey&&D.push("alt"),S.ctrlKey&&D.push("ctrl"),S.metaKey&&D.push("meta"),D}function p(S){if(S.preventDefault){S.preventDefault();return}S.returnValue=!1}function v(S){if(S.stopPropagation){S.stopPropagation();return}S.cancelBubble=!0}function m(S){return S=="shift"||S=="ctrl"||S=="alt"||S=="meta"}function g(){if(!l){l={};for(var S in i)S>95&&S<112||i.hasOwnProperty(S)&&(l[i[S]]=S)}return l}function y(S,D,_){return _||(_=g()[S]?"keydown":"keypress"),_=="keypress"&&D.length&&(_="keydown"),_}function x(S){return S==="+"?["+"]:(S=S.replace(/\+{2}/g,"+plus"),S.split("+"))}function w(S,D){var _,T,E,A=[];for(_=x(S),E=0;E<_.length;++E)T=_[E],s[T]&&(T=s[T]),D&&D!="keypress"&&o[T]&&(T=o[T],A.push("shift")),m(T)&&A.push(T);return D=y(T,A,D),{key:T,modifiers:A,action:D}}function b(S,D){return S===null||S===n?!1:S===D?!0:b(S.parentNode,D)}function C(S){var D=this;if(S=S||n,!(D instanceof C))return new C(S);D.target=S,D._callbacks={},D._directMap={};var _={},T,E=!1,A=!1,R=!1;function $(H){H=H||{};var F=!1,W;for(W in _){if(H[W]){F=!0;continue}_[W]=0}F||(R=!1)}function O(H,F,W,j,K,Y){var Z,se,ee=[],oe=W.type;if(!D._callbacks[H])return[];for(oe=="keyup"&&m(H)&&(F=[H]),Z=0;Z<D._callbacks[H].length;++Z)if(se=D._callbacks[H][Z],!(!j&&se.seq&&_[se.seq]!=se.level)&&oe==se.action&&(oe=="keypress"&&!W.metaKey&&!W.ctrlKey||h(F,se.modifiers))){var ce=!j&&se.combo==K,ve=j&&se.seq==j&&se.level==Y;(ce||ve)&&D._callbacks[H].splice(Z,1),ee.push(se)}return ee}function M(H,F,W,j){D.stopCallback(F,F.target||F.srcElement,W,j)||H(F,W)===!1&&(p(F),v(F))}D._handleKey=function(H,F,W){var j=O(H,F,W),K,Y={},Z=0,se=!1;for(K=0;K<j.length;++K)j[K].seq&&(Z=Math.max(Z,j[K].level));for(K=0;K<j.length;++K){if(j[K].seq){if(j[K].level!=Z)continue;se=!0,Y[j[K].seq]=1,M(j[K].callback,W,j[K].combo,j[K].seq);continue}se||M(j[K].callback,W,j[K].combo)}var ee=W.type=="keypress"&&A;W.type==R&&!m(H)&&!ee&&$(Y),A=se&&W.type=="keydown"};function B(H){typeof H.which!="number"&&(H.which=H.keyCode);var F=f(H);if(F){if(H.type=="keyup"&&E===F){E=!1;return}D.handleKey(F,d(H),H)}}function P(){clearTimeout(T),T=setTimeout($,1e3)}function z(H,F,W,j){_[H]=0;function K(oe){return function(){R=oe,++_[H],P()}}function Y(oe){M(W,oe,H),j!=="keyup"&&(E=f(oe)),setTimeout($,10)}for(var Z=0;Z<F.length;++Z){var se=Z+1===F.length,ee=se?Y:K(j||w(F[Z+1]).action);U(F[Z],ee,j,H,Z)}}function U(H,F,W,j,K){D._directMap[H+":"+W]=F,H=H.replace(/\s+/g," ");var Y=H.split(" "),Z;if(Y.length>1){z(H,Y,F,W);return}Z=w(H,W),D._callbacks[Z.key]=D._callbacks[Z.key]||[],O(Z.key,Z.modifiers,{type:Z.action},j,H,K),D._callbacks[Z.key][j?"unshift":"push"]({callback:F,modifiers:Z.modifiers,action:Z.action,seq:j,level:K,combo:H})}D._bindMultiple=function(H,F,W){for(var j=0;j<H.length;++j)U(H[j],F,W)},c(S,"keypress",B),c(S,"keydown",B),c(S,"keyup",B)}C.prototype.bind=function(S,D,_){var T=this;return S=S instanceof Array?S:[S],T._bindMultiple.call(T,S,D,_),T},C.prototype.unbind=function(S,D){var _=this;return _.bind.call(_,S,function(){},D)},C.prototype.trigger=function(S,D){var _=this;return _._directMap[S+":"+D]&&_._directMap[S+":"+D]({},S),_},C.prototype.reset=function(){var S=this;return S._callbacks={},S._directMap={},S},C.prototype.stopCallback=function(S,D){var _=this;if((" "+D.className+" ").indexOf(" mousetrap ")>-1||b(D,_.target))return!1;if("composedPath"in S&&typeof S.composedPath=="function"){var T=S.composedPath()[0];T!==S.target&&(D=T)}return D.tagName=="INPUT"||D.tagName=="SELECT"||D.tagName=="TEXTAREA"||D.isContentEditable},C.prototype.handleKey=function(){var S=this;return S._handleKey.apply(S,arguments)},C.addKeycodes=function(S){for(var D in S)S.hasOwnProperty(D)&&(i[D]=S[D]);l=null},C.init=function(){var S=C(n);for(var D in S)D.charAt(0)!=="_"&&(C[D]=function(_){return function(){return S[_].apply(S,arguments)}}(D))},C.init(),e.Mousetrap=C,t.exports&&(t.exports=C),typeof r=="function"&&r.amd&&r(function(){return C})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(ise);var Aut=ise.exports;const t7=Al(Aut);function Nut(t){L.useEffect(()=>(Object.keys(t).forEach(e=>{t7.bind(e,t[e])}),()=>{Object.keys(t).forEach(e=>{t7.unbind(e,t[e])})}),[])}function kut(){Nut(Eut);const t=mn(e=>e.appState.darkMode);return I.jsxs("div",{className:xu("app",t&&hv),tabIndex:1,children:[I.jsx(xme,{}),I.jsx(Ree,{}),I.jsx(Tut,{}),I.jsxs("div",{className:"data-view",children:[I.jsx(OUe,{}),I.jsx(_ut,{})]})]})}BN.createRoot(document.getElementById("root")).render(I.jsx(nge,{store:Ov,children:I.jsx(kut,{})}));export{Qe as I,Sp as _,Dp as a,Pz as b,Che as p};
